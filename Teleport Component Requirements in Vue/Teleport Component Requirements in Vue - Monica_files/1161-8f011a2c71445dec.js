"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1161],{77397:function(e,t,o){o.d(t,{j:function(){return l}});var r=o(71576),n=o(34491),i=o(66084),s=o(52921);class a extends n.PN{onViewCreate(){var e,t;null===(e=(t=this.props).onViewCreate)||void 0===e||e.call(t)}onViewDestroy(){var e,t;null===(e=(t=this.props).onViewDestroy)||void 0===e||e.call(t)}constructor(...e){super(...e),(0,i._)(this,"props",void 0),(0,i._)(this,"someState",!0)}}(0,s.gn)([n.SB],a.prototype,"someState",void 0);let l=n._Y.createComponent("LifeCycle",a,e=>(0,r.jsx)(r.Fragment,{children:e.props.children}))},41013:function(e,t,o){o.d(t,{_:function(){return p}});var r=o(71576),n=o(34491),i=o(78716),s=o.n(i),a=o(66084),l=o(52921);class u extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,a._)(this,"props",void 0),(0,a._)(this,"someState",!0)}}(0,l.gn)([n.SB],u.prototype,"someState",void 0);let p=n._Y.createComponent("PromotionCountdown",u,e=>{let{className:t,itemCls:o,countdownController:n,persistHour:i,placeholder:a}=e.props,l=s()("countdown--EJd92",t),u=s()("item--z5_hd",o);if(!(null==n?void 0:n.countdown))return a?(0,r.jsx)("div",{className:l}):null;let{day:p,hour:c,minute:d,second:h}=n.countdown;return(0,r.jsxs)("div",{className:l,children:["0"!==p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:u,children:p}),(0,r.jsx)("span",{children:":"})]}),(i||"00"!==c)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:u,children:c}),(0,r.jsx)("span",{children:":"})]}),(0,r.jsx)("div",{className:u,children:d}),(0,r.jsx)("span",{children:":"}),(0,r.jsx)("div",{className:u,children:h})]})})},28031:function(e,t,o){o.d(t,{k:function(){return N}});var r=o(71576),n=o(34491),i=o(68104),s=o(61658),a=o(46731),l=o(59111),u=o(18918),p=o(663),c=o(82005),d=o(92660),h=o(62499),g=o(7441),m={selectWorkspaceDialog:"select-workspace-dialog--DSgXa",dialogTitle:"dialog-title--pc7FO",scrollView:"scroll-view--PpWRn",loading:"loading--a4vfY",createWorkspace:"create-workspace--_53xR",logo:"logo--v9iwe",plus:"plus--SUpxb",info:"info--OmCC7",title:"title--WK1_5",arrow:"arrow--JwBO4"},v=o(66084),C=o(52921),y=o(88882),f=o(98581);class w extends n.PN{get S(){return y.S.Global.components.SelectWorkspaceDialog}onViewCreate(){u.teamController.updateWorkspaceList(!1,!0)}onViewDestroy(){}async handleSelectWorkspace(e,t){this.props.onDisposed();let o=(0,f.v)({insertTarget:this.props.insertTarget,teamId:e,userId:t});await u.teamController.selectWorkspace({teamId:e,userId:t}),setTimeout(()=>{null==o||o.dispose()},2e3)}constructor(...e){super(...e),(0,v._)(this,"props",void 0),(0,v._)(this,"someState",!0)}}(0,C.gn)([n.SB],w.prototype,"someState",void 0),(0,C.gn)([n.Fl],w.prototype,"S",null);let S=n._Y.createComponent("SelectWorkspaceDialog",w,e=>{let{onDisposed:t,noPersonal:o,insertTarget:n}=e.props,a=u.teamController.teamInfos.filter(e=>"dissolved"!==e.teamStatus);return(0,r.jsxs)(i.u,{width:420,fixed:"dialogRoot"===n||"body"===n,className:m.selectWorkspaceDialog,style:{maxWidth:"90%"},onDispose:t,children:[(0,r.jsx)("div",{className:m.dialogTitle,children:e.S.dialogTitle}),(0,r.jsx)("div",{className:m.scrollView,children:u.teamController.teamInfosLoading?(0,r.jsx)(s.g,{className:m.loading}):(0,r.jsxs)(r.Fragment,{children:[!o&&u.teamController.personalInfo&&(0,r.jsx)(g.K,{name:u.teamController.personalInfo.workspaceName,avatar:u.teamController.personalInfo.workspaceAvatar,type:"personal",selected:!u.teamController.isTeamAccount,onClick:()=>{var t,o;e.handleSelectWorkspace(null===(t=u.teamController.personalInfo)||void 0===t?void 0:t.teamId,null===(o=u.teamController.personalInfo)||void 0===o?void 0:o.userId)}}),a.map(t=>{var o;let{teamId:n,teamName:i,teamAvatar:s,userId:a,isLocked:l}=t;return(0,r.jsx)(g.K,{name:i,avatar:s,isLocked:l,type:"team",selected:(null===(o=u.teamController.currentTeamInfo)||void 0===o?void 0:o.teamId)===n,onClick:()=>{e.handleSelectWorkspace(n,a)}},n)}),(0,r.jsx)(_,{vm:e})]})})]})}),_=(0,h.Pi)(function(e){let{vm:t}=e,{onDisposed:o}=t.props;return(0,r.jsxs)("div",{className:m.createWorkspace,onClick:()=>{o(),p.m.gotoCreateTeam()},children:[(0,r.jsx)("div",{className:m.logo,children:(0,r.jsx)("div",{className:m.plus,children:(0,r.jsx)(a.J,{name:d.UZ.lineOperationAdd})})}),(0,r.jsx)("div",{className:m.info,children:(0,r.jsx)("div",{className:m.title,children:t.S.createTeam})}),(0,r.jsx)("div",{className:m.arrow,children:(0,r.jsx)(l.L,{size:24})})]})}),N=c.t.createOpener(S)},7441:function(e,t,o){o.d(t,{K:function(){return S}});var r=o(71576),n=o(34491),i=o(58812),s=o(66084);class a extends n.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Fill/&#229;&#138;&#159;&#232;&#131;&#189;/&#233;&#148;&#129;\\">\\n<path id=\\"Subtract\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8.4375 6.65625C8.4375 4.74984 10.0021 3.1875 11.9531 3.1875C13.9041 3.1875 15.4688 4.74984 15.4688 6.65625V7.69055C15.1214 7.6875 14.7432 7.6875 14.3303 7.6875H14.3301H14.2969H9.70312H9.66994C9.21953 7.6875 8.81033 7.6875 8.4375 7.69146V6.65625ZM6.5625 7.79859V6.65625C6.5625 3.69565 8.98534 1.3125 11.9531 1.3125C14.9209 1.3125 17.3438 3.69565 17.3438 6.65625V7.78567C17.7719 7.8417 18.1641 7.93259 18.5397 8.08455C19.9051 8.63708 20.9879 9.71991 21.5405 11.0853C21.7577 11.6223 21.8501 12.1934 21.8943 12.8548C21.9375 13.5008 21.9375 14.2967 21.9375 15.295V15.3281V15.3613C21.9375 16.3595 21.9375 17.1554 21.8943 17.8015C21.8501 18.4628 21.7577 19.034 21.5405 19.5709C20.9879 20.9363 19.9051 22.0192 18.5397 22.5717C18.0027 22.789 17.4316 22.8814 16.7702 22.9256C16.1242 22.9688 15.3283 22.9688 14.33 22.9688H14.2969H9.70312H9.66997C8.67171 22.9688 7.87584 22.9688 7.22978 22.9256C6.56841 22.8814 5.99727 22.789 5.46033 22.5717C4.09491 22.0192 3.01208 20.9363 2.45955 19.5709C2.24227 19.034 2.14985 18.4628 2.10566 17.8015C2.06249 17.1554 2.06249 16.3596 2.0625 15.3613L2.0625 15.3281L2.0625 15.2949C2.06249 14.2967 2.06249 13.5008 2.10566 12.8548C2.14985 12.1934 2.24227 11.6223 2.45955 11.0853C3.01208 9.71991 4.09491 8.63708 5.46033 8.08455C5.80828 7.94375 6.17058 7.85538 6.5625 7.79859ZM11.0625 13.2188C11.0625 12.701 11.4822 12.2812 12 12.2812C12.5178 12.2812 12.9375 12.701 12.9375 13.2188V17.3438C12.9375 17.8615 12.5178 18.2812 12 18.2812C11.4822 18.2812 11.0625 17.8615 11.0625 17.3438V13.2188Z\\" fill=\\"#8C8C8C\\"/>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let u=n._Y.createComponent("FillFeatureLockIcon",a,e=>(0,r.jsx)(i.s,{...e.props,name:"FillFeatureLockIcon",iconData:l}));var p=o(92660),c=o(78716),d=o.n(c),h=o(46731),g=o(25157),m=o(48023),v=o(59111),C={workspaceItem:"workspace-item--beWf2",type:"type--ixhjt",lt:"lt--mXFj2",rt:"rt--NudB_",info:"info--PC19d",name:"name--TPoCd",mini:"mini--Om_Bj"},y=o(52921),f=o(88882);class w extends n.PN{get S(){return f.S.Global.components.WorkspaceItem}get isMiniMode(){return"mini"===this.props.mode}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,s._)(this,"props",void 0),(0,s._)(this,"someState",!0)}}(0,y.gn)([n.SB],w.prototype,"someState",void 0),(0,y.gn)([n.Fl],w.prototype,"S",null),(0,y.gn)([n.Fl],w.prototype,"isMiniMode",null);let S=n._Y.createComponent("WorkspaceItem",w,e=>{let{name:t,avatar:o,type:n,className:i,customIcon:s,selected:a,isLocked:l,onClick:c}=e.props;return(0,r.jsxs)("div",{className:d()(C.workspaceItem,i,{[C.mini]:e.isMiniMode}),onClick:c,children:[(0,r.jsxs)("div",{className:C.lt,children:[(0,r.jsx)(g.I,{word:t[0],src:o,size:e.isMiniMode?24:40}),(0,r.jsxs)("div",{className:C.info,children:[(0,r.jsx)("div",{className:C.name,children:t}),(0,r.jsx)("div",{className:C.type,children:"personal"===n?e.S.personal:e.S.team})]})]}),(0,r.jsxs)("div",{className:C.rt,children:[e.isMiniMode&&(0,r.jsx)("div",{className:C.type,children:"personal"===n?e.S.personal:e.S.team}),s||(0,r.jsx)(r.Fragment,{children:l?(0,r.jsx)(m.u,{title:e.S.teamLockedTips,children:(0,r.jsx)("span",{style:{display:"inline-flex",alignItems:"center",cursor:"pointer"},children:(0,r.jsx)(u,{color:"var(--theme-text-quaternary)",size:24})})}):a?(0,r.jsx)(h.J,{name:p.UZ.lineOperationCheck,color:"var(--theme-function-success)",size:18}):(0,r.jsx)(v.L,{size:24})})]})]})})},98581:function(e,t,o){o.d(t,{v:function(){return y}});var r=o(71576),n=o(34491),i=o(95782),s=o(18918),a=o(82005),l=o(61658),u=o(68104),p=o(7441),c=o(63134),d={workspaceSwitchDialog:"workspace-switch-dialog--3IFmQ",header:"header--ql3NJ",content:"content--Id93R",switching:"switching--B43VL",text:"text--bseNK",switched:"switched--fd2KG",checked:"checked--coX6e",workspaceItem:"workspace-item--dE668"},h=o(66084),g=o(52921),m=o(88882);class v extends n.PN{get S(){return m.S.Global.components.WorkspaceSwitchDialog}get isPersonalAccount(){return s.teamController.personalInfo&&this.props.userId===s.teamController.personalInfo.userId}get workspaceInfo(){var e,t,o,r;let{personalInfo:n,currentTeamInfo:i}=s.teamController;return this.isPersonalAccount?{name:null!==(e=null==n?void 0:n.workspaceName)&&void 0!==e?e:"-",avatar:null!==(t=null==n?void 0:n.workspaceAvatar)&&void 0!==t?t:"-",type:"personal"}:{name:null!==(o=null==i?void 0:i.teamName)&&void 0!==o?o:"-",avatar:null!==(r=null==i?void 0:i.teamAvatar)&&void 0!==r?r:"-",type:"team"}}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}(0,g.gn)([n.Fl],v.prototype,"S",null),(0,g.gn)([n.Fl],v.prototype,"isPersonalAccount",null),(0,g.gn)([n.Fl],v.prototype,"workspaceInfo",null);let C=n._Y.createComponent("WorkspaceSwitchDialog",v,e=>{let{insertTarget:t,onDisposed:o}=e.props;return(0,r.jsxs)(u.u,{width:328,closeIconVisible:!s.teamController.switchingWorkspace,fixed:"dialogRoot"===t||"body"===t,className:d.workspaceSwitchDialog,style:{maxWidth:"90%"},onDispose:o,closeOnMaskClick:!s.teamController.switchingWorkspace,children:[(0,r.jsx)("div",{className:d.header,children:s.teamController.switchingWorkspace?e.S.switchingAccount:e.S.switchComplete}),(0,r.jsx)("div",{className:d.content,children:s.teamController.switchingWorkspace?(0,r.jsxs)("div",{className:d.switching,children:[(0,r.jsx)(l.g,{size:54}),(0,r.jsx)("div",{className:d.text,children:e.S.wait})]}):(0,r.jsxs)("div",{className:d.switched,children:[(0,r.jsx)("div",{className:d.text,children:(0,r.jsx)(i.Z,{S:e.S.switchedAccount,components:{b:e=>(0,r.jsx)("b",{children:e})},data:{name:e.workspaceInfo.name}})}),(0,r.jsx)(p.K,{className:d.workspaceItem,...e.workspaceInfo,customIcon:(0,r.jsx)("div",{className:d.checked,children:(0,r.jsx)(c.n,{size:16,color:"currentColor"})})})]})})]})}),y=a.t.createOpener(C)},59111:function(e,t,o){o.d(t,{L:function(){return u}});var r=o(71576),n=o(58812),i=o(34491),s=o(66084);class a extends i.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M8.99953 6.71075C8.60953 7.10075 8.60953 7.73075 8.99953 8.12075L12.8795 12.0008L8.99953 15.8808C8.60953 16.2708 8.60953 16.9008 8.99953 17.2908C9.38953 17.6808 10.0195 17.6808 10.4095 17.2908L14.9995 12.7008C15.3895 12.3108 15.3895 11.6808 14.9995 11.2908L10.4095 6.70075C10.0295 6.32075 9.38953 6.32075 8.99953 6.71075Z\\" fill=\\"#55555D\\"/>\\n","viewBox":"0 0 24 24"}');let u=i._Y.createComponent("ArrowRightIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"ArrowRightIcon",iconData:l}))},63134:function(e,t,o){o.d(t,{n:function(){return u}});var r=o(71576),n=o(58812),i=o(34491),s=o(66084);class a extends i.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"currentColor","content":"<path fill-rule=\\"evenodd\\" d=\\"M14.442 3.183a.625.625 0 0 1 0 .884l-8 8a.625.625 0 0 1-.884 0l-4-4a.625.625 0 1 1 .884-.884L6 10.741l7.558-7.558a.625.625 0 0 1 .884 0\\" clip-rule=\\"evenodd\\"/>","viewBox":"0 0 16 16"}');let u=i._Y.createComponent("CheckIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"CheckIcon",iconData:l}))},45029:function(e,t,o){o.d(t,{H:function(){return l}});var r=o(66084),n=o(52921),i=o(34491),s=o(76469),a=o(73047);class l{get enable(){return!!this.countdown}init(e,t){let{useMillisecond:o=!1}=null!=t?t:{};e&&!this.timer&&(this.timer=setInterval(()=>{this.calcCountdown(e)},o?100:1e3),this.calcCountdown(e))}destroy(){this.timer&&clearInterval(this.timer)}calcCountdown(e){let t=e-new Date().getTime(),o=Math.floor(t%1e3/100).toString(),r=Math.floor(t/1e3%60).toString().padStart(2,"0"),n=Math.floor(t/6e4%60).toString().padStart(2,"0"),i=Math.floor(t/36e5%24).toString().padStart(2,"0"),s=Math.floor(t/864e5).toString();this.countdown=t>=0?{day:s,hour:i,minute:n,second:r,millisecond:o}:null,this.countdown||this.event.emit("end")}constructor(){(0,r._)(this,"timer",null),(0,r._)(this,"event",new s.v),(0,r._)(this,"countdown",null),(0,a.rC)(this)}}(0,n.gn)([i.SB],l.prototype,"countdown",void 0),(0,n.gn)([a.Fl],l.prototype,"enable",null)},70277:function(e,t,o){o.d(t,{V:function(){return n},k:function(){return C}});var r,n,i=o(66084),s=o(52921),a=o(34491),l=o(22046),u=o(92235),p=o(92660),c=o(60445),d=o(73047),h=o(11502),g=o(32671),m=o(47720),v=o(33381);(r=n||(n={})).ChatPDF="chat_pdf",r.Podcast="podcast",r.Mindmap="mindmap",r.ImageGenerator="image_generate",r.PicToVideo="animation_generate",r.YtbSummary="youtube_summary",r.ByPass="bypass",r.PDFTools="pdf_tools",r.ImageTools="image_tools",r.AudioToText="audio_to_text";class C{get config(){let e=m.serverConfigController.getExpConfig({expName:g.G.onboardingNewStyleExperiment,groupNameMap:this.groupNameMap,defaultConfig:{groupName:this.groupNameMap.unset}}),t=this.matchUserSource();return(null==t?void 0:t.group)?{...e,groupName:t.group,userSourceSubGroup:t.subGroup}:e}get hitNewStyleWithPin(){return[this.groupNameMap.newStylePin,this.groupNameMap.newStylePinNoPay].includes(this.config.groupName)}get hitNewStyleWithWebappNoPay(){return this.config.groupName===this.groupNameMap.newStyleWebappNoPay}get hitNewStyleWithWebapp(){return this.webAppGroup.includes(this.config.groupName)}get noPaymentStep(){return[this.groupNameMap.newStylePinNoPay,this.groupNameMap.newStyleWebappNoPay].includes(this.config.groupName)}get hitSpecAdvertiserUser(){return this.groupNameMap.newStyleYtbSm===this.config.groupName||this.groupNameMap.newStyleImageGenerator===this.config.groupName||this.groupNameMap.newStyleVideoGenerator===this.config.groupName||this.groupNameMap.newStyleSeoTools===this.config.groupName}get tourGuide(){return{groupNameMap:this.tourGuideGroupMap,config:this.tourGuideConfig}}get tourGuideConfig(){let e={experimentName:"advertiser_experiment",groupName:this.tourGuideGroupMap.unset,version:10};if(!v.userController.isLogin)return e;let t=this.getUTM();if(t.includes("pdf"))return{...e,groupName:this.tourGuideGroupMap.pdfGuide};if(t.includes("ig"))return{...e,groupName:this.tourGuideGroupMap.artGuide};let o=this.matchRule(this.SEO_USER_SOURCE);return(null==o?void 0:o.tourGuide)?{...e,groupName:o.tourGuide}:{...e,groupName:this.tourGuideGroupMap.chatGuide}}get hitNewStyle(){return!0}isWebAppGroup(e){return this.webAppGroup.includes(e)}getUTM(){var e;let t=u.m.getUrlParams(l.S.location.href),o=(null===(e=v.userController.userInfo)||void 0===e?void 0:e.utm)||t.utm||"";return l.S.isRunInServerSide||(o=o||localStorage.getItem(p.storageKeys.utm)||""),o}getFirstEntryPath(){var e;if(l.S.isRunInServerSide)return"";let t=null!==(e=localStorage.getItem(p.storageKeys.firstEntry))&&void 0!==e?e:"";try{return new URL(t).pathname||""}catch(e){return""}}isGasAdUser(){return this.getUTM().startsWith("gas")}createEvent(){let e=this.config.groupName;h.M.createUserBehaviorEvent({eventName:g.G.onboardingNewStyleExperiment,extData:{groupName:e,version:this.config.version}})}matchUserSource(){if(this.isGasAdUser()){let e=this.matchRule(this.AD_USER_SOURCE);if(e)return e}return this.matchRule(this.SEO_USER_SOURCE)||null}matchRule(e){let t=this.getUTM(),o=e.find(e=>{var o;return null===(o=e.utm)||void 0===o?void 0:o.some(e=>t.includes(e))});if(o)return o;let r=this.getFirstEntryPath(),n=e.find(e=>{var t;return null===(t=e.firstEntry)||void 0===t?void 0:t.some(e=>r.includes(e))});if(n)return n}constructor(e){(0,i._)(this,"ctx",void 0),(0,i._)(this,"groupNameMap",void 0),(0,i._)(this,"webAppGroup",void 0),(0,i._)(this,"tourGuideGroupMap",void 0),(0,i._)(this,"AD_USER_SOURCE",void 0),(0,i._)(this,"SEO_USER_SOURCE",void 0),this.ctx=e,this.groupNameMap={unset:"unset",newStylePin:"new_style_pin",newStyleWebapp:"new_style_webapp",newStylePinNoPay:"new_style_pin_nopay",newStyleWebappNoPay:"new_style_webapp_nopay",newStyleYtbSm:"new_style_ytbsm",newStyleImageGenerator:"new_style_image_generator",newStyleVideoGenerator:"new_style_video_generator",newStyleSeoTools:"new_style_seo_tools"},this.webAppGroup=[this.groupNameMap.newStyleWebapp,this.groupNameMap.newStyleWebappNoPay],this.tourGuideGroupMap={chatGuide:"chat_guide",pdfGuide:"pdf_guide",artGuide:"tools_guide",unset:"unset"},this.AD_USER_SOURCE=[{utm:["ytbsm","youtube"],firstEntry:[c.B9.youtubeSummaryWithChatgpt],group:this.groupNameMap.newStyleYtbSm},{utm:["ig"],group:this.groupNameMap.newStyleImageGenerator},{utm:["anmtn"],group:this.groupNameMap.newStyleVideoGenerator,tourGuide:this.tourGuideGroupMap.artGuide},{utm:["hmnzai"],group:this.groupNameMap.newStyleSeoTools,subGroup:"bypass"},{utm:["att"],group:this.groupNameMap.newStyleSeoTools,subGroup:"audio_to_text"}],this.SEO_USER_SOURCE=[{utm:["pdf"],firstEntry:[c.Cl.docChat],group:this.groupNameMap.newStyleSeoTools,subGroup:"chat_pdf",tourGuide:this.tourGuideGroupMap.pdfGuide},{firstEntry:[c.oo.PDF_TOOL_PREFIX],group:this.groupNameMap.newStyleSeoTools,subGroup:"pdf_tools",tourGuide:this.tourGuideGroupMap.pdfGuide},{utm:["ai_podcast"],firstEntry:[c.oo.aiPodcast],group:this.groupNameMap.newStyleSeoTools,subGroup:"podcast"},{utm:["mindmap"],firstEntry:[c.oo.aiMindMapMaker],group:this.groupNameMap.newStyleSeoTools,subGroup:"mindmap"},{utm:["image_generate"],firstEntry:[c.oo.imageGenerator,c.oo.imageToImageGenerator,c.oo.imageTool],group:this.groupNameMap.newStyleSeoTools,subGroup:"image_generate",tourGuide:this.tourGuideGroupMap.artGuide},{utm:["animation_generate"],firstEntry:[c.oo.imageAnimator,c.oo.animationGenerateFromText,c.oo.videoGenerator],group:this.groupNameMap.newStyleSeoTools,subGroup:"animation_generate",tourGuide:this.tourGuideGroupMap.artGuide},{firstEntry:[c.oo.IMAGE_TOOL_PREFIX],group:this.groupNameMap.newStyleSeoTools,subGroup:"image_tools",tourGuide:this.tourGuideGroupMap.artGuide},{utm:["youtube_summary","youtube-summary"],firstEntry:[c.B9.youtubeSummaryWithChatgpt,c.B9.youtubeSummaryWithChatgptSummarized],group:this.groupNameMap.newStyleSeoTools,subGroup:"youtube_summary"},{utm:["bypass"],firstEntry:[c.A.bypass,c.oo.aiContentDetector],group:this.groupNameMap.newStyleSeoTools,subGroup:"bypass"}],(0,d.rC)(this)}}(0,s.gn)([a.Fl],C.prototype,"config",null),(0,s.gn)([a.Fl],C.prototype,"hitNewStyleWithPin",null),(0,s.gn)([a.Fl],C.prototype,"hitNewStyleWithWebappNoPay",null),(0,s.gn)([a.Fl],C.prototype,"hitNewStyleWithWebapp",null),(0,s.gn)([a.Fl],C.prototype,"noPaymentStep",null),(0,s.gn)([a.Fl],C.prototype,"hitSpecAdvertiserUser",null),(0,s.gn)([a.Fl],C.prototype,"tourGuide",null),(0,s.gn)([a.Fl],C.prototype,"tourGuideConfig",null)},82417:function(e,t,o){o.d(t,{abTestController:function(){return G}});var r,n,i,s=o(66084),a=o(38172),l=o(52921),u=o(34491),p=o(73047),c=o(32671),d=o(90180),h=o(47720);class g{get config(){return h.serverConfigController.getExpConfig({expName:c.G.chatFeedback,groupNameMap:this.groupNameMap,defaultConfig:{groupName:this.groupNameMap.default}})}get showFeedback(){let e=Date.now(),t=d.A.chatFeedbackShowedTime;return(!t||e-t>864e5)&&this.config.groupName===this.groupNameMap.showChatFeedBack}constructor(e){(0,s._)(this,"_ctx",void 0),(0,s._)(this,"groupNameMap",void 0),this._ctx=e,this.groupNameMap={showChatFeedBack:"chat_feedback_show",default:"default"},(0,p.rC)(this)}}(0,l.gn)([u.SB],g.prototype,"groupNameMap",void 0),(0,l.gn)([p.Fl],g.prototype,"config",null),(0,l.gn)([p.Fl],g.prototype,"showFeedback",null);var m=o(11502),v=o(33381);class C{get indexPageGuide(){let{groupIdx:e}=this.getGroupByCid(10);return e>=0?{groupName:this.indexPageGuideGroup.default}:{groupName:this.indexPageGuideGroup.unset}}get isIndexPageDesktop(){return this.indexPageGuide.groupName===this.indexPageGuideGroup.desktop}get isIndexPageWebApp(){return this.indexPageGuide.groupName===this.indexPageGuideGroup.webapp||this.indexPageGuide.groupName===this.indexPageGuideGroup.guestWebapp}get recommendPlanInterval(){return h.serverConfigController.getExpConfig({expName:c.G.recommendPlanInterval,groupNameMap:this.recommendPlanIntervalGroup,defaultConfig:{groupName:this.recommendPlanIntervalGroup.unset}})}get hitMonthlyPlan(){return this.recommendPlanInterval.groupName===this.recommendPlanIntervalGroup.monthly}get newUserDiscountExp(){var e;let t=null===(e=v.userController.userInfo)||void 0===e?void 0:e.id;return t?t%100>=50?this.newUserDiscountGroup.default:this.newUserDiscountGroup.halfDay:this.newUserDiscountGroup.unset}get cancelSubscriptionFlowExp(){return h.serverConfigController.getExpConfig({expName:c.G.cancelSubscriptionFlow,groupNameMap:this.cancelSubscriptionFlowGroup,defaultConfig:{groupName:this.recommendPlanIntervalGroup.unset}})}get cancelByLiveX(){return this.cancelSubscriptionFlowExp.groupName===this.cancelSubscriptionFlowGroup.liveX}reportIndexPageExp(){m.M.createUserBehaviorEvent({eventName:"index_page_exp",extData:{groupName:this.indexPageGuide.groupName,cid:this.indexCid}})}initClientCid(e){this.indexCid=e}getGroupByCid(e){let t=parseInt(this.indexCid.slice(-2),16);Number.isNaN(t)&&(t=0);let o="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(e>o.length||e<1)throw Error("groupSize should be between 1 and 26");let r=t%e;return{groupName:o[r],groupIdx:r}}reportRecommendPlanExp(){a.W.createUserBehaviorEvent({eventName:"recommend_plan_exp",extData:{groupName:this.recommendPlanInterval.groupName}})}reportNewUserDiscount(){v.userController.isLogin&&a.W.createUserBehaviorEvent({eventName:"new_user_discount_exp",extData:{groupName:this.newUserDiscountExp}})}reportCancelSubscriptionFlow(){a.W.createUserBehaviorEvent({eventName:"cancel_subscription_flow_exp",extData:{groupName:this.cancelSubscriptionFlowExp.groupName}})}constructor(e){(0,s._)(this,"ctx",void 0),(0,s._)(this,"indexCid",void 0),(0,s._)(this,"freeUserAdvanceQuotaGroup",void 0),(0,s._)(this,"indexPageGuideGroup",void 0),(0,s._)(this,"recommendPlanIntervalGroup",void 0),(0,s._)(this,"newUserDiscountGroup",void 0),(0,s._)(this,"cancelSubscriptionFlowGroup",void 0),this.ctx=e,this.indexCid="",this.freeUserAdvanceQuotaGroup={premiumUsage:"premium_usage",defaultExp:"default_exp",default:"default",unset:"unset"},this.indexPageGuideGroup={desktop:"desktop",webapp:"webapp",default:"default",unset:"unset",guestWebapp:"guest_webapp"},this.recommendPlanIntervalGroup={monthly:"monthly",default:"default",unset:"unset"},this.newUserDiscountGroup={halfDay:"half_day",default:"default",unset:"unset"},this.cancelSubscriptionFlowGroup={liveX:"liveX",default:"default",unset:"unset"},(0,p.rC)(this)}}(0,l.gn)([u.SB],C.prototype,"freeUserAdvanceQuotaGroup",void 0),(0,l.gn)([u.SB],C.prototype,"indexPageGuideGroup",void 0),(0,l.gn)([u.SB],C.prototype,"recommendPlanIntervalGroup",void 0),(0,l.gn)([u.SB],C.prototype,"newUserDiscountGroup",void 0),(0,l.gn)([u.SB],C.prototype,"cancelSubscriptionFlowGroup",void 0),(0,l.gn)([p.Fl],C.prototype,"indexPageGuide",null),(0,l.gn)([p.Fl],C.prototype,"isIndexPageDesktop",null),(0,l.gn)([p.Fl],C.prototype,"isIndexPageWebApp",null),(0,l.gn)([p.Fl],C.prototype,"recommendPlanInterval",null),(0,l.gn)([p.Fl],C.prototype,"hitMonthlyPlan",null),(0,l.gn)([p.Fl],C.prototype,"newUserDiscountExp",null),(0,l.gn)([p.Fl],C.prototype,"cancelSubscriptionFlowExp",null),(0,l.gn)([p.Fl],C.prototype,"cancelByLiveX",null),(n=(r=i||(i={})).CommonAbTestGroup||(r.CommonAbTestGroup={})).A="A",n.B="B",n.C="C";class y{async getGroupData(){let e=await this.getAbTestGroup();return{groupId:e,isGroupA:e===i.CommonAbTestGroup.A,isGroupB:e===i.CommonAbTestGroup.B}}async createEvent(e){let{groupId:t,stepId:o,freeTrial:r}=e;m.M.createUserBehaviorEvent({eventName:"exp125",extData:{groupId:t,stepId:o,freeTrial:r}})}getAbTestGroup(){return this.ctx.getRandomGroupingName(2)}constructor(e){(0,s._)(this,"ctx",void 0),this.ctx=e,(0,p.rC)(this)}}var f=o(70277);class w{get enable(){return v.userController.shouldEnableOnboardingPaymentAbTest}get isHit(){return this.enable&&!this.highlyContentiousCountry&&this.userId%100>30&&this.userId%2==0}get userId(){var e,t;return null!==(t=null===(e=v.userController.userInfo)||void 0===e?void 0:e.id)&&void 0!==t?t:0}get highlyContentiousCountry(){var e,t;return["US","KR","DE","FR","GB","CA","AU","ES","IT","CL","NL"].includes(null!==(t=null===(e=v.userController.userInfo)||void 0===e?void 0:e.country)&&void 0!==t?t:"")}getExprInfo(){let e=[];if(this.highlyContentiousCountry)"stripe"===v.userController.paymentPlatform?e.push({exp_id:"exp156",group_id:"B"}):"fastspring"===v.userController.paymentPlatform&&e.push({exp_id:"exp156",group_id:"A"});else{let t=this.userId%100>30;"fastspring_sg"===v.userController.paymentPlatform?e.push({exp_id:"exp157",group_id:"B"}):"fastspring"===v.userController.paymentPlatform&&e.push({exp_id:"exp157",group_id:"A"}),t&&e.push({exp_id:"exp158",group_id:this.userId%2!=0?"A":"B"})}return e}createUserBehaviorEvent(){this.enable&&!this.reported&&(this.reported=!0,m.M.createUserBehaviorEvent({eventName:"experiment_info_report",extData:{experiment_info_report:this.getExprInfo()}}))}constructor(e){(0,s._)(this,"ctx",void 0),(0,s._)(this,"someState",void 0),(0,s._)(this,"reported",void 0),this.ctx=e,this.someState=!0,this.reported=!1,(0,p.rC)(this)}}(0,l.gn)([u.SB],w.prototype,"someState",void 0),(0,l.gn)([p.Fl],w.prototype,"enable",null),(0,l.gn)([p.Fl],w.prototype,"isHit",null),(0,l.gn)([p.Fl],w.prototype,"userId",null),(0,l.gn)([p.Fl],w.prototype,"highlyContentiousCountry",null);class S{get config(){return h.serverConfigController.getExpConfig({expName:c.G.onboardingSurvey,groupNameMap:this.groupNameMap,defaultConfig:{groupName:this.groupNameMap.unset}})}get hitSurvey(){return this.config.groupName===this.groupNameMap.survey}createEvent(){let e=this.config.groupName;a.W.createUserBehaviorEvent({eventName:c.G.onboardingSurvey,extData:{groupName:e,version:this.config.version}})}constructor(e){(0,s._)(this,"ctx",void 0),(0,s._)(this,"groupNameMap",void 0),this.ctx=e,this.groupNameMap={unset:"unset",default:"default",survey:"survey"},(0,p.rC)(this)}}(0,l.gn)([u.Fl],S.prototype,"config",null),(0,l.gn)([u.Fl],S.prototype,"hitSurvey",null);class _{get highlyContentiousCountry(){var e,t;return["US","KR","DE","FR","GB","CA","AU","ES","IT","CL","NL"].includes(null!==(t=null===(e=v.userController.userInfo)||void 0===e?void 0:e.country)&&void 0!==t?t:"")}async getGroupData(){let e=await this.getAbTestGroup();return{groupId:e,isGroupA:e===i.CommonAbTestGroup.A,isGroupB:e===i.CommonAbTestGroup.B}}async createEvent(e){let{groupId:t,stepId:o,paymentPlatform:r}=e;m.M.createUserBehaviorEvent({eventName:"exp124",extData:{groupId:t,stepId:o,paymentPlatform:r}})}getExprInfo(){let e=[];if(this.highlyContentiousCountry)"stripe"===v.userController.paymentPlatform?e.push({expId:"exp156",groupId:"B"}):"fastspring"===v.userController.paymentPlatform&&e.push({expId:"exp156",groupId:"A"});else{var t;let o=(null===(t=v.userController.userInfo)||void 0===t?void 0:t.id)||0;"fastspring_sg"===v.userController.paymentPlatform?e.push({expId:"exp157",groupId:"B"}):"fastspring"===v.userController.paymentPlatform&&e.push({expId:"exp157",groupId:"A"}),o%100>30&&e.push({expId:"exp158",groupId:o%2!=0?"A":"B"})}return e}reportPlatformExp(){this.reported||(this.reported=!0,m.M.createUserBehaviorEvent({eventName:"experiment_info_report",extData:{experimentInfoReport:this.getExprInfo()}}))}getAbTestGroup(){return this.ctx.getRandomGroupingName(2)}constructor(e){(0,s._)(this,"ctx",void 0),(0,s._)(this,"reported",void 0),this.ctx=e,this.reported=!1,(0,p.rC)(this)}}(0,l.gn)([p.Fl],_.prototype,"highlyContentiousCountry",null);class N{async getGroupData(){let e=await this.getAbTestGroup();return{group:e,isGroupA:e===i.CommonAbTestGroup.A,isGroupB:e===i.CommonAbTestGroup.B}}async createEvent(e,t){m.M.createUserBehaviorEvent({eventName:"exp109",extData:{group:e,stepId:t}})}getAbTestGroup(){return this.ctx.getRandomGroupingName(2)}constructor(e){(0,s._)(this,"ctx",void 0),this.ctx=e}}class x{async getGroupData(){let e=await this.getRandomGroupingName();return{groupId:e,isGroupB:e===i.CommonAbTestGroup.B}}async getRandomGroupingName(){return this.ctx.getRandomGroupingName()}async createEvent(e){let{stepId:t,groupId:o}=e;m.M.createUserBehaviorEvent({eventName:"exp139",extData:{groupId:o,stepId:t}})}constructor(e){(0,s._)(this,"ctx",void 0),this.ctx=e,(0,p.rC)(this)}}class b{async getRandomGroupingIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1?arguments[1]:void 0;return(t?await this.getClientIdFirstNumber():await this.getClientIdLastNumber())%e}async getRandomGroupingName(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1?arguments[1]:void 0,o="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(e>o.length||e<1)throw Error("groupSize should be between 1 and 26");return o[await this.getRandomGroupingIndex(e,t)]}async getClientIdLastNumber(){return parseInt((await a.W.getClientId()).slice(-2),16)}async getClientIdFirstNumber(){return parseInt((await a.W.getClientId()).slice(0,2),16)}constructor(){(0,s._)(this,"startCode",0),(0,s._)(this,"stepOne",1),(0,s._)(this,"endCode",999),(0,s._)(this,"specialOfferUpgrade",new N(this)),(0,s._)(this,"imageGeneratorPaymentStep",new y(this)),(0,s._)(this,"upgradeBadge",new x(this)),(0,s._)(this,"paymentPlatform",new _(this)),(0,s._)(this,"onboardingPayment",new w(this)),(0,s._)(this,"experiment",new C(this)),(0,s._)(this,"onboardingNewStyle",new f.k(this)),(0,s._)(this,"onboardingSurvey",new S(this)),(0,s._)(this,"chatFeedback",new g(this))}}let G=new b},38171:function(e,t,o){o.d(t,{s:function(){return n},l:function(){return A}});var r,n,i=o(66084),s=o(52921),a=o(34491),l=o(22046),u=o(33381),p=o(38172),c=o(88882),d=o(56607),h=o(92660),g=o(92235),m=o(73047),v=o(47720),C=o(48655),y=o(85132),f=o(45029);class w{get endTime(){var e;return(null===(e=this.activityConfig)||void 0===e?void 0:e.enable)?new Date(this.activityConfig.endTime).valueOf():0}get enable(){var e;return u.userController.isFreeUser&&(null===(e=this.activityConfig)||void 0===e?void 0:e.enable)&&Date.now()<=this.endTime}async loadActivityConfig(e){await c.a.readySource.waitReady,await u.userController.whenReady;let t=Date.now();if(!e&&t-this.configLastUpdateTime<this.CONFIG_UPDATE_TIME_GAP)return console.log("[BackToSchool] loadActivityConfig hitCache"),this.activityConfig;if(this.configFetching)return console.log("[BackToSchool] loadActivityConfig fetching"),this.activityConfig;this.configFetching=!0;try{var o;console.log("[BackToSchool] loadActivityConfig # getAppConfigs");let e=await C.Cc.onlyFetchStaticConfig([y.$.backToSchool]);(null==e?void 0:null===(o=e.homeComing)||void 0===o?void 0:o.enable)?(this.activityConfig={name:n.BackToSchool,themeCls:this.themeCls,discountCode:h.ku.BACK_SCHOOL,...e.homeComing},this.checkCountdown()):this.activityConfig=null,this.configLastUpdateTime=Date.now(),this.configFetching=!1}catch(e){}finally{this.configFetching=!1}return this.activityConfig}checkCountdown(){if(!this.enable){this.countdownController.destroy();return}this.inited||(this.inited=!0,this.countdownController.init(this.endTime,{useMillisecond:!0}),this.countdownController.event.once("end",()=>{C.Cc.syncSubscribePlanList(!0),this.parent.handleCountdownEnd()}))}constructor(e){(0,i._)(this,"parent",void 0),(0,i._)(this,"countdownController",void 0),(0,i._)(this,"themeCls",void 0),(0,i._)(this,"activityConfig",void 0),(0,i._)(this,"inited",void 0),(0,i._)(this,"CONFIG_UPDATE_TIME_GAP",void 0),(0,i._)(this,"configFetching",void 0),(0,i._)(this,"configLastUpdateTime",void 0),this.parent=e,this.countdownController=new f.H,this.themeCls="_monica-act-back-to-school",this.activityConfig=null,this.inited=!1,this.CONFIG_UPDATE_TIME_GAP=15*h.EB,this.configFetching=!1,this.configLastUpdateTime=0,(0,m.rC)(this)}}(0,s.gn)([a.SB],w.prototype,"activityConfig",void 0),(0,s.gn)([m.Fl],w.prototype,"endTime",null),(0,s.gn)([m.Fl],w.prototype,"enable",null);var S=o(21320),_=o(82417);class N{get endTime(){var e,t,o;return(null===(e=u.userController.userInfo)||void 0===e?void 0:e.createdAt)?_.abTestController.experiment.newUserDiscountExp===_.abTestController.experiment.newUserDiscountGroup.halfDay?S.L.add(new Date(null===(o=u.userController.userInfo)||void 0===o?void 0:o.createdAt).getTime(),12,"hour").valueOf():S.L.add(new Date(null===(t=u.userController.userInfo)||void 0===t?void 0:t.createdAt).getTime(),1,"day").valueOf():0}get enable(){return u.userController.isFreeUser&&v.serverConfigController.recommendPlan.newUserPromotion&&Date.now()<=this.endTime}async loadActivityConfig(){if(await Promise.all([v.serverConfigController.planConfigsReadySource.waitReady(),u.userController.whenReady]),u.userController.isLogin&&u.userController.userInfo&&this.enable){let e=u.userController.userInfo.createdAt||0;this.activityConfig={name:n.NewComer,enable:!0,startTime:new Date(e).getTime(),endTime:this.endTime,themeCls:this.newComerCls},this.checkCountdown()}else this.activityConfig=null;return this.activityConfig}checkCountdown(){if(!this.enable){this.countdownController.destroy();return}this.inited||(this.inited=!0,this.countdownController.init(this.endTime,{useMillisecond:!0}),this.countdownController.event.once("end",()=>{C.Cc.syncSubscribePlanList(!0),this.parent.handleCountdownEnd()}),_.abTestController.experiment.reportNewUserDiscount())}constructor(e){(0,i._)(this,"parent",void 0),(0,i._)(this,"countdownController",void 0),(0,i._)(this,"newComerCls",void 0),(0,i._)(this,"activityConfig",void 0),(0,i._)(this,"inited",void 0),this.parent=e,this.countdownController=new f.H,this.newComerCls="_monica-act-new-comer",this.activityConfig=null,this.inited=!1,(0,m.rC)(this)}}(0,s.gn)([a.SB],N.prototype,"activityConfig",void 0),(0,s.gn)([m.Fl],N.prototype,"endTime",null),(0,s.gn)([m.Fl],N.prototype,"enable",null);var x=o(90180),b=o(92020);class G{get enable(){var e;return u.userController.isLogin&&!u.userController.isFreeUser&&!u.userController.onTrial&&(null===(e=u.userController.userVipStatus)||void 0===e?void 0:e.interval)==="month"&&"month"===u.userController.userVipStatus.intervalAtPeriodEnd&&["fastspring","fastspring_sg","paddle"].includes(u.userController.userVipStatus.paymentPlatform)}get config(){var e,t;if(!this.enable||!this.planConfig)return;let o=1e3*((null===(e=u.userController.userVipStatus)||void 0===e?void 0:e.currentPeriodStart)||0),r=1e3*((null===(t=u.userController.userVipStatus)||void 0===t?void 0:t.currentPeriodEnd)||0),n=new Date(o),i="".concat(n.getFullYear(),"_").concat(n.getMonth());return{planSt:o,planEt:r,startTime:new Date(o+20*h.x4).toUTCString(),endTime:new Date(r).toUTCString(),tag:i}}get planConfig(){if(!u.userController.userVipStatus)return null;let e=u.userController.userVipStatus.vipVersion,t=u.userController.userVipStatus.interval,o=v.serverConfigController.getPlanWithVersion(e,t),r=v.serverConfigController.getPlanWithVersion(e,"year");return o&&r?{currentPlan:o,targetPlan:r,offAmount:12*o._meta.price-r._meta.price}:null}get siderCardEnable(){return!!x.A.inited&&!!this.enable&&this.config&&!x.A.siderYearlyGuide[this.config.tag]}get billingBannerEnable(){return!!x.A.inited&&!!this.enable&&this.config&&!x.A.billingYearGuide[this.config.tag]}closeSiderCard(){this.config&&(x.A.siderYearlyGuide[this.config.tag]=!0,b.ll.setUiFlag("siderYearlyGuide",x.A.siderYearlyGuide))}closeBillingBanner(){this.config&&(x.A.billingYearGuide[this.config.tag]=!0,b.ll.setUiFlag("billingYearGuide",x.A.billingYearGuide))}constructor(e){(0,i._)(this,"parent",void 0),this.parent=e,(0,m.rC)(this)}}(0,s.gn)([m.Fl],G.prototype,"enable",null),(0,s.gn)([m.Fl],G.prototype,"config",null),(0,s.gn)([m.Fl],G.prototype,"planConfig",null),(0,s.gn)([m.Fl],G.prototype,"siderCardEnable",null),(0,s.gn)([m.Fl],G.prototype,"billingBannerEnable",null),(r=n||(n={})).NewComer="new_comer",r.BackToSchool="back_to_school";class A{get activityConfig(){return"back_to_school"===this.currentActivity?this.backToSchool.activityConfig:"new_comer"===this.currentActivity?this.newUserDiscount.activityConfig:null}get S(){return c.S.Global.controllers.promotionController}get hasPromotion(){return!!v.serverConfigController.promotionData.tag}get canTrial(){return(v.serverConfigController.recommendPlan.trialDay||0)>0&&u.userController.canTrial}get trialPrice(){return v.serverConfigController.formatLocalePrice(0)}get freeTrial(){return(0,c.x)(this.S.startFreeTrial,{days:v.serverConfigController.trialDays})}get subscribeButtonText(){return u.userController.canResubscribe?this.S.activeNow:this.canTrial?this.freeTrial:this.S.upgradeNow}get darkThemeEnable(){var e;return(null===(e=this.activityConfig)||void 0===e?void 0:e.enable)&&"new_comer"===this.activityConfig.name}get countdownController(){var e;return(null===(e=this.activityConfig)||void 0===e?void 0:e.name)==="new_comer"?this.newUserDiscount.countdownController:"back_to_school"===this.currentActivity?this.backToSchool.countdownController:null}get hitNewComer(){var e;return(null===(e=this.activityConfig)||void 0===e?void 0:e.enable)&&"new_comer"===this.activityConfig.name}get hitBackToSchool(){var e;return(null===(e=this.activityConfig)||void 0===e?void 0:e.enable)&&"back_to_school"===this.activityConfig.name}get affUser(){try{if(d.o.isWeb&&!l.S.isRunInServerSide){let e=localStorage.getItem(h.storageKeys.affiliateUser);return e?JSON.parse(e):null}return null}catch(e){return null}}get affUserName(){var e,t;return[null===(e=this.affUser)||void 0===e?void 0:e.firstName,null===(t=this.affUser)||void 0===t?void 0:t.lastName].filter(e=>!!e).join(" ")}get isAffDiscount(){return!!this.affUserName&&localStorage.getItem(h.storageKeys.discountCode)}async init(){let e=p.W.on("userLogout",()=>{console.log("[PromotionController] userLogout"),this.loadActivityConfig(!0),e.destroy()})}async loadActivityConfig(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.loading){await this.loadingSource.waitReady();return}console.log("[PromotionController] loadActivityConfig"),this.loadingSource.clear();try{this.loading=!0;let e=await this.newUserDiscount.loadActivityConfig();if(null==e?void 0:e.enable){this.currentActivity=e.name,this.loading=!1;return}this.currentActivity=null,this.loading=!1,this.loadingSource.markReady();return}finally{this.loading=!1,this.loadingSource.markReady()}}async handleCountdownEnd(){this.loadActivityConfig(!0)}constructor(){(0,i._)(this,"newUserDiscount",new N(this)),(0,i._)(this,"yearlyGuide",new G(this)),(0,i._)(this,"backToSchool",new w(this)),(0,i._)(this,"loadingSource",g.m.createReadySource()),(0,i._)(this,"currentActivity",null),(0,i._)(this,"loading",!1),(0,m.rC)(this)}}(0,s.gn)([a.SB],A.prototype,"currentActivity",void 0),(0,s.gn)([a.SB],A.prototype,"loading",void 0),(0,s.gn)([m.Fl],A.prototype,"activityConfig",null),(0,s.gn)([m.Fl],A.prototype,"S",null),(0,s.gn)([m.Fl],A.prototype,"hasPromotion",null),(0,s.gn)([m.Fl],A.prototype,"canTrial",null),(0,s.gn)([m.Fl],A.prototype,"trialPrice",null),(0,s.gn)([m.Fl],A.prototype,"freeTrial",null),(0,s.gn)([m.Fl],A.prototype,"subscribeButtonText",null),(0,s.gn)([m.Fl],A.prototype,"darkThemeEnable",null),(0,s.gn)([m.Fl],A.prototype,"countdownController",null),(0,s.gn)([m.Fl],A.prototype,"hitNewComer",null),(0,s.gn)([m.Fl],A.prototype,"hitBackToSchool",null),(0,s.gn)([m.Fl],A.prototype,"affUser",null),(0,s.gn)([m.Fl],A.prototype,"affUserName",null),(0,s.gn)([m.Fl],A.prototype,"isAffDiscount",null)},25449:function(e,t,o){o.d(t,{promotionController:function(){return r}});let r=new(o(38171)).l},87393:function(e,t,o){o.d(t,{C:function(){return h}});var r=o(66084),n=o(52921),i=o(34491),s=o(92235),a=o(92347),l=o(56607),u=o(54932),p=o(73047),c=o(90180);class d{get isDark(){return"dark"===this.theme}getThemeClassNames(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isDark;return e?{[this.themeClassName]:!0,[this.darkClassName]:!0}:{[this.themeClassName]:!0}}async init(){this.initialized||(s.m.onDOMReady(()=>{this.updateTheme()}),(0,p.U5)(()=>[c.A.theme],()=>{this.updateTheme()}),window.matchMedia("(prefers-color-scheme: dark)").onchange=()=>{c.A.theme===a.Q2.Auto&&this.updateTheme()})}setCookieTheme(){l.o.isWeb&&u.Z.set("moninca_home_theme",this.theme)}injectVars(){(l.o.isDesktop||l.o.isWeb)&&document.body.classList.add(this.themeClassName)}updateTheme(){c.A.theme===a.Q2.Auto?this.theme=s.m.isSysDarkMode()?"dark":"light":this.theme=c.A.theme,this.setCookieTheme(),this.injectVars(),l.o.isExtension||(this.isDark?document.body.classList.add(this.darkClassName):document.body.classList.remove(this.darkClassName))}constructor(){(0,r._)(this,"theme","light"),(0,r._)(this,"themeClassName","_monica-theme-d2f2b383"),(0,r._)(this,"darkClassName","_monica-dark"),(0,r._)(this,"darkreaderParams",{brightness:110,contrast:90,sepia:10}),(0,r._)(this,"shareClassName","_monica-share-mode"),(0,r._)(this,"localThemeAttr","data-local-theme"),(0,r._)(this,"initialized",!1),(0,p.rC)(this)}}(0,n.gn)([i.SB],d.prototype,"theme",void 0),(0,n.gn)([p.Fl],d.prototype,"isDark",null);let h=new d},93270:function(e,t){t.Z={src:"https://assets.monica.im/home-web/_next/static/media/monicaLogo.83e0ae18.png",height:128,width:128,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAaVBMVEX//v+NQuH/+vMbuNdAOvdXNfZqN/BQN/FMaXFNVPnIy//HxP+0X+yYW/KaUOyoQOgkj+E/du/V1/zP3PoxrOFldfRpmus3ruf08/fs6+6ajP+Pj4+/qv9JSkvMsv/owv/P0NGezv+32/pO9lcTAAAAGHRSTlP9M/oyrei1KgD0/v718u+zvfz+/rTz9e9bpkZZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARElEQVR4nAXBBQKAMAwEsJu2w53OsP8/kgRMNgRLDHKpaZMj+AsAikUvWWKWHZ3U+NR4YLw1oL8NaijL+p4GrHyYJ8M/eRgDlFFm0dkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}}]);