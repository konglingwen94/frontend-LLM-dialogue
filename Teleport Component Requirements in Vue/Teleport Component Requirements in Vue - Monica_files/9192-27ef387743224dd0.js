"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9192],{11703:function(e,t,i){i.d(t,{Y:function(){return g}});var n=i(71576),o=i(34491),s=i(95782),r=i(82005),a=i(5857),l=i(68104),c=i(48023),d=i(66084),h=i(52921),p=i(88882),u=i(73047);class m extends o.PN{get S(){return p.S.Global.modules.ChatBox.DisableBaseModelDialog}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,d._)(this,"props",void 0)}}(0,h.gn)([u.Fl],m.prototype,"S",null);let v=o._Y.createComponent("DisableBaseModelDialog",m,e=>{let{modelAndSource:t}=e.props.chatController;return(0,n.jsxs)(l.u,{className:"disable-base-model-dialog--poYUR",closeOnMaskClick:!0,closeIconVisible:!0,width:321,onDispose:()=>e.props.onDisposed(),children:[(0,n.jsx)("header",{children:e.S.title}),(0,n.jsx)("main",{children:(0,n.jsx)(s.Z,{S:e.S.tips,components:{models:e=>(0,n.jsx)(c.u,{title:t.baseModelListHavingTools.map(e=>e.name).join(", "),children:(0,n.jsx)("span",{className:"models--VnvtN",children:e})})}})}),(0,n.jsxs)("footer",{children:[(0,n.jsx)(a.z,{type:"gray",onClick:()=>{var t,i;null===(t=(i=e.props).onCancel)||void 0===t||t.call(i),e.props.onDisposed()},children:e.S.cancel}),(0,n.jsx)(a.z,{type:"brand",onClick:()=>{var t,i;null===(t=(i=e.props).onConfirm)||void 0===t||t.call(i),e.props.onDisposed()},children:e.S.confirm})]})]})}),g=r.t.createOpener(v)},79523:function(e,t,i){i.d(t,{m:function(){return g}});var n=i(71576),o=i(34491),s=i(95782),r=i(82005),a=i(5857),l=i(68104),c=i(48023),d=i(66084),h=i(52921),p=i(88882),u=i(73047);class m extends o.PN{get S(){return p.S.Global.modules.ChatBox.DisableKnowledgeSourceDialog}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,d._)(this,"props",void 0)}}(0,h.gn)([u.Fl],m.prototype,"S",null);let v=o._Y.createComponent("DisableKnowledgeSourceDialog",m,e=>{let{modelAndSource:t}=e.props.chatController;return(0,n.jsxs)(l.u,{className:"disable-knowledge-source-dialog--YTaaJ",closeOnMaskClick:!0,closeIconVisible:!0,width:321,onDispose:()=>e.props.onDisposed(),children:[(0,n.jsx)("header",{children:e.S.switchModel}),(0,n.jsx)("main",{children:(0,n.jsx)(s.Z,{S:e.S.switchModelTips,components:{models:e=>(0,n.jsx)(c.u,{title:t.baseModelListHavingTools.map(e=>e.name).join(", "),children:(0,n.jsx)("span",{className:"models--oF5UO",children:e})})}})}),(0,n.jsxs)("footer",{children:[(0,n.jsx)(a.z,{type:"gray",onClick:()=>{var t,i;null===(t=(i=e.props).onCancel)||void 0===t||t.call(i),e.props.onDisposed()},children:e.S.cancel}),(0,n.jsx)(a.z,{type:"primary",onClick:()=>{var t,i;null===(t=(i=e.props).onConfirm)||void 0===t||t.call(i),e.props.onDisposed()},children:e.S.confirm})]})]})}),g=r.t.createOpener(v)},56921:function(e,t,i){i.d(t,{D:function(){return v}});var n=i(71576),o=i(34491),s=i(95782),r=i(82005),a=i(5857),l=i(68104),c=i(48023),d=i(66084),h=i(52921),p=i(88882);class u extends o.PN{get S(){return p.S.Global.modules.ChatBox.ToolNotSupportedDialog}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,d._)(this,"props",void 0)}}(0,h.gn)([o.Fl],u.prototype,"S",null);let m=o._Y.createComponent("ToolNotSupportedDialog",u,e=>{let{modelAndSource:t}=e.props.chatController;return(0,n.jsxs)(l.u,{className:"tool-not-supported-dialog--xu29j",closeOnMaskClick:!0,closeIconVisible:!0,width:321,fixed:"dialogRoot"===e.props.insertTarget,onDispose:()=>e.props.onDisposed(),children:[(0,n.jsx)("header",{children:e.S.title}),(0,n.jsx)("main",{children:(0,n.jsx)(s.Z,{S:e.S.tips,components:{models:e=>(0,n.jsx)(c.u,{title:t.baseModelListHavingTools.map(e=>e.name).join(", "),children:(0,n.jsx)("span",{className:"selected-models--amexw",children:e})})},data:{model:t.currentModelName}})}),(0,n.jsx)("footer",{children:(0,n.jsx)(a.z,{type:"primary",onClick:()=>{e.props.onDisposed()},children:e.S.confirm})})]})}),v=r.t.createOpener(m,{singleton:!0})},35093:function(e,t,i){i.d(t,{r:function(){return f}});var n=i(71576),o=i(34491),s=i(58812),r=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M12 1.09998C5.98007 1.09998 1.09998 5.98007 1.09998 12C1.09998 18.0199 5.98007 22.9 12 22.9C18.0199 22.9 22.9 18.0199 22.9 12C22.9 5.98007 18.0199 1.09998 12 1.09998ZM9.63637 8.36358C9.2849 8.01211 8.71505 8.01211 8.36358 8.36358C8.01211 8.71505 8.01211 9.2849 8.36358 9.63637L10.7272 12L8.36358 14.3636C8.01211 14.7151 8.01211 15.2849 8.36358 15.6364C8.71505 15.9878 9.2849 15.9878 9.63637 15.6364L12 13.2728L14.3636 15.6364C14.7151 15.9878 15.2849 15.9878 15.6364 15.6364C15.9878 15.2849 15.9878 14.7151 15.6364 14.3636L13.2728 12L15.6364 9.63637C15.9878 9.2849 15.9878 8.71505 15.6364 8.36358C15.2849 8.01211 14.7151 8.01211 14.3636 8.36358L12 10.7272L9.63637 8.36358Z\\" fill=\\"black\\"/>\\n\\n","viewBox":"0 0 24 24"}');let c=o._Y.createComponent("XFillIcon",a,e=>(0,n.jsx)(s.s,{...e.props,name:"XFillIcon",iconData:l}));var d=i(37231),h=i(78716),p=i.n(h),u=i(69645),m=i(52921),v=i(11989),g=i(71528);class x extends o.PN{onPropsValueChange(){this.inputValue=this.props.value}handleInputEnter(){var e,t;null===(e=(t=this.props).onValueChange)||void 0===e||e.call(t,this.inputValue),this.props.onTypeChange("default")}onViewCreate(){this.listenerManager.addDocumentEventListener("keydown",e=>{this.focus&&v.t.isHotkey(e,["enter"])&&(this.props.onTypeChange("default"),e.stopPropagation(),e.preventDefault())})}onViewDestroy(){this.listenerManager.removeAll()}constructor(...e){super(...e),(0,r._)(this,"props",void 0),(0,r._)(this,"listenerManager",new g.M),(0,r._)(this,"inputValue",""),(0,r._)(this,"focus",!1)}}(0,m.gn)([o.SB],x.prototype,"inputValue",void 0),(0,m.gn)([o.SB],x.prototype,"focus",void 0),(0,m.gn)([(0,o.YP)(e=>[e.props.value,e.props.type])],x.prototype,"onPropsValueChange",null);let f=o._Y.createComponent("DropdownMenuInputItem",x,e=>{let{type:t,icon:i,customNode:o,content:s,className:r,inputContentClassName:a,inputPlaceholder:l,...h}=e.props;return"default"===t?(0,n.jsx)(u.X,{content:s,icon:i,customNode:o,className:r,...h}):(0,n.jsx)(u.X,{...h,content:(0,n.jsxs)("div",{className:"input-content--loiJh",children:[(0,n.jsx)(c,{size:16,color:"var(--theme-text-disable)",className:"close--q2LXA",onMouseDown:t=>{var i,n;t.preventDefault(),e.inputValue="",e.props.onTypeChange("default"),null===(i=(n=e.props).onCloseClick)||void 0===i||i.call(n)}}),(0,n.jsx)(d.I,{autofocus:!0,value:e.inputValue,className:"input--BbJyA",onChange:t=>{e.inputValue=t},onEnterWithoutCtrl:()=>{e.handleInputEnter()},onEscape:()=>{e.props.onTypeChange("default")},originInputProps:{onFocus:()=>{e.focus=!0},onBlur:()=>{e.focus=!1,e.handleInputEnter()}},placeholder:l})]}),className:p()("dropdown-menu-input-item--Lz_5c",r,a)})})},9163:function(e,t,i){i.d(t,{E:function(){return m}});var n=i(71576),o=i(34491),s=i(58380),r=i(78716),a=i.n(r),l=i(46731),c=i(48023),d={radioGroup:"radio-group--GP6h9",row:"row--k6CJE",brandTheme:"brand-theme--tfmkv",label:"label--iiwKh",explain:"explain--x0EGT",description:"description--u9a9G"},h=i(66084),p=i(52921);class u extends o.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,p.gn)([o.SB],u.prototype,"someState",void 0);let m=o._Y.createComponent("RadioGroup",u,e=>{let{options:t,direction:i,onChange:o,value:r,className:h,labelClassName:p,brandTheme:u=!0,extraRender:m,descriptionClassName:v}=e.props;return(0,n.jsx)(s.ZP.Group,{className:a()(d.radioGroup,{[d.row]:"row"===i,[d.brandTheme]:u},h),value:r,onChange:e=>{null==o||o(e.target.value)},children:t.map(e=>(0,n.jsxs)(s.ZP,{value:e.key,children:[(0,n.jsxs)("div",{className:a()(d.label,p),children:[e.label,e.explain?(0,n.jsx)(c.u,{title:e.explain,placement:"top",children:(0,n.jsx)("div",{className:d.explain,children:(0,n.jsx)(l.J,{name:"question",size:14,color:"var(--theme-icon-tertiary)"})})}):null]}),e.description&&(0,n.jsx)("div",{className:a()(d.description,v),children:e.description}),m?m(e):null]},String(e.key)))})})},53826:function(e,t,i){i.d(t,{r:function(){return c}});var n=i(71576),o=i(58812),s=i(34491),r=i(66084);class a extends s.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<g id=\\"check-circle\\" clip-path=\\"url(#clip0_476_2200)\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8 1.9334C4.64948 1.9334 1.93334 4.64954 1.93334 8.00006C1.93334 11.3506 4.64948 14.0667 8 14.0667C11.3505 14.0667 14.0667 11.3506 14.0667 8.00006C14.0667 4.64954 11.3505 1.9334 8 1.9334ZM0.733337 8.00006C0.733337 3.9868 3.98673 0.733398 8 0.733398C12.0133 0.733398 15.2667 3.9868 15.2667 8.00006C15.2667 12.0133 12.0133 15.2667 8 15.2667C3.98673 15.2667 0.733337 12.0133 0.733337 8.00006ZM11.4243 5.5758C11.6586 5.81012 11.6586 6.19001 11.4243 6.42433L7.42427 10.4243C7.18995 10.6586 6.81005 10.6586 6.57574 10.4243L4.57574 8.42433C4.34143 8.19001 4.34143 7.81012 4.57574 7.5758C4.81005 7.34149 5.18995 7.34149 5.42427 7.5758L7 9.15154L10.5757 5.5758C10.8101 5.34149 11.19 5.34149 11.4243 5.5758Z\\" fill=\\"#55555D\\"/>\\n</g>\\n<defs>\\n<clipPath id=\\"clip0_476_2200\\">\\n<rect width=\\"16\\" height=\\"16\\" fill=\\"white\\"/>\\n</clipPath>\\n</defs>\\n\\n","viewBox":"0 0 16 16"}');let c=s._Y.createComponent("CheckCircleIcon",a,e=>(0,n.jsx)(o.s,{...e.props,name:"CheckCircleIcon",iconData:l}))},35673:function(e,t,i){i.d(t,{K:function(){return c}});var n=i(71576),o=i(58812),s=i(34491),r=i(66084);class a extends s.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<g id=\\"visualization\\">\\n<g id=\\"Vector\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M10.8832 1.44209C11.2816 1.297 11.7183 1.297 12.1167 1.44209C12.4693 1.57048 12.7251 1.8299 12.9436 2.11025C13.1576 2.38489 13.3919 2.75604 13.6724 3.20043L13.7063 3.25419C14.0233 3.75639 14.2853 4.17142 14.4573 4.51521C14.6303 4.86108 14.767 5.23643 14.713 5.63729C14.653 6.08286 14.4287 6.48999 14.0841 6.7788C13.7741 7.03869 13.3837 7.12353 12.999 7.16186C12.6166 7.19996 12.126 7.19995 11.5323 7.19994H11.4676C10.874 7.19995 10.3833 7.19996 10.0009 7.16186C9.61621 7.12353 9.22584 7.03869 8.91578 6.7788C8.57121 6.48999 8.34696 6.08286 8.28692 5.63729C8.23291 5.23643 8.36959 4.86108 8.54261 4.51521C8.71459 4.17142 8.97658 3.75638 9.29361 3.25418L9.31088 3.22682C9.31645 3.21799 9.322 3.2092 9.32754 3.20043C9.60803 2.75604 9.8423 2.38489 10.0563 2.11025C10.2748 1.8299 10.5307 1.57048 10.8832 1.44209ZM11.7061 2.56964C11.5729 2.52115 11.427 2.52115 11.2938 2.56964C11.2602 2.58188 11.1756 2.62621 11.0029 2.84789C10.8299 3.06985 10.6271 3.38973 10.3256 3.86736C9.98698 4.40383 9.75782 4.76821 9.61581 5.05208C9.47173 5.34011 9.47177 5.4443 9.47618 5.47704C9.49629 5.62628 9.57138 5.76254 9.68663 5.85914C9.71178 5.88021 9.7996 5.93586 10.1199 5.96777C10.4355 5.99922 10.8658 5.99994 11.5 5.99994C12.1341 5.99994 12.5644 5.99922 12.88 5.96777C13.2003 5.93586 13.2882 5.88021 13.3133 5.85914C13.4285 5.76254 13.5036 5.62628 13.5238 5.47704C13.5282 5.4443 13.5282 5.34011 13.3841 5.05208C13.2421 4.76821 13.0129 4.40383 12.6743 3.86736C12.3728 3.38973 12.1701 3.06985 11.9971 2.84789C11.8243 2.62621 11.7397 2.58188 11.7061 2.56964Z\\" fill=\\"#868692\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.36818 8.59993H4.43181C4.90462 8.59992 5.30703 8.5999 5.63335 8.63526C5.9782 8.67262 6.30848 8.75515 6.60305 8.96917C6.76718 9.08842 6.91151 9.23275 7.03076 9.39688C7.24478 9.69145 7.32731 10.0217 7.36467 10.3666C7.40003 10.6929 7.40001 11.0953 7.4 11.5681V11.6317C7.40001 12.1046 7.40003 12.507 7.36467 12.8333C7.32731 13.1781 7.24478 13.5084 7.03076 13.803C6.91151 13.9671 6.76718 14.1115 6.60305 14.2307C6.30848 14.4447 5.9782 14.5273 5.63335 14.5646C5.30704 14.6 4.90463 14.6 4.43182 14.5999H4.36817C3.89536 14.6 3.49295 14.6 3.16664 14.5646C2.82179 14.5273 2.49152 14.4447 2.19694 14.2307C2.03281 14.1115 1.88848 13.9671 1.76923 13.803C1.55521 13.5084 1.47268 13.1781 1.43532 12.8333C1.39996 12.507 1.39998 12.1046 1.39999 11.6317V11.5681C1.39998 11.0953 1.39996 10.6929 1.43532 10.3666C1.47268 10.0217 1.55521 9.69146 1.76923 9.39688C1.88848 9.23275 2.03281 9.08842 2.19694 8.96917C2.49152 8.75515 2.82179 8.67262 3.16664 8.63526C3.49296 8.5999 3.89537 8.59992 4.36818 8.59993ZM3.29589 9.82827C3.05315 9.85457 2.9582 9.89936 2.90229 9.93999C2.84003 9.98522 2.78528 10.04 2.74005 10.1022C2.69942 10.1581 2.65463 10.2531 2.62834 10.4958C2.60082 10.7498 2.6 11.0866 2.6 11.5999C2.6 12.1133 2.60082 12.4501 2.62834 12.704C2.65463 12.9468 2.69942 13.0417 2.74005 13.0976C2.78528 13.1599 2.84003 13.2146 2.90229 13.2599C2.9582 13.3005 3.05315 13.3453 3.29589 13.3716C3.54986 13.3991 3.88667 13.3999 4.4 13.3999C4.91332 13.3999 5.25013 13.3991 5.5041 13.3716C5.74684 13.3453 5.84179 13.3005 5.8977 13.2599C5.95996 13.2146 6.01471 13.1599 6.05994 13.0976C6.10057 13.0417 6.14536 12.9468 6.17166 12.704C6.19917 12.4501 6.2 12.1133 6.2 11.5999C6.2 11.0866 6.19917 10.7498 6.17166 10.4958C6.14536 10.2531 6.10057 10.1581 6.05994 10.1022C6.01471 10.04 5.95996 9.98522 5.8977 9.93999C5.84179 9.89936 5.74684 9.85457 5.5041 9.82827C5.25013 9.80076 4.91332 9.79994 4.4 9.79994C3.88667 9.79994 3.54986 9.80076 3.29589 9.82827Z\\" fill=\\"#868692\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.4 2.4666C3.40588 2.4666 2.6 3.27249 2.6 4.2666C2.6 5.26071 3.40588 6.0666 4.4 6.0666C5.39411 6.0666 6.2 5.26071 6.2 4.2666C6.2 3.27249 5.39411 2.4666 4.4 2.4666ZM1.4 4.2666C1.4 2.60975 2.74314 1.2666 4.4 1.2666C6.05685 1.2666 7.39999 2.60975 7.39999 4.2666C7.39999 5.92346 6.05685 7.2666 4.4 7.2666C2.74314 7.2666 1.4 5.92346 1.4 4.2666Z\\" fill=\\"#868692\\"/>\\n<path d=\\"M11.4215 8.90347C11.5061 8.67654 11.8271 8.67654 11.9117 8.90347L12.4743 10.4131C12.5627 10.6501 12.7497 10.8371 12.9868 10.9255L14.4964 11.4882C14.7233 11.5728 14.7233 11.8938 14.4964 11.9783L12.9868 12.541C12.7497 12.6294 12.5627 12.8164 12.4743 13.0535L11.9117 14.5631C11.8271 14.79 11.5061 14.79 11.4215 14.5631L10.8588 13.0535C10.7704 12.8164 10.5835 12.6294 10.3464 12.541L8.83678 11.9783C8.60985 11.8938 8.60985 11.5728 8.83678 11.4882L10.3464 10.9255C10.5835 10.8371 10.7704 10.6501 10.8588 10.4131L11.4215 8.90347Z\\" fill=\\"#868692\\"/>\\n</g>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let c=s._Y.createComponent("FileSlugIcon",a,e=>(0,n.jsx)(o.s,{...e.props,name:"FileSlugIcon",iconData:l}))},84853:function(e,t,i){i.d(t,{h:function(){return c}});var n=i(71576),o=i(58812),s=i(34491),r=i(66084);class a extends s.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Fill/&#230;&#147;&#141;&#228;&#189;&#156;/pin2\\">\\n<path id=\\"Union\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.65303 1.64005C4.7701 1.47386 4.96068 1.375 5.16397 1.375H10.8357C11.039 1.375 11.2296 1.47386 11.3467 1.64005C11.4637 1.80623 11.4927 2.01897 11.4243 2.21039L10.9009 3.67449C10.896 3.68799 10.8936 3.70223 10.8936 3.71657V5.92731C10.8936 5.95686 10.904 5.98546 10.9231 6.00802L12.1123 7.41424C13.143 8.63293 12.2767 10.5 10.6807 10.5H8.62485V14C8.62485 14.3452 8.34503 14.625 7.99985 14.625C7.65467 14.625 7.37485 14.3452 7.37485 14V10.5H5.31903C3.72297 10.5 2.85672 8.63294 3.88736 7.41424L5.07659 6.00802C5.09567 5.98546 5.10614 5.95686 5.10614 5.92731V3.71657C5.10614 3.70223 5.10368 3.68799 5.09885 3.67449L4.57544 2.21039C4.50701 2.01897 4.53595 1.80623 4.65303 1.64005Z\\" fill=\\"#6841EA\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let c=s._Y.createComponent("FillPinIcon",a,e=>(0,n.jsx)(o.s,{...e.props,name:"FillPinIcon",iconData:l}))},3658:function(e,t,i){i.d(t,{F:function(){return c}});var n=i(71576),o=i(58812),s=i(34491),r=i(66084);class a extends s.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M171.096 31.6265C160.055 20.5775 141.177 25.8827 137.508 41.0654L136.387 45.7026L102.589 79.5898L50.5612 86.6479C34.1687 88.8718 27.4093 108.902 39.1025 120.603L80.0964 161.627L35.1279 206.595C31.2227 210.501 31.2227 216.832 35.1279 220.738C39.0332 224.643 45.3648 224.643 49.27 220.738L94.2334 175.774L135.102 216.673C146.806 228.385 166.859 221.616 169.07 205.206L175.855 154.856L210.573 120.067L215.494 118.819C230.53 115.006 235.689 96.269 224.725 85.296L171.096 31.6265ZM210.577 99.4328L156.949 45.7632L155.828 50.4004C154.966 53.9672 153.139 57.2281 150.548 59.8262L116.75 93.7134C113.653 96.8179 109.622 98.8188 105.277 99.4083L53.2498 106.466L149.25 202.536L156.034 152.185C156.618 147.85 158.608 143.825 161.698 140.729L196.416 105.939C198.965 103.385 202.158 101.568 205.656 100.681L210.577 99.4328Z\\" fill=\\"black\\"/>\\n\\n","viewBox":"0 0 256 256"}');let c=s._Y.createComponent("LineSlantPinIcon",a,e=>(0,n.jsx)(o.s,{...e.props,name:"LineSlantPinIcon",iconData:l}))},43775:function(e,t,i){i.d(t,{t:function(){return c}});var n=i(71576),o=i(58812),s=i(34491),r=i(66084);class a extends s.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<g id=\\"move\\" clip-path=\\"url(#clip0_25_23657)\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.50826 0.733399H11.4919C12.0306 0.733392 12.4711 0.733386 12.8292 0.76264C13.1998 0.79292 13.5345 0.857508 13.8471 1.01678C14.3363 1.26605 14.7341 1.6638 14.9834 2.15302C15.1426 2.46562 15.2072 2.80034 15.2375 3.17094C15.2667 3.52899 15.2667 3.96956 15.2667 4.50826V8.00007C15.2667 8.33144 14.9981 8.60007 14.6667 8.60007C14.3354 8.60007 14.0667 8.33144 14.0667 8.00007V4.5334C14.0667 3.96345 14.0663 3.57207 14.0415 3.26866C14.0173 2.97226 13.9729 2.81304 13.9141 2.69781C13.7799 2.43438 13.5657 2.22021 13.3023 2.08599C13.1871 2.02728 13.0279 1.98287 12.7315 1.95865C12.4281 1.93387 12.0367 1.9334 11.4667 1.9334H4.5334C3.96345 1.9334 3.57207 1.93387 3.26866 1.95865C2.97226 1.98287 2.81304 2.02728 2.69781 2.08599C2.43438 2.22021 2.22021 2.43439 2.08599 2.69781C2.02728 2.81304 1.98287 2.97226 1.95865 3.26866C1.93387 3.57207 1.9334 3.96345 1.9334 4.5334V11.4667C1.9334 12.0367 1.93387 12.4281 1.95865 12.7315C1.98287 13.0279 2.02728 13.1871 2.08599 13.3023C2.22021 13.5657 2.43439 13.7799 2.69781 13.9141C2.81304 13.9729 2.97226 14.0173 3.26866 14.0415C3.57207 14.0663 3.96345 14.0667 4.5334 14.0667H8.00007C8.33144 14.0667 8.60007 14.3354 8.60007 14.6667C8.60007 14.9981 8.33144 15.2667 8.00007 15.2667H4.50826C3.96956 15.2667 3.52899 15.2667 3.17094 15.2375C2.80033 15.2072 2.46562 15.1426 2.15302 14.9834C1.6638 14.7341 1.26605 14.3363 1.01678 13.8471C0.857508 13.5345 0.79292 13.1998 0.76264 12.8292C0.733386 12.4711 0.733392 12.0306 0.733399 11.4919V4.50826C0.733392 3.96956 0.733386 3.529 0.76264 3.17094C0.79292 2.80034 0.857508 2.46562 1.01678 2.15302C1.26605 1.6638 1.6638 1.26605 2.15302 1.01678C2.46562 0.857508 2.80033 0.79292 3.17094 0.76264C3.529 0.733386 3.96956 0.733392 4.50826 0.733399ZM3.7334 5.00007C3.7334 4.66869 4.00203 4.40007 4.3334 4.40007H11.6667C11.9981 4.40007 12.2667 4.66869 12.2667 5.00007C12.2667 5.33144 11.9981 5.60007 11.6667 5.60007H4.3334C4.00203 5.60007 3.7334 5.33144 3.7334 5.00007ZM3.7334 8.66673C3.7334 8.33536 4.00203 8.06673 4.3334 8.06673H11.6667C11.9981 8.06673 12.2667 8.33536 12.2667 8.66673C12.2667 8.9981 11.9981 9.26673 11.6667 9.26673H4.3334C4.00203 9.26673 3.7334 8.9981 3.7334 8.66673ZM12.2425 10.2425C12.4768 10.0082 12.8567 10.0082 13.091 10.2425L15.091 12.2425C15.3253 12.4768 15.3253 12.8567 15.091 13.091L13.091 15.091C12.8567 15.3253 12.4768 15.3253 12.2425 15.091C12.0082 14.8567 12.0082 14.4768 12.2425 14.2425L13.2182 13.2667H10.6667C10.3354 13.2667 10.0667 12.9981 10.0667 12.6667C10.0667 12.3354 10.3354 12.0667 10.6667 12.0667H13.2182L12.2425 11.091C12.0082 10.8567 12.0082 10.4768 12.2425 10.2425Z\\" fill=\\"#8C8C8C\\"/>\\n</g>\\n<defs>\\n<clipPath id=\\"clip0_25_23657\\">\\n<rect width=\\"16\\" height=\\"16\\" fill=\\"white\\"/>\\n</clipPath>\\n</defs>\\n\\n","viewBox":"0 0 16 16"}');let c=s._Y.createComponent("MoveIcon",a,e=>(0,n.jsx)(o.s,{...e.props,name:"MoveIcon",iconData:l}))},42614:function(e,t,i){i.d(t,{W:function(){return c}});var n=i(71576),o=i(58812),s=i(34491),r=i(66084);class a extends s.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Line/&#230;&#147;&#141;&#228;&#189;&#156;/&#230;&#144;&#156;&#231;&#180;&#162;\\">\\n<path id=\\"Union\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M9.53125 2.21875C5.21654 2.21875 1.71875 5.71654 1.71875 10.0312C1.71875 14.346 5.21654 17.8438 9.53125 17.8438C11.4272 17.8438 13.1654 17.1684 14.5184 16.0451L16.7913 18.3181C17.0964 18.6231 17.5911 18.6231 17.8962 18.3181C18.2013 18.013 18.2013 17.5183 17.8962 17.2132L15.6154 14.9325C16.6965 13.5921 17.3438 11.8873 17.3438 10.0312C17.3438 5.71654 13.846 2.21875 9.53125 2.21875ZM3.28125 10.0312C3.28125 6.57949 6.07949 3.78125 9.53125 3.78125C12.983 3.78125 15.7812 6.57949 15.7812 10.0312C15.7812 13.483 12.983 16.2812 9.53125 16.2812C6.07949 16.2812 3.28125 13.483 3.28125 10.0312Z\\" fill=\\"#6841EA\\"/>\\n</g>\\n","viewBox":"0 0 20 21"}');let c=s._Y.createComponent("SearchIcon",a,e=>(0,n.jsx)(o.s,{...e.props,name:"SearchIcon",iconData:l}))},49639:function(e,t,i){i.d(t,{p:function(){return c}});var n=i(71576),o=i(58812),s=i(34491),r=i(66084);class a extends s.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<g id=\\"star-cancel\\">\\n<g id=\\"Vector\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M11.3975 1.86592C11.7786 1.6842 12.2214 1.6842 12.6025 1.86592C12.9281 2.02113 13.11 2.29185 13.2061 2.44874C13.3051 2.61046 13.4074 2.81778 13.5098 3.02538L15.6878 7.43782L20.5597 8.14992C20.7887 8.18335 21.0174 8.21674 21.2017 8.26106C21.3806 8.30407 21.6941 8.3937 21.9421 8.65545C22.2325 8.96192 22.369 9.38305 22.3137 9.8016C22.2665 10.1591 22.0652 10.4156 21.9457 10.5554C21.8224 10.6994 21.6568 10.8607 21.491 11.0221L19.3117 13.1447C18.9557 13.4915 18.3859 13.484 18.0391 13.128C17.6922 12.7719 17.6997 12.2021 18.0558 11.8553L20.0664 9.89694L15.3755 9.2113C15.3664 9.20997 15.3561 9.20853 15.3447 9.20696C15.2345 9.19168 15.0254 9.16271 14.8318 9.07269C14.6676 8.99633 14.5198 8.88883 14.3965 8.75616C14.2512 8.59975 14.1592 8.4098 14.1106 8.30964C14.1056 8.29931 14.1011 8.28992 14.097 8.28164L12 4.03333L11.307 5.43723C11.087 5.88295 10.5473 6.06592 10.1016 5.84591C9.65591 5.6259 9.47294 5.08622 9.69295 4.64051L10.4756 3.05495C10.4805 3.04509 10.4853 3.03523 10.4902 3.02538C10.5926 2.81778 10.6949 2.61046 10.7939 2.44874C10.89 2.29185 11.0719 2.02113 11.3975 1.86592ZM9.55676 7.48423C9.92091 7.82255 9.94183 8.39202 9.60351 8.75616C9.48024 8.88883 9.33241 8.99633 9.1682 9.07269C8.97461 9.16271 8.76554 9.19168 8.65531 9.20696C8.64393 9.20853 8.63361 9.20996 8.62446 9.2113L3.93357 9.89694L7.32653 13.2017C7.33316 13.2081 7.34069 13.2154 7.34899 13.2233C7.42941 13.3005 7.58192 13.4468 7.68592 13.6336C7.77413 13.7921 7.83073 13.9661 7.85256 14.1462C7.87829 14.3584 7.84101 14.5664 7.82135 14.6761C7.81932 14.6875 7.81748 14.6977 7.81592 14.7069L7.01536 19.3745L11.2087 17.1693C11.2169 17.1649 11.2261 17.16 11.2363 17.1546C11.3345 17.102 11.5208 17.0022 11.7306 16.9611C11.9085 16.9262 12.0915 16.9262 12.2694 16.9611C12.4792 17.0022 12.6655 17.102 12.7637 17.1546C12.7739 17.16 12.7831 17.1649 12.7913 17.1693L16.9846 19.3745L16.6015 17.1406C16.5175 16.6507 16.8465 16.1854 17.3364 16.1014C17.8263 16.0173 18.2916 16.3464 18.3756 16.8363L18.7986 19.3025C18.8378 19.5307 18.8769 19.7586 18.8918 19.9476C18.9064 20.1311 18.9183 20.4571 18.7461 20.7741C18.5446 21.1451 18.1863 21.4054 17.7711 21.4824C17.4164 21.5481 17.11 21.436 16.9401 21.3655C16.7649 21.2928 16.5603 21.1851 16.3554 21.0773L12 18.7869L7.64464 21.0773C7.4397 21.1851 7.23506 21.2928 7.05988 21.3655C6.88995 21.436 6.58358 21.5481 6.22891 21.4824C5.8137 21.4054 5.45541 21.1451 5.25385 20.7741C5.08169 20.4571 5.09363 20.1311 5.10815 19.9476C5.12312 19.7586 5.16225 19.5307 5.20143 19.3025L6.03293 14.4544L2.53258 11.0451C2.5247 11.0374 2.51682 11.0297 2.50894 11.0221C2.34315 10.8606 2.17757 10.6994 2.05434 10.5554C1.93475 10.4156 1.73346 10.1591 1.68626 9.8016C1.63098 9.38306 1.76753 8.96192 2.05788 8.65545C2.30586 8.3937 2.6194 8.30407 2.79825 8.26106C2.98256 8.21674 3.21125 8.18335 3.44023 8.14993C3.4511 8.14834 3.46198 8.14675 3.47286 8.14516L8.36413 7.43023C8.3783 7.42816 8.39099 7.4263 8.40254 7.4246C8.7443 7.16652 9.23212 7.1826 9.55676 7.48423Z\\" fill=\\"black\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.33234 3.48861C4.68381 3.13714 5.25366 3.13714 5.60513 3.48861L21.3551 19.2386C21.7066 19.5901 21.7066 20.1599 21.3551 20.5114C21.0037 20.8629 20.4338 20.8629 20.0823 20.5114L4.33234 4.7614C3.98086 4.40993 3.98086 3.84008 4.33234 3.48861Z\\" fill=\\"black\\"/>\\n</g>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let c=s._Y.createComponent("StarCancelIcon",a,e=>(0,n.jsx)(o.s,{...e.props,name:"StarCancelIcon",iconData:l}))},40449:function(e,t,i){i.d(t,{X:function(){return c}});var n=i(71576),o=i(58812),s=i(34491),r=i(66084);class a extends s.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<g id=\\"trash\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M7.44297 0.733399H8.55684C8.91008 0.733389 9.21087 0.733381 9.45783 0.753558C9.71727 0.774755 9.96966 0.821177 10.211 0.94412C10.5747 1.12948 10.8705 1.42524 11.0558 1.78902C11.1788 2.03031 11.2252 2.2827 11.2464 2.54214C11.2658 2.779 11.2665 3.06538 11.2666 3.40007H13.9999C14.3313 3.40007 14.5999 3.6687 14.5999 4.00007C14.5999 4.33144 14.3313 4.60007 13.9999 4.60007H13.2666V11.4919C13.2666 12.0306 13.2666 12.4711 13.2373 12.8292C13.207 13.1998 13.1425 13.5345 12.9832 13.8471C12.7339 14.3363 12.3362 14.7341 11.8469 14.9833C11.5344 15.1426 11.1996 15.2072 10.829 15.2375C10.471 15.2667 10.0304 15.2667 9.49171 15.2667H6.5081C5.9694 15.2667 5.52883 15.2667 5.17078 15.2375C4.80017 15.2072 4.46545 15.1426 4.15286 14.9833C3.66364 14.7341 3.26589 14.3363 3.01662 13.8471C2.85734 13.5345 2.79276 13.1998 2.76248 12.8292C2.73322 12.4711 2.73323 12.0306 2.73324 11.4919L2.73324 4.60007H1.9999C1.66853 4.60007 1.3999 4.33144 1.3999 4.00007C1.3999 3.6687 1.66853 3.40007 1.9999 3.40007H4.73324C4.73326 3.06538 4.73404 2.779 4.75339 2.54214C4.77459 2.2827 4.82101 2.03031 4.94396 1.78902C5.12931 1.42524 5.42507 1.12948 5.78885 0.94412C6.03014 0.821177 6.28254 0.774755 6.54198 0.753558C6.78893 0.733381 7.08972 0.733389 7.44297 0.733399ZM3.93324 4.60007V11.4667C3.93324 12.0367 3.9337 12.4281 3.95849 12.7315C3.98271 13.0279 4.02711 13.1871 4.08583 13.3023C4.22005 13.5657 4.43422 13.7799 4.69765 13.9141C4.81288 13.9729 4.9721 14.0173 5.2685 14.0415C5.5719 14.0663 5.96328 14.0667 6.53324 14.0667H9.46657C10.0365 14.0667 10.4279 14.0663 10.7313 14.0415C11.0277 14.0173 11.1869 13.9729 11.3022 13.9141C11.5656 13.7799 11.7798 13.5657 11.914 13.3023C11.9727 13.1871 12.0171 13.0279 12.0413 12.7315C12.0661 12.4281 12.0666 12.0367 12.0666 11.4667V4.60007H3.93324ZM10.0666 3.40007H5.93324C5.93334 3.05392 5.93463 2.82072 5.94941 2.63986C5.96454 2.45463 5.99078 2.37773 6.01316 2.33381C6.08347 2.19582 6.19566 2.08363 6.33364 2.01333C6.37757 1.99095 6.45447 1.96471 6.6397 1.94957C6.83193 1.93387 7.0833 1.9334 7.46657 1.9334H8.53324C8.9165 1.9334 9.16787 1.93387 9.36011 1.94957C9.54534 1.96471 9.62223 1.99095 9.66616 2.01333C9.80415 2.08363 9.91633 2.19582 9.98664 2.33381C10.009 2.37773 10.0353 2.45463 10.0504 2.63986C10.0652 2.82072 10.0665 3.05392 10.0666 3.40007Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let c=s._Y.createComponent("TrashV2Icon",a,e=>(0,n.jsx)(o.s,{...e.props,name:"TrashV2Icon",iconData:l}))},97965:function(e,t,i){i.d(t,{Y:function(){return ea}});var n=i(10148),o=i(66084),s=i(52921),r=i(34491),a=i(56607),l=i(92235),c=i(73047),d=i(92020),h=i(1396),p=i(18245),u=i(32930);class m{async shouldShow(){if(!a.o.isWeb)return!1;let e=l.m.getUrlParams(window.location.href);return!!e.model||!!e.ks}open(){this.visible||(this.setCurrentChatModel(),setTimeout(()=>{this.visible=!1},3e3))}setCurrentChatModel(){if(!a.o.isWeb)return;let e=h.Mp.getMonicaChatController(),t=l.m.getUrlParams(window.location.href),i=t.model,n=t.ks,{modelAndSource:o}=e,s=e.modelAndSource.modelList.find(e=>e.key===i),r=e.modelAndSource.knowledgeSourceList.find(e=>e.key===n);if(s){o.handleChangeBaseModelEnabled({key:String(i),enabled:!0,source:"after_set_model_param"});let e=u.S.checkIsStandardModel(String(i)),{isEnough:t}=p.K.checkCredits({module:e?"basic_query":"genius_bot",source:"after_set_model_param"});t&&(this.visible=!0),this.currentModel=null==s?void 0:s.name}r&&d.ll.waitServerConfigReady().then(()=>{o.handleChangeKnowledgeSourceEnabled({key:n,enabled:!0,source:"after_set_ks_param",botId:e.botData.botId})}),history.replaceState({},"",window.location.pathname)}constructor(){(0,o._)(this,"visible",!1),(0,o._)(this,"currentModel",""),(0,c.rC)(this)}}(0,s.gn)([r.SB],m.prototype,"visible",void 0),(0,s.gn)([r.SB],m.prototype,"currentModel",void 0);var v=i(91433),g=i(90180),x=i(33381);class f{async shouldShow(){return!x.userController.isVipUser}async open(){this.inited||(this.inited=!0,this.checkClosedFeatureType(),p.K.eventEmitter.listenBy(this,"usageInfoChange",()=>{this.checkClosedFeatureType()}))}async checkClosedFeatureType(){let e=h.Mp.getActiveChatBotController();if(!(null==e?void 0:e.botData.isMonicaBot))return;let{chatBotMention:t,modelAndSource:i}=e,n=p.K.getUsageInfo("genius_bot"),o=p.K.getUsageInfo("web_search");n.finallyCanUsed<=0&&n.finallyUsed>0&&g.A.gpt4Enabled&&(this.closedFeatureType="gpt4",await g.A.setGpt4Enabled(!1)),o.finallyCanUsed<=0&&o.finallyUsed>0&&i.knowledgeSourceEnabled&&"web"===i.knowledgeSourceKey&&(this.closedFeatureType="webAccess",i.handleChangeKnowledgeSourceEnabled({enabled:!1,source:"vip_toolbar_switch_source",botId:v.Z9.monica}))}constructor(){(0,o._)(this,"closedFeatureType",null),(0,o._)(this,"inited",!1),(0,c.rC)(this)}}(0,s.gn)([r.SB],f.prototype,"closedFeatureType",void 0);var y=i(92660),C=i(46756);class k{async checkConversationMode(){if("always_new"===g.A.sidebarConversationMode)await this.handleNewChat();else{let e=await C.y.getLastActiveConversation();if(!e)return!1;if("always_restore"===g.A.sidebarConversationMode)await this.handleRestore(e);else if("auto"===g.A.sidebarConversationMode){if(void 0===e.lastMsgUpdateTime)return!1;let t=new Date(e.lastMsgUpdateTime);if(new Date().getTime()-t.getTime()>10*y.EB)return await this.handleNewChat(),!0;await this.handleRestore(e)}}return!1}async shouldShow(){return!!a.o.isExtension&&!!await this.checkConversationMode()&&!await d.ll.getUiFlag("autoNewChatTipsShowed")}open(){this.tipsVisible=!0,d.ll.setUiFlag("autoNewChatTipsShowed",!0)}close(){this.tipsVisible=!1}async handleNewChat(){}async handleRestore(e){e&&e.convId&&e.botUid&&await h.Mp.loadConversionForBot(e.botUid,e.convId,!1)}constructor(){(0,o._)(this,"tipsVisible",!1),(0,o._)(this,"showContinueLastChat",!1),(0,c.rC)(this)}}(0,s.gn)([r.SB],k.prototype,"tipsVisible",void 0),(0,s.gn)([r.SB],k.prototype,"showContinueLastChat",void 0);class w{async shouldShow(){return"desktop-home"===a.o.entryType&&!g.A.globalScreenshotGuideShowed}open(){this.isOpen=!0}constructor(){(0,o._)(this,"isOpen",!1),(0,o._)(this,"close",()=>{this.isOpen=!1,g.A.setGlobalScreenshotGuideShowed(!0)}),(0,c.rC)(this)}}(0,s.gn)([r.SB],w.prototype,"isOpen",void 0);class b{setViews(e){this.views=e}async shouldShow(){return"desktop-home"===a.o.entryType&&!g.A.desktopSidebarGuideShowed}async open(){this.views.openGlobalSidebarGuideDialog({insertTarget:"mainWindow"})}constructor(){(0,o._)(this,"views",void 0),(0,c.rC)(this)}}var S=i(4461),A=i(88882),B=i(60445),E=i(21320),I=i(25449),D=i(11502),j={src:"https://assets.monica.im/home-web/_next/static/media/gift_box.9302fee3.png",height:96,width:96,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAhFBMVEXSkUfKOW7/rtTPnZdVQVBBEAvcvEYNQXTDnJz/2qwEBhZ6IESWhU5sTACEfoJmXlkxIQCQYT8gFRHEsH+qmWQJBRHmj1HfoFfgsUhqURvsshIABUb/xRjwphL6rAhBu/+SomgOh9HDv3M2qvz/f6v/rL5YOAro0WaqcASNXwCwhxvxtSGkcBIZAAAAJHRSTlMBLH6l/Bf+Cg0bb6Tav336/VzV2vv84aDr9s4z4arY+Y18jV1GpWuDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARUlEQVR4nAXBBQKAIAAAsVNRwO7ujv//zw201qhNosqqHddpgSSrv96ZIbxy8Q420nei4mk6sA4R36kEc/eC0wWUAbbkB55rA/mSZBegAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},_={src:"https://assets.monica.im/home-web/_next/static/media/giftIcon.9c1a61cc.png",height:144,width:144,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAe1BMVEVMaXGpoeXGmen9hqFwe/b/3lJqYP/LsfSFev6ol/x0Zv/MqrTAoNxVVf//rx7OqsB/cfuqqv+4sf+pqPPpda7Vl977eaP5iq39mqz/kbK1pfq9s/+div+XtfaWjvPWw+mOnvOAcf+mq/G2rf//33S5trDXneigof/7mb2CRbbpAAAAIHRSTlMAWv75/p6o/Vr+eNH8AzpqShXN/cqNQ5D+dP/////+/m1AW2MAAAAJcEhZcwAACxMAAAsTAQCanBgAAABHSURBVHicHcEFEoAgAATAowTsDtLW/7/QGXeBccJvmVmfJGmB4WW3dlsNRaOk0imoR+6+8wQkypXzS0CcuQnBVigza/TRNh+DcAQjUtoSMAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},N=i(47720);class L{get S(){return A.S.Global.controllers.autoDisplayController.homeAd}get extHomeAd(){if("new_comer"===this.mode){var e;if(!x.userController.isFreeUser)return;return{id:"new_comer",adsIcon:(0,S.Q)(j),adsContent:this.S.newComer.title,adsDesc:this.S.newComer.desc,endTime:new Date(I.promotionController.newUserDiscount.endTime).toUTCString(),startTime:new Date((null===(e=x.userController.userInfo)||void 0===e?void 0:e.createdAt)||0).toUTCString(),buttonText:this.S.newComer.btn,buttonLink:l.m.genFullUrl(l.m.genUrl(B.Cl.price,{source:"ext_ad_new_comer"})),layout:""}}return"yearly_guide"===this.mode?this.yearlyGuideConfig:x.userController.isFreeUser?N.serverConfigController.getStaticConfig("extHomeAdFree"):N.serverConfigController.getStaticConfig("extHomeAd")}get yearlyGuideConfig(){if(x.userController.userVipStatus&&I.promotionController.yearlyGuide.planConfig&&I.promotionController.yearlyGuide.config)return{id:"yearly_guide",adsIcon:(0,S.Q)(_),adsContent:(0,A.x)(this.S.yearlyGuide.title,{discount:I.promotionController.yearlyGuide.planConfig.targetPlan.yearlyDiscountPercent}),adsDesc:this.S.yearlyGuide.desc,buttonText:this.S.yearlyGuide.btn,buttonLink:l.m.genFullUrl(l.m.genUrl(B.Cl.price,{source:"ext_ad_yearly_guide"})),layout:"",startTime:I.promotionController.yearlyGuide.config.startTime,endTime:I.promotionController.yearlyGuide.config.endTime,tag:I.promotionController.yearlyGuide.config.tag}}setViews(e){this.views=e}async shouldShowNewComer(){return await N.serverConfigController.planConfigsReadySource.waitReady(),!(!a.o.isExtension||!x.userController.isLogin||await d.ll.getUiFlag("chatHomeAdNewComerClosed"))&&!!I.promotionController.newUserDiscount.enable}async shouldShow(){var e;if(await N.serverConfigController.staticConfigReadySource.waitReady(),!(null===(e=this.extHomeAd)||void 0===e?void 0:e.id))return!1;let t=await d.ll.getUiFlag("chatNoticeCardId");if(this.noticeId=null!=t?t:"",this.extHomeAd.id===this.noticeId)return!1;let i=Date.now();return this.extHomeAd.startTime&&this.extHomeAd.endTime?E.L.isAfter(i,this.extHomeAd.startTime)&&E.L.isBefore(i,this.extHomeAd.endTime):this.extHomeAd.startTime?E.L.isAfter(i,this.extHomeAd.startTime):!this.extHomeAd.endTime||E.L.isBefore(i,this.extHomeAd.endTime)}async shouldShowYearlyGuide(){if(await N.serverConfigController.staticConfigReadySource.waitReady(),!I.promotionController.yearlyGuide.enable||!this.yearlyGuideConfig)return console.log("[HomeAdController]shouldShowYearGuide: not match hit condition"),!1;let e=Date.now();if(E.L.isBefore(e,this.yearlyGuideConfig.startTime))return console.log("[HomeAdController]shouldShowYearGuide: before startTime"),!1;if(E.L.isAfter(e,this.yearlyGuideConfig.endTime))return console.log("[HomeAdController]shouldShowYearGuide: after endTime"),!1;let t=await d.ll.getUiFlag("chatHomeAdYearlyGuide");return null==t||!t[this.yearlyGuideConfig.tag]||(console.log("[HomeAdController]shouldShowYearGuide: ".concat(this.yearlyGuideConfig.tag," - already showed")),!1)}getEvent(e){return"chat_notice_alert_".concat(e)}open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.visible=!0,this.mode=e}close(){this.visible=!1,this.closeAd("autoDisplayDialog")}clickAd(){var e,t,i;if(D.M.createUserBehaviorEvent({eventName:this.getEvent("click"),extData:{adId:null===(e=this.extHomeAd)||void 0===e?void 0:e.id}}),"yearly_guide"===this.mode){this.views.openUpgradeYearlyDialog({source:"home_ad",insertTarget:a.o.isExtension?"mainWindow":"dialogRoot"});return}(null===(t=this.extHomeAd)||void 0===t?void 0:t.buttonLink)&&window.open(null===(i=this.extHomeAd)||void 0===i?void 0:i.buttonLink,"_blank")}setShowedFlag(){if("new_comer"===this.mode)d.ll.setUiFlag("chatHomeAdNewComerClosed",!0);else if("yearly_guide"===this.mode){var e,t=this;d.ll.getUiFlag("chatHomeAdYearlyGuide").then(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.yearlyGuideConfig&&d.ll.setUiFlag("chatHomeAdYearlyGuide",{...e,[t.yearlyGuideConfig.tag]:!0})})}else"default"===this.mode&&d.ll.setUiFlag("chatNoticeCardId",(null===(e=this.extHomeAd)||void 0===e?void 0:e.id)||"")}closeAd(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"click";this.noticeId=(null===(e=this.extHomeAd)||void 0===e?void 0:e.id)||"",this.setShowedFlag(),"click"===i&&D.M.createUserBehaviorEvent({eventName:this.getEvent("close"),extData:{adId:null===(t=this.extHomeAd)||void 0===t?void 0:t.id}})}constructor(){(0,o._)(this,"visible",!1),(0,o._)(this,"noticeId",void 0),(0,o._)(this,"mode","default"),(0,o._)(this,"views",void 0),(0,c.rC)(this)}}(0,s.gn)([r.SB],L.prototype,"visible",void 0),(0,s.gn)([r.SB],L.prototype,"noticeId",void 0),(0,s.gn)([r.SB],L.prototype,"mode",void 0),(0,s.gn)([r.Fl],L.prototype,"S",null),(0,s.gn)([r.Fl],L.prototype,"extHomeAd",null),(0,s.gn)([r.Fl],L.prototype,"yearlyGuideConfig",null);var M=i(48655),T=i(85132),P=i(18312);class F{setViews(e){this.views=e}async shouldShow(){if("image"===P.J.activeTabKey)return!1;let e=await d.ll.getUiFlag("showedImageFeatures")||[];if(!a.o.isExtension&&!g.A.imageOnboardingShowed||g.A.noMoreShowedImageDialog)return!1;let t=await M.Cc.onlyFetchStaticConfig([T.$.imagePopupList]),i=null==t?void 0:t.imagePopupList;return null!=i&&!!i.length&&(this.imagePopupConfig=i[i.length-1],!(void 0!==this.imagePopupConfig.id&&e.includes(this.imagePopupConfig.id)))}open(){this.hotDotVisible=!0,P.J.eventEmitter.listenBy(this,"tabChange",e=>{let{key:t}=e;"image"===t&&(this.hotDotVisible=!1,P.J.eventEmitter.stopListenBy(this),setTimeout(()=>{this.openDialog()},200))})}close(){this.visible=!1}openDialog(){this.visible=!0,this.views.openImageDisplayDialog({insertTarget:a.o.isExtension?"mainWindow":"dialogRoot",config:this.imagePopupConfig,onClose:()=>{this.visible=!1}})}constructor(){(0,o._)(this,"views",void 0),(0,o._)(this,"hotDotVisible",!1),(0,o._)(this,"visible",!1),(0,o._)(this,"imagePopupConfig",null),(0,c.rC)(this)}}(0,s.gn)([r.SB],F.prototype,"hotDotVisible",void 0),(0,s.gn)([r.SB],F.prototype,"visible",void 0),(0,s.gn)([r.SB],F.prototype,"imagePopupConfig",void 0);class V{setViews(e){this.views=e}async shouldShow(){var e,t;if(!x.userController.isFreeUser||!(null===(e=x.userController.userInfo)||void 0===e?void 0:e.inviteBy)||!a.o.isExtension)return!1;let i=new Date((null===(t=x.userController.userInfo)||void 0===t?void 0:t.createdAt)||0).getTime();if(!(Date.now()-i<=3*y.x4))return!1;let n=await d.ll.getUiFlag("inviteBonusShowedIds")||[];return!n.includes(x.userController.userInfo.uid)&&(d.ll.setUiFlag("inviteBonusShowedIds",[...n,x.userController.userInfo.uid]),!0)}open(){this.views.openInviteBonusDialog({insertTarget:"mainWindow"})}constructor(){(0,o._)(this,"views",void 0),(0,c.rC)(this)}}class G{setViews(e){this.views=e}async shouldShow(){let e=await d.ll.get("inviteDialogShowedIds"),t=e.includes(x.userController.userInfo.uid);if(t)return!1;let{isSevenDaysProEvent:i}=await D.M.is7daysProEvent();return!i&&!t&&(d.ll.set("inviteDialogShowedIds",[...e,x.userController.userInfo.uid]),!0)}open(){this.views.openInviteDialog({insertTarget:"mainWindow"})}constructor(){(0,o._)(this,"views",void 0),(0,o._)(this,"visible",!1),(0,c.rC)(this)}}(0,s.gn)([r.SB],G.prototype,"visible",void 0);var R=i(38172),U=i(71549),O=i(67061);class H{setViews(e){this.views=e}async shouldShow(){if(!a.o.isExtension||"sidebar"!==O.L.mainWindowMode||!x.userController.userInfo)return!1;try{let e=await d.ll.getUiFlag("inviteUserCount"),{installedCount:t=0}=await R.W.getInviteInfo();if((0,U.Z)(e))return d.ll.setUiFlag("inviteUserCount",t||0),!1;return d.ll.setUiFlag("inviteUserCount",t),this.count=t-e,this.count>0}catch(e){return!1}}open(){this.visible||(this.visible=!0,setTimeout(()=>{this.visible=!1},3e3))}constructor(){(0,o._)(this,"views",void 0),(0,o._)(this,"visible",!1),(0,o._)(this,"count",0),(0,c.rC)(this)}}(0,s.gn)([r.SB],H.prototype,"visible",void 0),(0,s.gn)([r.SB],H.prototype,"count",void 0);class W{setViews(e){this.views=e}async shouldShow(){if(!x.userController.userVipStatus||!x.userController.userInfo)return!1;let{currentPeriodEnd:e,cancelAtPeriodEnd:t,paymentPlatform:i}=x.userController.userVipStatus,n=await d.ll.get("monthlyVipResubscribeDialogShowedIds"),o=n.includes(x.userController.userInfo.uid);if(e){var s;let r=1e3*e,a=Date.now(),l=(null===(s=x.userController.userVipStatus)||void 0===s?void 0:s.interval)==="month",c=r-a>0&&r-a<=7*y.x4;if(l&&t&&c&&!o&&!("apple"===i||"google_play"===i))return d.ll.set("monthlyVipResubscribeDialogShowedIds",[...n,x.userController.userInfo.uid]),!0}return!1}open(){this.views.openMonthlyVipResubscribeDialog({insertTarget:"mainWindow"})}constructor(){(0,o._)(this,"views",void 0)}}class z{setViews(e){this.views=e}async shouldShow(){let e=await d.ll.getNewWorkspace();return!!e&&!e.showed}async open(){let e=await d.ll.getNewWorkspace();e&&(d.ll.handleNewWorkspaceShowed(e),this.views.openNewTeamDialog({insertTarget:"mainWindow",team:e}))}constructor(){(0,o._)(this,"views",void 0),(0,o._)(this,"someState",""),(0,c.rC)(this)}}(0,s.gn)([r.SB],z.prototype,"someState",void 0);var q=i(18363),Y=i(14622),Z=i(82417);class J{get isArtUser(){let{config:e,groupNameMap:t}=Z.abTestController.onboardingNewStyle.tourGuide;return e.groupName===t.artGuide}setViews(e){this.views=e}async shouldShow(){var e;if(!x.userController.isLogin)return!1;if(a.o.isExtension){if("ext-sidebar"!==a.o.entryType)return!1}else if(!a.o.isWeb)return!1;else if("web-home"!==a.o.entryType)return!1;let t=new Date((null===(e=x.userController.userInfo)||void 0===e?void 0:e.createdAt)||0).getTime();if(Date.now()-t>1*y.x4||await d.ll.getUiFlag("onboardingTourShowed"))return!1;let{config:i,groupNameMap:n}=Z.abTestController.onboardingNewStyle.tourGuide;return i.groupName!==n.unset&&(this.reportEvent(i.groupName,i.version),i.groupName!==n.unset)}async open(){let{config:e,groupNameMap:t}=Z.abTestController.onboardingNewStyle.tourGuide,i=()=>{};e.groupName===t.artGuide?q.tourController.start("artTool",i,{delay:300}):e.groupName===t.chatGuide?q.tourController.start("chat",i):e.groupName===t.pdfGuide&&q.tourController.start("chatpdf"),this.setTourShowed()}async reportEvent(e,t){await d.ll.getUiFlag("advertiserExpReported")||(R.W.createUserBehaviorEvent({eventName:"advertiser_experiment",extData:{groupId:e,version:t}}),d.ll.setUiFlag("advertiserExpReported",!0))}setTourShowed(){let e=()=>{d.ll.setUiFlag("onboardingTourShowed",!0),Y.u.sendMessage({name:"monciaConfigChange",data:{configs:{uiFlags:{onboardingTourShowed:!0}}}})};e(),setTimeout(()=>{e()},1500)}constructor(e){(0,o._)(this,"parent",void 0),(0,o._)(this,"views",void 0),this.parent=e,(0,c.rC)(this)}}(0,s.gn)([c.Fl],J.prototype,"isArtUser",null);class K{async shouldShow(){return!(!a.o.isExtension||"sidebar"!==O.L.mainWindowMode||!x.userController.isLogin||"safari"===a.o.browser||await d.ll.getUiFlag("pinHintIgnored")||await d.ll.getIsPinned())}open(){this.visible=!0}handleIgnored(){this.visible=!1,d.ll.setUiFlag("pinHintIgnored",!0),this.stopPinCheckInterval()}startPinCheckInterval(){this.stopPinCheckInterval(),this.timer=setInterval(()=>{d.ll.getIsPinned().then(e=>{this.visible=!e})},1e3)}stopPinCheckInterval(){this.timer&&(clearInterval(this.timer),this.timer=null)}constructor(){(0,o._)(this,"visible",!1),(0,o._)(this,"timer",null),(0,c.rC)(this)}}(0,s.gn)([r.SB],K.prototype,"visible",void 0);class X{async shouldShow(){return!!x.userController.shouldEnableR1Guide&&(await d.ll.waitServerConfigReady(),!await d.ll.getUiFlag("chatInputR1Guide"))}async open(){d.ll.setUiFlag("chatInputR1Guide",!0),this.visible=!0}close(){this.visible=!1}constructor(){(0,o._)(this,"visible",!1),(0,c.rC)(this)}}(0,s.gn)([r.SB],X.prototype,"visible",void 0);class Q{async shouldShow(){return!g.A.realtimeIntroduceShowed}open(){this.isOpen=!0,g.A.setRealtimeIntroduceShowed(!0)}constructor(){(0,o._)(this,"isOpen",!1),(0,o._)(this,"close",()=>{this.isOpen=!1}),(0,c.rC)(this)}}(0,s.gn)([r.SB],Q.prototype,"isOpen",void 0);class ${setViews(e){this.views=e}async shouldShow(){let e=await d.ll.get("rewardsExpireDialogShowedTime"),t=new Date().toLocaleDateString();if(e===t)return!1;let{records:i}=await D.M.extVipStatus();if(i.length>0){let e=i.at(-1),n=null==e?void 0:e.remainingDays;if(e&&(3===n||1===n))return d.ll.set("rewardsExpireDialogShowedTime",t),this.remainDays=n,!0}return!1}open(){this.views.openRewardExpireReminderDialog({insertTarget:"mainWindow",remainDays:this.remainDays})}constructor(){(0,o._)(this,"views",void 0),(0,o._)(this,"remainDays",0),(0,c.rC)(this)}}(0,s.gn)([r.SB],$.prototype,"remainDays",void 0);class ee{setViews(e){this.views=e}async shouldShow(){var e;let t=new Date((null===(e=x.userController.userInfo)||void 0===e?void 0:e.createdAt)||0).getTime(),i=Date.now()-t<=y.x4,n=await d.ll.get("invitedUserRegisterRewardsDialogShowedIds"),o=!n.includes(x.userController.userInfo.uid);if(!i||!o)return!1;let{isSevenDaysProEvent:s}=await D.M.is7daysProEvent();if(s&&o&&i)return d.ll.set("invitedUserRegisterRewardsDialogShowedIds",[...n,x.userController.userInfo.uid]),this.type="invite:7days_pro_event",this.invitedUserName="",!0;if((await d.ll.get("rewardsObtainedDialogShouldNotShowAgainIds")).includes(x.userController.userInfo.uid))return!1;let{itemList:r}=await D.M.userNotificationList({type:"invite_reward"});if(!r.length)return!1;let a=r.find(e=>"invite:first_payment"===e.data.rewardType);if(a)return this.type=a.data.rewardType,this.invitedUserName=null==a?void 0:a.data.beInvitedUserName,!0;let l=r.find(e=>"invite:7days_pro_event"===e.data.rewardType);return!!l&&(this.type=l.data.rewardType,this.invitedUserName=null==l?void 0:l.data.beInvitedUserName,!0)}async handleNotShowAgain(){let e=await d.ll.get("rewardsObtainedDialogShouldNotShowAgainIds");d.ll.set("rewardsObtainedDialogShouldNotShowAgainIds",[...e,x.userController.userInfo.uid])}open(){this.views.openRewardsObtainedDialog({insertTarget:"mainWindow",type:this.type,invitedUserName:this.invitedUserName})}constructor(){(0,o._)(this,"views",void 0),(0,o._)(this,"type",null),(0,o._)(this,"invitedUserName",""),(0,c.rC)(this)}}(0,s.gn)([r.SB],ee.prototype,"type",void 0),(0,s.gn)([r.SB],ee.prototype,"invitedUserName",void 0);class et{async shouldShow(){return!1}open(){var e;R.W.createUserBehaviorEvent({eventName:"v7_upgrade_dialog_show"}),P.J.onTabChange("chat"),h.Mp.openBot(v.Z9.monica),null===(e=h.Mp.getActiveChatBotController())||void 0===e||e.newConversation(),d.ll.setUiFlag("showedV7UpgradeDialog",!0),setTimeout(()=>{this.visible=!0},200)}close(e){this.visible=!1,R.W.createUserBehaviorEvent({eventName:"v7_upgrade_dialog_close",source:e})}constructor(){(0,o._)(this,"visible",!1),(0,c.rC)(this)}}(0,s.gn)([r.SB],et.prototype,"visible",void 0);var ei=i(44469),en=i(13942);class eo{get versionInfo(){return g.A.upgradeVersion}setViews(e){this.views=e}async shouldShow(){var e;return null!==(e=this.versionInfo)&&void 0!==e&&!!e.visible}async open(){d.ll.set("upgradeVersion",{...this.versionInfo,visible:!1}),ei.T3.setBadge({text:""}),this.views.openVersionUpgradeDialog({insertTarget:"mainWindow"})}async checkOpenInWeb(){if(await en.P.getIsExtInstalled()){let e=window.location.href,t=new URL(e);t.searchParams.get("upgradeEventId")&&en.P.sendMessageToExt({event:"getUpgradeVersion",payload:{}},e=>{console.log("getUpgradeVersion",e),(null==e?void 0:e.versionInfo)&&(g.A.upgradeVersion=e.versionInfo,this.views.openVersionUpgradeDialog({insertTarget:"dialogRoot"}),t.searchParams.delete("upgradeEventId"),window.history.replaceState({},"",t.toString()))})}}constructor(){(0,o._)(this,"views",void 0),(0,c.rC)(this)}}(0,s.gn)([c.Fl],eo.prototype,"versionInfo",null);class es{setViews(e){this.views=e}async shouldShow(){if("video"===P.J.activeTabKey)return!1;let e=await d.ll.getUiFlag("showedVideoFeatures")||[];if(g.A.noMoreShowedVideoDialog)return!1;let t=await M.Cc.onlyFetchStaticConfig([T.$.videoPopupList]),i=null==t?void 0:t.videoPopupList;return null!=i&&!!i.length&&(this.videoPopupConfig=i[i.length-1],!(void 0!==this.videoPopupConfig.id&&e.includes(this.videoPopupConfig.id)))}open(){this.hotDotVisible=!0,P.J.eventEmitter.listenBy(this,"tabChange",e=>{let{key:t}=e;"video"===t&&(this.hotDotVisible=!1,P.J.eventEmitter.stopListenBy(this),setTimeout(()=>{this.openDialog()},200))})}close(){this.visible=!1}openDialog(){this.visible=!0,this.views.openVideoDisplayDialog({insertTarget:a.o.isExtension?"mainWindow":"dialogRoot",config:this.videoPopupConfig,onClose:()=>{this.visible=!1}})}constructor(){(0,o._)(this,"views",void 0),(0,o._)(this,"hotDotVisible",!1),(0,o._)(this,"visible",!1),(0,o._)(this,"videoPopupConfig",null),(0,c.rC)(this)}}(0,s.gn)([r.SB],es.prototype,"hotDotVisible",void 0),(0,s.gn)([r.SB],es.prototype,"visible",void 0),(0,s.gn)([r.SB],es.prototype,"videoPopupConfig",void 0);class er{getPlanKey(e){if(!e)return null;let t=null;return"starter"===e.vipVersion&&(t="month"===e.interval?"starter_monthly":"starter_yearly"),"basic"===e.vipVersion&&(t="month"===e.interval?"basic_monthly":"basic_yearly"),"boost"===e.vipVersion&&(t="month"===e.interval?"boost_monthly":"boost_yearly"),"elite"===e.vipVersion&&(t="month"===e.interval?"elite_monthly":"elite_yearly"),t||null}async shouldShow(){if(x.userController.isVipUser){let e=this.getPlanKey(x.userController.userVipStatus);d.ll.set("vipPlanKey",e);let{currentPeriodStart:t}=x.userController.userVipStatus||{};if(t&&1>E.L.diff(new Date,new Date(1e3*t),"day")&&!await d.ll.get("showVipGuided"))return!0}else{let e=await d.ll.get("vipPlanKey");if(e)return this.planKey=e,!0}return!1}close(){this.visible=!1}async open(){this.visible=!0}constructor(){(0,o._)(this,"visible",!1),(0,o._)(this,"planKey",null),(0,c.rC)(this)}}(0,s.gn)([r.SB],er.prototype,"visible",void 0),(0,s.gn)([r.SB],er.prototype,"planKey",void 0);let ea=()=>{n.E.init({pinHint:new K,onboarding:new J(n.E),invite:new G,rewardExpireReminder:new $,rewardsObtained:new ee,monthlyVipResubscribe:new W,versionUpgrade:new eo,inviteBonus:new V,inviteNotice:new H,vipModelGuide:new er,globalSidebarGuide:new b,homeAdController:new L,globalScreenshotGuide:new w,realtimeIntroduceController:new Q,autoNewChatController:new k,autoCloseVipFeature:new f,imageDisplayDialogController:new F,newTeamController:new z,v7UpgradeDialog:new et,afterSetModelParam:new m,videoDisplayDialogController:new es,r1SaleController:new X})}},96414:function(e,t,i){i.d(t,{o:function(){return ek}});var n=i(71576),o=i(34491),s=i(4461),r={src:"https://assets.monica.im/home-web/_next/static/media/artifactAdvancedModelOutputExample.799d0d05.png",height:360,width:322,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAAHlBMVEUkHEozL4QvLXs4JnopJ2A+KIMsIlEvO4YfGlc2M2sYy0ggAAAACXBIWXMAAAsTAAALEwEAmpwYAAAALElEQVR4nCXFQRIAEBADwZGsLP//sEJfmvGhVbuWEQSMEt7qbhnVZUwSzPwOFM8AvC/D6ZUAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},a={src:"https://assets.monica.im/home-web/_next/static/media/artifactStandardModelOutputExample.3e0c7048.png",height:360,width:318,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAASFBMVEWDYO/f5vrFv/F5ePDC0PPN0fbu7O////tide5kd++Ece9neu9lbe5zaPDb1vnm4fxveu64vfn39PXZ2/PG2PW0suF7Yu7j7f3nIxs7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPElEQVR4nBXFRxLAIAwAsTVgjKnp+f9PM9FFlN7HeKDs4Q4BXCzbAj/N/puKvBNaSulScM35mFC2GGvlAzwNAcW7T2cqAAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8},l={src:"https://assets.monica.im/home-web/_next/static/media/startedArtifactsGuide.d9f44e75.png",height:486,width:864,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAFVBMVEXs6vr4+Pvu7fPx8PTl5Of+/v3q6e6p0fVfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJUlEQVR4nBXBhw0AMAzDMHnl/5OLkgC+O+P42hZNcgKStonPCjwJjwBdu9vprQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5},c=i(92235),d=i(21320),h=i(95782),p=i(56607),u=i(78716),m=i.n(u),v=i(62499),g=i(61658),x=i(63623),f=i(14537),y=i(27534),C=i(58812),k=i(66084);class w extends o.PN{constructor(...e){super(...e),(0,k._)(this,"props",void 0)}}var b=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M2.90907 8.42427C2.67476 8.18995 2.67476 7.81005 2.90907 7.57574L7.57574 2.90907C7.81005 2.67476 8.18995 2.67476 8.42427 2.90907C8.65858 3.14339 8.65858 3.52329 8.42427 3.7576L4.78187 7.4H12.6667C12.998 7.4 13.2667 7.66863 13.2667 8C13.2667 8.33138 12.998 8.6 12.6667 8.6H4.78187L8.42427 12.2424C8.65858 12.4767 8.65858 12.8566 8.42427 13.0909C8.18995 13.3252 7.81005 13.3252 7.57574 13.0909L2.90907 8.42427Z\\" fill=\\"#55555D\\"/>\\n\\n","viewBox":"0 0 16 16"}');let S=o._Y.createComponent("InsertLeftIcon",w,e=>(0,n.jsx)(C.s,{...e.props,name:"InsertLeftIcon",iconData:b}));var A=i(5857),B=i(75372),E=i(25032),I=i(46731),D=i(77397),j=i(53040),_=i(48023),N=i(20995),L=i(14084),M=i(1396),T=i(32930),P=i(90180),F=i(36976),V=i(89322),G=i(11502),R=i(92020),U=i(91433),O={ellipsisButton:"ellipsis-button--K_2i_"},H=i(8274),W=i(52921),z=i(88882),q=i(73047);class Y extends o.PN{get S(){return z.S.Global.modules.Artifact.ArtifactPublish}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,k._)(this,"props",void 0)}}(0,W.gn)([q.Fl],Y.prototype,"S",null);var Z=i(44714);let J=o._Y.createComponent("ArtifactPublish",Y,e=>{let{dataManager:t,disabled:i,className:o,onClick:s}=e.props,{artifactData:r}=t;if(!r)return null;let a=(null==r?void 0:r.isPublished)||!1;return(0,n.jsx)(A.z,{className:m()(O.artifactPublish,O.ellipsisButton,o),size:"small",type:"gray",disabled:i,onClick:()=>{a?(0,Z.s)({insertTarget:"dialogRoot",dataManager:t}):(0,H.z)({insertTarget:"dialogRoot",dataManager:e.props.dataManager}),null==s||s()},children:(0,n.jsx)("span",{children:e.S.publish})})});var K=i(22046),X=i(60445),Q=i(92660),$=i(33381),ee=i(15851),et=i(58351),ei=i(39936),en=i(20549),eo=i(44469);class es extends o.PN{get S(){return z.S.Global.modules.Artifact.ArtifactRemix}onViewCreate(){c.m.getIsMobile()&&M.Mp.getMonicaChatController().artifactManager.initServiceListeners()}onViewDestroy(){}async handleRemix(){if(c.m.getIsMobile()){if(!$.userController.isLogin){window.open(c.m.genUrl(X.Cl.login,{redirectTo:K.S.location.href}));return}try{var e;this.btnLoading=!0;let t=M.Mp.getMonicaChatController();await t.newConversation();let i=et.y.serverArtifactData2ChatArtifactData(this.props.artifactData),n=t.createReply(ei.C.transformArtifactContent(i),null===(e=t.lastRenderItem)||void 0===e?void 0:e.itemId,{artifacts:[{data:i,streaming:!1}]});t.chatTree.addItems([n]),await t.syncMessageToServer(),await t.artifactManager.createSyncArtifactTask([{artifactData:i,conversationId:n.conversationId,itemId:n.itemId,version:1}]),await t.artifactManager.waitSyncToServerReady({conversationId:n.conversationId,artifactId:i.id,itemId:n.itemId}),window.open(c.m.getMonicaAppRemixArtifactLink(t.conversationId))}catch(e){ee.M.error(c.m.formatErrorMsg(e))}finally{this.btnLoading=!1}return}this.artifactContinueChat(this.props.artifactData)}artifactContinueChat(e){let t=c.m.genShortId();if(p.o.isWeb){window.localStorage.setItem(Q.storageKeys.artifactContinueChatKey,JSON.stringify({[t]:e}));let i=c.m.genFullUrl(c.m.genUrl(X.Cl.monicaWeb,{shareArtifactId:t}));window.open($.userController.isLogin?i:c.m.genUrl(X.Cl.login,{redirectTo:i}),"_blank")}p.o.isExtension&&(en.D.setArtifactContinueInChat(t,e),eo.T3.openMonicaChatTabPageV2({tab:"chat",action:"artifactContinueChat",id:t,botUid:U.Z9.monica}))}constructor(...e){super(...e),(0,k._)(this,"props",void 0),(0,k._)(this,"btnLoading",!1)}}(0,W.gn)([o.SB],es.prototype,"btnLoading",void 0),(0,W.gn)([q.Fl],es.prototype,"S",null);let er=o._Y.createComponent("ArtifactRemix",es,e=>{let{scene:t,btnText:i,onClick:o}=e.props;return(0,n.jsx)(A.z,{className:m()("artifact-remix--as8E6",e.props.className),type:"share"===t?"primary":"gray",size:"share"===t?"default":"small",loading:e.btnLoading,onClick:()=>{e.handleRemix(),null==o||o()},children:i||e.S.artifactRemix})});var ea=i(47701),el=i(28901);class ec extends o.PN{handleCodeChange(){let e=this.textareaEl;if(e){let t=el.x.getScrollbarWidth(e);this.textareaHeight="".concat(e.scrollHeight+t,"px"),this.textareaWidth="".concat(e.scrollWidth+t,"px")}}onViewCreate(){if(!this.textareaEl)return;this.updateCurrentLine();let e=getComputedStyle(this.textareaEl),{lineHeight:t,fontSize:i,fontFamily:n}=e;["border","boxSizing","fontFamily","fontSize","fontWeight","letterSpacing","lineHeight","textDecoration","textIndent","textTransform","whiteSpace","wordSpacing","wordWrap","borderRadius"].forEach(t=>{let i=e[t];i&&(this.textareaStyle[t]=i)}),this.lineNumbersStyle={lineHeight:t,fontSize:i,fontFamily:n}}onViewDestroy(){}updateCurrentLine(){if(!this.textareaEl){this.currentLine=1;return}let e=this.textareaEl.selectionStart,t=this.textareaEl.value.substring(0,e).split("\n");this.currentLine=t.length}constructor(...e){super(...e),(0,k._)(this,"props",void 0),(0,k._)(this,"textareaEl",null),(0,k._)(this,"textareaHeight",""),(0,k._)(this,"textareaWidth",""),(0,k._)(this,"textareaStyle",{}),(0,k._)(this,"lineNumbersStyle",{}),(0,k._)(this,"currentLine",1)}}(0,W.gn)([o.SB],ec.prototype,"textareaHeight",void 0),(0,W.gn)([o.SB],ec.prototype,"textareaWidth",void 0),(0,W.gn)([o.SB],ec.prototype,"textareaStyle",void 0),(0,W.gn)([o.SB],ec.prototype,"lineNumbersStyle",void 0),(0,W.gn)([o.SB],ec.prototype,"currentLine",void 0),(0,W.gn)([(0,o.YP)(e=>[e.props.value])],ec.prototype,"handleCodeChange",null);let ed=o._Y.createComponent("ArtifactCodeEditor",ec,e=>{let{onChange:t,value:i}=e.props,o=i.split("\n");return(0,n.jsxs)("div",{className:"artifact-code-editor--z2vLy","data-draggable":"false",children:[(0,n.jsx)("div",{className:"line-numbers--XsA48",style:{...(0,q.ZN)(e.lineNumbersStyle),height:e.textareaHeight},children:o.map((e,t)=>(0,n.jsx)("div",{children:t+1},t))}),(0,n.jsxs)("div",{className:"textarea-wrap--EK7eS",children:[(0,n.jsx)("div",{className:"shadow-box--zywEV",style:{...(0,q.ZN)(e.textareaStyle),height:e.textareaHeight,width:e.textareaWidth},children:o.map((t,i)=>(0,n.jsx)("div",{className:m()("line--UuZrX",{"highlight--bkGFE":e.currentLine===i+1}),style:{height:e.lineNumbersStyle.lineHeight},children:t},t+i))}),(0,n.jsx)("textarea",{autoFocus:!0,autoComplete:"off",spellCheck:"false",value:i,style:{height:e.textareaHeight,width:e.textareaWidth},ref:t=>{e.textareaEl=t},onInput:()=>{e.updateCurrentLine()},onClick:()=>{e.updateCurrentLine()},onKeyUp:()=>{e.updateCurrentLine()},onMouseDown:()=>{e.updateCurrentLine()},onMouseUp:()=>{e.updateCurrentLine()},onChange:e=>{t(e.target.value)}})]})]})});var eh={artifactPreview:"artifact-preview--klvpE",header:"header--XxHBH",back:"back--bcs93",unsaved:"unsaved--whg4U",actions:"actions--kiEQP",refreshBox:"refresh-box--zvLQI",footer:"footer--udo3m",miniMode:"mini-mode--YrfpL",toolbar:"toolbar--ZlRxF",preview:"preview--BO5UV",pagination:"pagination--H_rTq",updatedAt:"updated-at--Z3JOc",paginationButton:"pagination-button--_ktbd",current:"current--Hlt8d",disabled:"disabled--E7C02",ellipsisButton:"ellipsis-button--RhPTG",editMode:"edit-mode--oXYF1",left:"left--_UtLs",right:"right--BUrNe",button:"button--uqLXZ",artifactCodeRenderPreview:"artifact-code-render-preview--e4kvy",layer:"layer--vOhYC",refreshingMask:"refreshing-mask--bkppY",codePreview:"code-preview--iK1QI",markdownRaw:"markdown-raw--FP364",upgrade:"upgrade--QoN1n",betterAnswerTips:"better-answer-tips--GFvmK",modelIcon:"model-icon--drtp6",buttonText:"button-text--jzEOM",triangle:"triangle--DQF6p",tipsHeader:"tips-header--EcfA3",compareBox:"compare-box--tB1Sy",vs:"vs--UF9te",compareItem:"compare-item--gIqix",standard:"standard--vLanQ",advanced:"advanced--KnxmJ",primaryButton:"primary-button--mlKbb",starRefreshBox:"star-refresh-box--ImGoA",favoritedTips:"favorited-tips--VSVsj",star:"star--z3e57",img:"img--zfha_",setting:"setting--i82XQ",settingTips:"setting-tips--cL3kd",tipsButtonBox:"tips-button-box--RQWMe",settingDropdownMenu:"setting-dropdown-menu--k4MGq",dropdownMenuItem:"dropdown-menu-item--ZvnB3",click:"click--YVsCL",privacyTips:"privacy-tips--wD1By",tips:"tips--DDeRY",privacyDialogWrapper:"privacy-dialog-wrapper--hcJ7S",privacyDialog:"privacy-dialog--Oj2Ou",privacyDialogTitle:"privacy-dialog-title--TvUsF",privacyDialogContent:"privacy-dialog-content--b70dq",privacyDialogFooter:"privacy-dialog-footer--cHnul",publishButton:"publish-button--skZ7E",versionPopover:"version-popover--XbAa_",date:"date--q2cbk"},ep=i(18245),eu=i(37067),em=i(78734),ev=i(34891),eg=i(90122),ex=i(67061),ef=i(61546);class ey extends o.PN{get dataManager(){return this.props.dataManager}get isShowPreview(){return this.allowPreview&&"preview"===this.tabsManager.activeTabKey}get S(){return z.S.Global.modules.Artifact.ArtifactPreview}get allowPreview(){let{artifactData:e,isSteaming:t}=this.dataManager,i=null==e?void 0:e.artifactType,n=!!i&&et.y.allowPreview(i);return!t&&n}get finalBetterAnswerTipsVisible(){return this.betterAnswerTipsVisible&&this.isShowPreview&&!this.autoOpenTipsVisible}get isFavorited(){let{artifactData:e}=this.dataManager;return(null==e?void 0:e.isFavorite)||!1}get isSteaming(){return this.dataManager.isSteaming}get isMiniMode(){return this.width<420}get showLayer(){return this.settingPopoverOpen}get fullscreenEnabled(){let e=this.dataManager.artifactData;return"sidebar"===ex.L.mainWindowMode&&!this.isSteaming&&(null==e?void 0:e.conversationId)&&(null==e?void 0:e.chatItemId)}get isUnsaved(){var e;return this.isEditMode&&this.editContent!==(null===(e=this.dataManager.artifactData)||void 0===e?void 0:e.content)}get editCodeVisible(){return!this.props.isPreviewMode&&!this.isSteaming&&!this.isEditMode&&"code"===this.tabsManager.activeTabKey}handleContentChange(){this.codeRenderRef&&(this.codeRenderRef.scrollTop=this.codeRenderRef.scrollHeight)}handleBetterAnswerTips(){this.betterAnswerTipsVisible&&this.isShowPreview&&!this.autoOpenTipsVisible&&!this.isRefreshing&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.betterAnswerTipsVisibleLocked=!1},1e3))}onBeforeMount(){if(this.props.chatBotController){this.chatBotController=this.props.chatBotController;return}this.chatBotController=M.Mp.getActiveChatBotController()}onViewCreate(){if(this.mediaQueryHelper.init(),this.codeRenderRef&&eu.I.getProxy(this,this.codeRenderRef).addEventListener("scroll",e=>{let t=e.target;t.scrollTop+t.clientHeight<t.scrollHeight?this.autoScrollLock=!0:this.autoScrollLock=!1}),this.initUiFlags(),this.initArtifactContent(),eu.I.getProxy(this,window).addEventListener("message",e=>{let{data:t}=e;console.log("[Artifact Preview Message]",t),t.type===ea.R.IframeMessage.SWITCH_TO_ADVANCED_MODEL&&(this.handleUseAdvancedModel(),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.ADVANCED_MODEL_CLICK,extData:{source:"iframe"}})),t.type===ea.R.IframeMessage.TRY_FIX_ERROR&&(this.fixError(t.data.error),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.TRY_FIX_ERROR}))}),this.rootEl){this.width=this.rootEl.clientWidth;let e=new ResizeObserver(()=>{var e;let t=null===(e=this.rootEl)||void 0===e?void 0:e.clientWidth;t&&(this.width=t)});e.observe(this.rootEl),this.resizeObserver=e}}async handleDownload(){let{content:e="",artifactName:t,artifactType:i,artifactId:n}=this.dataManager.artifactData;try{this.downloading=!0,await et.y.downloadArtifact({content:e,name:t,type:i,id:n},new ef.H)}catch(e){ee.M.error(c.m.formatErrorMsg(e))}finally{this.downloading=!1}}onViewDestroy(){var e;this.mediaQueryHelper.destroy(),eu.I.getProxy(this,window).removeAllListeners(),null===(e=this.resizeObserver)||void 0===e||e.disconnect()}async handleUseAdvancedModel(){let e=this.chatBotController;await this.switchToAdvancedModel()&&e.sendQuestionOrAction({actionOrQuestion:this.S.betterAnswer})}async handleToggleFavorite(){try{this.favoriteLoading=!0,this.favoriteClicked=!0,await this.dataManager.toggleFavorite(!this.isFavorited)}catch(e){ee.M.error(c.m.formatErrorMsg(e))}finally{this.favoriteLoading=!1}}openChatPage(){let{conversationId:e,chatItemId:t,artifactId:i,uid:n}=this.dataManager.artifactData;en.D.setOpenArtifactData({artifact:this.dataManager.artifactData,conversationId:e,itemId:t}),eo.T3.openMonicaChatTabPageV2({tab:"chat",convId:e,artifactId:i,itemId:t}),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.FULLSCREEN,extData:{id:n}})}toggleEditMode(){var e;this.tabsManager.setActiveTabKey("code"),this.isEditMode=!0,this.editContent=(null===(e=this.dataManager.artifactData)||void 0===e?void 0:e.content)||""}exitEditMode(){this.isEditMode=!1,this.editContent=""}async closeDialog(){var e,t;await this.trySaveEditedArtifact(),null===(e=(t=this.props).onClose)||void 0===e||e.call(t)}async saveEditContent(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{await this.chatBotController.artifactManager.sendEditArtifactMessage({...et.y.serverArtifactData2ChatArtifactData(this.dataManager.artifactData),content:this.editContent},e),this.tabsManager.setActiveTabKey("preview"),this.isEditMode=!1}catch(e){ee.M.error(c.m.formatErrorMsg(e))}}async trySaveEditedArtifact(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!this.isUnsaved||new Promise(t=>{(0,ev.B)({content:this.S.saveEditedArtifact,insertTarget:"dialogRoot",cancelText:this.S.doNotSave,okText:this.S.confirmSave,onCancel:()=>{t(null)},onOk:async()=>{try{return await this.saveEditContent(e),t(null),!0}catch(e){return!1}}})})}async switchToAdvancedModel(){let e=this.chatBotController;if($.userController.isVipUser){var t,i;return await e.modelAndSource.handleChangeBaseModelEnabled({key:U.qJ.claude37Sonnet,enabled:!0,source:"artifact_model_change"}),await c.m.asyncDelay(200),null===(t=(i=this.props).onUseAdvancedModel)||void 0===t||t.call(i),!0}return ep.K.handleCreditsNotEnough({module:"genius_bot",source:"artifact_model_change"}),!1}fixError(e){this.chatBotController.sendQuestionOrAction({actionOrQuestion:"".concat(this.S.promptFix,"\n\n").concat(e)})}initUiFlags(){R.ll.getUiFlag("artifactModelCompareShowed").then(e=>{this.betterAnswerTipsVisible=!e}),R.ll.getUiFlag("artifactAutoOpenTipsShowed").then(e=>{this.autoOpenTipsVisible=!e}),R.ll.getUiFlag("artifactStartTipsShowed").then(e=>{this.favoritedTipsVisible=!e})}async initArtifactContent(){let{objectUrl:e,content:t}=this.dataManager.artifactData;if(e&&!t)try{let t=await F.H.fetchContent(e);this.dataManager.setArtifactData({...this.dataManager.artifactData,content:t})}catch(e){ee.M.error(c.m.formatErrorMsg(e))}finally{this.fetchContentLoading=!1}else this.fetchContentLoading=!1}constructor(...e){super(...e),(0,k._)(this,"props",void 0),(0,k._)(this,"tabsManager",new eg.P({tabItems:[{key:"preview",name:()=>this.S.preview},{key:"code",name:()=>this.S.code}],defaultActiveTabKey:"preview",onTabChange:e=>{"code"===e&&(this.isRefreshing=!0),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.TAB_CHANGE,extData:{tab:e}})}})),(0,k._)(this,"mediaQueryHelper",new em.h("(max-width: 500px)")),(0,k._)(this,"artifactRendererRef",null),(0,k._)(this,"codeRenderRef",null),(0,k._)(this,"chatBotController",void 0),(0,k._)(this,"rootEl",null),(0,k._)(this,"isRefreshing",!0),(0,k._)(this,"betterAnswerTipsVisible",!1),(0,k._)(this,"betterAnswerTipsVisibleLocked",!0),(0,k._)(this,"autoOpenTipsVisible",!1),(0,k._)(this,"downloading",!1),(0,k._)(this,"favoriteLoading",!1),(0,k._)(this,"favoriteClicked",!1),(0,k._)(this,"favoritedTipsVisible",!1),(0,k._)(this,"fetchContentLoading",!0),(0,k._)(this,"width",0),(0,k._)(this,"settingPopoverOpen",!1),(0,k._)(this,"isEditMode",!1),(0,k._)(this,"editContent",""),(0,k._)(this,"autoScrollLock",!1),(0,k._)(this,"timer",null),(0,k._)(this,"resizeObserver",null)}}(0,W.gn)([o.SB],ey.prototype,"isRefreshing",void 0),(0,W.gn)([o.SB],ey.prototype,"betterAnswerTipsVisible",void 0),(0,W.gn)([o.SB],ey.prototype,"betterAnswerTipsVisibleLocked",void 0),(0,W.gn)([o.SB],ey.prototype,"autoOpenTipsVisible",void 0),(0,W.gn)([o.SB],ey.prototype,"downloading",void 0),(0,W.gn)([o.SB],ey.prototype,"favoriteLoading",void 0),(0,W.gn)([o.SB],ey.prototype,"favoriteClicked",void 0),(0,W.gn)([o.SB],ey.prototype,"favoritedTipsVisible",void 0),(0,W.gn)([o.SB],ey.prototype,"fetchContentLoading",void 0),(0,W.gn)([o.SB],ey.prototype,"width",void 0),(0,W.gn)([o.SB],ey.prototype,"settingPopoverOpen",void 0),(0,W.gn)([o.SB],ey.prototype,"isEditMode",void 0),(0,W.gn)([o.SB],ey.prototype,"editContent",void 0),(0,W.gn)([q.Fl],ey.prototype,"isShowPreview",null),(0,W.gn)([q.Fl],ey.prototype,"S",null),(0,W.gn)([q.Fl],ey.prototype,"allowPreview",null),(0,W.gn)([q.Fl],ey.prototype,"finalBetterAnswerTipsVisible",null),(0,W.gn)([q.Fl],ey.prototype,"isFavorited",null),(0,W.gn)([q.Fl],ey.prototype,"isSteaming",null),(0,W.gn)([q.Fl],ey.prototype,"isMiniMode",null),(0,W.gn)([q.Fl],ey.prototype,"showLayer",null),(0,W.gn)([q.Fl],ey.prototype,"fullscreenEnabled",null),(0,W.gn)([q.Fl],ey.prototype,"isUnsaved",null),(0,W.gn)([q.Fl],ey.prototype,"editCodeVisible",null),(0,W.gn)([(0,o.YP)(e=>{var t;return[(null===(t=e.dataManager.artifactData)||void 0===t?void 0:t.content)||""]})],ey.prototype,"handleContentChange",null),(0,W.gn)([(0,o.YP)(e=>[e.betterAnswerTipsVisible,e.isShowPreview,e.autoOpenTipsVisible,e.isRefreshing])],ey.prototype,"handleBetterAnswerTips",null);var eC=i(70140);let ek=o._Y.createComponent("ArtifactPreview",ey,e=>e.dataManager.artifactData?(0,n.jsxs)("div",{className:m()(eh.artifactPreview,e.props.className),ref:t=>{e.rootEl=t},children:[(0,n.jsx)(eb,{vm:e}),(0,n.jsx)(ew,{vm:e}),(0,n.jsx)(eS,{vm:e})]}):null),ew=(0,v.Pi)(function(e){let{vm:t}=e,i=t.dataManager.artifactData;if(t.fetchContentLoading)return(0,n.jsx)(g.g,{fullScreen:!0});if(t.isShowPreview)return(0,n.jsxs)("div",{className:eh.artifactCodeRenderPreview,"data-draggable":"false",children:[t.isRefreshing&&(0,n.jsxs)("div",{className:eh.refreshingMask,children:[(0,n.jsx)(g.g,{color:"var(--theme-icon-primary)",size:32}),(0,n.jsx)("p",{children:t.S.processing})]}),t.showLayer&&(0,n.jsx)("div",{className:eh.layer}),(0,n.jsx)(eC.M,{artifact:{...i,content:t.isEditMode?t.editContent:i.content},isPreviewMode:!t.props.enableQuickFix,chatBotController:t.chatBotController,onIframeLoaded:()=>{t.isRefreshing=!1},onIframeError:()=>{t.isRefreshing=!1},getRef:e=>{t.artifactRendererRef=e}}),(0,n.jsx)(eL,{vm:t})]});let{content:o="",artifactType:s}=i;if(t.isEditMode)return(0,n.jsx)(ed,{value:t.editContent,onChange:e=>{t.editContent=e}});let r=o,a=(e,t)=>"```".concat(t,"\n").concat(e,"\n```");if(("html"===s||(null==s?void 0:s.startsWith("code."))||"tsx"===s||"svg"===s)&&!(null==o?void 0:o.startsWith("```"))){var l;r=a(o,(null===(l=s.split("."))||void 0===l?void 0:l[1])||"")}return"tsx"===s?r=a(o,"typescript"):"json"===s?r=a(o,"json"):"svg"===s?r=a(o,"html"):(null==s?void 0:s.startsWith("code."))?r=a(o,s.split(".")[1]):"html"===s&&(r=a(o,"html")),(0,n.jsx)("div",{className:eh.codePreview,"data-draggable":"false",ref:e=>{t.codeRenderRef=e},children:"markdown"===s||"mermaid"===s||"plantuml"===s?(0,n.jsx)("div",{className:eh.markdownRaw,children:r}):(0,n.jsx)(x.U,{disableCodeEnhanceHeader:!0,disableCodeTools:!0,children:r})})}),eb=(0,v.Pi)(function(e){let{vm:t}=e,i=t.mediaQueryHelper.matches,{hideActions:o}=t.props,s=null==o?void 0:o.includes("setting"),r=null==o?void 0:o.includes("fullscreenPreview"),a=null==o?void 0:o.includes("close"),l={iconSize:16,padding:4};return i?(0,n.jsxs)("div",{className:eh.header,children:[t.allowPreview&&(0,n.jsx)(f.m,{size:"small",tabsManager:t.tabsManager}),(0,n.jsxs)("div",{className:eh.actions,children:[t.editCodeVisible&&(0,n.jsx)(y.h,{iconName:"editTab",title:t.S.editCode,...l,color:"var(--theme-icon-tertiary)",onClick:()=>{t.toggleEditMode()}}),!s&&(0,n.jsx)(ej,{vm:t}),t.fullscreenEnabled&&!r&&(0,n.jsx)(y.h,{iconName:"monicaFull",title:t.S.fullscreenChat,...l,color:"var(--theme-icon-tertiary)",onClick:()=>{t.openChatPage()}}),!a&&(0,n.jsx)(y.h,{iconName:"closeLine",title:"",...l,color:"var(--theme-icon-tertiary)",onClick:()=>{t.closeDialog(),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.CLOSE})}})]})]}):(0,n.jsxs)("div",{className:eh.header,children:[t.dataManager.fromChatResources&&(0,n.jsx)("div",{className:eh.back,"data-draggable":"false",children:(0,n.jsx)(S,{button:!0,size:16,onClick:()=>{t.closeDialog(),V.p.openWindow("file")}})}),(0,n.jsx)("h3",{className:m()({[eh.unsaved]:t.isUnsaved}),children:(0,n.jsx)("span",{children:t.dataManager.artifactData.artifactName})}),(0,n.jsxs)("div",{className:eh.actions,"data-draggable":"false",children:[t.isShowPreview&&(t.isRefreshing?(0,n.jsx)("div",{className:eh.refreshBox,children:(0,n.jsx)(g.g,{color:"var(--theme-icon-tertiary)",size:16})}):(0,n.jsx)(y.h,{iconName:"monicaRefresh",title:t.S.refresh,...l,color:"var(--theme-icon-tertiary)",onClick:()=>{t.isRefreshing=!0;try{var e;null===(e=t.artifactRendererRef)||void 0===e||e.refresh(),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.REFRESH})}catch(e){throw t.isRefreshing=!1,e}}})),t.editCodeVisible&&(0,n.jsx)(y.h,{iconName:"editTab",title:t.S.editCode,...l,color:"var(--theme-icon-tertiary)",onClick:()=>{t.toggleEditMode()}}),t.allowPreview&&(0,n.jsx)(f.m,{size:"small",tabsManager:t.tabsManager}),t.fullscreenEnabled&&!r&&(0,n.jsx)(y.h,{iconName:"monicaFull",title:t.S.fullscreenChat,...l,color:"var(--theme-icon-tertiary)",onClick:()=>{t.openChatPage()}}),!s&&(0,n.jsx)(ej,{vm:t}),!a&&(0,n.jsx)(y.h,{iconName:"closeLine",title:"",...l,color:"var(--theme-icon-tertiary)",onClick:()=>{t.closeDialog(),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.CLOSE})}})]})]})}),eS=(0,v.Pi)(function(e){let{vm:t}=e,i=c.m.getIsMobile(),o=t.isEditMode;return(0,n.jsx)("div",{className:m()(eh.footer,{[eh.miniMode]:t.isMiniMode,[eh.preview]:t.props.isPreviewMode}),children:o?(0,n.jsxs)("div",{className:eh.editMode,children:[(0,n.jsx)("div",{className:eh.left,"data-draggable":"false",children:(0,n.jsx)("span",{children:t.S.editingArtifact})}),(0,n.jsx)("div",{style:{flex:1,minWidth:0}}),(0,n.jsxs)("div",{className:eh.right,"data-draggable":"false",children:[(0,n.jsx)(A.z,{type:"gray",className:eh.button,onClick:()=>{t.exitEditMode()},children:t.S.cancel}),(0,n.jsx)(A.z,{type:"primary",className:eh.button,disabled:!t.editContent.trim(),onClick:()=>{t.saveEditContent()},children:t.S.save})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eA,{vm:t}),(0,n.jsx)("div",{style:{flex:1,minWidth:0}}),!i&&(0,n.jsx)(eE,{vm:t})]})})}),eA=(0,v.Pi)(function(e){let{vm:t}=e;return(0,n.jsxs)("div",{className:eh.pagination,"data-draggable":"false",children:[(0,n.jsx)(eB,{vm:t}),(0,n.jsx)(eN,{vm:t})]})}),eB=(0,v.Pi)(function(e){let{vm:t}=e,{dataManager:i}=t.props,{versionList:o,version:s,artifactData:r}=i;if(!r)return null;if(o.length<2)return r.updatedAt?(0,n.jsx)("span",{className:eh.updatedAt,children:d.L.fromNow(r.updatedAt)}):null;let a=(0,n.jsx)("ul",{className:eh.versionPopover,children:o.map((e,o)=>(0,n.jsxs)("li",{onClick:()=>{var e;i.changeVersion(o),null===(e=t.artifactRendererRef)||void 0===e||e.refresh()},children:[(0,n.jsxs)("strong",{children:[t.S.version,o+1]}),r.updatedAt&&(0,n.jsx)("span",{className:eh.date,children:d.L.fromNow(r.updatedAt)})]},e.chatItemId+e.artifactId))}),l=s===o.length-1,c=0===s||t.isSteaming,h=l||t.isSteaming;return(0,n.jsxs)("div",{className:eh.paginationButton,children:[(0,n.jsx)(y.h,{iconName:"homeLeftArrow",title:"",color:c?"var(--theme-icon-quaternary)":"var(--theme-icon-tertiary)",disabled:c,iconSize:14,onClick:()=>{var e;i.changeVersion("prev"),null===(e=t.artifactRendererRef)||void 0===e||e.refresh()}}),(0,n.jsx)(B.x,{content:a,open:!t.isSteaming&&void 0,closeAfterContentClick:!0,children:(0,n.jsxs)("span",{className:m()(eh.current,{[eh.disabled]:t.isSteaming}),children:[!t.isMiniMode&&(0,n.jsxs)(n.Fragment,{children:[t.S.version,"\xa0"]}),s+1,"/",o.length]})}),(0,n.jsx)(y.h,{iconName:"homeRightArrow",title:"",color:h?"var(--theme-icon-quaternary)":"var(--theme-icon-tertiary)",disabled:h,iconSize:14,onClick:()=>{var e;i.changeVersion("next"),null===(e=t.artifactRendererRef)||void 0===e||e.refresh()}})]})}),eE=(0,v.Pi)(function(e){let{vm:t}=e,{hideActions:i}=t.props,{content:o="",uid:s}=t.dataManager.artifactData,r=null==i?void 0:i.includes("release"),a=null==i?void 0:i.includes("download"),l=null==i?void 0:i.includes("copy"),d=null==i?void 0:i.includes("fullscreenPreview"),h=null==i?void 0:i.includes("upgrade");return(0,n.jsxs)("div",{className:eh.toolbar,"data-draggable":"false",children:[!h&&(0,n.jsx)(eD,{vm:t}),(0,n.jsx)(eI,{vm:t}),!l&&(0,n.jsx)(E.X,{text:o,render:(e,i)=>e?(0,n.jsx)(I.J,{name:"monicaSuccess"}):(0,n.jsx)(y.h,{title:"",iconName:"seCopy",color:"var(--theme-icon-tertiary)",disabled:t.isSteaming,onClick:()=>{i(),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.COPY})}})}),t.downloading?(0,n.jsx)(g.g,{color:"var(--theme-icon-tertiary)",size:16}):!a&&(0,n.jsx)(y.h,{title:t.S.download,disabled:t.isSteaming,iconName:"downloadMonica",color:"var(--theme-icon-tertiary)",onClick:()=>{t.handleDownload()}}),t.props.isPreviewMode?(0,n.jsx)(er,{artifactData:t.dataManager.artifactData,scene:"dialog"}):(0,n.jsxs)(n.Fragment,{children:[!d&&(0,n.jsx)(A.z,{size:"small",type:"gray",disabled:!s,className:eh.ellipsisButton,onClick:()=>{G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.FULLSCREEN_PREVIEW}),window.open(c.m.getArtifactFullscreenPreviewUrl(s))},children:(0,n.jsx)("span",{children:t.S.fullscreenPreview})}),!r&&(0,n.jsx)(eM,{vm:t}),t.props.toolExtra]})]})}),eI=(0,v.Pi)(function(e){let{vm:t}=e;return t.props.isPreviewMode?null:t.favoriteLoading?(0,n.jsx)("div",{className:eh.starRefreshBox,children:(0,n.jsx)(g.g,{color:"var(--theme-icon-tertiary)",size:16})}):(0,n.jsx)("div",{className:eh.star,children:(0,n.jsx)(B.x,{open:t.favoritedTipsVisible&&t.isFavorited&&t.favoriteClicked,showArrow:!0,placement:"top",align:{offset:[0,-12]},autoAdjustOverflow:!1,content:(0,n.jsx)(D.j,{onViewCreate:()=>{R.ll.setUiFlag("artifactStartTipsShowed",!0)},children:(0,n.jsxs)("div",{className:eh.favoritedTips,children:[(0,n.jsxs)("div",{className:eh.tipsHeader,children:[(0,n.jsx)("h3",{children:t.S.successfullyStarred}),(0,n.jsx)(y.h,{title:"",iconName:"close",onClick:()=>{t.favoritedTipsVisible=!1}})]}),(0,n.jsx)("p",{children:t.S.starredTipsContent}),(0,n.jsx)(j.E,{className:eh.img,skeleton:!0,src:(0,s.Q)(l),style:{width:"100%"}})]})}),children:(0,n.jsx)(y.h,{iconName:t.isFavorited?"monicaFavorited":"monicaFavorite",title:t.isFavorited?t.S.unstar:t.S.star,color:t.isFavorited?"var(--theme-function-warning)":"var(--theme-icon-tertiary)",disabled:t.isSteaming,onMousedown:()=>{t.handleToggleFavorite(),t.favoriteClicked=!0}})})})}),eD=(0,v.Pi)(function(e){let{vm:t}=e,i=M.Mp.getActiveChatBotController(),o=null==i?void 0:i.modelAndSource.baseModelKey,l=o&&T.S.checkIsAdvancedModel(o);if(t.props.isPreviewMode||!t.props.enableQuickFix||!i||l||t.isSteaming)return null;let c=[M.Mp.getBotItemById(U.qJ.gemini15Pro),M.Mp.getBotItemById(U.qJ.claude37Sonnet),M.Mp.getBotItemById(U.qJ.gpt4o)].flatMap(e=>(null==e?void 0:e.logoUrl)?[e]:[]);return(0,n.jsxs)("div",{className:eh.upgrade,children:[(0,n.jsx)(_.u,{title:t.S.askAdvancedModelsForBetterAnswer,mouseLeaveDelay:0,children:(0,n.jsx)("div",{className:m()(eh.button,eh.ellipsisButton),onClick:()=>{t.handleUseAdvancedModel(),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.ADVANCED_MODEL_CLICK,extData:{source:"get_better_result"}})},children:t.isMiniMode?(0,n.jsx)("span",{style:{color:"var(--theme-text-brand)"},children:t.S.optimize}):(0,n.jsxs)(n.Fragment,{children:[c.map(e=>{let{logoUrl:t,uid:i}=e;return(0,n.jsx)("img",{src:t,className:eh.modelIcon},i)}),(0,n.jsx)("span",{className:eh.buttonText,children:t.S.getBetterResult})]})})}),t.finalBetterAnswerTipsVisible&&!t.betterAnswerTipsVisibleLocked&&(0,n.jsx)(D.j,{onViewCreate:()=>{R.ll.setUiFlag("artifactModelCompareShowed",!0)},children:(0,n.jsxs)("div",{className:eh.betterAnswerTips,children:[(0,n.jsx)("span",{className:eh.triangle}),(0,n.jsxs)("div",{className:eh.tipsHeader,children:[(0,n.jsx)("h3",{children:t.S.tipsTitle}),(0,n.jsx)(y.h,{title:"",iconName:"close",onClick:()=>{t.betterAnswerTipsVisible=!1}})]}),(0,n.jsx)("p",{children:(0,n.jsx)(h.Z,{S:t.S.tipsContent,components:{mark:e=>(0,n.jsx)("mark",{children:e}),br:()=>(0,n.jsx)("br",{})}})}),(0,n.jsxs)("div",{className:eh.compareBox,children:[(0,n.jsx)("div",{className:eh.vs,children:"VS"}),(0,n.jsxs)("div",{className:eh.compareItem,children:[(0,n.jsx)(j.E,{skeleton:!0,src:(0,s.Q)(a)}),(0,n.jsx)("div",{className:eh.standard,children:t.S.standardModel})]}),(0,n.jsxs)("div",{className:eh.compareItem,children:[(0,n.jsx)(j.E,{skeleton:!0,src:(0,s.Q)(r)}),(0,n.jsx)("div",{className:eh.advanced,children:t.S.advancedModel})]})]}),(0,n.jsx)(A.z,{type:"primary",size:"medium",className:eh.primaryButton,onClick:()=>{t.handleUseAdvancedModel(),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.ADVANCED_MODEL_CLICK,extData:{source:"switch_now"}})},children:t.S.switchNow})]})})]})}),ej=(0,v.Pi)(function(e){let{vm:t}=e;return t.props.isPreviewMode?null:(0,n.jsxs)("div",{className:eh.setting,children:[(0,n.jsx)(B.x,{content:(0,n.jsx)(e_,{vm:t}),trigger:"click",placement:"bottom",closeAfterContentClick:!0,open:t.settingPopoverOpen,onOpenChange:e=>{t.settingPopoverOpen=e},children:(0,n.jsx)("span",{children:(0,n.jsx)(y.h,{iconName:"chatInputSetting",title:t.S.settings,iconSize:16,isActive:t.autoOpenTipsVisible,color:"var(--theme-icon-tertiary)",onClick:()=>{t.autoOpenTipsVisible=!1}})})}),t.autoOpenTipsVisible&&(0,n.jsxs)("div",{className:eh.settingTips,children:[(0,n.jsx)("p",{children:t.S.autoOpenSwitchDesc}),(0,n.jsx)("div",{className:eh.tipsButtonBox,children:(0,n.jsx)(A.z,{onClick:()=>{R.ll.setUiFlag("artifactAutoOpenTipsShowed",!0),t.autoOpenTipsVisible=!1},size:"medium",type:"primary",children:t.S.gotIt})})]})]})}),e_=(0,v.Pi)(function(e){let{vm:t}=e;return(0,n.jsxs)(N.h,{className:eh.settingDropdownMenu,children:[!t.isSteaming&&t.dataManager.artifactData&&(0,n.jsx)("div",{className:m()(eh.dropdownMenuItem,eh.click),onClick:async e=>{var i,n,o,s;await t.trySaveEditedArtifact(!0),F.H.show({artifactData:t.dataManager.artifactData,defaultPosition:"ext-sidebar"===p.o.entryType?{translateX:e.clientX-F.H.widgetMinSize.width,translateY:e.clientY}:void 0}),null===(i=(n=t.props).onClose)||void 0===i||i.call(n),(null===(o=t.dataManager.artifactData)||void 0===o?void 0:o.isPublished)||t.props.dataManager.toggleFavorite(!0),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.CONVERT_TO_WIDGET,extData:{id:null===(s=t.dataManager.artifactData)||void 0===s?void 0:s.uid}})},children:(0,n.jsx)("span",{children:t.S.convertToWidget})}),(0,n.jsxs)("div",{className:eh.dropdownMenuItem,children:[(0,n.jsx)("span",{children:t.S.autoOpenSwitchLabel}),(0,n.jsx)(L.r,{enabled:P.A.artifactAutoOpenDialog,size:"small",onChange:e=>{R.ll.set("artifactAutoOpenDialog",e),G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.PREVIEW_DIALOG_AUTO_OPEN_SWITCH,extData:{enabled:e}})}})]})]})}),eN=(0,v.Pi)(function(e){let{vm:t}=e;return t.props.isPreviewMode?(0,n.jsx)(_.u,{title:t.S.privacyTipsTooltipForShare,placement:"topRight",width:240,children:(0,n.jsxs)("div",{className:eh.privacyTips,children:[(0,n.jsx)(I.J,{name:"warning",size:16,color:"currentColor",style:{marginRight:8}}),(0,n.jsx)("span",{className:eh.tips,children:t.S.privacyTipsForShare})]})}):null}),eL=(0,v.Pi)(function(e){let{vm:t}=e,{onClose:i,visible:o}=t.props.privacyDialogProps||{};return o?(0,n.jsxs)("div",{className:eh.privacyDialogWrapper,children:[(0,n.jsx)("div",{className:eh.privacyDialogMask}),(0,n.jsxs)("div",{className:eh.privacyDialog,children:[(0,n.jsx)("div",{className:eh.privacyDialogTitle,children:t.S.privacyDialogTitle}),(0,n.jsxs)("ul",{className:eh.privacyDialogContent,children:[(0,n.jsx)("li",{children:t.S.privacyDialogContent1}),(0,n.jsx)("li",{children:t.S.privacyDialogContent2}),(0,n.jsx)("li",{children:t.S.privacyDialogContent3})]}),(0,n.jsx)("div",{className:eh.privacyDialogFooter,children:(0,n.jsx)(A.z,{onClick:i,type:"primary",size:"medium",children:t.S.gotIt})})]})]}):null}),eM=(0,v.Pi)(function(e){let{vm:t}=e;return(0,n.jsx)("div",{className:eh.publishButton,children:(0,n.jsx)(J,{disabled:t.isSteaming,dataManager:t.dataManager,className:eh.ellipsisButton,onClick:()=>{var e;G.M.createUserBehaviorEvent({eventName:ea.R.UserEvent.PUBLISH,extData:{source:"preview",id:null===(e=t.dataManager.artifactData)||void 0===e?void 0:e.uid}})}})})})},80315:function(e,t,i){i.d(t,{M:function(){return w}});var n=i(71576),o=i(34491),s=i(78716),r=i.n(s),a=i(82005),l=i(96414),c={artifactPreviewDialog:"artifact-preview-dialog--LZcof",modal:"modal--evnsn",sidePanel:"side-panel--mZnOv",previewBox:"preview-box--FanPL",side:"side--YFHK2",sideLeft:"side-left--ZVB0L",sideRight:"side-right--n2ewK",draggingMask:"dragging-mask--chwEr"},d=i(66084),h=i(52921),p=i(56607),u=i(92235),m=i(37067),v=i(32004),g=i(12596),x=i(92498),f=i(73047),y=i(37949);class C extends o.PN{get isMobile(){return p.o.isWeb&&u.m.getIsMobile()}get isSidePanel(){return"ext-side-panel"===p.o.entryType}get isModalMode(){return this.isSidePanel||this.isMobile||p.o.isDesktop||this.props.isModalMode}get style(){if(this.isModalMode)return{};let e=this.resizableController.data||{translateX:0,translateY:0},t=this.draggableController.translate,i=Math.max(e.width||680,320),n=Math.max(e.height,350),o=e.translateY+t.y,s=e.translateX+t.x;return{width:i,height:isNaN(n)?window.innerHeight-32:n,cursor:this.resizableController.cursor||this.draggableController.cursor,top:o,left:s}}onViewCreate(){if(!this.isModalMode){if(this.rootEl){let e=document.documentElement.clientWidth,t=y.w.isSidebarRenderLeft?y.w.sidebarWidth+16:e-y.w.sidebarWidth-16-this.rootEl.clientWidth,i=16,n=window.innerHeight-32;this.isFeishu()&&(i+=64,n-=64),this.resizableController.init({defaultData:this.props.dataManager.defaultPosition||{translateX:t,translateY:i,width:this.rootEl.clientWidth,height:n},getMinSize:()=>({width:320,height:350}),getMaxSize:()=>({width:e-y.w.sidebarWidth,height:window.innerHeight}),getIsLock:()=>{if(!this.rootEl)return!0;if(y.w.isSidebarRenderLeft){let e=["left","topLeft","bottomLeft"].includes(this.resizableController.resizeDirection),{left:t}=this.rootEl.getBoundingClientRect();if(e&&t<y.w.sidebarWidth)return!0}else{let e=["right","topRight","bottomRight"].includes(this.resizableController.resizeDirection),{right:t}=this.rootEl.getBoundingClientRect();if(e&&t>window.innerWidth-y.w.sidebarWidth)return!0}return!1},getAllowedDirection:()=>["top","bottom","left","right","topLeft","topRight","bottomLeft","bottomRight"],onChange:e=>{this.props.dataManager.updateDefaultPosition(e)}}),this.draggableController.init(this.rootEl,{onUpdated:()=>{this.props.dataManager.updateDefaultPosition({width:this.style.width,height:this.style.height,translateX:this.style.left,translateY:this.style.top})}})}this.updateDragBoundary(),m.I.getProxy(this,window).addEventListener("resize",()=>{this.updateDragBoundary(),this.updateSize(),this.draggableController.reposition()}),y.w.eventEmitter.listenBy(this,"resize",()=>{this.updateDragBoundary(),this.updateSize(),this.draggableController.reposition()}),v.f.getProxy(this).add((0,f.U5)(()=>y.w.isSidebarRenderLeft,()=>{this.updateDragBoundary()}))}this.ready=!0}onViewDestroy(){m.I.getProxy(this,window).removeAllListeners(),y.w.eventEmitter.stopListenBy(this),v.f.getProxy(this).disposeAll(),this.draggableController.destroy()}updateDragBoundary(){let e=window.innerWidth,t=window.innerHeight;this.draggableController.setDragBoundary({top:0,left:y.w.isSidebarRenderLeft?y.w.sidebarWidth:0,bottom:Math.max(t,350),right:y.w.isSidebarRenderLeft?Math.max(e,320):e-y.w.sidebarWidth})}updateSize(){let e=Math.max(320,Math.min(window.innerWidth-y.w.sidebarWidth,this.resizableController.data.width)),t=Math.min(window.innerHeight,this.resizableController.data.height);this.resizableController.updateData({width:e,height:t})}isFeishu(){return window.location.host.endsWith("feishu.cn")}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"resizableController",new g.S),(0,d._)(this,"draggableController",new x.$),(0,d._)(this,"rootEl",null),(0,d._)(this,"ready",!1)}}(0,h.gn)([o.SB],C.prototype,"ready",void 0),(0,h.gn)([f.Fl],C.prototype,"style",null);let k=o._Y.createComponent("ArtifactPreviewDialog",C,e=>{let{onDisposed:t,getRef:i,...o}=e.props;return o.dataManager.artifactData?(null==i||i({dispose:t}),(0,n.jsxs)("div",{className:r()(c.artifactPreviewDialog,{[c.modal]:e.isModalMode,[c.sidePanel]:e.isSidePanel}),style:{...e.style,opacity:e.ready?1:0},ref:t=>{e.rootEl=t,e.resizableController.root=t},onMouseEnter:()=>{e.resizableController.handleRootMouseEnter()},onMouseLeave:()=>{e.resizableController.handleRootMouseLeave()},onMouseDown:t=>{e.resizableController.resizeDirection?(e.resizableController.handleRootMouseDown(t),t.preventDefault()):e.draggableController.handleMouseDown(t)},children:[(e.draggableController.dragging||e.resizableController.isResizing)&&(0,n.jsx)("div",{className:c.draggingMask}),(0,n.jsxs)("div",{className:c.previewBox,children:[(0,n.jsx)("div",{className:r()(c.side,c.sideLeft)}),(0,n.jsx)("div",{className:r()(c.side,c.sideRight)}),(0,n.jsx)(l.o,{...o,onUseAdvancedModel:()=>{if(e.isModalMode){var i;null===(i=o.onClose)||void 0===i||i.call(o),t()}},onClose:()=>{var e;null===(e=o.onClose)||void 0===e||e.call(o),t()}})]})]})):null}),w=a.t.createOpener(k)},70140:function(e,t,i){i.d(t,{M:function(){return v}});var n=i(71576),o=i(34491),s=i(92235),r=i(88882),a=i(87393),l=i(66084),c=i(52921),d=i(32004),h=i(73047),p=i(33381),u=i(47701);class m extends o.PN{get chatBotController(){return this.props.chatBotController}get S(){return r.S.Global.modules.Artifact.ArtifactPreview.ArtifactRenderer}dataChange(){this.iframeRef&&this.sendDataToIframe()}onViewCreate(){this.iframeRef&&this.sendThemeChangeToIframe(),d.f.getProxy(this).add((0,h.U5)(()=>a.C.isDark,()=>{this.sendThemeChangeToIframe()})),this.chatBotController&&d.f.getProxy(this).add((0,h.U5)(()=>({model:this.chatBotController.modelAndSource.baseModelKey,enable:this.chatBotController.modelAndSource.baseModelEnabled}),()=>{this.onModelChange()}))}onViewDestroy(){d.f.getProxy(this).disposeAll()}sendDataToIframe(){let{content:e="",artifactId:t,artifactName:i,artifactType:n}=this.props.artifact;this.sendMessage({type:u.R.IframeMessage.ARTIFACT,data:{content:e,type:n,id:t,name:i}}),this.sendMessage({type:u.R.IframeMessage.GET_USER_INFO,data:{isVip:p.userController.isVipUser}}),this.onModelChange(),this.sendThemeChangeToIframe(),this.sendMessage({type:u.R.IframeMessage.PREVIEW_MODE,data:{isPreviewMode:!!this.props.isPreviewMode}})}sendThemeChangeToIframe(){this.sendMessage({type:u.R.IframeMessage.THEME_CHANGE,data:{isDark:a.C.isDark}})}sendMessage(e){var t,i;null===(i=this.iframeRef)||void 0===i||null===(t=i.contentWindow)||void 0===t||t.postMessage(e,"*")}onModelChange(){let e=this.chatBotController;if(!e)return;let t=e.modelAndSource.baseModelEnabled?e.modelAndSource.baseModelKey:e.conversationOptions.useModel;e.baseModelKey&&(t=e.baseModelKey),this.sendMessage({type:u.R.IframeMessage.GET_MODEL,data:{model:t||"fast_model"}})}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"iframeRef",null),(0,l._)(this,"refreshFlag",1)}}(0,c.gn)([o.SB],m.prototype,"refreshFlag",void 0),(0,c.gn)([h.Fl],m.prototype,"S",null),(0,c.gn)([(0,o.YP)(e=>{let{content:t,artifactId:i,artifactType:n,artifactName:o}=e.props.artifact;return[o,i,t,n]})],m.prototype,"dataChange",null);let v=o._Y.createComponent("ArtifactRenderer",m,e=>{let{onIframeLoaded:t,onIframeError:i,getRef:o}=e.props,l=s.m.getArtifactPreviewUrl(),c=new URL(l);return c.searchParams.set("locale",r.a.locale),a.C.isDark&&c.searchParams.set("isDark","true"),null==o||o({refresh:()=>{e.refreshFlag+=1}}),(0,n.jsx)("iframe",{className:"artifact-renderer--FpMro",src:c.toString(),ref:t=>{e.iframeRef=t},onLoad:()=>{setTimeout(()=>{e.sendDataToIframe()},200),null==t||t()},onError:()=>{null==i||i()}},e.refreshFlag)})},8274:function(e,t,i){i.d(t,{z:function(){return k}});var n=i(71576),o=i(34491),s=i(95782),r=i(5091),a=i(46731),l=i(5857),c=i(82005),d=i(66084),h=i(52921),p=i(88882),u=i(92235),m=i(73047),v=i(15851),g=i(34889),x=i(24900),f=i(44714);class y extends o.PN{get S(){return p.S.Global.modules.Artifact.ArtifactPublish.ArtifactPublishDialog}onViewCreate(){}onViewDestroy(){this.cancelToken.cancel(),x.Tn.cancelRequest(this.taskId)}async handlePublish(){let{dataManager:e}=this.props;try{this.publishing=!0;let t=(await e.togglePublish(!0)).uid;if(!t)throw Error("Publish artifacts failed");this.props.onDisposed(),(0,f.s)({insertTarget:"dialogRoot",autoCopy:!0,dataManager:e}),u.m.copyToClipboard(u.m.getArtifactShareUrl(t))}catch(e){v.M.error(u.m.formatErrorMsg(e))}finally{this.publishing=!1}}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"publishing",!1),(0,d._)(this,"cancelToken",new g.jI),(0,d._)(this,"taskId","")}}(0,h.gn)([o.SB],y.prototype,"publishing",void 0),(0,h.gn)([m.Fl],y.prototype,"S",null);let C=o._Y.createComponent("ArtifactPublishDialog",y,e=>{let{onDisposed:t,insertTarget:i}=e.props;return(0,n.jsxs)(r.o,{noFooter:!0,className:"artifact-publish-dialog--YUh9I",width:400,fixed:"dialogRoot"===i,onDispose:t,header:e.S.dialogTitle,style:{maxWidth:"90%"},children:[(0,n.jsx)("p",{className:"tips--HkBOg",children:(0,n.jsx)(s.Z,{S:e.S.dialogContent,components:{br:()=>(0,n.jsx)("br",{})}})}),(0,n.jsxs)("div",{className:"file--gzcUF",children:[(0,n.jsx)("div",{className:"icon--sEtqi",children:(0,n.jsx)(a.J,{name:"fileLocked",size:21})}),(0,n.jsxs)("div",{className:"info--sgmcL",children:[(0,n.jsx)("div",{className:"status--uPpAR",children:e.S.unpublished}),(0,n.jsx)("span",{className:"privilege--JPVOX",children:e.S.accessibleOnlyToYou})]})]}),(0,n.jsx)(l.z,{type:"primary",size:"large",className:"primary-button--KKUID",loading:e.publishing,onClick:()=>{e.handlePublish()},children:e.S.publishAndCopy})]})}),k=c.t.createOpener(C)},44714:function(e,t,i){i.d(t,{s:function(){return I}});var n=i(71576),o=i(34491),s=i(92235),r=i(78716),a=i.n(r),l=i(5091),c=i(36401),d=i(46731),h=i(48023),p=i(61658),u=i(25032),m=i(5857),v=i(82005),g=i(11502),x=i(47701),f={artifactPublishedDialog:"artifact-published-dialog--Gpb3T",box:"box--M68X0",top:"top--ODBVq",status:"status--Lq_G8",text:"text--zk7rP",divider:"divider--siDZk",bottom:"bottom--AoT84",link:"link--XyYow",buttonGroup:"button-group--cP6EY",unpublished:"unpublished--VCkPP",loading:"loading--QQ5LG",button:"button--EFstd"},y=i(66084),C=i(52921),k=i(88882),w=i(73047),b=i(15851),S=i(24900),A=i(8274);class B extends o.PN{get S(){return k.S.Global.modules.Artifact.ArtifactPublish.ArtifactPublishedDialog}onViewCreate(){if(this.props.autoCopy){var e;null===(e=this.copy)||void 0===e||e.call(this)}}onViewDestroy(){S.Tn.cancelTask(this.taskId)}async unpublished(){if(!this.unpublishing){this.taskId=s.m.genId();try{this.unpublishing=!0;let{dataManager:e}=this.props;await e.togglePublish(!1),(0,A.z)({insertTarget:"dialogRoot",dataManager:e}),this.props.onDisposed()}catch(e){b.M.error(s.m.formatErrorMsg(e))}finally{this.unpublishing=!1}}}constructor(...e){super(...e),(0,y._)(this,"props",void 0),(0,y._)(this,"copy",void 0),(0,y._)(this,"unpublishing",!1),(0,y._)(this,"taskId","")}}(0,C.gn)([o.SB],B.prototype,"unpublishing",void 0),(0,C.gn)([w.Fl],B.prototype,"S",null);let E=o._Y.createComponent("ArtifactPublishedDialog",B,e=>{let{insertTarget:t,onDisposed:i,dataManager:o}=e.props,r=s.m.getArtifactShareUrl(o.artifactData.uid);return(0,n.jsxs)(l.o,{noFooter:!0,className:f.artifactPublishedDialog,width:400,style:{maxWidth:"90%"},onDispose:i,fixed:"dialogRoot"===t,header:e.S.dialogTitle,children:[(0,n.jsxs)("div",{className:f.box,children:[(0,n.jsxs)("div",{className:f.top,children:[(0,n.jsxs)("div",{className:f.status,children:[(0,n.jsx)(c.X,{size:20,rounded:!0,checked:!0}),e.S.published]}),(0,n.jsx)("div",{className:f.text,children:e.S.dialogContent})]}),(0,n.jsx)("div",{className:f.divider}),(0,n.jsxs)("div",{className:f.bottom,children:[(0,n.jsx)(d.J,{name:"memoLink",color:"var(--theme-icon-quaternary)"}),(0,n.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",className:f.link,onClick:()=>{var e;g.M.createUserBehaviorEvent({eventName:x.R.UserEvent.VIEW_NOW,extData:{source:"link",id:null===(e=o.artifactData)||void 0===e?void 0:e.uid}})},children:r})]})]}),(0,n.jsxs)("div",{className:f.buttonGroup,children:[(0,n.jsx)(h.u,{title:e.S.unpublishedTips,width:240,placement:"topLeft",children:(0,n.jsx)("span",{className:a()(f.unpublished,{[f.loading]:e.unpublishing}),onClick:()=>{e.unpublished()},children:e.unpublishing?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.g,{size:16}),e.S.processing]}):e.S.unpublished})}),(0,n.jsx)(u.X,{doubleClick:!0,text:r,showTooltip:!1,getRef:t=>{e.copy=t.copy},render:(t,i)=>(0,n.jsx)(m.z,{type:"outline",color:"primary",className:f.button,onClick:()=>{var e;i(),g.M.createUserBehaviorEvent({eventName:x.R.UserEvent.COPY_SHARE_LINK,extData:{id:null===(e=o.artifactData)||void 0===e?void 0:e.uid}})},children:t?e.S.linkCopied:e.S.copyLink})}),(0,n.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(m.z,{type:"primary",className:f.button,onClick:()=>{g.M.createUserBehaviorEvent({eventName:x.R.UserEvent.VIEW_NOW,extData:{source:"button"}})},children:e.S.viewNow})})]})]})}),I=v.t.createOpener(E)},42420:function(e,t,i){i.d(t,{r:function(){return M}});var n=i(71576),o=i(34491),s=i(4461),r=i(43939),a=i(37231),l=i(53040),c=i(48023),d=i(46731),h=i(82005),p=i(1396),u=i(91433),m=i(1400),v=i(95782),g=i(78716),x=i.n(g),f=i(62499),y=i(96567),C=i.n(y),k={artistBotsExploreDrawer:"artist-bots-explore-drawer--vDQWM",search:"search--Gy8UM",input:"input--hOGPm",empty:"empty--R_0VG",emptyImg:"empty-img--hXjHE",artistBots:"artist-bots--if3lS",artistBotsGroup:"artist-bots-group--fdrL0",artistBotItem:"artist-bot-item--lncpL",operations:"operations--YVmCT",pinned:"pinned--VUcFm",selected:"selected--z2ZVg",artistBg:"artist-bg--WCrnN",content:"content--olAQA",botNameWrapper:"bot-name-wrapper--y4o72",botName:"bot-name--_EdUm",operationItem:"operation-item--AeXLN",botDescription:"bot-description--SthKC",tags:"tags--y0bT5",tag:"tag--O0YD5",highlight:"highlight--OVaHF"},w=i(66084),b=i(52921),S=i(37949),A=i(11502),B=i(92020),E=i(88882),I=i(92235),D=i(39815),j=i(73047);class _ extends o.PN{get S(){return E.S.Global.modules.Bots.BotsExploreDrawer.ArtistBotsExploreDrawer}get bots(){return p.Mp.sortBots(p.Mp.botItems.filter(e=>!!(p.Mp.isArtistBot(e.type)&&(!this.keywords||I.m.isLike(e.name,this.keywords)||I.m.isLike(e.description||"",this.keywords)))))}get artistRenderGroup(){let e=[];for(let t=0;t<this.waterFallColumn;t++)e.push([]);return this.bots.forEach((t,i)=>{e[i%this.waterFallColumn].push(t)}),e}handleClick(e){A.M.createUserBehaviorEvent({eventName:"bots_explore_drawer_item_click",source:"artist",extData:{botId:e.uid,botName:e.name}}),p.Mp.openBot(e.uid),this.props.onDisposed()}afterListChange(){this.keyboardManager.reset({defaultActiveIndex:0,listLength:this.bots.length})}onViewCreate(){p.Mp.refreshBotItems("artist"),this.keyboardManager.init({defaultActiveIndex:-1,listScrollableContainer:this.listContainer,listLength:this.bots.length,keydownContainer:[this.inputEl],getListItem:e=>{var t;let i=this.getListItemId(e);return(null===(t=S.w.getShadowRoot())||void 0===t?void 0:t.getElementById(i))||null},onClose:()=>{this.props.onDisposed()},onEnter:(e,t)=>{t&&this.handleClick(this.bots[e])}}),this.calcWaterFallColumn()}onViewDestroy(){this.keyboardManager.destroy()}openFeedbackPage(){B.ll.openMonicaOptionsPage({menuKey:"contactUs",showBotRequest:!0})}getListItemId(e){let t="object"==typeof this.props.insertTarget&&"botContainer"===this.props.insertTarget.type?this.props.insertTarget.botId:"single";return"monica-artist-explore-".concat(t,"-").concat(this.bots[e].uid,"-").concat(e)}calcWaterFallColumn(){if(this.listContainer){let e=this.listContainer.getBoundingClientRect().width-40;this.waterFallColumn=I.m.waterfall({basicWidth:192,columnGap:20,containerWidth:e,threshold:.75})}}constructor(...e){super(...e),(0,w._)(this,"props",void 0),(0,w._)(this,"inputEl",null),(0,w._)(this,"keyboardManager",new D.J),(0,w._)(this,"listContainer",null),(0,w._)(this,"keywords",""),(0,w._)(this,"waterFallColumn",2)}}(0,b.gn)([o.SB],_.prototype,"keywords",void 0),(0,b.gn)([o.SB],_.prototype,"waterFallColumn",void 0),(0,b.gn)([j.Fl],_.prototype,"S",null),(0,b.gn)([j.Fl],_.prototype,"bots",null),(0,b.gn)([j.Fl],_.prototype,"artistRenderGroup",null);let N=o._Y.createComponent("ArtistBotsExploreDrawer",_,e=>(0,n.jsx)(r.d,{closeWhenEsc:!0,visible:!0,onDispose:()=>{e.props.onDisposed()},enableHorizontalStyle:!0,title:e.S.allBots,children:(0,n.jsxs)("div",{className:k.artistBotsExploreDrawer,children:[(0,n.jsx)("div",{className:k.search,children:(0,n.jsx)(a.I,{getInputRef:t=>{e.inputEl=t},value:e.keywords,className:k.input,placeholder:e.S.search,onChange:t=>{e.keywords=t,e.afterListChange()},autofocus:!0,type:"search"})}),(0,n.jsx)(L,{vm:e})]})})),L=(0,f.Pi)(e=>{let{vm:t}=e;return 0===t.bots.length?(0,n.jsxs)("div",{className:k.empty,children:[(0,n.jsx)(s.E,{className:k.emptyImg,src:m.Z,alt:""}),(0,n.jsx)(v.Z,{className:k.contactUs,S:t.S.noBotYouWant,components:{span:e=>(0,n.jsx)("a",{onClick:()=>t.openFeedbackPage(),children:e})}})]}):(0,n.jsx)("div",{className:k.artistBots,ref:e=>{t.listContainer=e},children:t.artistRenderGroup.map((e,i)=>(0,n.jsx)("div",{className:k.artistBotsGroup,children:e.map(e=>{var i,o,r;let a=t.bots.findIndex(t=>t.uid===e.uid),h=(null===(i=e.userAction)||void 0===i?void 0:i.actionPinned)||!1,m=t.keyboardManager.activeIndex===a,v=e.uid!==u.Z9.artist&&e.uid!==u.qJ.makeItMore;return(0,n.jsxs)("div",{id:t.getListItemId(a),className:x()(k.artistBotItem,{[k.selected]:m,[k.pinned]:h}),onClick:()=>{t.handleClick(e)},children:[(0,n.jsx)(l.E,{skeleton:!0,className:k.artistBg,src:(0,s.Q)(e.coverUrl||e.logoUrl||""),alt:"",style:{height:e.uid===u.Z9.artist||e.uid===u.qJ.makeItMore?200:280}}),(0,n.jsxs)("div",{className:k.content,children:[(0,n.jsxs)("div",{className:k.botNameWrapper,children:[(0,n.jsx)(C(),{className:k.botName,textToHighlight:e.name,highlightClassName:k.highlight,searchWords:[t.keywords]}),v&&(0,n.jsx)("div",{className:k.operations,children:(0,n.jsx)(c.u,{title:h?t.S.unpin:t.S.pin,children:(0,n.jsx)("span",{className:k.operationItem,onClick:t=>{t.stopPropagation(),p.Mp.toggleFavorite(e.uid,!h)},children:h?(0,n.jsx)(d.J,{name:"bot-pin",color:"var(--theme-icon-brand)",size:16}):(0,n.jsx)(d.J,{name:"bot-unpin",color:"currentColor",size:16})})},h?"unpin":"pin")})]}),(0,n.jsx)(C(),{className:k.botDescription,textToHighlight:e.description||"",highlightClassName:k.highlight,searchWords:[t.keywords]}),(0,n.jsx)("div",{className:k.tags,children:null===(r=e.properties)||void 0===r?void 0:null===(o=r.tags)||void 0===o?void 0:o.map(e=>(0,n.jsx)("span",{className:k.tag,style:{background:e.color},children:e.name},e.name))})]})]},e.uid)})},i))})}),M=h.t.createOpener(N,{singleton:!0,closeWhenNextTrigger:!0})},81137:function(e,t,i){i.d(t,{B:function(){return v}});var n=i(71576),o=i(34491),s=i(43939),r=i(82005),a=i(92412),l=i(66084),c=i(52921),d=i(88882),h=i(73047),p=i(1396);class u extends o.PN{get S(){return d.S.Global.modules.Bots.BotsExploreDrawer.ChatBotsExploreDrawer}onViewCreate(){}onViewDestroy(){var e;null===(e=p.Mp.getActiveChatBotController())||void 0===e||e.focusPrimaryInput()}constructor(...e){super(...e),(0,l._)(this,"props",void 0)}}(0,c.gn)([h.Fl],u.prototype,"S",null);let m=o._Y.createComponent("ChatBotsExploreDrawer",u,e=>(0,n.jsx)(s.d,{closeWhenEsc:!0,visible:!0,hiddenHeader:!0,onDispose:()=>{e.props.onDisposed()},enableHorizontalStyle:!0,children:(0,n.jsx)(a.E,{source:"chat",onClose:()=>{e.props.onDisposed()}})})),v=r.t.createOpener(m,{singleton:!0,closeWhenNextTrigger:!0})},53676:function(e,t,i){i.d(t,{c:function(){return x}});var n=i(71576),o=i(34491),s=i(5857),r=i(68104),a=i(54493),l=i(82005),c=i(66084),d=i(52921),h=i(15851),p=i(88882),u=i(92235),m=i(73047);class v extends o.PN{get S(){return p.S.Global.modules.Bots.ShareBotDialog}get shareContent(){return u.m.getBotSharePageUrl(this.props.botId)}handleCopy(){u.m.copyToClipboard(this.value),h.M.success(this.S.copied,this.props.insertTarget),this.props.onDisposed()}onViewCreate(){this.value=this.shareContent}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"value","")}}(0,d.gn)([o.SB],v.prototype,"value",void 0),(0,d.gn)([m.Fl],v.prototype,"S",null);let g=o._Y.createComponent("ShareBotDialog",v,e=>(0,n.jsxs)(r.u,{onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,className:"share-bot-dialog--Yvm19",width:360,children:[(0,n.jsx)("header",{className:"header--N2WXq",children:e.S.shareBot}),(0,n.jsx)("main",{className:"main--D7nw6",children:(0,n.jsx)(a.g,{className:"textarea--Wsewn",autoSize:{minRows:5},value:e.value,onChange:t=>{e.value=t.target.value}})}),(0,n.jsx)("footer",{className:"footer--CJON1",children:(0,n.jsx)(s.z,{type:"primary",onClick:()=>{e.handleCopy()},children:e.S.copy})})]})),x=l.t.createOpener(g)},82724:function(e,t,i){i.d(t,{c:function(){return u}});var n=i(71576),o=i(34491),s=i(63623),r=i(68104),a=i(82005),l=i(88882),c=i(66084),d=i(52921);class h extends o.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"someState",!0)}}(0,d.gn)([o.SB],h.prototype,"someState",void 0);let p=o._Y.createComponent("ReplySourceDialog",h,e=>(0,n.jsx)(r.u,{closeOnMaskClick:!0,maskType:"black",width:370,fixed:"dialogRoot"===e.props.insertTarget,onDispose:e.props.onDisposed,children:(0,n.jsxs)("div",{className:"reply-source-dialog--O6QuJ",children:[(0,n.jsx)("div",{className:"header--znARj",children:l.S.Global.modules.ChatBox.ReplySourceDialog.content}),(0,n.jsx)("div",{className:"content--wepEH",children:(0,n.jsx)(s.U,{children:e.props.content})})]})})),u=a.t.createOpener(p)},92412:function(e,t,i){i.d(t,{E:function(){return el}});var n=i(71576),o=i(34491),s=i(4461),r=i(5857),a=i(46731),l=i(37231),c=i(84853),d=i(3658),h=i(61658),p=i(75372),u=i(20995),m=i(69645),v=i(39052),g=i(49639),x=i(21747),f=i(58812),y=i(66084);class C extends o.PN{constructor(...e){super(...e),(0,y._)(this,"props",void 0)}}var k=JSON.parse('{"fill":"none","content":"\\n<g id=\\"unpin\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.22414 2.34862C3.7846 1.62895 4.30276 0.705733 5.14604 0.706055L10.6009 0.708136C11.5885 0.708512 12.1998 1.78437 11.6946 2.63303L11.5197 2.92679C11.5129 2.93817 11.5093 2.95118 11.5093 2.96444L11.5127 6.2743C11.5127 6.29036 11.518 6.30597 11.5277 6.31875L13.6025 9.03967C13.9811 9.53619 13.9212 10.1632 13.6039 10.5827C13.4039 10.8469 13.0276 10.8991 12.7634 10.6991C12.4991 10.4992 12.4469 10.1229 12.6469 9.85865C12.6584 9.84335 12.6641 9.82531 12.6645 9.81051C12.6647 9.80378 12.6638 9.79777 12.6619 9.79206C12.6602 9.78665 12.6567 9.77833 12.6482 9.76728L10.5735 7.04637C10.4046 6.82486 10.313 6.55408 10.3127 6.27553L10.3093 2.96566C10.3091 2.73589 10.371 2.51034 10.4886 2.3129L10.6635 2.01914C10.6732 2.00277 10.6749 1.99109 10.6748 1.98232C10.6748 1.97165 10.6717 1.95851 10.6642 1.94529C10.6567 1.93208 10.647 1.92275 10.6379 1.91722C10.6303 1.91267 10.6195 1.90814 10.6004 1.90814L5.32216 1.90612C5.37607 2.14951 5.27357 2.41073 5.04893 2.54793C4.76613 2.72065 4.39686 2.63142 4.22414 2.34862ZM2.24239 2.24229C2.4767 2.00798 2.8566 2.00798 3.09091 2.24229L13.5909 12.7423C13.8252 12.9766 13.8252 13.3565 13.5909 13.5908C13.3566 13.8251 12.9767 13.8251 12.7424 13.5908L10.2357 11.0842L8.62207 11.0836L8.62207 14.7726C8.62207 15.104 8.35344 15.3726 8.02207 15.3726C7.6907 15.3726 7.42207 15.104 7.42207 14.7726L7.42207 11.0832L3.44307 11.0817C2.38977 11.0813 1.79228 9.87521 2.4302 9.03705L4.57191 6.22305C4.58164 6.21026 4.5869 6.19464 4.5869 6.17857V5.43534L2.24239 3.09082C2.00807 2.8565 2.00807 2.4766 2.24239 2.24229ZM5.72435 6.57278C5.68041 6.70777 5.61391 6.83534 5.5268 6.9498L3.38509 9.76381C3.3721 9.78088 3.36964 9.79277 3.36902 9.801C3.36823 9.81169 3.37032 9.82593 3.37772 9.84088C3.38513 9.85583 3.39519 9.86612 3.40418 9.87197C3.4111 9.87646 3.42205 9.88171 3.4435 9.88172L9.03531 9.88374L5.72435 6.57278Z\\" fill=\\"#3D3D43\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let w=o._Y.createComponent("UnpinIcon",C,e=>(0,n.jsx)(f.s,{...e.props,name:"UnpinIcon",iconData:k}));var b=i(19393);class S extends o.PN{constructor(...e){super(...e),(0,y._)(this,"props",void 0)}}var A=JSON.parse('{"fill":"none","content":"\\n<g id=\\"start icon\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.99999 1.94999C5.00588 1.94999 4.19999 2.75588 4.19999 3.74999C4.19999 4.7441 5.00588 5.54999 5.99999 5.54999C6.9941 5.54999 7.79999 4.7441 7.79999 3.74999C7.79999 2.75588 6.9941 1.94999 5.99999 1.94999ZM3.29999 3.74999C3.29999 2.25882 4.50882 1.04999 5.99999 1.04999C7.49116 1.04999 8.69999 2.25882 8.69999 3.74999C8.69999 5.24116 7.49116 6.44999 5.99999 6.44999C4.50882 6.44999 3.29999 5.24116 3.29999 3.74999ZM5.99999 8.44999C4.3893 8.44999 2.91877 9.15115 1.82741 10.3087C1.65692 10.4895 1.37212 10.4979 1.19129 10.3274C1.01046 10.1569 1.00208 9.87212 1.17257 9.69129C2.41699 8.37141 4.11769 7.54999 5.99999 7.54999C7.88228 7.54999 9.58298 8.37141 10.8274 9.69129C10.9979 9.87212 10.9895 10.1569 10.8087 10.3274C10.6279 10.4979 10.3431 10.4895 10.1726 10.3087C9.0812 9.15115 7.61068 8.44999 5.99999 8.44999Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 12 12"}');let B=o._Y.createComponent("UserIcon",S,e=>(0,n.jsx)(f.s,{...e.props,name:"UserIcon",iconData:A}));var E=i(90180),I=i(1396),D=i(33381),j=i(67061),_=i(11502),N=i(91433),L=i(38172),M=i(3978),T={src:"https://assets.monica.im/home-web/_next/static/media/searchEmpty.fb0821cb.png",height:100,width:100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAALVBMVEXDy9LCzM1MaXH///+/xMzHzNG8wsfr7e7Hy9HKzdPEyM2+xMrT193JztXGytHRkWoxAAAADHRSTlMIGwABScE7/ZCEWarnlun8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOUlEQVR4nBXLyRHAMAwDsSUln5Hdf7me4A9MJraJ71STgzw1amGyRt0pQ6vbtoy15u4yYSR1cPjPPC/RAS1uoMtzAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},P=i(92235),F=i(60445),V=i(95782),G=i(88882),R=i(78716),U=i.n(R),O=i(62499),H=i(75087),W=i(96567),z=i.n(W),q=i(44042);i(16037);var Y=i(87520),Z=i(45063),J=i(46494),K={botsView:"bots-view--mvDoO",drawer:"drawer--NCS0Y",sticky:"sticky--LJrXl",drawerClose:"drawer-close--OtZXK",content:"content--GMEkr",botSearch:"bot-search--YKDf5",botNav:"bot-nav--I6_53",title:"title--yOtek",headerRight:"header-right--_kS8y",button:"button--iaHF4",buttonText:"button-text--mik35",empty:"empty--pLXGI",emptyImg:"empty-img--TCiwi",bots:"bots--VSv6O",botItem:"bot-item--lXUfg",botItemLeft:"bot-item-left--cHOsv",botLogo:"bot-logo--GInjx",botName:"bot-name--BHizQ",botsViewHeader:"bots-view-header--IJU4Q",headerLeft:"header-left--rO7jf",searchInput:"search-input--Une2h",defaultBots:"default-bots--RdXYW",botItemRight:"bot-item-right--ctY8v",pinAction:"pin-action--p11Hq",active:"active--khoCJ",chatBotItemLeft:"chat-bot-item-left--JP2yU",botNameWrapper:"bot-name-wrapper--erIku",botInfo:"bot-info--oRx7t",tag:"tag--eWvTc",chatCount:"chat-count--on9C_",privateInfo:"private-info--GFiTO",highlight:"highlight--HnArk",pinBot:"pin-bot--r4gZK",botItemAction:"bot-item-action--dJaj8",divider:"divider--Z0idm",dividerText:"divider-text--t8yWH",botsWrapper:"bots-wrapper--_Sglb"},X=i(52921),Q=i(37949),$=i(15851),ee=i(92020),et=i(21320),ei=i(32004),en=i(39815),eo=i(20978),es=i(73047),er=i(18312);class ea extends o.PN{get S(){return G.S.Global.modules.MainWindow.BotsView}get isEmpty(){return(!this.keywords||!this.exploreBotsSearching)&&0===this.pinBots.length&&0===this.recentBots.length&&0===this.exploreBots.length}get pinBots(){let e=I.Mp.pinBots;return this.keywords?e.filter(e=>P.m.isLike(e.name,this.keywords)):e}get recentBots(){let e=I.Mp.recentBots.filter(e=>!e.userAction.actionPinned).slice(0,3).filter(e=>{var t,i,n;let o=null!==(i=I.Mp.recentBotsDeleteTime[e.uid])&&void 0!==i?i:0,s=et.L.getTimestamp(null!==(n=null===(t=e.lastMessageInfo)||void 0===t?void 0:t.lastMessageTime)&&void 0!==n?n:0);return!o||s>o});return this.keywords?e.filter(e=>P.m.isLike(e.name,this.keywords)):e}get exploreBots(){return this.keywords?this.exploreBotSearchList:[]}get allShowBots(){return this.pinBots.concat(this.recentBots).concat(this.exploreBots)}get showBots(){return this.showAllBots?this.pinBots:this.pinBots.slice(0,this.defaultShowCount)}handleInputFocus(){this.focus=!0}getListItemId(e){return"monica-bots-views-item-".concat(e)}initKeyboardManager(){this.keyboardManager.init({defaultActiveIndex:-1,listScrollableContainer:this.searchBotsContainerEl,listLength:this.allShowBots.length,keydownContainer:[this.inputEl],getListItem:e=>{var t;let i=this.getListItemId(e);return(null===(t=Q.w.getShadowRoot())||void 0===t?void 0:t.getElementById(i))||null},onClose:()=>{var e;null===(e=this.inputEl)||void 0===e||e.blur()},onEnter:e=>{let t=this.allShowBots[e];this.handleBotItemClick(t)}})}openFeedbackPage(){ee.ll.openMonicaOptionsPage({menuKey:"contactUs",showBotRequest:!0})}onViewCreate(){ei.f.getProxy(this).add((0,es.U5)(()=>er.J.activeTabKey,()=>{this.showAllBots=!1})),"chat"===this.props.source&&this.initKeyboardManager()}onViewDestroy(){this.keyboardManager.destroy(),ei.f.getProxy(this).disposeAll()}handleInputChange(e){this.keywords=e,this.exploreBotSearchList=[],this.exploreBotsSearching=!!e.trim(),this.searchExploreDebounced()}async searchExploreBots(e){if(e){this.exploreBotsSearching=!0;try{let t=P.m.genId();this.searchKey=t;let i=await M.aS.searchExploreBots({keyword:e});if(this.exploreBotSearchList=i,I.Mp.updateChatBotItems(this.exploreBotSearchList),this.keyboardManager.reset({defaultActiveIndex:-1,listLength:this.allShowBots.length}),t!==this.searchKey)return}catch(e){$.M.error(P.m.formatErrorMsg(e))}finally{this.exploreBotsSearching=!1}}}constructor(...e){super(...e),(0,y._)(this,"props",void 0),(0,y._)(this,"searchExploreDebounced",(0,eo.Z)(()=>this.searchExploreBots(this.keywords),300)),(0,y._)(this,"defaultShowCount",8),(0,y._)(this,"searchBotsContainerEl",null),(0,y._)(this,"inputEl",null),(0,y._)(this,"keywords",""),(0,y._)(this,"showAllBots",!1),(0,y._)(this,"exploreBotsSearching",!1),(0,y._)(this,"exploreBotSearchList",[]),(0,y._)(this,"focus",!1),(0,y._)(this,"source",void 0),(0,y._)(this,"keyboardManager",new en.J),(0,y._)(this,"searchKey",""),(0,y._)(this,"handleBotItemClick",e=>{var t,i;_.M.createUserBehaviorEvent({eventName:"bots_item_click",source:this.props.source}),"agent_bot"===e.type&&e.uid===N.tW.searchAgent?er.J.onTabChange("search"):(er.J.onTabChange("chat"),I.Mp.openBot(e.uid)),null===(t=(i=this.props).onClose)||void 0===t||t.call(i)})}}(0,X.gn)([o.SB],ea.prototype,"keywords",void 0),(0,X.gn)([o.SB],ea.prototype,"showAllBots",void 0),(0,X.gn)([o.SB],ea.prototype,"exploreBotsSearching",void 0),(0,X.gn)([o.SB],ea.prototype,"exploreBotSearchList",void 0),(0,X.gn)([o.SB],ea.prototype,"focus",void 0),(0,X.gn)([(0,o.qZ)("source")],ea.prototype,"source",void 0),(0,X.gn)([es.Fl],ea.prototype,"S",null),(0,X.gn)([es.Fl],ea.prototype,"isEmpty",null),(0,X.gn)([es.Fl],ea.prototype,"pinBots",null),(0,X.gn)([es.Fl],ea.prototype,"recentBots",null),(0,X.gn)([es.Fl],ea.prototype,"exploreBots",null),(0,X.gn)([es.Fl],ea.prototype,"allShowBots",null),(0,X.gn)([es.Fl],ea.prototype,"showBots",null);let el=o._Y.createComponent("BotsView",ea,e=>{let{source:t,visible:i}=e.props;(0,H.useEffect)(()=>{i&&"bots"===t&&_.M.createUserBehaviorEvent({eventName:"bots_tab_show"})},[t,i]);let o=!1;return"bots"===t?"sidebar"===j.L.mainWindowMode&&(o=!0):"chat"===t&&(o=!0),(0,n.jsx)(q.Z,{autoHide:!0,ref:t=>{e.searchBotsContainerEl=null==t?void 0:t.getScrollElement()},className:U()(K.botsView,{[K.drawer]:"chat"===t,[K.botNav]:"nav"===t}),children:(0,n.jsxs)("div",{className:K.content,children:[(0,n.jsxs)("div",{className:K.sticky,children:[o&&(0,n.jsxs)("div",{className:K.botsViewHeader,children:[(0,n.jsx)("div",{className:K.headerLeft,children:(0,n.jsx)(J.Q,{className:K.title,tabKey:"bots",title:e.S.bots,hiddenBack:"chat"===e.props.source})}),(0,n.jsxs)("div",{className:K.headerRight,children:[(0,n.jsx)(r.z,{type:"grayOutline",onClick:()=>{_.M.createUserBehaviorEvent({eventName:"bots_explore_click",source:e.props.source}),window.open(P.m.genFullUrl(F.Cl.botExplore),"_blank")},className:K.button,size:"medium",icon:(0,n.jsx)(a.J,{name:"monicaTemplate",size:16,color:"currentColor"}),children:(0,n.jsx)("span",{className:K.buttonText,children:e.S.explore})}),(0,n.jsx)(r.z,{type:"grayOutline",size:"medium",className:K.button,icon:(0,n.jsx)(a.J,{name:"addMemo",size:16,color:"currentColor"}),onClick:()=>{_.M.createUserBehaviorEvent({eventName:"bots_create_click",source:e.props.source}),(0,Y.Q)({insertTarget:"mainWindow"})},children:(0,n.jsx)("span",{className:K.buttonText,children:e.S.create})}),"chat"===e.props.source&&(0,n.jsx)("span",{className:K.drawerClose,onClick:t=>{var i,n;null===(i=(n=e.props).onClose)||void 0===i||i.call(n,t)},children:(0,n.jsx)(a.J,{size:16,name:"monicaClose",color:"currentColor"})})]})]}),(0,n.jsxs)("div",{className:K.botSearch,children:[(0,n.jsx)(l.I,{className:K.searchInput,value:e.keywords,getInputRef:t=>e.inputEl=t,onChange:e.handleInputChange.bind(e),autofocus:"chat"===e.props.source,placeholder:e.S.search,size:"default",type:"search",originInputProps:{onFocus:e.handleInputFocus.bind(e),onBlur:()=>{e.focus=!1}}}),"nav"===t&&(0,n.jsx)(Z.b,{})]})]}),(0,n.jsx)(ec,{vm:e})]})})}),ec=(0,O.Pi)(function(e){let{vm:t}=e;return t.isEmpty?(0,n.jsx)(eu,{vm:t}):(0,n.jsx)("div",{className:K.botsWrapper,children:(0,n.jsxs)("div",{className:K.bots,children:[t.isEmpty&&(0,n.jsx)(eu,{vm:t}),t.pinBots.length>0&&(0,n.jsx)(eh,{title:t.S.favorites,bots:t.pinBots,vm:t,startIndex:0,type:"favorite"}),t.recentBots.length>0&&(0,n.jsx)(eh,{title:t.S.recent,bots:t.recentBots,vm:t,startIndex:t.pinBots.length,deletable:!0,type:"recent"}),(t.exploreBots.length>0||t.exploreBotsSearching)&&(0,n.jsx)(eh,{title:t.S.botExplore,bots:t.exploreBots,vm:t,loading:t.exploreBotsSearching,startIndex:t.pinBots.length+t.recentBots.length,type:"explore"})]})})}),ed=(0,O.Pi)(function(e){var t;let{vm:i,item:o,moreActions:s,index:r,type:a}=e,l=(null===(t=i.keyboardManager)||void 0===t?void 0:t.activeIndex)===r,h=E.A.pinBotIds.includes(o.uid),p=I.Mp.isMonica(o.uid);return(0,n.jsxs)("div",{id:i.getListItemId(r),className:U()(K.botItem,{[K.active]:l}),onClick:()=>{i.handleBotItemClick(o)},children:[(0,n.jsx)(em,{vm:i,item:o}),(0,n.jsxs)("div",{className:U()(K.botItemRight,{[K.pinBot]:h}),onClick:e=>{e.stopPropagation()},children:[!p&&"favorite"===a&&(0,n.jsx)("div",{className:U()(K.pinAction),onClick:e=>{e.stopPropagation(),I.Mp.togglePinBot(o.uid,"botsView")},children:h?(0,n.jsx)(c.h,{size:16,color:"var(--theme-icon-brand)",title:i.S.unpin}):(0,n.jsx)(d.F,{size:16,color:"var(--theme-icon-tertiary)",title:i.S.pin})}),s]})]})}),eh=(0,O.Pi)(function(e){let{bots:t,title:i,vm:o,loading:s,deletable:r,startIndex:a,type:l}=e;return(0,n.jsxs)("div",{className:U()(K.defaultBots,K.recentBots),children:[(0,n.jsx)("div",{className:K.divider,children:(0,n.jsx)("span",{className:K.dividerText,children:i})}),t.map((e,t)=>(0,n.jsx)(ed,{vm:o,index:a+t,item:e,moreActions:(0,n.jsx)(ep,{vm:o,bot:e,deletable:r,type:l}),type:l},e.uid)),s&&(0,n.jsx)(h.g,{})]})}),ep=(0,O.Pi)(function(e){let{vm:t,bot:i,deletable:o,type:s}=e;if(i.uid===N.Z9.monica)return null;let r=i.userAction.actionPinned,a=E.A.pinBotIds.includes(i.uid),l=D.userController.userInfo&&D.userController.userInfo.id===i.userId;return(0,n.jsx)(p.x,{trigger:"hover",useParentContainer:!0,closeAfterContentClick:!0,placement:"bottomRight",content:(0,n.jsxs)(u.h,{children:[l&&(0,n.jsx)(m.X,{content:t.S.edit,icon:(0,n.jsx)(v.a,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{L.W.createUserBehaviorEvent({eventName:"bots_edit_click",source:t.props.source}),window.open(P.m.getBotDetailPageUrl(i.uid),"_blank")}}),(0,n.jsx)(m.X,{content:r?t.S.unfavorite:t.S.addToFavorites,icon:r?(0,n.jsx)(g.p,{size:16,color:"var(--theme-icon-tertiary)"}):(0,n.jsx)(x.r,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{L.W.createUserBehaviorEvent({eventName:"bot_favorite_click",source:t.props.source,extData:{favorite:!r}}),I.Mp.toggleFavorite(i.uid,!r)}}),"favorite"===s&&(0,n.jsx)(m.X,{content:a?t.S.unpin:t.S.pin,icon:a?(0,n.jsx)(w,{size:16,color:"var(--theme-icon-tertiary)"}):(0,n.jsx)(d.F,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{L.W.createUserBehaviorEvent({eventName:"bot_pin_click",source:t.props.source,extData:{pin:!a}}),I.Mp.togglePinBot(i.uid,"botsView")}}),o&&(0,n.jsx)(m.X,{content:t.S.deleteRecent,icon:"a56",onClick:()=>{L.W.createUserBehaviorEvent({eventName:"bots_recent_delete_click",source:t.props.source}),M.aS.updateRecentBotDeletedTime(i.uid)}})]}),children:(0,n.jsx)("div",{className:K.botItemAction,children:(0,n.jsx)(b.X,{size:16,color:"var(--theme-icon-tertiary)"})})})}),eu=(0,O.Pi)(function(e){let{vm:t}=e;return(0,n.jsxs)("div",{className:K.empty,children:[(0,n.jsx)(s.E,{className:K.emptyImg,src:T,alt:""}),(0,n.jsx)("p",{children:(0,n.jsx)(V.Z,{className:K.contactUs,S:t.S.noBotYouWant,components:{botsLink:e=>(0,n.jsx)("a",{href:P.m.genFullUrl(F.Cl.botExplore),target:"_blank",rel:"noreferrer",children:e}),create:e=>(0,n.jsx)("a",{onClick:()=>{(0,Y.Q)({insertTarget:"mainWindow"})},children:e})}})})]})}),em=(0,O.Pi)(function(e){let{vm:t,item:i}=e;return"chat"===t.source||"bots"===t.source?(0,n.jsxs)("div",{className:U()(K.botItemLeft,K.chatBotItemLeft),children:[(0,n.jsx)("img",{className:K.botLogo,src:i.logoUrl,alt:""}),(0,n.jsxs)("div",{className:K.botNameWrapper,children:[(0,n.jsx)(z(),{searchWords:t.keywords.split(" "),textToHighlight:i.name,className:K.botName,highlightClassName:U()(K.highlight)}),(0,n.jsx)(ev,{item:i,vm:t})]})]}):(0,n.jsxs)("div",{className:K.botItemLeft,children:[(0,n.jsx)("img",{className:K.botLogo,src:i.logoUrl,alt:""}),(0,n.jsx)(z(),{searchWords:t.keywords.split(" "),textToHighlight:i.name,className:K.botName,highlightClassName:U()(K.highlight)})]})}),ev=(0,O.Pi)(function(e){var t,i;let{vm:o,item:s}=e,r=I.Mp.getBotTags(s);if(r.length)return(0,n.jsx)("div",{className:K.botInfo,children:r.map(e=>(0,n.jsx)("div",{className:K.tag,children:e},e))});if(!s.isPublic)return(0,n.jsxs)("div",{className:K.botInfo,children:[(0,n.jsx)("div",{className:K.tag,children:o.S.private}),s.userId===(null===(i=D.userController.userInfo)||void 0===i?void 0:i.id)&&(0,n.jsxs)("div",{className:K.privateInfo,children:[(0,n.jsx)(B,{size:12,color:"var(--theme-icon-tertiary)"}),(0,n.jsx)("span",{children:o.S.owner})]})]});{let e=(null===(t=s.statisticiansInfo)||void 0===t?void 0:t.chatCount)||0;if(e)return(0,n.jsx)("div",{className:K.botInfo,children:(0,n.jsx)("div",{className:K.chatCount,children:(0,G.x)(o.S.chatCount,{count:P.m.displayNumberWithSuffix(e)})})})}return null})},94808:function(e,t,i){i.d(t,{r:function(){return eD}});var n=i(71576),o=i(34491),s=i(4461),r=i(61658),a=i(53040),l=i(41672),c=i(43939),d=i(46731),h=i(36401),p=i(5857),u=i(48023),m=i(35673),v=i(60976),g=i(58812),x=i(66084);class f extends o.PN{constructor(...e){super(...e),(0,x._)(this,"props",void 0)}}var y=JSON.parse('{"fill":"none","content":"\\n<g id=\\"jump to\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.17486 1.40002L6.66666 1.40002C6.99803 1.40002 7.26666 1.66865 7.26666 2.00002C7.26666 2.3314 6.99803 2.60002 6.66666 2.60002H5.19999C4.63004 2.60002 4.23866 2.60049 3.93526 2.62528C3.63886 2.6495 3.47964 2.6939 3.36441 2.75262C3.10098 2.88684 2.88681 3.10101 2.75259 3.36444C2.69387 3.47967 2.64947 3.63889 2.62525 3.93529C2.60046 4.23869 2.59999 4.63007 2.59999 5.20002V10.8C2.59999 11.37 2.60046 11.7614 2.62525 12.0648C2.64947 12.3612 2.69387 12.5204 2.75258 12.6356C2.88681 12.899 3.10098 13.1132 3.36441 13.2474C3.47964 13.3061 3.63886 13.3506 3.93526 13.3748C4.23866 13.3996 4.63004 13.4 5.19999 13.4H10.8C11.3699 13.4 11.7613 13.3996 12.0647 13.3748C12.3611 13.3506 12.5203 13.3061 12.6356 13.2474C12.899 13.1132 13.1132 12.899 13.2474 12.6356C13.3061 12.5204 13.3505 12.3612 13.3747 12.0648C13.3995 11.7614 13.4 11.37 13.4 10.8V9.33336C13.4 9.00199 13.6686 8.73336 14 8.73336C14.3314 8.73336 14.6 9.00199 14.6 9.33336V10.8252C14.6 11.3639 14.6 11.8044 14.5708 12.1625C14.5405 12.5331 14.4759 12.8678 14.3166 13.1804C14.0673 13.6696 13.6696 14.0674 13.1804 14.3166C12.8678 14.4759 12.5331 14.5405 12.1625 14.5708C11.8044 14.6 11.3638 14.6 10.8251 14.6H5.17486C4.63616 14.6 4.19559 14.6 3.83754 14.5708C3.46693 14.5405 3.13221 14.4759 2.81962 14.3166C2.3304 14.0674 1.93265 13.6696 1.68338 13.1804C1.5241 12.8678 1.45952 12.5331 1.42924 12.1625C1.39998 11.8044 1.39999 11.3639 1.39999 10.8252V5.17489C1.39999 4.63619 1.39998 4.19562 1.42924 3.83757C1.45952 3.46696 1.5241 3.13224 1.68338 2.81965C1.93265 2.33043 2.3304 1.93268 2.81962 1.68341C3.13221 1.52413 3.46693 1.45955 3.83754 1.42927C4.19559 1.40001 4.63616 1.40002 5.17486 1.40002ZM11.5757 1.57576C11.81 1.34145 12.1899 1.34145 12.4243 1.57576L14.4243 3.57576C14.6586 3.81008 14.6586 4.18997 14.4243 4.42429L12.4243 6.42429C12.1899 6.6586 11.81 6.6586 11.5757 6.42429C11.3414 6.18997 11.3414 5.81008 11.5757 5.57576L12.5515 4.60002H11.8667C11.2967 4.60002 10.9053 4.60049 10.6019 4.62528C10.3055 4.6495 10.1463 4.6939 10.0311 4.75262C9.76765 4.88684 9.55348 5.10101 9.41925 5.36444C9.36054 5.47967 9.31613 5.63889 9.29192 5.93529C9.26713 6.23869 9.26666 6.63007 9.26666 7.20003V8.00002C9.26666 8.3314 8.99803 8.60002 8.66666 8.60002C8.33529 8.60002 8.06666 8.3314 8.06666 8.00002V7.17489C8.06665 6.63619 8.06665 6.19562 8.0959 5.83757C8.12618 5.46696 8.19077 5.13224 8.35004 4.81965C8.59932 4.33043 8.99706 3.93268 9.48629 3.68341C9.79888 3.52413 10.1336 3.45955 10.5042 3.42927C10.8623 3.40001 11.3028 3.40002 11.8415 3.40002L12.5515 3.40002L11.5757 2.42429C11.3414 2.18997 11.3414 1.81008 11.5757 1.57576Z\\" fill=\\"#8C8C8C\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let C=o._Y.createComponent("JumpToIcon",f,e=>(0,n.jsx)(g.s,{...e.props,name:"JumpToIcon",iconData:y}));var k=i(56105),w=i(91336);class b extends o.PN{constructor(...e){super(...e),(0,x._)(this,"props",void 0)}}var S=JSON.parse('{"fill":"none","content":"\\n<g id=\\"star-01\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M11.3975 1.86603C11.7786 1.68431 12.2214 1.68431 12.6025 1.86603C12.9281 2.02124 13.11 2.29196 13.2061 2.44885C13.3051 2.61057 13.4074 2.81788 13.5098 3.02548L15.6878 7.43793L20.5597 8.15003C20.7887 8.18346 21.0174 8.21685 21.2017 8.26117C21.3806 8.30418 21.6941 8.39381 21.9421 8.65556C22.2325 8.96203 22.369 9.38316 22.3137 9.8017C22.2665 10.1592 22.0652 10.4157 21.9457 10.5555C21.8224 10.6995 21.6568 10.8608 21.491 11.0222L17.9671 14.4545L18.7986 19.3026C18.8378 19.5308 18.8769 19.7587 18.8918 19.9478C18.9064 20.1312 18.9183 20.4572 18.7461 20.7742C18.5446 21.1452 18.1863 21.4055 17.7711 21.4825C17.4164 21.5482 17.11 21.4361 16.9401 21.3656C16.7649 21.2929 16.5603 21.1852 16.3554 21.0774L12 18.787L7.64464 21.0774C7.4397 21.1852 7.23506 21.2929 7.05988 21.3656C6.88995 21.4361 6.58358 21.5482 6.22891 21.4825C5.8137 21.4055 5.45541 21.1452 5.25385 20.7742C5.08169 20.4572 5.09363 20.1312 5.10815 19.9478C5.12312 19.7587 5.16225 19.5308 5.20143 19.3026L6.03293 14.4545L2.53258 11.0452C2.5247 11.0375 2.51682 11.0299 2.50894 11.0222C2.34315 10.8608 2.17757 10.6995 2.05434 10.5555C1.93475 10.4157 1.73346 10.1592 1.68626 9.8017C1.63098 9.38316 1.76753 8.96203 2.05788 8.65556C2.30586 8.39381 2.6194 8.30418 2.79825 8.26117C2.98256 8.21685 3.21125 8.18346 3.44023 8.15003C3.4511 8.14844 3.46198 8.14686 3.47286 8.14527L8.31216 7.43793L10.4756 3.05505C10.4805 3.0452 10.4853 3.03534 10.4902 3.02548C10.5926 2.81788 10.6949 2.61057 10.7939 2.44885C10.89 2.29196 11.0719 2.02124 11.3975 1.86603ZM12 4.03344L9.90299 8.28174C9.8989 8.29003 9.89436 8.29941 9.88935 8.30975C9.84084 8.40991 9.74883 8.59986 9.60351 8.75627C9.48024 8.88894 9.33241 8.99643 9.1682 9.0728C8.97461 9.16282 8.76554 9.19179 8.65531 9.20706C8.64393 9.20864 8.63361 9.21007 8.62446 9.21141L3.93357 9.89705L7.32653 13.2018C7.33316 13.2083 7.34069 13.2155 7.34899 13.2234C7.42941 13.3006 7.58192 13.447 7.68592 13.6337C7.77413 13.7922 7.83073 13.9662 7.85256 14.1463C7.87829 14.3585 7.84101 14.5666 7.82135 14.6763C7.81932 14.6876 7.81748 14.6979 7.81592 14.707L7.01536 19.3746L11.2087 17.1694C11.2169 17.1651 11.2261 17.1601 11.2363 17.1547C11.3345 17.1021 11.5208 17.0023 11.7306 16.9612C11.9085 16.9263 12.0915 16.9263 12.2694 16.9612C12.4792 17.0023 12.6655 17.1021 12.7637 17.1547C12.7739 17.1601 12.7831 17.1651 12.7913 17.1694L16.9846 19.3746L16.1841 14.707C16.1825 14.6979 16.1807 14.6876 16.1786 14.6763C16.159 14.5666 16.1217 14.3585 16.1474 14.1463C16.1693 13.9662 16.2259 13.7922 16.3141 13.6337C16.4181 13.4469 16.5706 13.3006 16.651 13.2234C16.6593 13.2155 16.6668 13.2083 16.6735 13.2018L20.0664 9.89705L15.3755 9.21141C15.3664 9.21007 15.3561 9.20864 15.3447 9.20707C15.2345 9.19179 15.0254 9.16282 14.8318 9.0728C14.6676 8.99643 14.5198 8.88894 14.3965 8.75627C14.2512 8.59986 14.1592 8.4099 14.1106 8.30975C14.1056 8.29941 14.1011 8.29003 14.097 8.28174L12 4.03344Z\\" fill=\\"black\\"/>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let A=o._Y.createComponent("StarLineIcon",b,e=>(0,n.jsx)(g.s,{...e.props,name:"StarLineIcon",iconData:S}));var B=i(37231),E=i(75372),I=i(20995),D=i(44069),j=i(2088),_=i(42614),N=i(69645),L=i(53826),M=i(90180),T=i(37949),P=i(82005),F=i(63243),V=i(8209),G=i(56607),R=i(88882),U=i(92235),O=i(92660),H=i(21320),W=i(78716),z=i.n(W),q=i(90107),Y=i(62499),Z=i(96567),J=i.n(Z),K=i(32352),X=i(67061),Q=i(38172),$=i(91433),ee=i(85209),et=i(63134),ei=i(43775),en=i(97703),eo=i(52921);class es extends o.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,x._)(this,"props",void 0),(0,x._)(this,"movePopoverOpen",!1)}}(0,eo.gn)([o.SB],es.prototype,"movePopoverOpen",void 0);let er=o._Y.createComponent("ChatItemMovePopover",es,e=>(0,n.jsx)(E.x,{open:e.movePopoverOpen,onOpenChange:t=>{e.movePopoverOpen=t},trigger:"click",placement:"bottomRight",closeAfterContentClick:!0,content:(0,n.jsxs)(I.h,{width:200,children:[e.props.groupList.map(t=>{let i=t.uid===e.props.convItem.collectionGroupUid;return(0,n.jsx)(N.X,{content:t.name,isActive:i,onClick:()=>{e.props.handleMoveToGroup(t,e.props.convItem)},customNode:i&&(0,n.jsx)(et.n,{size:16,color:"var(--theme-icon-brand)"})},t.uid)}),(0,n.jsx)(en.S,{})]}),children:(0,n.jsx)(ei.t,{size:16,color:"var(--theme-icon-quaternary)"})}));var ea={convHistoryDrawer:"conv-history-drawer--yenPT",banner:"banner--zusWz",bannerContent:"banner-content--dZ205",bannerBtn:"banner-btn--YBrTi",search:"search--MDVD4",inputWrapper:"input-wrapper--YlRuP",leftExtra:"left-extra--JD8_M",inputGroup:"input-group--MswLf",divider:"divider--nbmaP",input:"input--PvpqJ",convList:"conv-list--AddZ5",historyChats:"history-chats--x3crg",convItemWrapper:"conv-item-wrapper--wz25u",convItemInner:"conv-item-inner--vpJmk",edit:"edit--ymrUo",moveFavorite:"move-favorite--ZNaVo",chatItemOperation:"chat-item-operation--FH7u2",operationAction:"operation-action--DitNt",actionItem:"action-item--dHpm6",convItem:"conv-item--xD20k",title:"title--EUqQt",titleText:"title-text--riTky",selectItem:"select-item--p5azc",convItemHeader:"conv-item-header--nXaHE",tag:"tag--duaEn",titleContent:"title-content--WwVs8",date:"date--VYwjv",convItemContent:"conv-item-content--nCZz1",convItemContentText:"conv-item-content-text--vcN8q",highlight:"highlight--KBFHY",convTagGroup:"conv-tag-group--cOGDA",tagHeader:"tag-header--vZBSF",tagGroup:"tag-group--hCn6W",tagButton:"tag-button--TftAE",active:"active--F7LGh",actionBtn:"action-btn--egOz2",convBotInfo:"conv-bot-info--YWYw_",left:"left--QhuYq",bot:"bot--TNnSw",botLogo:"bot-logo--Y3PDA",botName:"bot-name--pB3dg",pdfLink:"pdf-link--L6iNr",text:"text--j1Bdl",pageLink:"page-link--Zi4YP",empty:"empty--gthkZ",emptyContent:"empty-content--WjxnO",emptyLogo:"empty-logo--eZs4b",emptyText:"empty-text--Mvque",incognitoModeCard:"incognito-mode-card--oynpe",selectOperation:"select-operation--Kpg07",selectOperationLeft:"select-operation-left--nGZ3K",checkboxLabel:"checkbox-label--rtirQ",selectOperationRight:"select-operation-right--EP2sc",btn:"btn--WVo7a"},el=i(34891),ec=i(1396),ed=i(15851),eh=i(46756),ep=i(24900),eu=i(77099),em=i(20978),ev=i(73047),eg=i(89322),ex=i(91571),ef=i(80406);class ey extends o.PN{get S(){return R.S.Global.modules.MainWindow.ConvHistoryDrawer}get currentConvId(){return this.props.currentConvId}get botInfo(){return ec.Mp.getBotItemById(this.props.botId)}get tagGroup(){var e;return F.docChatController.isInDocChatPage?[{value:"all",label:this.S.allChats},{value:"favorite",label:this.S.favoriteConversations}]:[{value:"all",label:this.S.allChats},{value:"currentBot",label:(0,R.x)(this.S.botConversations,{botName:(null===(e=this.botInfo)||void 0===e?void 0:e.name)||""})},{value:"favorite",label:this.S.favoriteConversations}]}get isSelectAll(){return this.selectedConvIdList.length===this.conversationList.length&&this.selectedConvIdList.length>0}get isIndeterminate(){return!this.isSelectAll&&this.selectedConvIdList.length>0}get renderGroupList(){return[{uid:"all",name:this.S.all,order:-1},...this.groupList]}get activeGroupName(){let e=this.renderGroupList.find(e=>e.uid===this.activeGroupUid);return(null==e?void 0:e.name)||""}get renderConversationList(){return"favorite"===this.activeTab&&"all"!==this.activeGroupUid?this.conversationList.flatMap(e=>e.isFavorite&&e.collectionGroupUid===this.activeGroupUid?e:[]):this.conversationList}onViewCreate(){this.loadStoredData(),this.loadFavoriteList()}async loadFavoriteList(){let e=await eh.y.fetchFavoriteGroupList({useCache:!0,autoUpdate:!0});this.groupList=e,eh.y.on("favoriteGroupListChange",e=>{if(this.groupList=e,-1===this.renderGroupList.findIndex(e=>e.uid===this.activeGroupUid)){let e=this.renderGroupList[0];this.onGroupChange(e)}})}async loadStoredData(){if(!F.docChatController.isInDocChatPage){let{itemsList:e=[]}=await eh.y.getConversationList({offset:0,limit:this.limit},{cacheOnly:!0});this.conversationList=e}this.isInit=!0,this.conversationList.length||(this.loading=!0),this.fetchChatConversationList("refresh")}getConvItemLink(e){let{chatBotUid:t,chatBotName:i,conversationId:n}=e;if(!t||!i||!n)return;let o=eu.l.createPageParamsUrl({tab:"chat",botName:i,botUid:t,convId:n},"home");return U.m.genFullUrl(o)}onInputChange(e){this.keyword=e,this.fetchConversationListDebounced("refresh")}async fetchConversationList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"refresh";"refresh"===e&&(this.total=0,this.loading=!0,this.conversationList=[]),this.fetchChatConversationList(e)}async fetchChatConversationList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"refresh";try{var t;let{itemsList:i=[],total:n=0}=await eh.y.getConversationList({keyword:this.keyword,limit:this.limit,pdfId:F.docChatController.isInDocChatPage?F.docChatController.docId:void 0,offset:"refresh"===e?0:this.conversationList.length,chatBotUid:"currentBot"===this.activeTab?null===(t=this.botInfo)||void 0===t?void 0:t.uid:void 0,isFavorite:"favorite"===this.activeTab||this.isFilterFavorites?1:void 0,groupUid:"all"===this.activeGroupUid?void 0:this.activeGroupUid},{useCache:!1});this.total=n,"refresh"===e?this.conversationList=i:this.conversationList=this.conversationList.concat(i)}catch(t){let e=U.m.formatErrorMsg(t);ed.M.error(e)}this.loading=!1}onViewDestroy(){}async handleCollectConvIconClick(e){let t=!e.isFavorite;e.isFavorite=t,t||delete e.collectionGroupUid,t&&(0,ef.O)({insertTarget:G.o.isExtension?{type:"botContainer",botId:this.props.botId}:"mainWindow",convItem:e});try{await ep.Tn.collectConversation({conversationId:e.conversationId,action:t}),eh.y.updateConversationByLocal({...e}),t||"favorite"!==this.activeTab||(this.conversationList=this.conversationList.filter(t=>t.conversationId!==e.conversationId),this.total-=1)}catch(e){ed.M.error(U.m.formatMonicaSdkError(e))}}handleClearConvIconClick(){let e=this.S.clearContent;F.docChatController.isInDocChatPage||(e="all"===this.activeTab?this.S.clearAllConv:"favorite"===this.activeTab?this.S.clearFavoriteConv:this.S.clearBotConv),(0,el.B)({content:e,okText:this.S.delete,okBtnType:"danger",onOk:async()=>{let e=await this.handleClearConvDialogConfirm();return eh.y.refreshConversationList(),e},insertTarget:"mainWindow"})}handleDelConvIconClick(e){this.beforeConvItem=e,(0,el.B)({content:this.S.deleteContent,okText:this.S.delete,okBtnType:"danger",onOk:()=>(this.handleDelConvDialogConfirm().catch(e=>{ed.M.error(U.m.formatErrorMsg(e))}),!0),insertTarget:"mainWindow"})}handleEditTitleClick(e){(0,ex.T)({convItem:e,insertTarget:this.props.insertTarget,onSuccess:t=>{e.title=t}})}handleClearConvDialogConfirm(){let e={excludeConversationIdList:[],botUid:this.props.botId,deletePolicy:"exclude_favorite"};return"all"===this.activeTab?e.botUid="all":"favorite"===this.activeTab&&(e.botUid="all",e.deletePolicy="favorite"),F.docChatController.isInDocChatPage&&(e.pdfId=F.docChatController.docId,e.botUid=this.props.botId),new Promise((t,i)=>{ep.Tn.clearConversationList(e).then(()=>{ed.M.success(this.S.conversationDeleted),this.fetchChatConversationList("refresh"),t(!0)}).catch(e=>{ed.M.error(U.m.formatMonicaSdkError(e)),i(!1)})})}handleDelConvDialogConfirm(){return new Promise((e,t)=>{ep.Tn.removeConversationHistory({conversationId:this.beforeConvItem.conversationId,botId:this.props.botId}).then(()=>{if(this.currentConvId===this.beforeConvItem.conversationId){var t,i;null===(t=(i=this.props).onNewChat)||void 0===t||t.call(i)}ed.M.success(this.S.conversationDeleted),this.conversationList=this.conversationList.filter(e=>e.conversationId!==this.beforeConvItem.conversationId),this.total-=1,eh.y.deleteConversation(this.beforeConvItem.conversationId),e(!0)}).catch(e=>{ed.M.error(U.m.formatMonicaSdkError(e)),t(!1)})})}handleConvClick(e,t){"web-home"===G.o.entryType&&history.replaceState(null,"",location.pathname),this.props.onDisposed(),this.props.onClickItem(e,t)}handleViewResources(e){this.handleConvClick(e,()=>{this.nextTick(()=>{eg.p.openWindow("file")})})}openUrl(e){window.open(e,"_blank","noreferrer")}handleOpenConv(e){let t=this.getConvItemLink(e);window.open(t,"_blank","noreferrer")}handleBatchDelete(){(0,el.B)({content:this.S.batchDeleteContent,okText:this.S.delete,okBtnType:"danger",onOk:()=>{eh.y.deleteConversationList({conversationIdList:this.selectedConvIdList}).then(()=>{this.fetchChatConversationList("refresh")}).catch(e=>{ed.M.error(U.m.formatMonicaSdkError(e))});let e=this.currentConvId;if(this.selectedConvIdList.includes(e)){var t,i;null===(t=(i=this.props).onNewChat)||void 0===t||t.call(i)}return this.conversationList=this.conversationList.flatMap(e=>this.selectedConvIdList.includes(e.conversationId)?[]:[e]),this.selectedConvIdList=[],this.enableSelectMode=!1,!0},insertTarget:"mainWindow"})}handleSelectAllChange(e){e||this.isIndeterminate?this.selectedConvIdList=this.conversationList.flatMap(e=>e.conversationId?[e.conversationId]:[]):this.selectedConvIdList=[]}handleSelectConv(e,t){let i=this.selectedConvIdList.filter(e=>e!==t.conversationId);e?this.selectedConvIdList=[...i,t.conversationId]:this.selectedConvIdList=i}async handleMoveToGroup(e,t){try{t.collectionGroupUid=e.uid,t.isFavorite=!0,ed.M.success(this.S.moveSuccess),await eh.y.moveFavoriteGroup(t,e.uid)}catch(e){ed.M.error(U.m.formatMonicaSdkError(e))}}onGroupChange(e){this.activeGroupUid=e.uid,this.fetchChatConversationList("refresh")}constructor(...e){var t;super(...e),t=this,(0,x._)(this,"props",void 0),(0,x._)(this,"keyword",""),(0,x._)(this,"conversationList",[]),(0,x._)(this,"loading",!1),(0,x._)(this,"total",0),(0,x._)(this,"isFilterFavorites",!1),(0,x._)(this,"conversationTotal",0),(0,x._)(this,"isInit",!1),(0,x._)(this,"activeTab","all"),(0,x._)(this,"enableSelectMode",!1),(0,x._)(this,"selectedConvIdList",[]),(0,x._)(this,"groupPopoverOpen",!1),(0,x._)(this,"groupList",[]),(0,x._)(this,"activeGroupUid","all"),(0,x._)(this,"beforeConvItem",{}),(0,x._)(this,"limit",15),(0,x._)(this,"fetchConversationListDebounced",(0,em.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"continue";t.fetchConversationList(e),Q.W.createUserBehaviorEvent({eventName:"search_chat_history",extData:{botId:t.props.botId,total:t.conversationTotal}})},300))}}(0,eo.gn)([o.SB],ey.prototype,"keyword",void 0),(0,eo.gn)([o.SB],ey.prototype,"conversationList",void 0),(0,eo.gn)([o.SB],ey.prototype,"loading",void 0),(0,eo.gn)([o.SB],ey.prototype,"total",void 0),(0,eo.gn)([o.SB],ey.prototype,"isFilterFavorites",void 0),(0,eo.gn)([o.SB],ey.prototype,"conversationTotal",void 0),(0,eo.gn)([o.SB],ey.prototype,"isInit",void 0),(0,eo.gn)([o.SB],ey.prototype,"activeTab",void 0),(0,eo.gn)([o.SB],ey.prototype,"enableSelectMode",void 0),(0,eo.gn)([o.SB],ey.prototype,"selectedConvIdList",void 0),(0,eo.gn)([o.SB],ey.prototype,"groupPopoverOpen",void 0),(0,eo.gn)([o.SB],ey.prototype,"groupList",void 0),(0,eo.gn)([o.SB],ey.prototype,"activeGroupUid",void 0),(0,eo.gn)([ev.Fl],ey.prototype,"S",null),(0,eo.gn)([ev.Fl],ey.prototype,"currentConvId",null),(0,eo.gn)([ev.Fl],ey.prototype,"botInfo",null),(0,eo.gn)([ev.Fl],ey.prototype,"tagGroup",null),(0,eo.gn)([ev.Fl],ey.prototype,"isSelectAll",null),(0,eo.gn)([ev.Fl],ey.prototype,"isIndeterminate",null),(0,eo.gn)([ev.Fl],ey.prototype,"renderGroupList",null),(0,eo.gn)([ev.Fl],ey.prototype,"activeGroupName",null),(0,eo.gn)([ev.Fl],ey.prototype,"renderConversationList",null);let eC=o._Y.createComponent("ConvHistoryDrawer",ey,e=>e.isInit?(0,n.jsxs)(c.d,{closeWhenEsc:!0,visible:!0,onDispose:()=>{e.props.onDisposed()},title:e.S.conversationHistory,enableHorizontalStyle:!0,children:[M.A.isIncognitoMode&&(0,n.jsx)(K.g,{className:ea.incognitoModeCard,desc:e.S.incognitoModeDesc,source:"conv_history_drawer"}),(0,n.jsxs)("div",{className:ea.convHistoryDrawer,children:[G.o.isExtension&&"sidebar"===X.L.mainWindowMode&&(0,n.jsxs)("div",{className:ea.banner,children:[(0,n.jsx)("span",{className:ea.bannerContent,children:e.S.bannerContent}),(0,n.jsxs)("span",{className:ea.bannerBtn,onClick:()=>{T.w.openFullScreen(),e.props.onDisposed()},children:[(0,n.jsx)(d.J,{name:"monicaFull",size:16,color:"currentColor"}),e.S.expand]})]}),(0,n.jsx)(ew,{vm:e}),!e.enableSelectMode&&(0,n.jsx)(eB,{vm:e}),e.loading?(0,n.jsx)(r.g,{fullScreen:!0}):0===e.renderConversationList.length?(0,n.jsx)("div",{className:ea.empty,children:(0,n.jsxs)("div",{className:ea.emptyContent,children:[(0,n.jsx)(a.E,{src:(0,s.Q)(V.Z),className:ea.emptyLogo}),(0,n.jsx)("div",{className:ea.emptyText,children:e.keyword||e.isFilterFavorites?e.S.noConversationFound:e.S.noConversationHistory})]})}):(0,n.jsx)(l.v,{hasMore:e.renderConversationList.length<e.total,className:ea.convList,dataLength:e.renderConversationList.length,next:()=>{e.fetchConversationList("continue")},loader:(0,n.jsx)(r.g,{type:"geist"}),children:(0,n.jsx)(ek,{vm:e})})]})]}):null),ek=(0,Y.Pi)(e=>{let{vm:t}=e;return(0,n.jsx)("div",{className:ea.historyChats,children:(0,q.Z)(t.renderConversationList,"conversationId").map(e=>(0,n.jsx)(eb,{vm:t,convItem:e},e.conversationId))})}),ew=(0,Y.Pi)(function(e){let{vm:t}=e;if(t.enableSelectMode){let e=!t.selectedConvIdList.length;return(0,n.jsxs)("div",{className:ea.selectOperation,children:[(0,n.jsx)("div",{className:ea.selectOperationLeft,children:(0,n.jsx)(h.X,{labelClassName:ea.checkboxLabel,onChange:e=>{t.handleSelectAllChange(e)},label:(0,R.x)(t.S.itemsSelected,{count:t.selectedConvIdList.length}),checked:t.isSelectAll,indeterminate:t.isIndeterminate})}),(0,n.jsxs)("div",{className:ea.selectOperationRight,children:[(0,n.jsx)(p.z,{className:ea.btn,type:"outline",color:"secondary",disabled:e,onClick:()=>{e||t.handleBatchDelete()},children:t.S.batchDelete}),(0,n.jsx)(p.z,{className:ea.btn,type:"outline",color:"secondary",onClick:()=>{t.enableSelectMode=!1,t.selectedConvIdList=[]},children:t.S.quit})]})]})}return(0,n.jsxs)("div",{className:ea.tagHeader,children:[(0,n.jsx)("div",{className:z()(ea.tagGroup,ea.convTagGroup),children:t.tagGroup.map(e=>(0,n.jsx)("div",{className:z()(ea.tagButton,{[ea.active]:e.value===t.activeTab}),onClick:()=>{e.value!==t.activeTab&&(t.activeTab=e.value,t.fetchConversationList("refresh"))},children:e.label},e.value))}),(0,n.jsx)(eI,{vm:t})]})}),eb=(0,Y.Pi)(function(e){var t,i,o,s,r;let{vm:a,convItem:l}=e,c=a.currentConvId===l.conversationId,p=X.L.privacyGuard((null===(i=l.lastMessage)||void 0===i?void 0:null===(t=i.slice)||void 0===t?void 0:t.call(i,0,100))||""),v=l.lastMessageTime||l.updatedAt||l.createdAt,g=a.enableSelectMode&&a.selectedConvIdList.includes(l.conversationId),x=(null===(o=l.infoData)||void 0===o?void 0:o.hasImg)||(null===(s=l.infoData)||void 0===s?void 0:s.hasArtifact)||(null===(r=l.infoData)||void 0===r?void 0:r.hasDoc);return(0,n.jsxs)("div",{className:ea.convItemWrapper,onClick:()=>{if(a.enableSelectMode){a.handleSelectConv(!g,l);return}},children:[a.enableSelectMode&&(0,n.jsx)("div",{className:ea.selectItem,children:(0,n.jsx)(h.X,{checked:g,onChange:e=>{a.handleSelectConv(e,l)}})}),(0,n.jsxs)("a",{href:a.getConvItemLink(l),target:"_blank",rel:"noreferrer",className:z()(ea.convItemInner),onClick:e=>{!e.metaKey&&!e.altKey&&!e.shiftKey&&!e.ctrlKey&&(U.m.ensureTrustedEvent(e),e.preventDefault(),a.enableSelectMode||(Q.W.createUserBehaviorEvent({eventName:"conv_history_click",extData:{convId:l.conversationId}}),a.handleConvClick(l)))},children:[(0,n.jsxs)("div",{className:ea.convItem,children:[(0,n.jsx)("div",{className:ea.convItemHeader,children:(0,n.jsxs)("span",{className:ea.title,children:[c&&(0,n.jsx)("span",{className:z()(ea.tag,{[ea.current]:c}),children:a.S.current}),(0,n.jsxs)("div",{className:ea.titleContent,children:[l.highLightTitle?(0,n.jsx)("span",{className:ea.titleText,dangerouslySetInnerHTML:{__html:X.L.privacyGuard(l.highLightTitle||O.Q0)}}):(0,n.jsx)(J(),{textToHighlight:X.L.privacyGuard(l.title||O.Q0),highlightClassName:ea.highlight,searchWords:[a.keyword],className:ea.titleText}),(0,n.jsx)(u.u,{title:a.S.editConversationTitle,placement:"top",children:(0,n.jsx)("span",{className:ea.edit,onClick:e=>{U.m.ensureTrustedEvent(e),a.handleEditTitleClick(l),e.stopPropagation(),e.preventDefault()},children:(0,n.jsx)(d.J,{name:"monicaEdit",size:16,color:"var(--theme-icon-tertiary)"})})}),x&&(0,n.jsx)(m.K,{size:14,color:"var(--theme-icon-quaternary)",className:ea.actionItem,title:a.S.resourceTips})]}),(0,n.jsx)(u.u,{title:X.L.privacyGuard(H.L.formatTime(v)),children:(0,n.jsx)("span",{className:ea.date,children:X.L.privacyGuard(H.L.fromNow(v))})})]})}),(0,n.jsx)("div",{className:ea.convItemContent,children:a.keyword?(0,n.jsx)("span",{className:ea.convItemContentText,dangerouslySetInnerHTML:{__html:p}}):(0,n.jsx)("span",{className:ea.convItemContentText,children:p})})]}),(0,n.jsx)(eS,{vm:a,convItem:l})]})]})}),eS=(0,Y.Pi)(function(e){var t;let{vm:i,convItem:o}=e,s=null===(t=o.infoData)||void 0===t?void 0:t.readingInfo,r=(null==s?void 0:s.type)==="pdf",l=(null==s?void 0:s.pdfId)?F.docChatController.genWebPdfUrl(s.pdfId):"";return(0,n.jsxs)("div",{className:ea.convBotInfo,children:[(0,n.jsx)("div",{className:ea.left,children:(()=>{if(r)return(0,n.jsxs)("div",{className:ea.pdfLink,onClick:e=>{U.m.ensureTrustedEvent(e),i.openUrl(l),e.stopPropagation(),e.preventDefault()},children:[(0,n.jsx)(d.J,{name:"docChatWebEntry",size:12}),(0,n.jsx)("div",{className:ea.text,children:s.pdfName})]});if(o.chatBotUid!==$.Z9.monica)return(0,n.jsx)("div",{className:ea.bot,children:o.chatBotUid!==$.Z9.monica&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.E,{src:o.chatBotLogoUrl,alt:"",skeleton:!0,className:ea.botLogo}),(0,n.jsx)("span",{className:ea.botName,children:o.chatBotName})]})});if(o.origin&&U.m.isLegalLink(o.origin)){let e=new URL(o.origin).host;return G.o.isExtension&&-1!==e.trim().indexOf(".")?(0,n.jsx)("div",{className:ea.pageLink,children:e}):null}return null})()}),(0,n.jsx)(eA,{convItem:o,vm:i})]})}),eA=(0,Y.Pi)(function(e){let{vm:t,convItem:i}=e,o=[$.tW.searchAgent,$.tW.writingAgent,$.tW.autoAgent].includes(i.chatBotUid||"");return(0,n.jsxs)("div",{className:ea.chatItemOperation,children:["web-chat-pdf"!==G.o.entryType&&!o&&(0,n.jsx)(u.u,{title:t.S.viewFilesInChat,placement:"top",children:(0,n.jsx)("span",{className:ea.operationAction,onClick:e=>{U.m.ensureTrustedEvent(e),e.stopPropagation(),e.preventDefault(),t.handleViewResources(i)},children:(0,n.jsx)(v.B,{size:16,color:"var(--theme-icon-quaternary)"})})}),(0,n.jsx)(u.u,{title:t.S.openInNewTab,placement:"top",children:(0,n.jsx)("span",{className:ea.operationAction,onClick:e=>{U.m.ensureTrustedEvent(e),e.stopPropagation(),e.preventDefault(),t.handleOpenConv(i)},children:(0,n.jsx)(C,{size:16,color:"var(--theme-icon-quaternary)"})})}),(0,n.jsx)(u.u,{title:t.S.deleteConversation,placement:"top",children:(0,n.jsx)("span",{className:ea.operationAction,onClick:e=>{U.m.ensureTrustedEvent(e),e.stopPropagation(),e.preventDefault(),t.handleDelConvIconClick(i)},children:(0,n.jsx)(k.X,{size:16,color:"var(--theme-icon-quaternary)"})})}),(0,n.jsx)(u.u,{title:t.S.move,placement:"top",trigger:["hover","click"],children:(0,n.jsx)("span",{className:z()(ea.operationAction,ea.moveFavorite),onClick:e=>{U.m.ensureTrustedEvent(e),e.stopPropagation(),e.preventDefault()},children:(0,n.jsx)(er,{groupList:t.groupList,convItem:i,handleMoveToGroup:t.handleMoveToGroup.bind(t)})})}),(0,n.jsx)(u.u,{title:i.isFavorite?t.S.unfavorite:t.S.favorite,placement:"top",children:(0,n.jsx)("span",{className:ea.operationAction,style:{display:i.isFavorite?"flex":void 0},onClick:e=>{U.m.ensureTrustedEvent(e),e.preventDefault(),e.stopPropagation(),t.handleCollectConvIconClick(i)},children:i.isFavorite?(0,n.jsx)(w._,{size:16,color:"var(--theme-function-warning)"}):(0,n.jsx)(A,{size:16,color:"var(--theme-icon-quaternary)"})})})]})}),eB=(0,Y.Pi)(function(e){let{vm:t}=e;return(0,n.jsx)("div",{className:ea.search,children:(0,n.jsxs)("div",{className:ea.inputWrapper,children:[(0,n.jsx)("div",{className:ea.leftExtra,children:(0,n.jsx)(eE,{vm:t})}),(0,n.jsx)(B.I,{className:ea.input,placeholder:t.S.search,value:t.keyword,onChange:e=>{t.onInputChange(e)},autofocus:!0})]})})}),eE=(0,Y.Pi)(function(e){let{vm:t}=e;return"favorite"===t.activeTab&&t.groupList.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.x,{open:t.groupPopoverOpen,placement:"bottomLeft",trigger:"click",onOpenChange:e=>{t.groupPopoverOpen=e},closeAfterContentClick:!0,content:(0,n.jsx)(I.h,{width:180,maxListHeight:200,children:t.renderGroupList.map(e=>{let i=t.activeGroupUid===e.uid;return(0,n.jsx)(ee.s,{group:e,onClick:()=>{t.onGroupChange(e),t.enableSelectMode=!1},closeGroupPopover:()=>{t.groupPopoverOpen=!1},isActive:i,isShowMore:"all"!==e.uid},e.uid)})}),children:(0,n.jsxs)("div",{className:ea.inputGroup,children:[(0,n.jsx)(D.x,{text:t.activeGroupName}),(0,n.jsx)(j.v,{size:16,color:"currentColor",style:{transform:t.groupPopoverOpen?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease-in-out"}})]})}),(0,n.jsx)("div",{className:ea.divider})]}):(0,n.jsx)(_.W,{size:16,color:"var(--theme-icon-primary)",style:{marginLeft:10}})}),eI=(0,Y.Pi)(function(e){let{vm:t}=e;return(0,n.jsx)(E.x,{placement:"bottomLeft",trigger:"hover",closeAfterContentClick:!0,content:(0,n.jsxs)(I.h,{children:[(0,n.jsx)(N.X,{icon:(0,n.jsx)(L.r,{size:16,color:"var(--theme-icon-tertiary)"}),content:t.S.select,onClick:e=>{U.m.ensureTrustedEvent(e),t.enableSelectMode=!0}}),(0,n.jsx)(N.X,{icon:(0,n.jsx)(k.X,{size:16,color:"var(--theme-icon-tertiary)"}),content:t.S.clearAllConversations,onClick:e=>{e.stopPropagation(),U.m.ensureTrustedEvent(e),t.handleClearConvIconClick()}})]}),children:(0,n.jsx)("div",{className:ea.actionBtn,children:(0,n.jsx)(d.J,{size:24,name:"readingMore",color:"currentColor"})})})}),eD=P.t.createOpener(eC)},80406:function(e,t,i){i.d(t,{O:function(){return D}});var n=i(71576),o=i(34491),s=i(3584),r=i(82005),a={addedToFavoriteDialog:"added-to-favorite-dialog--Q3ihx",left:"left--irgvr",favoriteTipLink:"favorite-tip-link--ALizi"},l=i(66084),c=i(52921),d=i(88882),h=i(68104),p=i(75372),u=i(20995),m=i(69645),v=i(63134),g=i(76183),x=i(5857),f=i(97703),y={favoriteGroupDialog:"favorite-group-dialog--0BEFA",title:"title--gXehq",footer:"footer--GGjK7",footerBtn:"footer-btn--I_kUs",groupList:"group-list--ap1iP",dropdownLabel:"dropdown-label--PI20L",emptyPlaceholder:"empty-placeholder--yvBi0"},C=i(92235),k=i(15851),w=i(92020),b=i(46756);class S extends o.PN{get S(){return d.S.Global.modules.MainWindow.FavoriteGroup.FavoriteGroupDialog}get renderGroupList(){return[...this.groupList]}get selectedGroupName(){var e;return(null===(e=this.renderGroupList.find(e=>e.uid===this.selectedGroupId))||void 0===e?void 0:e.name)||""}onViewCreate(){this.loadFavoriteGroupList().then(()=>{w.ll.get("selectedGroupId").then(e=>{this.groupList.find(t=>t.uid===e)?this.selectedGroupId=e:this.selectedGroupId="default"})})}onViewDestroy(){}async handleConfirmClick(){if(this.props.convItem.conversationId){this.loading=!0;try{await b.y.moveFavoriteGroup(this.props.convItem,this.selectedGroupId),w.ll.set("selectedGroupId",this.selectedGroupId),this.props.onDisposed()}catch(e){k.M.error(C.m.formatErrorMsg(e))}this.loading=!1}}async loadFavoriteGroupList(){this.groupList=await b.y.fetchFavoriteGroupList({cacheOnly:!0}),this.groupList.forEach(e=>{"default"===e.uid&&(e.name=this.S.defaultGroup)})}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"groupList",[]),(0,l._)(this,"selectedGroupId","default"),(0,l._)(this,"loading",!1),(0,l._)(this,"groupPopoverOpen",!1)}}(0,c.gn)([o.SB],S.prototype,"groupList",void 0),(0,c.gn)([o.SB],S.prototype,"selectedGroupId",void 0),(0,c.gn)([o.SB],S.prototype,"loading",void 0),(0,c.gn)([o.SB],S.prototype,"groupPopoverOpen",void 0),(0,c.gn)([o.Fl],S.prototype,"S",null),(0,c.gn)([o.Fl],S.prototype,"renderGroupList",null),(0,c.gn)([o.Fl],S.prototype,"selectedGroupName",null);let A=o._Y.createComponent("FavoriteGroupDialog",S,e=>{let{onDisposed:t,insertTarget:i}=e.props;return(0,n.jsxs)(h.u,{onDispose:()=>{t()},fixed:"dialogRoot"===i,closeOnMaskClick:!1,width:"max-content",style:{maxWidth:"90%"},className:y.favoriteGroupDialog,children:[(0,n.jsx)("div",{className:y.title,children:e.S.selectGroup}),(0,n.jsx)(p.x,{open:e.groupPopoverOpen,onOpenChange:t=>{e.groupPopoverOpen=t},trigger:"click",placement:"bottomLeft",closeAfterContentClick:!0,content:(0,n.jsxs)(u.h,{className:y.groupList,width:280,maxListHeight:240,children:[e.renderGroupList.map(t=>{let i=e.selectedGroupId===t.uid;return(0,n.jsx)(m.X,{isActive:i,content:t.name,onClick:()=>{e.selectedGroupId=t.uid},customNode:i&&(0,n.jsx)(v.n,{size:16,color:"var(--theme-icon-brand)"})},t.uid)}),(0,n.jsx)(f.S,{onCreateGroup:t=>{e.groupList.push(t),e.selectedGroupId=t.uid,e.groupPopoverOpen=!1}})]}),children:(0,n.jsx)(g.H,{className:y.dropdownLabel,label:e.selectedGroupName||(0,n.jsx)("div",{className:y.emptyPlaceholder,children:e.S.emptyPlaceholder}),height:40,width:280})}),(0,n.jsxs)("div",{className:y.footer,children:[(0,n.jsx)(x.z,{color:"secondary",size:"medium",className:y.footerBtn,onClick:()=>{t()},children:e.S.cancel}),(0,n.jsx)(x.z,{color:"primary",size:"medium",className:y.footerBtn,onClick:()=>{e.handleConfirmClick()},children:e.S.confirm})]})]})}),B=r.t.createOpener(A);class E extends o.PN{get S(){return d.S.Global.modules.MainWindow.FavoriteGroup.AddedToFavoriteDialog}onViewCreate(){this.timer=setTimeout(()=>{this.props.onDisposed()},2e3)}onViewDestroy(){}handleAddGroupClick(){let{convItem:e,insertTarget:t}=this.props;e&&(this.props.onDisposed(),B({insertTarget:t,convItem:e}))}handleMouseEnter(){this.timer&&clearTimeout(this.timer)}handleMouseLeave(){this.timer=setTimeout(()=>{this.props.onDisposed()},2e3)}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"timer",null)}}(0,c.gn)([o.Fl],E.prototype,"S",null);let I=o._Y.createComponent("AddedToFavoriteDialog",E,e=>(0,n.jsxs)("div",{className:a.addedToFavoriteDialog,onMouseEnter:()=>e.handleMouseEnter(),onMouseLeave:()=>e.handleMouseLeave(),children:[(0,n.jsxs)("div",{className:a.left,children:[(0,n.jsx)(s.I,{size:24}),(0,n.jsx)("div",{className:a.text,children:e.S.addedToFavorites})]}),(0,n.jsx)("div",{className:a.favoriteTipLink,onClick:()=>{e.handleAddGroupClick()},children:e.S.addGroup})]})),D=r.t.createOpener(I,{singleton:!0,closeBeforeDialog:!0})},85209:function(e,t,i){i.d(t,{s:function(){return D}});var n=i(71576),o=i(34491),s=i(35093),r=i(75372),a=i(20995),l=i(69645),c=i(4056),d=i(58812),h=i(66084);class p extends o.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var u=JSON.parse('{"fill":"none","content":"\\n<g id=\\"eraser\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M11.099 2.16354C10.8178 2.07218 10.5149 2.07218 10.2337 2.16354C10.1107 2.2035 9.96674 2.28469 9.74003 2.47715C9.50797 2.67416 9.23089 2.95058 8.82787 3.3536L8.18154 3.99993L11.9997 7.81806L12.646 7.17174C13.049 6.76872 13.3254 6.49164 13.5225 6.25957C13.7149 6.03286 13.7961 5.88888 13.8361 5.76588C13.9274 5.4847 13.9274 5.18182 13.8361 4.90064C13.7961 4.77764 13.7149 4.63365 13.5225 4.40694C13.3254 4.17488 13.049 3.8978 12.646 3.49478L12.5048 3.3536C12.1018 2.95058 11.8247 2.67416 11.5927 2.47715C11.366 2.28469 11.222 2.2035 11.099 2.16354ZM13.5123 8.00249C13.8932 7.62158 14.2048 7.31005 14.4373 7.03619C14.6779 6.75272 14.8689 6.47036 14.9773 6.1367C15.147 5.61451 15.147 5.05201 14.9773 4.52982C14.8689 4.19616 14.6779 3.9138 14.4373 3.63033C14.2048 3.35646 13.8932 3.04492 13.5123 2.66399L13.3356 2.48729C12.9547 2.10637 12.6431 1.79484 12.3693 1.56235C12.0858 1.3217 11.8035 1.13069 11.4698 1.02227C10.9476 0.852602 10.3851 0.852602 9.8629 1.02227C9.52924 1.13069 9.24689 1.3217 8.96342 1.56235C8.68956 1.79484 8.37804 2.10636 7.99714 2.48728L6.90905 3.57536C6.90895 3.57546 6.90915 3.57526 6.90905 3.57536C6.90895 3.57546 6.90855 3.57586 6.90845 3.57596L2.48704 7.99737C2.10612 8.37828 1.79459 8.6898 1.5621 8.96367C1.32145 9.24714 1.13044 9.52949 1.02203 9.86315C0.852358 10.3853 0.852358 10.9478 1.02203 11.47C1.13044 11.8037 1.32145 12.086 1.5621 12.3695C1.79459 12.6434 2.10612 12.9549 2.48704 13.3358L2.95058 13.7994C2.96319 13.812 2.97565 13.8244 2.988 13.8368C3.18169 14.0308 3.34515 14.1945 3.5418 14.315C3.71478 14.421 3.90337 14.4991 4.10064 14.5465C4.32491 14.6003 4.55625 14.6002 4.83038 14.6C4.84786 14.5999 4.8655 14.5999 4.88334 14.5999H5.78269C5.80053 14.5999 5.81818 14.5999 5.83565 14.6C5.87014 14.6 5.90395 14.6 5.93715 14.5999H13.9997C14.3311 14.5999 14.5997 14.3313 14.5997 13.9999C14.5997 13.6686 14.3311 13.3999 13.9997 13.3999H8.11488L13.5123 8.00249ZM11.1512 8.66659L7.33301 4.84845L3.35335 8.82811C2.95034 9.23113 2.67392 9.50821 2.47691 9.74028C2.28445 9.96699 2.20326 10.111 2.1633 10.234C2.07194 10.5151 2.07194 10.818 2.1633 11.0992C2.20326 11.2222 2.28445 11.3662 2.47691 11.5929C2.67392 11.825 2.95034 12.1021 3.35335 12.5051L3.79911 12.9508C4.0499 13.2016 4.10888 13.2551 4.1688 13.2919C4.23441 13.3321 4.30595 13.3617 4.38077 13.3797C4.44911 13.3961 4.52866 13.3999 4.88334 13.3999H5.78269C6.13737 13.3999 6.21692 13.3961 6.28526 13.3797C6.36008 13.3617 6.43162 13.3321 6.49723 13.2919C6.55715 13.2551 6.61613 13.2016 6.86692 12.9508L11.1512 8.66659Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let m=o._Y.createComponent("DeleteV2Icon",p,e=>(0,n.jsx)(d.s,{...e.props,name:"DeleteV2Icon",iconData:u}));var v=i(40449),g=i(19393),x=i(63134),f=i(78716),y=i.n(f),C=i(34896),k={favoriteGroupActionItem:"favorite-group-action-item--EBEHx",active:"active--tTr6Y",actionIcon:"action-icon--jExK2",customNode:"custom-node--SMtj5"},w=i(52921),b=i(34891),S=i(88882),A=i(92235),B=i(15851),E=i(46756);class I extends o.PN{get S(){return S.S.Global.modules.MainWindow.FavoriteGroup.FavoriteGroupActionItem}onViewCreate(){}onViewDestroy(){}async handleRenameGroupClick(e){let{group:t}=this.props;try{await E.y.updateFavoriteGroup({groupUid:t.uid,name:e})}catch(e){B.M.error(A.m.formatErrorMsg(e))}}async handleDeleteGroupClick(e){let{group:t}=this.props;(0,b.B)({okBtnType:"danger",title:e?this.S.deleteGroupAndChatHistory:this.S.deleteGroup,content:e?(0,S.x)(this.S.deleteGroupAndChatHistoryDesc,{name:t.name}):this.S.deleteGroupDesc,onOk:()=>(E.y.deleteFavoriteGroup({groupUid:t.uid,clearConversations:e}).catch(e=>{B.M.error(A.m.formatErrorMsg(e))}),B.M.success(this.S.deleteSuccess),!0),insertTarget:"mainWindow"})}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"type","default"),(0,h._)(this,"morePopoverOpen",!1),(0,h._)(this,"value","")}}(0,w.gn)([o.SB],I.prototype,"type",void 0),(0,w.gn)([o.SB],I.prototype,"morePopoverOpen",void 0),(0,w.gn)([o.SB],I.prototype,"value",void 0),(0,w.gn)([o.Fl],I.prototype,"S",null);let D=o._Y.createComponent("FavoriteGroupActionItem",I,e=>{let{group:t,isActive:i,isShowMore:o,onClick:d,className:h,content:p,moreIconAlign:u="horizontal",...f}=e.props;return(0,n.jsx)(s.r,{...f,value:e.value,className:y()(k.favoriteGroupActionItem,h,{[k.active]:e.morePopoverOpen}),type:e.type,onTypeChange:t=>{e.type=t},onValueChange:t=>{e.handleRenameGroupClick(t)},onClick:t=>{"input"===e.type?t.stopPropagation():null==d||d(t)},isActive:i,content:p||t.name,customNode:(0,n.jsxs)("div",{className:k.customNode,onClick:e=>{e.stopPropagation()},children:[o&&(0,n.jsx)("div",{className:k.actionIcon,children:(0,n.jsx)(r.x,{placement:"bottom",open:e.morePopoverOpen,onOpenChange:t=>{e.morePopoverOpen=t},trigger:"click",closeAfterContentClick:!0,content:(0,n.jsxs)(a.h,{children:[(0,n.jsx)(l.X,{content:e.S.renameGroup,icon:(0,n.jsx)(c.d,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{var i,n;null===(i=(n=e.props).closeGroupPopover)||void 0===i||i.call(n),(0,C.Q)({insertTarget:"mainWindow",type:"update",group:t})}}),(0,n.jsx)(l.X,{content:e.S.deleteGroup,icon:(0,n.jsx)(m,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{var t,i;null===(t=(i=e.props).closeGroupPopover)||void 0===t||t.call(i),e.handleDeleteGroupClick(!1)}}),(0,n.jsx)(l.X,{content:e.S.deleteGroupAndChatHistory,icon:(0,n.jsx)(v.X,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{var t,i;null===(t=(i=e.props).closeGroupPopover)||void 0===t||t.call(i),e.handleDeleteGroupClick(!0)}})]}),children:(0,n.jsx)(g.X,{size:16,color:"var(--theme-icon-tertiary)",style:{transform:"vertical"===u?"rotate(90deg)":"rotate(0deg)"}})})}),i&&(0,n.jsx)(x.n,{className:k.check,size:16,color:"var(--theme-icon-tertiary)"})]})})})},34896:function(e,t,i){i.d(t,{Q:function(){return g}});var n=i(71576),o=i(34491),s=i(13292),r=i(82005),a=i(92660),l=i(66084),c=i(52921),d=i(88882),h=i(92235),p=i(15851),u=i(46756);class m extends o.PN{get S(){return d.S.Global.modules.MainWindow.FavoriteGroup.FavoriteGroupAdd}onViewCreate(){if("update"===this.props.type){var e;this.value=String(null===(e=this.props.group)||void 0===e?void 0:e.name)}}onViewDestroy(){}async handleSubmit(){try{var e,t,i,n,o,s,r;this.loading=!0,"add"===this.props.type?u.y.createFavoriteGroup({name:this.value,order:-1,groupUid:h.m.genShortId()}):await u.y.updateFavoriteGroup({groupUid:String(null===(r=this.props.group)||void 0===r?void 0:r.uid),name:this.value}),null===(e=(t=this.props).onDisposed)||void 0===e||e.call(t),p.M.success("add"===this.props.type?this.S.createSuccess:this.S.updateSuccess),null===(i=(n=this.props).onSuccess)||void 0===i||i.call(n,this.value),null===(o=(s=this.props).onClose)||void 0===o||o.call(s)}catch(e){p.M.error(h.m.formatMonicaSdkError(e))}this.loading=!1}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"loading",!1),(0,l._)(this,"genLoading",!1),(0,l._)(this,"value","")}}(0,c.gn)([o.SB],m.prototype,"loading",void 0),(0,c.gn)([o.SB],m.prototype,"genLoading",void 0),(0,c.gn)([o.SB],m.prototype,"value",void 0),(0,c.gn)([o.Fl],m.prototype,"S",null);let v=o._Y.createComponent("FavoriteGroupAddDialog",m,e=>{let{insertTarget:t,onDisposed:i,onClose:o}=e.props;return(0,n.jsx)(s.N,{visible:!0,title:"add"===e.props.type?e.S.createTitle:e.S.updateTitle,fixed:"dialogRoot"===t,okLoading:e.loading,okDisabled:e.genLoading||!e.value,defaultValue:a.Q0,onOk:()=>{e.handleSubmit()},onCancel:()=>{null==i||i(),null==o||o()},inputProps:{value:e.value,onChange:t=>{e.value=t},disabled:e.genLoading,placeholder:e.S.desc,onEnterWithoutCtrl:()=>{e.handleSubmit()}}})}),g=r.t.createOpener(v)},97703:function(e,t,i){i.d(t,{S:function(){return m}});var n=i(71576),o=i(34491),s=i(38133),r=i(35093),a=i(66084),l=i(52921),c=i(88882),d=i(92235),h=i(15851),p=i(46756);class u extends o.PN{get S(){return c.S.Global.modules.MainWindow.FavoriteGroup.FavoriteGroupAddItem}onViewCreate(){}onViewDestroy(){}async handleCreateGroup(e){if(!e)return;if((null==e?void 0:e.trim().length)>=100){h.M.error(this.S.groupNameTooLong);return}let t={name:e,uid:d.m.genShortId(),order:-1};try{var i,n;let o=await p.y.createFavoriteGroup({name:e,order:-1,groupUid:t.uid});0===o.code&&h.M.success(this.S.createSuccess)&&(null===(i=(n=this.props).onCreateGroup)||void 0===i||i.call(n,t))}catch(e){h.M.error(d.m.formatErrorMsg(e))}}constructor(...e){super(...e),(0,a._)(this,"props",void 0),(0,a._)(this,"type","default")}}(0,l.gn)([o.SB],u.prototype,"type",void 0),(0,l.gn)([o.Fl],u.prototype,"S",null);let m=o._Y.createComponent("FavoriteGroupAddItem",u,e=>{let{onCreateGroup:t,...i}=e.props;return(0,n.jsx)(r.r,{...i,type:e.type,icon:(0,n.jsx)(s.o,{size:16,color:"var(--theme-icon-primary)"}),content:e.S.createGroup,onValueChange:t=>{var i;null===(i=e.handleCreateGroup)||void 0===i||i.call(e,t)},onTypeChange:t=>{e.type=t},onClick:t=>{t.stopPropagation(),"default"===e.type&&(e.type="input")},inputPlaceholder:e.S.placeholder})})},24487:function(e,t,i){let n;i.d(t,{N:function(){return eS}});var o=i(71576),s=i(34491),r=i(27534),a=i(32250),l=i(41884),c=i(78716),d=i.n(c),h=i(66084),p=i(52921),u=i(76469),m=i(92235),v=i(56607),g=i(31640),x=i(88882),f=i(58756),y=i(67519),C=i(73047),k=i(18245),w=i(33381),b=i(94223);let S=e=>new Promise(t=>setTimeout(()=>t(),e));class A{clearEventHandlers(){return this.eventHandlers={},this.nextEventHandlers={},!0}on(e,t){return this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t),t}onNext(e,t){return this.nextEventHandlers[e]=this.nextEventHandlers[e]||[],this.nextEventHandlers[e].push(t),t}off(e,t){let i=this.eventHandlers[e]||[];if(t){let n=i.indexOf(t);if(-1===n)throw Error('Could not turn off specified event listener for "'.concat(e,'": not found as a listener'));i.splice(n,1)}else delete this.eventHandlers[e];return!0}offNext(e,t){let i=this.nextEventHandlers[e]||[];if(t){let n=i.indexOf(t);if(-1===n)throw Error('Could not turn off specified next event listener for "'.concat(e,'": not found as a listener'));i.splice(n,1)}else delete this.nextEventHandlers[e];return!0}async waitForNext(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Date.now();for(this.onNext(e,e=>t=e);!t;){if(i&&Date.now()-n>i)return null;await S(1)}return t}dispatch(e,t){for(let i of[].concat(this.eventHandlers[e]||[]))i(t);for(let i of[].concat(this.nextEventHandlers[e]||[]))i(t);return delete this.nextEventHandlers[e],!0}constructor(){this.eventHandlers={},this.nextEventHandlers={}}}let B=globalThis.atob,E=globalThis.btoa;class I{static floatTo16BitPCM(e){let t=new ArrayBuffer(2*e.length),i=new DataView(t),n=0;for(let t=0;t<e.length;t++,n+=2){let o=Math.max(-1,Math.min(1,e[t]));i.setInt16(n,o<0?32768*o:32767*o,!0)}return t}static base64ToArrayBuffer(e){let t=B(e),i=t.length,n=new Uint8Array(i);for(let e=0;e<i;e++)n[e]=t.charCodeAt(e);return n.buffer}static arrayBufferToBase64(e){e instanceof Float32Array?e=this.floatTo16BitPCM(e):e instanceof Int16Array&&(e=e.buffer);let t="",i=new Uint8Array(e);for(let e=0;e<i.length;e+=32768){let n=i.subarray(e,e+32768);t+=String.fromCharCode.apply(null,n)}return E(t)}static mergeInt16Arrays(e,t){if(e instanceof ArrayBuffer&&(e=new Int16Array(e)),t instanceof ArrayBuffer&&(t=new Int16Array(t)),!(e instanceof Int16Array)||!(t instanceof Int16Array))throw Error("Both items must be Int16Array");let i=new Int16Array(e.length+t.length);for(let t=0;t<e.length;t++)i[t]=e[t];for(let n=0;n<t.length;n++)i[e.length+n]=t[n];return i}static generateId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",n=Array(t-e.length).fill(0).map(e=>i[Math.floor(Math.random()*i.length)]).join("");return"".concat(e).concat(n)}}class D extends A{isConnected(){return!!this.ws}log(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let n=new Date().toISOString(),o=["[Websocket/".concat(n,"]")].concat(t).map(e=>"object"==typeof e&&null!==e?JSON.stringify(e,null,2):e);return this.debug&&console.log(...o),!0}async connect(){let{model:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{model:"gpt-4o-realtime-preview-2024-10-01"};if(this.apiKey||this.url!==this.defaultUrl||console.warn('No apiKey provided for connection to "'.concat(this.url,'"')),this.isConnected())throw Error("Already connected");if(globalThis.document){this.apiKey&&console.warn("Warning: Connecting using API key in the browser, this is not recommended");let e=new globalThis.WebSocket("".concat(this.url,"?session_id=").concat(await b.X.getToken()));return e.addEventListener("message",e=>{let t=JSON.parse(e.data);this.receive(t.type,t)}),new Promise((t,i)=>{let n=()=>{this.disconnect(e),i(Error('Could not connect to "'.concat(this.url,'"')))};e.addEventListener("error",n),e.addEventListener("open",()=>{this.log('Connected to "'.concat(this.url,'"')),e.removeEventListener("error",n),e.addEventListener("error",()=>{this.disconnect(e),this.log('Error, disconnected from "'.concat(this.url,'"')),this.dispatch("close",{error:!0})}),e.addEventListener("close",()=>{this.disconnect(e),this.log('Disconnected from "'.concat(this.url,'"')),this.dispatch("close",{error:!1})}),this.ws=e,t(!0)})})}let t=new(await import("ws")).default("wss://api.openai.com/v1/realtime?model=gpt-4o-realtime-preview-2024-10-01",[],{finishRequest:e=>{e.setHeader("Authorization","Bearer ".concat(this.apiKey)),e.setHeader("OpenAI-Beta","realtime=v1"),e.end()}});return t.on("message",e=>{let t=JSON.parse(e.toString());this.receive(t.type,t)}),new Promise((e,i)=>{let n=()=>{this.disconnect(t),i(Error('Could not connect to "'.concat(this.url,'"')))};t.on("error",n),t.on("open",()=>{this.log('Connected to "'.concat(this.url,'"')),t.removeListener("error",n),t.on("error",()=>{this.disconnect(t),this.log('Error, disconnected from "'.concat(this.url,'"')),this.dispatch("close",{error:!0})}),t.on("close",()=>{this.disconnect(t),this.log('Disconnected from "'.concat(this.url,'"')),this.dispatch("close",{error:!1})}),this.ws=t,e(!0)})})}disconnect(e){if(!e||this.ws===e)return this.ws&&this.ws.close(),this.ws=null,!0}receive(e,t){return this.log("received:",e,t),this.dispatch("server.".concat(e),t),this.dispatch("server.*",t),!0}send(e,t){if(!this.isConnected())throw Error("RealtimeAPI is not connected");if("object"!=typeof(t=t||{}))throw Error("data must be an object");let i={event_id:I.generateId("evt_"),type:e,...t};return this.dispatch("client.".concat(e),i),this.dispatch("client.*",i),this.log("sent:",e,i),this.ws.send(JSON.stringify(i)),!0}constructor({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:i,debug:n}={}){if(super(),this.defaultUrl="wss://api.openai.com/v1/realtime",this.url=e||this.defaultUrl,this.apiKey=t||null,this.debug=!!n,this.ws=null,globalThis.document&&this.apiKey&&!i)throw Error('Can not provide API key in the browser without "dangerouslyAllowAPIKeyInBrowser" set to true')}}class j{clear(){return this.itemLookup={},this.items=[],this.responseLookup={},this.responses=[],this.queuedSpeechItems={},this.queuedTranscriptItems={},this.queuedInputAudio=null,!0}queueInputAudio(e){return this.queuedInputAudio=e,e}processEvent(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(!e.event_id)throw console.error(e),Error('Missing "event_id" on event');if(!e.type)throw console.error(e),Error('Missing "type" on event');let o=this.EventProcessors[e.type];if(!o)throw Error('Missing conversation event processor for "'.concat(e.type,'"'));return o.call(this,e,...i)}getItem(e){return this.itemLookup[e]||null}getItems(){return this.items.slice()}constructor(){(0,h._)(this,"defaultFrequency",24e3),(0,h._)(this,"EventProcessors",{"conversation.item.created":e=>{let{item:t}=e,i=JSON.parse(JSON.stringify(t));if(this.itemLookup[i.id]||(this.itemLookup[i.id]=i,this.items.push(i)),i.formatted={},i.formatted.audio=new Int16Array(0),i.formatted.text="",i.formatted.transcript="",this.queuedSpeechItems[i.id]&&(i.formatted.audio=this.queuedSpeechItems[i.id].audio,delete this.queuedSpeechItems[i.id]),i.content)for(let e of i.content.filter(e=>["text","input_text"].includes(e.type)))i.formatted.text+=e.text;return this.queuedTranscriptItems[i.id]&&(i.formatted.transcript=this.queuedTranscriptItems.transcript,delete this.queuedTranscriptItems[i.id]),"message"===i.type?"user"===i.role?(i.status="completed",this.queuedInputAudio&&(i.formatted.audio=this.queuedInputAudio,this.queuedInputAudio=null)):i.status="in_progress":"function_call"===i.type?(i.formatted.tool={type:"function",name:i.name,call_id:i.call_id,arguments:""},i.status="in_progress"):"function_call_output"===i.type&&(i.status="completed",i.formatted.output=i.output),{item:i,delta:null}},"conversation.item.truncated":e=>{let{item_id:t,audio_end_ms:i}=e,n=this.itemLookup[t];if(!n)throw Error('item.truncated: Item "'.concat(t,'" not found'));let o=Math.floor(i*this.defaultFrequency/1e3);return n.formatted.transcript="",n.formatted.audio=n.formatted.audio.slice(0,o),{item:n,delta:null}},"conversation.item.deleted":e=>{let{item_id:t}=e,i=this.itemLookup[t];if(!i)throw Error('item.deleted: Item "'.concat(t,'" not found'));delete this.itemLookup[i.id];let n=this.items.indexOf(i);return n>-1&&this.items.splice(n,1),{item:i,delta:null}},"conversation.item.input_audio_transcription.completed":e=>{let{item_id:t,content_index:i,transcript:n}=e,o=this.itemLookup[t],s=n||" ";return o?(o.content[i].transcript=n,o.formatted.transcript=s,{item:o,delta:{transcript:n}}):(this.queuedTranscriptItems[t]={transcript:s},{item:null,delta:null})},"input_audio_buffer.speech_started":e=>{let{item_id:t,audio_start_ms:i}=e;return this.queuedSpeechItems[t]={audio_start_ms:i},{item:null,delta:null}},"input_audio_buffer.speech_stopped":(e,t)=>{let{item_id:i,audio_end_ms:n}=e;this.queuedSpeechItems[i]||(this.queuedSpeechItems[i]={audio_start_ms:n});let o=this.queuedSpeechItems[i];if(o.audio_end_ms=n,t){let e=Math.floor(o.audio_start_ms*this.defaultFrequency/1e3),i=Math.floor(o.audio_end_ms*this.defaultFrequency/1e3);o.audio=t.slice(e,i)}return{item:null,delta:null}},"response.created":e=>{let{response:t}=e;return this.responseLookup[t.id]||(this.responseLookup[t.id]=t,this.responses.push(t)),{item:null,delta:null}},"response.output_item.added":e=>{var t;let{response_id:i,item:n}=e,o=this.responseLookup[i];if(!o)throw Error('response.output_item.added: Response "'.concat(i,'" not found'));return null==o||null===(t=o.output)||void 0===t||t.push(n.id),{item:null,delta:null}},"response.output_item.done":e=>{let{item:t}=e;if(!t)throw Error('response.output_item.done: Missing "item"');let i=this.itemLookup[t.id];if(!i)throw Error('response.output_item.done: Item "'.concat(t.id,'" not found'));return i.status=t.status,{item:i,delta:null}},"response.content_part.added":e=>{let{item_id:t,part:i}=e,n=this.itemLookup[t];if(!n)throw Error('response.content_part.added: Item "'.concat(t,'" not found'));return n.content.push(i),{item:n,delta:null}},"response.audio_transcript.delta":e=>{let{item_id:t,content_index:i,delta:n}=e,o=this.itemLookup[t];if(!o)throw Error('response.audio_transcript.delta: Item "'.concat(t,'" not found'));return o.content[i].transcript+=n,o.formatted.transcript+=n,{item:o,delta:{transcript:n}}},"response.audio.delta":e=>{let{item_id:t,content_index:i,delta:n}=e,o=this.itemLookup[t];if(!o)throw Error('response.audio.delta: Item "'.concat(t,'" not found'));let s=I.base64ToArrayBuffer(n),r=new Int16Array(s);return o.formatted.audio=I.mergeInt16Arrays(o.formatted.audio,r),{item:o,delta:{audio:r}}},"response.text.delta":e=>{let{item_id:t,content_index:i,delta:n}=e,o=this.itemLookup[t];if(!o)throw Error('response.text.delta: Item "'.concat(t,'" not found'));return o.content[i].text+=n,o.formatted.text+=n,{item:o,delta:{text:n}}},"response.function_call_arguments.delta":e=>{let{item_id:t,delta:i}=e,n=this.itemLookup[t];if(!n)throw Error('response.function_call_arguments.delta: Item "'.concat(t,'" not found'));return n.arguments+=i,n.formatted.tool.arguments+=i,{item:n,delta:{arguments:i}}}}),this.clear()}}class _ extends A{_resetConfig(){return this.sessionCreated=!1,this.tools={},this.sessionConfig=JSON.parse(JSON.stringify(this.defaultSessionConfig)),this.inputAudioBuffer=new Int16Array(0),!0}_addAPIEventHandlers(){var e=this;this.realtime.on("client.*",e=>{let t={time:new Date().toISOString(),source:"client",event:e};this.dispatch("realtime.event",t)}),this.realtime.on("server.*",e=>{let t={time:new Date().toISOString(),source:"server",event:e};this.dispatch("realtime.event",t)}),this.realtime.on("server.session.created",()=>this.sessionCreated=!0);let t=function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];try{let{item:i,delta:o}=e.conversation.processEvent(t,...n);return{item:i,delta:o}}catch(e){return{item:null,delta:null}}},i=function(i){for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];let{item:r,delta:a}=t(i,...o);return r&&e.dispatch("conversation.updated",{item:r,delta:a}),{item:r,delta:a}},n=async e=>{try{let t=JSON.parse(e.arguments),i=this.tools[e.name];if(!i)throw Error('Tool "'.concat(e.name,'" has not been added'));let n=await i.handler(t);this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:e.call_id,output:JSON.stringify(n)}})}catch(t){this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:e.call_id,output:JSON.stringify({error:t.message})}})}this.createResponse()};return this.realtime.on("server.response.created",t),this.realtime.on("server.response.output_item.added",t),this.realtime.on("server.response.content_part.added",t),this.realtime.on("server.input_audio_buffer.speech_started",e=>{t(e),this.dispatch("conversation.interrupted")}),this.realtime.on("server.input_audio_buffer.speech_stopped",e=>t(e,this.inputAudioBuffer)),this.realtime.on("server.conversation.item.created",e=>{let{item:t}=i(e);this.dispatch("conversation.item.appended",{item:t}),"completed"===t.status&&this.dispatch("conversation.item.completed",{item:t})}),this.realtime.on("server.conversation.item.truncated",i),this.realtime.on("server.conversation.item.deleted",i),this.realtime.on("server.conversation.item.input_audio_transcription.completed",i),this.realtime.on("server.response.audio_transcript.delta",i),this.realtime.on("server.response.audio.delta",i),this.realtime.on("server.response.text.delta",i),this.realtime.on("server.response.function_call_arguments.delta",i),this.realtime.on("server.response.output_item.done",async e=>{let{item:t}=i(e);"completed"===t.status&&this.dispatch("conversation.item.completed",{item:t}),t.formatted.tool&&n(t.formatted.tool)}),!0}isConnected(){return this.realtime.isConnected()}reset(){return this.disconnect(),this.clearEventHandlers(),this.realtime.clearEventHandlers(),this._resetConfig(),this._addAPIEventHandlers(),!0}async connect(){if(this.isConnected())throw Error("Already connected, use .disconnect() first");return await this.realtime.connect(),!0}async waitForSessionCreated(){if(!this.isConnected())throw Error("Not connected, use .connect() first");for(;!this.sessionCreated;)await new Promise(e=>setTimeout(()=>e(),1));return!0}disconnect(){this.sessionCreated=!1,this.realtime.isConnected()&&this.realtime.disconnect(),this.conversation.clear()}getTurnDetectionType(){var e;return(null===(e=this.sessionConfig.turn_detection)||void 0===e?void 0:e.type)||null}addTool(e,t){if(!(null==e?void 0:e.name))throw Error("Missing tool name in definition");let i=null==e?void 0:e.name;if(this.tools[i])throw Error('Tool "'.concat(i,'" already added. Please use .removeTool("').concat(i,'") before trying to add again.'));if("function"!=typeof t)throw Error('Tool "'.concat(i,'" handler must be a function'));return this.tools[i]={definition:e,handler:t},this.updateSession(),this.tools[i]}removeTool(e){if(!this.tools[e])throw Error('Tool "'.concat(e,'" does not exist, can not be removed.'));return delete this.tools[e],!0}deleteItem(e){return this.realtime.send("conversation.item.delete",{item_id:e}),!0}updateSession(){let{modalities:e,instructions:t,voice:i,input_audio_format:n,output_audio_format:o,input_audio_transcription:s,turn_detection:r,tools:a,tool_choice:l,temperature:c,max_response_output_tokens:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0!==e&&(this.sessionConfig.modalities=e),void 0!==t&&(this.sessionConfig.instructions=t),void 0!==i&&(this.sessionConfig.voice=i),void 0!==n&&(this.sessionConfig.input_audio_format=n),void 0!==o&&(this.sessionConfig.output_audio_format=o),void 0!==s&&(this.sessionConfig.input_audio_transcription=s),void 0!==r&&(this.sessionConfig.turn_detection=r),void 0!==a&&(this.sessionConfig.tools=a),void 0!==l&&(this.sessionConfig.tool_choice=l),void 0!==c&&(this.sessionConfig.temperature=c),void 0!==d&&(this.sessionConfig.max_response_output_tokens=d);let h=[].concat((a||[]).map(e=>{let t={type:"function",...e};if(this.tools[null==t?void 0:t.name])throw Error('Tool "'.concat(null==t?void 0:t.name,'" has already been defined'));return t}),Object.keys(this.tools).map(e=>({type:"function",...this.tools[e].definition}))),p={...this.sessionConfig};return p.tools=h,this.realtime.isConnected()&&this.realtime.send("session.update",{session:p}),!0}sendUserMessageContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){for(let t of e)"input_audio"===t.type&&(t.audio instanceof ArrayBuffer||t.audio instanceof Int16Array)&&(t.audio=I.arrayBufferToBase64(t.audio));this.realtime.send("conversation.item.create",{item:{type:"message",role:"user",content:e}})}return this.createResponse(),!0}appendInputAudio(e){return e.byteLength>0&&(this.realtime.send("input_audio_buffer.append",{audio:I.arrayBufferToBase64(e)}),this.inputAudioBuffer=I.mergeInt16Arrays(this.inputAudioBuffer,e)),!0}createResponse(){return null===this.getTurnDetectionType()&&this.inputAudioBuffer.byteLength>0&&(this.realtime.send("input_audio_buffer.commit"),this.conversation.queueInputAudio(this.inputAudioBuffer),this.inputAudioBuffer=new Int16Array(0)),this.realtime.send("response.create"),!0}cancelResponse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return this.realtime.send("response.cancel"),{item:null};if(e){let i=this.conversation.getItem(e);if(!i)throw Error('Could not find item "'.concat(e,'"'));if("message"!==i.type)throw Error('Can only cancelResponse messages with type "message"');if("assistant"!==i.role)throw Error('Can only cancelResponse messages with role "assistant"');this.realtime.send("response.cancel");let n=i.content.findIndex(e=>"audio"===e.type);if(-1===n)throw Error("Could not find audio on item to cancel");return this.realtime.send("conversation.item.truncate",{item_id:e,content_index:n,audio_end_ms:Math.floor(t/this.conversation.defaultFrequency*1e3)}),{item:i}}}async waitForNextItem(){let{item:e}=await this.waitForNext("conversation.item.appended");return{item:e}}async waitForNextCompletedItem(){let{item:e}=await this.waitForNext("conversation.item.completed");return{item:e}}constructor({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:i,debug:n}={}){super(),(0,h._)(this,"realtime",void 0),(0,h._)(this,"conversation",new j),(0,h._)(this,"sessionCreated",!1),this.defaultSessionConfig={modalities:["text","audio"],instructions:"",voice:"alloy",input_audio_format:"pcm16",output_audio_format:"pcm16",input_audio_transcription:{model:"whisper-1"},turn_detection:{type:"server_vad",threshold:.8,prefix_padding_ms:300,silence_duration_ms:500},tools:[],tool_choice:"auto",temperature:.8,max_response_output_tokens:4096},this.realtime=new D({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:i,debug:n}),this._resetConfig(),this._addAPIEventHandlers()}}var N=i(90180);let L=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],M=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],T=[],P=[];for(let e=1;e<=8;e++)for(let t=0;t<L.length;t++){let i=L[t];T.push(i/Math.pow(2,8-e)),P.push(M[t]+e)}let F=T.filter((e,t)=>T[t]>32&&T[t]<2e3),V=P.filter((e,t)=>T[t]>32&&T[t]<2e3);class G{static getFrequencies(e,t,i){let n,o,s,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"frequency",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-100,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-30;i||(i=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(i));let c=1/i.length*(t/2);if("music"===r||"voice"===r){let e="voice"===r?F:T,t=Array(e.length).fill(a);for(let n=0;n<i.length;n++){let o=n*c,s=i[n];for(let i=e.length-1;i>=0;i--)if(o>e[i]){t[i]=Math.max(t[i],s);break}}n=t,o="voice"===r?F:T,s="voice"===r?V:P}else s=(o=(n=Array.from(i)).map((e,t)=>c*t)).map(e=>"".concat(e.toFixed(2)," Hz"));let d=n.map(e=>Math.max(0,Math.min((e-a)/(l-a),1)));return{values:new Float32Array(d),frequencies:o,labels:s}}getFrequencies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frequency",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-30,n=null;if(this.audioBuffer&&this.fftResults.length){let e=Math.min(this.audio.currentTime/this.audio.duration*this.fftResults.length|0,this.fftResults.length-1);n=this.fftResults[e]}return G.getFrequencies(this.analyser,this.sampleRate,n,e,t,i)}async resumeIfSuspended(){return"suspended"===this.context.state&&await this.context.resume(),!0}constructor(e,t=null){if(this.fftResults=[],t){let{length:i,sampleRate:n}=t,o=new OfflineAudioContext({length:i,sampleRate:n}),s=o.createBufferSource();s.buffer=t;let r=o.createAnalyser();r.fftSize=8192,r.smoothingTimeConstant=.1,s.connect(r);let a=1/60,l=i/n,c=e=>{let t=a*e;t<l&&o.suspend(t).then(()=>{let t=new Float32Array(r.frequencyBinCount);r.getFloatFrequencyData(t),this.fftResults.push(t),c(e+1)}),1===e?o.startRendering():o.resume()};s.start(0),c(1),this.audio=e,this.context=o,this.analyser=r,this.sampleRate=n,this.audioBuffer=t}else{let t=new AudioContext,i=t.createMediaElementSource(e),n=t.createAnalyser();n.fftSize=8192,n.smoothingTimeConstant=.1,i.connect(n),n.connect(t.destination),this.audio=e,this.context=t,this.analyser=n,this.sampleRate=this.context.sampleRate,this.audioBuffer=null}}}class R{static floatTo16BitPCM(e){let t=new ArrayBuffer(2*e.length),i=new DataView(t),n=0;for(let t=0;t<e.length;t++,n+=2){let o=Math.max(-1,Math.min(1,e[t]));i.setInt16(n,o<0?32768*o:32767*o,!0)}return t}static mergeBuffers(e,t){let i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i.buffer}_packData(e,t){return[new Uint8Array([t,t>>8]),new Uint8Array([t,t>>8,t>>16,t>>24])][e]}pack(e,t){if(null==t?void 0:t.bitsPerSample){if(null==t?void 0:t.channels){if(!(null==t?void 0:t.data))throw Error('Missing "data"')}else throw Error('Missing "channels"')}else throw Error('Missing "bitsPerSample"');let{bitsPerSample:i,channels:n,data:o}=t,s=["RIFF",this._packData(1,52),"WAVE","fmt ",this._packData(1,16),this._packData(0,1),this._packData(0,n.length),this._packData(1,e),this._packData(1,e*n.length*i/8),this._packData(0,n.length*i/8),this._packData(0,i),"data",this._packData(1,n[0].length*n.length*i/8),o],r=new Blob(s,{type:"audio/mpeg"}),a=URL.createObjectURL(r);return{blob:r,url:a,channelCount:n.length,sampleRate:e,duration:o.byteLength/(n.length*e*2)}}}let U=new Blob(["\nclass AudioProcessor extends AudioWorkletProcessor {\n\n  constructor() {\n    super();\n    this.port.onmessage = this.receive.bind(this);\n    this.initialize();\n  }\n\n  initialize() {\n    this.foundAudio = false;\n    this.recording = false;\n    this.chunks = [];\n  }\n\n  /**\n   * Concatenates sampled chunks into channels\n   * Format is chunk[Left[], Right[]]\n   */\n  readChannelData(chunks, channel = -1, maxChannels = 9) {\n    let channelLimit;\n    if (channel !== -1) {\n      if (chunks[0] && chunks[0].length - 1 < channel) {\n        throw new Error(\n          `Channel ${channel} out of range: max ${chunks[0].length}`\n        );\n      }\n      channelLimit = channel + 1;\n    } else {\n      channel = 0;\n      channelLimit = Math.min(chunks[0] ? chunks[0].length : 1, maxChannels);\n    }\n    const channels = [];\n    for (let n = channel; n < channelLimit; n++) {\n      const length = chunks.reduce((sum, chunk) => {\n        return sum + chunk[n].length;\n      }, 0);\n      const buffers = chunks.map((chunk) => chunk[n]);\n      const result = new Float32Array(length);\n      let offset = 0;\n      for (let i = 0; i < buffers.length; i++) {\n        result.set(buffers[i], offset);\n        offset += buffers[i].length;\n      }\n      channels[n] = result;\n    }\n    return channels;\n  }\n\n  /**\n   * Combines parallel audio data into correct format,\n   * channels[Left[], Right[]] to float32Array[LRLRLRLR...]\n   */\n  formatAudioData(channels) {\n    if (channels.length === 1) {\n      // Simple case is only one channel\n      const float32Array = channels[0].slice();\n      const meanValues = channels[0].slice();\n      return { float32Array, meanValues };\n    } else {\n      const float32Array = new Float32Array(\n        channels[0].length * channels.length\n      );\n      const meanValues = new Float32Array(channels[0].length);\n      for (let i = 0; i < channels[0].length; i++) {\n        const offset = i * channels.length;\n        let meanValue = 0;\n        for (let n = 0; n < channels.length; n++) {\n          float32Array[offset + n] = channels[n][i];\n          meanValue += channels[n][i];\n        }\n        meanValues[i] = meanValue / channels.length;\n      }\n      return { float32Array, meanValues };\n    }\n  }\n\n  /**\n   * Converts 32-bit float data to 16-bit integers\n   */\n  floatTo16BitPCM(float32Array) {\n    const buffer = new ArrayBuffer(float32Array.length * 2);\n    const view = new DataView(buffer);\n    let offset = 0;\n    for (let i = 0; i < float32Array.length; i++, offset += 2) {\n      let s = Math.max(-1, Math.min(1, float32Array[i]));\n      view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n    }\n    return buffer;\n  }\n\n  /**\n   * Retrieves the most recent amplitude values from the audio stream\n   * @param {number} channel\n   */\n  getValues(channel = -1) {\n    const channels = this.readChannelData(this.chunks, channel);\n    const { meanValues } = this.formatAudioData(channels);\n    return { meanValues, channels };\n  }\n\n  /**\n   * Exports chunks as an audio/wav file\n   */\n  export() {\n    const channels = this.readChannelData(this.chunks);\n    const { float32Array, meanValues } = this.formatAudioData(channels);\n    const audioData = this.floatTo16BitPCM(float32Array);\n    return {\n      meanValues: meanValues,\n      audio: {\n        bitsPerSample: 16,\n        channels: channels,\n        data: audioData,\n      },\n    };\n  }\n\n  receive(e) {\n    const { event, id } = e.data;\n    let receiptData = {};\n    switch (event) {\n      case 'start':\n        this.recording = true;\n        break;\n      case 'stop':\n        this.recording = false;\n        break;\n      case 'clear':\n        this.initialize();\n        break;\n      case 'export':\n        receiptData = this.export();\n        break;\n      case 'read':\n        receiptData = this.getValues();\n        break;\n      default:\n        break;\n    }\n    // Always send back receipt\n    this.port.postMessage({ event: 'receipt', id, data: receiptData });\n  }\n\n  sendChunk(chunk) {\n    const channels = this.readChannelData([chunk]);\n    const { float32Array, meanValues } = this.formatAudioData(channels);\n    const rawAudioData = this.floatTo16BitPCM(float32Array);\n    const monoAudioData = this.floatTo16BitPCM(meanValues);\n    this.port.postMessage({\n      event: 'chunk',\n      data: {\n        mono: monoAudioData,\n        raw: rawAudioData,\n      },\n    });\n  }\n\n  process(inputList, outputList, parameters) {\n    // Copy input to output (e.g. speakers)\n    // Note that this creates choppy sounds with Mac products\n    const sourceLimit = Math.min(inputList.length, outputList.length);\n    for (let inputNum = 0; inputNum < sourceLimit; inputNum++) {\n      const input = inputList[inputNum];\n      const output = outputList[inputNum];\n      const channelCount = Math.min(input.length, output.length);\n      for (let channelNum = 0; channelNum < channelCount; channelNum++) {\n        input[channelNum].forEach((sample, i) => {\n          output[channelNum][i] = sample;\n        });\n      }\n    }\n    const inputs = inputList[0];\n    // There's latency at the beginning of a stream before recording starts\n    // Make sure we actually receive audio data before we start storing chunks\n    let sliceIndex = 0;\n    if (!this.foundAudio) {\n      for (const channel of inputs) {\n        sliceIndex = 0; // reset for each channel\n        if (this.foundAudio) {\n          break;\n        }\n        if (channel) {\n          for (const value of channel) {\n            if (value !== 0) {\n              // find only one non-zero entry in any channel\n              this.foundAudio = true;\n              break;\n            } else {\n              sliceIndex++;\n            }\n          }\n        }\n      }\n    }\n    if (inputs && inputs[0] && this.foundAudio && this.recording) {\n      // We need to copy the TypedArray, because the `process`\n      // internals will reuse the same buffer to hold each input\n      const chunk = inputs.map((input) => input.slice(sliceIndex));\n      this.chunks.push(chunk);\n      this.sendChunk(chunk);\n    }\n    return true;\n  }\n}\n\nregisterProcessor('audio_processor', AudioProcessor);\n"],{type:"application/javascript"}),O=URL.createObjectURL(U);class H{static async decode(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:44100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,s=new AudioContext({sampleRate:n});if(e instanceof Blob){if(-1!==o)throw Error('Can not specify "fromSampleRate" when reading from Blob');i=e,t=await i.arrayBuffer()}else if(e instanceof ArrayBuffer){if(-1!==o)throw Error('Can not specify "fromSampleRate" when reading from ArrayBuffer');t=e,i=new Blob([t],{type:"audio/wav"})}else{let n,s;if(e instanceof Int16Array){s=e,n=new Float32Array(e.length);for(let t=0;t<e.length;t++)n[t]=e[t]/32768}else if(e instanceof Float32Array)n=e;else if(e instanceof Array)n=new Float32Array(e);else throw Error('"audioData" must be one of: Blob, Float32Arrray, Int16Array, ArrayBuffer, Array<number>');if(-1===o)throw Error('Must specify "fromSampleRate" when reading from Float32Array, In16Array or Array');if(o<3e3)throw Error('Minimum "fromSampleRate" is 3000 (3kHz)');s||(s=R.floatTo16BitPCM(n));let r={bitsPerSample:16,channels:[n],data:s};i=new R().pack(o,r).blob,t=await i.arrayBuffer()}let r=await s.decodeAudioData(t),a=r.getChannelData(0),l=URL.createObjectURL(i);return{blob:i,url:l,values:a,audioBuffer:r}}log(){return this.debug&&this.log(...arguments),!0}getSampleRate(){return this.sampleRate}getStatus(){return this.processor?this.recording?"recording":"paused":"ended"}async _event(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(i=i||this.processor))throw Error("Can not send events without recording first");let n={event:e,id:this._lastEventId++,data:t};i.port.postMessage(n);let o=new Date().valueOf();for(;!this.eventReceipts[n.id];){if(new Date().valueOf()-o>this.eventTimeout)throw Error('Timeout waiting for "'.concat(e,'" event'));await new Promise(e=>setTimeout(()=>e(!0),1))}let s=this.eventReceipts[n.id];return delete this.eventReceipts[n.id],s}async begin(e){if(this.processor)throw Error("Already connected: please call .end() to start a new session");if(!navigator.mediaDevices||!("getUserMedia"in navigator.mediaDevices))throw Error("Could not request user media");try{let t={audio:!0};e&&(t.audio={deviceId:{exact:e}}),this.stream=await navigator.mediaDevices.getUserMedia(t)}catch(e){throw Error("Could not start media stream")}let t=new AudioContext({sampleRate:this.sampleRate}),i=t.createMediaStreamSource(this.stream);try{await t.audioWorklet.addModule(this.scriptSrc)}catch(e){throw console.error(e),Error("Could not add audioWorklet module: ".concat(this.scriptSrc))}let n=new AudioWorkletNode(t,"audio_processor");n.port.onmessage=e=>{let{event:t,id:i,data:n}=e.data;if("receipt"===t)this.eventReceipts[i]=n;else if("chunk"===t){if(this._chunkProcessorSize){let e=this._chunkProcessorBuffer;this._chunkProcessorBuffer={raw:R.mergeBuffers(e.raw,n.raw),mono:R.mergeBuffers(e.mono,n.mono)},this._chunkProcessorBuffer.mono.byteLength>=this._chunkProcessorSize&&(this._chunkProcessor(this._chunkProcessorBuffer),this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)})}else this._chunkProcessor(n)}};let o=i.connect(n),s=t.createAnalyser();return s.fftSize=8192,s.smoothingTimeConstant=.1,o.connect(s),this.outputToSpeakers&&(console.warn("Warning: Output to speakers may affect sound quality,\nespecially due to system audio feedback preventative measures.\nuse only for debugging"),s.connect(t.destination)),this.source=i,this.node=o,this.analyser=s,this.processor=n,!0}getFrequencies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frequency",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-30;if(!this.processor)throw Error("Session ended: please call .begin() first");return G.getFrequencies(this.analyser,this.sampleRate,null,e,t,i)}async pause(){if(this.processor){if(!this.recording)throw Error("Already paused: please call .record() first")}else throw Error("Session ended: please call .begin() first");return this._chunkProcessorBuffer.raw.byteLength&&this._chunkProcessor(this._chunkProcessorBuffer),this.log("Pausing ..."),await this._event("stop"),this.recording=!1,!0}async record(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8192;if(this.processor){if(this.recording)throw Error("Already recording: please call .pause() first");if("function"!=typeof e)throw Error("chunkProcessor must be a function")}else throw Error("Session ended: please call .begin() first");return this._chunkProcessor=e,this._chunkProcessorSize=t,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)},this.log("Recording ..."),await this._event("start"),this.recording=!0,!0}async clear(){if(!this.processor)throw Error("Session ended: please call .begin() first");return await this._event("clear"),!0}async read(){if(!this.processor)throw Error("Session ended: please call .begin() first");return this.log("Reading ..."),await this._event("read")}async end(){if(!this.processor)throw Error("Session ended: please call .begin() first");let e=this.processor;this.log("Stopping ..."),await this._event("stop"),this.recording=!1,this.stream.getTracks().forEach(e=>e.stop()),this.log("Exporting ...");let t=await this._event("export",{},e);return this.processor.disconnect(),this.source.disconnect(),this.node.disconnect(),this.analyser.disconnect(),this.stream=null,this.processor=null,this.source=null,this.node=null,new R().pack(this.sampleRate,t.audio)}constructor({sampleRate:e=44100,outputToSpeakers:t=!1,debug:i=!1}={}){(0,h._)(this,"recording",!1),(0,h._)(this,"processor",null),(0,h._)(this,"sampleRate",44100),(0,h._)(this,"_chunkProcessor",()=>{}),this.scriptSrc=O,this.sampleRate=e,this.outputToSpeakers=t,this.debug=!!i,this.stream=null,this.source=null,this.node=null,this._lastEventId=0,this.eventReceipts={},this.eventTimeout=5e3,this._chunkProcessorSize=void 0,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)},(0,C.rC)(this)}}let W=new Blob(["\nclass StreamProcessor extends AudioWorkletProcessor {\n  constructor() {\n    super();\n    this.hasStarted = false;\n    this.hasInterrupted = false;\n    this.outputBuffers = [];\n    this.bufferLength = 128;\n    this.write = { buffer: new Float32Array(this.bufferLength), trackId: null };\n    this.writeOffset = 0;\n    this.trackSampleOffsets = {};\n    this.port.onmessage = (event) => {\n      if (event.data) {\n        const payload = event.data;\n        if (payload.event === 'write') {\n          const int16Array = payload.buffer;\n          const float32Array = new Float32Array(int16Array.length);\n          for (let i = 0; i < int16Array.length; i++) {\n            float32Array[i] = int16Array[i] / 0x8000; // Convert Int16 to Float32\n          }\n          this.writeData(float32Array, payload.trackId);\n        } else if (\n          payload.event === 'offset' ||\n          payload.event === 'interrupt'\n        ) {\n          const requestId = payload.requestId;\n          const trackId = this.write.trackId;\n          const offset = this.trackSampleOffsets[trackId] || 0;\n          this.port.postMessage({\n            event: 'offset',\n            requestId,\n            trackId,\n            offset,\n          });\n          if (payload.event === 'interrupt') {\n            this.hasInterrupted = true;\n          }\n        } else {\n          throw new Error(`Unhandled event \"${payload.event}\"`);\n        }\n      }\n    };\n  }\n\n  writeData(float32Array, trackId = null) {\n    let { buffer } = this.write;\n    let offset = this.writeOffset;\n    for (let i = 0; i < float32Array.length; i++) {\n      buffer[offset++] = float32Array[i];\n      if (offset >= buffer.length) {\n        this.outputBuffers.push(this.write);\n        this.write = { buffer: new Float32Array(this.bufferLength), trackId };\n        buffer = this.write.buffer;\n        offset = 0;\n      }\n    }\n    this.writeOffset = offset;\n    return true;\n  }\n\n  process(inputs, outputs, parameters) {\n    const output = outputs[0];\n    const outputChannelData = output[0];\n    const outputBuffers = this.outputBuffers;\n    if (this.hasInterrupted) {\n      this.port.postMessage({ event: 'stop' });\n      return false;\n    } else if (outputBuffers.length) {\n      this.hasStarted = true;\n      const { buffer, trackId } = outputBuffers.shift();\n      for (let i = 0; i < outputChannelData.length; i++) {\n        outputChannelData[i] = buffer[i] || 0;\n      }\n      if (trackId) {\n        this.trackSampleOffsets[trackId] =\n          this.trackSampleOffsets[trackId] || 0;\n        this.trackSampleOffsets[trackId] += buffer.length;\n      }\n      return true;\n    } else if (this.hasStarted) {\n      this.port.postMessage({ event: 'stop' });\n      return false;\n    } else {\n      return true;\n    }\n  }\n}\n\nregisterProcessor('stream_processor', StreamProcessor);\n"],{type:"application/javascript"}),z=URL.createObjectURL(W);class q{async connect(){this.context=new AudioContext({sampleRate:this.sampleRate}),"suspended"===this.context.state&&await this.context.resume();try{await this.context.audioWorklet.addModule(this.scriptSrc)}catch(e){throw console.error(e),Error("Could not add audioWorklet module: ".concat(this.scriptSrc))}let e=this.context.createAnalyser();return e.fftSize=8192,e.smoothingTimeConstant=.1,this.analyser=e,!0}getFrequencies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frequency",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-30;if(!this.analyser)throw Error("Not connected, please call .connect() first");return G.getFrequencies(this.analyser,this.sampleRate,null,e,t,i)}_start(){let e=new AudioWorkletNode(this.context,"stream_processor");return e.connect(this.context.destination),e.port.onmessage=t=>{let{event:i}=t.data;if("stop"===i)e.disconnect(),this.stream=null;else if("offset"===i){let{requestId:e,trackId:i,offset:n}=t.data,o=n/this.sampleRate;this.trackSampleOffsets[e]={trackId:i,offset:n,currentTime:o}}},this.analyser.disconnect(),e.connect(this.analyser),this.stream=e,!0}add16BitPCM(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if("string"!=typeof i)throw Error("trackId must be a string");if(!this.interruptedTrackIds[i]){if(this.stream||this._start(),e instanceof Int16Array)t=e;else if(e instanceof ArrayBuffer)t=new Int16Array(e);else throw Error("argument must be Int16Array or ArrayBuffer");return this.stream.port.postMessage({event:"write",buffer:t,trackId:i}),t}}async getTrackSampleOffset(){let e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.stream)return null;let i=crypto.randomUUID();for(this.stream.port.postMessage({event:t?"interrupt":"offset",requestId:i});!e;)e=this.trackSampleOffsets[i],await new Promise(e=>setTimeout(()=>e(),1));let{trackId:n}=e;return t&&n&&(this.interruptedTrackIds[n]=!0),e}async interrupt(){return this.getTrackSampleOffset(!0)}constructor({sampleRate:e=44100}={}){(0,h._)(this,"context",null),(0,h._)(this,"analyser",null),(0,C.rC)(this),this.scriptSrc=z,this.sampleRate=e,this.stream=null,this.trackSampleOffsets={},this.interruptedTrackIds={}}}class Y extends u.v{get showSceneSelector(){return"empty"===this.drawerType?"idle"===this.connectStatus:"sceneSelector"===this.drawerType}async connect(){var e,t;if("standard"!==this.currentScene){let{finallyCanUsed:e}=k.K.getUsageInfo("credits");if(w.userController.isFreeUser||e<=0){this.drawerType="credits";return}}this.connectStatus="connecting";let i=m.m.genId();if(this.connectId=i,!await this.preCheckPermission()){this.connectStatus="permissionError";return}try{this.client=new _({url:"standard"===this.currentScene?null===(e=v.o.envvars)||void 0===e?void 0:e.realtimeApiHostV2:null===(t=v.o.envvars)||void 0===t?void 0:t.realtimeApiHost}),this.wavRecorder.sampleRate="standard"===this.currentScene?16e3:24e3,this.addListener(),await Promise.all([this.client.connect(),this.wavRecorder.begin(),this.wavStreamPlayer.connect()]),await Promise.race([new Promise((e,t)=>setTimeout(t,4e3)),this.client.waitForSessionCreated()])}catch(e){this.connectStatus="connectError",null===this||void 0===this||this.disconnect();return}if(this.connectId===i){if("connecting"!==this.connectStatus){this.disconnect();return}this.connectStatus="connected",this.loopHeartbeat(),this.loopFrequencies(),this.client.realtime.send("custom.session.init",{locale:"auto"===N.A.finalChatRespondLanguage?g.q.getComposeLanguageByLocale(x.a.locale)||"English":N.A.finalChatRespondLanguage,scene_id:this.currentScene})}}destroy(){this.disconnect(),this.currentScene="standard",this.drawerType="empty",this.connectStatus="idle"}disconnect(){var e,t;let i=(null===(e=this.client)||void 0===e?void 0:e.conversation.getItems().filter(e=>{var t,i,n,o;return(null===(i=e.content)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.type)!=="input_text"&&(null===(o=e.content)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.type)!=="text"&&("user"===e.role||"assistant"===e.role)}).map(e=>{var t,i,n,o;return{id:e.id,role:e.role,formatted:{transcript:(0,y.Z)(e.formatted.transcript||(null===(i=e.content)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.transcript)||(null===(o=e.content)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.text))}}}))||[];b.X.addRealtimeItemsToChat({realtimeItems:i}),clearTimeout(this.loopHeartbeatId),clearTimeout(this.loopFrequenciesId),this.connectStatus="connectError"===this.connectStatus?"connectError":"connectClose",this.aiSpeaking=!1,this.userSpeaking=!1,null===(t=this.client)||void 0===t||t.disconnect(),this.client=null,this.wavRecorder.end().catch(e=>{console.error(e)}),this.wavStreamPlayer.interrupt().catch(e=>{console.error(e)}),this.onDisconnect()}async interrupt(){let e=await this.wavStreamPlayer.interrupt();if(null==e?void 0:e.trackId){var t;let{trackId:i,offset:n}=e;null===(t=this.client)||void 0===t||t.cancelResponse(i,n)}}async updateScene(){var e;null===(e=this.client)||void 0===e||e.realtime.send("custom.session.init",{locale:"auto"===N.A.finalChatRespondLanguage?g.q.getComposeLanguageByLocale(x.a.locale)||"English":N.A.finalChatRespondLanguage,scene_id:this.currentScene})}async loopFrequencies(){var e;clearTimeout(this.loopFrequenciesId),this.aiSpeaking=null!==(e=this.wavStreamPlayer)&&void 0!==e&&!!e.analyser&&this.wavStreamPlayer.getFrequencies("voice").values.some(Boolean),this.loopFrequenciesId=setTimeout(this.loopFrequencies,100)}loopHeartbeat(){var e;clearTimeout(this.loopHeartbeatId);let t=this.connectId;new Promise((e,t)=>{this.heartbeatResponse=e,setTimeout(t,3e3)}).then(()=>{this.loopHeartbeatId=setTimeout(this.loopHeartbeat,3e4)}).catch(()=>{t===this.connectId&&(this.connectStatus="connectError",(null===this||void 0===this?void 0:this.disconnect)&&(null===this||void 0===this||this.disconnect()),console.error("heartbeat failed"))}),null===(e=this.client)||void 0===e||e.updateSession()}async preCheckPermission(){if(v.o.isDesktop&&"OSX"===m.m.getOsType()&&!await f.y.getService().askPermission())return!1;try{let e=await navigator.permissions.query({name:"microphone"});if("denied"===e.state)return!1;if("granted"===e.state)return!0;return await navigator.mediaDevices.getUserMedia({audio:!0}),!1}catch(e){return!1}}addListener(){var e=this;this.client&&(this.client.realtime.on("server.session.updated",()=>{this.heartbeatResponse(void 0)}),this.client.realtime.on("server.custom.session.init_finish",async()=>{this.userSpeaking=!0,this.onConnect(),await this.wavRecorder.record(e=>{var t;if("connected"!==this.connectStatus){this.disconnect();return}null===(t=this.client)||void 0===t||t.appendInputAudio(e.mono)})}),this.client.realtime.on("server.custom.error",e=>{let{code:t}=e;402===t&&(this.drawerType="credits",this.disconnect())}),this.client.realtime.on("close",function(){let{error:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:!1};console.log("server close connection"),"connected"===e.connectStatus&&(e.connectStatus=t?"connectError":"connectClose",e.disconnect())}),this.client.on("error",e=>{console.error(e)}),this.client.on("conversation.interrupted",async()=>{this.interrupt()}),this.client.on("conversation.updated",async e=>{let{item:t,delta:i}=e;(null==i?void 0:i.audio)&&this.wavStreamPlayer.add16BitPCM(i.audio,t.id)}))}constructor(){super(),(0,h._)(this,"aiSpeaking",!1),(0,h._)(this,"userSpeaking",!1),(0,h._)(this,"currentScene","standard"),(0,h._)(this,"connectStatus","idle"),(0,h._)(this,"drawerType","empty"),(0,h._)(this,"client",null),(0,h._)(this,"onConnect",()=>{}),(0,h._)(this,"onDisconnect",()=>{}),(0,h._)(this,"connectId",""),(0,h._)(this,"wavRecorder",new H({sampleRate:24e3})),(0,h._)(this,"wavStreamPlayer",new q({sampleRate:24e3})),(0,h._)(this,"loopHeartbeatId",0),(0,h._)(this,"loopFrequenciesId",0),(0,h._)(this,"heartbeatResponse",e=>{}),(0,C.rC)(this)}}(0,p.gn)([s.SB],Y.prototype,"aiSpeaking",void 0),(0,p.gn)([s.SB],Y.prototype,"userSpeaking",void 0),(0,p.gn)([s.SB],Y.prototype,"currentScene",void 0),(0,p.gn)([s.SB],Y.prototype,"connectStatus",void 0),(0,p.gn)([s.SB],Y.prototype,"drawerType",void 0),(0,p.gn)([C.Fl],Y.prototype,"showSceneSelector",null);let Z=new Y;var J=i(46731),K=i(39502),X=i(4461),Q={src:"https://assets.monica.im/home-web/_next/static/media/creditsBanner.d26cf71c.png",height:413,width:518,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAASFBMVEVMaXH//x3/vDf/xVH+zm39v1CXeP/zgk1hK//bk47RkIrXtLyGXu6piv3CkLDAmei/htaQZ/Ofeue3nP//+Lj23MLFnvf/8I8YWeeXAAAAE3RSTlMAEYVL0Hr4Bhcsrfls9+TVybeQoqiKogAAAAlwSFlzAAAsSwAALEsBpT2WqQAAADZJREFUeJwVxlEWgBAQQNFHwxgUpbL/nTp+7rkAqG6d8yIHUJ/rewOkOGKZO+f4szdId+uGsgAdegFhj5v4PAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6},$=i(95782),ee=i(5857),et={creditsWrapper:"credits-wrapper--CrniP",credits:"credits--gkvqy",header:"header--Qif5T",left:"left--ddUub",content:"content--V2oWC",title:"title--GEtvV",descWrapper:"desc-wrapper--UxVt0",desc:"desc--bKwhQ",highlightText:"highlight-text--ld1jF"};class ei extends s.PN{get S(){return x.S.Global.modules.Realtime.credits}onViewCreate(){}onViewDestroy(){}close(){Z.drawerType="empty"}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}(0,p.gn)([s.Fl],ei.prototype,"S",null);let en=s._Y.createComponent("Credits",ei,e=>{let t;let i=k.K.getUsageInfo("credits").displayFinallyCanUsed/300;return t=i===Math.floor(i)?(0,o.jsx)($.Z,{S:0===i?e.S.aboutTimeSeconds:e.S.aboutTimeMinutes,components:{minutes:()=>(0,o.jsx)("span",{className:et.highlightText,children:i}),seconds:()=>(0,o.jsx)("span",{className:et.highlightText,children:i})}}):0===Math.floor(i)?(0,o.jsx)($.Z,{S:e.S.aboutTimeSeconds,components:{seconds:()=>(0,o.jsx)("span",{className:et.highlightText,children:Math.floor(60*i)})}}):(0,o.jsx)($.Z,{S:e.S.aboutTimeMinutesSeconds,components:{minutes:()=>(0,o.jsx)("span",{className:et.highlightText,children:Math.floor(i)}),seconds:()=>(0,o.jsx)("span",{className:et.highlightText,children:Math.floor((i-Math.floor(i))*60)})}}),(0,o.jsx)("div",{"data-draggable":"false",className:et.creditsWrapper,onClick:t=>{t.stopPropagation(),e.close()},children:(0,o.jsxs)("div",{className:et.credits,onClick:e=>{e.stopPropagation()},children:[(0,o.jsxs)("div",{className:et.header,children:[(0,o.jsx)("div",{className:et.left}),(0,o.jsx)(r.h,{title:"",color:"var(--theme-icon-tertiary)",iconName:"close",iconSize:16,onClick:()=>{e.close()}})]}),(0,o.jsxs)("div",{className:et.content,children:[(0,o.jsx)("img",{src:(0,X.Q)(Q),style:{width:120,margin:"0 auto 12px"}}),(0,o.jsx)("div",{className:et.title,children:e.S.title}),(0,o.jsx)("div",{className:et.descWrapper,children:w.userController.isFreeUser?(0,o.jsx)("div",{className:et.desc,children:e.S.desc}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:et.desc,children:(0,o.jsx)($.Z,{S:e.S.remain,components:{a:()=>(0,o.jsx)("span",{style:{color:"var(--theme-text-brand)"},children:k.K.getUsageInfo("credits").displayFinallyCanUsed})}})}),(0,o.jsx)("div",{className:et.desc,children:t})]})})]}),!w.userController.isUnlimitedUser&&(0,o.jsx)(ee.z,{type:"primary",size:"large",style:{marginBottom:12},onClick:()=>{w.userController.upgrade("realtime_upgrade_desktop"),e.close()},children:e.S.upgradeNow}),w.userController.isVipUser&&(0,o.jsx)(ee.z,{type:w.userController.isUnlimitedUser?"primary":"brandOutline",size:"large",onClick:()=>{window.open(m.m.getCreditsPageUrl({source:"realtime_credits_desktop"})),e.close()},children:e.S.buyExtra})]})})});var eo={realtime:"realtime--TtwL6",content:"content--gqDgq",top:"top--YKexa",creditButton:"credit-button--eN6MH",duration:"duration--g2OAu",aiIndicator:"ai-indicator--Rt9uB",circleAnimation:"circle-animation--GVz8A",speaking:"speaking--dR2B0",visible:"visible--YkljU",aiSpeakingAnimation:"ai-speaking-animation--PBXAN",sceneButton:"scene-button--HIjqU",audioStatus:"audio-status--iwyU6",userSpeakingAnimation:"user-speaking-animation--JdxR1",endButton:"end-button--hhvDv"};i(75087);var es=i(73361),er=i(38172);class ea{onConnectionSuccess(){this.currentState="connected"}playConnecting(){this.currentState="connecting",this.animation.goToAndStop(0,!0),this.animation.play()}playMainLoop(){this.currentState="mainLoop",this.animation.goToAndStop(this.mainLoopStartFrame,!0),this.animation.play()}constructor(){(0,h._)(this,"animation",void 0),(0,h._)(this,"connectingEndFrame",59),(0,h._)(this,"connectedEndFrame",119),(0,h._)(this,"mainLoopStartFrame",120),(0,h._)(this,"currentState","idle"),(0,h._)(this,"setAnimation",e=>{this.animation=e,this.playConnecting(),this.animation.removeEventListener("enterFrame",this.onEnterFrame),this.animation.addEventListener("enterFrame",this.onEnterFrame)}),(0,h._)(this,"onEnterFrame",()=>{let e=Math.floor(this.animation.currentFrame);switch(this.currentState){case"connecting":e>=this.connectingEndFrame&&(this.animation.goToAndStop(0,!0),this.animation.play());break;case"connected":e>=this.connectedEndFrame&&this.playMainLoop();break;case"mainLoop":e>=this.animation.totalFrames-1&&(this.animation.goToAndStop(this.mainLoopStartFrame,!0),this.animation.play())}})}}class el{onSpeak(){this.playSpeaking()}playWaiting(){this.currentState="waiting",this.animation.goToAndPlay(0,!0)}playSpeaking(){this.currentState="speaking",this.animation.goToAndPlay(this.mainLoopStartFrame,!0)}constructor(){(0,h._)(this,"animation",void 0),(0,h._)(this,"waitingEndFrame",119),(0,h._)(this,"mainLoopStartFrame",120),(0,h._)(this,"currentState","idle"),(0,h._)(this,"setAnimation",e=>{this.animation=e,this.playWaiting(),this.animation.removeEventListener("enterFrame",this.onEnterFrame),this.animation.addEventListener("enterFrame",this.onEnterFrame)}),(0,h._)(this,"onEnterFrame",()=>{let e=Math.floor(this.animation.currentFrame);switch(this.currentState){case"waiting":e>=this.waitingEndFrame&&this.animation.goToAndPlay(0,!0);break;case"speaking":e>=this.animation.totalFrames-1&&this.animation.goToAndPlay(this.mainLoopStartFrame,!0)}})}}class ec extends s.PN{get S(){return x.S.Global.modules.Realtime}get formattedDuration(){let e=Math.floor(this.duration/1e3);return e?this.formatSeconds(e):null}get sceneButtonLabel(){return({standard:this.S.scenes.standard,advanced:this.S.scenes.advanced,VentingCompanion:this.S.scenes.vendingCompanion,EnglishChatPartner:this.S.scenes.englishTrainer,MockInterview:this.S.scenes.interviewer,SimulatedDebate:this.S.scenes.simulateDebate})[Z.currentScene]}get rootActionType(){return"empty"!==Z.drawerType?null:Z.aiSpeaking?"interrupt":"connecting"!==Z.connectStatus&&"connected"!==Z.connectStatus?"reConnect":null}onViewCreate(){w.userController.fetchVipStatus(),es.gM.updateUsageInfos(),this.durationTimer=setInterval(()=>{this.duration=this.totalTime+this.startTime?Date.now()-this.startTime:0},300),Z.onConnect=()=>{this.startTime=Date.now(),this.circleAnimationController.onConnectionSuccess()},Z.onDisconnect=()=>{this.circleAnimation&&this.circleAnimationController.setAnimation(this.circleAnimation),this.totalTime+=this.startTime?Date.now()-this.startTime:0},setTimeout(()=>{this.circleAnimation&&this.circleAnimationController.setAnimation(this.circleAnimation)},300)}onViewDestroy(){Z.destroy(),this.durationTimer&&clearInterval(this.durationTimer),setTimeout(()=>{er.W.createUserBehaviorEvent({eventName:"realtime_desktop_click_end",extData:{time:this.totalTime,scene:Z.currentScene}})},200)}handleSceneSelectorLabelClick(e){e.stopPropagation(),Z.disconnect(),Z.drawerType="sceneSelector"}onGlobalClick(){"interrupt"===this.rootActionType?Z.interrupt():"reConnect"===this.rootActionType&&Z.connect()}formatSeconds(e){let t=Math.max(Math.floor(e),0),i=String(Math.floor(t/60)).padStart(2,"0"),n=String(t%60).padStart(2,"0");return"".concat(i,":").concat(n)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"startTime",0),(0,h._)(this,"totalTime",0),(0,h._)(this,"durationTimer",null),(0,h._)(this,"circleAnimation",null),(0,h._)(this,"aiSpeakingAnimation",null),(0,h._)(this,"aiSpeakingContainer",{current:null}),(0,h._)(this,"userSpeakingContainer",{current:null}),(0,h._)(this,"circleAnimationContainer",{current:null}),(0,h._)(this,"circleAnimationController",new ea),(0,h._)(this,"duration",0)}}(0,p.gn)([s.SB],ec.prototype,"duration",void 0),(0,p.gn)([s.Fl],ec.prototype,"S",null),(0,p.gn)([s.Fl],ec.prototype,"formattedDuration",null),(0,p.gn)([s.Fl],ec.prototype,"sceneButtonLabel",null),(0,p.gn)([s.Fl],ec.prototype,"rootActionType",null);var ed=i(53040),eh=i(44069),ep=i(24797),eu={src:"https://assets.monica.im/home-web/_next/static/media/close.263fc8c1.svg",height:16,width:16,blurWidth:0,blurHeight:0},em=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 3.5.9","a":"","k":"","d":"","tc":""},"fr":60,"ip":0,"op":208,"w":246,"h":174,"nm":"音频完整动画","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"6","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[81,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":1,"k":[{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":112,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":120,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":128,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":136,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":144,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":152,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":160,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":168,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":176,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":184,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":192,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":200,"s":[24,96]},{"t":208,"s":[24,24]}],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":120,"op":802,"st":112,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"5","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[123,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":1,"k":[{"i":{"x":[0.833,0.833],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":116,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":124,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":132,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":140,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":148,"s":[24,72]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":156,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":164,"s":[24,96]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":172,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":180,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":188,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":196,"s":[24,96]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":204,"s":[24,24]},{"t":212,"s":[24,24]}],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":120,"op":806,"st":116,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[165,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":1,"k":[{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":120,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":128,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":136,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":144,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":152,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":160,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":168,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":176,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":184,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":192,"s":[24,96]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.167,0.167],"y":[0,0]},"t":200,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":208,"s":[24,24]},{"t":216,"s":[24,24]}],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":120,"op":810,"st":120,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":0,"s":[20]},{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":30,"s":[100]},{"t":60,"s":[20]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[81,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[24,24],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":690,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":30,"s":[20]},{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":60,"s":[100]},{"t":90,"s":[20]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[123,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[24,24],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":690,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":60,"s":[20]},{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":90,"s":[100]},{"t":120,"s":[20]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[165,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[24,24],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":690,"st":0,"bm":0}],"markers":[]}'),ev={sceneSelectorWrapper:"scene-selector-wrapper--HpygM",sceneSelector:"scene-selector--wVWU4",header:"header--M1nmq",left:"left--zj6u0",leftLabel:"left-label--of0iv",upgradeButton:"upgrade-button--eZpQt",right:"right--K4AzV",closeIcon:"close-icon--IUhyR",text:"text--lR1Nf",scenes:"scenes--po4EJ",sceneWrapper:"scene-wrapper--b6oSw",scene:"scene--pnKpi",active:"active--NQ24A",iconWrapper:"icon-wrapper--X1aVH",aiIcon:"ai-icon--mmxRM",title:"title--ykT3G",titleText:"title-text--GdpSc",desc:"desc--LkMzt",playingScene:"playing-scene--VPpWo",bottom:"bottom--tAQcv",estimate:"estimate--vLsCO",estimateText:"estimate-text--eGDaN",highlightText:"highlight-text--IImma",viewCredits:"view-credits--G56Qt"};let eg=()=>(n||(n=document.createElement("audio")),n);class ex extends s.PN{get S(){return x.S.Global.modules.Realtime.scenes}get scenes(){return[{name:"standard",label:this.S.standard,desc:this.S.standardDesc,icon:"yingyong-emojl88j"},{name:"advanced",label:this.S.advanced,desc:this.S.advancedDesc,icon:"zhineng2"},{name:"MockInterview",label:this.S.interviewer,desc:this.S.interviewerDesc,icon:"gongju"},{name:"SimulatedDebate",label:this.S.simulateDebate,desc:this.S.simulateDebateDesc,icon:"erMessage"},{name:"EnglishChatPartner",label:this.S.englishTrainer,desc:this.S.englishTrainerDesc,icon:"2-em268k3m"},{name:"VentingCompanion",label:this.S.vendingCompanion,desc:this.S.vendingCompanionDesc,icon:"shu-em268k54"}]}onViewCreate(){let e=()=>{this.playingAudioScene="",URL.revokeObjectURL(this.lastPlayUrl)};eg().onpause=e,eg().onended=e,eg().onplay=()=>{this.destroyed&&eg().pause(),this.animationController.onSpeak()},this.playExampleAudio()}onViewDestroy(){eg().pause(),this.destroyed=!0}async playExampleAudio(){let e=Z.currentScene;eg().pause(),this.playingAudioScene="",this.fetchingAudioScene=e;try{let t=await b.X.getExampleAudio(e,x.a.locale),i=m.m.stringToBlob(t);this.lastPlayUrl=URL.createObjectURL(i)}catch(e){return}finally{this.fetchingAudioScene===e&&(this.fetchingAudioScene="")}e===Z.currentScene&&(eg().src=this.lastPlayUrl,eg().play(),this.playingAudioScene=e)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"destroyed",!1),(0,h._)(this,"lastPlayUrl",""),(0,h._)(this,"animationController",new el),(0,h._)(this,"fetchingAudioScene",""),(0,h._)(this,"playingAudioScene",""),(0,h._)(this,"playingSceneContainer",{current:null})}}(0,p.gn)([s.SB],ex.prototype,"fetchingAudioScene",void 0),(0,p.gn)([s.SB],ex.prototype,"playingAudioScene",void 0),(0,p.gn)([s.SB],ex.prototype,"playingSceneContainer",void 0),(0,p.gn)([s.Fl],ex.prototype,"S",null),(0,p.gn)([s.Fl],ex.prototype,"scenes",null);let ef=s._Y.createComponent("SceneSelector",ex,e=>{let t;(0,K.Z)({loop:!0,autoplay:!0,renderer:"svg",containerRef:e.playingSceneContainer,animationData:em,onSetAnimation(t){e.animationController.setAnimation(t)}});let i=k.K.getUsageInfo("credits").displayFinallyCanUsed/300;return t=i===Math.floor(i)?(0,o.jsx)($.Z,{S:0===i?e.S.estimateTimeWithSeconds:e.S.estimateTimeWithMinutes,components:{minutes:()=>(0,o.jsx)("span",{className:ev.highlightText,children:i}),seconds:()=>(0,o.jsx)("span",{className:ev.highlightText,children:i})}}):0===Math.floor(i)?(0,o.jsx)($.Z,{S:e.S.estimateTimeWithSeconds,components:{seconds:()=>(0,o.jsx)("span",{className:ev.highlightText,children:Math.floor(60*i)})}}):(0,o.jsx)($.Z,{S:e.S.estimateTimeWithMinutesSeconds,components:{minutes:()=>(0,o.jsx)("span",{className:ev.highlightText,children:Math.floor(i)}),seconds:()=>(0,o.jsx)("span",{className:ev.highlightText,children:Math.floor((i-Math.floor(i))*60)})}}),(0,o.jsx)("div",{className:ev.sceneSelectorWrapper,onClick:e=>{e.stopPropagation()},children:(0,o.jsxs)("div",{className:ev.sceneSelector,children:[(0,o.jsxs)("div",{className:ev.header,children:[(0,o.jsxs)("div",{className:ev.left,children:[(0,o.jsx)("div",{className:ev.leftLabel,children:e.S.title}),!w.userController.isUnlimitedUser&&(0,o.jsx)("div",{"data-draggable":"false",children:(0,o.jsx)(ee.z,{className:ev.upgradeButton,color:"primary",size:"small",shape:"round",icon:(0,o.jsx)(ed.E,{src:(0,X.Q)(ep.Z)}),onClick:()=>{w.userController.upgrade("realtime_upgrade_desktop")},children:e.S.upgrade})})]}),"sceneSelector"===Z.drawerType&&(0,o.jsxs)("div",{"data-draggable":"false",className:ev.right,onClick:()=>{Z.drawerType="empty"},children:[(0,o.jsx)(ed.E,{className:ev.closeIcon,src:(0,X.Q)(eu)}),(0,o.jsx)("div",{className:ev.text,children:e.S.closeRealtime})]})]}),(0,o.jsx)("div",{className:ev.scenes,"data-draggable":"false",children:e.scenes.map(t=>{let i="select-scene-".concat(t.name),n=Z.currentScene===t.name,s=e.fetchingAudioScene===t.name||e.playingAudioScene===t.name;return(0,o.jsx)("div",{className:d()(ev.sceneWrapper,{[ev.active]:n}),onClick:()=>{n||(Z.currentScene=t.name,e.playExampleAudio())},children:(0,o.jsxs)("div",{className:ev.scene,children:[(0,o.jsxs)("div",{className:ev.iconWrapper,children:[s?(0,o.jsx)("div",{style:{width:24,height:24,position:"relative"},children:(0,o.jsx)("div",{id:i,ref:t=>{var n;(null===(n=e.playingSceneContainer.current)||void 0===n?void 0:n.getAttribute("id"))!==i&&(e.playingSceneContainer={current:t})},className:ev.playingScene})}):(0,o.jsx)(J.J,{size:24,name:t.icon,color:"var(--theme-icon-primary)"}),"standard"!==t.name&&(0,o.jsxs)("div",{className:ev.aiIcon,children:[(0,o.jsx)(J.J,{name:"chatGpt",size:16,style:{borderRadius:"50%"}}),"GPT-4o"]})]}),(0,o.jsx)("div",{className:ev.title,children:(0,o.jsx)(eh.x,{clamp:1,text:t.label,className:ev.titleText})}),(0,o.jsx)("div",{className:ev.desc,children:t.desc})]})},t.name)})}),(0,o.jsxs)("div",{className:ev.bottom,"data-draggable":"false",children:[!w.userController.isFreeUser&&(0,o.jsxs)("div",{className:ev.estimate,children:[(0,o.jsx)("div",{className:ev.estimateText,children:t}),(0,o.jsx)("div",{className:ev.viewCredits,onClick:()=>{Z.drawerType="credits"},children:e.S.viewCredits})]}),(0,o.jsx)(ee.z,{type:"primary",size:"large",style:{height:40,minHeight:"unset",flexShrink:0},onClick:()=>{er.W.createUserBehaviorEvent({eventName:"realtime_desktop_click_start",extData:{scene:Z.currentScene,status:"sceneSelector"===Z.drawerType?"switch":"new"}}),Z.drawerType="empty",Z.connect()},children:e.S.start})]})]})})});var ey=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 3.6.0","a":"","k":"","d":"","tc":""},"fr":60,"ip":0,"op":600,"w":900,"h":900,"nm":"渐变完整动画","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":3,"nm":"空 1","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[-90]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":30,"s":[0]},{"t":510,"s":[1440]}],"ix":10},"p":{"a":0,"k":[600,600,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[50,50,100],"ix":6}},"ao":0,"ip":0,"op":510,"st":30,"bm":0},{"ddd":0,"ind":2,"ty":3,"nm":"空2","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[-45]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":30,"s":[0]},{"t":510,"s":[720]}],"ix":10},"p":{"a":0,"k":[600,600,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[50,50,100],"ix":6}},"ao":0,"ip":0,"op":510,"st":30,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"6","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[600,600,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":30,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"6","parent":2,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-1.5,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":30,"s":[-571.247,-1033.401,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":270,"s":[-148.279,53.136,0],"to":[0,0,0],"ti":[0,0,0]},{"t":510,"s":[-571.247,-1033.401,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[1200,1200],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.212,0.741,0.937,0.5,0.212,0.741,0.937,1,0.212,0.741,0.937,0,0.5,0.25,0.4,0.5,0.3,0.75,0.15,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[600,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[824.859,-128.104],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"5","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[600,600,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":30,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"5","parent":2,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-1.5,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":30,"s":[-391.356,946.569,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":270,"s":[-1176.869,84.604,0],"to":[0,0,0],"ti":[0,0,0]},{"t":510,"s":[-391.356,946.569,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[1200,1200],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.212,0.741,0.937,0.5,0.212,0.741,0.937,1,0.212,0.741,0.937,0,0.5,0.25,0.4,0.5,0.3,0.75,0.15,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[600,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[386.688,41.031],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"4","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[600,600,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":30,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"4","parent":2,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-1.5,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":31,"s":[-1877.471,121.188,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":270,"s":[-2248.824,-689.301,0],"to":[0,0,0],"ti":[0,0,0]},{"t":510,"s":[-1877.471,121.188,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[1200,1200],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.212,0.741,0.937,0.5,0.212,0.741,0.937,1,0.212,0.741,0.937,0,0.5,0.25,0.4,0.5,0.3,0.75,0.15,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[600,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[386.688,41.031],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":9,"ty":4,"nm":"3","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[600,600,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":30,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"3","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-3,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":30,"s":[-1833.077,1097.44,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":270,"s":[-376.075,637.539,0],"to":[0,0,0],"ti":[0,0,0]},{"t":510,"s":[-1833.077,1097.44,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[1200,1200],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.212,0.741,0.937,0.5,0.212,0.741,0.937,1,0.212,0.741,0.937,0,0.5,0.25,0.4,0.5,0.3,0.75,0.15,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[600,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[386.688,41.031],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"2","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[600,600,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":30,"bm":0},{"ddd":0,"ind":12,"ty":4,"nm":"2","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-3,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":30,"s":[-935.215,-1489.095,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":270,"s":[-196.232,-533.106,0],"to":[0,0,0],"ti":[0,0,0]},{"t":510,"s":[-935.215,-1489.095,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[1200,1200],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.212,0.741,0.937,0.5,0.212,0.741,0.937,1,0.212,0.741,0.937,0,0.5,0.25,0.4,0.5,0.3,0.75,0.15,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[600,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[386.688,41.031],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":13,"ty":4,"nm":"1","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[764.18,503.312,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":30,"bm":0},{"ddd":0,"ind":14,"ty":4,"nm":"1","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-3,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":30,"s":[-515.236,715.947,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":270,"s":[-458.299,162.174,0],"to":[0,0,0],"ti":[0,0,0]},{"t":510,"s":[-515.236,715.947,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[1200,1200],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.212,0.741,0.937,0.5,0.212,0.741,0.937,1,0.212,0.741,0.937,0,0.5,0.25,0.4,0.5,0.3,0.75,0.15,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[600,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[386.688,41.031],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":15,"ty":4,"nm":"圆","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[764.18,503.312,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":0,"s":[0.254901975393,0.380994051695,0.917647063732,1]},{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":30,"s":[0.407843137255,0.254901960784,0.917647058824,1]},{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":90,"s":[0.710860908031,1,0.931515514851,1]},{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":150,"s":[0.465150117874,0.919969201088,1,1]},{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":210,"s":[0.290517747402,0.608284771442,1,1]},{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":270,"s":[1,0.76686578989,0.966615617275,1]},{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":330,"s":[0.927750647068,0.06084561348,1,1]},{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":390,"s":[0.710860908031,0.796513020992,1,1]},{"i":{"x":[0.5],"y":[1]},"o":{"x":[0.5],"y":[0]},"t":450,"s":[0.958823502064,0.525707483292,0.928569197655,1]},{"t":510,"s":[0.407843137255,0.254901960784,0.917647058824,1]}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":510,"st":30,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"1","td":1,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":60,"s":[100]},{"t":80,"s":[0]}],"ix":11},"r":{"a":0,"k":3,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":-6,"s":[306,570,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":24,"s":[306,310,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":54,"s":[306,570,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":84,"s":[306,310,0],"to":[0,0,0],"ti":[0,0,0]},{"t":114,"s":[306,570,0]}],"ix":2,"x":"var $bm_rt;\\n$bm_rt = loopOut();"},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":29,"nm":"高斯模糊","np":5,"mn":"ADBE Gaussian Blur 2","ix":1,"en":1,"ef":[{"ty":0,"nm":"模糊度","mn":"ADBE Gaussian Blur 2-0001","ix":1,"v":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":60,"s":[0]},{"t":80,"s":[200]}],"ix":1}},{"ty":7,"nm":"模糊方向","mn":"ADBE Gaussian Blur 2-0002","ix":2,"v":{"a":0,"k":1,"ix":2}},{"ty":7,"nm":"重复边缘像素","mn":"ADBE Gaussian Blur 2-0003","ix":3,"v":{"a":0,"k":0,"ix":3}}]}],"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[96,96],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0,0,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":617,"st":-6,"bm":0},{"ddd":0,"ind":2,"ty":0,"nm":"渐变动画","tt":1,"refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[450,450,0],"ix":2},"a":{"a":0,"k":[600,600,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":29,"nm":"高斯模糊","np":5,"mn":"ADBE Gaussian Blur 2","ix":1,"en":1,"ef":[{"ty":0,"nm":"模糊度","mn":"ADBE Gaussian Blur 2-0001","ix":1,"v":{"a":0,"k":0,"ix":1}},{"ty":7,"nm":"模糊方向","mn":"ADBE Gaussian Blur 2-0002","ix":2,"v":{"a":0,"k":1,"ix":2}},{"ty":7,"nm":"重复边缘像素","mn":"ADBE Gaussian Blur 2-0003","ix":3,"v":{"a":0,"k":0,"ix":3}}]}],"w":1200,"h":1200,"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"2","td":1,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":60,"s":[100]},{"t":80,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":-3,"s":[450,570,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":27,"s":[450,310,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":57,"s":[450,570,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":87,"s":[450,310,0],"to":[0,0,0],"ti":[0,0,0]},{"t":117,"s":[450,570,0]}],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":29,"nm":"高斯模糊","np":5,"mn":"ADBE Gaussian Blur 2","ix":1,"en":1,"ef":[{"ty":0,"nm":"模糊度","mn":"ADBE Gaussian Blur 2-0001","ix":1,"v":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":60,"s":[0]},{"t":80,"s":[200]}],"ix":1}},{"ty":7,"nm":"模糊方向","mn":"ADBE Gaussian Blur 2-0002","ix":2,"v":{"a":0,"k":1,"ix":2}},{"ty":7,"nm":"重复边缘像素","mn":"ADBE Gaussian Blur 2-0003","ix":3,"v":{"a":0,"k":0,"ix":3}}]}],"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[96,96],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0,0,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":617,"st":-3,"bm":0},{"ddd":0,"ind":4,"ty":0,"nm":"渐变动画","tt":1,"refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[450,450,0],"ix":2},"a":{"a":0,"k":[600,600,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":29,"nm":"高斯模糊","np":5,"mn":"ADBE Gaussian Blur 2","ix":1,"en":1,"ef":[{"ty":0,"nm":"模糊度","mn":"ADBE Gaussian Blur 2-0001","ix":1,"v":{"a":0,"k":0,"ix":1}},{"ty":7,"nm":"模糊方向","mn":"ADBE Gaussian Blur 2-0002","ix":2,"v":{"a":0,"k":1,"ix":2}},{"ty":7,"nm":"重复边缘像素","mn":"ADBE Gaussian Blur 2-0003","ix":3,"v":{"a":0,"k":0,"ix":3}}]}],"w":1200,"h":1200,"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"3","td":1,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":60,"s":[100]},{"t":80,"s":[0]}],"ix":11},"r":{"a":0,"k":3,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":0,"s":[594,570,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":30,"s":[594,310,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":60,"s":[594,570,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.25,"y":1},"o":{"x":0.75,"y":0},"t":90,"s":[594,310,0],"to":[0,0,0],"ti":[0,0,0]},{"t":120,"s":[594,570,0]}],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":29,"nm":"高斯模糊","np":5,"mn":"ADBE Gaussian Blur 2","ix":1,"en":1,"ef":[{"ty":0,"nm":"模糊度","mn":"ADBE Gaussian Blur 2-0001","ix":1,"v":{"a":1,"k":[{"i":{"x":[0.25],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":60,"s":[0]},{"t":80,"s":[200]}],"ix":1}},{"ty":7,"nm":"模糊方向","mn":"ADBE Gaussian Blur 2-0002","ix":2,"v":{"a":0,"k":1,"ix":2}},{"ty":7,"nm":"重复边缘像素","mn":"ADBE Gaussian Blur 2-0003","ix":3,"v":{"a":0,"k":0,"ix":3}}]}],"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[96,96],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0,0,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":618,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":0,"nm":"渐变动画","tt":1,"refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[450,450,0],"ix":2},"a":{"a":0,"k":[600,600,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":29,"nm":"高斯模糊","np":5,"mn":"ADBE Gaussian Blur 2","ix":1,"en":1,"ef":[{"ty":0,"nm":"模糊度","mn":"ADBE Gaussian Blur 2-0001","ix":1,"v":{"a":0,"k":0,"ix":1}},{"ty":7,"nm":"模糊方向","mn":"ADBE Gaussian Blur 2-0002","ix":2,"v":{"a":0,"k":1,"ix":2}},{"ty":7,"nm":"重复边缘像素","mn":"ADBE Gaussian Blur 2-0003","ix":3,"v":{"a":0,"k":0,"ix":3}}]}],"w":1200,"h":1200,"ip":0,"op":510,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":0,"nm":"渐变动画","refId":"comp_0","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.67],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":90,"s":[0]},{"t":120,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[450,450,0],"ix":2},"a":{"a":0,"k":[600,600,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.67,0.67,0.67],"y":[1,1,1]},"o":{"x":[0.75,0.75,0.75],"y":[0,0,0]},"t":90,"s":[0,0,100]},{"t":120,"s":[100,100,100]}],"ix":6}},"ao":0,"ef":[{"ty":29,"nm":"高斯模糊","np":5,"mn":"ADBE Gaussian Blur 2","ix":1,"en":1,"ef":[{"ty":0,"nm":"模糊度","mn":"ADBE Gaussian Blur 2-0001","ix":1,"v":{"a":1,"k":[{"i":{"x":[0.67],"y":[1]},"o":{"x":[0.75],"y":[0]},"t":90,"s":[500]},{"t":120,"s":[0]}],"ix":1}},{"ty":7,"nm":"模糊方向","mn":"ADBE Gaussian Blur 2-0002","ix":2,"v":{"a":0,"k":1,"ix":2}},{"ty":7,"nm":"重复边缘像素","mn":"ADBE Gaussian Blur 2-0003","ix":3,"v":{"a":0,"k":0,"ix":3}}]}],"w":1200,"h":1200,"ip":90,"op":600,"st":90,"bm":0}],"markers":[{"tm":60,"cm":"加载完成","dr":0},{"tm":120,"cm":"渐变动画开始","dr":0},{"tm":600,"cm":"渐变动画结束","dr":0}]}'),eC=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 3.5.9","a":"","k":"","d":"","tc":""},"fr":60,"ip":0,"op":88,"w":246,"h":174,"nm":"音频动画-灰色","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[81,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":1,"k":[{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":-8,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":0,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":8,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":16,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":24,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":32,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":40,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":48,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":56,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":64,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":72,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":80,"s":[24,96]},{"t":88,"s":[24,24]}],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.541176470588,0.576470588235,0.61568627451,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.541176470588,0.576470588235,0.61568627451,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":-8,"op":682,"st":-8,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[123,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":1,"k":[{"i":{"x":[0.833,0.833],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":-4,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":4,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":12,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":20,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":28,"s":[24,72]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":36,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":44,"s":[24,96]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":52,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":60,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":68,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":76,"s":[24,96]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":84,"s":[24,24]},{"t":92,"s":[24,24]}],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.541176470588,0.576470588235,0.61568627451,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.541176470588,0.576470588235,0.61568627451,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":-4,"op":686,"st":-4,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[165,87,0],"ix":2},"a":{"a":0,"k":[-164.18,96.688,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":1,"k":[{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":0,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":8,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":16,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":24,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":32,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":40,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":48,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":56,"s":[24,48]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":64,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":72,"s":[24,96]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.167,0.167],"y":[0,0]},"t":80,"s":[24,24]},{"i":{"x":[0.75,0.75],"y":[1,1]},"o":{"x":[0.25,0.25],"y":[0,0]},"t":88,"s":[24,24]},{"t":96,"s":[24,24]}],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":1000,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.541176470588,0.576470588235,0.61568627451,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-164.18,96.688],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ty":"fl","c":{"a":0,"k":[0.541176470588,0.576470588235,0.61568627451,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":1,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":690,"st":0,"bm":0}],"markers":[]}');let ek=s._Y.createComponent("Realtime",ec,e=>{let{aiSpeaking:t,userSpeaking:i,connectStatus:n}=Z;return e.circleAnimation=(0,K.Z)({loop:!0,renderer:"svg",autoplay:!1,containerRef:e.circleAnimationContainer,animationData:ey}),(0,K.Z)({loop:!0,renderer:"svg",autoplay:!0,containerRef:e.userSpeakingContainer,animationData:eC}),e.aiSpeakingAnimation=(0,K.Z)({loop:!0,renderer:"svg",autoplay:!0,containerRef:e.aiSpeakingContainer,animationData:eC}),(0,o.jsxs)("div",{className:eo.realtime,style:{cursor:e.rootActionType?"pointer":void 0},onClick:()=>{e.onGlobalClick()},children:[(0,o.jsxs)("div",{className:eo.content,children:[(0,o.jsxs)("div",{className:eo.top,children:[(0,o.jsx)("div",{"data-draggable":"false",className:eo.creditButton,style:{cursor:"pointer",visibility:Z.showSceneSelector?"hidden":"visible"},onClick:e=>{e.stopPropagation(),Z.drawerType="credits"},children:(0,o.jsx)(J.J,{name:"jifen",size:20})}),e.formattedDuration&&"connected"===Z.connectStatus&&(0,o.jsx)("div",{className:eo.duration,children:e.formattedDuration})]}),(0,o.jsxs)("div",{"data-draggable":"false",className:eo.aiIndicator,children:[(0,o.jsx)("div",{ref:t=>{t&&(e.circleAnimationContainer.current=t)},className:eo.circleAnimation}),(0,o.jsx)("div",{className:d()(eo.speaking,{[eo.visible]:t}),children:(0,o.jsx)("div",{ref:t=>{t&&(e.aiSpeakingContainer.current=t)},className:eo.aiSpeakingAnimation})})]}),(0,o.jsxs)("div",{"data-draggable":"false",className:eo.sceneButton,onClick:t=>{e.handleSceneSelectorLabelClick(t)},children:[(0,o.jsx)(J.J,{name:"starticon-em281pi6",size:16}),e.sceneButtonLabel]}),(0,o.jsxs)("div",{"data-draggable":"false",className:eo.audioStatus,children:["connectError"===n&&(0,o.jsx)("div",{style:{color:"var(--theme-function-error)"},children:e.S.retryFailed}),"connectClose"===n&&(w.userController.isFreeUser&&"standard"!==Z.currentScene?(0,o.jsx)("div",{style:{color:"var(--theme-function-error)"},children:e.S.retryFailed}):(0,o.jsx)("div",{children:e.S.retryConnect})),"permissionError"===n&&(0,o.jsx)("div",{style:{color:"var(--theme-function-error)"},children:e.S.permissionError}),Z.aiSpeaking&&(0,o.jsx)("div",{children:e.S.clickToInterrupt}),(0,o.jsx)("div",{className:eo.userSpeakingAnimation,style:{display:i?"flex":"none"},ref:t=>{t&&(e.userSpeakingContainer.current=t)}})]}),(0,o.jsx)("div",{"data-draggable":"false",className:eo.endButton,onClick:t=>{t.stopPropagation(),e.props.onClose()},children:(0,o.jsx)(J.J,{name:"starticon-em281pfn",size:24})})]}),Z.showSceneSelector&&(0,o.jsx)(ef,{}),"credits"===Z.drawerType&&(0,o.jsx)(en,{})]})});class ew extends s.PN{get windowItem(){return l.E.getWindowItem(this.props.windowId)}async onViewCreate(){var e;null===(e=this.windowItem)||void 0===e||e.layoutManager.init({container:this.container,initData:{width:416,height:600},getMaxSize:()=>({width:416,height:600}),getMinSize:()=>({width:416,height:600}),resizeTouchArea:10})}onViewDestroy(){}handleClose(){l.E.disposeWindow(this.props.windowId)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"container",null)}}(0,p.gn)([s.Fl],ew.prototype,"windowItem",null);let eb=s._Y.createComponent("RealtimeDialog",ew,e=>{var t,i;return(0,o.jsxs)("div",{className:"realtime-dialog--_ue8F",ref:t=>{e.container=t},style:{...null===(t=e.windowItem)||void 0===t?void 0:t.layoutManager.layoutStyle},...null===(i=e.windowItem)||void 0===i?void 0:i.layoutManager.containerEvents,children:[e.windowItem&&(0,o.jsx)(a.y,{windowItem:e.windowItem}),(0,o.jsx)("div",{className:"close--J8oXo","data-draggable":"false",children:(0,o.jsx)(r.h,{title:"",color:"var(--theme-icon-white-secondary)",iconName:"close",iconSize:24,onClick:()=>{e.handleClose()}})}),(0,o.jsx)(ek,{onClose:()=>{e.handleClose()}})]})}),eS=l.E.createWindow(eb,{singleton:!0})},32250:function(e,t,i){i.d(t,{y:function(){return c}});var n=i(71576),o=i(34491),s=i(41884),r=i(66084),a=i(52921);class l extends o.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,r._)(this,"props",void 0),(0,r._)(this,"someState",!0)}}(0,a.gn)([o.SB],l.prototype,"someState",void 0);let c=o._Y.createComponent("WindowResizeBinder",l,e=>{let{layoutManager:t}=e.props.windowItem,i=e.props.allowedDirections||s.E.allDirections;return(0,n.jsx)(n.Fragment,{children:i.map(e=>(0,n.jsx)("div",{style:t.getResizeBinderStyle(e),onPointerDown:i=>{t.handleResizeBinderPointerDown(i,e)},onPointerUp:i=>{t.handleResizeBinderPointerUp(i,e)},onPointerMove:i=>{t.handleResizeBinderPointerMove(i,e)}},e))})})}}]);