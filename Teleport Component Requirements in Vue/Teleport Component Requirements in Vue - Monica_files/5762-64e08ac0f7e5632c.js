(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5762],{9260:function(){},32563:function(){},33761:function(){},3096:function(){},75133:function(){},50342:function(){},5844:function(){},16037:function(){},94242:function(e,t,i){"use strict";let r=i(88127);class n extends Error{constructor(e,...t){let i;for(let[r,o]of(super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e),Object.defineProperty(this,"responseBody",{get:()=>(i||(i=this.arrayBuffer()),i)}),this.headers={},e.headers.entries()))this.headers[r.toLowerCase()]=o}}e.exports=r((e,t,i,r,o)=>async function(s,a){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s=o+(s||"");let l=new URL(s);if(r||(r={}),l.username&&(r.Authorization="Basic "+btoa(l.username+":"+l.password),l=new URL(l.protocol+"//"+l.host+l.pathname+l.search)),"https:"!==l.protocol&&"http:"!==l.protocol)throw Error("Unknown protocol, ".concat(l.protocol));if(a){if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"==typeof a);else if("object"==typeof a)a=JSON.stringify(a),r["Content-Type"]="application/json";else throw Error("Unknown body type.")}c=new Headers({...r||{},...c});let p=await fetch(l,{method:t,headers:c,body:a});if(p.statusCode=p.status,!e.has(p.status))throw new n(p);return"json"===i?p.json():"buffer"===i?p.arrayBuffer():"string"===i?p.text():p})},88127:function(e){"use strict";let t=new Set(["json","buffer","string"]);e.exports=e=>function(){let i,r,n;for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];let c=new Set,l="";return s.forEach(e=>{if("string"==typeof e){if(e.toUpperCase()===e){if(i)throw Error("Can't set method to ".concat(e,", already set to ").concat(i,"."));i=e}else if(e.startsWith("http:")||e.startsWith("https:"))l=e;else if(t.has(e))r=e;else throw Error("Unknown encoding, ".concat(e))}else if("number"==typeof e)c.add(e);else if("object"==typeof e){if(Array.isArray(e)||e instanceof Set)e.forEach(e=>c.add(e));else{if(n)throw Error("Cannot set headers twice.");n=e}}else throw Error("Unknown type: ".concat(typeof e))}),i||(i="GET"),0===c.size&&c.add(200),e(c,i,r,n,l)}},89257:function(e){"use strict";var t=!!("undefined"!=typeof window&&window.document&&window.document.createElement);e.exports=t},7913:function(e){"use strict";var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==i},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,i){return i&&!0===i.clone&&t(e)?o(Array.isArray(e)?[]:{},e,i):e}function n(e,i,n){var s=e.slice();return i.forEach(function(i,a){void 0===s[a]?s[a]=r(i,n):t(i)?s[a]=o(e[a],i,n):-1===e.indexOf(i)&&s.push(r(i,n))}),s}function o(e,i,s){var a,c=Array.isArray(i),l=Array.isArray(e),p=s||{arrayMerge:n};return c!==l?r(i,s):c?(p.arrayMerge||n)(e,i,s):(a={},t(e)&&Object.keys(e).forEach(function(t){a[t]=r(e[t],s)}),Object.keys(i).forEach(function(n){t(i[n])&&e[n]?a[n]=o(e[n],i[n],s):a[n]=r(i[n],s)}),a)}o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw Error("first argument should be an array with at least two elements");return e.reduce(function(e,i){return o(e,i,t)})},e.exports=o},59609:function(e,t,i){"use strict";var r=Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]};Object.defineProperty(t,"__esModule",{value:!0}),new(i(7601)).AgentConfig,function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)}(i(70806),t)},36971:function(e,t,i){"use strict";var r=Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]},n=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLoggingListener=void 0;let o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t}(i(32563)),s=i(34774),a=i(66918);class c{set logPath(e){a.Contracts.throwIfNullOrUndefined(o.openSync,"\nFile System access not available"),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){let t=this.toString(e);if(this.privLogPath&&o.writeFileSync(this.privLogPath,t+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case s.LogLevel.Debug:console.debug(t);break;case s.LogLevel.Info:console.info(t);break;case s.LogLevel.Warning:console.warn(t);break;case s.LogLevel.Error:console.error(t);break;default:console.log(t)}}}toString(e){let t=["".concat(e.eventTime),"".concat(e.name)];for(let i in e)if(i&&e.hasOwnProperty(i)&&"eventTime"!==i&&"eventType"!==i&&"eventId"!==i&&"name"!==i&&"constructor"!==i){let r=e[i],n="<NULL>";null!=r&&(n="number"==typeof r||"string"==typeof r?r.toString():JSON.stringify(r)),t.push("".concat(i,": ").concat(n))}return t.join(" | ")}constructor(e=s.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}}t.ConsoleLoggingListener=c},3150:function(e,t,i){"use strict";var r=Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]},n=function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(36971),t),n(i(10977),t),n(i(78142),t),n(i(67640),t),n(i(83131),t),n(i(83346),t),n(i(11643),t),n(i(53427),t),n(i(17843),t),n(i(60211),t),n(i(2822),t)},67640:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.FileAudioSource=void 0;let n=i(7601),o=i(23315),s=i(85808);class a{get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){let e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new o.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new o.AudioSourceInitializingEvent(this.privId)),this.onEvent(new o.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(e){return r(this,void 0,void 0,function*(){this.onEvent(new o.AudioStreamNodeAttachingEvent(this.privId,e));let t=yield this.upload(e);return this.onEvent(new o.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:()=>r(this,void 0,void 0,function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)),yield this.turnOff()}),id:()=>e,read:()=>t.read()})})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(let e in this.privStreams)if(e){let t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new o.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:n.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:n.type.File}))}readHeader(){let e=this.privSource.slice(0,4296),t=new o.Deferred,i=e=>{let i=new DataView(e),r=e=>String.fromCharCode(i.getUint8(e),i.getUint8(e+1),i.getUint8(e+2),i.getUint8(e+3));if("RIFF"!==r(0)){t.reject("Invalid WAV header in file, RIFF was not found");return}if("WAVE"!==r(8)||"fmt "!==r(12)){t.reject("Invalid WAV header in file, WAVEfmt was not found");return}let n=i.getInt32(16,!0),o=i.getUint16(22,!0),a=i.getUint32(24,!0),c=i.getUint16(34,!0),l=36+Math.max(n-16,0);for(;"data"!==r(l);l+=2)if(l>4288){t.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=l+8,t.resolve(s.AudioStreamFormat.getWaveFormatPCM(a,c,o))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){let t=new FileReader;t.onload=e=>{i(e.target.result)},t.readAsArrayBuffer(e)}else i(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));return t.promise}upload(e){return r(this,void 0,void 0,function*(){let t=t=>{let i="Error occurred while processing '".concat(this.privFilename,"'. ").concat(t);throw this.onEvent(new o.AudioStreamNodeErrorEvent(this.privId,e,i)),Error(i)};try{yield this.turnOn();let i=yield this.privAudioFormatPromise,r=new o.ChunkedArrayBufferStream(i.avgBytesPerSec/10,e);this.privStreams[e]=r;let n=this.privSource.slice(this.privHeaderEnd),s=e=>{r.isClosed||(r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),r.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&n instanceof Blob){let e=new FileReader;e.onerror=e=>t(e.toString()),e.onload=e=>{let t=e.target.result;s(t)},e.readAsArrayBuffer(n)}else s(n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength));return r}catch(e){t(e)}})}onEvent(e){this.privEvents.onEvent(e),o.Events.instance.onEvent(e)}constructor(e,t,i){this.privStreams={},this.privHeaderEnd=44,this.privId=i||o.createNoDashGuid(),this.privEvents=new o.EventSource,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}}t.FileAudioSource=a},10977:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},78142:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;let n=i(7601),o=i(23315),s=i(85808);t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class a{get format(){return Promise.resolve(a.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new o.Deferred;try{this.createAudioContext()}catch(e){return e instanceof Error?this.privInitializeDeferral.reject(e.name+": "+e.message):this.privInitializeDeferral.reject(e),this.privInitializeDeferral.promise}let e=window.navigator,t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,i,r)=>{e.mediaDevices.getUserMedia(t).then(i).catch(r)}),t){let e=()=>{this.onEvent(new o.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new o.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},e=>{this.privMediaStream=e,this.onEvent(new o.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},e=>{let t="Error occurred during microphone initialization: ".concat(e);this.privInitializeDeferral.reject(t),this.onEvent(new o.AudioSourceErrorEvent(this.privId,t))})};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch(e=>{this.privInitializeDeferral.reject("Failed to initialize audio context: ".concat(e))}):e()}else{let e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new o.AudioSourceErrorEvent(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new o.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then(t=>(this.onEvent(new o.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>r(this,void 0,void 0,function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>t.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){return r(this,void 0,void 0,function*(){for(let e in this.privStreams)if(e){let t=this.privStreams[e];t&&t.close()}this.onEvent(new o.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:a.AUDIOFORMAT.bitsPerSample,channelcount:a.AUDIOFORMAT.channels,connectivity:n.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:a.AUDIOFORMAT.samplesPerSec,type:n.type.Microphones}))}setProperty(e,i){if(e===t.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(i);else throw Error("Property '"+e+"' is not supported on Microphone.")}getMicrophoneLabel(){let e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;let t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);let i=new o.Deferred;return navigator.mediaDevices.enumerateDevices().then(e=>{for(let i of e)if(i.deviceId===t){this.privMicrophoneLabel=i.label;break}i.resolve(this.privMicrophoneLabel)},()=>i.resolve(this.privMicrophoneLabel)),i.promise}listen(e){return r(this,void 0,void 0,function*(){yield this.turnOn();let t=new o.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new o.AudioStreamNodeErrorEvent(this.privId,e,t)),t}return t})}onEvent(e){this.privEvents.onEvent(e),o.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=s.AudioStreamFormatImpl.getAudioContext(a.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return r(this,void 0,void 0,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())})}constructor(e,t,i,r){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=a.AUDIOFORMAT.avgBytesPerSec/10,this.privId=i||o.createNoDashGuid(),this.privEvents=new o.EventSource,this.privMediaStream=r||null,this.privIsClosing=!1}}t.MicAudioSource=a,a.AUDIOFORMAT=s.AudioStreamFormat.getDefaultInputFormat()},83131:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PcmRecorder=void 0;let r=i(23315);class n{record(e,t,i){let n=new r.RiffPcmEncoder(e.sampleRate,16e3),o=e.createMediaStreamSource(t),s=()=>{let r=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(r){t=2048;let i=e.sampleRate;for(;t<16384&&i>=32e3;)t<<=1,i>>=1;return e.createScriptProcessor(t,1,1)}})();r.onaudioprocess=e=>{let t=e.inputBuffer.getChannelData(0);if(i&&!i.isClosed){let e=n.encode(t);e&&i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},o.connect(r),r.connect(e.destination),this.privMediaResources={scriptProcessorNode:r,source:o,stream:t}},a=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(e.audioWorklet&&!a){if(!this.privSpeechProcessorScript){let e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{let r=new AudioWorkletNode(e,"speech-processor");r.port.onmessage=e=>{let t=e.data;if(i&&!i.isClosed){let e=n.encode(t);e&&i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},o.connect(r),r.connect(e.destination),this.privMediaResources={scriptProcessorNode:r,source:o,stream:t}}).catch(()=>{s()})}else try{s()}catch(e){throw Error("Unable to start audio worklet node for PCMRecorder: ".concat(e))}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(e=>e.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}constructor(e){this.privStopInputOnRelease=e}}t.PcmRecorder=n},17843:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyInfo=void 0;let r=i(70806);class n{static fromParameters(e){return new n(e.getProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPort),10),e.getProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName),e.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}constructor(e,t,i,r){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=i,this.privProxyPassword=r}}t.ProxyInfo=n},53427:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayableAudioNode=void 0;class i{id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){let e=Math.round((this.privReplayOffset-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7);0!=e%2&&e++;let t=0;for(;t<this.privBuffers.length&&e>=this.privBuffers[t].chunk.buffer.byteLength;)e-=this.privBuffers[t++].chunk.buffer.byteLength;if(t<this.privBuffers.length){let i=this.privBuffers[t].chunk.buffer.slice(e);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,t===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[t].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new r(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;let t=Math.round((e-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&t>=this.privBuffers[i].chunk.buffer.byteLength;)t-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-t/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(let t of this.privBuffers){let i=t.byteOffset/this.privBytesPerSecond*1e7,r=i+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=i&&e<=r)return t.chunk.timeReceived}return 0}constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}}t.ReplayableAudioNode=i;class r{constructor(e,t,i){this.chunk=e,this.serial=t,this.byteOffset=i}}},2822:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestConfigBase=void 0;class i{static get requestOptions(){return i.privDefaultRequestOptions}static get configParams(){return i.privDefaultParams}static get restErrors(){return i.privRestErrors}}t.RestConfigBase=i,i.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},i.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},i.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},60211:function(e,t,i){"use strict";var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;let s=(n=i(94242))&&n.__esModule?n:{default:n},a=i(23315);(o=r=t.RestRequestType||(t.RestRequestType={})).Get="GET",o.Post="POST",o.Delete="DELETE",o.File="file";class c{static extractHeaderValue(e,t){let i="";try{let r=t.trim().split(/[\r\n]+/),n={};r.forEach(e=>{let t=e.split(": "),i=t.shift().toLowerCase(),r=t.join(": ");n[i]=r}),i=n[e.toLowerCase()]}catch(e){}return i}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=new a.Deferred,c=e===r.File?"POST":e,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:e.statusText?e.statusText:e.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===r.Post&&n&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(n=>{s.default(t,c,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(i)?"":"?".concat(this.queryParams(i)),n).then(t=>{var i,n,s,a;return i=this,n=void 0,s=void 0,a=function*(){if(e===r.Delete||204===t.statusCode)o.resolve(l(t));else try{let e=yield t.json();o.resolve(l(t,e))}catch(e){o.resolve(l(t))}},new(s||(s=Promise))(function(e,t){function r(e){try{c(a.next(e))}catch(e){t(e)}}function o(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof s?i:new s(function(e){e(i)})).then(r,o)}c((a=a.apply(i,n||[])).next())})}).catch(e=>{o.reject(e)})})(n),o.promise}queryParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}constructor(e){if(!e)throw new a.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}}t.RestMessageAdapter=c},83346:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketConnection=void 0;let r=i(23315),n=i(11643);class o{dispose(){var e,t,i,r;return e=this,t=void 0,r=function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())},new(i=void 0,i=Promise)(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}constructor(e,t,i,o,s,a=!1,c){if(this.privIsDisposed=!1,!e)throw new r.ArgumentNullError("uri");if(!o)throw new r.ArgumentNullError("messageFormatter");this.privMessageFormatter=o;let l="",p=0;if(t){for(let i in t)if(i){l+=(0===p&&-1===e.indexOf("?")?"?":"&")+encodeURIComponent(i);let r=t[i];r&&(r=encodeURIComponent(r),l+="=".concat(r)),p++}}if(i){for(let t in i)if(t){l+=0===p&&-1===e.indexOf("?")?"?":"&";let r=encodeURIComponent(i[t]);l+="".concat(t,"=").concat(r),p++}}this.privUri=e+l,this.privId=c||r.createNoDashGuid(),this.privConnectionMessageAdapter=new n.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,i,a)}}t.WebsocketConnection=o},11643:function(e,t,i){"use strict";var r=i(61268).Buffer,n=Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]},o=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t},a=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},c=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageAdapter=void 0;let l=s(i(3096)),p=s(i(75133)),d=c(i(9260)),u=c(i(33761)),h=c(i(50342)),g=i(92079),f=i(23315);class m{get state(){return this.privConnectionState}open(){if(this.privConnectionState===f.ConnectionState.Disconnected)return Promise.reject("Cannot open a connection that is in ".concat(this.privConnectionState," state"));if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new f.Deferred,this.privCertificateValidatedDeferral=new f.Deferred,this.privConnectionState=f.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||m.forceNpmWebSocket){let e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let t=new URL(this.privUri).protocol;(null==t?void 0:t.toLocaleLowerCase())==="wss:"?t="https:":(null==t?void 0:t.toLocaleLowerCase())==="ws:"&&(t="http:"),e.agent.protocol=t,this.privWebsocketClient=new h.default(this.privUri,e)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new f.Queue,this.privDisconnectDeferral=new f.Deferred,this.privSendMessageQueue=new f.Queue,this.processSendQueue().catch(e=>{f.Events.instance.onEvent(new f.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new f.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new f.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=f.ConnectionState.Connected,this.onEvent(new f.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new f.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new f.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===f.ConnectionState.Connecting?(this.privConnectionState=f.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new f.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=f.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new f.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(e=>{f.Events.instance.onEvent(new f.BackgroundEvent(e))})},this.privWebsocketClient.onmessage=e=>{let t=new Date().toISOString();if(this.privConnectionState===f.ConnectionState.Connected){let i=new f.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(i.promise),e.data instanceof ArrayBuffer){let r=new f.RawWebsocketMessage(f.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(r).then(e=>{this.onEvent(new f.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),i.resolve(e)},e=>{i.reject("Invalid binary message format. Error: ".concat(e))})}else{let r=new f.RawWebsocketMessage(f.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(r).then(e=>{this.onEvent(new f.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),i.resolve(e)},e=>{i.reject("Invalid text message format. Error: ".concat(e))})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==f.ConnectionState.Connected)return Promise.reject("Cannot send on connection that is in ".concat(f.ConnectionState[this.privConnectionState]," state"));let t=new f.Deferred,i=new f.Deferred;return this.privSendMessageQueue.enqueueFromPromise(i.promise),this.privMessageFormatter.fromConnectionMessage(e).then(r=>{i.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})},e=>{i.reject("Error formatting the message. ".concat(e))}),t.promise}read(){return this.privConnectionState!==f.ConnectionState.Connected?Promise.reject("Cannot read on connection that is in ".concat(this.privConnectionState," state")):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==f.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new f.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),!this.isWebsocketOpen)return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+Error().stack);return this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()}catch(e){return Promise.reject("websocket send error: ".concat(e))}}onClose(e,t){return a(this,void 0,void 0,function*(){let i="Connection closed. ".concat(e,": ").concat(t);this.privConnectionState=f.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},i),yield this.privSendMessageQueue.drainAndDispose(e=>{e.sendStatusDeferral.reject(i)},i)})}processSendQueue(){return a(this,void 0,void 0,function*(){for(;;){let e=this.privSendMessageQueue.dequeue(),t=yield e;if(!t)return;try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(e){t.sendStatusDeferral.reject(e)}}})}onEvent(e){this.privConnectionEvents.onEvent(e),f.Events.instance.onEvent(e)}getAgent(){let e=new d.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){let t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new r("".concat(e.UserName,":").concat(void 0===e.Password?"":e.Password)).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new u.default(t)}createConnection(e,t){let i;if(t=Object.assign(Object.assign({},t),{requestOCSP:!0,servername:t.host}),this.proxyInfo){let r=m.GetProxyAgent(this.proxyInfo);i=new Promise((i,n)=>{r.callback(e,t,(e,t)=>{e?n(e):i(t)})})}else i=t.secureEndpoint?Promise.resolve(p.connect(t)):Promise.resolve(l.connect(t));return i}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}constructor(e,t,i,r,n,o){if(!e)throw new f.ArgumentNullError("uri");if(!i)throw new f.ArgumentNullError("messageFormatter");this.proxyInfo=r,this.privConnectionEvents=new f.EventSource,this.privConnectionId=t,this.privMessageFormatter=i,this.privConnectionState=f.ConnectionState.None,this.privUri=e,this.privHeaders=n,this.privEnableCompression=o,this.privHeaders[g.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}}t.WebsocketMessageAdapter=m,m.forceNpmWebSocket=!1},69576:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddedLmIntent=void 0;class i{constructor(e,t){this.modelImpl=e,this.intentName=t}}t.AddedLmIntent=i},39217:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AgentConfig=void 0;class i{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}t.AgentConfig=i},75962:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarSynthesisAdapter=void 0;let r=i(70806),n=i(7601);class o extends n.SynthesisAdapterBase{setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var e,t,i,n,o,s,a,c,l,p,d,u,h,g,f,m;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:null===(e=this.privAvatarConfig.videoFormat)||void 0===e?void 0:e.bitrate,codec:null===(t=this.privAvatarConfig.videoFormat)||void 0===t?void 0:t.codec,crop:{bottomRight:{x:null===(o=null===(n=null===(i=this.privAvatarConfig.videoFormat)||void 0===i?void 0:i.cropRange)||void 0===n?void 0:n.bottomRight)||void 0===o?void 0:o.x,y:null===(c=null===(a=null===(s=this.privAvatarConfig.videoFormat)||void 0===s?void 0:s.cropRange)||void 0===a?void 0:a.bottomRight)||void 0===c?void 0:c.y},topLeft:{x:null===(d=null===(p=null===(l=this.privAvatarConfig.videoFormat)||void 0===l?void 0:l.cropRange)||void 0===p?void 0:p.topLeft)||void 0===d?void 0:d.x,y:null===(g=null===(h=null===(u=this.privAvatarConfig.videoFormat)||void 0===u?void 0:u.cropRange)||void 0===h?void 0:h.topLeft)||void 0===g?void 0:g.y}},resolution:{height:null===(f=this.privAvatarConfig.videoFormat)||void 0===f?void 0:f.height,width:null===(m=this.privAvatarConfig.videoFormat)||void 0===m?void 0:m.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(e){if(this.privAvatarSynthesizer.avatarEventReceived){let t=new r.AvatarEventArgs(e.Data.Offset,e.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,t)}catch(e){}}}constructor(e,t,i,r,n){super(e,t,i,void 0),this.privAvatarSynthesizer=r,this.privSynthesizer=r,this.privAvatarConfig=n}}t.AvatarSynthesisAdapter=o},45602:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveSubscriptionKeyAuthentication=void 0;let r=i(23315),n=i(92079),o=i(48154);class s{fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}constructor(e){if(!e)throw new r.ArgumentNullError("subscriptionKey");this.privAuthInfo=new o.AuthInfo(n.HeaderNames.AuthKey,e)}}t.CognitiveSubscriptionKeyAuthentication=s},72148:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveTokenAuthentication=void 0;let r=i(23315),n=i(48154),o=i(92079);class s{fetch(e){return this.privFetchCallback(e).then(e=>new n.AuthInfo(o.HeaderNames.Authorization,void 0===e?void 0:s.privTokenPrefix+e))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(e=>new n.AuthInfo(o.HeaderNames.Authorization,void 0===e?void 0:s.privTokenPrefix+e))}constructor(e,t){if(!e)throw new r.ArgumentNullError("fetchCallback");if(!t)throw new r.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}}t.CognitiveTokenAuthentication=s,s.privTokenPrefix="Bearer "},25352:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFactoryBase=void 0;let r=i(7601),n=i(70806),o=i(78021);class s{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,t,i){new Map([[n.PropertyId.Speech_SegmentationSilenceTimeoutMs,o.QueryParameterNames.SegmentationSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging],[n.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs],[n.PropertyId.SpeechServiceResponse_PostProcessingOption,o.QueryParameterNames.Postprocessing],[n.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity],[n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,o.QueryParameterNames.EnableWordLevelTimestamps],[n.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold]]).forEach((r,n)=>{this.setUrlParameter(n,r,e,t,i)});let s=JSON.parse(e.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach(e=>{t[e]=s[e]})}setUrlParameter(e,t,i,r,n){let o=i.parameters.getProperty(e,void 0);o&&(!n||-1===n.search(t))&&(r[t]=o.toLocaleLowerCase())}}t.ConnectionFactoryBase=s},17572:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceRecognizer=void 0;let n=i(70806),o=i(7601);class s extends o.ServiceRecognizerBase{processTypeSpecificMessages(e){}handleRecognizedCallback(e,t,i){}handleRecognizingCallback(e,t,i){}processSpeechMessages(e){return r(this,void 0,void 0,function*(){let t=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),t=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(e.textBody)),t=!0}return t})}cancelRecognition(e,t,i,r,n){}handleSpeechPhrase(e){return r(this,void 0,void 0,function*(){let t;let i=o.SimpleSpeechPhrase.fromJSON(e),r=o.EnumTranslation.implTranslateRecognitionResult(i.RecognitionStatus),s=new n.PropertyCollection;s.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e);let a=i.Offset+this.privRequestSession.currentTurnAudioOffset,c=a;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),n.ResultReason.Canceled===r){let e=o.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus),t=o.EnumTranslation.implTranslateCancelErrorCode(i.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,o.EnumTranslation.implTranslateErrorDetails(t))}else if(!(this.privRequestSession.isSpeechEnded&&r===n.ResultReason.NoMatch&&i.RecognitionStatus!==o.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(o.OutputFormatPropertyName)===n.OutputFormat[n.OutputFormat.Simple])t=new n.SpeechRecognitionResult(this.privRequestSession.requestId,r,i.DisplayText,i.Duration,a,i.Language,i.LanguageDetectionConfidence,i.SpeakerId,void 0,e,s);else{let i=o.DetailedSpeechPhrase.fromJSON(e),a=i.Offset+this.privRequestSession.currentTurnAudioOffset,l=i.getJsonWithCorrectedOffsets(a);c=(t=new n.SpeechRecognitionResult(this.privRequestSession.requestId,r,i.Text,i.Duration,a,i.Language,i.LanguageDetectionConfidence,i.SpeakerId,void 0,l,s)).offset}this.handleRecognizedCallback(t,c,this.privRequestSession.sessionId)}})}handleSpeechHypothesis(e){let t=o.SpeechHypothesis.fromJSON(e),i=t.Offset+this.privRequestSession.currentTurnAudioOffset,r=new n.PropertyCollection;r.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e);let s=new n.SpeechRecognitionResult(this.privRequestSession.requestId,n.ResultReason.RecognizingSpeech,t.Text,t.Duration,i,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,r);this.privRequestSession.onHypothesis(i),this.handleRecognizingCallback(s,t.Duration,this.privRequestSession.sessionId)}constructor(e,t,i,n,o){super(e,t,i,n,o),this.handleSpeechPhraseMessage=e=>r(this,void 0,void 0,function*(){return this.handleSpeechPhrase(e)}),this.handleSpeechHypothesisMessage=e=>this.handleSpeechHypothesis(e)}}t.ConversationServiceRecognizer=s},35481:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriberConnectionFactory=void 0;let r=i(3150),n=i(70806),o=i(7601),s=i(25352),a=i(7601),c=i(92079),l=i(78021);class p extends s.ConnectionFactoryBase{create(e,t,i){let o=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0),p=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),d=s.ConnectionFactoryBase.getHostSuffix(p),u=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+p+".stt.speech"+d),h={},g=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),f=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);g?o&&-1!==o.search(l.QueryParameterNames.CustomSpeechDeploymentId)||(h[l.QueryParameterNames.CustomSpeechDeploymentId]=g):f&&(!o||-1===o.search(l.QueryParameterNames.Language))&&(h[l.QueryParameterNames.Language]=f),void 0!==e.autoDetectSourceLanguages&&(h[l.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,h,o),o||(o="".concat(u).concat(this.universalUri));let m={};void 0!==t.token&&""!==t.token&&(m[t.headerName]=t.token),m[c.HeaderNames.ConnectionId]=i;let C="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),S=new r.WebsocketConnection(o,h,m,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),C,i),y=S.uri;return e.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,y),S}setV2UrlParams(e,t,i){new Map([[n.PropertyId.Speech_SegmentationSilenceTimeoutMs,l.QueryParameterNames.SegmentationSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_EnableAudioLogging,l.QueryParameterNames.EnableAudioLogging],[n.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,l.QueryParameterNames.EndSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,l.QueryParameterNames.InitialSilenceTimeoutMs],[n.PropertyId.SpeechServiceResponse_PostProcessingOption,l.QueryParameterNames.Postprocessing],[n.PropertyId.SpeechServiceResponse_ProfanityOption,l.QueryParameterNames.Profanity],[n.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,l.QueryParameterNames.StableIntermediateThreshold]]).forEach((r,n)=>{this.setUrlParameter(n,r,e,t,i)});let r=JSON.parse(e.parameters.getProperty(o.ServicePropertiesPropertyName,"{}"));Object.keys(r).forEach(e=>{t[e]=r[e]})}constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}}t.ConversationTranscriberConnectionFactory=p},94322:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionServiceRecognizer=void 0;let r=i(70806),n=i(7601);class o extends n.ServiceRecognizerBase{setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){let e=this.privSpeechContext.getSection("phraseDetection");e.mode="Conversation";let t={};t.mode="Anonymous",t.audioSessionId=this.privDiarizationSessionId,t.audioOffsetMs=0,e.speakerDiarization=t,this.privSpeechContext.setSection("phraseDetection",e)}}processTypeSpecificMessages(e){var t,i,o,s;return t=this,i=void 0,o=void 0,s=function*(){let t;let i=new r.PropertyCollection;i.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let o=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let s=n.SpeechHypothesis.fromJSON(e.textBody),a=s.Offset+this.privRequestSession.currentTurnAudioOffset;t=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,i),this.privRequestSession.onHypothesis(a);let c=new r.ConversationTranscriptionEventArgs(t,s.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,c)}catch(e){}o=!0;break;case"speech.phrase":let l=n.SimpleSpeechPhrase.fromJSON(e.textBody),p=n.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),r.ResultReason.Canceled===p){let e=n.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),t=n.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,n.EnumTranslation.implTranslateErrorDetails(t))}else if(!(this.privRequestSession.isSpeechEnded&&p===r.ResultReason.NoMatch&&l.RecognitionStatus!==n.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])t=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,p,l.DisplayText,l.Duration,l.Offset+this.privRequestSession.currentTurnAudioOffset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,e.textBody,i);else{let o=n.DetailedSpeechPhrase.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset,a=o.getJsonWithCorrectedOffsets(s);t=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,p,o.RecognitionStatus===n.RecognitionStatus.Success?o.NBest[0].Display:void 0,o.Duration,s,o.Language,o.LanguageDetectionConfidence,l.SpeakerId,void 0,a,i)}let o=new r.ConversationTranscriptionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,o)}catch(e){}}o=!0}return o},new(o||(o=Promise))(function(e,r){function n(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof o?i:new o(function(e){e(i)})).then(n,a)}c((s=s.apply(t,i||[])).next())})}cancelRecognition(e,t,i,o,s){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[o]),this.privConversationTranscriber.canceled){let t=new r.ConversationTranscriptionCanceledEventArgs(i,s,o,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,t)}catch(e){}}}constructor(e,t,i,r,n){super(e,t,i,r,n),this.privConversationTranscriber=n,this.setSpeakerDiarizationJson()}}t.ConversationTranscriptionServiceRecognizer=o},81906:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogConnectionFactory=void 0;let r=i(3150),n=i(7601),o=i(70806),s=i(25352),a=i(7601),c=i(92079),l=i(78021);class p extends s.ConnectionFactoryBase{create(e,t,i){let d=e.parameters.getProperty(o.PropertyId.Conversation_ApplicationId,""),u=e.parameters.getProperty(o.PropertyId.Conversation_DialogType),h=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region),g=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),f=e.parameters.getProperty(o.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),m={};m[c.HeaderNames.ConnectionId]=i,m[l.QueryParameterNames.Format]=e.parameters.getProperty(n.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase(),m[l.QueryParameterNames.Language]=g,m[l.QueryParameterNames.RequestBotStatusMessages]=f,d&&(m[l.QueryParameterNames.BotId]=d,u===o.DialogServiceConfig.DialogTypes.CustomCommands&&(m[c.HeaderNames.CustomCommandsAppId]=d));let C=u===o.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",S=u===o.DialogServiceConfig.DialogTypes.CustomCommands?"v1":u===o.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",y={};null!=t.token&&""!==t.token&&(y[t.headerName]=t.token);let P=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){let t=s.ConnectionFactoryBase.getHostSuffix(h),i=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://".concat(h,".").concat(p.BaseUrl).concat(t)),r=i.endsWith("/")?i:i+"/";P="".concat(r).concat(C).concat(p.ApiKey,"/").concat(S)}this.setCommonUrlParams(e,m,P);let R="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(P,m,y,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),R,i)}}t.DialogConnectionFactory=p,p.ApiKey="api",p.BaseUrl="convai.speech"},91867:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceAdapter=void 0;let n=i(3150),o=i(38857),s=i(23315),a=i(89833),c=i(70806),l=i(85259),p=i(7601),d=i(58266),u=i(83128);class h extends p.ServiceRecognizerBase{sendMessage(e){return r(this,void 0,void 0,function*(){let t=s.createGuid(),i=s.createNoDashGuid(),r=JSON.stringify({context:{interactionId:t},messagePayload:JSON.parse(e),version:.5}),n=yield this.fetchConnection();yield n.send(new u.SpeechConnectionMessage(s.MessageType.Text,"agent",i,"application/json",r))})}privDisconnect(){return r(this,void 0,void 0,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1})}processTypeSpecificMessages(e){let t,i;let r=new c.PropertyCollection;switch(e.messageType===s.MessageType.Text&&r.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":let n=p.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),n.RecognitionStatus!==p.RecognitionStatus.TooManyRequests&&n.RecognitionStatus!==p.RecognitionStatus.Error){let e=this.fireEventForResult(n,r);if(this.privLastResult=e.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,e)}catch(e){}}i=!0;break;case"speech.hypothesis":let o=p.SpeechHypothesis.fromJSON(e.textBody),a=o.Offset+this.privRequestSession.currentTurnAudioOffset;t=new c.SpeechRecognitionResult(this.privRequestSession.requestId,c.ResultReason.RecognizingSpeech,o.Text,o.Duration,a,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(a);let l=new c.SpeechRecognitionEventArgs(t,o.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,l)}catch(e){}i=!0;break;case"speech.keyword":let d=p.SpeechKeyword.fromJSON(e.textBody);t=new c.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===d.Status?c.ResultReason.RecognizedKeyword:c.ResultReason.NoMatch,d.Text,d.Duration,d.Offset,void 0,void 0,void 0,void 0,e.textBody,r),"Accepted"!==d.Status&&(this.privLastResult=t);let u=new c.SpeechRecognitionEventArgs(t,t.duration,t.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,u)}catch(e){}i=!0;break;case"audio":{let t=e.requestId.toUpperCase(),i=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?i.audioStream.write(e.binaryBody):i.endAudioStream()}catch(e){}}i=!0;break;case"response":this.handleResponseMessage(e),i=!0}let h=new s.Deferred;return h.resolve(i),h.promise}cancelRecognition(e,t,i,n,o){return r(this,void 0,void 0,function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){let t=new c.PropertyCollection;t.setProperty(p.CancellationErrorCodePropertyName,c.CancellationErrorCode[n]);let r=new c.SpeechRecognitionCanceledEventArgs(i,o,n,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,r)}catch(e){}if(this.privSuccessCallback){let e=new c.SpeechRecognitionResult(void 0,c.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,t);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}})}listenOnce(e,t,i){return r(this,void 0,void 0,function*(){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=i,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(c.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let o=this.connectImpl(),s=this.sendPreAudioMessages(),a=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),l=yield this.privDialogAudioSource.format,p=yield this.privDialogAudioSource.deviceInfo,d=new n.ReplayableAudioNode(a,l.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(d,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:p};try{yield o,yield s}catch(e){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.ConnectionFailure,e),Promise.resolve()}let u=new c.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.sendAudio(d).then(()=>{},e=>r(this,void 0,void 0,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.RuntimeError,e)}))})}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){let e=new s.Deferred,t=()=>r(this,void 0,void 0,function*(){try{let i=this.isDisposed(),r=!this.isDisposed()&&this.terminateMessageLoop;if(i||r){e.resolve(void 0);return}let n=yield this.fetchConnection(),o=yield n.read();if(!o)return t();let a=u.SpeechConnectionMessage.fromConnectionMessage(o);switch(a.path.toLowerCase()){case"turn.start":{let e=a.requestId.toUpperCase(),t=this.privRequestSession.requestId.toUpperCase();e!==t?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":let l=p.SpeechDetected.fromJSON(a.textBody),d=new c.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,d);break;case"speech.enddetected":let h;h=a.textBody.length>0?a.textBody:"{ Offset: 0 }";let g=p.SpeechDetected.fromJSON(h);this.privRequestSession.onServiceRecognized(g.Offset+this.privRequestSession.currentTurnAudioOffset);let f=new c.RecognitionEventArgs(g.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f);break;case"turn.end":{let e=a.requestId.toUpperCase(),t=this.privRequestSession.requestId.toUpperCase();if(e!==t)this.privTurnStateManager.CompleteTurn(e);else{let e=new c.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{!(yield this.processTypeSpecificMessages(a))&&this.serviceEvents&&this.serviceEvents.onEvent(new s.ServiceEvent(a.path.toLowerCase(),a.textBody))}catch(e){}}return t()}catch(t){this.terminateMessageLoop=!0,e.resolve()}});return t().catch(e=>{s.Events.instance.onEvent(new s.BackgroundEvent(e))}),e.promise}startMessageLoop(){return r(this,void 0,void 0,function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()})}configConnection(e){return r(this,void 0,void 0,function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)})}sendPreAudioMessages(){return r(this,void 0,void 0,function*(){let e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e,!0),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)})}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(c.PropertyId.Conversation_DialogType)===c.DialogServiceConfig.DialogTypes.CustomCommands){let e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new o.SendingAgentContextMessageEvent(this.agentConfig));let t=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new u.SpeechConnectionMessage(s.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",t))}}sendAgentContext(e){let t=JSON.stringify({channelData:"",context:{interactionId:s.createGuid()},messagePayload:this.privDialogServiceConnector.properties.getProperty(c.PropertyId.Conversation_Speech_Activity_Template),version:.5});return e.send(new u.SpeechConnectionMessage(s.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",t))}fireEventForResult(e,t){let i=p.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),r=e.Offset+this.privRequestSession.currentTurnAudioOffset,n=new c.SpeechRecognitionResult(this.privRequestSession.requestId,i,e.DisplayText,e.Duration,r,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new c.SpeechRecognitionEventArgs(n,r,this.privRequestSession.sessionId)}handleResponseMessage(e){let t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":let i=e.requestId.toUpperCase(),r=d.ActivityPayloadResponse.fromJSON(e.textBody),n=this.privTurnStateManager.GetTurn(i);if(r.conversationId){let e=this.agentConfig.get();e.botInfo.conversationId=r.conversationId,this.agentConfig.set(e)}let o=n.processActivityPayload(r,a.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),l=new c.ActivityReceivedEventArgs(r.messagePayload,o);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,l)}catch(e){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new c.TurnStatusReceivedEventArgs(e.textBody))}catch(e){}break;default:s.Events.instance.onEvent(new s.BackgroundEvent("Unexpected response of type ".concat(t.messageType,". Ignoring.")))}}onEvent(e){this.privEvents.onEvent(e),s.Events.instance.onEvent(e)}addKeywordContextData(){let e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;let t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),i=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),r=e.split(";"),n=void 0===t?[]:t.split(";"),o=void 0===i?[]:i.split(";"),s=[];for(let e=0;e<r.length;e++){let t={};t.text=r[e],e<n.length&&(t.offset=Number(n[e])),e<o.length&&(t.duration=Number(o[e])),s.push(t)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:s,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}constructor(e,t,i,r,n){super(e,t,i,r,n),this.privEvents=new s.EventSource,this.privDialogServiceConnector=n,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new l.DialogServiceTurnStateManager,this.recognizeOverride=(e,t,i)=>this.listenOnce(e,t,i),this.postConnectImplOverride=e=>this.dialogConnectImpl(e),this.configConnectionOverride=e=>this.configConnection(e),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=i,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(e=>{"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)})}}t.DialogServiceAdapter=h},14805:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnState=void 0;let r=i(89833),n=i(59545),o=i(58266);class s{get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===o.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=n.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}}t.DialogServiceTurnState=s},85259:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnStateManager=void 0;let r=i(61954),n=i(14805);class o{StartTurn(e){if(this.privTurnMap.has(e))throw new r.InvalidOperationError("Service error: There is already a turn with id:"+e);let t=new n.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new r.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);let t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}constructor(){this.privTurnMap=new Map;return}}t.DialogServiceTurnStateManager=o},20124:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicGrammarBuilder=void 0;class i{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;let e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){let t=[];this.privPhrases.forEach(e=>{t.push({Text:e})}),e.Groups=[{Type:"Generic",Items:t}]}return e}}t.DynamicGrammarBuilder=i},69148:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29161:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumTranslation=void 0;let r=i(70806),n=i(7601);class o{static implTranslateRecognitionResult(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=r.ResultReason.Canceled;switch(e){case n.RecognitionStatus.Success:i=r.ResultReason.RecognizedSpeech;break;case n.RecognitionStatus.EndOfDictation:i=t?r.ResultReason.RecognizedSpeech:r.ResultReason.NoMatch;break;case n.RecognitionStatus.NoMatch:case n.RecognitionStatus.InitialSilenceTimeout:case n.RecognitionStatus.BabbleTimeout:i=r.ResultReason.NoMatch;break;case n.RecognitionStatus.Error:case n.RecognitionStatus.BadRequest:case n.RecognitionStatus.Forbidden:default:i=r.ResultReason.Canceled}return i}static implTranslateCancelResult(e){let t=r.CancellationReason.EndOfStream;switch(e){case n.RecognitionStatus.Success:case n.RecognitionStatus.EndOfDictation:case n.RecognitionStatus.NoMatch:t=r.CancellationReason.EndOfStream;break;case n.RecognitionStatus.InitialSilenceTimeout:case n.RecognitionStatus.BabbleTimeout:case n.RecognitionStatus.Error:case n.RecognitionStatus.BadRequest:case n.RecognitionStatus.Forbidden:default:t=r.CancellationReason.Error}return t}static implTranslateCancelErrorCode(e){let t=r.CancellationErrorCode.NoError;switch(e){case n.RecognitionStatus.Error:t=r.CancellationErrorCode.ServiceError;break;case n.RecognitionStatus.TooManyRequests:t=r.CancellationErrorCode.TooManyRequests;break;case n.RecognitionStatus.BadRequest:t=r.CancellationErrorCode.BadRequestParameters;break;case n.RecognitionStatus.Forbidden:t=r.CancellationErrorCode.Forbidden;break;default:t=r.CancellationErrorCode.NoError}return t}static implTranslateErrorDetails(e){let t="The speech service encountered an internal error and could not continue.";switch(e){case r.CancellationErrorCode.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case r.CancellationErrorCode.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case r.CancellationErrorCode.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t}}t.EnumTranslation=o},7601:function(e,t,i){"use strict";var r=Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]},n=function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,n(i(45602),t),n(i(72148),t),n(i(48154),t),n(i(35531),t),n(i(80504),t),n(i(22389),t),n(i(5913),t),n(i(13665),t),n(i(13367),t),n(i(17572),t),n(i(19092),t),n(i(86615),t),n(i(51457),t),n(i(12008),t),n(i(35481),t),n(i(73178),t),n(i(63466),t),n(i(38951),t),n(i(29161),t),n(i(80530),t),n(i(70975),t),n(i(54098),t),n(i(98371),t),n(i(99170),t),n(i(79074),t),n(i(12907),t),n(i(19065),t),n(i(69951),t),n(i(94322),t),n(i(12518),t),n(i(39578),t),n(i(58125),t),n(i(69576),t),n(i(70653),t),n(i(93179),t),n(i(72073),t),n(i(47046),t),n(i(65066),t),n(i(20124),t),n(i(69148),t),n(i(91867),t),n(i(39217),t),n(i(46188),t),n(i(19808),t),n(i(52802),t),n(i(9495),t);var o=i(75962);Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return o.AvatarSynthesisAdapter}});var s=i(32726);Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return s.SpeechSynthesisAdapter}}),n(i(98095),t),n(i(1292),t),n(i(86875),t),n(i(9244),t),n(i(19795),t),n(i(13028),t),n(i(721),t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"},92079:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNames=void 0;class i{}t.HeaderNames=i,i.AuthKey="Ocp-Apim-Subscription-Key",i.Authorization="Authorization",i.SpIDAuthKey="Apim-Subscription-Id",i.ConnectionId="X-ConnectionId",i.ContentType="Content-Type",i.CustomCommandsAppId="X-CommandsAppId",i.Path="Path",i.RequestId="X-RequestId",i.RequestStreamId="X-StreamId",i.RequestTimestamp="X-Timestamp"},48154:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthInfo=void 0;class i{get headerName(){return this.privHeaderName}get token(){return this.privToken}constructor(e,t){this.privHeaderName=e,this.privToken=t}}t.AuthInfo=i},35531:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},80504:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},22389:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentConnectionFactory=void 0;let r=i(3150),n=i(70806),o=i(25352),s=i(7601),a=i(92079);class c extends o.ConnectionFactoryBase{create(e,t,i){let c=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint);if(!c){let t=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_IntentRegion),i=o.ConnectionFactoryBase.getHostSuffix(t);c=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+t+".sr.speech"+i)+"/speech/recognition/interactive/cognitiveservices/v1"}let l={format:"simple",language:e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,l,c);let p={};void 0!==t.token&&""!==t.token&&(p[t.headerName]=t.token),p[a.HeaderNames.ConnectionId]=i,e.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,c);let d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(c,l,p,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),d,i)}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}}t.IntentConnectionFactory=c},70653:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentServiceRecognizer=void 0;let r=i(23315),n=i(70806),o=i(7601);class s extends o.ServiceRecognizerBase{setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let t,i;let s=!1,a=new n.PropertyCollection;switch(e.messageType===r.MessageType.Text&&a.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":let c=o.SpeechHypothesis.fromJSON(e.textBody);if(t=new n.IntentRecognitionResult(void 0,this.privRequestSession.requestId,n.ResultReason.RecognizingIntent,c.Text,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,e.textBody,a),this.privRequestSession.onHypothesis(t.offset),i=new n.IntentRecognitionEventArgs(t,c.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,i)}catch(e){}s=!0;break;case"speech.phrase":let l=o.SimpleSpeechPhrase.fromJSON(e.textBody);t=new n.IntentRecognitionResult(void 0,this.privRequestSession.requestId,o.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),l.DisplayText,l.Duration,l.Offset+this.privRequestSession.currentTurnAudioOffset,l.Language,l.LanguageDetectionConfidence,void 0,e.textBody,a),i=new n.IntentRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),!1===this.privIntentDataSent||n.ResultReason.NoMatch===i.result.reason?(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),(()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}})()):this.privPendingIntentArgs=i,s=!0;break;case"response":if(i=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===i){if(""===e.textBody)return;i=new n.IntentRecognitionEventArgs(new n.IntentRecognitionResult,0,this.privRequestSession.sessionId)}let p=o.IntentResponse.fromJSON(e.textBody);if(null!==p&&p.topScoringIntent&&p.topScoringIntent.intent){let t=this.privAddedLmIntents[p.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(t=this.privUmbrellaIntent),t){let r=void 0===t||void 0===t.intentName?p.topScoringIntent.intent:t.intentName,o=i.result.reason;void 0!==r&&(o=n.ResultReason.RecognizedIntent);let s=void 0!==i.result.properties?i.result.properties:new n.PropertyCollection;s.setProperty(n.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),i=new n.IntentRecognitionEventArgs(new n.IntentRecognitionResult(r,i.result.resultId,o,i.result.text,i.result.duration,i.result.offset,void 0,void 0,i.result.errorDetails,i.result.json,s),i.offset,i.sessionId)}}if(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(i.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}s=!0}let d=new r.Deferred;return d.resolve(s),d.promise}cancelRecognition(e,t,i,r,s){let a=new n.PropertyCollection;if(a.setProperty(o.CancellationErrorCodePropertyName,n.CancellationErrorCode[r]),this.privIntentRecognizer.canceled){let t=new n.IntentRecognitionCanceledEventArgs(i,s,r,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,t)}catch(e){}}if(this.privSuccessCallback){let e=new n.IntentRecognitionResult(void 0,t,n.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,s,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}constructor(e,t,i,r,n){super(e,t,i,r,n),this.privIntentRecognizer=n,this.privIntentDataSent=!1}}t.IntentServiceRecognizer=s},78021:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParameterNames=void 0;class i{}t.QueryParameterNames=i,i.BotId="botid",i.CustomSpeechDeploymentId="cid",i.CustomVoiceDeploymentId="deploymentId",i.EnableAudioLogging="storeAudio",i.EnableLanguageId="lidEnabled",i.EnableWordLevelTimestamps="wordLevelTimestamps",i.EndSilenceTimeoutMs="endSilenceTimeoutMs",i.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",i.Format="format",i.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",i.Language="language",i.Profanity="profanity",i.RequestBotStatusMessages="enableBotMessageStatus",i.StableIntermediateThreshold="stableIntermediateThreshold",i.StableTranslation="stableTranslation",i.TestHooks="testhooks",i.Postprocessing="postprocessing",i.CtsMeetingId="meetingId",i.CtsDeviceId="deviceId",i.CtsIsParticipant="isParticipant",i.EnableAvatar="enableTalkingAvatar"},13665:function(e,t,i){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;let o=i(23315);class s extends o.PlatformEvent{get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}constructor(e,t,i,r=o.EventType.Info){super(e,r),this.privRequestId=t,this.privSessionId=i}}t.SpeechRecognitionEvent=s;class a extends s{get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}constructor(e,t,i,r){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=i,this.privAudioNodeId=r}}t.RecognitionTriggeredEvent=a;class c extends s{get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}constructor(e,t,i,r){super("ListeningStartedEvent",e,t),this.privAudioSourceId=i,this.privAudioNodeId=r}}t.ListeningStartedEvent=c;class l extends s{get authFetchEventid(){return this.privAuthFetchEventid}constructor(e,t,i){super("ConnectingToServiceEvent",e,i),this.privAuthFetchEventid=t}}t.ConnectingToServiceEvent=l;class p extends s{get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}constructor(e,t,i,r,n){super("RecognitionStartedEvent",e,n),this.privAudioSourceId=t,this.privAudioNodeId=i,this.privAuthFetchEventId=r}}t.RecognitionStartedEvent=p,(n=r=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}))[n.Success=0]="Success",n[n.AudioSourceError=1]="AudioSourceError",n[n.AudioSourceTimeout=2]="AudioSourceTimeout",n[n.AuthTokenFetchError=3]="AuthTokenFetchError",n[n.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",n[n.UnAuthorized=5]="UnAuthorized",n[n.ConnectTimeout=6]="ConnectTimeout",n[n.ConnectError=7]="ConnectError",n[n.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",n[n.UnknownError=9]="UnknownError";class d extends s{get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}constructor(e,t,i,n,s,a,c,l){super("RecognitionEndedEvent",e,s,c===r.Success?o.EventType.Info:o.EventType.Error),this.privAudioSourceId=t,this.privAudioNodeId=i,this.privAuthFetchEventId=n,this.privStatus=c,this.privError=l,this.privServiceTag=a}}t.RecognitionEndedEvent=d},19092:function(e,t,i){"use strict";var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;let s=i(70806),a=i(7601);(n=r=t.RecognitionMode||(t.RecognitionMode={}))[n.Interactive=0]="Interactive",n[n.Conversation=1]="Conversation",n[n.Dictation=2]="Dictation",(o=t.SpeechResultFormat||(t.SpeechResultFormat={}))[o.Simple=0]="Simple",o[o.Detailed=1]="Detailed";class c{get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){let e=[],t=!1;if(void 0!==this.autoDetectSourceLanguages)for(let i of this.autoDetectSourceLanguages.split(",")){let r=i+s.PropertyId.SpeechServiceConnection_EndpointId.toString(),n=this.parameters.getProperty(r,void 0);void 0!==n?(e.push({language:i,endpoint:n}),t=!0):e.push({language:i,endpoint:""})}return t?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}constructor(e,t){this.privSpeechServiceConfig=e||new a.SpeechServiceConfig(new a.Context(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=t.getProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}}t.RecognizerConfig=c},47046:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.RequestSession=void 0;let n=i(23315),o=i(13665),s=i(51130);class a{get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new s.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new o.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t){return r(this,void 0,void 0,function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new o.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new o.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return r(this,void 0,void 0,function*(){e&&(yield this.onComplete())})}onConnectionEstablishCompleted(e,t){return r(this,void 0,void 0,function*(){if(200===e){this.onEvent(new o.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}403===e&&(yield this.onComplete())})}onServiceTurnEndResponse(e){return r(this,void 0,void 0,function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=n.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new n.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return r(this,void 0,void 0,function*(){if(!this.privIsDisposed){for(let e of(this.privIsDisposed=!0,this.privDetachables))yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return r(this,void 0,void 0,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),n.Events.instance.onEvent(e)}onComplete(){return r(this,void 0,void 0,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return r(this,void 0,void 0,function*(){!this.privIsAudioNodeDetached&&(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}constructor(e){this.privIsDisposed=!1,this.privDetachables=[],this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=n.createNoDashGuid(),this.privAudioNodeId=n.createNoDashGuid(),this.privTurnDeferral=new n.Deferred,this.privTurnDeferral.resolve()}}t.RequestSession=a},58266:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class r{static fromJSON(e){return new r(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}constructor(e){this.privActivityResponse=JSON.parse(e)}}t.ActivityPayloadResponse=r,(i=t.MessageDataStreamType||(t.MessageDataStreamType={}))[i.None=0]="None",i[i.TextToSpeechAudio=1]="TextToSpeechAudio"},39578:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DetailedSpeechPhrase=void 0;let r=i(7601);class n{static fromJSON(e){return new n(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let t;for(let e of this.privDetailedSpeechPhrase.NBest)if(e.Words&&e.Words[0]){t=e.Words[0].Offset;break}if(t&&t<e){let i=e-t;for(let e of this.privDetailedSpeechPhrase.NBest){if(e.Words)for(let t of e.Words)t.Offset+=i;if(e.DisplayWords)for(let t of e.DisplayWords)t.Offset+=i}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}}t.DetailedSpeechPhrase=n},80530:function(e,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,(i=t.SynthesisStatus||(t.SynthesisStatus={}))[i.Success=0]="Success",i[i.SynthesisEnd=1]="SynthesisEnd",i[i.Error=2]="Error",(r=t.RecognitionStatus||(t.RecognitionStatus={}))[r.Success=0]="Success",r[r.NoMatch=1]="NoMatch",r[r.InitialSilenceTimeout=2]="InitialSilenceTimeout",r[r.BabbleTimeout=3]="BabbleTimeout",r[r.Error=4]="Error",r[r.EndOfDictation=5]="EndOfDictation",r[r.TooManyRequests=6]="TooManyRequests",r[r.BadRequest=7]="BadRequest",r[r.Forbidden=8]="Forbidden"},93179:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentResponse=void 0;class i{static fromJSON(e){return new i(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}constructor(e){""===e?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}}t.IntentResponse=i},58125:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpeechPhrase=void 0;let r=i(7601);class n{static fromJSON(e){return new n(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}}t.SimpleSpeechPhrase=n},72073:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},79074:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechDetected=void 0;class i{static fromJSON(e){return new i(e)}get Offset(){return this.privSpeechStartDetected.Offset}constructor(e){this.privSpeechStartDetected=JSON.parse(e)}}t.SpeechDetected=i},12907:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechHypothesis=void 0;class i{static fromJSON(e){return new i(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}constructor(e){this.privSpeechHypothesis=JSON.parse(e)}}t.SpeechHypothesis=i},19065:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechKeyword=void 0;class i{static fromJSON(e){return new i(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}constructor(e){this.privSpeechKeyword=JSON.parse(e)}}t.SpeechKeyword=i},19808:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,(i=t.MetadataType||(t.MetadataType={})).WordBoundary="WordBoundary",i.Bookmark="Bookmark",i.Viseme="Viseme",i.SentenceBoundary="SentenceBoundary",i.SessionEnd="SessionEnd",i.AvatarSignal="TalkingAvatarSignal";class r{static fromJSON(e){return new r(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}}t.SynthesisAudioMetadata=r},54098:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationHypothesis=void 0;let r=i(66918),n=i(93314);class o{static fromJSON(e){return new o(JSON.parse(e))}static fromTranslationResponse(e){r.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");let t=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,t.Translation=e,new o(t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return null===(e=this.privTranslationHypothesis.PrimaryLanguage)||void 0===e?void 0:e.Language}constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=n.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}}t.TranslationHypothesis=o},98371:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationPhrase=void 0;let r=i(66918),n=i(7601),o=i(93314);class s{static fromJSON(e){return new s(JSON.parse(e))}static fromTranslationResponse(e){r.Contracts.throwIfNullOrUndefined(e,"translationResponse");let t=e.SpeechPhrase;return e.SpeechPhrase=void 0,t.Translation=e,t.Text=t.DisplayText,new s(t)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Language}get Confidence(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Confidence}get Translation(){return this.privTranslationPhrase.Translation}constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=n.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=o.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}}t.TranslationPhrase=s},70975:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEnd=void 0;let r=i(7601);class n{static fromJSON(e){return new n(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.Status])}}t.TranslationSynthesisEnd=n},60501:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusResponsePayload=void 0;class i{static fromJSON(e){return new i(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}constructor(e){this.privMessageStatusResponse=JSON.parse(e)}}t.TurnStatusResponsePayload=i},13367:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRecognizerBase=void 0;let n=i(3150),o=i(23315),s=i(70806),a=i(7601),c=i(83128);class l{setTranslationJson(){let e=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==e){let t=e.split(","),i=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);if(this.privSpeechContext.setSection("translation",{onSuccess:{action:void 0!==i?"Synthesize":"None"},output:{interimResults:{mode:"Always"}},targetLanguages:t}),void 0!==i){let e={};for(let r of t)e[r]=i;this.privSpeechContext.setSection("synthesis",{defaultVoices:e})}}}setSpeechSegmentationTimeoutJson(){let e=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==e){let t=this.recognitionMode===a.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===a.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",i=parseInt(e,10),r=this.privSpeechContext.getSection("phraseDetection");r.mode=t,r[t]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:i}},this.privSpeechContext.setSection("phraseDetection",r)}}setLanguageIdJson(){let e=this.privSpeechContext.getSection("phraseDetection");if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){let t;let i=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");t="Continuous"===this.privRecognizerConfig.languageIdMode?"DetectContinuous":"DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:i,mode:t,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});let r=this.privRecognizerConfig.sourceLanguageModels;void 0!==r&&(e.customModels=r,e.onInterim={action:"None"},e.onSuccess={action:"None"})}void 0!==this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&(e.onInterim={action:"Translate"},e.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",e)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&("true"===this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(a.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()===s.OutputFormat[s.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}dispose(e){return r(this,void 0,void 0,function*(){if(this.privIsDisposed=!0,void 0!==this.privConnectionConfigurationPromise)try{let t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}catch(e){return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,i){return r(this,void 0,void 0,function*(){let o;if(void 0!==this.recognizeOverride){yield this.recognizeOverride(e,t,i);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=t,this.privErrorCallback=i,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);let c=this.connectImpl();try{let e=yield this.audioSource.attach(this.privRequestSession.audioNodeId),t=yield this.audioSource.format,i=yield this.audioSource.deviceInfo;this.privIsLiveAudio=i.type&&i.type===a.type.Microphones,o=new n.ReplayableAudioNode(e,t.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(o,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:i}}catch(e){throw yield this.privRequestSession.onStopRecognizing(),e}try{yield c}catch(e){yield this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,e);return}let l=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.receiveMessage(),this.sendAudio(o).catch(e=>r(this,void 0,void 0,function*(){yield this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)}))})}stopRecognizing(){return r(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return r(this,void 0,void 0,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(e,t){this.connectImpl().then(()=>{try{e&&e()}catch(e){t&&t(e)}},e=>{try{t&&t(e)}catch(e){}})}disconnect(){return r(this,void 0,void 0,function*(){if(yield this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride()),void 0!==this.privConnectionPromise)try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=void 0})}sendMessage(e){}sendNetworkMessage(e,t){return r(this,void 0,void 0,function*(){let i="string"==typeof t?o.MessageType.Text:o.MessageType.Binary;return(yield this.fetchConnection()).send(new c.SpeechConnectionMessage(i,e,this.privRequestSession.requestId,"string"==typeof t?"application/json":"",t))})}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}sendTelemetryData(){return r(this,void 0,void 0,function*(){let e=this.privRequestSession.getTelemetry();if(!0!==l.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(l.telemetryData)try{l.telemetryData(e)}catch(e){}let t=yield this.fetchConnection();yield t.send(new c.SpeechConnectionMessage(o.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))})}cancelRecognitionLocal(e,t,i){return r(this,void 0,void 0,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,i))})}receiveMessage(){return r(this,void 0,void 0,function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection(),t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.receiveMessage();this.privServiceHasSentMessage=!0;let i=c.SpeechConnectionMessage.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":let r=a.SpeechDetected.fromJSON(i.textBody),n=new s.RecognitionEventArgs(r.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,n);break;case"speech.enddetected":let l;l=i.textBody.length>0?i.textBody:"{ Offset: 0 }";let p=a.SpeechDetected.fromJSON(l),d=new s.RecognitionEventArgs(p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,d);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(s.CancellationReason.EndOfStream,s.CancellationErrorCode.NoError,void 0));let u=new s.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing)e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);else{this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,u);return}break;default:!(yield this.processTypeSpecificMessages(i))&&this.privServiceEvents&&this.serviceEvents.onEvent(new o.ServiceEvent(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch(e){return null}})}updateSpeakerDiarizationAudioOffset(){let e=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(e)}sendSpeechContext(e,t){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();let i=this.speechContext.toJSON();if(t&&this.privRequestSession.onSpeechContext(),i)return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",i))}noOp(){}sendPrePayloadJSON(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return r(this,void 0,void 0,function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,t),yield this.sendWaveHeader(e)})}sendWaveHeader(e){return r(this,void 0,void 0,function*(){let t=yield this.audioSource.format;return e.send(new c.SpeechConnectionMessage(o.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))})}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then(e=>e.state()===o.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),void 0!==this.postConnectImplOverride)?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise}sendSpeechServiceConfig(e,t,i){if(t.onSpeechContext(),!0!==l.telemetryDataEnabled&&(i=JSON.stringify({context:{system:JSON.parse(i).context.system}})),"true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){let e=JSON.parse(i);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",i=JSON.stringify(e)}if(i)return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"speech.config",t.requestId,"application/json",i))}fetchConnection(){return r(this,void 0,void 0,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===o.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(e){return r(this,void 0,void 0,function*(){let t=yield this.audioSource.format;this.privAverageBytesPerMs=t.avgBytesPerSec/1e3;let i=Date.now(),n=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),s=t.avgBytesPerSec/1e3*parseInt(n,10),a=this.privRequestSession.recogNumber,l=()=>r(this,void 0,void 0,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===a){let r,n;let p=yield this.fetchConnection(),d=yield e.read();if(!this.privRequestSession.isSpeechEnded&&(!d||d.isEnd?(r=null,n=0):(r=d.buffer,this.privRequestSession.onAudioSent(r.byteLength),n=s>=this.privRequestSession.bytesSent?0:Math.max(0,i-Date.now())),0!==n&&(yield this.delay(n)),null!==r&&(i=Date.now()+1e3*r.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===a)){if(p.send(new c.SpeechConnectionMessage(o.MessageType.Binary,"audio",this.privRequestSession.requestId,null,r)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),!(null==d?void 0:d.isEnd))return l();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}});return l()})}retryableConnect(){return r(this,void 0,void 0,function*(){let e=!1;this.privAuthFetchEventId=o.createNoDashGuid();let t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:o.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let i=0,r="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){let t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),n=yield t;yield this.privRequestSession.onAuthCompleted(!1);let o=this.privConnectionFactory.create(this.privRecognizerConfig,n,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(o.events),o.events.attach(e=>{this.connectionEvents.onEvent(e)});let s=yield o.open();if(200===s.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(s.statusCode),Promise.resolve(o);1006===s.statusCode&&(e=!0),i=s.statusCode,r=s.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(i,r),Promise.reject("Unable to contact server. StatusCode: ".concat(i,", ").concat(this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint)," Reason: ").concat(r))})}delay(e){return new Promise(t=>this.privSetTimeout(t,e))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{let i=new Uint8Array(e);t+="".concat(e.byteLength,"\r\n");for(let r=0;r<e.byteLength;r++)t+=i[r].toString(16).padStart(2,"0")+" ",(r+1)%16==0&&(console.info(t),t="")}console.info(t)}sendFinalAudio(){return r(this,void 0,void 0,function*(){let e=yield this.fetchConnection();yield e.send(new c.SpeechConnectionMessage(o.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return r(this,void 0,void 0,function*(){let e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)})}constructor(e,t,i,r,n){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new o.ArgumentNullError("authentication");if(!t)throw new o.ArgumentNullError("connectionFactory");if(!i)throw new o.ArgumentNullError("audioSource");if(!r)throw new o.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=r.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=i,this.privRecognizerConfig=r,this.privIsDisposed=!1,this.privRecognizer=n,this.privRequestSession=new a.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new o.EventSource,this.privServiceEvents=new o.EventSource,this.privDynamicGrammar=new a.DynamicGrammarBuilder,this.privSpeechContext=new a.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new a.AgentConfig,"on"===this.privRecognizerConfig.parameters.getProperty(s.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?this.privSetTimeout=o.Timeout.setTimeout:"undefined"!=typeof window&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach(e=>{"ConnectionClosedEvent"===e.name&&(1003===e.statusCode||1007===e.statusCode||1002===e.statusCode||4e3===e.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(s.CancellationReason.Error,1007===e.statusCode?s.CancellationErrorCode.BadRequestParameters:s.CancellationErrorCode.ConnectionFailure,"".concat(e.reason," websocket error code: ").concat(e.statusCode))}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=o.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}}t.ServiceRecognizerBase=l,l.telemetryDataEnabled=!0},51130:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceTelemetryListener=void 0;let r=i(23315),n=i(13665);class o{phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){!this.privIsDisposed&&(e instanceof n.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof r.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof r.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof r.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&!this.privMicMetric&&(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime}),e instanceof r.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&!this.privMicMetric&&(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime}),e instanceof r.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&!this.privMicMetric&&(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime}),e instanceof n.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof r.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof r.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&!this.privConnectionEstablishMetric&&(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime}),e instanceof r.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&!this.privConnectionEstablishMetric&&(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime}),e instanceof r.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=[]),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){let e=[];this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});let t=JSON.stringify({Metrics:e,ReceivedMessages:this.privReceivedMessages});return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],t}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}constructor(e,t,i){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=i,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}}t.ServiceTelemetryListener=o},9244:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionConfig=void 0;let r=i(7601);class n{get parameters(){return this.privParameters}get Context(){return this.privContext}constructor(e,t){this.privContext=e||new r.Context(null),this.privParameters=t}}t.SpeakerRecognitionConfig=n},5913:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileConnectionFactory=t.SpeakerRecognitionConnectionFactory=void 0;let r=i(3150),n=i(70806),o=i(25352),s=i(7601),a=i(92079);class c extends o.ConnectionFactoryBase{create(e,t,i,c){let l=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint);if(!l){let t=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),r=o.ConnectionFactoryBase.getHostSuffix(t),s=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://".concat(t,".spr-frontend.speech").concat(r)),a=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");l="".concat(s,"/speaker/ws/").concat(this.scenarioToPath(a),"/").concat(i)}let p={format:"simple",language:e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,p,l);let d={};void 0!==t.token&&""!==t.token&&(d[t.headerName]=t.token),d[a.HeaderNames.ConnectionId]=c,d[a.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,l);let u="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(l,p,d,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),u,c)}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}class l extends c{create(e,t,i){return super.create(e,t,"recognition",i)}}t.SpeakerRecognitionConnectionFactory=l;class p extends c{create(e,t,i){return super.create(e,t,"profile",i)}}t.VoiceProfileConnectionFactory=p},19795:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerServiceRecognizer=void 0;let n=i(3150),o=i(23315),s=i(70806),a=i(7601),c=i(83128);class l extends a.ServiceRecognizerBase{processTypeSpecificMessages(e){let t=!1,i=new s.PropertyCollection;if(e.messageType===o.MessageType.Text&&i.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),"speaker.response"===e.path.toLowerCase()){let i;let r=JSON.parse(e.textBody);i="success"!==r.status.statusCode.toLowerCase()?new s.SpeakerRecognitionResult(r,s.ResultReason.Canceled,s.CancellationErrorCode.ServiceError,r.status.reason):new s.SpeakerRecognitionResult(r,s.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(i),t=!0}let r=new o.Deferred;return r.resolve(t),r.promise}cancelRecognition(e,t,i,r,n){if(new s.PropertyCollection().setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[r]),this.privResultDeferral){let e=new s.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:n,reason:n}},s.ResultReason.Canceled,r,n);try{this.privResultDeferral.resolve(e)}catch(e){this.privResultDeferral.reject(e)}}}recognizeSpeakerOnce(e){return r(this,void 0,void 0,function*(){this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new o.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(s.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let t=this.connectImpl(),i=this.sendPreAudioMessages(this.extractSpeakerContext(e)),r=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privSpeakerAudioSource.format,c=yield this.privSpeakerAudioSource.deviceInfo,l=new n.ReplayableAudioNode(r,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(l,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield t,yield i}catch(e){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,e)}let p=new s.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,p),this.receiveMessage(),this.sendAudio(l).then(()=>{},e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)}),this.privResultDeferral.promise})}sendPreAudioMessages(e){return r(this,void 0,void 0,function*(){let t=yield this.fetchConnection();yield this.sendSpeakerRecognition(t,e)})}sendSpeakerRecognition(e,t){return r(this,void 0,void 0,function*(){let i=JSON.stringify(t);return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",i))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}constructor(e,t,i,r,n){super(e,t,i,r,n),this.privSpeakerRecognizer=n,this.privSpeakerAudioSource=i,this.recognizeSpeaker=e=>this.recognizeSpeakerOnce(e),this.sendPrePayloadJSONOverride=()=>this.noOp()}}t.SpeakerServiceRecognizer=l},12008:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionFactory=void 0;let r=i(3150),n=i(7601),o=i(70806),s=i(25352),a=i(7601),c=i(92079),l=i(78021);class p extends s.ConnectionFactoryBase{create(e,t,i){let p=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,void 0),d=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region,void 0),u=s.ConnectionFactoryBase.getHostSuffix(d),h=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://"+d+".stt.speech"+u),g={},f=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?p&&-1!==p.search(l.QueryParameterNames.CustomSpeechDeploymentId)||(g[l.QueryParameterNames.CustomSpeechDeploymentId]=f):m&&(!p||-1===p.search(l.QueryParameterNames.Language))&&(g[l.QueryParameterNames.Language]=m),p&&-1!==p.search(l.QueryParameterNames.Format)||(g[l.QueryParameterNames.Format]=e.parameters.getProperty(n.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(g[l.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,g,p),!p)switch(e.recognitionMode){case a.RecognitionMode.Conversation:p="true"===e.parameters.getProperty(n.ForceDictationPropertyName,"false")?h+this.dictationRelativeUri:void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?"".concat(h).concat(this.universalUri).concat(e.recognitionEndpointVersion):h+this.conversationRelativeUri;break;case a.RecognitionMode.Dictation:p=h+this.dictationRelativeUri;break;default:p=void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?"".concat(h).concat(this.universalUri).concat(e.recognitionEndpointVersion):h+this.interactiveRelativeUri}let C={};void 0!==t.token&&""!==t.token&&(C[t.headerName]=t.token),C[c.HeaderNames.ConnectionId]=i;let S="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),y=new r.WebsocketConnection(p,g,C,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),S,i),P=y.uri;return e.parameters.setProperty(o.PropertyId.SpeechServiceConnection_Url,P),y}constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}}t.SpeechConnectionFactory=p},83128:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionMessage=void 0;let r=i(23315),n=i(92079);class o extends r.ConnectionMessage{get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,i=null,r=null,s=null,a={};if(e.headers)for(let o in e.headers)o&&(o.toLowerCase()===n.HeaderNames.Path.toLowerCase()?t=e.headers[o]:o.toLowerCase()===n.HeaderNames.RequestId.toLowerCase()?i=e.headers[o]:o.toLowerCase()===n.HeaderNames.ContentType.toLowerCase()?r=e.headers[o]:o.toLowerCase()===n.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[o]:a[o]=e.headers[o]);return new o(e.messageType,t,i,r,e.body,s,a,e.id)}constructor(e,t,i,o,s,a,c,l){if(!t)throw new r.ArgumentNullError("path");if(!i)throw new r.ArgumentNullError("requestId");let p={};if(p[n.HeaderNames.Path]=t,p[n.HeaderNames.RequestId]=i,p[n.HeaderNames.RequestTimestamp]=new Date().toISOString(),o&&(p[n.HeaderNames.ContentType]=o),a&&(p[n.HeaderNames.RequestStreamId]=a),c)for(let e in c)e&&(p[e]=c[e]);l?super(e,s,p,l):super(e,s,p),this.privPath=t,this.privRequestId=i,this.privContentType=o,this.privStreamId=a,this.privAdditionalHeaders=c}}t.SpeechConnectionMessage=o},65066:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechContext=void 0;class i{getSection(e){return this.privContext[e]||{}}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),i&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR"),t&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:t},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){let e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}constructor(e){this.privContext={},this.privDynamicGrammar=e}}t.SpeechContext=i},721:function(e,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;class n{serialize(){return JSON.stringify(this,(e,t)=>{if(t&&"object"==typeof t&&!Array.isArray(t)){let e={};for(let i in t)Object.hasOwnProperty.call(t,i)&&(e[i&&i.charAt(0).toLowerCase()+i.substring(1)]=t[i]);return e}return t})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}constructor(e){this.context=e}}t.SpeechServiceConfig=n;class o{constructor(e){this.system=new s,this.os=e}}t.Context=o;class s{constructor(){this.name="SpeechSDK",this.version="1.34.0",this.build="JavaScript",this.lang="JavaScript"}}t.System=s;class a{constructor(e,t,i){this.platform=e,this.name=t,this.version=i}}t.OS=a;class c{constructor(e,t,i){this.manufacturer=e,this.model=t,this.version=i}}t.Device=c,(i=t.connectivity||(t.connectivity={})).Bluetooth="Bluetooth",i.Wired="Wired",i.WiFi="WiFi",i.Cellular="Cellular",i.InBuilt="InBuilt",i.Unknown="Unknown",(r=t.type||(t.type={})).Phone="Phone",r.Speaker="Speaker",r.Car="Car",r.Headset="Headset",r.Thermostat="Thermostat",r.Microphones="Microphones",r.Deskphone="Deskphone",r.RemoteControl="RemoteControl",r.Unknown="Unknown",r.File="File",r.Stream="Stream"},86615:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},69951:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechServiceRecognizer=void 0;let r=i(70806),n=i(7601);class o extends n.ServiceRecognizerBase{processTypeSpecificMessages(e){var t,i,o,s;return t=this,i=void 0,o=void 0,s=function*(){let t;let i=new r.PropertyCollection;i.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let o=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let s=n.SpeechHypothesis.fromJSON(e.textBody),a=s.Offset+this.privRequestSession.currentTurnAudioOffset;t=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,i),this.privRequestSession.onHypothesis(a);let c=new r.SpeechRecognitionEventArgs(t,s.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,c)}catch(e){}o=!0;break;case"speech.phrase":let l=n.SimpleSpeechPhrase.fromJSON(e.textBody),p=n.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),r.ResultReason.Canceled===p){let e=n.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),t=n.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,n.EnumTranslation.implTranslateErrorDetails(t))}else{if(!(this.privRequestSession.isSpeechEnded&&p===r.ResultReason.NoMatch&&l.RecognitionStatus!==n.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])t=new r.SpeechRecognitionResult(this.privRequestSession.requestId,p,l.DisplayText,l.Duration,l.Offset+this.privRequestSession.currentTurnAudioOffset,l.Language,l.LanguageDetectionConfidence,void 0,void 0,e.textBody,i);else{let o=n.DetailedSpeechPhrase.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset,a=o.getJsonWithCorrectedOffsets(s);t=new r.SpeechRecognitionResult(this.privRequestSession.requestId,p,o.RecognitionStatus===n.RecognitionStatus.Success?o.NBest[0].Display:void 0,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,a,i)}let o=new r.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,o)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}return o},new(o||(o=Promise))(function(e,r){function n(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof o?i:new o(function(e){e(i)})).then(n,a)}c((s=s.apply(t,i||[])).next())})}cancelRecognition(e,t,i,o,s){let a=new r.PropertyCollection;if(a.setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){let t=new r.SpeechRecognitionCanceledEventArgs(i,s,o,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(e){}}if(this.privSuccessCallback){let e=new r.SpeechRecognitionResult(t,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}constructor(e,t,i,r,n){super(e,t,i,r,n),this.privSpeechRecognizer=n}}t.SpeechServiceRecognizer=o},32726:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisAdapter=void 0;let r=i(70806),n=i(7601);class o extends n.SynthesisAdapterBase{setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(e){let t=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(e,r.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t)}onSynthesizing(e){if(this.privSpeechSynthesizer.synthesizing)try{let t=this.privSynthesisTurn.audioOutputFormat.addHeader(e),i=new r.SpeechSynthesisEventArgs(new r.SpeechSynthesisResult(this.privSynthesisTurn.requestId,r.ResultReason.SynthesizingAudio,t));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,i)}catch(e){}}onSynthesisCancelled(e){if(this.privSpeechSynthesizer.SynthesisCanceled){let t=new r.SpeechSynthesisEventArgs(e);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,t)}catch(e){}}}onSynthesisCompleted(e){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new r.SpeechSynthesisEventArgs(e))}catch(e){}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(e){}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(e){}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch(e){}}constructor(e,t,i,r,n){super(e,t,i,n),this.privSpeechSynthesizer=r,this.privSynthesizer=r}}t.SpeechSynthesisAdapter=o},38951:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisConnectionFactory=void 0;let r=i(3150),n=i(70806),o=i(25352),s=i(7601),a=i(92079),c=i(78021);class l{create(e,t,i){let l=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0),p=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),d=o.ConnectionFactoryBase.getHostSuffix(p),u=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),h=void 0===u?"tts":"voice",g=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+p+"."+h+".speech"+d),f={},m={};void 0!==t.token&&""!==t.token&&(m[t.headerName]=t.token),m[a.HeaderNames.ConnectionId]=i,void 0===u||""===u||l&&-1!==l.search(c.QueryParameterNames.CustomVoiceDeploymentId)||(f[c.QueryParameterNames.CustomVoiceDeploymentId]=u),e.avatarEnabled&&(!l||-1===l.search(c.QueryParameterNames.EnableAvatar))&&(f[c.QueryParameterNames.EnableAvatar]="true"),l||(l=g+this.synthesisUri),e.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,l);let C="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(l,f,m,new s.WebsocketMessageFormatter,r.ProxyInfo.fromParameters(e.parameters),C,i)}constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}}t.SpeechSynthesisConnectionFactory=l},9495:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAdapterBase=void 0;let n=i(23315),o=i(70806),s=i(7601),a=i(83128);class c{get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}dispose(e){return r(this,void 0,void 0,function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){let t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}})}connect(){return r(this,void 0,void 0,function*(){yield this.connectImpl()})}sendNetworkMessage(e,t){return r(this,void 0,void 0,function*(){let i="string"==typeof t?n.MessageType.Text:n.MessageType.Binary;return(yield this.fetchConnection()).send(new a.SpeechConnectionMessage(i,e,this.privSynthesisTurn.requestId,"string"==typeof t?"application/json":"",t))})}Speak(e,t,i,n,s,a){return r(this,void 0,void 0,function*(){let r;if(r=t?e:this.privSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(r,i,n,s);this.privSuccessCallback=n,this.privErrorCallback=s,this.privSynthesisTurn.startNewSynthesis(i,e,t,a);try{yield this.connectImpl();let e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,r,i),this.onSynthesisStarted(i),this.receiveMessage()}catch(e){return this.cancelSynthesisLocal(o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,e),Promise.reject(e)}})}stopSpeaking(){return r(this,void 0,void 0,function*(){return yield this.connectImpl(),(yield this.fetchConnection()).send(new a.SpeechConnectionMessage(n.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))})}cancelSynthesis(e,t,i,r){let n=new o.PropertyCollection;n.setProperty(s.CancellationErrorCodePropertyName,o.CancellationErrorCode[i]);let a=new o.SpeechSynthesisResult(e,o.ResultReason.Canceled,void 0,r,n);if(this.onSynthesisCancelled(a),this.privSuccessCallback)try{this.privSuccessCallback(a)}catch(e){}}cancelSynthesisLocal(e,t,i){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,i))}processTypeSpecificMessages(e){return!0}receiveMessage(){return r(this,void 0,void 0,function*(){try{let e=yield this.fetchConnection(),t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!t){if(!this.privSynthesisTurn.isSynthesizing)return;return this.receiveMessage()}let i=a.SpeechConnectionMessage.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(i.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(i.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===i.streamId.toLowerCase()&&i.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(i.binaryBody),this.onSynthesizing(i.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(i.binaryBody));break;case"audio.metadata":for(let e of s.SynthesisAudioMetadata.fromJSON(i.textBody).Metadata)switch(e.Type){case s.MetadataType.WordBoundary:case s.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(e);let t=new o.SpeechSynthesisWordBoundaryEventArgs(e.Data.Offset,e.Data.Duration,e.Data.text.Text,e.Data.text.Length,e.Type===s.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,e.Data.text.BoundaryType);this.onWordBoundary(t);break;case s.MetadataType.Bookmark:let i=new o.SpeechSynthesisBookmarkEventArgs(e.Data.Offset,e.Data.Bookmark);this.onBookmarkReached(i);break;case s.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(e),e.Data.IsLastAnimation){let t=new o.SpeechSynthesisVisemeEventArgs(e.Data.Offset,e.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(t)}break;case s.MetadataType.AvatarSignal:this.onAvatarEvent(e);break;case s.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(e)}break;case"turn.end":let r;this.privSynthesisTurn.onServiceTurnEndResponse();try{r=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(r)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.onSynthesisCompleted(r);break;default:!this.processTypeSpecificMessages(i)&&this.privServiceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch(e){}})}sendSynthesisContext(e){this.setSynthesisContextSynthesisSection();let t=this.synthesisContext.toJSON();if(t)return e.send(new a.SpeechConnectionMessage(n.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))}setSpeechConfigSynthesisSection(){}connectImpl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null!=this.privConnectionPromise)return this.privConnectionPromise.then(e=>e.state()===n.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=n.createNoDashGuid(),this.privConnectionId=n.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);let t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then(t=>r(this,void 0,void 0,function*(){this.privSynthesisTurn.onAuthCompleted(!1);let i=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);i.events.attach(e=>{this.connectionEvents.onEvent(e)});let r=yield i.open();return 200===r.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.resolve(i)):403!==r.statusCode||e?(this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.reject("Unable to contact server. StatusCode: ".concat(r.statusCode,", ").concat(this.privSynthesizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint)," Reason: ").concat(r.reason))):this.connectImpl(!0)}),e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),Error(e)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(e,t){if(t)return e.send(new a.SpeechConnectionMessage(n.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))}sendSsmlMessage(e,t,i){return e.send(new a.SpeechConnectionMessage(n.MessageType.Text,"ssml",i,"application/ssml+xml",t))}fetchConnection(){return r(this,void 0,void 0,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===n.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return r(this,void 0,void 0,function*(){let e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)})}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}constructor(e,t,i,r){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new n.ArgumentNullError("authentication");if(!t)throw new n.ArgumentNullError("connectionFactory");if(!i)throw new n.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=i,this.privIsDisposed=!1,this.privSessionAudioDestination=r,this.privSynthesisTurn=new s.SynthesisTurn,this.privConnectionEvents=new n.EventSource,this.privServiceEvents=new n.EventSource,this.privSynthesisContext=new s.SynthesisContext,this.privAgentConfig=new s.AgentConfig,this.connectionEvents.attach(e=>{"ConnectionClosedEvent"===e.name&&1e3!==e.statusCode&&this.cancelSynthesisLocal(o.CancellationReason.Error,1007===e.statusCode?o.CancellationErrorCode.BadRequestParameters:o.CancellationErrorCode.ConnectionFailure,"".concat(e.reason," websocket error code: ").concat(e.statusCode))})}}t.SynthesisAdapterBase=c,c.telemetryDataEnabled=!0},86875:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisContext=void 0;let r=i(70806);class n{setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){let t=this.buildSynthesisContext(e);this.setSection("synthesis",t)}buildSynthesisContext(e){return{audio:{metadataOptions:{bookmarkEnabled:!!(null==e?void 0:e.bookmarkReached),punctuationBoundaryEnabled:null==e?void 0:e.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(null==e?void 0:e.wordBoundary)),sentenceBoundaryEnabled:null==e?void 0:e.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(null==e?void 0:e.visemeReceived),wordBoundaryEnabled:null==e?void 0:e.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(null==e?void 0:e.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:null==e?void 0:e.autoDetectSourceLanguage}}}constructor(){this.privContext={}}}t.SynthesisContext=n},23985:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisStartedEvent=t.ConnectingToSynthesisServiceEvent=t.SynthesisTriggeredEvent=t.SpeechSynthesisEvent=void 0;let r=i(23315);class n extends r.PlatformEvent{get requestId(){return this.privRequestId}constructor(e,t,i=r.EventType.Info){super(e,i),this.privRequestId=t}}t.SpeechSynthesisEvent=n;class o extends n{get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}constructor(e,t,i){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=i}}t.SynthesisTriggeredEvent=o;class s extends n{get authFetchEventId(){return this.privAuthFetchEventId}constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}}t.ConnectingToSynthesisServiceEvent=s;class a extends n{get authFetchEventId(){return this.privAuthFetchEventId}constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}}t.SynthesisStartedEvent=a},98095:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRestAdapter=void 0;let r=i(3150),n=i(70806),o=i(25352),s=i(92079);class a{getVoicesList(e){return this.privRestAdapter.setHeaders(s.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then(e=>(this.privRestAdapter.setHeaders(e.headerName,e.token),this.privRestAdapter.request(r.RestRequestType.Get,this.privUri)))}constructor(e,t){let i=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!i){let t=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,"westus"),r=o.ConnectionFactoryBase.getHostSuffix(t);i=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"https://".concat(t,".tts.speech").concat(r))}this.privUri="".concat(i,"/cognitiveservices/voices/list");let s=r.RestConfigBase.requestOptions;this.privRestAdapter=new r.RestMessageAdapter(s),this.privAuthentication=t}}t.SynthesisRestAdapter=a},52802:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisTurn=void 0;let n=i(23315),o=i(59545),s=i(70806),a=i(19808),c=i(23985);class l{get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){let e=new s.PropertyCollection;return e.setProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}getAllReceivedAudio(){return r(this,void 0,void 0,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return r(this,void 0,void 0,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(!this.audioOutputFormat.hasHeader)return this.getAllReceivedAudio();{let e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}})}startNewSynthesis(e,t,i,r){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=i,this.privAudioOutputStream=new o.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==r&&(this.privTurnAudioDestination=r,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new c.SynthesisTriggeredEvent(this.requestId,void 0,void 0===r?void 0:r.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new c.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e){this.onEvent(new c.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}403===e&&this.onComplete()}onServiceResponseMessage(e){let t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(e){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new n.Deferred;let t=JSON.parse(e);t.webrtc&&(this.privWebRTCSDP=t.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}constructSynthesisResult(){return r(this,void 0,void 0,function*(){let e=yield this.getAllReceivedAudioWithHeader();return new s.SpeechSynthesisResult(this.requestId,s.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)})}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){let e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){n.Events.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===a.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!l.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!l.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return r(this,void 0,void 0,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=n.createNoDashGuid(),this.privTurnDeferral=new n.Deferred,this.privTurnDeferral.resolve()}}t.SynthesisTurn=l},1292:function(e,t,i){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;let o=i(7601);(n=r=t.SynthesisServiceType||(t.SynthesisServiceType={}))[n.Standard=0]="Standard",n[n.Custom=1]="Custom";class s{get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}constructor(e,t){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new o.SpeechServiceConfig(new o.Context(null)),this.privParameters=t}}t.SynthesizerConfig=s},73178:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberConnectionFactory=void 0;let r=i(3150),n=i(70806),o=i(25352),s=i(7601),a=i(92079),c=i(78021);class l extends o.ConnectionFactoryBase{create(e,t,i){let c=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0),l=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,"centralus"),p=o.ConnectionFactoryBase.getHostSuffix(l),d="wss://transcribe."+l+".cts.speech"+p+this.multiaudioRelativeUri,u=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,d),h={};this.setQueryParams(h,e,c),c||(c=u);let g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[a.HeaderNames.ConnectionId]=i,e.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,c);let f="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(c,h,g,new s.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),f,i)}setQueryParams(e,t,i){let r=t.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),o=t.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);!r||c.QueryParameterNames.CustomSpeechDeploymentId in e||(e[c.QueryParameterNames.CustomSpeechDeploymentId]=r),!o||c.QueryParameterNames.Language in e||(e[c.QueryParameterNames.Language]=o);let a="true"===t.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),l=t.parameters.getProperty(s.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])!==n.OutputFormat[n.OutputFormat.Simple];(a||l)&&(e[c.QueryParameterNames.Format]=n.OutputFormat[n.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(t,e,i)}constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}}t.TranscriberConnectionFactory=l},36365:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionConfig=void 0;let r=i(2822);class n extends r.RestConfigBase{static get host(){return n.privHost}static get apiVersion(){return n.privApiVersion}static get clientAppId(){return n.privClientAppId}static get defaultLanguageCode(){return n.privDefaultLanguageCode}static get restPath(){return n.privRestPath}static get webSocketPath(){return n.privWebSocketPath}static get transcriptionEventKeys(){return n.privTranscriptionEventKeys}}t.ConversationConnectionConfig=n,n.privHost="dev.microsofttranslator.com",n.privRestPath="/capito/room",n.privApiVersion="2.0",n.privDefaultLanguageCode="en-US",n.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",n.privWebSocketPath="/capito/translate",n.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]},79691:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionFactory=void 0;let r=i(3150),n=i(23315),o=i(66918),s=i(70806),a=i(25352),c=i(36365),l=i(85326);class p extends a.ConnectionFactoryBase{create(e,t,i){let a=e.parameters.getProperty(s.PropertyId.ConversationTranslator_Host,c.ConversationConnectionConfig.host),p=e.parameters.getProperty(s.PropertyId.ConversationTranslator_CorrelationId,n.createGuid()),d="wss://".concat(a).concat(c.ConversationConnectionConfig.webSocketPath),u=e.parameters.getProperty(s.PropertyId.ConversationTranslator_Token,void 0);o.Contracts.throwIfNullOrUndefined(u,"token");let h={};h[c.ConversationConnectionConfig.configParams.apiVersion]=c.ConversationConnectionConfig.apiVersion,h[c.ConversationConnectionConfig.configParams.token]=u,h[c.ConversationConnectionConfig.configParams.correlationId]=p;let g="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(d,h,{},new l.ConversationWebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),g,i)}}t.ConversationConnectionFactory=p},75421:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionMessage=void 0;let r=i(23315);class n extends r.ConnectionMessage{get conversationMessageType(){return this.privConversationMessageType}constructor(e,t,i,r){super(e,t,i,r);let n=JSON.parse(this.textBody);void 0!==n.type&&(this.privConversationMessageType=n.type)}}t.ConversationConnectionMessage=n},53707:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationManager=void 0;let r=i(3150),n=i(66918),o=i(70806),s=i(36365);class a{createOrJoin(e,t,i,a){try{n.Contracts.throwIfNullOrUndefined(e,"args");let c=e.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,s.ConversationConnectionConfig.defaultLanguageCode),l=e.getProperty(o.PropertyId.ConversationTranslator_Name,"conversation_host"),p=e.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),d=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),u=e.getProperty(o.PropertyId.SpeechServiceConnection_Key),h=e.getProperty(o.PropertyId.SpeechServiceConnection_Region),g=e.getProperty(o.PropertyId.SpeechServiceAuthorization_Token);n.Contracts.throwIfNullOrWhitespace(c,"languageCode"),n.Contracts.throwIfNullOrWhitespace(l,"nickname"),n.Contracts.throwIfNullOrWhitespace(p,"endpointHost");let f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.languageCode]=c,f[this.privRequestParams.nickname]=l;let m={};d&&(m[this.privRequestParams.correlationId]=d),m[this.privRequestParams.clientAppId]=s.ConversationConnectionConfig.clientAppId,void 0!==t?f[this.privRequestParams.roomId]=t:(n.Contracts.throwIfNullOrUndefined(h,this.privErrors.authInvalidSubscriptionRegion),m[this.privRequestParams.subscriptionRegion]=h,u?m[this.privRequestParams.subscriptionKey]=u:g?m[this.privRequestParams.authorization]="Bearer ".concat(g):n.Contracts.throwIfNullOrUndefined(u,this.privErrors.authInvalidSubscriptionKey));let C={};C.headers=m,this.privRestAdapter.options=C;let S="https://".concat(p).concat(this.privRestPath);this.privRestAdapter.request(r.RestRequestType.Post,S,f,null).then(e=>{let t=r.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,e.headers);if(!e.ok){if(a){let i,r=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString());try{i=JSON.parse(e.data),r+=" [".concat(i.error.code,": ").concat(i.error.message,"]")}catch(t){r+=" [".concat(e.data,"]")}t&&(r+=" ".concat(t)),a(r)}return}let n=JSON.parse(e.data);if(n&&(n.requestId=t),i){try{i(n)}catch(e){a&&a(e)}i=void 0}}).catch(()=>{})}catch(e){a&&(e instanceof Error?a(e.name+": "+e.message):a(e))}}leave(e,t){return new Promise((i,s)=>{try{n.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","token"));let s=e.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),a=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),c={};c[this.privRequestParams.apiVersion]=this.privApiVersion,c[this.privRequestParams.sessionToken]=t;let l={};a&&(l[this.privRequestParams.correlationId]=a);let p={};p.headers=l,this.privRestAdapter.options=p;let d="https://".concat(s).concat(this.privRestPath);this.privRestAdapter.request(r.RestRequestType.Delete,d,c,null).then(e=>{e.ok,i()}).catch(()=>{})}catch(e){s(e instanceof Error?e.name+": "+e.message:e)}})}constructor(){this.privRequestParams=s.ConversationConnectionConfig.configParams,this.privErrors=s.ConversationConnectionConfig.restErrors,this.privHost=s.ConversationConnectionConfig.host,this.privApiVersion=s.ConversationConnectionConfig.apiVersion,this.privRestPath=s.ConversationConnectionConfig.restPath,this.privRestAdapter=new r.RestMessageAdapter({})}}t.ConversationManager=a},13537:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationRequestSession=void 0;let r=i(23315);class n{get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){200!==e&&403===e&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=r.createNoDashGuid():this.onComplete()}dispose(){var e,t,i,r;return e=this,t=void 0,i=void 0,r=function*(){if(!this.privIsDisposed)for(let e of(this.privIsDisposed=!0,this.privDetachables))yield e.detach()},new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}onComplete(){}constructor(e){this.privIsDisposed=!1,this.privDetachables=[],this.privSessionId=e,this.privRequestId=r.createNoDashGuid(),this.privRequestCompletionDeferral=new r.Deferred}}t.ConversationRequestSession=n},79734:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceAdapter=void 0;let n=i(23315),o=i(70806),s=i(7601),a=i(75421),c=i(13537),l=i(49853),p=i(31890),d=i(1669);class u extends s.ServiceRecognizerBase{isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){let t=Object.create(null,{dispose:{get:()=>super.dispose}});return r(this,void 0,void 0,function*(){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){let t=yield this.privConnectionConfigPromise;yield t.dispose(e)}yield t.dispose.call(this,e)})}sendMessage(e){return r(this,void 0,void 0,function*(){return(yield this.fetchConnection()).send(new a.ConversationConnectionMessage(n.MessageType.Text,e))})}sendMessageAsync(e){return r(this,void 0,void 0,function*(){let t=yield this.fetchConnection();yield t.send(new a.ConversationConnectionMessage(n.MessageType.Text,e))})}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return r(this,void 0,void 0,function*(){return!0})}cancelRecognition(e,t,i,r,n){this.terminateMessageLoop=!0;let s=new o.ConversationTranslationCanceledEventArgs(i,n,r,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,s)}catch(e){}}conversationConnectImpl(e){return r(this,void 0,void 0,function*(){return this.privConnectionLoop=this.startMessageLoop(),e})}receiveConversationMessageOverride(){return r(this,void 0,void 0,function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();let e=new n.Deferred;try{let t=yield this.fetchConnection(),i=yield t.read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!i)return this.receiveConversationMessageOverride();let r=this.privConversationRequestSession.sessionId,n=i.conversationMessageType.toLowerCase(),a=!1;try{switch(n){case"info":case"participant_command":case"command":let e=d.CommandResponsePayload.fromJSON(i.textBody);switch(e.command.toLowerCase()){case"participantlist":let t=d.ParticipantsListPayloadResponse.fromJSON(i.textBody),c=t.participants.map(e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new l.ParticipantsListEventArgs(t.roomid,t.token,t.translateTo,t.profanityFilter,t.roomProfanityFilter,t.roomLocked,t.muteAll,c,r));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(e.participantId,p.ConversationTranslatorCommandTypes.setTranslateToLanguages,e.value,r));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(e.participantId,p.ConversationTranslatorCommandTypes.setProfanityFiltering,e.value,r));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(e.participantId,p.ConversationTranslatorCommandTypes.setMute,e.value,r));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new l.MuteAllEventArgs(e.value,r));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new o.ConversationExpirationEventArgs(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(e.participantId,p.ConversationTranslatorCommandTypes.setUseTTS,e.value,r));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new l.LockRoomEventArgs(e.value,r));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(e.participantId,p.ConversationTranslatorCommandTypes.changeNickname,e.value,r));break;case"joinsession":let u=d.ParticipantPayloadResponse.fromJSON(i.textBody),h={avatar:u.avatar,displayName:u.nickname,id:u.participantId,isHost:u.ishost,isMuted:u.ismuted,isUsingTts:u.usetts,preferredLanguage:u.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new l.ParticipantEventArgs(h,r));break;case"leavesession":let g={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new l.ParticipantEventArgs(g,r));break;case"disconnectsession":e.participantId;break;case"token":let f=new s.CognitiveTokenAuthentication(()=>{let t=e.token;return Promise.resolve(t)},()=>{let t=e.token;return Promise.resolve(t)});this.authentication=f,this.privConversationServiceConnector.onToken(f)}break;case"partial":case"final":let m=d.SpeechResponsePayload.fromJSON(i.textBody),C="final"===n?o.ResultReason.TranslatedParticipantSpeech:o.ResultReason.TranslatingParticipantSpeech,S=new o.ConversationTranslationResult(m.participantId,this.getTranslations(m.translations),m.language,m.id,C,m.recognition,void 0,void 0,i.textBody,void 0);m.isFinal?(void 0!==S.text&&S.text.length>0?a=!0:m.id===this.privLastPartialUtteranceId&&(a=!0),a&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(p.ConversationTranslatorMessageTypes.final,S,r))):void 0!==S.text&&(this.privLastPartialUtteranceId=m.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(p.ConversationTranslatorMessageTypes.partial,S,r)));break;case"translated_message":let y=d.TextResponsePayload.fromJSON(i.textBody),P=new o.ConversationTranslationResult(y.participantId,this.getTranslations(y.translations),y.language,void 0,void 0,y.originalText,void 0,void 0,void 0,i.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(p.ConversationTranslatorMessageTypes.instantMessage,P,r))}}catch(e){}return this.receiveConversationMessageOverride()}catch(e){this.terminateMessageLoop=!0}return e.promise})}startMessageLoop(){return r(this,void 0,void 0,function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;let e=this.receiveConversationMessageOverride();try{return yield e}catch(e){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,e),null}})}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then(e=>e.state()===n.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(e=>e),this.privConnectionConfigPromise)}getTranslations(e){let t;if(void 0!==e)for(let i of(t=new o.Translations,e))t.set(i.lang,i.translation);return t}constructor(e,t,i,r,o){super(e,t,i,r,o),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=o,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=e=>this.conversationConnectImpl(e),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new c.ConversationRequestSession(n.createNoDashGuid()),this.privConversationConnectionFactory=t,this.privConversationIsDisposed=!1}}t.ConversationServiceAdapter=u},37500:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorConnectionFactory=void 0;let r=i(3150),n=i(53004),o=i(66918),s=i(70806),a=i(92079),c=i(78021),l=i(25352),p=i(7601);class d extends l.ConnectionFactoryBase{create(e,t,i){let o="TRUE"===e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),u=this.privConvGetter().room,h=u.cognitiveSpeechRegion||e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,""),g={hostSuffix:l.ConnectionFactoryBase.getHostSuffix(h),path:d.CTS_VIRT_MIC_PATH,region:encodeURIComponent(h)};g[c.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"")),g[c.QueryParameterNames.CtsMeetingId]=encodeURIComponent(u.roomId),g[c.QueryParameterNames.CtsDeviceId]=encodeURIComponent(u.participantId),g[c.QueryParameterNames.CtsIsParticipant]=u.isHost?"":"&"+c.QueryParameterNames.CtsIsParticipant;let f="",m={},C={};if(o){(f=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint))||(f="wss://"+e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),f=n.StringUtils.formatString(f,g);let t=new URL(f);t.searchParams.forEach((e,t)=>{m[t]=e}),new p.TranscriberConnectionFactory().setQueryParams(m,e,f),m[c.QueryParameterNames.CtsMeetingId]=g[c.QueryParameterNames.CtsMeetingId],m[c.QueryParameterNames.CtsDeviceId]=g[c.QueryParameterNames.CtsDeviceId],u.isHost||(m[c.QueryParameterNames.CtsIsParticipant]=""),c.QueryParameterNames.Format in m||(m[c.QueryParameterNames.Format]="simple"),t.searchParams.forEach((e,i)=>{t.searchParams.set(i,m[i]),delete m[i]}),f=t.toString()}else{let t=new p.TranslationConnectionFactory;f=t.getEndpointUrl(e,!0),f=n.StringUtils.formatString(f,g),t.setQueryParams(m,e,f)}C[a.HeaderNames.ConnectionId]=i,C[r.RestConfigBase.configParams.token]=u.token,t.token&&(C[t.headerName]=t.token);let S="TRUE"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return new r.WebsocketConnection(f,m,C,new p.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),S,i)}constructor(e){super(),o.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}}t.ConversationTranslatorConnectionFactory=d,d.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"},49853:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationReceivedTranslationEventArgs=t.ParticipantsListEventArgs=t.ParticipantAttributeEventArgs=t.ParticipantEventArgs=t.LockRoomEventArgs=t.MuteAllEventArgs=void 0;let r=i(70806);class n extends r.SessionEventArgs{get isMuted(){return this.privIsMuted}constructor(e,t){super(t),this.privIsMuted=e}}t.MuteAllEventArgs=n;class o extends r.SessionEventArgs{get isMuted(){return this.privIsLocked}constructor(e,t){super(t),this.privIsLocked=e}}t.LockRoomEventArgs=o;class s extends r.SessionEventArgs{get participant(){return this.privParticipant}constructor(e,t){super(t),this.privParticipant=e}}t.ParticipantEventArgs=s;class a extends r.SessionEventArgs{get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}constructor(e,t,i,r){super(r),this.privKey=t,this.privValue=i,this.privParticipantId=e}}t.ParticipantAttributeEventArgs=a;class c extends r.SessionEventArgs{get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}constructor(e,t,i,r,n,o,s,a,c){super(c),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=i,this.privProfanityFilter=r,this.privRoomProfanityFilter=n,this.privIsRoomLocked=o,this.privIsRoomLocked=s,this.privParticipants=a}}t.ParticipantsListEventArgs=c;class l{get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}constructor(e,t,i){this.privPayload=t,this.privCommand=e,this.privSessionId=i}}t.ConversationReceivedTranslationEventArgs=l},31890:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorCommandTypes=t.ConversationTranslatorMessageTypes=t.InternalParticipants=void 0;class i{addOrUpdateParticipant(e){if(void 0===e)return;let t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(t=>t.id===e)}getParticipant(e){return this.participants.find(t=>t.id===e)}deleteParticipant(e){this.participants=this.participants.filter(t=>t.id!==e)}get host(){return this.participants.find(e=>!0===e.isHost)}get me(){return this.getParticipant(this.meId)}constructor(e=[],t){this.participants=e,this.meId=t}}t.InternalParticipants=i,t.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},t.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},4275:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorRecognizer=t.ConversationRecognizerFactory=void 0;let n=i(7601),o=i(23315),s=i(66918),a=i(70806),c=i(79691),l=i(79734);class p{static fromConfig(e,t,i){return new d(e,t,i)}}t.ConversationRecognizerFactory=p;class d extends a.Recognizer{set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,i)}catch(e){i&&(e instanceof Error?i(e.name+": "+e.message):i(e))}}disconnect(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{e&&e()},e=>{t&&t(e)})}catch(e){t&&(e instanceof Error?t(e.name+": "+e.message):t(e)),this.dispose(!0).catch(e=>{o.Events.instance.onEvent(new o.BackgroundEvent(e))})}}sendRequest(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,i)}catch(e){i&&(e instanceof Error?i(e.name+": "+e.message):i(e)),this.dispose(!0).catch(e=>{o.Events.instance.onEvent(new o.BackgroundEvent(e))})}}onToken(e){this.privConversation.onToken(e)}close(){return r(this,void 0,void 0,function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))})}dispose(e){let t=Object.create(null,{dispose:{get:()=>super.dispose}});return r(this,void 0,void 0,function*(){!this.privIsDisposed&&e&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield t.dispose.call(this,e))})}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,r){return new l.ConversationServiceAdapter(e,t,i,r,this)}sendMessage(e,t,i){var r;void 0!==(r=this.privReco.sendMessageAsync(e))?r.then(()=>{try{t&&t()}catch(e){i&&i("'Unhandled error on promise callback: ".concat(e,"'"))}},e=>{try{i&&i(e)}catch(e){}}):i&&i("Null promise"),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}constructor(e,t,i){s.Contracts.throwIfNull(t,"speechConfig"),s.Contracts.throwIfNull(e,"conversationImpl"),super(i,t.properties,new c.ConversationConnectionFactory),this.privConversation=e,this.privIsDisposed=!1,this.privProperties=t.properties.clone(),this.privConnection=a.Connection.fromRecognizer(this),"on"===this.privProperties.getProperty(a.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?(this.privSetTimeout=o.Timeout.setTimeout,this.privClearTimeout=o.Timeout.clearTimeout):"undefined"!=typeof window?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}}t.ConversationTranslatorRecognizer=d},85326:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationWebsocketMessageFormatter=void 0;let r=i(23315),n=i(75421);class o{toConnectionMessage(e){let t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){let i=new n.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(i)}else e.messageType===r.MessageType.Binary&&t.resolve(new n.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(e){t.reject("Error formatting the message. Error: ".concat(e))}return t.promise}fromConnectionMessage(e){let t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){let i="".concat(e.textBody?e.textBody:"");t.resolve(new r.RawWebsocketMessage(r.MessageType.Text,i,e.id))}}catch(e){t.reject("Error formatting the message. ".concat(e))}return t.promise}}t.ConversationWebsocketMessageFormatter=o},46188:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(53707);Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return r.ConversationManager}});var n=i(36365);Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return n.ConversationConnectionConfig}});var o=i(4275);Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return o.ConversationRecognizerFactory}});var s=i(72217);Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return s.TranscriberRecognizer}});var a=i(49853);Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return a.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return a.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return a.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return a.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return a.ParticipantsListEventArgs}});var c=i(31890);Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return c.InternalParticipants}})},70380:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandResponsePayload=void 0;let i=e=>JSON.parse(e);class r{get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new r(e)}constructor(e){this.privCommandResponse=i(e)}}t.CommandResponsePayload=r},1669:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(70380);Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return r.CommandResponsePayload}});var n=i(29889);Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantPayloadResponse}});var o=i(62292);Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return o.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return o.TextResponsePayload}})},29889:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantPayloadResponse=t.ParticipantsListPayloadResponse=void 0;let i=e=>JSON.parse(e),r=e=>JSON.parse(e);class n{get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new n(e)}constructor(e){this.privParticipantsPayloadResponse=i(e)}}t.ParticipantsListPayloadResponse=n;class o{get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new o(e)}constructor(e){this.privParticipantPayloadResponse=r(e)}}t.ParticipantPayloadResponse=o},62292:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextResponsePayload=t.SpeechResponsePayload=void 0;let i=e=>JSON.parse(e),r=e=>JSON.parse(e);class n{get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(e){return new n(e)}constructor(e){this.privSpeechResponse=i(e)}}t.SpeechResponsePayload=n;class o{get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new o(e)}constructor(e){this.privTextResponse=r(e)}}t.TextResponsePayload=o},72217:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberRecognizer=void 0;let n=i(23315),o=i(66918),s=i(70806),a=i(7601);class c extends s.Recognizer{get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){o.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return o.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){o.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return o.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(a.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(){return r(this,void 0,void 0,function*(){this.privDisposedRecognizer||(yield this.dispose(!0))})}pushConversationEvent(e,t){return r(this,void 0,void 0,function*(){let i=this.privReco;o.Contracts.throwIfNullOrUndefined(i,"serviceRecognizer"),yield i.sendSpeechEventAsync(e,t)})}pushMeetingEvent(e,t){return r(this,void 0,void 0,function*(){let i=this.privReco;o.Contracts.throwIfNullOrUndefined(i,"serviceRecognizer"),yield i.sendMeetingSpeechEventAsync(e,t)})}enforceAudioGating(){return r(this,void 0,void 0,function*(){let e=this.audioConfig,t=(yield e.format).channels;if(1===t){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==t)throw Error("Unsupported audio configuration: Detected ".concat(t,"-channel audio"))})}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(t,i)=>{e.canceled&&e.canceled(e,i)},this.recognizing=(t,i)=>{e.transcribing&&e.transcribing(e,i)},this.recognized=(t,i)=>{e.transcribed&&e.transcribed(e,i)},this.sessionStarted=(t,i)=>{e.sessionStarted&&e.sessionStarted(e,i)},this.sessionStopped=(t,i)=>{e.sessionStopped&&e.sessionStopped(e,i)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){let t=Object.create(null,{dispose:{get:()=>super.dispose}});return r(this,void 0,void 0,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))})}createRecognizerConfig(e){return new a.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,i,r){return new a.TranscriptionServiceRecognizer(e,t,i,r,this)}constructor(e,t){o.Contracts.throwIfNull(e,"speechTranslationConfig"),o.Contracts.throwIfNull(t,"audioConfigImpl"),o.Contracts.throwIfNullOrWhitespace(e.speechRecognitionLanguage,s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,e.properties,new a.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}}t.TranscriberRecognizer=c},12518:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptionServiceRecognizer=void 0;let n=i(23315),o=i(70806),s=i(7601),a=i(83128);class c extends s.ConversationServiceRecognizer{sendSpeechEventAsync(e,t){return r(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing){let i=yield this.fetchConnection();yield this.sendSpeechEvent(i,this.createSpeechEventPayload(e,t))}})}sendMeetingSpeechEventAsync(e,t){return r(this,void 0,void 0,function*(){if(this.privRequestSession.isRecognizing){let i=yield this.fetchConnection();yield this.sendSpeechEvent(i,this.createMeetingSpeechEventPayload(e,t))}})}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,t,i){try{let r=new o.SpeechRecognitionEventArgs(e,t,i);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,r),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch(e){}}handleRecognizingCallback(e,t,i){try{let r=new o.SpeechRecognitionEventArgs(e,t,i);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,r)}catch(e){}}cancelRecognition(e,t,i,r,n){let a=new o.PropertyCollection;if(a.setProperty(s.CancellationErrorCodePropertyName,o.CancellationErrorCode[r]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){let t=new o.MeetingTranscriptionCanceledEventArgs(i,n,r,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch(e){}}}else if(this.privTranscriberRecognizer.canceled){let t=new o.ConversationTranscriptionCanceledEventArgs(i,n,r,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch(e){}}if(this.privSuccessCallback){let e=new o.SpeechRecognitionResult(t,o.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,n,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}sendTranscriptionStartJSON(e){return r(this,void 0,void 0,function*(){if(yield this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){let t=this.privTranscriberRecognizer.getMeetingInfo(),i=this.createMeetingSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,i)}else{let t=this.privTranscriberRecognizer.getConversationInfo(),i=this.createSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,i)}yield this.sendWaveHeader(e)})}sendSpeechEvent(e,t){let i=JSON.stringify(t);if(i)return e.send(new a.SpeechConnectionMessage(n.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",i))}createSpeechEventPayload(e,t){let i={id:"meeting",name:t,meeting:e.conversationProperties};return i.meeting.id=e.id,i.meeting.attendees=e.participants,i}createMeetingSpeechEventPayload(e,t){let i={id:"meeting",name:t,meeting:e.meetingProperties};return i.meeting.id=e.id,i.meeting.attendees=e.participants,i}constructor(e,t,i,r,n){super(e,t,i,r,n),this.privTranscriberRecognizer=n,this.sendPrePayloadJSONOverride=e=>this.sendTranscriptionStartJSON(e),"true"===this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}}t.TranscriptionServiceRecognizer=c},63466:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationConnectionFactory=void 0;let r=i(3150),n=i(53004),o=i(70806),s=i(25352),a=i(7601),c=i(92079),l=i(78021);class p extends s.ConnectionFactoryBase{create(e,t,i){let n=this.getEndpointUrl(e),s={};void 0!==e.autoDetectSourceLanguages&&(s[l.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(s,e,n);let p={};void 0!==t.token&&""!==t.token&&(p[t.headerName]=t.token),p[c.HeaderNames.ConnectionId]=i,e.parameters.setProperty(o.PropertyId.SpeechServiceConnection_Url,n);let d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(n,s,p,new a.WebsocketMessageFormatter,r.ProxyInfo.fromRecognizerConfig(e),d,i)}getEndpointUrl(e,t){let i=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region),r=s.ConnectionFactoryBase.getHostSuffix(i),a=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,void 0);return(a||(a=void 0!==e.autoDetectSourceLanguages?e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+r)+"/speech/universal/v2":e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+r)+"/speech/translation/cognitiveservices/v1"),!0===t)?a:n.StringUtils.formatString(a,{region:i})}setQueryParams(e,t,i){e.from=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=t.recognitionMode===a.RecognitionMode.Interactive?"interactive":t.recognitionMode===a.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(t,e,i),this.setUrlParameter(o.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,l.QueryParameterNames.StableTranslation,t,e,i);let r=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==r&&(e.voice=r,e.features="texttospeech")}}t.TranslationConnectionFactory=p},99170:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationServiceRecognizer=void 0;let n=i(23315),o=i(70806),s=i(7601);class a extends s.ConversationServiceRecognizer{processTypeSpecificMessages(e){return r(this,void 0,void 0,function*(){let t=new o.PropertyCollection,i=yield this.processSpeechMessages(e);if(i)return!0;let a=n=>r(this,void 0,void 0,function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),n.RecognitionStatus===s.RecognitionStatus.Success){let e=this.fireEventForResult(n,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(e.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{let r=s.EnumTranslation.implTranslateRecognitionResult(n.RecognitionStatus),a=new o.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,r,n.Text,n.Duration,this.privRequestSession.currentTurnAudioOffset+n.Offset,n.Language,n.Confidence,void 0,e.textBody,t);if(r===o.ResultReason.Canceled){let e=s.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus),t=s.EnumTranslation.implTranslateCancelErrorCode(n.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,s.EnumTranslation.implTranslateErrorDetails(t))}else{if(!(this.privRequestSession.isSpeechEnded&&r===o.ResultReason.NoMatch&&n.RecognitionStatus!==s.RecognitionStatus.InitialSilenceTimeout)){let e=new o.TranslationRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0}}),c=(e,t)=>{let r=this.fireEventForResult(e,t);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+r.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,r)}catch(e){}i=!0};switch(e.messageType===n.MessageType.Text&&t.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":c(s.TranslationHypothesis.fromJSON(e.textBody),t);break;case"translation.response":let l=JSON.parse(e.textBody);if(l.SpeechPhrase)yield a(s.TranslationPhrase.fromTranslationResponse(l));else{let i=JSON.parse(e.textBody);i.SpeechHypothesis&&c(s.TranslationHypothesis.fromTranslationResponse(i),t)}break;case"translation.phrase":yield a(s.TranslationPhrase.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),i=!0;break;case"audio.end":case"translation.synthesis.end":let p=s.TranslationSynthesisEnd.fromJSON(e.textBody);switch(p.SynthesisStatus){case s.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){let e=new o.TranslationSynthesisResult(o.ResultReason.Canceled,void 0),t=new o.TranslationSynthesisEventArgs(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,t)}catch(e){}}if(this.privTranslationRecognizer.canceled){let e=new o.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,o.CancellationReason.Error,p.FailureReason,o.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(e){}}break;case s.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}i=!0}return i})}cancelRecognition(e,t,i,r,n){let a=new o.PropertyCollection;if(a.setProperty(s.CancellationErrorCodePropertyName,o.CancellationErrorCode[r]),this.privTranslationRecognizer.canceled){let t=new o.TranslationRecognitionCanceledEventArgs(e,i,n,r,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,t)}catch(e){}}if(this.privSuccessCallback){let e=new o.TranslationRecognitionResult(void 0,t,o.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,n,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}handleRecognizingCallback(e,t,i){try{let r=new o.TranslationRecognitionEventArgs(o.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,i);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,r)}catch(e){}}handleRecognizedCallback(e,t,i){try{let r=new o.TranslationRecognitionEventArgs(o.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,i);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,r)}catch(e){}}fireEventForResult(e,t){let i,r,a;if(void 0!==e.Translation.Translations)for(let t of(i=new o.Translations,e.Translation.Translations))i.set(t.Language,t.Text||t.DisplayText);e instanceof s.TranslationPhrase?(r=e.Translation&&e.Translation.TranslationStatus===n.TranslationStatus.Success?o.ResultReason.TranslatedSpeech:o.ResultReason.RecognizedSpeech,a=e.Confidence):r=o.ResultReason.TranslatingSpeech;let c=e.Language,l=e.Offset+this.privRequestSession.currentTurnAudioOffset,p=new o.TranslationRecognitionResult(i,this.privRequestSession.requestId,r,e.Text,e.Duration,l,c,a,e.Translation.FailureReason,JSON.stringify(e),t);return new o.TranslationRecognitionEventArgs(p,l,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){let i=void 0===e?o.ResultReason.SynthesizingAudioCompleted:o.ResultReason.SynthesizingAudio,r=new o.TranslationSynthesisResult(i,e),n=new o.TranslationSynthesisEventArgs(r,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,n)}catch(e){}}constructor(e,t,i,r,n){super(e,t,i,r,n),this.privTranslationRecognizer=n,this.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name&&this.privTranslationRecognizer.onConnection()})}}t.TranslationServiceRecognizer=a},93314:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,(i=t.TranslationStatus||(t.TranslationStatus={}))[i.Success=0]="Success",i[i.Error=1]="Error"},13028:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceServiceRecognizer=void 0;let n=i(3150),o=i(23315),s=i(70806),a=i(7601),c=i(83128);class l extends a.ServiceRecognizerBase{set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let t=!1,i=new s.PropertyCollection;switch(e.messageType===o.MessageType.Text&&i.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":let r=JSON.parse(e.textBody);switch(r.operation.toLowerCase()){case"create":this.handleCreateResponse(r,e.requestId);break;case"delete":case"reset":this.handleResultResponse(r,e.requestId);break;case"fetch":let n=JSON.parse(e.textBody);this.handleFetchResponse(n,e.requestId)}t=!0;break;case"speaker.phrases":let a=JSON.parse(e.textBody);this.handlePhrasesResponse(a,e.requestId),t=!0;break;case"speaker.profile.enrollment":let c=JSON.parse(e.textBody),l=new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(c.enrollment?c.enrollment.enrollmentStatus:c.status.statusCode),c.enrollment?JSON.stringify(c.enrollment):void 0,c.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,l),this.privRequestSession.onSpeechEnded(),t=!0}let p=new o.Deferred;return p.resolve(t),p.promise}cancelRecognition(e,t,i,r,n){new s.PropertyCollection().setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[r]);let o=new s.VoiceProfileEnrollmentResult(s.ResultReason.Canceled,n,n);this.privDeferralMap.getId(t)&&this.privDeferralMap.complete(t,o)}createProfile(e,t){return r(this,void 0,void 0,function*(){this.voiceProfileType=e.toString();let i=this.connectImpl();try{let r=new o.Deferred;return yield i,yield this.sendCreateProfile(r,e,t),this.receiveMessage(),r.promise}catch(e){throw e}})}resetProfile(e){return r(this,void 0,void 0,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)})}deleteProfile(e){return r(this,void 0,void 0,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)})}retrieveEnrollmentResult(e){return r(this,void 0,void 0,function*(){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)})}getAllProfiles(e){return r(this,void 0,void 0,function*(){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)})}getActivationPhrases(e,t){return r(this,void 0,void 0,function*(){this.voiceProfileType=e.toString();let i=this.connectImpl();try{let r=new o.Deferred;return yield i,yield this.sendPhrasesRequest(r,e,t),this.receiveMessage(),r.promise}catch(e){throw e}})}enrollProfile(e){return r(this,void 0,void 0,function*(){this.voiceProfileType=e.profileType.toString();let t=new o.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(s.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let i=this.connectImpl(),r=this.sendPreAudioMessages(e,t),a=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),c=yield this.privSpeakerAudioSource.format,l=yield this.privSpeakerAudioSource.deviceInfo,p=new n.ReplayableAudioNode(a,c.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l};try{yield i,yield r}catch(e){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,e)}let d=new s.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).then(()=>{},e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)}),t.promise})}sendPreAudioMessages(e,t){return r(this,void 0,void 0,function*(){let i=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,t),yield this.sendBaseRequest(i,"enroll",this.scenarioFrom(e.profileType),e)})}sendPhrasesRequest(e,t,i){return r(this,void 0,void 0,function*(){let r=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let n=this.scenarioFrom(t);return r.send(new c.SpeechConnectionMessage(o.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify({locale:i,scenario:n})))})}sendCreateProfile(e,t,i){return r(this,void 0,void 0,function*(){let r=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let n=t===s.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":t===s.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification";return r.send(new c.SpeechConnectionMessage(o.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify({locale:i,number:"1",scenario:n})))})}sendCommonRequest(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return r(this,void 0,void 0,function*(){let r=this.connectImpl();try{let n=new o.Deferred;this.privRequestSession.onSpeechContext(),yield r;let s=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,n),yield this.sendBaseRequest(s,e,this.scenarioFrom(t),i),this.receiveMessage(),n.promise}catch(e){throw e}})}sendBaseRequest(e,t,i,n){return r(this,void 0,void 0,function*(){let r={scenario:i};return n?r.profileIds=[n.profileId]:r.maxPageSize=-1,e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"speaker.profile.".concat(t),this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(r)))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,t){if(this.privDeferralMap.getId(t)){if("success"!==e.status.statusCode.toLowerCase()){let i=s.ResultReason.Canceled,r=new s.VoiceProfilePhraseResult(i,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(t,r)}else if(e.phrases&&e.phrases.length>0){let i=s.ResultReason.EnrollingVoiceProfile,r=new s.VoiceProfilePhraseResult(i,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(t,r)}else throw Error("Voice Profile get activation phrases failed, no phrases received")}else throw Error("Voice Profile get activation phrases request for requestID ".concat(t," not found"))}handleCreateResponse(e,t){if(e.profiles&&e.profiles.length>0){if(this.privDeferralMap.getId(t)){let i=e.profiles.map(e=>e.profileId);this.privDeferralMap.complete(t,i)}else throw Error("Voice Profile create request for requestID ".concat(t," not found"))}else throw Error("Voice Profile create failed, no profile id received")}handleResultResponse(e,t){if(this.privDeferralMap.getId(t)){let i="delete"===e.operation.toLowerCase()?s.ResultReason.DeletedVoiceProfile:s.ResultReason.ResetVoiceProfile,r="success"===e.status.statusCode.toLowerCase()?i:s.ResultReason.Canceled,n=new s.VoiceProfileResult(r,"statusCode: ".concat(e.status.statusCode,", errorDetails: ").concat(e.status.reason));this.privDeferralMap.complete(t,n)}else throw Error("Voice Profile create request for requestID ".concat(t," not found"))}handleFetchResponse(e,t){if(this.privDeferralMap.getId(t)&&e.profiles[0]){if(this.privExpectedProfileId&&1===e.profiles.length&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;let i=e.profiles[0],r=new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(i.enrollmentStatus),JSON.stringify(i),e.status.reason);this.privDeferralMap.complete(t,r)}else if(e.profiles.length>0){let i=e.profiles,r=[];for(let t of i)r.push(new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(t.enrollmentStatus),JSON.stringify(t),e.status.reason));this.privDeferralMap.complete(t,r)}}else throw Error("Voice Profile fetch request for requestID ".concat(t," not found"))}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return s.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return s.ResultReason.Canceled;default:return s.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===s.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===s.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}constructor(e,t,i,r,n){super(e,t,i,r,n),this.privDeferralMap=new o.DeferralMap,this.privSpeakerAudioSource=i,this.sendPrePayloadJSONOverride=()=>this.noOp()}}t.VoiceServiceRecognizer=l},51457:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageFormatter=void 0;let r=i(23315);class n{toConnectionMessage(e){let t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){let i=e.textContent,n={},o=null;if(i){let e=i.split("\r\n\r\n");e&&e.length>0&&(n=this.parseHeaders(e[0]),e.length>1&&(o=e[1]))}t.resolve(new r.ConnectionMessage(e.messageType,o,n,e.id))}else if(e.messageType===r.MessageType.Binary){let i=e.binaryContent,n={},o=null;if(!i||i.byteLength<2)throw Error("Invalid binary message format. Header length missing.");let s=new DataView(i),a=s.getInt16(0);if(i.byteLength<a+2)throw Error("Invalid binary message format. Header content missing.");let c="";for(let e=0;e<a;e++)c+=String.fromCharCode(s.getInt8(e+2));n=this.parseHeaders(c),i.byteLength>a+2&&(o=i.slice(2+a)),t.resolve(new r.ConnectionMessage(e.messageType,o,n,e.id))}}catch(e){t.reject("Error formatting the message. Error: ".concat(e))}return t.promise}fromConnectionMessage(e){let t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){let i="".concat(this.makeHeaders(e)).concat("\r\n").concat(e.textBody?e.textBody:"");t.resolve(new r.RawWebsocketMessage(r.MessageType.Text,i,e.id))}else if(e.messageType===r.MessageType.Binary){let i=this.makeHeaders(e),n=e.binaryBody,o=this.stringToArrayBuffer(i),s=new Int8Array(o),a=s.byteLength,c=new Int8Array(2+a+(n?n.byteLength:0));if(c[0]=a>>8&255,c[1]=255&a,c.set(s,2),n){let e=new Int8Array(n);c.set(e,2+a)}let l=c.buffer;t.resolve(new r.RawWebsocketMessage(r.MessageType.Binary,l,e.id))}}catch(e){t.reject("Error formatting the message. ".concat(e))}return t.promise}makeHeaders(e){let t="";if(e.headers)for(let i in e.headers)i&&(t+="".concat(i,": ").concat(e.headers[i]).concat("\r\n"));return t}parseHeaders(e){let t={};if(e){let i=e.match(/[^\r\n]+/g);if(t){for(let e of i)if(e){let i=e.indexOf(":"),r=i>0?e.substr(0,i).trim().toLowerCase():e,n=i>0&&e.length>i+1?e.substr(i+1).trim():"";t[r]=n}}}return t}stringToArrayBuffer(e){let t=new ArrayBuffer(e.length),i=new DataView(t);for(let t=0;t<e.length;t++)i.setUint8(t,e.charCodeAt(t));return t}}t.WebsocketMessageFormatter=n},94:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamNodeErrorEvent=t.AudioStreamNodeDetachedEvent=t.AudioStreamNodeAttachedEvent=t.AudioStreamNodeAttachingEvent=t.AudioStreamNodeEvent=t.AudioSourceErrorEvent=t.AudioSourceOffEvent=t.AudioSourceReadyEvent=t.AudioSourceInitializingEvent=t.AudioSourceEvent=void 0;let r=i(18355);class n extends r.PlatformEvent{get audioSourceId(){return this.privAudioSourceId}constructor(e,t,i=r.EventType.Info){super(e,i),this.privAudioSourceId=t}}t.AudioSourceEvent=n;class o extends n{constructor(e){super("AudioSourceInitializingEvent",e)}}t.AudioSourceInitializingEvent=o;class s extends n{constructor(e){super("AudioSourceReadyEvent",e)}}t.AudioSourceReadyEvent=s;class a extends n{constructor(e){super("AudioSourceOffEvent",e)}}t.AudioSourceOffEvent=a;class c extends n{get error(){return this.privError}constructor(e,t){super("AudioSourceErrorEvent",e,r.EventType.Error),this.privError=t}}t.AudioSourceErrorEvent=c;class l extends n{get audioNodeId(){return this.privAudioNodeId}constructor(e,t,i){super(e,t),this.privAudioNodeId=i}}t.AudioStreamNodeEvent=l;class p extends l{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}t.AudioStreamNodeAttachingEvent=p;class d extends l{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}t.AudioStreamNodeAttachedEvent=d;class u extends l{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}t.AudioStreamNodeDetachedEvent=u;class h extends l{get error(){return this.privError}constructor(e,t,i){super("AudioStreamNodeErrorEvent",e,t),this.privError=i}}t.AudioStreamNodeErrorEvent=h},37963:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundEvent=void 0;let r=i(23315);class n extends r.PlatformEvent{get error(){return this.privError}constructor(e){super("BackgroundEvent",r.EventType.Error),this.privError=e}}t.BackgroundEvent=n},68891:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedArrayBufferStream=void 0;let r=i(23315);class n extends r.Stream{writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(e);return}let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);let i=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),r=new Uint8Array(this.privNextBufferToWrite),n=new Uint8Array(e.buffer.slice(t,i+t));r.set(n,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=i,t+=i,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}}t.ChunkedArrayBufferStream=n},26715:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageSentEvent=t.ConnectionMessageReceivedEvent=t.ConnectionEstablishErrorEvent=t.ConnectionErrorEvent=t.ConnectionClosedEvent=t.ConnectionEstablishedEvent=t.ConnectionStartEvent=t.ConnectionEvent=t.ServiceEvent=void 0;let r=i(18355);class n extends r.PlatformEvent{get jsonString(){return this.privJsonResult}constructor(e,t,i=r.EventType.Info){super(e,i),this.privJsonResult=t}}t.ServiceEvent=n;class o extends r.PlatformEvent{get connectionId(){return this.privConnectionId}constructor(e,t,i=r.EventType.Info){super(e,i),this.privConnectionId=t}}t.ConnectionEvent=o;class s extends o{get uri(){return this.privUri}get headers(){return this.privHeaders}constructor(e,t,i){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=i}}t.ConnectionStartEvent=s;class a extends o{constructor(e){super("ConnectionEstablishedEvent",e)}}t.ConnectionEstablishedEvent=a;class c extends o{get reason(){return this.privReason}get statusCode(){return this.privStatusCode}constructor(e,t,i){super("ConnectionClosedEvent",e,r.EventType.Debug),this.privReason=i,this.privStatusCode=t}}t.ConnectionClosedEvent=c;class l extends o{get message(){return this.privMessage}get type(){return this.privType}constructor(e,t,i){super("ConnectionErrorEvent",e,r.EventType.Debug),this.privMessage=t,this.privType=i}}t.ConnectionErrorEvent=l;class p extends o{get reason(){return this.privReason}get statusCode(){return this.privStatusCode}constructor(e,t,i){super("ConnectionEstablishErrorEvent",e,r.EventType.Error),this.privStatusCode=t,this.privReason=i}}t.ConnectionEstablishErrorEvent=p;class d extends o{get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}constructor(e,t,i){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=i}}t.ConnectionMessageReceivedEvent=d;class u extends o{get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}constructor(e,t,i){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=i}}t.ConnectionMessageSentEvent=u},48282:function(e,t,i){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;let o=i(61954),s=i(26916);(n=r=t.MessageType||(t.MessageType={}))[n.Text=0]="Text",n[n.Binary=1]="Binary";class a{get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new o.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new o.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}constructor(e,t,i,n){if(this.privBody=null,e===r.Text&&t&&"string"!=typeof t)throw new o.InvalidOperationError("Payload must be a string");if(e===r.Binary&&t&&!(t instanceof ArrayBuffer))throw new o.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=i||{},this.privId=n||s.createNoDashGuid(),this.messageType){case r.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}}t.ConnectionMessage=a},25354:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionOpenResponse=void 0;class i{get statusCode(){return this.privStatusCode}get reason(){return this.privReason}constructor(e,t){this.privStatusCode=e,this.privReason=t}}t.ConnectionOpenResponse=i},5703:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeferralMap=void 0;class i{add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(t){this.privMap[e].reject(t)}finally{this.privMap[e]=void 0}}constructor(){this.privMap={}}}t.DeferralMap=i},38857:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendingAgentContextMessageEvent=t.DialogEvent=void 0;let r=i(18355);class n extends r.PlatformEvent{constructor(e,t=r.EventType.Info){super(e,t)}}t.DialogEvent=n;class o extends n{get agentConfig(){return this.privAgentConfig}constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}}t.SendingAgentContextMessageEvent=o},61954:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.InvalidOperationError=t.ArgumentNullError=void 0;class i extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}t.ArgumentNullError=i;class r extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}t.InvalidOperationError=r;class n extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}t.ObjectDisposedError=n},84547:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventSource=void 0;let r=i(61954),n=i(26916);class o{onEvent(e){if(this.isDisposed())throw new r.ObjectDisposedError("EventSource");if(this.metadata)for(let t in this.metadata)t&&e.metadata&&!e.metadata[t]&&(e.metadata[t]=this.metadata[t]);for(let t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){let t=n.createNoDashGuid();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach(t=>e.onEvent(t))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(t=>e.onEvent(t)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}}t.EventSource=o},67595:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;let r=i(61954),n=i(84547);class o{static setEventSource(e){if(!e)throw new r.ArgumentNullError("eventSource");o.privInstance=e}static get instance(){return o.privInstance}}t.Events=o,o.privInstance=new n.EventSource},23315:function(e,t,i){"use strict";var r=Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]},n=function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(94),t),n(i(26715),t),n(i(48282),t),n(i(25354),t),n(i(5703),t),n(i(38857),t),n(i(61954),t),n(i(67595),t),n(i(84547),t),n(i(26916),t),n(i(6518),t),n(i(34829),t),n(i(70540),t),n(i(14137),t),n(i(9394),t),n(i(63114),t),n(i(51026),t),n(i(1463),t),n(i(73845),t),n(i(10960),t),n(i(28039),t),n(i(18355),t),n(i(62110),t),n(i(25978),t),n(i(64406),t),n(i(57756),t),n(i(3087),t);var o=i(93314);Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return o.TranslationStatus}}),n(i(68891),t),n(i(41727),t),n(i(76409),t),n(i(49178),t),n(i(37963),t)},26916:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNoDashGuid=t.createGuid=void 0;let r=i(15691),n=()=>r.v4();t.createGuid=n,t.createNoDashGuid=()=>n().replace(/-/g,"").toUpperCase()},41727:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6518:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},34829:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,(i=t.ConnectionState||(t.ConnectionState={}))[i.None=0]="None",i[i.Connected=1]="Connected",i[i.Connecting=2]="Connecting",i[i.Disconnected=3]="Disconnected"},70540:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},14137:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9394:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1463:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},63114:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51026:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},73845:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},10960:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28039:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;let r=i(61954);class n{get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();let i=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),i}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();let t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();let t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();let t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){let e=[];return this.privList.forEach(t=>{e.push(t)}),e}any(e){return(this.throwIfDisposed(),e)?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();let t=[];for(let i=0;i<this.privList.length;i++)t.push(e(this.privList[i],i));return new n(t)}where(e){this.throwIfDisposed();let t=new n;for(let i=0;i<this.privList.length;i++)e(this.privList[i],i)&&t.add(this.privList[i]);return t}orderBy(e){return this.throwIfDisposed(),new n(this.toArray().sort(e))}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((t,i)=>e(i,t))}clone(){return this.throwIfDisposed(),new n(this.toArray())}concat(e){return this.throwIfDisposed(),new n(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new n(this.privList.concat(e))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new r.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(let t in e)t&&e[t]()}constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(let t of e)this.privList.push(t)}}t.List=n},49178:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OCSPCacheUpdateErrorEvent=t.OCSPResponseRetrievedEvent=t.OCSPCacheFetchErrorEvent=t.OCSPVerificationFailedEvent=t.OCSPCacheHitEvent=t.OCSPCacheEntryNeedsRefreshEvent=t.OCSPCacheEntryExpiredEvent=t.OCSPWSUpgradeStartedEvent=t.OCSPStapleReceivedEvent=t.OCSPCacheUpdateCompleteEvent=t.OCSPDiskCacheStoreEvent=t.OCSPMemoryCacheStoreEvent=t.OCSPCacheUpdateNeededEvent=t.OCSPDiskCacheHitEvent=t.OCSPCacheMissEvent=t.OCSPMemoryCacheHitEvent=t.OCSPEvent=void 0;let r=i(18355);class n extends r.PlatformEvent{constructor(e,t,i){super(e,t),this.privSignature=i}}t.OCSPEvent=n;class o extends n{constructor(e){super("OCSPMemoryCacheHitEvent",r.EventType.Debug,e)}}t.OCSPMemoryCacheHitEvent=o;class s extends n{constructor(e){super("OCSPCacheMissEvent",r.EventType.Debug,e)}}t.OCSPCacheMissEvent=s;class a extends n{constructor(e){super("OCSPDiskCacheHitEvent",r.EventType.Debug,e)}}t.OCSPDiskCacheHitEvent=a;class c extends n{constructor(e){super("OCSPCacheUpdateNeededEvent",r.EventType.Debug,e)}}t.OCSPCacheUpdateNeededEvent=c;class l extends n{constructor(e){super("OCSPMemoryCacheStoreEvent",r.EventType.Debug,e)}}t.OCSPMemoryCacheStoreEvent=l;class p extends n{constructor(e){super("OCSPDiskCacheStoreEvent",r.EventType.Debug,e)}}t.OCSPDiskCacheStoreEvent=p;class d extends n{constructor(e){super("OCSPCacheUpdateCompleteEvent",r.EventType.Debug,e)}}t.OCSPCacheUpdateCompleteEvent=d;class u extends n{constructor(){super("OCSPStapleReceivedEvent",r.EventType.Debug,"")}}t.OCSPStapleReceivedEvent=u;class h extends n{constructor(e){super("OCSPWSUpgradeStartedEvent",r.EventType.Debug,e)}}t.OCSPWSUpgradeStartedEvent=h;class g extends n{constructor(e,t){super("OCSPCacheEntryExpiredEvent",r.EventType.Debug,e),this.privExpireTime=t}}t.OCSPCacheEntryExpiredEvent=g;class f extends n{constructor(e,t,i){super("OCSPCacheEntryNeedsRefreshEvent",r.EventType.Debug,e),this.privExpireTime=i,this.privStartTime=t}}t.OCSPCacheEntryNeedsRefreshEvent=f;class m extends n{constructor(e,t,i){super("OCSPCacheHitEvent",r.EventType.Debug,e),this.privExpireTime=i,this.privExpireTimeString=new Date(i).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}t.OCSPCacheHitEvent=m;class C extends n{constructor(e,t){super("OCSPVerificationFailedEvent",r.EventType.Debug,e),this.privError=t}}t.OCSPVerificationFailedEvent=C;class S extends n{constructor(e,t){super("OCSPCacheFetchErrorEvent",r.EventType.Debug,e),this.privError=t}}t.OCSPCacheFetchErrorEvent=S;class y extends n{constructor(e){super("OCSPResponseRetrievedEvent",r.EventType.Debug,e)}}t.OCSPResponseRetrievedEvent=y;class P extends n{constructor(e,t){super("OCSPCacheUpdateErrorEvent",r.EventType.Debug,e),this.privError=t}}t.OCSPCacheUpdateErrorEvent=P},18355:function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;let n=i(26916);(r=t.EventType||(t.EventType={}))[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None";class o{get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}constructor(e,t){this.privName=e,this.privEventId=n.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=t,this.privMetadata={}}}t.PlatformEvent=o},62110:function(e,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0,(r=i=t.PromiseState||(t.PromiseState={}))[r.None=0]="None",r[r.Resolved=1]="Resolved",r[r.Rejected=2]="Rejected";class n{get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on(e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=e)},e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=e)})}}t.PromiseResult=n;class o{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,t)=>{this.privOnSetResult=e,this.privOnSetError=t}}}t.PromiseResultEventSource=o;class s{get promise(){return this.privPromise}constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,t)=>{this.privResolve=e,this.privReject=t})}}t.Deferred=s;class a{get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==i.None)throw Error("'Cannot resolve a completed promise'");this.privState=i.Resolved,this.privPromiseResultEvents.setResult(e);for(let t=0;t<this.privSuccessHandlers.length;t++)this.executeSuccessCallback(e,this.privSuccessHandlers[t],this.privErrorHandlers[t]);this.detachHandlers()}reject(e){if(this.privState!==i.None)throw Error("'Cannot reject a completed promise'");for(let t of(this.privState=i.Rejected,this.privPromiseResultEvents.setError(e),this.privErrorHandlers))this.executeErrorCallback(e,t);this.detachHandlers()}on(e,t){null==e&&(e=()=>{}),this.privState===i.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(t)):(this.privState===i.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,t):this.privState===i.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,t),this.detachHandlers())}executeSuccessCallback(e,t,i){try{t(e)}catch(e){this.executeErrorCallback("'Unhandled callback error: ".concat(e,"'"),i)}}executeErrorCallback(e,t){if(t)try{t(e)}catch(t){throw Error("'Unhandled callback error: ".concat(t,". InnerError: ").concat(e,"'"))}else throw Error("'Unhandled error: ".concat(e,"'"))}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}constructor(){this.privState=i.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new o,this.privPromiseResult=new n(this.privPromiseResultEvents)}}t.Sink=a,t.marshalPromiseToCallbacks=function(e,t,i){e.then(e=>{try{t&&t(e)}catch(e){if(i)try{e instanceof Error?i(e.name+": "+e.message):i(e)}catch(e){}}},e=>{if(i)try{e instanceof Error?i(e.name+": "+e.message):i(e)}catch(e){}})}},25978:function(e,t,i){"use strict";var r,n,o=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;let s=i(61954),a=i(28039),c=i(62110);(r=n||(n={}))[r.Dequeue=0]="Dequeue",r[r.Peek=1]="Peek";class l{enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(t=>t(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(e=>{this.privList.add(e)},()=>{})}dequeue(){this.throwIfDispose();let e=new c.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:n.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();let e=new c.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:n.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(e,t){return o(this,void 0,void 0,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;let i=this.privSubscribers;if(i){for(;i.length()>0;)i.removeFirst().deferral.resolve(void 0);this.privSubscribers===i&&(this.privSubscribers=i)}for(let e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){let t=[];return this.privPromiseStore.toArray().forEach(e=>{t.push(e)}),Promise.all(t).finally(()=>{this.privSubscribers=null,this.privList.forEach(t=>{e(t)}),this.privList=null}).then()}this.privSubscribers=null,this.privList=null}})}dispose(e){return o(this,void 0,void 0,function*(){yield this.drainAndDispose(null,e)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;let e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){let i=e.removeFirst();if(i.type===n.Peek)i.deferral.resolve(t.first());else{let e=t.removeFirst();i.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new s.InvalidOperationError(this.privDisposeReason);throw new s.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new s.InvalidOperationError("Queue disposing")}constructor(e){this.privPromiseStore=new a.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new a.List,this.privDetachables=[],this.privSubscribers=new a.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}}t.Queue=l},64406:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawWebsocketMessage=void 0;let r=i(48282),n=i(61954),o=i(26916);class s{get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===r.MessageType.Binary)throw new n.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===r.MessageType.Text)throw new n.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}constructor(e,t,i){if(this.privPayload=null,!t)throw new n.ArgumentNullError("payload");if(e===r.MessageType.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new n.InvalidOperationError("Payload must be ArrayBuffer");if(e===r.MessageType.Text&&"string"!=typeof t)throw new n.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=i||o.createNoDashGuid()}}t.RawWebsocketMessage=s},57756:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RiffPcmEncoder=void 0;class i{encode(e){let t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;let i=2*t.length,r=new ArrayBuffer(i),n=new DataView(r);return this.floatTo16BitPCM(n,0,t),r}setString(e,t,i){for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))}floatTo16BitPCM(e,t,i){for(let r=0;r<i.length;r++,t+=2){let n=Math.max(-1,Math.min(1,i[r]));e.setInt16(t,n<0?32768*n:32767*n,!0)}}downSampleAudioFrame(e,t,i){if(!e)return null;if(i===t||i>t)return e;let r=t/i,n=Math.round(e.length/r),o=new Float32Array(n),s=0,a=0;for(;a<n;){let t=Math.round((a+1)*r),i=0,n=0;for(;s<t&&s<e.length;)i+=e[s++],n++;o[a++]=i/n}return o}constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}}t.RiffPcmEncoder=i},3087:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;let r=i(61954),n=i(26916),o=i(25978);class s{get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}}read(){if(this.privIsReadEnded)throw new r.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>{var t,i,r,n;return t=this,i=void 0,r=void 0,n=function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e},new(r||(r=Promise))(function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(s,a)}c((n=n.apply(t,i||[])).next())})})}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new o.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new r.InvalidOperationError("Stream closed")}constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||n.createNoDashGuid(),this.privReaderQueue=new o.Queue}}t.Stream=s},53004:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;class i{static formatString(e,t){if(!e)return"";if(!t)return e;let i="",r="",n=e=>{i+=e},o=e=>{r+=e},s=n;for(let a=0;a<e.length;a++){let c=e[a],l=a+1<e.length?e[a+1]:"";switch(c){case"{":"{"===l?(s("{"),a++):s=o;break;case"}":"}"===l?(s("}"),a++):(t.hasOwnProperty(r)&&(i+=t[r]),s=n,r="");break;default:s(c)}}return i}}t.StringUtils=i},76409:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timeout=void 0;class i{static load(){let e=new Map([[0,()=>{}]]),t=new Map,r="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),n=new Worker(r);return n.addEventListener("message",r=>{let{data:n}=r;if(i.isCallNotification(n)){let{params:{timerId:i}}=n,r=e.get(i);if("number"==typeof r){let e=t.get(r);if(void 0===e||e!==i)throw Error("The timer is in an undefined state.")}else if(void 0!==r)r(),e.delete(i);else throw Error("The timer is in an undefined state.")}else if(i.isClearResponse(n)){let{id:i}=n,r=t.get(i);if(void 0===r)throw Error("The timer is in an undefined state.");t.delete(i),e.delete(r)}else{let{error:{message:e}}=n;throw Error(e)}}),{clearTimeout:i=>{let r=Math.random();t.set(r,i),e.set(i,r),n.postMessage({id:r,method:"clear",params:{timerId:i}})},setTimeout:(t,i)=>{let r=Math.random();return e.set(r,t),n.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:r}}),r}}}static loadWorkerTimers(){return()=>(null!==i.workerTimers||(i.workerTimers=i.load()),i.workerTimers)}static isCallNotification(e){return void 0!==e.method&&"call"===e.method}static isClearResponse(e){return null===e.error&&"number"==typeof e.id}}t.Timeout=i,i.workerTimers=null,i.clearTimeout=e=>i.timers().clearTimeout(e),i.setTimeout=(e,t)=>i.timers().setTimeout(e,t),i.timers=i.loadWorkerTimers()},50641:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityReceivedEventArgs=void 0;class i{get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}constructor(e,t){this.privActivity=e,this.privAudioStream=t}}t.ActivityReceivedEventArgs=i},16319:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputConfigImpl=t.AudioConfigImpl=t.AudioConfig=void 0;let r=i(3150),n=i(66918),o=i(70806),s=i(40719),a=i(21542),c=i(59545);class l{static fromDefaultMicrophoneInput(){let e=new r.PcmRecorder(!0);return new p(new r.MicAudioSource(e))}static fromMicrophoneInput(e){let t=new r.PcmRecorder(!0);return new p(new r.MicAudioSource(t,e))}static fromWavFileInput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamedBuffer.wav";return new p(new r.FileAudioSource(e,t))}static fromStreamInput(e){if(e instanceof o.PullAudioInputStreamCallback)return new p(new a.PullAudioInputStreamImpl(e));if(e instanceof o.AudioInputStream)return new p(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){let t=new r.PcmRecorder(!1);return new p(new r.MicAudioSource(t,null,null,e))}throw Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new d(new o.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(void 0===e)return l.fromDefaultSpeakerOutput();if(e instanceof o.SpeakerAudioDestination)return new d(e);throw Error("Not Supported Type")}static fromAudioFileOutput(e){return new d(new s.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof o.PushAudioOutputStreamCallback)return new d(new c.PushAudioOutputStreamImpl(e));if(e instanceof o.PushAudioOutputStream||e instanceof o.PullAudioOutputStream)return new d(e);throw Error("Not Supported Type")}}t.AudioConfig=l;class p extends l{get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then(()=>{e&&e()},e=>{t&&t(e)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(n.Contracts.throwIfNull(t,"value"),void 0!==this.privSource.setProperty)this.privSource.setProperty(e,t);else throw Error("This AudioConfig instance does not support setting properties.")}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}constructor(e){super(),this.privSource=e}}t.AudioConfigImpl=p;class d extends l{set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw Error("This AudioConfig instance does not support getting properties.")}constructor(e){super(),this.privDestination=e}}t.AudioOutputConfigImpl=d},40719:function(e,t,i){"use strict";var r=Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]},n=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioFileWriter=void 0;let o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t}(i(5844)),s=i(66918);class a{set format(e){s.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=o.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){s.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),o.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),o.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}constructor(e){s.Contracts.throwIfNullOrUndefined(o.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=o.openSync(e,"w")}}t.AudioFileWriter=a},21542:function(e,t,i){"use strict";var r=i(61268).Buffer,n=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamImpl=t.PullAudioInputStream=t.PushAudioInputStreamImpl=t.PushAudioInputStream=t.AudioInputStream=void 0;let o=i(7601),s=i(23315),a=i(26916),c=i(70806),l=i(85808);class p{static createPushStream(e){return d.create(e)}static createPullStream(e,t){return h.create(e,t)}constructor(){return}}t.AudioInputStream=p;class d extends p{static create(e){return new u(e)}}t.PushAudioInputStream=d;class u extends d{get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new s.AudioSourceInitializingEvent(this.privId)),this.onEvent(new s.AudioSourceReadyEvent(this.privId))}attach(e){return n(this,void 0,void 0,function*(){this.onEvent(new s.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn();let t=this.privStream;return this.onEvent(new s.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>n(this,void 0,void 0,function*(){return this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>t.read()}})}detach(e){this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:o.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:o.type.Stream})}onEvent(e){this.privEvents.onEvent(e),s.Events.instance.onEvent(e)}toBuffer(e){let t=r.alloc(e.byteLength),i=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=i[e];return t}constructor(e){super(),void 0===e?this.privFormat=l.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=e,this.privEvents=new s.EventSource,this.privId=a.createNoDashGuid(),this.privStream=new s.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}}t.PushAudioInputStreamImpl=u;class h extends p{static create(e,t){return new g(e,t)}constructor(){super()}}t.PullAudioInputStream=h;class g extends h{get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new s.AudioSourceInitializingEvent(this.privId)),this.onEvent(new s.AudioSourceReadyEvent(this.privId))}attach(e){return n(this,void 0,void 0,function*(){return this.onEvent(new s.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn(),this.onEvent(new s.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){let i=new ArrayBuffer(this.privBufferSize-t),r=this.privCallback.read(i);if(void 0===e?e=i:new Int8Array(e).set(new Int8Array(i),t),0===r)break;t+=r}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}})}detach(e){this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:o.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:o.type.Stream})}onEvent(e){this.privEvents.onEvent(e),s.Events.instance.onEvent(e)}constructor(e,t){super(),void 0===t?this.privFormat=c.AudioStreamFormat.getDefaultInputFormat():this.privFormat=t,this.privEvents=new s.EventSource,this.privId=a.createNoDashGuid(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}}t.PullAudioInputStreamImpl=g},89833:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputFormatImpl=void 0;let r=i(70257),n=i(85808);class o extends n.AudioStreamFormatImpl{static fromSpeechSynthesisOutputFormat(e){return void 0===e?o.getDefaultOutputFormat():o.fromSpeechSynthesisOutputFormatString(o.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new o(n.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new o(n.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new o(n.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new o(n.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new o(n.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new o(n.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new o(n.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new o(n.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new o(n.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new o(n.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new o(n.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new o(n.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new o(n.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new o(n.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new o(n.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new o(n.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new o(n.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new o(n.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new o(n.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new o(n.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new o(n.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new o(n.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new o(n.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new o(n.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new o(n.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new o(n.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new o(n.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new o(n.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);default:return new o(n.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return o.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){let t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);let t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}constructor(e,t,i,r,n,o,s,a,c){super(i,o,t,e),this.formatTag=e,this.avgBytesPerSec=r,this.blockAlign=n,this.priAudioFormatString=s,this.priRequestAudioFormatString=a,this.priHasHeader=c}}t.AudioOutputFormatImpl=o,o.SpeechSynthesisOutputFormatToString={[r.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[r.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[r.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[r.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[r.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[r.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[r.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[r.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[r.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[r.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[r.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[r.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[r.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"}},59545:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamImpl=t.PushAudioOutputStream=t.PullAudioOutputStreamImpl=t.PullAudioOutputStream=t.AudioOutputStream=void 0;let r=i(23315),n=i(66918),o=i(89833);class s{static createPullStream(){return a.create()}constructor(){return}}t.AudioOutputStream=s;class a extends s{static create(){return new c}}t.PullAudioOutputStream=a;class c extends a{set format(e){null==e&&(this.privFormat=o.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){var t,i,r,n;return t=this,i=void 0,r=void 0,n=function*(){let t=new Int8Array(e),i=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),i=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;i<e.byteLength&&!this.privStream.isReadEnded;){let r=yield this.privStream.read();if(void 0===r||r.isEnd)this.privStream.readEnded();else{let n;r.buffer.byteLength>e.byteLength-i?(n=r.buffer.slice(0,e.byteLength-i),this.privLastChunkView=new Int8Array(r.buffer.slice(e.byteLength-i))):n=r.buffer,t.set(new Int8Array(n),i),i+=n.byteLength}}return i},new(r||(r=Promise))(function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(s,a)}c((n=n.apply(t,i||[])).next())})}write(e){n.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}constructor(){super(),this.privId=r.createNoDashGuid(),this.privStream=new r.Stream}}t.PullAudioOutputStreamImpl=c;class l extends s{static create(e){return new p(e)}constructor(){super()}}t.PushAudioOutputStream=l;class p extends l{set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}constructor(e){super(),this.privId=r.createNoDashGuid(),this.privCallback=e}}t.PushAudioOutputStreamImpl=p},85808:function(e,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0,(r=i=t.AudioFormatTag||(t.AudioFormatTag={}))[r.PCM=1]="PCM",r[r.MuLaw=2]="MuLaw",r[r.Siren=3]="Siren",r[r.MP3=4]="MP3",r[r.SILKSkype=5]="SILKSkype",r[r.OGG_OPUS=6]="OGG_OPUS",r[r.WEBM_OPUS=7]="WEBM_OPUS",r[r.ALaw=8]="ALaw",r[r.FLAC=9]="FLAC",r[r.OPUS=10]="OPUS";class n{static getDefaultInputFormat(){return o.getDefaultInputFormat()}static getWaveFormat(e,t,i,r){return new o(e,t,i,r)}static getWaveFormatPCM(e,t,i){return new o(e,t,i)}}t.AudioStreamFormat=n;class o extends n{static getDefaultInputFormat(){return new o}static getAudioContext(e){let t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,i){for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))}constructor(e=16e3,t=16,r=1,n=i.PCM){super();let o=!0;switch(n){case i.PCM:this.formatTag=1;break;case i.ALaw:this.formatTag=6;break;case i.MuLaw:this.formatTag=7;break;default:o=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=r,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),o){this.privHeader=new ArrayBuffer(44);let e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}}t.AudioStreamFormatImpl=o},17741:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAudioPlayer=void 0;let r=i(61954),n=i(70806),o=i(85808);class s{playAudioSample(e,t,i){try{this.ensureInitializedContext();let i=this.formatAudioData(e),r=new Float32Array(this.samples.length+i.length);r.set(this.samples,0),r.set(i,this.samples.length),this.samples=r,t&&t()}catch(e){i&&i(e)}}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{e&&e()},e=>{t&&t(e)}),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){null===this.audioContext&&(this.createAudioContext(),this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},200))}createAudioContext(){this.audioContext=o.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new r.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){let i=new Float32Array(e.length);for(let r=0;r<e.length;r++)i[r]=e[r]/t;return i}updateAudioBuffer(){if(0===this.samples.length)return;let e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),i=this.samples.length/e,r=this.audioContext.createBuffer(e,i,this.audioFormat.samplesPerSec);for(let t=0;t<e;t++){let i=t,n=r.getChannelData(t);for(let t=0;t<this.samples.length;t++,i+=e)n[t]=this.samples[i]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=r,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=r.duration,this.samples=new Float32Array}playAudio(e){var t,i,r,n;return t=this,i=void 0,r=void 0,n=function*(){null===this.audioContext&&this.createAudioContext();let t=this.audioContext.createBufferSource(),i=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,e=>{t.buffer=e,t.connect(i),t.start(0)})},new(r||(r=Promise))(function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(s,a)}c((n=n.apply(t,i||[])).next())})}constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=n.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}}t.BaseAudioPlayer=s},83503:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamCallback=void 0;class i{}t.PullAudioInputStreamCallback=i},57592:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamCallback=void 0;class i{}t.PushAudioOutputStreamCallback=i},10946:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerAudioDestination=void 0;let n=i(23315),o=i(59545),s=i(85808),a={[s.AudioFormatTag.PCM]:"audio/wav",[s.AudioFormatTag.MuLaw]:"audio/x-wav",[s.AudioFormatTag.MP3]:"audio/mpeg",[s.AudioFormatTag.OGG_OPUS]:"audio/ogg",[s.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[s.AudioFormatTag.ALaw]:"audio/x-wav",[s.AudioFormatTag.FLAC]:"audio/flac"};class c{id(){return this.privId}write(e,t,i){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},e=>{i&&i(e)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},e=>{t&&t(e)});else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window){if((this.privFormat.formatTag===s.AudioFormatTag.PCM||this.privFormat.formatTag===s.AudioFormatTag.MuLaw||this.privFormat.formatTag===s.AudioFormatTag.ALaw)&&!1===this.privFormat.hasHeader)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let i=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(i).then(()=>{i=this.privFormat.addHeader(i);let r=new Blob([i],{type:a[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(r),this.notifyPlayback().then(()=>{e&&e()},e=>{t&&t(e)})},e=>{t&&t(e)})}}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=e;let t=a[this.privFormat.formatTag];void 0===t?console.warn("Unknown mimeType for format ".concat(s.AudioFormatTag[this.privFormat.formatTag],"; playback is not supported.")):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(e=>{n.Events.instance.onEvent(new n.BackgroundEvent(e))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(e=>{n.Events.instance.onEvent(new n.BackgroundEvent(e))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(e=>{n.Events.instance.onEvent(new n.BackgroundEvent(e))})):(console.warn("Format ".concat(s.AudioFormatTag[this.privFormat.formatTag]," could not be played by MSE, streaming playback is not enabled.")),this.privAudioOutputStream=new o.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return null!==(t=null===(e=this.privAudio)||void 0===e?void 0:e.volume)&&void 0!==t?t:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(()=>{e&&e()},e=>{t&&t(e)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return r(this,void 0,void 0,function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;let e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return r(this,void 0,void 0,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return r(this,void 0,void 0,function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||n.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}}t.SpeakerAudioDestination=c},74884:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageConfig=void 0;let r=i(7601),n=i(66918),o=i(70806),s=i(91722);class a{static fromOpenRange(){let e=new a;return e.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.AutoDetectSourceLanguagesOpenRangeOptionName),e}static fromLanguages(e){n.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");let t=new a;return t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw Error("Expected non-empty SourceLanguageConfig array.");let t=new a,i=[];return e.forEach(e=>{if(i.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){let i=e.language+o.PropertyId.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(i,e.endpointId)}}),t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,i.join()),t}get properties(){return this.privProperties}set mode(e){e===s.LanguageIdMode.Continuous?(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}constructor(){this.privProperties=new o.PropertyCollection,this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=s.LanguageIdMode.AtStart}}t.AutoDetectSourceLanguageConfig=a},98308:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageResult=void 0;let r=i(66918);class n{static fromResult(e){return new n(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new n(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}constructor(e,t){r.Contracts.throwIfNullOrUndefined(e,"language"),r.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}}t.AutoDetectSourceLanguageResult=n},79058:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarConfig=void 0;let r=i(66918),n=i(70806);class o{get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}constructor(e,t,i){this.privCustomized=!1,r.Contracts.throwIfNullOrWhitespace(e,"character"),this.character=e,this.style=t,void 0===i&&(i=new n.AvatarVideoFormat),this.videoFormat=i}}t.AvatarConfig=o},70520:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,(i=t.AvatarEventTypes||(t.AvatarEventTypes={})).SwitchedToSpeaking="SwitchedToSpeaking",i.SwitchedToIdle="SwitchedToIdle",i.SessionClosed="SessionClosed";class r{get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}constructor(e,t){this.privOffset=e,this.privDescription=t}}t.AvatarEventArgs=r},9425:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarSynthesizer=void 0;let n=i(38951),o=i(7601),s=i(23315),a=i(89833),c=i(70806),l=i(66918),p=i(35164);class d extends c.Synthesizer{implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=a.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(c.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(e){return r(this,void 0,void 0,function*(){l.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,l.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");let t=new s.Deferred;e.onicegatheringstatechange=()=>{s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,s.EventType.Debug)),"complete"===e.iceGatheringState&&(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering complete.",s.EventType.Info)),t.resolve())};let i=yield e.createOffer();yield e.setLocalDescription(i),yield t.promise,s.Events.instance.onEvent(new s.PlatformEvent("peer connection: got local SDP.",s.EventType.Info)),this.privProperties.setProperty(c.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));let r=yield this.speak("",!1);if(r.reason!==c.ResultReason.SynthesizingAudioCompleted)return new c.SynthesisResult(r.resultId,r.reason,r.errorDetails,r.properties);let n=atob(r.properties.getProperty(c.PropertyId.TalkingAvatarService_WebRTC_SDP)),o=new RTCSessionDescription(JSON.parse(n));return yield e.setRemoteDescription(o),new c.SynthesisResult(r.resultId,r.reason,void 0,r.properties)})}speakTextAsync(e){return r(this,void 0,void 0,function*(){let t=yield this.speak(e,!1);return new c.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)})}speakSsmlAsync(e){return r(this,void 0,void 0,function*(){let t=yield this.speak(e,!0);return new c.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)})}stopSpeakingAsync(){return r(this,void 0,void 0,function*(){for(;this.synthesisRequestQueue.length()>0;)(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()})}stopAvatarAsync(){return r(this,void 0,void 0,function*(){return l.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)})}close(){return r(this,void 0,void 0,function*(){if(!this.privDisposed)return this.dispose(!0)})}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,t,i){return new o.AvatarSynthesisAdapter(e,t,i,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,t){}createSynthesizerConfig(e){let t=super.createSynthesizerConfig(e);return t.avatarEnabled=!0,t}speak(e,t){return r(this,void 0,void 0,function*(){let i=s.createNoDashGuid(),r=new s.Deferred;return this.synthesisRequestQueue.enqueue(new p.SynthesisRequest(i,e,t,e=>{r.resolve(e),this.privSynthesizing=!1,this.adapterSpeak()},e=>{r.reject(e),this.privSynthesizing=!1})),this.adapterSpeak(),r.promise})}constructor(e,t){super(e),l.Contracts.throwIfNullOrUndefined(t,"avatarConfig"),this.privConnectionFactory=new n.SpeechSynthesisConnectionFactory,this.privAvatarConfig=t,this.implCommonSynthesizeSetup()}}t.AvatarSynthesizer=d},6108:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarVideoFormat=t.Coordinate=void 0;class i{constructor(e,t){this.x=e,this.y=t}}t.Coordinate=i;class r{setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}constructor(e="H264",t=2e6,i=1920,r=1080){this.codec=e,this.bitrate=t,this.width=i,this.height=r}}t.AvatarVideoFormat=r},22040:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarWebRTCConnectionResult=void 0;let r=i(70806);class n extends r.SynthesisResult{get SDPAnswer(){return this.privSDPAnswer}constructor(e,t,i,r,n){super(t,i,r,n),this.privSDPAnswer=e}}t.AvatarWebRTCConnectionResult=n},15301:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BotFrameworkConfig=void 0;let r=i(66918),n=i(70691),o=i(70806);class s extends n.DialogServiceConfigImpl{static fromSubscription(e,t,i){r.Contracts.throwIfNullOrWhitespace(e,"subscription"),r.Contracts.throwIfNullOrWhitespace(t,"region");let s=new n.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),i&&s.setProperty(o.PropertyId.Conversation_ApplicationId,i),s}static fromAuthorizationToken(e,t,i){r.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(t,"region");let s=new n.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),i&&s.setProperty(o.PropertyId.Conversation_ApplicationId,i),s}static fromHost(e,t,i){r.Contracts.throwIfNullOrUndefined(e,"host");let s=e instanceof URL?e:new URL("wss://".concat(e,".convai.speech.azure.us"));r.Contracts.throwIfNullOrUndefined(s,"resolvedHost");let a=new n.DialogServiceConfigImpl;return a.setProperty(o.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(o.PropertyId.SpeechServiceConnection_Host,s.toString()),void 0!==t&&a.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),a}static fromEndpoint(e,t){r.Contracts.throwIfNull(e,"endpoint");let i=new n.DialogServiceConfigImpl;return i.setProperty(o.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&i.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),i}constructor(){super()}}t.BotFrameworkConfig=s},84578:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetails=void 0;let r=i(7601),n=i(41650),o=i(70806);class s extends n.CancellationDetailsBase{static fromResult(e){let t=o.CancellationReason.Error,i=o.CancellationErrorCode.NoError;if(e instanceof o.RecognitionResult&&e.json){let i=r.SimpleSpeechPhrase.fromJSON(e.json);t=r.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus)}return e.properties&&(i=o.CancellationErrorCode[e.properties.getProperty(r.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new s(t,e.errorDetails||r.EnumTranslation.implTranslateErrorDetails(i),i)}constructor(e,t,i){super(e,t,i)}}t.CancellationDetails=s},41650:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetailsBase=void 0;class i{get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}constructor(e,t,i){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}}t.CancellationDetailsBase=i},46900:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,(i=t.CancellationErrorCode||(t.CancellationErrorCode={}))[i.NoError=0]="NoError",i[i.AuthenticationFailure=1]="AuthenticationFailure",i[i.BadRequestParameters=2]="BadRequestParameters",i[i.TooManyRequests=3]="TooManyRequests",i[i.ConnectionFailure=4]="ConnectionFailure",i[i.ServiceTimeout=5]="ServiceTimeout",i[i.ServiceError=6]="ServiceError",i[i.RuntimeError=7]="RuntimeError",i[i.Forbidden=8]="Forbidden"},23571:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationEventArgsBase=void 0;let r=i(70806);class n extends r.RecognitionEventArgs{get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}constructor(e,t,i,r,n){super(r,n),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}}t.CancellationEventArgsBase=n},58775:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,(i=t.CancellationReason||(t.CancellationReason={}))[i.Error=0]="Error",i[i.EndOfStream=1]="EndOfStream"},48478:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;let r=i(7601),n=i(23315),o=i(12464),s=i(66918),a=i(70806);class c{static fromRecognizer(e){let t=e.internalData,i=new c;return i.privInternalData=t,i.setupEvents(),i}static fromSynthesizer(e){let t=e.internalData,i=new c;return i.privInternalData=t,i.setupEvents(),i}openConnection(e,t){n.marshalPromiseToCallbacks(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof r.SynthesisAdapterBase)throw Error("Disconnecting a synthesizer's connection is currently not supported");n.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,i){if(s.Contracts.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof r.ServiceRecognizerBase){if("speech.context"!==e.toLowerCase())throw Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,i)}else if(this.privInternalData instanceof r.SynthesisAdapterBase){if("synthesis.context"!==e.toLowerCase())throw Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,i)}}sendMessageAsync(e,t,i,r){n.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,t),i,r)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new a.ConnectionEventArgs(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new a.ConnectionEventArgs(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new a.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new a.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new a.ServiceEventArgs(e.jsonString,e.name))})}}t.Connection=c},80821:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionEventArgs=void 0;let r=i(70806);class n extends r.SessionEventArgs{}t.ConnectionEventArgs=n},12464:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageImpl=t.ConnectionMessage=void 0;let r=i(92079),n=i(23315),o=i(13195),s=i(79430);class a{}t.ConnectionMessage=a;class c{get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>"path"===e.toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===n.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===n.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}constructor(e){this.privConnectionMessage=e,this.privProperties=new o.PropertyCollection,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]&&this.privProperties.setProperty(s.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(e=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])})}}t.ConnectionMessageImpl=c},32581:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageEventArgs=void 0;class i{get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}constructor(e){this.privConnectionMessage=e}}t.ConnectionMessageEventArgs=i},66918:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contracts=void 0;class i{static throwIfNullOrUndefined(e,t){if(null==e)throw Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(i.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,r){if(i.throwIfNullOrUndefined(e,t),(""+e).length>r)throw Error("throwIfNullOrTooLong:"+t+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(e,t,r){if(i.throwIfNullOrUndefined(e,t),(""+e).length<r)throw Error("throwIfNullOrTooShort:"+t+" (less than "+r.toString()+" characters)")}static throwIfDisposed(e){if(e)throw Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(i.throwIfNullOrUndefined(e,t),0===e.length)throw Error("throwIfArrayEmptyOrWhitespace:"+t);for(let r of e)i.throwIfNullOrWhitespace(r,t)}static throwIfFileDoesNotExist(e,t){i.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw Error("throwIfNotUndefined:"+t)}}t.Contracts=i},53907:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionCanceledEventArgs=void 0;let r=i(23571);class n extends r.CancellationEventArgsBase{}t.ConversationTranscriptionCanceledEventArgs=n},22696:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCommandsConfig=void 0;let r=i(66918),n=i(70691),o=i(70806);class s extends n.DialogServiceConfigImpl{static fromSubscription(e,t,i){r.Contracts.throwIfNullOrWhitespace(e,"applicationId"),r.Contracts.throwIfNullOrWhitespace(t,"subscription"),r.Contracts.throwIfNullOrWhitespace(i,"region");let s=new n.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.CustomCommands),s.setProperty(o.PropertyId.Conversation_ApplicationId,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,i),s}static fromAuthorizationToken(e,t,i){r.Contracts.throwIfNullOrWhitespace(e,"applicationId"),r.Contracts.throwIfNullOrWhitespace(t,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(i,"region");let s=new n.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,n.DialogServiceConfig.DialogTypes.CustomCommands),s.setProperty(o.PropertyId.Conversation_ApplicationId,e),s.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,t),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,i),s}set applicationId(e){r.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(o.PropertyId.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(o.PropertyId.Conversation_ApplicationId)}constructor(){super()}}t.CustomCommandsConfig=s},57181:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;let r=i(3150),n=i(23315);class o{static SetLoggingLevel(e){this.privListener=new r.ConsoleLoggingListener(e),n.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if("undefined"==typeof window)this.privListener&&(this.privListener.logPath=e);else throw Error("File system logging not available in browser.")}}t.Diagnostics=o,o.privListener=void 0},70691:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConfigImpl=t.DialogServiceConfig=void 0;let r=i(66918),n=i(70806);class o{set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}constructor(){return}}t.DialogServiceConfig=o;class s extends o{get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,t,i,r){this.setProperty(n.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(n.PropertyId.SpeechServiceConnection_ProxyPort,"".concat(t)),i&&this.setProperty(n.PropertyId.SpeechServiceConnection_ProxyUserName,i),r&&this.setProperty(n.PropertyId.SpeechServiceConnection_ProxyPassword,r)}setServiceProperty(e,t,i){this.privSpeechConfig.setServiceProperty(e,t)}close(){}constructor(){super(),this.privSpeechConfig=new n.SpeechConfigImpl}}t.DialogServiceConfigImpl=s},87663:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConnector=void 0;let n=i(81906),o=i(7601),s=i(23315),a=i(66918),c=i(70806),l=i(79430);class p extends c.Recognizer{connect(e,t){s.marshalPromiseToCallbacks(this.privReco.connect(),e,t)}disconnect(e,t){s.marshalPromiseToCallbacks(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(l.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(l.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(l.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){a.Contracts.throwIfDisposed(this.privIsDisposed);let i=r(this,void 0,void 0,function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;let e=new s.Deferred;yield this.privReco.recognize(o.RecognitionMode.Conversation,e.resolve,e.reject);let t=yield e.promise;return yield this.implRecognizerStop(),t});i.catch(()=>{this.dispose(!0).catch(()=>{})}),s.marshalPromiseToCallbacks(i.finally(()=>{this.isTurnComplete=!0}),e,t)}}sendActivityAsync(e,t,i){s.marshalPromiseToCallbacks(this.privReco.sendMessage(e),t,i)}close(e,t){a.Contracts.throwIfDisposed(this.privIsDisposed),s.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){let t=Object.create(null,{dispose:{get:()=>super.dispose}});return r(this,void 0,void 0,function*(){!this.privIsDisposed&&e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield t.dispose.call(this,e))})}createRecognizerConfig(e){return new o.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,r){return new o.DialogServiceAdapter(e,t,i,r,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(l.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(l.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(l.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}constructor(e,t){a.Contracts.throwIfNull(e,"dialogConfig"),super(t,e.properties,new n.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=e.properties.clone();let i=this.buildAgentConfig();this.privReco.agentConfig.set(i)}}t.DialogServiceConnector=p},70806:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(16319);Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return r.AudioConfig}});var n=i(85808);Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return n.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return n.AudioFormatTag}});var o=i(21542);Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return o.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return o.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return o.PushAudioInputStream}});var s=i(59545);Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return s.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return s.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return s.PushAudioOutputStream}});var a=i(58775);Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return a.CancellationReason}});var c=i(83503);Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return c.PullAudioInputStreamCallback}});var l=i(57592);Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return l.PushAudioOutputStreamCallback}});var p=i(76857);Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return p.KeywordRecognitionModel}});var d=i(68702);Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return d.SessionEventArgs}});var u=i(49720);Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return u.RecognitionEventArgs}});var h=i(61832);Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return h.OutputFormat}});var g=i(30051);Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return g.IntentRecognitionEventArgs}});var f=i(11271);Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return f.RecognitionResult}});var m=i(95712);Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return m.SpeechRecognitionResult}});var C=i(67107);Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return C.IntentRecognitionResult}});var S=i(79794);Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return S.LanguageUnderstandingModel}});var y=i(56770);Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return y.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return y.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return y.MeetingTranscriptionEventArgs}});var P=i(94937);Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return P.SpeechRecognitionCanceledEventArgs}});var R=i(79484);Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return R.TranslationRecognitionEventArgs}});var I=i(12874);Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return I.TranslationSynthesisEventArgs}});var b=i(97995);Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return b.TranslationRecognitionResult}});var T=i(56113);Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return T.TranslationSynthesisResult}});var E=i(13883);Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return E.ResultReason}});var w=i(7219);Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return w.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return w.SpeechConfigImpl}});var A=i(36040);Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return A.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return A.SpeechTranslationConfigImpl}});var x=i(13195);Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return x.PropertyCollection}});var O=i(79430);Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return O.PropertyId}});var M=i(77845);Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return M.Recognizer}});var N=i(69962);Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return N.SpeechRecognizer}});var D=i(37969);Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return D.IntentRecognizer}});var k=i(42728);Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return k.VoiceProfileType}});var _=i(38006);Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return _.TranslationRecognizer}});var L=i(32020);Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return L.Translations}});var z=i(53436);Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return z.NoMatchReason}});var j=i(26351);Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return j.NoMatchDetails}});var F=i(22308);Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return F.TranslationRecognitionCanceledEventArgs}});var B=i(32150);Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return B.IntentRecognitionCanceledEventArgs}});var U=i(41650);Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return U.CancellationDetailsBase}});var W=i(84578);Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return W.CancellationDetails}});var V=i(46900);Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return V.CancellationErrorCode}});var q=i(80821);Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return q.ConnectionEventArgs}});var H=i(67046);Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return H.ServiceEventArgs}});var G=i(48478);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return G.Connection}});var K=i(17335);Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return K.PhraseListGrammar}});var J=i(70691);Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return J.DialogServiceConfig}});var Z=i(15301);Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return Z.BotFrameworkConfig}});var Y=i(22696);Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return Y.CustomCommandsConfig}});var Q=i(87663);Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return Q.DialogServiceConnector}});var X=i(50641);Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return X.ActivityReceivedEventArgs}});var $=i(67687);Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return $.TurnStatusReceivedEventArgs}});var ee=i(25754);Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return ee.ServicePropertyChannel}});var et=i(61300);Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return et.ProfanityOption}});var ei=i(17741);Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return ei.BaseAudioPlayer}});var er=i(32581);Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return er.ConnectionMessageEventArgs}});var en=i(12464);Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return en.ConnectionMessage}});var eo=i(32350);Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return eo.VoiceProfile}});var es=i(45169);Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return es.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return es.VoiceProfileEnrollmentCancellationDetails}});var ea=i(95044);Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return ea.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return ea.VoiceProfileCancellationDetails}});var ec=i(93626);Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ec.VoiceProfilePhraseResult}});var el=i(90720);Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return el.VoiceProfileClient}});var ep=i(27920);Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return ep.SpeakerRecognizer}});var ed=i(30621);Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return ed.SpeakerIdentificationModel}});var eu=i(25285);Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return eu.SpeakerVerificationModel}});var eh=i(74884);Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return eh.AutoDetectSourceLanguageConfig}});var ev=i(98308);Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return ev.AutoDetectSourceLanguageResult}});var eg=i(99077);Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return eg.SourceLanguageConfig}});var ef=i(85400);Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return ef.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return ef.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return ef.SpeakerRecognitionCancellationDetails}});var em=i(86224);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return em.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return em.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return em.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return em.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return em.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return em.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return em.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return em.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return em.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return em.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return em.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return em.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return em.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return em.User}});var eC=i(35164);Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return eC.Synthesizer}});var eS=i(70257);Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return eS.SpeechSynthesisOutputFormat}});var ey=i(12409);Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return ey.SpeechSynthesizer}});var eP=i(22400);Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return eP.SynthesisResult}});var eR=i(70051);Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return eR.SpeechSynthesisResult}});var eI=i(33664);Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return eI.SpeechSynthesisEventArgs}});var eb=i(94930);Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return eb.SpeechSynthesisWordBoundaryEventArgs}});var eT=i(48806);Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return eT.SpeechSynthesisBookmarkEventArgs}});var eE=i(53197);Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return eE.SpeechSynthesisVisemeEventArgs}});var ew=i(94012);Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return ew.SpeechSynthesisBoundaryType}});var eA=i(81663);Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return eA.SynthesisVoicesResult}});var ex=i(34301);Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return ex.VoiceInfo}});var eO=i(10946);Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return eO.SpeakerAudioDestination}});var eM=i(53907);Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return eM.ConversationTranscriptionCanceledEventArgs}});var eN=i(2624);Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return eN.MeetingTranscriptionCanceledEventArgs}});var eD=i(19707);Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return eD.PronunciationAssessmentGradingSystem}});var ek=i(33112);Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return ek.PronunciationAssessmentGranularity}});var e_=i(46471);Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return e_.PronunciationAssessmentConfig}});var eL=i(30613);Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return eL.PronunciationAssessmentResult}});var ez=i(91722);Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return ez.LanguageIdMode}});var ej=i(79058);Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return ej.AvatarConfig}});var eF=i(70520);Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return eF.AvatarEventArgs}});var eB=i(9425);Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return eB.AvatarSynthesizer}});var eU=i(6108);Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return eU.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return eU.Coordinate}});var eW=i(22040);Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return eW.AvatarWebRTCConnectionResult}});var eV=i(57181);Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return eV.Diagnostics}});var eq=i(34774);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return eq.LogLevel}})},32150:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionCanceledEventArgs=void 0;let r=i(70806);class n extends r.IntentRecognitionEventArgs{get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}constructor(e,t,i,r,n,o){super(r,n,o),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}}t.IntentRecognitionCanceledEventArgs=n},30051:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionEventArgs=void 0;let r=i(70806);class n extends r.RecognitionEventArgs{get result(){return this.privResult}constructor(e,t,i){super(t,i),this.privResult=e}}t.IntentRecognitionEventArgs=n},67107:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionResult=void 0;let r=i(70806);class n extends r.SpeechRecognitionResult{get intentId(){return this.privIntentId}constructor(e,t,i,r,n,o,s,a,c,l,p){super(t,i,r,n,o,s,a,void 0,c,l,p),this.privIntentId=e}}t.IntentRecognitionResult=n},37969:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognizer=void 0;let r=i(7601),n=i(23315),o=i(66918),s=i(70806);class a extends s.Recognizer{get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){if(o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){let e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}n.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){let e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}n.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,i){o.Contracts.throwIfNull(e,"model"),i&&i("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){if(e)try{e()}catch(e){t&&t(e)}}addIntent(e,t){o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),o.Contracts.throwIfNullOrWhitespace(t,"intentId"),o.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(e,t,i){o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),o.Contracts.throwIfNullOrWhitespace(e,"intentId"),o.Contracts.throwIfNull(t,"model"),o.Contracts.throwIfNullOrWhitespace(t.appId,"model.appId"),this.privAddedLmIntents[e]=new r.AddedLmIntent(t,i)}addAllIntents(e,t){o.Contracts.throwIfNull(e,"model"),o.Contracts.throwIfNullOrWhitespace(e.appId,"model.appId"),this.privUmbrellaIntent=new r.AddedLmIntent(e,t)}close(e,t){o.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.marshalPromiseToCallbacks(this.dispose(!0),e,t)}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){return new r.IntentServiceRecognizer(e,t,i,n,this)}dispose(e){var t,i,r,n;let o=Object.create(null,{dispose:{get:()=>super.dispose}});return t=this,i=void 0,r=void 0,n=function*(){!this.privDisposedIntentRecognizer&&e&&(this.privDisposedIntentRecognizer=!0,yield o.dispose.call(this,e))},new(r||(r=Promise))(function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(s,a)}c((n=n.apply(t,i||[])).next())})}buildSpeechContext(){let e,t,i;let r=[];for(let n of(void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,i=this.privUmbrellaIntent.modelImpl.subscriptionKey),Object.keys(this.privAddedLmIntents))){let o=this.privAddedLmIntents[n];if(void 0===e)e=o.modelImpl.appId;else if(e!==o.modelImpl.appId)throw Error("Intents must all be from the same LUIS model");if(void 0===t)t=o.modelImpl.region;else if(t!==o.modelImpl.region)throw Error("Intents must all be from the same LUIS model in a single region");if(void 0===i)i=o.modelImpl.subscriptionKey;else if(i!==o.modelImpl.subscriptionKey)throw Error("Intents must all use the same subscription key");let s="luis/"+e+"-PRODUCTION#"+n;r.push(s)}return{Intent:{id:e,key:void 0===i?this.privProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key]):i,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?r:["luis/"+e+"-PRODUCTION"]}}constructor(e,t){o.Contracts.throwIfNullOrUndefined(e,"speechConfig"),o.Contracts.throwIfNullOrUndefined(e,"speechConfig"),super(t,e.properties,new r.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=e.properties,o.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}}t.IntentRecognizer=a},76857:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordRecognitionModel=void 0;let r=i(66918);class n{static fromFile(e){throw r.Contracts.throwIfFileDoesNotExist(e,"fileName"),Error("Not yet implemented.")}static fromStream(e){throw r.Contracts.throwIfNull(e,"file"),Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}constructor(){this.privDisposed=!1;return}}t.KeywordRecognitionModel=n},91722:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,(i=t.LanguageIdMode||(t.LanguageIdMode={}))[i.AtStart=0]="AtStart",i[i.Continuous=1]="Continuous"},79794:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageUnderstandingModelImpl=t.LanguageUnderstandingModel=void 0;let r=i(66918);class n{static fromEndpoint(e){r.Contracts.throwIfNull(e,"uri"),r.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");let t=new o,i=e.host.indexOf(".");if(-1===i)throw Error("Could not determine region from endpoint");t.region=e.host.substr(0,i);let n=e.pathname.lastIndexOf("/")+1;if(-1===n)throw Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(n),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){r.Contracts.throwIfNullOrWhitespace(e,"appId");let t=new o;return t.appId=e,t}static fromSubscription(e,t,i){r.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),r.Contracts.throwIfNullOrWhitespace(t,"appId"),r.Contracts.throwIfNullOrWhitespace(i,"region");let n=new o;return n.appId=t,n.region=i,n.subscriptionKey=e,n}constructor(){return}}t.LanguageUnderstandingModel=n;class o extends n{}t.LanguageUnderstandingModelImpl=o},34774:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;let r=i(23315);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return r.EventType}})},2624:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionCanceledEventArgs=void 0;let r=i(23571);class n extends r.CancellationEventArgsBase{}t.MeetingTranscriptionCanceledEventArgs=n},26351:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchDetails=void 0;let r=i(7601),n=i(70806);class o{static fromResult(e){let t=r.SimpleSpeechPhrase.fromJSON(e.json),i=n.NoMatchReason.NotRecognized;switch(t.RecognitionStatus){case r.RecognitionStatus.BabbleTimeout:i=n.NoMatchReason.InitialBabbleTimeout;break;case r.RecognitionStatus.InitialSilenceTimeout:i=n.NoMatchReason.InitialSilenceTimeout;break;default:i=n.NoMatchReason.NotRecognized}return new o(i)}get reason(){return this.privReason}constructor(e){this.privReason=e}}t.NoMatchDetails=o},53436:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,(i=t.NoMatchReason||(t.NoMatchReason={}))[i.NotRecognized=0]="NotRecognized",i[i.InitialSilenceTimeout=1]="InitialSilenceTimeout",i[i.InitialBabbleTimeout=2]="InitialBabbleTimeout"},61832:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,(i=t.OutputFormat||(t.OutputFormat={}))[i.Simple=0]="Simple",i[i.Detailed=1]="Detailed"},17335:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhraseListGrammar=void 0;class i{static fromRecognizer(e){return new i(e.internalData)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}constructor(e){this.privGrammerBuilder=e.dynamicGrammar}}t.PhraseListGrammar=i},61300:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,(i=t.ProfanityOption||(t.ProfanityOption={}))[i.Masked=0]="Masked",i[i.Removed=1]="Removed",i[i.Raw=2]="Raw"},46471:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentConfig=void 0;let r=i(66918),n=i(70806);class o{static fromJSON(e){r.Contracts.throwIfNullOrUndefined(e,"json");let t=new o("");return t.privProperties=new n.PropertyCollection,t.properties.setProperty(n.PropertyId.PronunciationAssessment_Json,e),t}toJSON(){return this.updateJson(),this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();let t=e.internalData;t.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,t.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(n.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,t.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(n.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(e){r.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(n.PropertyId.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){r.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set enableMiscue(e){this.properties.setProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,e?"true":"false")}get enableMiscue(){return"true"===this.properties.getProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}enableContentAssessmentWithTopic(e){this.privContentAssessmentTopic=e}get properties(){return this.privProperties}updateJson(){let e=JSON.parse(this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Json,"{}")),t=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_ReferenceText);t&&(e.referenceText=t);let i=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_GradingSystem);i&&(e.gradingSystem=i);let r=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Granularity);r&&(e.granularity=r),this.privPhonemeAlphabet&&(e.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(e.nbestPhonemeCount=this.privNBestPhonemeCount),e.enableProsodyAssessment=this.privEnableProsodyAssessment,e.dimension="Comprehensive",this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_EnableMiscue)&&(e.enableMiscue=this.enableMiscue),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_Params,JSON.stringify(e))}constructor(e,t=n.PronunciationAssessmentGradingSystem.FivePoint,i=n.PronunciationAssessmentGranularity.Phoneme,o=!1){r.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_GradingSystem,n.PronunciationAssessmentGradingSystem[t]),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_Granularity,n.PronunciationAssessmentGranularity[i]),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}}t.PronunciationAssessmentConfig=o},19707:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,(i=t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))[i.FivePoint=1]="FivePoint",i[i.HundredMark=2]="HundredMark"},33112:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,(i=t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))[i.Phoneme=1]="Phoneme",i[i.Word=2]="Word",i[i.FullText=3]="FullText"},30613:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentResult=t.ContentAssessmentResult=void 0;let r=i(66918),n=i(70806);class o{get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}constructor(e){this.privPronJson=e}}t.ContentAssessmentResult=o;class s{static fromResult(e){r.Contracts.throwIfNullOrUndefined(e,"result");let t=e.properties.getProperty(n.PropertyId.SpeechServiceResponse_JsonResult);return r.Contracts.throwIfNullOrUndefined(t,"json"),new s(t)}get detailResult(){return this.privPronJson}get accuracyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.AccuracyScore}get pronunciationScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.PronScore}get completenessScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.CompletenessScore}get fluencyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.FluencyScore}get prosodyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.ProsodyScore}get contentAssessmentResult(){if(void 0!==this.detailResult.ContentAssessment)return new o(this.detailResult)}constructor(e){let t=JSON.parse(e);r.Contracts.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}}t.PronunciationAssessmentResult=s},13195:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyCollection=void 0;let r=i(70806);class n{getProperty(e,t){let i;i="string"==typeof e?e:r.PropertyId[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===i)return this.privValues[e];if(void 0!==t)return String(t)}setProperty(e,t){let i;i="string"==typeof e?e:r.PropertyId[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===i){this.privValues[e]=t;return}this.privKeys.push(i),this.privValues.push(t)}clone(){let e=new n;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach(t=>{if(void 0===e.getProperty(t,void 0)){let i=this.getProperty(t);e.setProperty(t,i)}})}get keys(){return this.privKeys}constructor(){this.privKeys=[],this.privValues=[]}}t.PropertyCollection=n},79430:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,(i=t.PropertyId||(t.PropertyId={}))[i.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",i[i.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",i[i.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",i[i.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",i[i.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",i[i.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",i[i.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",i[i.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",i[i.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",i[i.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",i[i.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",i[i.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",i[i.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",i[i.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",i[i.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",i[i.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",i[i.Speech_SessionId=16]="Speech_SessionId",i[i.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",i[i.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",i[i.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",i[i.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",i[i.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",i[i.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",i[i.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",i[i.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",i[i.CancellationDetails_Reason=25]="CancellationDetails_Reason",i[i.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",i[i.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",i[i.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",i[i.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",i[i.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",i[i.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",i[i.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",i[i.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",i[i.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",i[i.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",i[i.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",i[i.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",i[i.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",i[i.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",i[i.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",i[i.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",i[i.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",i[i.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",i[i.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",i[i.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",i[i.Conversation_ApplicationId=46]="Conversation_ApplicationId",i[i.Conversation_DialogType=47]="Conversation_DialogType",i[i.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",i[i.Conversation_From_Id=49]="Conversation_From_Id",i[i.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",i[i.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",i[i.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",i[i.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",i[i.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",i[i.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",i[i.ConversationTranslator_Host=56]="ConversationTranslator_Host",i[i.ConversationTranslator_Name=57]="ConversationTranslator_Name",i[i.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",i[i.ConversationTranslator_Token=59]="ConversationTranslator_Token",i[i.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",i[i.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",i[i.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",i[i.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",i[i.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",i[i.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",i[i.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",i[i.WebWorkerLoadType=67]="WebWorkerLoadType",i[i.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"},49720:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEventArgs=void 0;let r=i(70806);class n extends r.SessionEventArgs{get offset(){return this.privOffset}constructor(e,t){super(t),this.privOffset=e}}t.RecognitionEventArgs=n},11271:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionResult=void 0;class i{get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}constructor(e,t,i,r,n,o,s,a,c,l){this.privResultId=e,this.privReason=t,this.privText=i,this.privDuration=r,this.privOffset=n,this.privLanguage=o,this.privLanguageDetectionConfidence=s,this.privErrorDetails=a,this.privJson=c,this.privProperties=l}}t.RecognitionResult=i},77845:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Recognizer=void 0;let n=i(7601),o=i(23315),s=i(66918),a=i(70806);class c{close(e,t){s.Contracts.throwIfDisposed(this.privDisposed),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return r(this,void 0,void 0,function*(){!this.privDisposed&&(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return n.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){n.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);let r=this.createRecognizerConfig(new n.SpeechServiceConfig(new n.Context(new n.OS(e,t,i))));this.privReco=this.createServiceRecognizer(c.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,r)}recognizeOnceAsyncImpl(e){return r(this,void 0,void 0,function*(){s.Contracts.throwIfDisposed(this.privDisposed);let t=new o.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);let i=yield t.promise;return yield this.implRecognizerStop(),i})}startContinuousRecognitionAsyncImpl(e){return r(this,void 0,void 0,function*(){s.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return r(this,void 0,void 0,function*(){s.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return r(this,void 0,void 0,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuthFromProperties(e){let t=e.getProperty(a.PropertyId.SpeechServiceConnection_Key,void 0);return t&&""!==t?new n.CognitiveSubscriptionKeyAuthentication(t):new n.CognitiveTokenAuthentication(()=>Promise.resolve(e.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0)),()=>Promise.resolve(e.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0)))}constructor(e,t,i){this.audioConfig=void 0!==e?e:a.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=i,this.implCommonRecognizerSetup()}}t.Recognizer=c},13883:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,(i=t.ResultReason||(t.ResultReason={}))[i.NoMatch=0]="NoMatch",i[i.Canceled=1]="Canceled",i[i.RecognizingSpeech=2]="RecognizingSpeech",i[i.RecognizedSpeech=3]="RecognizedSpeech",i[i.RecognizedKeyword=4]="RecognizedKeyword",i[i.RecognizingIntent=5]="RecognizingIntent",i[i.RecognizedIntent=6]="RecognizedIntent",i[i.TranslatingSpeech=7]="TranslatingSpeech",i[i.TranslatedSpeech=8]="TranslatedSpeech",i[i.SynthesizingAudio=9]="SynthesizingAudio",i[i.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",i[i.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",i[i.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",i[i.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",i[i.RecognizedSpeakers=14]="RecognizedSpeakers",i[i.RecognizedSpeaker=15]="RecognizedSpeaker",i[i.ResetVoiceProfile=16]="ResetVoiceProfile",i[i.DeletedVoiceProfile=17]="DeletedVoiceProfile",i[i.VoicesListRetrieved=18]="VoicesListRetrieved",i[i.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",i[i.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",i[i.TranslatedInstantMessage=21]="TranslatedInstantMessage",i[i.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"},67046:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceEventArgs=void 0;let r=i(70806);class n extends r.SessionEventArgs{get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}constructor(e,t,i){super(i),this.privJsonResult=e,this.privEventName=t}}t.ServiceEventArgs=n},25754:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,(i=t.ServicePropertyChannel||(t.ServicePropertyChannel={}))[i.UriQueryParameter=0]="UriQueryParameter"},68702:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEventArgs=void 0;class i{get sessionId(){return this.privSessionId}constructor(e){this.privSessionId=e}}t.SessionEventArgs=i},99077:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceLanguageConfig=void 0;let r=i(66918);class n{static fromLanguage(e,t){return new n(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}constructor(e,t){r.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}}t.SourceLanguageConfig=n},30621:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerIdentificationModel=void 0;let r=i(66918),n=i(70806);class o{static fromProfiles(e){return new o(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}constructor(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],r.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw Error("Empty Voice Profiles array");for(let t of e){if(t.profileType!==n.VoiceProfileType.TextIndependentIdentification)throw Error("Identification model can only be created from Identification profile: "+t.profileId);this.privVoiceProfiles.push(t),this.privProfileIds.push(t.profileId)}}}t.SpeakerIdentificationModel=o},85400:function(e,t,i){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;let o=i(7601),s=i(70806);(n=r=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}))[n.Verify=0]="Verify",n[n.Identify=1]="Identify";class a{get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}constructor(e,t=s.ResultReason.RecognizedSpeaker,i=s.CancellationErrorCode.NoError,n=""){this.privProperties=new s.PropertyCollection;let a="TextIndependentIdentification"===e.scenario?r.Identify:r.Verify;this.privReason=t,this.privReason!==s.ResultReason.Canceled?a===r.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=s.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,"accept"!==e.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=s.ResultReason.NoMatch),void 0!==e.verificationResult.profileId&&""!==e.verificationResult.profileId&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=n,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[i])),this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}}t.SpeakerRecognitionResult=a;class c extends s.CancellationDetailsBase{static fromResult(e){let t=s.CancellationReason.Error,i=s.CancellationErrorCode.NoError;return e.properties&&(i=s.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new c(t,e.errorDetails,i)}constructor(e,t,i){super(e,t,i)}}t.SpeakerRecognitionCancellationDetails=c},27920:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognizer=void 0;let n=i(7601),o=i(66918),s=i(70806);class a extends s.Recognizer{get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e){return r(this,void 0,void 0,function*(){return o.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)})}close(){return r(this,void 0,void 0,function*(){o.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)})}recognizeSpeakerOnceAsyncImpl(e){return r(this,void 0,void 0,function*(){o.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();let t=yield this.privReco.recognizeSpeaker(e);return yield this.implRecognizerStop(),t})}implRecognizerStop(){return r(this,void 0,void 0,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,r){return new n.SpeakerServiceRecognizer(e,t,i,r,this)}dispose(e){let t=Object.create(null,{dispose:{get:()=>super.dispose}});return r(this,void 0,void 0,function*(){!this.privDisposedSpeakerRecognizer&&e&&(this.privDisposedSpeakerRecognizer=!0,yield t.dispose.call(this,e))})}constructor(e,t){o.Contracts.throwIfNullOrUndefined(e,"speechConfig"),o.Contracts.throwIfNullOrUndefined(e,"speechConfig"),super(t,e.properties,new n.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=t,o.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=e.properties}}t.SpeakerRecognizer=a},25285:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerVerificationModel=void 0;let r=i(66918),n=i(70806);class o{static fromProfile(e){return new o(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===n.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}constructor(e){if(r.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===n.VoiceProfileType.TextIndependentIdentification)throw Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}}t.SpeakerVerificationModel=o},7219:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConfigImpl=t.SpeechConfig=void 0;let r=i(7601),n=i(66918),o=i(70806);class s{static fromSubscription(e,t){n.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),n.Contracts.throwIfNullOrWhitespace(t,"region");let i=new a;return i.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),i.setProperty(o.PropertyId.SpeechServiceConnection_IntentRegion,t),i.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),i}static fromEndpoint(e,t){n.Contracts.throwIfNull(e,"endpoint");let i=new a;return i.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&i.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),i}static fromHost(e,t){n.Contracts.throwIfNull(e,"hostName");let i=new a;return i.setProperty(o.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&i.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),i}static fromAuthorizationToken(e,t){n.Contracts.throwIfNull(e,"authorizationToken"),n.Contracts.throwIfNullOrWhitespace(t,"region");let i=new a;return i.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),i.setProperty(o.PropertyId.SpeechServiceConnection_IntentRegion,t),i.authorizationToken=e,i}close(){}constructor(){return}}t.SpeechConfig=s;class a extends s{get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return o.OutputFormat[this.privProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(r.OutputFormatPropertyName,o.OutputFormat[e])}get endpointId(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){n.Contracts.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,i,r){this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyUserName],i),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPassword],r)}setServiceProperty(e,t){let i=JSON.parse(this.privProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));i[e]=t,this.privProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(i))}setProfanity(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_ProfanityOption,o.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(r.ForceDictationPropertyName,"true")}clone(){let e=new a;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return o.SpeechSynthesisOutputFormat[this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,o.SpeechSynthesisOutputFormat[e])}constructor(){super(),this.privProperties=new o.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=o.OutputFormat.Simple}}t.SpeechConfigImpl=a},94937:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionCanceledEventArgs=void 0;let r=i(23571);class n extends r.CancellationEventArgsBase{}t.SpeechRecognitionCanceledEventArgs=n},56770:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionEventArgs=t.ConversationTranscriptionEventArgs=t.SpeechRecognitionEventArgs=void 0;let r=i(70806);class n extends r.RecognitionEventArgs{get result(){return this.privResult}constructor(e,t,i){super(t,i),this.privResult=e}}t.SpeechRecognitionEventArgs=n;class o extends r.RecognitionEventArgs{get result(){return this.privResult}constructor(e,t,i){super(t,i),this.privResult=e}}t.ConversationTranscriptionEventArgs=o;class s extends n{}t.MeetingTranscriptionEventArgs=s},95712:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionResult=void 0;let r=i(70806);class n extends r.RecognitionResult{get speakerId(){return this.privSpeakerId}constructor(e,t,i,r,n,o,s,a,c,l,p){super(e,t,i,r,n,o,s,c,l,p),this.privSpeakerId=a}}t.SpeechRecognitionResult=n},69962:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognizer=void 0;let r=i(7601),n=i(23315),o=i(66918),s=i(70806);class a extends s.Recognizer{static FromConfig(e,t,i){return t.properties.mergeTo(e.properties),new a(e,i)}get endpointId(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return(o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple])===s.OutputFormat[s.OutputFormat.Simple])?s.OutputFormat.Simple:s.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){n.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,i){o.Contracts.throwIfNull(e,"model"),i&&i("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){o.Contracts.throwIfDisposed(this.privDisposedRecognizer),n.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){var t,i,r,n;let o=Object.create(null,{dispose:{get:()=>super.dispose}});return t=this,i=void 0,r=void 0,n=function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield o.dispose.call(this,e))},new(r||(r=Promise))(function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(s,a)}c((n=n.apply(t,i||[])).next())})}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){return new r.SpeechServiceRecognizer(e,t,i,n,this)}constructor(e,t){o.Contracts.throwIfNull(e,"speechConfig"),o.Contracts.throwIfNullOrWhitespace(e.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,e.properties,new r.SpeechConnectionFactory),this.privDisposedRecognizer=!1}}t.SpeechRecognizer=a},48806:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBookmarkEventArgs=void 0;class i{get audioOffset(){return this.privAudioOffset}get text(){return this.privText}constructor(e,t){this.privAudioOffset=e,this.privText=t}}t.SpeechSynthesisBookmarkEventArgs=i},94012:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,(i=t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={})).Word="WordBoundary",i.Punctuation="PunctuationBoundary",i.Sentence="SentenceBoundary"},33664:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisEventArgs=void 0;class i{get result(){return this.privResult}constructor(e){this.privResult=e}}t.SpeechSynthesisEventArgs=i},70257:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,(i=t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))[i.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",i[i.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",i[i.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",i[i.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",i[i.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",i[i.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",i[i.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",i[i.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",i[i.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",i[i.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",i[i.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",i[i.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",i[i.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",i[i.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",i[i.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",i[i.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",i[i.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",i[i.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",i[i.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",i[i.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",i[i.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",i[i.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",i[i.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",i[i.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",i[i.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",i[i.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",i[i.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",i[i.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",i[i.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",i[i.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",i[i.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",i[i.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",i[i.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",i[i.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",i[i.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",i[i.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",i[i.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"},70051:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisResult=void 0;let r=i(70806);class n extends r.SynthesisResult{get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}constructor(e,t,i,r,n,o){super(e,t,r,n),this.privAudioData=i,this.privAudioDuration=o}}t.SpeechSynthesisResult=n},53197:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisVisemeEventArgs=void 0;class i{get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}constructor(e,t,i){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=i}}t.SpeechSynthesisVisemeEventArgs=i},94930:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisWordBoundaryEventArgs=void 0;class i{get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}constructor(e,t,i,r,n,o){this.privAudioOffset=e,this.privDuration=t,this.privText=i,this.privWordLength=r,this.privTextOffset=n,this.privBoundaryType=o}}t.SpeechSynthesisWordBoundaryEventArgs=i},12409:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesizer=void 0;let n=i(7601),o=i(23315),s=i(40719),a=i(89833),c=i(59545),l=i(66918),p=i(70806),d=i(35164);class u extends p.Synthesizer{static FromConfig(e,t,i){return t.properties.mergeTo(e.properties),new u(e,i)}speakTextAsync(e,t,i,r){this.speakImpl(e,!1,t,i,r)}speakSsmlAsync(e,t,i,r){this.speakImpl(e,!0,t,i,r)}getVoicesAsync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(this,void 0,void 0,function*(){return this.getVoices(e)})}close(e,t){l.Contracts.throwIfDisposed(this.privDisposed),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}createSynthesisAdapter(e,t,i){return new n.SpeechSynthesisAdapter(e,t,i,this,this.audioConfig)}createRestSynthesisAdapter(e,t){return new n.SynthesisRestAdapter(t,e)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=a.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(p.SpeechSynthesisOutputFormat[this.properties.getProperty(p.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,t,i,r,n){try{let a;l.Contracts.throwIfDisposed(this.privDisposed);let u=o.createNoDashGuid();a=n instanceof p.PushAudioOutputStreamCallback?new c.PushAudioOutputStreamImpl(n):n instanceof p.PullAudioOutputStream?n:void 0!==n?new s.AudioFileWriter(n):void 0,this.synthesisRequestQueue.enqueue(new d.SynthesisRequest(u,e,t,e=>{if(this.privSynthesizing=!1,i)try{i(e)}catch(e){r&&r(e)}i=void 0,this.adapterSpeak().catch(()=>{})},e=>{r&&r(e)},a)),this.adapterSpeak().catch(()=>{})}catch(e){r&&(e instanceof Error?r(e.name+": "+e.message):r(e)),this.dispose(!0).catch(()=>{})}}getVoices(e){return r(this,void 0,void 0,function*(){let t=o.createNoDashGuid(),i=yield this.privRestAdapter.getVoicesList(t);if(!(i.ok&&Array.isArray(i.json)))return new p.SynthesisVoicesResult(t,void 0,"Error: ".concat(i.status,": ").concat(i.statusText));{let r=i.json;return e&&e.length>0&&(r=r.filter(t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase())),new p.SynthesisVoicesResult(t,r,void 0)}})}constructor(e,t){super(e),null!==t&&(void 0===t?this.audioConfig="undefined"==typeof window?void 0:p.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=t),this.privConnectionFactory=new n.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}}t.SpeechSynthesizer=u},36040:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechTranslationConfigImpl=t.SpeechTranslationConfig=void 0;let r=i(7601),n=i(66918),o=i(70806);class s extends o.SpeechConfig{static fromSubscription(e,t){n.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),n.Contracts.throwIfNullOrWhitespace(t,"region");let i=new a;return i.properties.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),i.properties.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),i}static fromAuthorizationToken(e,t){n.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),n.Contracts.throwIfNullOrWhitespace(t,"region");let i=new a;return i.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e),i.properties.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),i}static fromHost(e,t){n.Contracts.throwIfNull(e,"hostName");let i=new a;return i.setProperty(o.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&i.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),i}static fromEndpoint(e,t){n.Contracts.throwIfNull(e,"endpoint"),n.Contracts.throwIfNull(t,"subscriptionKey");let i=new a;return i.properties.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.href),i.properties.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),i}constructor(){super()}}t.SpeechTranslationConfig=s;class a extends s{set authorizationToken(e){n.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){n.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return o.OutputFormat[this.privSpeechProperties.getProperty(r.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(r.OutputFormatPropertyName,o.OutputFormat[e])}get endpointId(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){n.Contracts.throwIfNullOrWhitespace(e,"value");let t=this.targetLanguages;t.includes(e)||(t.push(e),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){n.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_Region)}setProxy(e,t,i,r){this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyUserName],i),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPassword],r)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t){let i=JSON.parse(this.privSpeechProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));i[e]=t,this.privSpeechProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(i))}setProfanity(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceResponse_ProfanityOption,o.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(r.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return o.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,o.SpeechSynthesisOutputFormat[e])}constructor(){super(),this.privSpeechProperties=new o.PropertyCollection,this.outputFormat=o.OutputFormat.Simple}}t.SpeechTranslationConfigImpl=a},22400:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisResult=void 0;class i{get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}constructor(e,t,i,r){this.privResultId=e,this.privReason=t,this.privErrorDetails=i,this.privProperties=r}}t.SynthesisResult=i},81663:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisVoicesResult=void 0;let r=i(70806);class n extends r.SynthesisResult{get voices(){return this.privVoices}constructor(e,t,i){if(Array.isArray(t))for(let i of(super(e,r.ResultReason.VoicesListRetrieved,void 0,new r.PropertyCollection),this.privVoices=[],t))this.privVoices.push(new r.VoiceInfo(i));else super(e,r.ResultReason.Canceled,i||"Error information unavailable",new r.PropertyCollection)}}t.SynthesisVoicesResult=n},35164:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRequest=t.Synthesizer=void 0;let n=i(7601),o=i(23315),s=i(66918),a=i(70806);class c{get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(a.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===n.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){let t=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),i=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthVoice,""),r=c.XMLEncode(e);return this.autoDetectSourceLanguage?t="en-US":i=i||({"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"})[t],i&&(r="<voice name='".concat(i,"'>").concat(r,"</voice>")),r="<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='".concat(t,"'>").concat(r,"</speak>")}dispose(e){return r(this,void 0,void 0,function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}adapterSpeak(){return r(this,void 0,void 0,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;let e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}})}createSynthesizerConfig(e){return new n.SynthesizerConfig(e,this.privProperties)}implCommonSynthesizeSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);let r=this.createSynthesizerConfig(new n.SpeechServiceConfig(new n.Context(new n.OS(e,t,i)))),o=this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_Key,void 0),s=o&&""!==o?new n.CognitiveSubscriptionKeyAuthentication(o):new n.CognitiveTokenAuthentication(()=>Promise.resolve(this.privProperties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0)),()=>Promise.resolve(this.privProperties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0)));this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,r),this.privRestAdapter=this.createRestSynthesisAdapter(s,r)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}constructor(e){s.Contracts.throwIfNull(e,"speechConfig"),this.privProperties=e.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new o.Queue}}t.Synthesizer=c;class l{constructor(e,t,i,r,n,o){this.requestId=e,this.text=t,this.isSSML=i,this.cb=r,this.err=n,this.dataStream=o}}t.SynthesisRequest=l},70466:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationImpl=t.Conversation=void 0;let n=i(7601),o=i(23315),s=i(66918),a=i(70806);class c{static createConversationAsync(e,t,i,c){let p;return(s.Contracts.throwIfNullOrUndefined(e,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(e.region,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceAuthorization_Token])||s.Contracts.throwIfNullOrUndefined(e.subscriptionKey,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof t)?(p=new l(e,t),o.marshalPromiseToCallbacks(r(this,void 0,void 0,function*(){}),i,c)):(p=new l(e)).createConversationAsync(()=>{t&&t()},e=>{i&&i(e)}),p}constructor(){return}}t.Conversation=c;class l extends c{get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return(null===(e=this.privParticipants.me)||void 0===e||!e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){let e=this.conversationId,t=this.participants.map(e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice})),i={};for(let e of n.ConversationConnectionConfig.transcriptionEventKeys){let t=this.properties.getProperty(e,"");""!==t&&(i[e]=t)}return{id:e,participants:t,conversationProperties:i}}get canSend(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,i=>{i||this.handleError(Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=i,this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}startConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),t),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=n.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}addParticipantAsync(e,t,i){s.Contracts.throwIfNullOrUndefined(e,"Participant"),o.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,i)}joinConversationAsync(e,t,i,r,n){try{s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,e=>{s.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,r&&r(e.cognitiveSpeechAuthToken)},e=>{this.handleError(e,n)})}catch(e){this.handleError(e,n)}}deleteConversationAsync(e,t){o.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,t)}deleteConversationImplAsync(){return r(this,void 0,void 0,function*(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endConversationAsync(e,t){o.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,t)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}muteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}muteParticipantAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),this.me.isHost||this.me.id===e||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i);let r=this.privParticipants.getParticipantIndex(e);-1===r&&this.handleError(Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}removeParticipantAsync(e,t,i){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))o.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,i);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let r="";"string"==typeof e?r=e:e.hasOwnProperty("id")?r=e.id:e.hasOwnProperty("userId")&&(r=e.userId),s.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","userId"));let n=this.participants.findIndex(e=>e.id===r);-1===n&&this.handleError(Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(r),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}}catch(e){this.handleError(e,i)}}unlockConversationAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}unmuteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}unmuteParticipantAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),this.me.isHost||this.me.id===e||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i);let r=this.privParticipants.getParticipantIndex(e);-1===r&&this.handleError(Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}sendTextMessageAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),e.length>this.privTextMessageMaxLength&&this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","message length")),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}setTranslatedLanguagesAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}changeNicknameAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return r(this,void 0,void 0,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this})}getKeepAlive(){return JSON.stringify({id:"0",nickname:this.me?this.me.displayName:"default_nickname",participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){let t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}close(e){var t;return r(this,void 0,void 0,function*(){try{this.privIsConnected=!1,yield null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(e){throw e}e&&this.dispose()})}handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){t&&(e instanceof Error?t(e.name+": "+e.message):t(e))}toParticipants(e){let t=this.privParticipants.participants.map(e=>this.toParticipant(e));return e?t:t.filter(e=>!1===e.isHost)}toParticipant(e){return new a.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:n.ConversationTranslatorMessageTypes.instantMessage})}constructor(e,t){if(super(),this.privErrors=n.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{var t;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var i;try{(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(e){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{let e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case n.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case n.ConversationTranslatorCommandTypes.setUseTTS:e.isUsingTts=t.value;break;case n.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case n.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case n.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.Updated,[this.toParticipant(e)],t.sessionId))}}catch(e){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach(e=>e.isMuted=!e.isHost&&t.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(e){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{let e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(e){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{let e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(e){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case n.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case n.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case n.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(e){}},this.onParticipantsListReceived=(e,t)=>{var i;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){let e=null===(i=this.privConversationTranslator)||void 0===i?void 0:i.properties.getProperty(a.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(e){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(e){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new a.PropertyCollection,this.privManager=new n.ConversationManager,e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage],n.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),t)this.privConversationId=t;else{0===e.targetLanguages.length&&e.addTargetLanguage(this.privLanguage),e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceResponse_ProfanityOption])||e.setProfanity(a.ProfanityOption.Masked);let t=e.getProperty(a.PropertyId[a.PropertyId.ConversationTranslator_Name]);null==t&&(t="Host"),s.Contracts.throwIfNullOrTooLong(t,"nickname",50),s.Contracts.throwIfNullOrTooShort(t,"nickname",2),e.setProperty(a.PropertyId[a.PropertyId.ConversationTranslator_Name],t)}this.privConfig=e,s.Contracts.throwIfNull(e,"speechConfig"),this.privProperties=e.properties.clone(),this.privIsConnected=!1,this.privParticipants=new n.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}}t.ConversationImpl=l},6617:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationCommon=void 0;class i{handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){t&&(e instanceof Error?t(e.name+": "+e.message):t(e))}constructor(e){this.privAudioConfig=e}}t.ConversationCommon=i},38263:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationExpirationEventArgs=void 0;let r=i(70806);class n extends r.SessionEventArgs{get expirationTime(){return this.privExpirationTime}constructor(e,t){super(t),this.privExpirationTime=e}}t.ConversationExpirationEventArgs=n},90017:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationParticipantsChangedEventArgs=void 0;let r=i(70806);class n extends r.SessionEventArgs{get reason(){return this.privReason}get participants(){return this.privParticipant}constructor(e,t,i){super(i),this.privReason=e,this.privParticipant=t}}t.ConversationParticipantsChangedEventArgs=n},53639:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriber=void 0;let r=i(7601),n=i(23315),o=i(66918),s=i(70806);class a extends s.Recognizer{static FromConfig(e,t,i){return t.properties.mergeTo(e.properties),new a(e,i)}get endpointId(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return(o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple])===s.OutputFormat[s.OutputFormat.Simple])?s.OutputFormat.Simple:s.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,t){n.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),e,t)}stopTranscribingAsync(e,t){n.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){o.Contracts.throwIfDisposed(this.privDisposedRecognizer),n.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){var t,i,r,n;let o=Object.create(null,{dispose:{get:()=>super.dispose}});return t=this,i=void 0,r=void 0,n=function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield o.dispose.call(this,e))},new(r||(r=Promise))(function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(s,a)}c((n=n.apply(t,i||[])).next())})}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){return n.isSpeakerDiarizationEnabled=!0,new r.ConversationTranscriptionServiceRecognizer(e,t,i,n,this)}constructor(e,t){o.Contracts.throwIfNull(e,"speechConfig"),o.Contracts.throwIfNullOrWhitespace(e.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,e.properties,new r.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}}t.ConversationTranscriber=a},44345:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionResult=void 0;let r=i(70806);class n extends r.RecognitionResult{get speakerId(){return this.privSpeakerId}constructor(e,t,i,r,n,o,s,a,c,l,p){super(e,t,i,r,n,o,s,c,l,p),this.privSpeakerId=a}}t.ConversationTranscriptionResult=n},60562:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationCanceledEventArgs=void 0;let r=i(23571);class n extends r.CancellationEventArgsBase{}t.ConversationTranslationCanceledEventArgs=n},35945:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationEventArgs=void 0;let r=i(70806);class n extends r.RecognitionEventArgs{get result(){return this.privResult}constructor(e,t,i){super(t,i),this.privResult=e}}t.ConversationTranslationEventArgs=n},44449:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationResult=void 0;let r=i(97995);class n extends r.TranslationRecognitionResult{get participantId(){return this.privId}get originalLang(){return this.privOrigLang}constructor(e,t,i,r,n,o,s,a,c,l,p){super(t,r,n,o,s,a,void 0,void 0,c,l,p),this.privId=e,this.privOrigLang=i}}t.ConversationTranslationResult=n},88058:function(e,t,i){"use strict";var r,n,o=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;let s=i(7601),a=i(37500),c=i(23315),l=i(66918),p=i(70806),d=i(70466),u=i(86224);(r=n=t.SpeechState||(t.SpeechState={}))[r.Inactive=0]="Inactive",r[r.Connecting=1]="Connecting",r[r.Connected=2]="Connected";class h extends p.TranslationRecognizer{get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=n.Connected}onCancelSpeech(){return o(this,void 0,void 0,function*(){this.privSpeechState=n.Inactive,yield this.cancelSpeech()})}fireCancelEvent(e){try{if(this.privTranslator.canceled){let t=new u.ConversationTranslationCanceledEventArgs(p.CancellationReason.Error,e,p.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch(e){}}cancelSpeech(){var e;return o(this,void 0,void 0,function*(){try{this.stopContinuousRecognitionAsync(),yield null===(e=this.privReco)||void 0===e?void 0:e.disconnect(),this.privSpeechState=n.Inactive}catch(e){}})}constructor(e,t,i,r){super(e,t,new a.ConversationTranslatorConnectionFactory(r)),this.privSpeechState=n.Inactive,i&&(this.privTranslator=i,this.sessionStarted=()=>{this.privSpeechState=n.Connected},this.sessionStopped=()=>{this.privSpeechState=n.Inactive},this.recognizing=(e,t)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,t)},this.recognized=(e,t)=>o(this,void 0,void 0,function*(){var e;(null===(e=t.result)||void 0===e?void 0:e.errorDetails)?(yield this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,t)}),this.canceled=()=>o(this,void 0,void 0,function*(){if(this.privSpeechState!==n.Inactive)try{yield this.cancelSpeech()}catch(e){this.privSpeechState=n.Inactive}}))}}class g extends u.ConversationCommon{get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants}get canSpeak(){return!!this.privConversation.isConnected&&!!this.privCTRecognizer&&!this.privIsSpeaking&&this.privCTRecognizer.state!==n.Connected&&this.privCTRecognizer.state!==n.Connecting&&!this.privConversation.isMutedByHost}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,t){let i=JSON.parse(this.privProperties.getProperty(s.ServicePropertiesPropertyName,"{}"));i[e]=t,this.privProperties.setProperty(s.ServicePropertiesPropertyName,JSON.stringify(i))}joinConversationAsync(e,t,i,r,n){try{if("string"==typeof e){l.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),l.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(Error(this.privErrors.permissionDeniedStart),n);let o=i;for(let e of((null==o||""===o)&&(o=s.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=p.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(p.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(o),this.privSpeechTranslationConfig.setProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage],o),this.privSpeechTranslationConfig.setProperty(p.PropertyId[p.PropertyId.ConversationTranslator_Name],t),[p.PropertyId.SpeechServiceConnection_Host,p.PropertyId.ConversationTranslator_Host,p.PropertyId.SpeechServiceConnection_Endpoint,p.PropertyId.SpeechServiceConnection_ProxyHostName,p.PropertyId.SpeechServiceConnection_ProxyPassword,p.PropertyId.SpeechServiceConnection_ProxyPort,p.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"])){let t=this.privProperties.getProperty(e);if(t){let i="string"==typeof e?e:p.PropertyId[e];this.privSpeechTranslationConfig.setProperty(i,t)}}let a=JSON.parse(this.privProperties.getProperty(s.ServicePropertiesPropertyName,"{}"));for(let e of Object.keys(a))this.privSpeechTranslationConfig.setServiceProperty(e,a[e],p.ServicePropertyChannel.UriQueryParameter);this.privConversation=new d.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,o,e=>{e||this.handleError(Error(this.privErrors.permissionDeniedConnect),n),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(r,n)},e=>{this.handleError(e,n)})},e=>{this.handleError(e,n)})}else"object"==typeof e?(l.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),l.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(p.PropertyId.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,l.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),l.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(i,r)):this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),r)}catch(e){this.handleError(e,"string"==typeof i?n:r)}}leaveConversationAsync(e,t){c.marshalPromiseToCallbacks(o(this,void 0,void 0,function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()}),e,t)}sendTextMessageAsync(e,t,i){try{l.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),l.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,i)}catch(e){this.handleError(e,i)}}startTranscribingAsync(e,t){c.marshalPromiseToCallbacks(o(this,void 0,void 0,function*(){try{l.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),l.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),l.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(Error(this.privErrors.permissionDeniedSend),t),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),e}}),e,t)}stopTranscribingAsync(e,t){c.marshalPromiseToCallbacks(o(this,void 0,void 0,function*(){try{if(!this.privIsSpeaking){yield this.cancelSpeech();return}this.privIsSpeaking=!1,yield new Promise((e,t)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(e,t)})}catch(e){yield this.cancelSpeech()}}),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,i){c.marshalPromiseToCallbacks(o(this,void 0,void 0,function*(){(!this.isDisposed||this.privIsSpeaking)&&(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)}),t,i)}cancelSpeech(){var e;return o(this,void 0,void 0,function*(){try{this.privIsSpeaking=!1,yield null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onCancelSpeech(),this.privCTRecognizer=void 0}catch(e){}})}connectTranslatorRecognizer(){return o(this,void 0,void 0,function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=p.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_Key],""),this.privCTRecognizer=new h(this.privSpeechTranslationConfig,this.privAudioConfig,this,()=>this.privConversation)}catch(e){throw yield this.cancelSpeech(),e}})}startContinuousRecognition(){return new Promise((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)})}constructor(e){super(e),this.privErrors=s.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new p.PropertyCollection}}t.ConversationTranslator=g},86224:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(70466);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return r.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return r.ConversationImpl}});var n=i(6617);Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return n.ConversationCommon}});var o=i(38263);Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return o.ConversationExpirationEventArgs}});var s=i(90017);Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return s.ConversationParticipantsChangedEventArgs}});var a=i(60562);Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationCanceledEventArgs}});var c=i(35945);Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return c.ConversationTranslationEventArgs}});var l=i(44449);Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return l.ConversationTranslationResult}});var p=i(88058);Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return p.ConversationTranslator}});var d=i(53639);Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return d.ConversationTranscriber}});var u=i(24335);Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return u.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return u.User}});var h=i(35523);Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return h.ParticipantChangedReason}});var g=i(64194);Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return g.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return g.MeetingImpl}});var f=i(65768);Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return f.MeetingTranscriptionCanceledEventArgs}});var m=i(95836);Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return m.MeetingTranscriber}});var C=i(44345);Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return C.ConversationTranscriptionResult}})},24335:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Participant=t.User=void 0;let r=i(70806);class n{get userId(){return this.privUserId}constructor(e){this.privUserId=e}}t.User=n;class o{get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,t,i){return new o(e,"",e,!1,!1,!1,t,i)}constructor(e,t,i,n,o,s,a,c){this.privId=e,this.privAvatar=t,this.privDisplayName=i,this.privIsHost=n,this.privIsMuted=o,this.privIsUsingTts=s,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new r.PropertyCollection}}t.Participant=o},64194:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingImpl=t.Meeting=void 0;let n=i(7601),o=i(23315),s=i(66918),a=i(70806);class c{static createMeetingAsync(e,t,i,c){if(s.Contracts.throwIfNullOrUndefined(e,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(e.region,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),s.Contracts.throwIfNull(t,"meetingId"),0===t.length)throw Error("meetingId cannot be empty");e.subscriptionKey||e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceAuthorization_Token])||s.Contracts.throwIfNullOrUndefined(e.subscriptionKey,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p=new l(e,t);return o.marshalPromiseToCallbacks(r(this,void 0,void 0,function*(){}),i,c),p}constructor(){return}}t.Meeting=c;class l extends c{get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return(null===(e=this.privParticipants.me)||void 0===e||!e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){let e=this.meetingId,t=this.participants.map(e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice})),i={};for(let e of n.ConversationConnectionConfig.transcriptionEventKeys){let t=this.properties.getProperty(e,"");""!==t&&(i[e]=t)}return{id:e,participants:t,meetingProperties:i}}get canSend(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,i=>{i||this.handleError(Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=i,this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}startMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),t),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}addParticipantAsync(e,t,i){s.Contracts.throwIfNullOrUndefined(e,"Participant"),o.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,i)}joinMeetingAsync(e,t,i,r,n){try{s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,e=>{s.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,r&&r(e.cognitiveSpeechAuthToken)},e=>{this.handleError(e,n)})}catch(e){this.handleError(e,n)}}deleteMeetingAsync(e,t){o.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),e,t)}deleteMeetingImplAsync(){return r(this,void 0,void 0,function*(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endMeetingAsync(e,t){o.marshalPromiseToCallbacks(this.endMeetingImplAsync(),e,t)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}muteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}muteParticipantAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),this.me.isHost||this.me.id===e||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i);let r=this.privParticipants.getParticipantIndex(e);-1===r&&this.handleError(Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}removeParticipantAsync(e,t,i){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))o.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,i);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let r="";"string"==typeof e?r=e:e.hasOwnProperty("id")?r=e.id:e.hasOwnProperty("userId")&&(r=e.userId),s.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","userId"));let n=this.participants.findIndex(e=>e.id===r);-1===n&&this.handleError(Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(r),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}}catch(e){this.handleError(e,i)}}unlockMeetingAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}unmuteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}unmuteParticipantAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),this.me.isHost||this.me.id===e||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i);let r=this.privParticipants.getParticipantIndex(e);-1===r&&this.handleError(Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}sendTextMessageAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),e.length>this.privTextMessageMaxLength&&this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","message length")),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}setTranslatedLanguagesAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}changeNicknameAsync(e,t,i){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,i)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return r(this,void 0,void 0,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this})}getKeepAlive(){return JSON.stringify({id:"0",nickname:this.me?this.me.displayName:"default_nickname",participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){let t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"leave")}close(e){var t;return r(this,void 0,void 0,function*(){try{this.privIsConnected=!1,yield null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(e){throw e}e&&this.dispose()})}handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){t&&(e instanceof Error?t(e.name+": "+e.message):t(e))}toParticipants(e){let t=this.privParticipants.participants.map(e=>this.toParticipant(e));return e?t:t.filter(e=>!1===e.isHost)}toParticipant(e){return new a.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(e,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:n.ConversationTranslatorMessageTypes.instantMessage})}constructor(e,t){super(),this.privErrors=n.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{var t;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var i;try{(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(e){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{let e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case n.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case n.ConversationTranslatorCommandTypes.setUseTTS:e.isUsingTts=t.value;break;case n.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case n.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case n.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.Updated,[this.toParticipant(e)],t.sessionId))}}catch(e){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach(e=>e.isMuted=!e.isHost&&t.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(e){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{let e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(e){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{let e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(e){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case n.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case n.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case n.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(e){}},this.onParticipantsListReceived=(e,t)=>{var i;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){let e=null===(i=this.privConversationTranslator)||void 0===i?void 0:i.properties.getProperty(a.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(e){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(e){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new a.PropertyCollection,this.privManager=new n.ConversationManager,e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage],n.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=t,this.privConfig=e,s.Contracts.throwIfNull(e,"speechConfig"),this.privProperties=e.properties.clone(),this.privIsConnected=!1,this.privParticipants=new n.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}}t.MeetingImpl=l},95836:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriber=void 0;let n=i(7601),o=i(23315),s=i(66918),a=i(70806),c=i(86224);class l{get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return a.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(e,t,i){s.Contracts.throwIfNullOrUndefined(c.MeetingImpl,"Meeting"),this.privRecognizer=new n.TranscriberRecognizer(e.config,this.privAudioConfig),s.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),o.marshalPromiseToCallbacks(e.connectTranscriberRecognizer(this.privRecognizer),t,i)}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveMeetingAsync(e,t){this.privRecognizer.disconnectCallbacks(),o.marshalPromiseToCallbacks(r(this,void 0,void 0,function*(){}),e,t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){return r(this,void 0,void 0,function*(){!this.privDisposedRecognizer&&(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))})}constructor(e){this.privAudioConfig=e,this.privProperties=new a.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}}t.MeetingTranscriber=l},65768:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionCanceledEventArgs=void 0;let r=i(23571);class n extends r.CancellationEventArgsBase{}t.MeetingTranscriptionCanceledEventArgs=n},35523:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,(i=t.ParticipantChangedReason||(t.ParticipantChangedReason={}))[i.JoinedConversation=0]="JoinedConversation",i[i.LeftConversation=1]="LeftConversation",i[i.Updated=2]="Updated"},22308:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionCanceledEventArgs=void 0;class i{get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}constructor(e,t,i,r,n){this.privCancelReason=t,this.privErrorDetails=i,this.privResult=n,this.privSessionId=e,this.privErrorCode=r}}t.TranslationRecognitionCanceledEventArgs=i},79484:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionEventArgs=void 0;let r=i(70806);class n extends r.RecognitionEventArgs{get result(){return this.privResult}constructor(e,t,i){super(t,i),this.privResult=e}}t.TranslationRecognitionEventArgs=n},97995:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionResult=void 0;let r=i(70806);class n extends r.SpeechRecognitionResult{static fromSpeechRecognitionResult(e){return new n(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}constructor(e,t,i,r,n,o,s,a,c,l,p){super(t,i,r,n,o,s,a,void 0,c,l,p),this.privTranslations=e}}t.TranslationRecognitionResult=n},38006:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognizer=void 0;let r=i(7601),n=i(23315),o=i(48478),s=i(66918),a=i(70806);class c extends a.Recognizer{static FromConfig(e,t,i){return t.properties.mergeTo(e.properties),new c(e,i)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,t){s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),n.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(s.Contracts.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){let t=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),i=t.indexOf(e);i>-1&&(t.splice(i,1),this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){s.Contracts.throwIfNullOrUndefined(e,"language to be added");let t=[];void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")).includes(e)||(t.push(e),this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(","))):(this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),n.marshalPromiseToCallbacks(this.dispose(!0),e,t)}onConnection(){}dispose(e){var t,i,r,n;let o=Object.create(null,{dispose:{get:()=>super.dispose}});return t=this,i=void 0,r=void 0,n=function*(){!this.privDisposedTranslationRecognizer&&(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield o.dispose.call(this,e)))},new(r||(r=Promise))(function(e,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(s,a)}c((n=n.apply(t,i||[])).next())})}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){return new r.TranslationServiceRecognizer(e,t,i,n,this)}updateLanguages(e){let t=o.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}constructor(e,t,i){s.Contracts.throwIfNull(e,"speechConfig"),super(t,e.properties,i||new r.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationVoice]),s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationToLanguages]),s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])}}t.TranslationRecognizer=c},12874:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEventArgs=void 0;let r=i(70806);class n extends r.SessionEventArgs{get result(){return this.privResult}constructor(e,t){super(t),this.privResult=e}}t.TranslationSynthesisEventArgs=n},56113:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisResult=void 0;class i{get audio(){return this.privAudio}get reason(){return this.privReason}constructor(e,t){this.privReason=e,this.privAudio=t}}t.TranslationSynthesisResult=i},32020:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;let r=i(70806);class n{get languages(){return this.privMap.keys}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}constructor(){this.privMap=new r.PropertyCollection}}t.Translations=n},67687:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusReceivedEventArgs=void 0;let r=i(60501);class n{get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}constructor(e){this.privTurnStatus=r.TurnStatusResponsePayload.fromJSON(e)}}t.TurnStatusReceivedEventArgs=n},34301:function(e,t){"use strict";var i,r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0,(n=i=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={}))[n.Unknown=0]="Unknown",n[n.Female=1]="Female",n[n.Male=2]="Male",(o=r=t.SynthesisVoiceType||(t.SynthesisVoiceType={}))[o.OnlineNeural=1]="OnlineNeural",o[o.OnlineStandard=2]="OnlineStandard",o[o.OfflineNeural=3]="OfflineNeural",o[o.OfflineStandard=4]="OfflineStandard";class s{get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}constructor(e){if(this.privStyleList=[],this.privVoicePath="",e&&(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?r.OnlineStandard:r.OnlineNeural,this.privGender="Male"===e.Gender?i.Male:"Female"===e.Gender?i.Female:i.Unknown,e.StyleList&&Array.isArray(e.StyleList)))for(let t of e.StyleList)this.privStyleList.push(t)}}t.VoiceInfo=s},32350:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfile=void 0;class i{get profileId(){return this.privId}get profileType(){return this.privProfileType}constructor(e,t){this.privId=e,this.privProfileType=t}}t.VoiceProfile=i},90720:function(e,t,i){"use strict";var r=function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileClient=void 0;let n=i(7601),o=i(16319),s=i(66918),a=i(70806);class c extends a.Recognizer{get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}createProfileAsync(e,t){return r(this,void 0,void 0,function*(){let i=yield this.privVoiceAdapter.createProfile(e,t);return new a.VoiceProfile(i[0],e)})}retrieveEnrollmentResultAsync(e){return r(this,void 0,void 0,function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(e)})}getAllProfilesAsync(e){return r(this,void 0,void 0,function*(){return this.privVoiceAdapter.getAllProfiles(e)})}getActivationPhrasesAsync(e,t){return r(this,void 0,void 0,function*(){return this.privVoiceAdapter.getActivationPhrases(e,t)})}enrollProfileAsync(e,t){return r(this,void 0,void 0,function*(){return s.Contracts.throwIfNullOrUndefined(t,"audioConfig"),this.audioConfig=t,this.privVoiceAdapter.SpeakerAudioSource=t,this.privVoiceAdapter.enrollProfile(e)})}deleteProfileAsync(e){return r(this,void 0,void 0,function*(){return this.privVoiceAdapter.deleteProfile(e)})}resetProfileAsync(e){return r(this,void 0,void 0,function*(){return this.privVoiceAdapter.resetProfile(e)})}close(){return r(this,void 0,void 0,function*(){yield this.dispose(!0)})}createServiceRecognizer(e,t,i,r){return new n.VoiceServiceRecognizer(e,t,i,r,this)}dispose(e){let t=Object.create(null,{dispose:{get:()=>super.dispose}});return r(this,void 0,void 0,function*(){!this.privDisposedVoiceAdapter&&(this.privDisposedVoiceAdapter=!0,e&&(yield t.dispose.call(this,e)))})}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.properties)}getResult(e,t){return new a.VoiceProfileResult(e.ok?t:a.ResultReason.Canceled,e.statusText)}constructor(e){s.Contracts.throwIfNullOrUndefined(e,"speechConfig"),s.Contracts.throwIfNull(e,"speechConfig"),super(o.AudioConfig.fromStreamInput(a.AudioInputStream.createPushStream()),e.properties,new n.VoiceProfileConnectionFactory),this.privProperties=e.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}}t.VoiceProfileClient=c},45169:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileEnrollmentCancellationDetails=t.VoiceProfileEnrollmentResult=void 0;let r=i(7601),n=i(70806);class o{get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){let t=[];for(let i of e.value){let e=new o("enrolling"===i.enrollmentStatus.toLowerCase()?n.ResultReason.EnrollingVoiceProfile:"enrolled"===i.enrollmentStatus.toLowerCase()?n.ResultReason.EnrolledVoiceProfile:n.ResultReason.Canceled,null,null);e.privDetails=this.getIdentificationDetails(i),t.push(e)}return t}static FromVerificationProfileList(e){let t=[];for(let i of e.value){let e=new o("enrolling"===i.enrollmentStatus.toLowerCase()?n.ResultReason.EnrollingVoiceProfile:"enrolled"===i.enrollmentStatus.toLowerCase()?n.ResultReason.EnrolledVoiceProfile:n.ResultReason.Canceled,null,null);e.privDetails=this.getVerificationDetails(i),t.push(e)}return t}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}constructor(e,t,i){this.privReason=e,this.privProperties=new n.PropertyCollection,this.privReason!==n.ResultReason.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=n.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=i,this.privProperties.setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.ServiceError]))}}t.VoiceProfileEnrollmentResult=o;class s extends n.CancellationDetailsBase{static fromResult(e){let t=n.CancellationReason.Error,i=n.CancellationErrorCode.NoError;return e.properties&&(i=n.CancellationErrorCode[e.properties.getProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new s(t,e.errorDetails,i)}constructor(e,t,i){super(e,t,i)}}t.VoiceProfileEnrollmentCancellationDetails=s},93626:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfilePhraseResult=void 0;let r=i(66918),n=i(70806);class o extends n.VoiceProfileResult{get phrases(){return this.privPhrases}get type(){return this.privType}constructor(e,t,i,n){super(e,t),this.privPhrases=[],r.Contracts.throwIfNullOrUndefined(n,"phrase array"),this.privType=i,n&&n[0]&&(this.privPhrases=n)}}t.VoiceProfilePhraseResult=o},95044:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileCancellationDetails=t.VoiceProfileResult=void 0;let r=i(7601),n=i(66918),o=i(70806);class s{get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}constructor(e,t){this.privReason=e,this.privProperties=new o.PropertyCollection,e===o.ResultReason.Canceled&&(n.Contracts.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(r.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.ServiceError]))}}t.VoiceProfileResult=s;class a extends o.CancellationDetailsBase{static fromResult(e){let t=o.CancellationReason.Error,i=o.CancellationErrorCode.NoError;return e.properties&&(i=o.CancellationErrorCode[e.properties.getProperty(r.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new a(t,e.errorDetails,i)}constructor(e,t,i){super(e,t,i)}}t.VoiceProfileCancellationDetails=a},42728:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,(i=t.VoiceProfileType||(t.VoiceProfileType={}))[i.TextIndependentIdentification=0]="TextIndependentIdentification",i[i.TextDependentVerification=1]="TextDependentVerification",i[i.TextIndependentVerification=2]="TextIndependentVerification"},36167:function(e,t,i){"use strict";var r=i(15177),n=i(7913),o=i.n(n);t.Z=o()(r.ZP,{lineColor:"rgb(30, 53, 86)",lineWidth:2,generalizationLineWidth:2,generalizationLineColor:"rgb(56, 123, 233)",backgroundColor:"rgb(241, 241, 241)",root:{fillColor:"rgb(30, 53, 86)",color:"#fff",fontSize:24,borderRadius:10,borderColor:"rgb(189, 197, 201)",borderWidth:2},second:{fillColor:"rgb(169, 218, 218)",borderColor:"rgb(30, 53, 86)",borderWidth:2,color:"#fff",fontSize:18,borderRadius:10},node:{fontSize:14,color:"rgb(30, 53, 86)",borderColor:"rgb(30, 53, 86)",borderWidth:1,marginY:20},generalization:{fillColor:"rgb(56, 123, 233)",borderColor:"rgb(56, 123, 233)",color:"#fff",borderWidth:0}})},15177:function(e,t,i){"use strict";i.d(t,{HT:function(){return n},zb:function(){return o}}),t.ZP={paddingX:15,paddingY:5,imgMaxWidth:100,imgMaxHeight:100,iconSize:20,lineWidth:1,lineColor:"#549688",lineDasharray:"none",lineStyle:"straight",rootLineKeepSameInCurve:!0,rootLineStartPositionKeepSameInCurve:!1,lineRadius:5,showLineMarker:!1,generalizationLineWidth:1,generalizationLineColor:"#549688",generalizationLineMargin:0,generalizationNodeMargin:20,associativeLineWidth:2,associativeLineColor:"rgb(51, 51, 51)",associativeLineActiveWidth:8,associativeLineActiveColor:"rgba(2, 167, 240, 1)",associativeLineDasharray:[6,4],associativeLineTextColor:"rgb(51, 51, 51)",associativeLineTextFontSize:14,associativeLineTextLineHeight:1.2,associativeLineTextFontFamily:"微软雅黑, Microsoft YaHei",backgroundColor:"#fafafa",backgroundImage:"none",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover",nodeUseLineStyle:!1,root:{shape:"rectangle",fillColor:"#549688",fontFamily:"微软雅黑, Microsoft YaHei",color:"#fff",fontSize:16,fontWeight:"bold",fontStyle:"normal",lineHeight:1.5,borderColor:"transparent",borderWidth:0,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:""},second:{shape:"rectangle",marginX:100,marginY:40,fillColor:"#fff",fontFamily:"微软雅黑, Microsoft YaHei",color:"#565656",fontSize:16,fontWeight:"normal",fontStyle:"normal",lineHeight:1.5,borderColor:"#549688",borderWidth:1,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:""},node:{shape:"rectangle",marginX:50,marginY:0,fillColor:"transparent",fontFamily:"微软雅黑, Microsoft YaHei",color:"#6a6d6c",fontSize:14,fontWeight:"normal",fontStyle:"normal",lineHeight:1.5,borderColor:"transparent",borderWidth:0,borderRadius:5,borderDasharray:"none",textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:""},generalization:{shape:"rectangle",marginX:100,marginY:40,fillColor:"#fff",fontFamily:"微软雅黑, Microsoft YaHei",color:"#565656",fontSize:16,fontWeight:"normal",fontStyle:"normal",lineHeight:1.5,borderColor:"#549688",borderWidth:1,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],hoverRectColor:""}};let r=["lineWidth","lineColor","lineDasharray","lineStyle","generalizationLineWidth","generalizationLineColor","associativeLineWidth","associativeLineColor","associativeLineActiveWidth","associativeLineActiveColor","associativeLineTextColor","associativeLineTextFontSize","associativeLineTextLineHeight","associativeLineTextFontFamily","backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","rootLineKeepSameInCurve","rootLineStartPositionKeepSameInCurve","showLineMarker","gradientStyle","lineRadius","startColor","endColor","startDir","endDir","hoverRectColor"],n=e=>{let t=Object.keys(e);for(let e=0;e<t.length;e++)if(!r.find(i=>i===t[e]))return!1;return!0},o=["lineColor","lineDasharray","lineWidth","lineMarkerDir"]},15691:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var r=u(i(15722)),n=u(i(15550)),o=u(i(46629)),s=u(i(31644)),a=u(i(48347)),c=u(i(54754)),l=u(i(28491)),p=u(i(83882)),d=u(i(95255));function u(e){return e&&e.__esModule?e:{default:e}}},70431:function(e,t){"use strict";function i(e){return(e+64>>>9<<4)+14+1}function r(e,t){let i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function n(e,t,i,n,o,s){var a;return r((a=r(r(t,e),r(n,s)))<<o|a>>>32-o,i)}function o(e,t,i,r,o,s,a){return n(t&i|~t&r,e,t,o,s,a)}function s(e,t,i,r,o,s,a){return n(t&r|i&~r,e,t,o,s,a)}function a(e,t,i,r,o,s,a){return n(t^i^r,e,t,o,s,a)}function c(e,t,i,r,o,s,a){return n(i^(t|~r),e,t,o,s,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){let t=[],i=32*e.length,r="0123456789abcdef";for(let n=0;n<i;n+=8){let i=e[n>>5]>>>n%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[i(t)-1]=t;let n=1732584193,l=-271733879,p=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){let i=n,u=l,h=p,g=d;n=o(n,l,p,d,e[t],7,-680876936),d=o(d,n,l,p,e[t+1],12,-389564586),p=o(p,d,n,l,e[t+2],17,606105819),l=o(l,p,d,n,e[t+3],22,-1044525330),n=o(n,l,p,d,e[t+4],7,-176418897),d=o(d,n,l,p,e[t+5],12,1200080426),p=o(p,d,n,l,e[t+6],17,-1473231341),l=o(l,p,d,n,e[t+7],22,-45705983),n=o(n,l,p,d,e[t+8],7,1770035416),d=o(d,n,l,p,e[t+9],12,-1958414417),p=o(p,d,n,l,e[t+10],17,-42063),l=o(l,p,d,n,e[t+11],22,-1990404162),n=o(n,l,p,d,e[t+12],7,1804603682),d=o(d,n,l,p,e[t+13],12,-40341101),p=o(p,d,n,l,e[t+14],17,-1502002290),l=o(l,p,d,n,e[t+15],22,1236535329),n=s(n,l,p,d,e[t+1],5,-165796510),d=s(d,n,l,p,e[t+6],9,-1069501632),p=s(p,d,n,l,e[t+11],14,643717713),l=s(l,p,d,n,e[t],20,-373897302),n=s(n,l,p,d,e[t+5],5,-701558691),d=s(d,n,l,p,e[t+10],9,38016083),p=s(p,d,n,l,e[t+15],14,-660478335),l=s(l,p,d,n,e[t+4],20,-405537848),n=s(n,l,p,d,e[t+9],5,568446438),d=s(d,n,l,p,e[t+14],9,-1019803690),p=s(p,d,n,l,e[t+3],14,-187363961),l=s(l,p,d,n,e[t+8],20,1163531501),n=s(n,l,p,d,e[t+13],5,-1444681467),d=s(d,n,l,p,e[t+2],9,-51403784),p=s(p,d,n,l,e[t+7],14,1735328473),l=s(l,p,d,n,e[t+12],20,-1926607734),n=a(n,l,p,d,e[t+5],4,-378558),d=a(d,n,l,p,e[t+8],11,-2022574463),p=a(p,d,n,l,e[t+11],16,1839030562),l=a(l,p,d,n,e[t+14],23,-35309556),n=a(n,l,p,d,e[t+1],4,-1530992060),d=a(d,n,l,p,e[t+4],11,1272893353),p=a(p,d,n,l,e[t+7],16,-155497632),l=a(l,p,d,n,e[t+10],23,-1094730640),n=a(n,l,p,d,e[t+13],4,681279174),d=a(d,n,l,p,e[t],11,-358537222),p=a(p,d,n,l,e[t+3],16,-722521979),l=a(l,p,d,n,e[t+6],23,76029189),n=a(n,l,p,d,e[t+9],4,-640364487),d=a(d,n,l,p,e[t+12],11,-421815835),p=a(p,d,n,l,e[t+15],16,530742520),l=a(l,p,d,n,e[t+2],23,-995338651),n=c(n,l,p,d,e[t],6,-198630844),d=c(d,n,l,p,e[t+7],10,1126891415),p=c(p,d,n,l,e[t+14],15,-1416354905),l=c(l,p,d,n,e[t+5],21,-57434055),n=c(n,l,p,d,e[t+12],6,1700485571),d=c(d,n,l,p,e[t+3],10,-1894986606),p=c(p,d,n,l,e[t+10],15,-1051523),l=c(l,p,d,n,e[t+1],21,-2054922799),n=c(n,l,p,d,e[t+8],6,1873313359),d=c(d,n,l,p,e[t+15],10,-30611744),p=c(p,d,n,l,e[t+6],15,-1560198380),l=c(l,p,d,n,e[t+13],21,1309151649),n=c(n,l,p,d,e[t+4],6,-145523070),d=c(d,n,l,p,e[t+11],10,-1120210379),p=c(p,d,n,l,e[t+2],15,718787259),l=c(l,p,d,n,e[t+9],21,-343485551),n=r(n,i),l=r(l,u),p=r(p,h),d=r(d,g)}return[n,l,p,d]}(function(e){if(0===e.length)return[];let t=8*e.length,r=new Uint32Array(i(t));for(let i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))}},27487:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;let i="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:i}},48347:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},95255:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(28491))&&r.__esModule?r:{default:r};t.default=function(e){let t;if(!(0,n.default)(e))throw TypeError("Invalid UUID");let i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i}},39754:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},94444:function(e,t){"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)};let r=new Uint8Array(16)},77847:function(e,t){"use strict";function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let i=0;i<t.length;++i)e.push(t.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=Math.ceil((e.length/4+2)/16),o=Array(n);for(let t=0;t<n;++t){let i=new Uint32Array(16);for(let r=0;r<16;++r)i[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];o[t]=i}o[n-1][14]=(e.length-1)*8/4294967296,o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<n;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=o[e][t];for(let e=16;e<80;++e)n[e]=i(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let s=r[0],a=r[1],c=r[2],l=r[3],p=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),o=i(s,5)+function(e,t,i,r){switch(e){case 0:return t&i^~t&r;case 1:case 3:return t^i^r;case 2:return t&i^t&r^i&r}}(r,a,c,l)+p+t[r]+n[e]>>>0;p=l,l=c,c=i(a,30)>>>0,a=s,s=o}r[0]=r[0]+s>>>0,r[1]=r[1]+a>>>0,r[2]=r[2]+c>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+p>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}},83882:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var r,n=(r=i(28491))&&r.__esModule?r:{default:r};let o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=s(e,t);if(!(0,n.default)(i))throw TypeError("Stringified UUID is invalid");return i}},15722:function(e,t,i){"use strict";let r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,s=(o=i(94444))&&o.__esModule?o:{default:o},a=i(83882);let c=0,l=0;t.default=function(e,t,i){let o=t&&i||0,p=t||Array(16),d=(e=e||{}).node||r,u=void 0!==e.clockseq?e.clockseq:n;if(null==d||null==u){let t=e.random||(e.rng||s.default)();null==d&&(d=r=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==u&&(u=n=(t[6]<<8|t[7])&16383)}let h=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:l+1,f=h-c+(g-l)/1e4;if(f<0&&void 0===e.clockseq&&(u=u+1&16383),(f<0||h>c)&&void 0===e.nsecs&&(g=0),g>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,l=g,n=u;let m=((268435455&(h+=122192928e5))*1e4+g)%4294967296;p[o++]=m>>>24&255,p[o++]=m>>>16&255,p[o++]=m>>>8&255,p[o++]=255&m;let C=h/4294967296*1e4&268435455;p[o++]=C>>>8&255,p[o++]=255&C,p[o++]=C>>>24&15|16,p[o++]=C>>>16&255,p[o++]=u>>>8|128,p[o++]=255&u;for(let e=0;e<6;++e)p[o+e]=d[e];return t||(0,a.unsafeStringify)(p)}},15550:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(i(3143)),n=o(i(70431));function o(e){return e&&e.__esModule?e:{default:e}}let s=(0,r.default)("v3",48,n.default);t.default=s},3143:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,i){function r(e,r,s,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),"string"==typeof r&&(r=(0,o.default)(r)),(null===(c=r)||void 0===c?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),(l=i(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=l[e];return s}return(0,n.unsafeStringify)(l)}try{r.name=e}catch(e){}return r.DNS=s,r.URL=a,r};var r,n=i(83882),o=(r=i(95255))&&r.__esModule?r:{default:r};let s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;let a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},46629:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(i(27487)),n=s(i(94444)),o=i(83882);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,i){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();let s=(e=e||{}).random||(e.rng||n.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=s[e];return t}return(0,o.unsafeStringify)(s)}},31644:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(i(3143)),n=o(i(77847));function o(e){return e&&e.__esModule?e:{default:e}}let s=(0,r.default)("v5",80,n.default);t.default=s},28491:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(39754))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&n.default.test(e)}},54754:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(28491))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},78734:function(e,t,i){"use strict";i.d(t,{h:function(){return a}});var r=i(66084),n=i(52921),o=i(34491),s=i(73047);class a{init(){this.handleChange();let e=window.matchMedia(this.query);e.addEventListener("change",this._handleChange),this.matchMedia=e}destroy(){var e;null===(e=this.matchMedia)||void 0===e||e.removeEventListener("change",this._handleChange)}handleChange(){this.matches=window.matchMedia(this.query).matches}constructor(e){(0,r._)(this,"query",void 0),(0,r._)(this,"matches",void 0),(0,r._)(this,"matchMedia",void 0),(0,r._)(this,"_handleChange",void 0),this.query=e,this.matches=!1,this.matchMedia=null,this._handleChange=this.handleChange.bind(this),(0,s.rC)(this)}}(0,n.gn)([o.SB],a.prototype,"matches",void 0)},22810:function(e,t,i){"use strict";i.d(t,{q:function(){return s}});var r=i(56607),n=i(92235);class o{getMonicaSoOrigin(){return r.o.isProd?"https://monica.so":"https://search.butterfly-effect.dev"}createMonicaSoUrlByQuestion(e){let{question:t,proEnabled:i,platform:r,utm:o,isMonicaSoAuthorized:s}=e,a=new URL("".concat(this.getMonicaSoOrigin(),"/answers")),c="",l=["/","?","#","%","&","=",":","@","+","$",","," "];for(let e=0;e<t.length;e++){let i=t[e];l.includes(i)?c+=encodeURIComponent(i):c+=t[e]}return(a.searchParams.set("q",c),i&&a.searchParams.set("pro","1"),r&&a.searchParams.set("platform",r),o&&a.searchParams.set("utm",o),s)?a.toString():n.m.genUrl("".concat(n.m.getWebOrigin(),"/api/portal"),{redirectTo:a.toString()})}createMonicaSoUrlBySession(e){let{sessionId:t,question:i,round:r,proEnabled:o,platform:s,utm:a,isMonicaSoAuthorized:c}=e,l=this.extractMonicaSoAsciiFromQuery(i||""),p=new URL("".concat(this.getMonicaSoOrigin(),"/answers/").concat(t,"/").concat(l));return(r&&p.searchParams.set("followup",r.toString()),o&&p.searchParams.set("pro","1"),s&&p.searchParams.set("platform",s),a&&p.searchParams.set("utm",a),c)?p.toString():n.m.genUrl("".concat(n.m.getWebOrigin(),"/api/portal"),{redirectTo:p.toString()})}gotToMonicaSearch(e,t){let i=n.m.genUrl(this.getMonicaSoOrigin(),t);return e?i:n.m.genUrl("".concat(n.m.getWebOrigin(),"/api/portal"),{redirectTo:i.toString()})}extractMonicaSoAsciiFromQuery(e){let t="",i=["/","?","#","%","&","=",":","@","+","$",","];for(let r=0;r<e.length;r++){let n=e[r];i.includes(n)||(t+=n)}let r=t.replace(/\s+/g,"-").replace(/^-+|-+$/g,"").replace(/-+/g,"-");return r.length>128?r.slice(0,129).replace(/-+$/g,""):r}getSubDomainOrigin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"s.",t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=e,n=new URL(r.o.host);return(n.host.includes("localhost")&&(i=""),t)?"".concat(n.protocol,"//").concat(i).concat(n.host):"".concat(i).concat(n.host)}createSearchHomeUrl(e){let{proEnabled:t,platform:i}=e,r=new URL("".concat(this.getSubDomainOrigin(),"/"));return t&&r.searchParams.set("pro","1"),i&&r.searchParams.set("platform",i),r.toString()}createUrlByQuestion(e){let{question:t,proEnabled:i,platform:r}=e,n=new URL("".concat(this.getSubDomainOrigin(),"/search")),o="",s=["/","?","#","%","&","=",":","@","+","$",","," "];for(let e=0;e<t.length;e++){let i=t[e];s.includes(i)?o+=encodeURIComponent(i):o+=t[e]}return n.searchParams.set("q",o),i&&n.searchParams.set("pro","1"),r&&n.searchParams.set("platform",r),n.toString()}createUrlBySession(e){let{sessionId:t,question:i,round:r,proEnabled:n,platform:o}=e,s=[this.extractAsciiFromQuery(i||""),t].filter(Boolean).join("-"),a=new URL("".concat(this.getSubDomainOrigin(),"/search/").concat(s));return r&&a.searchParams.set("followup",r.toString()),n&&a.searchParams.set("pro","1"),o&&a.searchParams.set("platform",o),a.toString()}getSearchUrlParams(e){let t=new URL(e),i=decodeURIComponent(t.searchParams.get("q")||""),r=t.pathname.replace("/search","").split("/").pop()||"";r&&(r=r.split("-").pop()||"");let n="1"===t.searchParams.get("pro"),o=t.searchParams.get("followup"),s=o?parseInt(o||""):null,a=t.searchParams.get("platform");return{query:i,sId:r,uid:t.searchParams.get("uid")||void 0,proEnabled:n,followUp:s,platform:a}}extractAsciiFromQuery(e){let t=e.replace(/[^\x00-\x7F]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"-").replace(/^-+|-+$/g,"").replace(/-+/g,"-");return t.length>12?t.slice(0,12).replace(/-+$/g,""):t}}let s=new o},87984:function(e,t,i){"use strict";i.d(t,{G:function(){return q}});var r=i(71576),n=i(34491),o=i(4461),s=i(5857),a=i(35850),c=i(46731),l=i(58812),p=i(66084);class d extends n.PN{constructor(...e){super(...e),(0,p._)(this,"props",void 0)}}var u=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M8.77783 1C9.85638 0.99996 10.8929 1.41814 11.6695 2.16661C12.4461 2.91508 12.9021 3.93552 12.9418 5.01333L12.9445 5.16667V7H13.4445C13.6196 7 13.793 7.03449 13.9547 7.10149C14.1165 7.1685 14.2635 7.26671 14.3873 7.39052C14.5111 7.51434 14.6093 7.66132 14.6763 7.82309C14.7433 7.98486 14.7778 8.15824 14.7778 8.33333V13.6667C14.7778 13.8418 14.7433 14.0151 14.6763 14.1769C14.6093 14.3387 14.5111 14.4857 14.3873 14.6095C14.2635 14.7333 14.1165 14.8315 13.9547 14.8985C13.793 14.9655 13.6196 15 13.4445 15H4.11117C3.93607 15 3.76269 14.9655 3.60092 14.8985C3.43915 14.8315 3.29217 14.7333 3.16836 14.6095C3.04454 14.4857 2.94633 14.3387 2.87933 14.1769C2.81232 14.0151 2.77783 13.8418 2.77783 13.6667V8.33333C2.77783 7.97971 2.91831 7.64057 3.16836 7.39052C3.4184 7.14048 3.75754 7 4.11117 7H4.61117V5.16667C4.61117 4.0616 5.05015 3.00179 5.83155 2.22039C6.61296 1.43899 7.67276 1 8.77783 1ZM8.77783 9.16667C8.60102 9.16667 8.43145 9.23691 8.30643 9.36193C8.1814 9.48695 8.11117 9.65652 8.11117 9.83333V12.1667C8.11117 12.3435 8.1814 12.513 8.30643 12.6381C8.43145 12.7631 8.60102 12.8333 8.77783 12.8333C8.95464 12.8333 9.12421 12.7631 9.24924 12.6381C9.37426 12.513 9.4445 12.3435 9.4445 12.1667V9.83333C9.4445 9.65652 9.37426 9.48695 9.24924 9.36193C9.12421 9.23691 8.95464 9.16667 8.77783 9.16667ZM8.77783 2.66667C8.13783 2.66661 7.52219 2.912 7.05771 3.35229C6.59323 3.79259 6.3153 4.39425 6.28117 5.03333L6.27783 5.16667V7H11.2778V5.16667C11.2778 4.83836 11.2132 4.51327 11.0875 4.20996C10.9619 3.90664 10.7777 3.63105 10.5456 3.3989C10.3135 3.16675 10.0379 2.9826 9.73454 2.85697C9.43123 2.73133 9.10614 2.66667 8.77783 2.66667Z\\" fill=\\"#3D3D43\\"/>\\n\\n","viewBox":"0 0 17 16"}');let h=n._Y.createComponent("LockIcon",d,e=>(0,r.jsx)(l.s,{...e.props,name:"LockIcon",iconData:u}));var g=i(53040),f=i(87291),m=i(97953),C=i(33381),S=i(46665),y=i(26361),P=i(44069);class R extends n.PN{constructor(...e){super(...e),(0,p._)(this,"props",void 0)}}var I=JSON.parse('{"fill":"none","content":"\\n<g id=\\"&#229;&#139;&#190;\\">\\n<circle id=\\"Ellipse 8\\" cx=\\"6\\" cy=\\"6\\" r=\\"4.96875\\" fill=\\"#FA494C\\"/>\\n<path id=\\"Union\\" d=\\"M4.05884 3.43279C3.88783 3.25811 3.6076 3.25513 3.43291 3.42614C3.25823 3.59714 3.25525 3.87738 3.42626 4.05206L5.37089 6.05752L3.43264 7.94116C3.2581 8.11232 3.25537 8.39256 3.42653 8.56709C3.59769 8.74163 3.87793 8.74436 4.05246 8.5732L5.99993 6.68053L7.94739 8.5732C8.12193 8.74436 8.40217 8.74163 8.57333 8.56709C8.74449 8.39256 8.74175 8.11232 8.56721 7.94116L6.62896 6.05752L8.5736 4.05206C8.7446 3.87738 8.74162 3.59714 8.56694 3.42614C8.39226 3.25513 8.11202 3.25811 7.94101 3.43279L5.99993 5.43462L4.05884 3.43279Z\\" fill=\\"white\\"/>\\n</g>\\n\\n","viewBox":"0 0 12 12"}');let b=n._Y.createComponent("FillErrorIcon",R,e=>(0,r.jsx)(l.s,{...e.props,name:"FillErrorIcon",iconData:I}));class T extends n.PN{constructor(...e){super(...e),(0,p._)(this,"props",void 0)}}var E=JSON.parse('{"fill":"none","content":"\\n<g id=\\"&#229;&#139;&#190;\\">\\n<circle id=\\"Ellipse 8\\" cx=\\"6\\" cy=\\"6\\" r=\\"4.96875\\" fill=\\"#FFAB00\\"/>\\n<g id=\\"Union\\">\\n<path d=\\"M6.26634 2.8916C5.32832 2.8916 4.56311 3.64516 4.56311 4.58059C4.56311 4.73443 4.68783 4.85915 4.84168 4.85915C4.99552 4.85915 5.12024 4.73443 5.12024 4.58059C5.12024 3.95812 5.63072 3.44873 6.26634 3.44873C6.90196 3.44873 7.41244 3.95812 7.41244 4.58059C7.41244 4.8858 7.29045 5.16274 7.09068 5.36694C7.04176 5.41694 6.98869 5.46962 6.93333 5.52459C6.75641 5.70022 6.5561 5.89907 6.3934 6.10753C6.17565 6.38653 5.98778 6.72643 5.98778 7.13074V7.29372C5.98778 7.44757 6.1125 7.57229 6.26634 7.57229C6.42019 7.57229 6.54491 7.44757 6.54491 7.29372V7.13074C6.54491 6.90559 6.64867 6.68597 6.8326 6.45032C6.97158 6.27225 7.13526 6.10964 7.30607 5.93996C7.36639 5.88004 7.4276 5.81923 7.48892 5.75655C7.78586 5.45303 7.96958 5.03801 7.96958 4.58059C7.96958 3.64516 7.20436 2.8916 6.26634 2.8916Z\\" fill=\\"white\\"/>\\n<path d=\\"M6.62849 8.52947C6.62849 8.72947 6.46636 8.8916 6.26636 8.8916C6.06636 8.8916 5.90422 8.72947 5.90422 8.52947C5.90422 8.32947 6.06636 8.16733 6.26636 8.16733C6.46636 8.16733 6.62849 8.32947 6.62849 8.52947Z\\" fill=\\"white\\"/>\\n<path d=\\"M6.26634 2.8916C5.32832 2.8916 4.56311 3.64516 4.56311 4.58059C4.56311 4.73443 4.68783 4.85915 4.84168 4.85915C4.99552 4.85915 5.12024 4.73443 5.12024 4.58059C5.12024 3.95812 5.63072 3.44873 6.26634 3.44873C6.90196 3.44873 7.41244 3.95812 7.41244 4.58059C7.41244 4.8858 7.29045 5.16274 7.09068 5.36694C7.04176 5.41694 6.98869 5.46962 6.93333 5.52459C6.75641 5.70022 6.5561 5.89907 6.3934 6.10753C6.17565 6.38653 5.98778 6.72643 5.98778 7.13074V7.29372C5.98778 7.44757 6.1125 7.57229 6.26634 7.57229C6.42019 7.57229 6.54491 7.44757 6.54491 7.29372V7.13074C6.54491 6.90559 6.64867 6.68597 6.8326 6.45032C6.97158 6.27225 7.13526 6.10964 7.30607 5.93996C7.36639 5.88004 7.4276 5.81923 7.48892 5.75655C7.78586 5.45303 7.96958 5.03801 7.96958 4.58059C7.96958 3.64516 7.20436 2.8916 6.26634 2.8916Z\\" stroke=\\"white\\" stroke-width=\\"0.222852\\"/>\\n<path d=\\"M6.62849 8.52947C6.62849 8.72947 6.46636 8.8916 6.26636 8.8916C6.06636 8.8916 5.90422 8.72947 5.90422 8.52947C5.90422 8.32947 6.06636 8.16733 6.26636 8.16733C6.46636 8.16733 6.62849 8.32947 6.62849 8.52947Z\\" stroke=\\"white\\" stroke-width=\\"0.222852\\"/>\\n</g>\\n</g>\\n\\n","viewBox":"0 0 12 12"}');let w=n._Y.createComponent("FillQuestionIcon",T,e=>(0,r.jsx)(l.s,{...e.props,name:"FillQuestionIcon",iconData:E}));var A=i(3584),x=i(48994),O=i(98775),M=i(93893),N=i(14292),D=i(95782),k=i(92235),_=i(31640),L=i(88882),z=i(60445),j=i(78716),F=i.n(j),B=i(62499),U={"ai-content-detect":"ai-content-detect--bw0fB",aiContentDetect:"ai-content-detect--bw0fB",small:"small--cRGGM",large:"large--lApNl",title:"title--yfywd",txt:"txt--CHMqG","not-checked":"not-checked--wwnxO",notChecked:"not-checked--wwnxO","notice-icon":"notice-icon--TXDKa",noticeIcon:"notice-icon--TXDKa",progress:"progress--tQjdH",bar:"bar--zFj_A",inner:"inner--fVd6e",info:"info--CCoJZ",msg:"msg--xiw8e",num:"num--cAIFS",result:"result--xlstr",notice:"notice--OkIBO","ai-notice":"ai-notice--oI92X",aiNotice:"ai-notice--oI92X","human-notice":"human-notice--Lw9ym",humanNotice:"human-notice--Lw9ym",promotion:"promotion--oGF99","promotion-item":"promotion-item--KMFi8",promotionItem:"promotion-item--KMFi8",link:"link--p1bR2","action-btn":"action-btn--LEx5Z",actionBtn:"action-btn--LEx5Z","detect-details":"detect-details--kIRhF",detectDetails:"detect-details--kIRhF","detect-item":"detect-item--iefDr",detectItem:"detect-item--iefDr","lock-detect-item":"lock-detect-item--om_tT",lockDetectItem:"lock-detect-item--om_tT","serve-name":"serve-name--lHb0L",serveName:"serve-name--lHb0L",logo:"logo--Tac4Y",image:"image--XmBFs",icon:"icon--CZ5zy",score:"score--gc9wA",footer:"footer--faS6K","footer-left":"footer-left--ftKGt",footerLeft:"footer-left--ftKGt",credits:"credits--WT7T7",divider:"divider--iKTG2","learn-more":"learn-more--GmNhW",learnMore:"learn-more--GmNhW","footer-right":"footer-right--Rl8ju",footerRight:"footer-right--Rl8ju","model-list":"model-list--s051h",modelList:"model-list--s051h","btn-text":"btn-text--KjYf6",btnText:"btn-text--KjYf6",button:"button--o9xmG","recheck-icon-btn":"recheck-icon-btn--m3sel",recheckIconBtn:"recheck-icon-btn--m3sel","not-enough":"not-enough--H6Nfw",notEnough:"not-enough--H6Nfw",error:"error--B2wcB"},W=i(52921);class V extends n.PN{get S(){return L.S.Global.components.AiContentDetectBox}get checkStatus(){var e;return null===(e=this.contentDetectDetail)||void 0===e?void 0:e.checkStatus}get isChecked(){return!!this.contentDetectDetail}get progress(){var e;return(null===(e=this.contentDetectDetail)||void 0===e?void 0:e.progress)||0}get insertTarget(){return"chat"===this.props.source?"mainWindow":"dialogRoot"}get iconSize(){return"large"===this.size?16:12}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,p._)(this,"props",void 0),(0,p._)(this,"size","small"),(0,p._)(this,"contentDetectDetail",null)}}(0,W.gn)([(0,n.qZ)("size")],V.prototype,"size",void 0),(0,W.gn)([(0,n.qZ)("contentDetectDetail")],V.prototype,"contentDetectDetail",void 0),(0,W.gn)([n.Fl],V.prototype,"S",null),(0,W.gn)([n.Fl],V.prototype,"checkStatus",null),(0,W.gn)([n.Fl],V.prototype,"isChecked",null),(0,W.gn)([n.Fl],V.prototype,"progress",null),(0,W.gn)([n.Fl],V.prototype,"iconSize",null);let q=n._Y.createComponent("AiContentDetect",V,e=>{let{size:t="small",className:i}=e.props;return"checking"===e.checkStatus?(0,r.jsx)("div",{className:F()(U.aiContentDetect,U[t],i),suppressHydrationWarning:!0,children:(0,r.jsx)(H,{vm:e})}):(0,r.jsx)("div",{className:F()(U.aiContentDetect,U[t],i),suppressHydrationWarning:!0,children:(0,r.jsx)(G,{vm:e})})}),H=(0,B.Pi)(function(e){let{vm:t}=e;return(0,r.jsxs)("div",{className:U.progress,children:[(0,r.jsx)("div",{className:U.bar,children:(0,r.jsx)("div",{className:U.inner,style:{width:"".concat(t.progress,"%")}})}),(0,r.jsxs)("div",{className:U.info,children:[(0,r.jsx)("div",{className:U.msg,children:t.S.progressHint}),(0,r.jsxs)("div",{className:U.num,children:[t.progress,"%"]})]})]})}),G=(0,B.Pi)(function(e){var t,i,n;let{vm:o}=e,{size:c}=o.props;return o.isChecked?(null===(t=o.contentDetectDetail)||void 0===t?void 0:t.errorMsg)?(0,r.jsx)("div",{className:U.error,children:(0,r.jsx)(m.y,{error:o.contentDetectDetail.errorMsg})}):(null===(i=o.contentDetectDetail)||void 0===i?void 0:i.isEnough)?(0,r.jsxs)("div",{className:U.result,children:[(0,r.jsx)(K,{vm:o}),(0,r.jsx)("div",{className:U.detectDetails,children:null===(n=o.contentDetectDetail.modelStateList)||void 0===n?void 0:n.map(e=>{let{name:t}=e;return(0,r.jsx)(Z,{vm:o,modelState:e},t)})}),(0,r.jsx)(J,{vm:o})]}):(0,r.jsxs)("div",{className:U.notEnough,children:[(0,r.jsxs)("div",{className:U.notEnoughText,children:[(0,r.jsx)("span",{style:{marginRight:6},children:"\uD83D\uDE22"}),C.userController.isVipUser?o.S.creditsNotEnough:o.S.wordLimit]}),(0,r.jsx)(s.z,{type:"primary",size:"small"===c?"small":"medium",className:U.actionBtn,onClick:()=>{(0,a.$)({type:C.userController.isVipUser?"credits":"bypass",source:o.props.source,insertTarget:o.insertTarget})},children:o.S.upgrade})]}):(0,r.jsxs)("div",{className:U.result,children:[(0,r.jsxs)("div",{className:U.notChecked,children:[o.S.noChecked,(0,r.jsx)(f.b,{size:14,title:o.S.noticeTips1,className:U.noticeIcon,style:{marginBottom:2}})]}),(0,r.jsx)(J,{vm:o})]})}),K=(0,B.Pi)(function(e){let{vm:t}=e,{source:i}=t.props;return C.userController.isFreeUser?(0,r.jsxs)("div",{className:U.promotion,children:[(0,r.jsx)("div",{className:U.promotionItem,children:"ai"===t.checkStatus?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Q,{size:t.iconSize+4,className:U.noticeIcon}),(0,r.jsx)("span",{className:U.txt,children:t.S.aiGenerated})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.J,{className:U.icon,name:"memoCheckCircle",size:t.iconSize+4}),(0,r.jsx)("span",{className:U.txt,children:t.S.writtenByHuman})]})}),(0,r.jsxs)("div",{className:U.promotionItem,children:[(0,r.jsx)(h,{size:t.iconSize,color:"var(--theme-icon-tertiary)"}),(0,r.jsx)("span",{className:U.txt,children:(0,r.jsx)(D.Z,{S:t.S.detectorHint2,components:{span:e=>(0,r.jsx)("span",{className:U.link,onClick:()=>{(0,a.$)({insertTarget:t.insertTarget,type:"bypass",source:i})},children:e})}})})]})]}):"ai"===t.checkStatus?(0,r.jsxs)("div",{className:U.aiNotice,children:[(0,r.jsx)(S.Q,{size:t.iconSize+4,className:U.noticeIcon}),(0,r.jsx)("span",{className:U.txt,children:t.S.aiGenerated})]}):"human"===t.checkStatus?(0,r.jsxs)("div",{className:U.humanNotice,children:[(0,r.jsx)(c.J,{className:U.icon,name:"memoCheckCircle",size:t.iconSize+4}),(0,r.jsx)("span",{className:U.txt,children:t.S.writtenByHuman})]}):null}),J=(0,B.Pi)(function(e){let{vm:t}=e,i=C.userController.isVipUser;return(0,r.jsxs)("div",{className:U.footer,children:[(0,r.jsxs)("div",{className:U.footerLeft,children:[i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:U.credits,children:[(0,r.jsx)(y.x,{usageModule:"credits",simpleStyle:!0,isNewStyle:!0}),(0,r.jsx)(f.b,{size:14,title:t.S.noticeTips2,className:U.noticeIcon})]}),(0,r.jsx)("div",{className:U.divider})]}),(0,r.jsx)("div",{className:U.learnMore,onClick:()=>{let e=k.m.genUrl("".concat(k.m.getWebOrigin()).concat(_.q.getPathWithLocale(L.a.locale,z.oo.aiContentDetector)));window.open(e,"_blank")},children:(0,r.jsx)(P.x,{text:t.S.learnMore})})]}),(0,r.jsx)("div",{className:U.footerRight,children:t.isChecked?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y,{vm:t}),"ai"===t.checkStatus&&(0,r.jsx)(s.z,{className:U.button,type:"black",size:"medium",style:{flex:1,minWidth:0},onClick:()=>{t.props.onRetry()},children:(0,r.jsx)("span",{className:U.btnText,children:t.S.optimize})})]}):(0,r.jsxs)(s.z,{color:"secondary",type:"soft",size:"medium",style:{maxWidth:"100%"},className:U.button,onClick:()=>{t.props.onCheck()},children:[(0,r.jsxs)("div",{className:U.modelList,children:[(0,r.jsx)(g.E,{src:(0,o.Q)(O.Z),className:U.image}),(0,r.jsx)(g.E,{src:(0,o.Q)(N.Z),className:U.image}),(0,r.jsx)(g.E,{src:(0,o.Q)(M.Z),className:U.image})]}),(0,r.jsx)("span",{className:U.btnText,children:t.S.oneClickScan})]})})]})}),Z=(0,B.Pi)(function(e){let{vm:t,modelState:i}=e,{name:n,logo:s,status:a,lock:c,score:l}=i;return(0,r.jsxs)("div",{className:F()(U.detectItem,{[U.lockDetectItem]:c}),children:[(0,r.jsxs)("div",{className:U.logo,children:[(0,r.jsx)(g.E,{src:(0,o.Q)(s),className:U.image}),!c&&(0,r.jsxs)("div",{className:U.icon,children:[" ","ai"===a?(0,r.jsx)(b,{size:12}):"maybeHuman"===a?(0,r.jsx)(w,{size:12}):"human"===a?(0,r.jsx)(A.I,{size:12}):null]})]}),(0,r.jsx)("div",{className:U.serveName,children:n}),c?(0,r.jsx)(h,{size:t.iconSize,color:"var(--theme-icon-tertiary)"}):(0,r.jsx)("div",{className:U.score,style:{color:"ai"===a?"var(--theme-function-error)":"maybeHuman"===a?"var(--theme-function-warning)":"var(--theme-function-success)"},children:l})]})}),Y=(0,B.Pi)(function(e){let{vm:t}=e;return"ai"===t.checkStatus?(0,r.jsx)(x.D,{className:U.recheckIconBtn,size:t.iconSize+4,color:"var(--theme-icon-secondary)",onClick:()=>{t.props.onCheck()},title:t.S.recheck}):(0,r.jsxs)(s.z,{type:"soft",size:"medium",color:"secondary",className:U.button,onClick:()=>{t.props.onCheck()},children:[(0,r.jsx)(x.D,{size:t.iconSize,color:"var(--theme-icon-secondary)"}),t.S.recheck]})})},48996:function(e,t,i){"use strict";i.d(t,{D:function(){return h}});var r=i(71576),n=i(34491),o=i(48023),s=i(46731),a=i(78716),c=i.n(a),l={default:"default--_nBhE","tag-button-active":"tag-button-active--aweVF",tagButtonActive:"tag-button-active--aweVF",remove:"remove--kf3nG","text-wrapper":"text-wrapper--viRce",textWrapper:"text-wrapper--viRce",text:"text--cBz9L","light-primary":"light-primary--HSH8_",lightPrimary:"light-primary--HSH8_",bold:"bold--JzKOb",primary:"primary--Wjfro",secondary:"secondary--zOH51",large:"large--Kkbh_",medium:"medium--TEfXh",small:"small--xk8Jg",outline:"outline--xJWin"},p=i(66084),d=i(52921);class u extends n.PN{get title(){let{tooltipTitle:e,autoComputedTooltips:t}=this.props;return e?this.props.tooltipTitle||"":t&&this.isTextTruncated?this.props.text:""}computedText(){this.textRef&&this.props.autoComputedTooltips&&(this.isTextTruncated=this.textRef.offsetWidth<this.textRef.scrollWidth)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,p._)(this,"props",void 0),(0,p._)(this,"isTextTruncated",!1),(0,p._)(this,"textRef",null)}}(0,d.gn)([n.SB],u.prototype,"isTextTruncated",void 0),(0,d.gn)([(0,n.YP)(e=>[e.props.text,e.props.autoComputedTooltips])],u.prototype,"computedText",null);let h=n._Y.createComponent("TagButton",u,e=>{let{active:t=!1,iconName:i,text:n,onClick:a,closeable:p,onClose:d,style:u,dataId:h,className:g,type:f="default",size:m="medium",bold:C,autoComputedTooltips:S}=e.props,y=e.title.replace("\n","");return y.length>30&&(y="".concat(y.slice(0,30),"…")),(0,r.jsx)(o.u,{title:y,mouseEnterDelay:S?0:.8,children:(0,r.jsxs)("span",{"data-id":h,className:c()(l[f],l[m],{[l.tagButtonActive]:t,[l.bold]:C},g),style:u,onClick:()=>{null==a||a()},children:[i&&(0,r.jsx)(s.J,{name:i,size:16,color:"currentColor"}),(0,r.jsx)("span",{className:l.textWrapper,"data-text":n,children:(0,r.jsx)("span",{className:l.text,ref:t=>{e.textRef=t},children:n})}),p&&(0,r.jsx)("span",{className:l.remove,onClick:e=>{e.stopPropagation(),null==d||d()},children:(0,r.jsx)(s.J,{name:"close",stroke:"currentColor",size:12})})]})})})},70510:function(e,t,i){"use strict";i.d(t,{a:function(){return m}});var r=i(71576),n=i(34491),o=i(46731),s=i(80288),a=i(53040),c=i(32117),l=i(78716),p=i.n(l),d=i(62499),u={"file-icon":"file-icon--zc425",fileIcon:"file-icon--zc425",colorfulPdfOutline:"colorfulPdfOutline--NWG8A",colorfulTxtOutline:"colorfulTxtOutline--VZEs5",colorfulMarkdownOutline:"colorfulMarkdownOutline--LRpv8",colorfulDocOutline:"colorfulDocOutline--MWsS9",colorfulCsvOutline:"colorfulCsvOutline--w3Beq",colorfulExcelOutline:"colorfulExcelOutline--vQRbt",loading:"loading--BX5YO",image:"image--YAOoW"},h=i(66084),g=i(52921);class f extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,g.gn)([n.SB],f.prototype,"someState",void 0);let m=n._Y.createComponent("FileIcon",f,e=>{let{type:t,className:i,size:n=32,radius:o=10,loading:a,isError:c,isImage:l,iconSize:d,progress:h=0,imageSrc:g,style:f,allowPreview:m}=e.props,y="otherFileOutline";return"pdf"===t?y="colorfulPdfOutline":"txt"===t?y="colorfulTxtOutline":"docx"===t?y="colorfulDocOutline":"markdown"===t||s.aU.includes(".".concat(t))?y="colorfulMarkdownOutline":"csv"===t?y="colorfulCsvOutline":"xlsx"===t?y="colorfulExcelOutline":l||(y="colorfulTxtOutline"),(0,r.jsxs)("div",{className:p()(u.fileIcon,u.otherFile,u[y],i),style:{...f,width:n,height:n,borderRadius:o},children:[a&&(0,r.jsx)(C,{progress:h,isImage:l}),(0,r.jsx)(S,{icon:y,isError:c,isImage:l,iconSize:d,imageSrc:g,allowPreview:m})]})}),C=(0,d.Pi)(function(e){let{progress:t,isImage:i}=e;return(0,r.jsx)("div",{className:p()(u.loading,{[u.image]:i}),children:(0,r.jsx)(c.Z,{percent:t,type:"circle",strokeColor:"var(--theme-icon-white-primary)",trailColor:"var(--theme-fill-tsp-components-secondary)",size:16})})}),S=(0,d.Pi)(function(e){let{icon:t,isError:i,isImage:n,imageSrc:s,iconSize:c,allowPreview:l}=e;return i?(0,r.jsx)(o.J,{name:"promptReport",size:c,color:"var(--theme-icon-white-primary)"}):n?(0,r.jsx)(a.E,{src:s,alt:"",allowPreview:l}):(0,r.jsx)(o.J,{name:t,size:c})})},4293:function(e,t,i){"use strict";i.d(t,{C:function(){return A}});var r=i(71576),n=i(34491),o=i(21010),s=i(26712),a=i(37231),c=i(90683),l=i(92347),p=i(88882),d=i(95782),u=i(92235),h=i(60445),g=i(78716),f=i.n(g),m=i(71549),C=i(62499),S={chatContextLimit:"chat-context-limit--Z25M3",tips:"tips--RNFtk",options:"options--mRrYg",radioBox:"radio-box--lzYbY",active:"active--dQfmb",labelBox:"label-box--JIxSZ",input:"input--fRnhv",tipList:"tip-list--vDOrQ"},y=i(66084),P=i(52921),R=i(33381),I=i(35850),b=i(90180),T=i(92020),E=i(92660);class w extends n.PN{get S(){return p.S.Global.components.ChatComponents.ChatToolbars.ChatSetting.ChatContextLimit}onViewCreate(){}onViewDestroy(){}formatLabel(e){return e>E.GQ.MAX?this.S.maxToken:c.T.formatToken(e)}setChatContextLimit(e){if(R.userController.isFreeUser){(0,I.$)({insertTarget:"dialogRoot",type:"credits",source:c.T.userEvent.source.tokenCustom});return}b.A.setChatContextLimit(e),T.ll.setUiFlag("chatCtxLimitCardShowed",!1)}setChatContextCrop(e){if(R.userController.isFreeUser){(0,I.$)({insertTarget:"dialogRoot",type:"credits",source:c.T.userEvent.source.tokenCustom});return}b.A.setChatContextCrop(e)}constructor(...e){super(...e),(0,y._)(this,"props",void 0),(0,y._)(this,"inputValue",void 0)}}(0,P.gn)([n.SB],w.prototype,"inputValue",void 0),(0,P.gn)([n.Fl],w.prototype,"S",null);let A=n._Y.createComponent("ChatContextLimit",w,e=>{var t;let{className:i,value:n,onChange:p,onOpenSkill:d}=e.props,u=!(0,m.Z)(n)&&!(0,m.Z)(p),h=u?n:c.T.ctxTokenLimit,g=t=>{if(u){null==p||p(t);return}e.setChatContextLimit(t)},C=c.T.ctxCropMode===l.vH.NoLimit;return(0,r.jsxs)("div",{className:f()(i,S.chatContextLimit),onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,r.jsxs)("div",{className:S.tips,children:[(0,r.jsx)(o.b,{style:{marginRight:4,display:"inline-flex",position:"relative",top:2}}),e.S.creditsAlert]}),(0,r.jsxs)("div",{className:S.options,children:[(0,r.jsxs)("div",{className:f()(S.radioBox,{[S.active]:C}),onClick:()=>{e.setChatContextCrop(l.vH.NoLimit)},children:[(0,r.jsx)(s.Y,{checked:C,size:"small"}),(0,r.jsx)("label",{children:e.S.noLimit})]}),(0,r.jsxs)("div",{className:f()(S.radioBox,{[S.active]:!C}),onClick:()=>{e.setChatContextCrop(l.vH.CropTo)},children:[(0,r.jsx)(s.Y,{checked:!C,size:"small"}),(0,r.jsxs)("div",{className:S.labelBox,children:[(0,r.jsx)("span",{children:e.S.cropTo}),(0,r.jsx)(a.I,{className:S.input,value:null!==(t=e.inputValue)&&void 0!==t?t:h/1e3>>0,size:"small",type:"number",onChange:t=>{e.inputValue=t},originInputProps:{onBlur:()=>{let t=Number(e.inputValue);if(Number.isNaN(t)){e.inputValue=4;return}if(t<=4){e.inputValue=4,g(4e3);return}if(t>9999){e.inputValue=9999,g(9999e3);return}e.inputValue=t,g(1e3*t)}}}),(0,r.jsx)("span",{children:"K"})]})]})]}),(0,r.jsx)(x,{vm:e,onOpenSkill:d})]})}),x=(0,C.Pi)(e=>{let{vm:t,onOpenSkill:i}=e,{tipListClassName:n}=t.props,o=p.S.Global.components.ChatComponents.ChatToolbars.ChatSetting.ChatContextLimit;return(0,r.jsx)("ul",{className:f()(S.tipList,n),children:[o.tip,o.tipHelp,o.tipDetail].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(d.Z,{S:e,components:{help:e=>(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{window.open(u.m.getHelpCenterPageUrl({},h.se.creditsRule),"_blank","noopener noreferrer")},children:e}),skill:e=>i?(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{i()},children:e}):e,records:e=>(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{window.open(u.m.genUrl("".concat(u.m.getWebOrigin()).concat(h.Cl.billing),{dialog:"credits"}),"_blank","noopener noreferrer")},children:e})}})},e))})})},49421:function(e,t,i){"use strict";i.d(t,{P:function(){return S}});var r=i(71576),n=i(34491),o=i(92235),s=i(60445),a=i(36401),c=i(5857),l=i(82005),p=i(68104),d=i(21010),u=i(66084),h=i(52921),g=i(88882),f=i(73047);class m extends n.PN{get S(){return g.S.Global.components.ChatComponents.ChatToolbars.ChatSetting.ChatContextLimit}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,u._)(this,"props",void 0),(0,u._)(this,"enabled",!1)}}(0,h.gn)([n.SB],m.prototype,"enabled",void 0),(0,h.gn)([f.Fl],m.prototype,"S",null);let C=n._Y.createComponent("ChatContextEnableWarningDialog",m,e=>(0,r.jsxs)(p.u,{width:390,fixed:"dialogRoot"===e.props.insertTarget,onDispose:()=>{var t,i;null===(t=(i=e.props).onDisposed)||void 0===t||t.call(i)},className:"chat-context-enable-warning-dialog--b1BUU",children:[(0,r.jsxs)("div",{className:"title--f0wCF",children:[(0,r.jsx)(d.b,{size:20,style:{display:"inline-flex",position:"relative",top:"4px",marginRight:"4px"}}),e.S.warningTitle]}),(0,r.jsx)("div",{className:"content--kRfEb",children:e.S.warningContent}),(0,r.jsx)("div",{className:"desc--WBgTQ",children:e.S.warningDesc}),(0,r.jsxs)("div",{className:"check-box-item--btuBn",onClick:()=>{e.enabled=!e.enabled},children:[(0,r.jsx)(a.X,{checked:e.enabled}),e.S.warningConfirmDesc]}),(0,r.jsx)("a",{className:"external-info--SdO_7",href:o.m.getHelpCenterPageUrl({},s.se.creditsRuleWithAnchor),target:"_blank",rel:"noopener noreferrer",children:e.S.warningExternalInfo}),(0,r.jsxs)("div",{className:"footer--_Em4k",children:[(0,r.jsx)(c.z,{type:"gray",onClick:()=>{var t,i;null===(t=(i=e.props).onDisposed)||void 0===t||t.call(i)},children:e.S.warningClose}),(0,r.jsx)(c.z,{type:"primary",disabled:!e.enabled,onClick:()=>{var t,i,r,n;null===(t=(i=e.props).onDisposed)||void 0===t||t.call(i),null===(r=(n=e.props).onSuccess)||void 0===r||r.call(n)},children:e.S.warningConfirm})]})]})),S=l.t.createOpener(C)},32352:function(e,t,i){"use strict";i.d(t,{g:function(){return R}});var r=i(71576),n=i(34491),o=i(46731),s=i(5857),a=i(58812),c=i(66084);class l extends n.PN{constructor(...e){super(...e),(0,c._)(this,"props",void 0)}}var p=JSON.parse('{"fill":"none","content":"\\n<g id=\\"start icon\\">\\n<g id=\\"Vector\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.5 3.75C4.84518 3.75 5.125 3.47018 5.125 3.125C5.125 2.77982 4.84518 2.5 4.5 2.5H3.25C2.21447 2.5 1.375 3.33947 1.375 4.375V12.625C1.375 13.6605 2.21447 14.5 3.25 14.5H4.5C4.84518 14.5 5.125 14.2202 5.125 13.875C5.125 13.5298 4.84518 13.25 4.5 13.25H3.25C2.90482 13.25 2.625 12.9702 2.625 12.625V4.375C2.625 4.02982 2.90482 3.75 3.25 3.75H4.5Z\\" fill=\\"#F3F3F4\\"/>\\n<path d=\\"M9.99376 11.9367L12.7601 9.125L5.06433 9.125C4.71915 9.125 4.43933 8.84518 4.43933 8.5C4.43933 8.15482 4.71915 7.875 5.06433 7.875L12.7601 7.875L9.99376 5.06333C9.75168 4.81728 9.7549 4.42157 10.0009 4.17948C10.247 3.93739 10.6427 3.94061 10.8848 4.18667L14.266 7.62333C14.7447 8.10979 14.7447 8.89021 14.266 9.37667L10.8848 12.8133C10.6427 13.0594 10.247 13.0626 10.0009 12.8205C9.7549 12.5784 9.75168 12.1827 9.99376 11.9367Z\\" fill=\\"#F3F3F4\\"/>\\n</g>\\n</g>\\n","viewBox":"0 0 16 17"}');let d=n._Y.createComponent("LineDirectionRightIcon",l,e=>(0,r.jsx)(a.s,{...e.props,name:"LineDirectionRightIcon",iconData:p}));var u=i(78716),h=i.n(u),g=i(90180),f=i(1396),m=i(11502),C={incognitoModeCard:"incognito-mode-card--MFO8j",incognitoModeHeader:"incognito-mode-header--GMiiR",incognitoModeIcon:"incognito-mode-icon--d471p",incognitoModeContent:"incognito-mode-content--xkdwU",title:"title--FBKDq",desc:"desc--Gj75l"},S=i(52921),y=i(88882);class P extends n.PN{get S(){return y.S.Global.components.ChatComponents.IncognitoModeCard}onViewCreate(){m.M.createUserBehaviorEvent({eventName:"incognito_mode_exit_show",source:this.props.source})}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0)}}(0,S.gn)([n.Fl],P.prototype,"S",null);let R=n._Y.createComponent("IncognitoModeCard",P,e=>{let{title:t,desc:i,className:n}=e.props;return(0,r.jsxs)("div",{className:h()(C.incognitoModeCard,n),children:[(0,r.jsx)("div",{className:C.incognitoModeHeader,children:(0,r.jsx)("div",{className:C.incognitoModeIcon,children:(0,r.jsx)(o.J,{name:"IncognitoFill",size:36,color:"currentColor",style:{color:"var(--theme-icon-white-primary)"}})})}),(0,r.jsxs)("div",{className:C.incognitoModeContent,children:[t&&(0,r.jsx)("div",{className:C.title,children:t}),i&&(0,r.jsx)("div",{className:C.desc,children:i})]}),(0,r.jsx)(s.z,{type:"outline",icon:(0,r.jsx)(d,{size:16,color:"var(--theme-icon-primary)"}),onClick:()=>{var t;m.M.createUserBehaviorEvent({eventName:"incognito_mode_click",source:e.props.source,extData:{module:"exit"}}),g.A.setIncognitoMode(!1),null===(t=f.Mp.getActiveChatBotController())||void 0===t||t.newConversation()},children:e.S.exit})]})})},79894:function(e,t,i){"use strict";i.d(t,{e:function(){return E}});var r=i(71576),n=i(34491),o=i(68104),s=i(5857),a=i(26402),c=i(37231),l=i(54493),p=i(82005),d=i(62499),u={commonReportDialog:"common-report-dialog--SqDZ3",header:"header--CuoKx",main:"main--k6quf",guides:"guides--rMRq6",guideItem:"guide-item--GvCWr",formItem:"form-item--zdEVF",formTitle:"form-title--a4XL8",footer:"footer--CRc_Z"},h=i(66084),g=i(52921),f=i(15851),m=i(33381),C=i(11502),S=i(88882),y=i(92235),P=i(73047);class R extends n.PN{get S(){return S.S.Global.components.CommonReportDialog}get categoryOptions(){return[{value:"legal_concerns",label:this.S.legalConcerns},{value:"wrong_lang",label:this.S.wrongLang},{value:"wrong_keyword",label:this.S.wrongKeyword},{value:"not_working",label:this.S.notWorking},{value:"spam",label:this.S.spam}]}async handleOk(){if("step1"===this.step)this.step="step2";else{this.okBtnLoading=!0;try{await C.M.report({reportType:this.category,targetType:this.props.targetType,targetUid:this.props.id,email:this.email,reportReason:this.feedback}),this.okBtnLoading=!1,f.M.success(this.S.submitSuccess,this.props.insertTarget),this.props.onDisposed()}catch(e){this.okBtnLoading=!1,f.M.error(y.m.formatMonicaSdkError(e),this.props.insertTarget)}}}onViewCreate(){var e;this.email=(null===(e=m.userController.userInfo)||void 0===e?void 0:e.email)||""}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"step","step1"),(0,h._)(this,"okBtnLoading",!1),(0,h._)(this,"email",""),(0,h._)(this,"category","legal_concerns"),(0,h._)(this,"feedback","")}}(0,g.gn)([n.SB],R.prototype,"step",void 0),(0,g.gn)([n.SB],R.prototype,"okBtnLoading",void 0),(0,g.gn)([n.SB],R.prototype,"email",void 0),(0,g.gn)([n.SB],R.prototype,"category",void 0),(0,g.gn)([n.SB],R.prototype,"feedback",void 0),(0,g.gn)([P.Fl],R.prototype,"S",null),(0,g.gn)([P.Fl],R.prototype,"categoryOptions",null);let I=n._Y.createComponent("CommonReportDialog",R,e=>{let{insertTarget:t,onDisposed:i}=e.props;return(0,r.jsxs)(o.u,{onDispose:()=>{i()},fixed:"dialogRoot"===t,className:u.commonReportDialog,children:[(0,r.jsx)("header",{className:u.header,children:e.S.report}),"step1"===e.step?(0,r.jsx)(b,{vm:e}):(0,r.jsx)(T,{vm:e}),(0,r.jsxs)("footer",{className:u.footer,children:[(0,r.jsx)(s.z,{shape:"round",type:"blackOutline",onClick:()=>{i()},children:e.S.cancel}),(0,r.jsx)(s.z,{shape:"round",type:"primary",loading:e.okBtnLoading,onClick:()=>{e.handleOk()},children:"step1"===e.step?e.S.startReport:e.S.sendReport})]})]})}),b=(0,d.Pi)(e=>{let{vm:t}=e;return(0,r.jsxs)("main",{className:u.main,children:[(0,r.jsxs)("div",{className:u.guides,children:[(0,r.jsxs)("div",{className:u.guideItem,children:["\uD83D\uDE4C",(0,r.jsx)("p",{children:t.S.guide1})]}),(0,r.jsxs)("div",{className:u.guideItem,children:["\uD83D\uDCDD",(0,r.jsx)("p",{children:t.S.guide2})]}),(0,r.jsxs)("div",{className:u.guideItem,children:["\uD83E\uDD1D",(0,r.jsx)("p",{children:t.S.guide3})]})]}),(0,r.jsxs)("div",{className:u.formItem,children:[(0,r.jsxs)("div",{className:u.formTitle,children:["\uD83D\uDCAC\xa0\xa0",t.S.category]}),(0,r.jsx)(a.P,{value:t.category,onChange:e=>{t.category=e},getPopupContainer:e=>e.parentElement,children:t.categoryOptions.map(e=>(0,r.jsx)(a.W,{value:e.value,children:e.label},e.value))})]})]})}),T=(0,d.Pi)(e=>{let{vm:t}=e;return(0,r.jsxs)("main",{className:u.main,children:[(0,r.jsxs)("div",{className:u.guides,children:[(0,r.jsxs)("div",{className:u.guideItem,children:["\uD83D\uDD14️",(0,r.jsx)("p",{children:t.S.guide4})]}),(0,r.jsxs)("div",{className:u.guideItem,children:["\uD83D\uDCAC",(0,r.jsx)("p",{children:t.S.guide5})]})]}),(0,r.jsxs)("div",{className:u.formItem,children:[(0,r.jsx)("div",{className:u.formTitle,children:t.S.yourEmailAddress}),(0,r.jsx)(c.I,{value:t.email,onChange:e=>{t.email=e}})]}),(0,r.jsxs)("div",{className:u.formItem,children:[(0,r.jsx)("div",{className:u.formTitle,children:t.S.feedback}),(0,r.jsx)(l.g,{type:"blue",value:t.feedback,onChange:e=>{t.feedback=e.target.value},placeholder:t.S.feedbackPlaceholder,autoSize:{minRows:3,maxRows:6}})]})]})}),E=p.t.createOpener(I)},79872:function(e,t,i){"use strict";i.d(t,{b:function(){return g}});var r=i(71576),n=i(34491),o=i(78716),s=i.n(o),a={},c=i(66084),l=i(52921),p=i(34889),d=i(67061),u=i(20978);class h extends n.PN{onViewCreate(){}onViewDestroy(){}setDraggingSync(e){var t,i;this.dragging=e,null===(t=(i=this.props).onDrag)||void 0===t||t.call(i,e)}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"dragging",!1),(0,c._)(this,"handleDrag",e=>{this.props.draggable&&!d.L.dragLock&&(e.preventDefault(),this.props.allowEventPropagation||e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?(this.setDraggingSync(!0),this.setDraggingDebounce(!0)):"dragleave"===e.type&&this.setDraggingDebounce(!1))}),(0,c._)(this,"handleDrop",e=>{this.props.draggable&&(e.preventDefault(),this.props.allowEventPropagation||e.stopPropagation(),this.setDraggingDebounce(!1),p.Gi.getFilesFromDataTransfer(e.dataTransfer).then(e=>{this.props.onDrop(e)}))}),(0,c._)(this,"setDraggingDebounce",(0,u.Z)(e=>{this.setDraggingSync(e)},100))}}(0,l.gn)([n.SB],h.prototype,"dragging",void 0);let g=n._Y.createComponent("Dragger",h,e=>{let t=e.props;return(0,r.jsxs)("div",{className:s()(a.draggable,t.className),onDragEnter:t=>{e.handleDrag(t)},onDragLeave:t=>{e.handleDrag(t)},onDragOver:t=>{e.handleDrag(t)},onDrop:t=>{e.handleDrop(t)},onClick:e.props.onClick,children:[e.dragging&&t.dragLayer,t.children]})})},69645:function(e,t,i){"use strict";i.d(t,{X:function(){return g}});var r=i(71576),n=i(34491),o=i(78716),s=i.n(o);i(75087);var a=i(46731),c=i(61658),l=i(48023),p={dropdownMenuItem:"dropdown-menu-item--QeH1L",menuItemIcon:"menu-item-icon--PvSSy",menuItemContent:"menu-item-content--S5FR6",menuItemDescription:"menu-item-description--o5gcf",active:"active--c3EG6"},d=i(66084),u=i(52921);class h extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"someState",!0)}}(0,u.gn)([n.SB],h.prototype,"someState",void 0);let g=n._Y.createComponent("DropdownMenuItem",h,e=>{let{content:t,icon:i,isActive:n,onClick:o,onMouseDown:d,description:u,iconSize:h=16,className:g,customNode:f,loading:m,iconColor:C,tooltipPlacement:S="left"}=e.props;return(0,r.jsx)(l.u,{title:e.props.tooltip||"",placement:S,children:(0,r.jsxs)("div",{className:s()(p.dropdownMenuItem,{[p.active]:n},g),onClick:e=>{m||null==o||o(e)},onMouseDown:e=>{m||null==d||d(e)},children:[m&&(0,r.jsx)(c.g,{size:16,className:p.menuItemIcon}),i&&(0,r.jsx)("span",{className:p.menuItemIcon,children:"string"==typeof i?(0,r.jsx)(a.J,{name:i,color:C||"currentColor",size:h}):i}),(0,r.jsxs)("span",{className:p.menuItemContent,children:[t,u&&(0,r.jsxs)("span",{className:p.menuItemDescription,children:[" ",u]})]}),f]})})})},41672:function(e,t,i){"use strict";i.d(t,{v:function(){return d}});var r=i(66084),n=i(71576),o=i(1340),s=i(75087),a=i(97787);let c={Pixel:"Pixel",Percent:"Percent"},l={unit:c.Percent,value:.8};function p(e){return"number"==typeof e?{unit:c.Percent,value:100*e}:"string"==typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:c.Pixel,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:c.Percent,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),l):(console.warn("scrollThreshold should be string or number"),l)}class d extends s.Component{static getDerivedStateFromProps(e,t){return e.dataLength!==t.prevDataLength?{...t,prevDataLength:e.dataLength}:null}componentDidMount(){if(void 0===this.props.dataLength)throw Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');this._scrollableNode=this.getScrollableTarget(),this.el=this._scrollableNode?this._scrollableNode:this._infScroll||window,this.el&&(this.el.addEventListener("scroll",this.throttledOnScrollListener),setTimeout(()=>{if(this.el instanceof HTMLElement&&(this.props.inverse?this.isElementAtTop(this.el,this.props.scrollThreshold):this.isElementAtBottom(this.el,this.props.scrollThreshold))&&this.props.hasMore){var e,t;this.actionTriggered=!0,this.setState({showLoader:!0}),null===(e=(t=this.props).next)||void 0===e||e.call(t)}},150)),"number"==typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY)}componentWillUnmount(){this.el&&this.el.removeEventListener("scroll",this.throttledOnScrollListener)}componentDidUpdate(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}),this.props.dataLength<e.dataLength&&this.onScrollListener())}isElementAtTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,i=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,r=p(t);return r.unit===c.Pixel?e.scrollTop<=r.value+i-e.scrollHeight+1:e.scrollTop<=r.value/100+i-e.scrollHeight+1}isElementAtBottom(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,i=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,r=p(t);return r.unit===c.Pixel?e.scrollTop+i>=e.scrollHeight-r.value:e.scrollTop+i>=r.value/100*e.scrollHeight}render(){let e=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length);return(0,n.jsxs)("div",{className:this.props.className,ref:e=>this._infScroll=e,style:this.props.style,children:[this.props.children,this._scrollableNode?(0,a.createPortal)((0,n.jsxs)(n.Fragment,{children:[!this.state.showLoader&&!e&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader]}),this._scrollableNode):(0,n.jsxs)(n.Fragment,{children:[!this.state.showLoader&&!e&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader]}),!this.props.hasMore&&this.props.endMessage]})}constructor(e){super(e),(0,r._)(this,"throttledOnScrollListener",void 0),(0,r._)(this,"_scrollableNode",void 0),(0,r._)(this,"el",void 0),(0,r._)(this,"_infScroll",void 0),(0,r._)(this,"lastScrollTop",0),(0,r._)(this,"actionTriggered",!1),(0,r._)(this,"_pullDown",void 0),(0,r._)(this,"startY",0),(0,r._)(this,"currentY",0),(0,r._)(this,"dragging",!1),(0,r._)(this,"maxPullDownDistance",0),(0,r._)(this,"getScrollableTarget",()=>this.props.scrollableTarget instanceof Function?this.props.scrollableTarget():"string"==typeof this.props.scrollableTarget?document.getElementById(this.props.scrollableTarget):(null===this.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)),(0,r._)(this,"getScrollableElement",()=>this.getScrollableTarget()||this._infScroll),(0,r._)(this,"onStart",e=>{!this.lastScrollTop&&(this.dragging=!0,e instanceof MouseEvent?this.startY=e.pageY:e instanceof TouchEvent&&(this.startY=e.touches[0].pageY),this.currentY=this.startY,this._infScroll&&(this._infScroll.style.willChange="transform",this._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))}),(0,r._)(this,"onMove",e=>{this.dragging&&(e instanceof MouseEvent?this.currentY=e.pageY:e instanceof TouchEvent&&(this.currentY=e.touches[0].pageY),this.currentY<this.startY||(this.currentY-this.startY>=Number(this.props.pullDownToRefreshThreshold)&&this.setState({pullToRefreshThresholdBreached:!0}),!(this.currentY-this.startY>1.5*this.maxPullDownDistance)&&this._infScroll&&(this._infScroll.style.overflow="visible",this._infScroll.style.transform="translate3d(0px, ".concat(Math.round(this.currentY-this.startY),"px, 0px)"))))}),(0,r._)(this,"onEnd",()=>{if(this.startY=0,this.currentY=0,this.dragging=!1,this.state.pullToRefreshThresholdBreached){var e,t;null===(e=(t=this.props).refreshFunction)||void 0===e||e.call(t),this.setState({pullToRefreshThresholdBreached:!1})}requestAnimationFrame(()=>{this._infScroll&&(this._infScroll.style.overflow="auto",this._infScroll.style.transform="none",this._infScroll.style.willChange="unset")})}),(0,r._)(this,"onScrollListener",e=>{"function"==typeof this.props.onScroll&&e&&setTimeout(()=>{var t,i;return null===(t=(i=this.props).onScroll)||void 0===t?void 0:t.call(i,e,this._infScroll)},0);let t=this._scrollableNode?this._scrollableNode:this._infScroll||(null==e?void 0:e.target);if(!this.actionTriggered){if((this.props.inverse?this.isElementAtTop(t,this.props.scrollThreshold):this.isElementAtBottom(t,this.props.scrollThreshold))&&this.props.hasMore){var i,r;this.actionTriggered=!0,this.setState({showLoader:!0}),null===(i=(r=this.props).next)||void 0===i||i.call(r)}this.lastScrollTop=t.scrollTop}}),this.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:e.dataLength},this.throttledOnScrollListener=(0,o.Z)(this.onScrollListener,150,{trailing:!0}).bind(this),this.onStart=this.onStart.bind(this),this.onMove=this.onMove.bind(this),this.onEnd=this.onEnd.bind(this)}}},97562:function(e,t,i){"use strict";i.d(t,{x:function(){return g}});var r=i(71576),n=i(34491),o=i(90180),s=i(92347),a=i(78716),c=i.n(a),l=i(75087),p={markdownFontSizeProvider:"markdown-font-size-provider--ScWwn",sidebar:"sidebar--FSshT",large:"large--jr6G5"},d=i(66084),u=i(52921);class h extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"someState",!0)}}(0,u.gn)([n.SB],h.prototype,"someState",void 0);let g=n._Y.createComponent("MarkdownFontSizeProvider",h,e=>{let{children:t,isSidebar:i}=e.props;return(0,l.isValidElement)(t)?(0,r.jsx)(r.Fragment,{children:(0,l.cloneElement)(t,{...t.props,className:c()(t.props.className,p.markdownFontSizeProvider,{[p.large]:o.A.contentFontSize===s.Cd.Large,[p.sidebar]:i})})}):(0,r.jsx)(r.Fragment,{children:t})})},13292:function(e,t,i){"use strict";i.d(t,{N:function(){return C}});var r=i(71576),n=i(34491),o=i(37231),s=i(88882),a=i(78716),c=i.n(a),l=i(5857),p=i(68104),d=i(66084),u=i(52921),h=i(11989),g=i(71528);class f extends n.PN{onCancel(){var e,t;null===(e=(t=this.props).onCancel)||void 0===e||e.call(t)}onOk(){var e,t;null===(e=(t=this.props).onOk)||void 0===e||e.call(t,this.value)}registerShortcut(){this.listenerManager.addDocumentEventListener("keydown",e=>{if(h.t.isHotkey(e,["esc"])){this.onCancel(),e.stopPropagation(),e.preventDefault();return}})}onViewCreate(){this.registerShortcut(),this.props.defaultValue&&(this.value=this.props.defaultValue)}onViewDestroy(){this.listenerManager.removeAll()}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"listenerManager",new g.M),(0,d._)(this,"value","")}}(0,u.gn)([n.SB],f.prototype,"value",void 0);let m=n._Y.createComponent("Prompt",f,e=>{let{okText:t=s.S.Global.components.Modal.ok,cancelText:i=s.S.Global.components.Modal.cancel,okBtnType:n="primary",cancelBtnType:a="gray",placeholder:d,title:u=s.S.Global.components.Modal.productSays,onEnter:h,closeIconVisible:g=!1,inputProps:f}=e.props,{className:m,...C}=f||{};return(0,r.jsxs)(p.u,{closeIconVisible:g,width:340,className:"prompt--oGdRI",fixed:e.props.fixed,onDispose:e.props.onCancel,children:[(0,r.jsx)("div",{className:"title--zIY_A",children:u}),(0,r.jsxs)("div",{className:"content--bp71T",children:[e.props.message&&(0,r.jsx)("p",{children:e.props.message}),(0,r.jsx)(o.I,{autoSelectAll:!0,onChange:t=>{e.value=t},onEnter:()=>{null==h||h(e.value)},onEnterWithoutCtrl:()=>{null==h||h(e.value)},value:e.value,placeholder:d,className:c()("input--ajBfd",m),...C})]}),(0,r.jsx)("div",{className:"footer--CtpLC",children:(0,r.jsxs)("div",{className:"btn-group--btipO",children:[(0,r.jsx)(l.z,{type:a,disabled:e.props.cancelDisabled,loading:e.props.cancelLoading,noBorder:!0,onClick:()=>{e.onCancel()},children:i}),(0,r.jsx)(l.z,{type:n,disabled:e.props.okDisabled||!e.value,loading:e.props.okLoading,onClick:()=>{e.onOk()},children:t})]})})]})}),C=e=>e.visible?(0,r.jsx)(m,{...e}):null},5091:function(e,t,i){"use strict";i.d(t,{o:function(){return f}});var r=i(71576),n=i(34491),o=i(88882),s=i(78716),a=i.n(s),c=i(5857),l=i(46731),p=i(68104),d={styledModal:"styled-modal--pHSyc",header:"header--tvZBt",hasBack:"has-back--jdmOr",back:"back--LclZZ",body:"body--D6oo8",footer:"footer--IKFLh",footerLeft:"footer-left--ZrMDT",button:"button--zMBHa"},u=i(66084),h=i(52921);class g extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,u._)(this,"props",void 0),(0,u._)(this,"someState",!0)}}(0,h.gn)([n.SB],g.prototype,"someState",void 0);let f=n._Y.createComponent("StyledModal",g,e=>{let{className:t,children:i,header:n,bodyClassName:s,onDispose:u,confirmButtonLoading:h,confirmButtonText:g,confirmButtonDisabled:f,onConfirm:m,cancelButtonText:C=o.S.Global.components.Modal.cancel,noCancelButton:S=!1,onCancel:y,noFooter:P,hasBack:R,footerLeft:I,buttonSize:b="large",confirmButtonType:T="primary",onBack:E,closeIconVisible:w,...A}=e.props;return(0,r.jsxs)(p.u,{className:a()(d.styledModal,t),...A,onDispose:u,closeIconVisible:w,children:[n&&(0,r.jsxs)("div",{style:{paddingInlineEnd:25},className:a()(d.header,{[d.hasBack]:R}),children:[R&&(0,r.jsx)("span",{className:d.back,onClick:()=>{null==E||E()},children:(0,r.jsx)(l.J,{name:"arrow",color:"currentColor"})}),n]}),(0,r.jsx)("div",{className:a()(d.body,s),children:i}),!P&&(0,r.jsxs)("div",{className:d.footer,children:[(0,r.jsx)("div",{className:d.footerLeft,children:I}),!S&&(0,r.jsx)(c.z,{type:"gray",size:b,className:d.button,onClick:()=>{null==y||y()},children:C}),(0,r.jsx)(c.z,{type:T,size:b,loading:h,className:d.button,disabled:f,onClick:()=>{null==m||m()},children:g})]})]})})},18363:function(e,t,i){"use strict";i.d(t,{tourController:function(){return j}});var r,n,o=i(66084),s=i(52921),a=i(34491),c=i(4461),l=i(22046),p={src:"https://assets.monica.im/home-web/_next/static/media/chat.ede98f2d.webp",height:720,width:1280,blurDataURL:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4ID4AAAAQAgCdASoIAAUAAkA4JagCdLoAArqtW8OAAP78/cq1xvc4sLli3BYWlJA6mBqw+8WIu4NvwB0rZGYt47AAAA==",blurWidth:8,blurHeight:5},d={src:"https://assets.monica.im/home-web/_next/static/media/file.e3b71b38.webp",height:720,width:1280,blurDataURL:"data:image/webp;base64,UklGRkYAAABXRUJQVlA4IDoAAACwAQCdASoIAAUAAkA4JaAAAsenHQgAAP74RDFkYliN6+LYY6vVY+RzVTqj+4f8Kn7H3svNMsPAAAAA",blurWidth:8,blurHeight:5},u=i(88882),h=i(56607),g=i(60445),f=i(73047),m=i(1396),C=i(18312),S=i(67061),y=i(71576),P=i(92235),R=i(78716),I=i.n(R),b=i(62499),T=i(46731),E=i(79872),w=i(5091),A=i(82005),x={uploadAttachmentDialog:"upload-attachment-dialog--UevC4",body:"body--ttJOj",uploadDesc:"upload-desc--RFAOm",webLink:"web-link--uBwpw",text:"text--ZI5id",fileUploader:"file-uploader--XjSRG",dragging:"dragging--oh0U9",icons:"icons--HHqLO",clickOrDragText:"click-or-drag-text--wFNYX",fileDesc:"file-desc--MokDB"},O=i(11502);class M extends a.PN{get S(){return u.S.Global.modules.ChatBox.ChatToolbar.UploadAttachmentDialog}get allowChatFile(){var e;return null!==(e=this.props.chatController.botData.uiOptions.allowChatFile)&&void 0!==e&&e}get controller(){return this.props.chatController}onViewCreate(){}onViewDestroy(){}handleChooseFile(){this.controller.chatBotAttachment.handleSelectFile(e=>{this.createUserBehavior(e),this.props.onDisposed()})}async handleDropFile(e){this.createUserBehavior(e),this.controller.chatBotAttachment.handleFiles(e),this.props.onDisposed()}createUserBehavior(e){let t=e.map(e=>({eventName:"upload_attachment",source:"upload_attachment_dialog",extData:{type:e.type}}));O.M.createUserBehaviorEvent(t)}constructor(...e){super(...e),(0,o._)(this,"file",null),(0,o._)(this,"props",void 0),(0,o._)(this,"dragging",!1)}}(0,s.gn)([a.SB],M.prototype,"dragging",void 0),(0,s.gn)([f.Fl],M.prototype,"S",null),(0,s.gn)([f.Fl],M.prototype,"allowChatFile",null),(0,s.gn)([f.Fl],M.prototype,"controller",null);let N=a._Y.createComponent("UploadAttachmentDialog",M,e=>{let{insertTarget:t,onDisposed:i}=e.props;return(0,y.jsxs)(w.o,{width:354,onDispose:i,fixed:"dialogRoot"===t,className:x.uploadAttachmentDialog,header:e.S.uploadFile,bodyClassName:x.body,noFooter:!0,closeWhenEsc:!0,children:[(0,y.jsx)("p",{className:x.uploadDesc,children:e.S.uploadFileDesc}),(0,y.jsx)(D,{vm:e})]})}),D=(0,b.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k,{vm:t}),t.allowChatFile&&!h.o.isChatPDF&&(0,y.jsxs)("a",{href:P.m.getChatDocPageUrl({source:"file_ad"}),target:"_blank",rel:"noreferrer",className:x.webLink,children:[(0,y.jsx)(T.J,{name:"webPdf",size:20,color:"currentColor"}),(0,y.jsx)("span",{className:x.text,children:t.S.tryWebVersion})]})]})}),k=(0,b.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)(E.b,{className:I()(x.fileUploader,{[x.dragging]:t.dragging}),draggable:!0,onDrop:e=>t.handleDropFile(e),onDrag:e=>{t.dragging=e},onClick:()=>{t.handleChooseFile()},children:[(0,y.jsxs)("div",{className:x.icons,children:[(0,y.jsx)(T.J,{name:"memoMobileImage",size:38,color:"currentColor"}),(0,y.jsx)(T.J,{name:"memoLogo",size:38,color:"currentColor"})]}),(0,y.jsx)("div",{className:x.clickOrDragText,children:t.S.clickOrDrag}),(0,y.jsx)("div",{className:x.fileDesc,children:t.S.support}),(0,y.jsx)("div",{className:x.fileDesc,children:(0,u.x)(t.S.maxFileSize,{fileSize:"".concat(t.props.chatController.chatBotAttachment.maxFileSize,"MB")})})]})}),_=A.t.createOpener(N);var L={src:"https://assets.monica.im/home-web/_next/static/media/artistTour.05930363.webp",height:810,width:1440,blurDataURL:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4IEYAAACwAQCdASoIAAUAAkA4JYgCdADze7hYAP2+iozOz5M6NXe7srlW9i5hu1eCXW/NG7hKgIdhwdOKb5dLf8u/jKmKXcxCaIAA",blurWidth:8,blurHeight:5};(r=n||(n={})).ChatGuide="ChatGuide",r.ArtToolsGuide="ArtToolsGuide",r.AiChatPDF="AiChatPDF";class z{get S(){return u.S.Global.components.OnboardingTour.TourGuide}get tourS(){return u.S.Global.components.OnboardingTour}get textConfig(){let e="sidebar"===S.L.mainWindowMode;return{[n.ChatGuide]:{title:this.S.StartChat.title,desc:this.S.StartChat.desc,video:"https://assets.monica.im/assets/video/onboarding_tour_chat.mp4",videoPoster:(0,c.Q)(p),arrow:"bottom",placement:h.o.isExtension?"topLeft":"top"},[n.ArtToolsGuide]:{title:this.S.ArtSkill.title,desc:this.S.ArtSkill.desc,pic:(0,c.Q)(L),arrow:e?"rightTop":"leftTop",placement:e?"leftTop":"rightTop"},[n.AiChatPDF]:{title:this.S.ChatPDF.title,desc:this.S.ChatPDF.desc,video:"https://assets.monica.im/assets/video/onboarding_tour_file.mp4",videoPoster:(0,c.Q)(d),arrow:"bottom",placement:"top"}}}get renderStepList(){return"chat"===this.tourMode?[this.textConfig[n.ChatGuide]]:"chatpdf"===this.tourMode?[this.textConfig[n.AiChatPDF]]:"artTool"===this.tourMode?[this.textConfig[n.ArtToolsGuide]]:[]}get stepConfig(){return this.renderStepList[this.step]}start(e,t,i){"artTool"===e&&l.S.location.pathname.includes(g.Cl.monicaWebImage)||(e&&(this.tourMode=e),this.onFinished=t||null,(null==i?void 0:i.finishBtnText)?this.finishBtnText=i.finishBtnText:this.finishBtnText="",(null==i?void 0:i.delay)?setTimeout(()=>{this.visible=!0},i.delay):this.visible=!0,C.J.eventEmitter.listenBy(this,"tabChange",()=>{this.hide("using")}))}hide(e){var t;if(C.J.eventEmitter.stopListenBy(this),"finish"===e){if("chat"===this.tourMode){let e=m.Mp.getMonicaChatController();null==e||e.focusPrimaryInput()}else"chatpdf"===this.tourMode?_({insertTarget:"mainWindow",chatController:m.Mp.getMonicaChatController()}):"artTool"===this.tourMode&&C.J.onTabChange("image")}this.visible=!1,null===(t=this.onFinished)||void 0===t||t.call(this,e,this.tourMode)}goNextStep(){if(this.step>=this.renderStepList.length-1){this.hide("finish");return}this.step+=1}constructor(){(0,o._)(this,"step",0),(0,o._)(this,"visible",!1),(0,o._)(this,"finishBtnText",""),(0,o._)(this,"tourMode",void 0),(0,o._)(this,"onFinished",null),(0,f.rC)(this)}}(0,s.gn)([a.SB],z.prototype,"step",void 0),(0,s.gn)([a.SB],z.prototype,"visible",void 0),(0,s.gn)([a.SB],z.prototype,"finishBtnText",void 0),(0,s.gn)([f.Fl],z.prototype,"S",null),(0,s.gn)([f.Fl],z.prototype,"tourS",null),(0,s.gn)([f.Fl],z.prototype,"textConfig",null),(0,s.gn)([f.Fl],z.prototype,"renderStepList",null),(0,s.gn)([f.Fl],z.prototype,"stepConfig",null);let j=new z},51782:function(e,t,i){"use strict";i.d(t,{f:function(){return m}});var r=i(71576),n=i(34491),o=i(78716),s=i.n(o),a=i(46731),c=i(61658),l=i(48023),p=i(89347),d=i(66084),u=i(52921),h=i(88882),g=i(73047);class f extends n.PN{get S(){return h.S.Global.components.SaveToMemoButton}async handleClick(e){if(!this.memoSaved){try{var t,i;this.loading=!0,await (null===(t=(i=this.props).onClick)||void 0===t?void 0:t.call(i))}finally{this.loading=!1}e||(this.memoSaved=!0,setTimeout(()=>{this.memoSaved=!1},2e3))}}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"memoSaved",!1),(0,d._)(this,"loading",!1)}}(0,u.gn)([n.SB],f.prototype,"memoSaved",void 0),(0,u.gn)([n.SB],f.prototype,"loading",void 0),(0,u.gn)([g.Fl],f.prototype,"S",null);let m=n._Y.createComponent("SaveToMemoButton",f,e=>{let{tooltipParams:t={},className:i,iconSize:n=16,shouldOpenMemo:o,isIconButton:d,iconColor:u="currentColor",isNewIcon:h,iconPadding:g}=e.props,f=e.memoSaved?e.S.memoSaved:o?e.S.viewMemo:e.S.saveToMemo,m=h?(0,r.jsx)(p.s,{size:n,color:u,padding:g}):(0,r.jsx)(a.J,{name:"saveMemo",size:n,color:u});return(0,r.jsx)(l.u,{...t,title:f,children:(0,r.jsx)("div",{className:s()("save-to-memo-button--oUxqt",i,{"icon-button--sdh86":d}),onClick:()=>{e.handleClick(!!o)},children:e.loading?(0,r.jsx)(c.g,{size:n}):e.memoSaved?(0,r.jsx)(a.J,{name:"memoAdded",size:n,color:u}):m})})})},32986:function(e,t,i){"use strict";i.d(t,{P:function(){return n}});class r{getBoundPosition(e,t){let{x:i,y:r}=e,{width:n,height:o,boxWidth:s,boxHeight:a}=t,c=0,l=s-n;n<0&&(c=-n,l=s);let p=0,d=a-o;return o<0&&(p=-o,d=a),{x:Math.max(c,Math.min(l,i)),y:Math.max(p,Math.min(d,r))}}cropImage(e,t){let i=document.createElement("canvas"),r=i.getContext("2d");return r?(i.width=t.width,i.height=t.height,r.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),i.toDataURL()):null}dataUrlToBlob(e){var t;let i=e.split(","),r=null===(t=i[0].match(/:(.*?);/))||void 0===t?void 0:t[1],n=atob(i[1]),o=n.length,s=new Uint8Array(o);for(;o--;)s[o]=n.charCodeAt(o);return new Blob([s],{type:r})}}let n=new r},26402:function(e,t,i){"use strict";i.d(t,{P:function(){return p},W:function(){return l}});var r=i(71576),n=i(35081),o=i(78716),s=i.n(o),a=i(62499),c=i(46731);let{Option:l}=n.default,p=(0,a.Pi)(e=>{let{className:t,rootClassName:i,value:o,useOldTheme:a=!0,patTheme:l,...p}=e,d={monicaOld:{wrap:"monica-select-old",popup:"monica-select-old-dropdown"},monica:{wrap:"monica-select",popup:"monica-select-dropdown"},pat:{wrap:"pat-select",popup:"pat-select-dropdown"}}[l?"pat":a?"monicaOld":"monica"];return(0,r.jsx)(n.default,{className:s()(d.wrap,t),popupClassName:s()(d.popup,i),value:o||void 0,suffixIcon:(0,r.jsx)(c.J,{name:"monicaDown",color:"currentColor",size:16}),...p})})},55229:function(e,t,i){"use strict";i.d(t,{x:function(){return h}});var r=i(71576),n=i(34491),o=i(78716),s=i.n(o),a=i(46731),c=i(75372),l={select:"select--e5WqE",outline:"outline--t5mW4",round:"round--X7ykh",small:"small--_tI_H",medium:"medium--PWkUz",large:"large--CGzhA",name:"name--l4mne",arrow:"arrow--JUWIp",active:"active--D2oIt","item-list":"item-list--No0yY",itemList:"item-list--No0yY",item:"item--JI3bU",icon:"icon--NOzzF",info:"info--PBoin",label:"label--BO0Df",desc:"desc--aA5Y2"},p=i(66084),d=i(52921);class u extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,p._)(this,"props",void 0),(0,p._)(this,"open",!1)}}(0,d.gn)([n.SB],u.prototype,"open",void 0);let h=n._Y.createComponent("SelectV2",u,e=>{let{type:t="default",shape:i="default",width:n,size:o="medium",customArrow:p,className:d,wrapperClassName:u,contentClassName:h,maxHeight:g,value:f,multiple:m,options:C,placement:S="bottom",onChange:y,useParentContainer:P=!0}=e.props;return(0,r.jsx)(c.x,{trigger:"click",useParentContainer:P,destroyTooltipOnHide:!0,closeAfterContentClick:!0,open:e.open,content:(0,r.jsx)("div",{className:s()(l.itemList,h),style:{maxHeight:g},children:C.map(e=>{let{key:i,label:n,desc:o,icon:a}=e,c=[].concat(f||"").includes(i);return(0,r.jsxs)("div",{className:s()(l.item,l[t],{[l.active]:c}),onClick:()=>{if(m){let e=new Set(f);c&&e.delete(i),y(Array.from(e))}else y(i)},children:[a&&(0,r.jsx)("div",{className:l.icon,children:a}),(0,r.jsxs)("div",{className:l.info,children:[(0,r.jsx)("div",{className:l.label,children:n}),o&&(0,r.jsx)("div",{className:l.desc,children:o})]})]},i)})}),placement:S,onOpenChange:t=>{e.open=t},wrapperClassName:u,children:(0,r.jsxs)("div",{"data-open":e.open,className:s()(l.select,{[l.round]:"round"===i},l[t],l[o],d),style:{width:n},children:[(0,r.jsx)("div",{className:l.name,children:C.filter(e=>[].concat(f||"").includes(e.key)).map(e=>e.label).join(",")}),p||(0,r.jsx)("div",{className:s()(l.arrow,{[l.active]:e.open}),children:(0,r.jsx)(a.J,{name:"monicaDown",size:16,color:"var(--theme-icon-quaternary)"})})]})})})},14084:function(e,t,i){"use strict";i.d(t,{r:function(){return u}});var r=i(71576),n=i(34491),o=i(78716),s=i.n(o),a=i(61658),c=i(48023),l=i(66084),p=i(52921);class d extends n.PN{onViewCreate(){}onViewDestroy(){}handleChange(){var e,t;this.props.disabled||null===(e=(t=this.props).onChange)||void 0===e||e.call(t,!this.props.enabled)}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"someState",!0)}}(0,p.gn)([n.SB],d.prototype,"someState",void 0);let u=n._Y.createComponent("Switch",d,e=>{let{style:t,enabled:i,label:n,disabled:o,tooltip:l="",className:p,size:d="medium",activeBgColor:u="var(--theme-icon-brand)",allowWordWrap:h=!1,labelClassName:g,roundClassName:f,roundWidth:m,disableTransition:C,reverse:S,useParentContainer:y,loading:P,handlerCls:R}=e.props;return(0,r.jsx)(c.u,{title:l,useParentContainer:y,children:(0,r.jsxs)("div",{className:s()("switch--YAK9m",{"disabled--RiYRt":o,"checked--P06d8":i,"switch-small--Ln1sX":"small"===d,"switch-medium-small--AcY7S":"mediumSmall"===d,"disable-word-wrap--UNen0":!h,"size-l--P719n":"l"===d,"reverse--uuBkw":S,"disable-transition--LQHJ8":C},p),style:{...t},onClick:t=>{t.stopPropagation(),e.handleChange()},children:[(0,r.jsxs)("span",{className:s()("switch-label--doi2q",g),children:[n,e.props.labelSlot]}),(0,r.jsx)("div",{className:s()("switch-round--sJmdv",f),style:{background:i?u:void 0,minWidth:m,width:m},children:(0,r.jsx)("span",{className:s()("switch-handler--eCDMC",R),children:P&&(0,r.jsx)(a.g,{size:12})})})]})})})},14537:function(e,t,i){"use strict";i.d(t,{m:function(){return f}});var r=i(71576),n=i(34491),o=i(22046),s=i(78716),a=i.n(s),c=i(73047),l=i(75087),p=i(53040),d={tabs:"tabs--Y1Sc4",wrapper:"wrapper--oIokI",tab:"tab--fLUlW","tab-name":"tab-name--APCBY",tabName:"tab-name--APCBY","has-icon":"has-icon--VQyNU",hasIcon:"has-icon--VQyNU",icon:"icon--O8VzQ","equal-width":"equal-width--Aqb_B",equalWidth:"equal-width--Aqb_B","active-tab":"active-tab--UOsAD",activeTab:"active-tab--UOsAD","active-tab-in-ssr":"active-tab-in-ssr--HbRaW",activeTabInSsr:"active-tab-in-ssr--HbRaW","light-theme":"light-theme--GalM6",lightTheme:"light-theme--GalM6","small-size":"small-size--nVTnh",smallSize:"small-size--nVTnh","middle-size":"middle-size--djGOG",middleSize:"middle-size--djGOG","large-size":"large-size--ctcFn",largeSize:"large-size--ctcFn",primary:"primary--giMP3","no-transition":"no-transition--sxmKw",noTransition:"no-transition--sxmKw"},u=i(66084),h=i(52921);class g extends n.PN{onViewCreate(){this.initResizeObserver()}onViewDestroy(){this.destroyResizeObserver()}initResizeObserver(){this.props.tabsManager.wrapperEl&&(this.resizeObserver=new ResizeObserver(()=>{this.props.tabsManager.calcTabsPosition({isResizeTrigger:!0})}),this.resizeObserver.observe(this.props.tabsManager.wrapperEl))}destroyResizeObserver(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()}constructor(...e){super(...e),(0,u._)(this,"props",void 0),(0,u._)(this,"someState",!0),(0,u._)(this,"resizeObserver",null)}}(0,h.gn)([n.SB],g.prototype,"someState",void 0);let f=n._Y.createComponent("Tabs",g,e=>{let{className:t,wrapperClassName:i,tabClassName:n,size:s="default",theme:u="dark",tabsManager:h,type:g="default",equalWidth:f=!1,forceRenderKey:m,onChange:C,activeTabClassName:S}=e.props,{tabItems:y,noTransition:P}=h,R=h.activeTabKey;return m&&(R=m),(0,l.useEffect)(()=>{m&&(h.activeTabKey=m)},[m,h]),(0,l.useEffect)(()=>{let e=(0,c.EH)(()=>{h.calcTabsPosition()});return()=>{e()}},[]),(0,r.jsx)("div",{className:a()(d.tabs,t,{[d["".concat(s,"-size")]]:s,[d.noTransition]:P,[d["".concat(u,"-theme")]]:u,[d["".concat(g)]]:g}),children:(0,r.jsx)("div",{className:a()(d.wrapper,i),ref:e=>{h.setWrapperEl(e)},children:y.map(e=>{let{key:t,name:i}=e;return(0,r.jsx)("div",{className:a()(d.tab,n,{[d.activeTab]:t===R,[d.activeTabInSsr]:t===R&&o.S.isRunInServerSide,[d.equalWidth]:f},S&&t===R?S:""),onClick:()=>{h.setActiveTabKey(t),null==C||C(t)},children:(0,r.jsxs)("span",{className:a()(d.tabName,{[d.hasIcon]:e.icon}),children:[e.icon&&(0,r.jsx)(r.Fragment,{children:"string"==typeof e.icon?(0,r.jsx)(p.E,{className:d.icon,src:e.icon,alt:""}):e.icon}),i()]})},t)})})})})},26361:function(e,t,i){"use strict";i.d(t,{x:function(){return x}});var r=i(71576),n=i(34491),o=i(75372),s=i(46731),a=i(58812),c=i(66084);class l extends n.PN{constructor(...e){super(...e),(0,c._)(this,"props",void 0)}}var p=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Fill/&#229;&#138;&#159;&#232;&#131;&#189;/&#231;&#167;&#175;&#229;&#136;&#134;\\">\\n<path id=\\"Subtract\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15ZM8.75 4C8.75 3.58579 8.41421 3.25 8 3.25C7.58579 3.25 7.25 3.58579 7.25 4V8C7.25 8.19891 7.32902 8.38968 7.46967 8.53033L10.4697 11.5303C10.7626 11.8232 11.2374 11.8232 11.5303 11.5303C11.8232 11.2374 11.8232 10.7626 11.5303 10.4697L8.75 7.68934V4Z\\" fill=\\"#FFAB00\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let d=n._Y.createComponent("AudioToTextIcon",l,e=>(0,r.jsx)(a.s,{...e.props,name:"AudioToTextIcon",iconData:p}));var u=i(5857),h=i(18245),g=i(18918),f=i(663),m=i(25449),C=i(95782),S=i(78716),y=i.n(S),P=i(62499);i(75087);var R=i(47720),I=i(98957),b={title:"title--N33Ap",simpleUsageInfo:"simple-usage-info--I1GGE",usageInfo:"usage-info--WGrMP",vipFont:"vip-font--GU7qA",usageCount:"usage-count--T9ufP",newStyle:"new-style--tBxVi",error:"error--xb9c7",normalContent:"normal-content--YdQRv",artistGuide:"artist-guide--zDdzN",highlight:"highlight--CiGER",unlock:"unlock--dKpPT",startBtn:"start-btn--DIl6g"},T=i(52921),E=i(88882),w=i(73047);class A extends n.PN{get S(){return E.S.Global.components.Vip.UsageInfo}get featureList(){let e=h.K.getUsageInfo("youtube_summarize"),t=h.K.getUsageInfo("reading_pdf"),i=h.K.getUsageInfo("screenshot_qa");return[{name:this.S.UsageDetail.VideoSummary,quotaInfo:e},{name:this.S.UsageDetail.screenshotAndAskAI,quotaInfo:i},{name:this.S.UsageDetail.DocChat,quotaInfo:t}]}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"someState",!0)}}(0,T.gn)([n.SB],A.prototype,"someState",void 0),(0,T.gn)([w.Fl],A.prototype,"S",null),(0,T.gn)([w.Fl],A.prototype,"featureList",null);let x=n._Y.createComponent("UsageInfo",A,e=>{let{usageModule:t,feature:i,placement:n="top",trigger:s,upgradeSource:a,simpleStyle:c,disablePopover:l}=e.props,p=h.K.getUsageInfo(t);if("basic_query"===t&&p.finallyCanUsed>10||g.teamController.isTeamAccount)return null;let d=c?(0,r.jsx)(M,{vm:e,feature:i},t):(0,r.jsx)(O,{vm:e,feature:i},t);return l?d:(0,r.jsx)(o.x,{placement:n,trigger:s,content:"image_gen"===t?(0,r.jsx)(k,{vm:e,feature:i}):(0,r.jsx)(I.e,{theme:"light",source:"usage_info",upgradeSource:a,alertSlot:e.props.alertSlot}),children:d})}),O=(0,P.Pi)(e=>{let{vm:t,feature:i}=e,{usageModule:n,isNewStyle:o}=t.props;return o?(0,r.jsxs)("div",{className:y()(b.normalContent,t.props.className),children:[(0,r.jsx)(D,{vm:t,allowErrorStyle:!0,className:b.vipFont,style:{marginRight:2},feature:i}),(0,r.jsx)(N,{vm:t})]}):(0,r.jsxs)("div",{className:y()(b.usageInfo,t.props.className),children:[(0,r.jsx)(D,{vm:t,allowErrorStyle:!0,isNewStyle:!1,style:{marginRight:2},className:b.vipFont,feature:i}),(0,r.jsxs)("span",{className:b.vipFont,children:["genius_bot"===n?"":"image_gen"===n?"".concat(t.S.images,":"):"".concat(t.S.queries,":")," ",(0,r.jsx)(N,{vm:t})]})]})}),M=(0,P.Pi)(e=>{let{vm:t,feature:i}=e;return(0,r.jsxs)("div",{className:y()(b.simpleUsageInfo,t.props.className),children:[(0,r.jsx)(D,{vm:t,allowErrorStyle:!0,style:{marginRight:2},className:b.vipFont,feature:i}),(0,r.jsx)(N,{vm:t})]})}),N=(0,P.Pi)(e=>{let{vm:t}=e,{usageModule:i,isNewStyle:n}=t.props,o=h.K.getUsageInfo(i);return(0,r.jsx)("div",{className:y()(b.usageCount,{[b.newStyle]:n,[b.error]:0===o.finallyCanUsed}),children:"credits"!==i&&h.K.checkQuotaIsUnlimited(o.planTotal)?(0,r.jsx)(s.J,{name:"monicaUnlimited",size:18}):(0,r.jsx)("span",{style:{fontWeight:600},children:o.displayFinallyCanUsed})})}),D=(0,P.Pi)(function(e){let{vm:t,style:i,className:n,isNewStyle:o,iconSize:a=14,allowErrorStyle:c,feature:l}=e,{usageModule:p,isNewStyle:u}=t.props,g="genius_bot"===p,f="basic_query"===p,m="image_gen"===p,C="credits"===p,S="audio_transcription"===p;if(o||u){var y;return f?(0,r.jsx)(s.J,{name:"standardQueryNoQuota",size:a}):g&&c&&(null===(y=h.K.getUsageInfo(p))||void 0===y?void 0:y.finallyCanUsed)===0?(0,r.jsx)(s.J,{name:"advancedQueryNoQuota",size:a}):m?(0,r.jsx)(s.J,{size:a,name:"videoTool"===l?"videoFill":"imageQuery",style:i}):S?(0,r.jsx)(d,{size:a,style:i}):C?(0,r.jsx)(s.J,{size:a,name:"credits",style:i}):(0,r.jsx)(s.J,{size:a,name:"genius_bot"===p?"advancedQuery":"normalQuery",style:i})}return(0,r.jsx)(s.J,{className:n,name:"monicaLighting",style:i,color:"currentColor",size:a})}),k=(0,P.Pi)(e=>{let{vm:t,feature:i}=e;return(0,r.jsxs)("div",{className:b.artistGuide,children:[(0,r.jsx)("div",{className:b.title,children:(0,r.jsx)(C.Z,{S:t.S.upgradeTo,components:{highlight:e=>(0,r.jsx)("span",{className:b.highlight,children:e})}})}),(0,r.jsx)("div",{className:b.unlock,children:"videoTool"===i?t.S.unlockVideo:t.S.unlock}),(0,r.jsx)(u.z,{className:b.startBtn,type:"primaryOutline",onClick:()=>{f.m.subscribe({source:"artist_bot_usage",planKey:R.serverConfigController.recommendPlan.key})},children:m.promotionController.subscribeButtonText})]})})},3379:function(e,t,i){"use strict";i.d(t,{i:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<rect width=\\"36\\" height=\\"36\\" rx=\\"8\\" fill=\\"#5269FF\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M24.8553 28.5469C26.2533 28.5469 27.3866 27.4136 27.3866 26.0156L27.3866 13.3125C25.9378 11.8949 21.7255 7.45312 21.7255 7.45312H11.1445C9.74656 7.45312 8.61328 8.5864 8.61328 9.98438V26.0156C8.61328 27.4136 9.74656 28.5469 11.1445 28.5469H24.8553Z\\" fill=\\"white\\"/>\\n<path d=\\"M27.3865 13.4353V13.5915H22.7931C22.4967 13.5915 22.2125 13.4739 22.003 13.2646C21.7934 13.0553 21.6757 12.7715 21.6757 12.4755V7.45314C21.8227 7.45229 21.9685 7.48045 22.1047 7.53599C22.2408 7.59153 22.3646 7.67337 22.4691 7.7768L27.0736 12.6429C27.2787 12.8553 27.3912 13.1402 27.3865 13.4353Z\\" fill=\\"#AFBEFF\\"/>\\n<rect x=\\"11.5\\" y=\\"15.5\\" width=\\"2\\" height=\\"2\\" rx=\\"1\\" fill=\\"#5269FF\\"/>\\n<rect x=\\"11.5\\" y=\\"19.5\\" width=\\"2\\" height=\\"2\\" rx=\\"1\\" fill=\\"#5269FF\\"/>\\n<rect x=\\"11.5\\" y=\\"23.5\\" width=\\"2\\" height=\\"2\\" rx=\\"1\\" fill=\\"#5269FF\\"/>\\n<rect x=\\"14.5\\" y=\\"15.6\\" width=\\"10\\" height=\\"1.8\\" rx=\\"0.9\\" fill=\\"#5269FF\\"/>\\n<rect x=\\"14.5\\" y=\\"19.6\\" width=\\"10\\" height=\\"1.8\\" rx=\\"0.9\\" fill=\\"#5269FF\\"/>\\n<rect x=\\"14.5\\" y=\\"23.6\\" width=\\"10\\" height=\\"1.8\\" rx=\\"0.9\\" fill=\\"#5269FF\\"/>\\n\\n","viewBox":"0 0 36 36"}');let l=o._Y.createComponent("AIForm3Icon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"AIForm3Icon",iconData:c}))},58646:function(e,t,i){"use strict";i.d(t,{d:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Line/&#230;&#147;&#141;&#228;&#189;&#156;/&#229;&#138;&#160;\\">\\n<g id=\\"Vector\\">\\n<path d=\\"M2.5 10C2.5 9.56853 2.84978 9.21875 3.28125 9.21875H16.7188C17.1502 9.21875 17.5 9.56853 17.5 10C17.5 10.4315 17.1502 10.7812 16.7188 10.7812H3.28125C2.84978 10.7812 2.5 10.4315 2.5 10Z\\" fill=\\"#868692\\"/>\\n<path d=\\"M10 17.5C9.56853 17.5 9.21875 17.1502 9.21875 16.7188V3.28125C9.21875 2.84978 9.56853 2.5 10 2.5C10.4315 2.5 10.7812 2.84978 10.7812 3.28125V16.7188C10.7812 17.1502 10.4315 17.5 10 17.5Z\\" fill=\\"#868692\\"/>\\n</g>\\n</g>\\n","viewBox":"0 0 20 20"}');let l=o._Y.createComponent("AddIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"AddIcon",iconData:c}))},57774:function(e,t,i){"use strict";i.d(t,{F:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"arrow-rightup\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M9.88735 3.58773C10.1773 3.58773 10.4124 3.82278 10.4124 4.11273L10.4124 9.88743C10.4124 10.1774 10.1773 10.4124 9.88735 10.4124C9.5974 10.4124 9.36235 10.1774 9.36235 9.88743L9.36235 5.38019L4.48388 10.2587C4.27885 10.4637 3.94644 10.4637 3.74142 10.2587C3.53639 10.0536 3.53639 9.72122 3.74142 9.5162L8.61989 4.63773H4.11265C3.8227 4.63773 3.58765 4.40267 3.58765 4.11273C3.58765 3.82278 3.8227 3.58773 4.11265 3.58773H9.88735Z\\" fill=\\"#868692\\"/>\\n</g>\\n\\n","viewBox":"0 0 14 14"}');let l=o._Y.createComponent("ArrowRightupIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"ArrowRightupIcon",iconData:c}))},2088:function(e,t,i){"use strict";i.d(t,{v:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M2.6818 4.18179C2.85754 4.00605 3.14247 4.00605 3.3182 4.18179L6 6.86359L8.6818 4.18179C8.85754 4.00605 9.14247 4.00605 9.3182 4.18179C9.49394 4.35753 9.49394 4.64245 9.3182 4.81819L6.3182 7.81819C6.14247 7.99392 5.85754 7.99392 5.68181 7.81819L2.6818 4.81819C2.50607 4.64245 2.50607 4.35753 2.6818 4.18179Z\\" fill=\\"#868692\\"/>\\n\\n","viewBox":"0 0 12 12"}');let l=o._Y.createComponent("ChevronDownIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"ChevronDownIcon",iconData:c}))},26120:function(e,t,i){"use strict";i.d(t,{w:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"chevron-left\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M14.5364 5.36361C14.8879 5.71508 14.8879 6.28493 14.5364 6.6364L9.17279 12L14.5364 17.3636C14.8879 17.7151 14.8879 18.2849 14.5364 18.6364C14.1849 18.9879 13.6151 18.9879 13.2636 18.6364L7.2636 12.6364C6.91213 12.2849 6.91213 11.7151 7.2636 11.3636L13.2636 5.36361C13.6151 5.01214 14.1849 5.01214 14.5364 5.36361Z\\" fill=\\"black\\"/>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let l=o._Y.createComponent("ChevronLeftIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"ChevronLeftIcon",iconData:c}))},15461:function(e,t,i){"use strict";i.d(t,{T:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M6.125 2C5.08947 2 4.25 2.83947 4.25 3.875V4.25H3.875C2.83947 4.25 2 5.08947 2 6.125V12.125C2 13.1605 2.83947 14 3.875 14H9.875C10.9105 14 11.75 13.1605 11.75 12.125V11.75H12.125C13.1605 11.75 14 10.9105 14 9.875V3.875C14 2.83947 13.1605 2 12.125 2H6.125ZM11.75 10.5H12.125C12.4702 10.5 12.75 10.2202 12.75 9.875V3.875C12.75 3.52982 12.4702 3.25 12.125 3.25H6.125C5.77982 3.25 5.5 3.52982 5.5 3.875V4.25H9.875C10.9105 4.25 11.75 5.08947 11.75 6.125V10.5ZM3.25 6.125C3.25 5.77982 3.52982 5.5 3.875 5.5H9.875C10.2202 5.5 10.5 5.77982 10.5 6.125V12.125C10.5 12.4702 10.2202 12.75 9.875 12.75H3.875C3.52982 12.75 3.25 12.4702 3.25 12.125V6.125Z\\" fill=\\"#6841EA\\"/>\\n\\n","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("CopyIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"CopyIcon",iconData:c}))},68339:function(e,t,i){"use strict";i.d(t,{n:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"dots-horizontal\\">\\n<g id=\\"Vector\\">\\n<path d=\\"M4.16659 8.41675C3.29213 8.41675 2.58325 9.12563 2.58325 10.0001C2.58325 10.8745 3.29213 11.5834 4.16659 11.5834C5.04104 11.5834 5.74992 10.8745 5.74992 10.0001C5.74992 9.12563 5.04104 8.41675 4.16659 8.41675Z\\" fill=\\"#222226\\"/>\\n<path d=\\"M9.99992 8.41675C9.12547 8.41675 8.41658 9.12563 8.41658 10.0001C8.41658 10.8745 9.12547 11.5834 9.99992 11.5834C10.8744 11.5834 11.5833 10.8745 11.5833 10.0001C11.5833 9.12563 10.8744 8.41675 9.99992 8.41675Z\\" fill=\\"#222226\\"/>\\n<path d=\\"M15.8333 8.41675C14.9588 8.41675 14.2499 9.12563 14.2499 10.0001C14.2499 10.8745 14.9588 11.5834 15.8333 11.5834C16.7077 11.5834 17.4166 10.8745 17.4166 10.0001C17.4166 9.12563 16.7077 8.41675 15.8333 8.41675Z\\" fill=\\"#222226\\"/>\\n</g>\\n</g>\\n\\n","viewBox":"0 0 20 20"}');let l=o._Y.createComponent("DotsHorizontalIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"DotsHorizontalIcon",iconData:c}))},4056:function(e,t,i){"use strict";i.d(t,{d:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"edit\\">\\n<path id=\\"Vector \\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M10.5757 1.90906C11.3623 1.12246 12.6376 1.12246 13.4242 1.90906C14.2108 2.69566 14.2108 3.97099 13.4242 4.75759L5.04908 13.1327C5.03647 13.1454 5.024 13.1578 5.01165 13.1702C4.81797 13.3642 4.65451 13.5279 4.45785 13.6484C4.28487 13.7544 4.09629 13.8325 3.89902 13.8799C3.67475 13.9337 3.44341 13.9336 3.16928 13.9333C3.1518 13.9333 3.13415 13.9333 3.11632 13.9333H1.99996C1.66859 13.9333 1.39996 13.6647 1.39996 13.3333V12.217C1.39996 12.1991 1.39994 12.1815 1.39993 12.164C1.39971 11.8899 1.39953 11.6585 1.45337 11.4343C1.50074 11.237 1.57885 11.0484 1.68485 10.8754C1.80536 10.6788 1.96908 10.5153 2.16307 10.3216C2.17543 10.3093 2.18792 10.2968 2.20053 10.2842L10.5757 1.90906ZM12.5757 2.75758C12.2577 2.43961 11.7422 2.43961 11.4242 2.75758L3.04906 11.1327C2.79826 11.3835 2.74474 11.4425 2.70802 11.5024C2.66781 11.5681 2.63818 11.6396 2.62022 11.7144C2.60381 11.7827 2.59996 11.8623 2.59996 12.217V12.7333H3.11632C3.471 12.7333 3.55055 12.7295 3.61888 12.7131C3.69371 12.6951 3.76524 12.6655 3.83086 12.6253C3.89078 12.5885 3.94975 12.535 4.20055 12.2842L12.5757 3.90906C12.8937 3.59109 12.8937 3.07555 12.5757 2.75758ZM7.39994 13.3333C7.39994 13.002 7.66857 12.7333 7.99994 12.7333H13.9999C14.3313 12.7333 14.5999 13.002 14.5999 13.3333C14.5999 13.6647 14.3313 13.9333 13.9999 13.9333H7.99994C7.66857 13.9333 7.39994 13.6647 7.39994 13.3333Z\\" fill=\\"#595959\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("EditIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"EditIcon",iconData:c}))},60976:function(e,t,i){"use strict";i.d(t,{B:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"file-attachment\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M3.09998 5.0001C3.09998 2.84619 4.84607 1.1001 6.99998 1.1001H17C19.1539 1.1001 20.9 2.84619 20.9 5.0001V8.0001C20.9 8.49715 20.497 8.9001 20 8.9001C19.5029 8.9001 19.1 8.49715 19.1 8.0001V5.0001C19.1 3.8403 18.1598 2.9001 17 2.9001H6.99998C5.84018 2.9001 4.89998 3.8403 4.89998 5.0001V19.0001C4.89998 20.1599 5.84018 21.1001 6.99998 21.1001H11C11.497 21.1001 11.9 21.503 11.9 22.0001C11.9 22.4972 11.497 22.9001 11 22.9001H6.99998C4.84606 22.9001 3.09998 21.154 3.09998 19.0001V5.0001ZM6.90002 7.53367C6.90002 7.03661 7.30297 6.63367 7.80002 6.63367H16.2684C16.7654 6.63367 17.1684 7.03661 17.1684 7.53367C17.1684 8.03072 16.7654 8.43367 16.2684 8.43367H7.80002C7.30297 8.43367 6.90002 8.03072 6.90002 7.53367ZM19.5 12.9001C19.1686 12.9001 18.9 13.1687 18.9 13.5001V19.0001C18.9 19.4972 18.497 19.9001 18 19.9001C17.5029 19.9001 17.1 19.4972 17.1 19.0001V13.5001C17.1 12.1746 18.1745 11.1001 19.5 11.1001C20.8255 11.1001 21.9 12.1746 21.9 13.5001V19.0001C21.9 21.154 20.1539 22.9001 18 22.9001C15.8461 22.9001 14.1 21.154 14.1 19.0001V15.0001C14.1 14.503 14.5029 14.1001 15 14.1001C15.497 14.1001 15.9 14.503 15.9 15.0001V19.0001C15.9 20.1599 16.8402 21.1001 18 21.1001C19.1598 21.1001 20.1 20.1599 20.1 19.0001V13.5001C20.1 13.1687 19.8313 12.9001 19.5 12.9001ZM6.90002 12.0325C6.90002 11.5354 7.30297 11.1325 7.80002 11.1325H12.2684C12.7654 11.1325 13.1684 11.5354 13.1684 12.0325C13.1684 12.5295 12.7654 12.9325 12.2684 12.9325H7.80002C7.30297 12.9325 6.90002 12.5295 6.90002 12.0325Z\\" fill=\\"#262626\\"/>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let l=o._Y.createComponent("FileAttachmentIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"FileAttachmentIcon",iconData:c}))},91336:function(e,t,i){"use strict";i.d(t,{_:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"star-01-fill\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M11.3545 1.77565C11.7628 1.58095 12.2372 1.58095 12.6456 1.77565C12.9986 1.94396 13.1932 2.2362 13.2914 2.39652C13.3929 2.56227 13.497 2.7734 13.5986 2.9792C13.6037 2.98971 13.6089 3.0002 13.6141 3.01068L15.7543 7.34646L20.5763 8.05127C20.8033 8.0844 21.0362 8.1184 21.2252 8.16383C21.4079 8.20778 21.7458 8.30282 22.0147 8.58667C22.3258 8.91503 22.4721 9.36624 22.4129 9.81468C22.3617 10.2023 22.1439 10.4776 22.0217 10.6204C21.8954 10.768 21.7267 10.9322 21.5624 11.0922L18.0745 14.4894L18.8975 19.2876C18.9364 19.5138 18.9762 19.746 18.9916 19.9398C19.0064 20.1272 19.0207 20.4781 18.834 20.8218C18.6181 21.2194 18.2342 21.4982 17.7893 21.5807C17.4047 21.652 17.0755 21.5299 16.9018 21.4578C16.7223 21.3833 16.5138 21.2737 16.3107 21.1668L12 18.8998L7.68936 21.1668C7.4862 21.2737 7.27778 21.3833 7.09823 21.4578C6.9246 21.5299 6.59531 21.652 6.21071 21.5807C5.76584 21.4982 5.38196 21.2194 5.16601 20.8218C4.97931 20.4781 4.99365 20.1272 5.00849 19.9398C5.02383 19.746 5.06369 19.5139 5.10254 19.2876L5.9255 14.4894L2.46283 11.1167C2.45448 11.1086 2.4461 11.1004 2.43771 11.0923C2.27335 10.9322 2.10469 10.768 1.97838 10.6204C1.85618 10.4776 1.63833 10.2023 1.58714 9.81468C1.52792 9.36625 1.67422 8.91503 1.98531 8.58667C2.25423 8.30282 2.59214 8.20778 2.7749 8.16383C2.96382 8.1184 3.19673 8.0844 3.42372 8.05127C3.43531 8.04958 3.44688 8.04789 3.45842 8.0462L8.24576 7.34646L10.386 3.01068C10.3911 3.0002 10.3963 2.98971 10.4015 2.97919C10.503 2.7734 10.6072 2.56227 10.7087 2.39652C10.8068 2.2362 11.0014 1.94396 11.3545 1.77565Z\\" fill=\\"black\\"/>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let l=o._Y.createComponent("FillStarIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"FillStarIcon",iconData:c}))},3584:function(e,t,i){"use strict";i.d(t,{I:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"&#229;&#139;&#190;\\">\\n<path id=\\"Subtract\\" d=\\"M11.1687 6.7002C11.1687 9.44436 8.94412 11.6689 6.19995 11.6689C3.45579 11.6689 1.2312 9.44436 1.2312 6.7002C1.2312 3.95603 3.45579 1.73145 6.19995 1.73145C8.94412 1.73145 11.1687 3.95603 11.1687 6.7002Z\\" fill=\\"#00AA5B\\"/>\\n<path id=\\"Vector (Stroke) (Stroke)\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8.95079 4.88904C9.15069 5.09337 9.14709 5.42107 8.94275 5.62096L5.76827 8.72643C5.5671 8.92322 5.24556 8.92322 5.04439 8.72643L3.45715 7.17369C3.25282 6.9738 3.24922 6.64611 3.44911 6.44177C3.649 6.23744 3.9767 6.23383 4.18103 6.43373L5.40633 7.63239L8.21887 4.88099C8.42321 4.6811 8.7509 4.6847 8.95079 4.88904Z\\" fill=\\"white\\"/>\\n</g>\\n\\n","viewBox":"0 0 13 13"}');let l=o._Y.createComponent("FillSuccessIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"FillSuccessIcon",iconData:c}))},86743:function(e,t,i){"use strict";i.d(t,{o:function(){return l}});var r=i(71576),n=i(34491),o=i(58812),s=i(66084);class a extends n.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M9.44309 2.7334H10.557C10.9102 2.73339 11.211 2.73338 11.4579 2.75356C11.7174 2.77475 11.9698 2.82118 12.2111 2.94412C12.5749 3.12948 12.8706 3.42524 13.056 3.78902C13.1789 4.03031 13.2253 4.2827 13.2465 4.54214C13.2659 4.779 13.2667 5.06538 13.2667 5.40007H16C16.3314 5.40007 16.6 5.6687 16.6 6.00007C16.6 6.33144 16.3314 6.60007 16 6.60007H15.2667V13.4919C15.2667 14.0306 15.2667 14.4711 15.2374 14.8292C15.2072 15.1998 15.1426 15.5345 14.9833 15.8471C14.734 16.3363 14.3363 16.7341 13.8471 16.9833C13.5345 17.1426 13.1998 17.2072 12.8291 17.2375C12.4711 17.2667 12.0305 17.2667 11.4918 17.2667H8.50822C7.96952 17.2667 7.52895 17.2667 7.1709 17.2375C6.80029 17.2072 6.46558 17.1426 6.15298 16.9833C5.66376 16.7341 5.26601 16.3363 5.01674 15.8471C4.85747 15.5345 4.79288 15.1998 4.7626 14.8292C4.73334 14.4711 4.73335 14.0306 4.73336 13.4919L4.73336 6.60007H4.00002C3.66865 6.60007 3.40002 6.33144 3.40002 6.00007C3.40002 5.6687 3.66865 5.40007 4.00002 5.40007H6.73336C6.73338 5.06538 6.73416 4.779 6.75352 4.54214C6.77471 4.2827 6.82114 4.03031 6.94408 3.78902C7.12943 3.42524 7.4252 3.12948 7.78898 2.94412C8.03026 2.82118 8.28266 2.77475 8.5421 2.75356C8.78906 2.73338 9.08984 2.73339 9.44309 2.7334ZM5.93336 6.60007V13.4667C5.93336 14.0367 5.93382 14.4281 5.95861 14.7315C5.98283 15.0279 6.02724 15.1871 6.08595 15.3023C6.22017 15.5657 6.43434 15.7799 6.69777 15.9141C6.813 15.9729 6.97222 16.0173 7.26862 16.0415C7.57203 16.0663 7.96341 16.0667 8.53336 16.0667H11.4667C12.0366 16.0667 12.428 16.0663 12.7314 16.0415C13.0278 16.0173 13.187 15.9729 13.3023 15.9141C13.5657 15.7799 13.7799 15.5657 13.9141 15.3023C13.9728 15.1871 14.0172 15.0279 14.0414 14.7315C14.0662 14.4281 14.0667 14.0367 14.0667 13.4667V6.60007H5.93336ZM12.0667 5.40007H7.93337C7.93347 5.05392 7.93475 4.82072 7.94953 4.63986C7.96466 4.45463 7.9909 4.37773 8.01329 4.33381C8.08359 4.19582 8.19578 4.08363 8.33377 4.01333C8.37769 3.99095 8.45459 3.96471 8.63982 3.94957C8.83206 3.93387 9.08342 3.9334 9.46669 3.9334H10.5334C10.9166 3.9334 11.168 3.93387 11.3602 3.94957C11.5455 3.96471 11.6224 3.99095 11.6663 4.01333C11.8043 4.08363 11.9165 4.19582 11.9868 4.33381C12.0091 4.37773 12.0354 4.45463 12.0505 4.63986C12.0653 4.82072 12.0666 5.05392 12.0667 5.40007Z\\" fill=\\"#55555D\\"/>\\n\\n","viewBox":"0 0 20 20"}');let l=n._Y.createComponent("GlossaryDeleteIcon",a,e=>(0,r.jsx)(o.s,{...e.props,name:"GlossaryDeleteIcon",iconData:c}))},10881:function(e,t,i){"use strict";i.d(t,{P:function(){return l}});var r=i(71576),n=i(34491),o=i(58812),s=i(66084);class a extends n.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M12.7709 3.82813C13.71 2.889 15.2326 2.889 16.1718 3.82813C17.1109 4.76726 17.1109 6.2899 16.1718 7.22903L14.2591 9.14168C14.2586 9.14222 14.258 9.14277 14.2575 9.14331C14.257 9.14385 14.2564 9.14439 14.2559 9.14493L7.74493 15.6559C7.73452 15.6663 7.72421 15.6766 7.71399 15.6868C7.55676 15.8443 7.4216 15.9796 7.2612 16.0854C7.12007 16.1785 6.96701 16.252 6.80619 16.3041C6.62339 16.3633 6.43327 16.3843 6.21208 16.4087C6.19771 16.4103 6.18321 16.4119 6.16858 16.4135L4.00904 16.6534C3.82788 16.6736 3.6474 16.6103 3.51851 16.4814C3.38963 16.3525 3.32632 16.172 3.34645 15.9909L3.5864 13.8313C3.58802 13.8167 3.58962 13.8022 3.59121 13.7878C3.61562 13.5666 3.63661 13.3765 3.69578 13.1937C3.74785 13.0329 3.82141 12.8798 3.91448 12.7387C4.02025 12.5783 4.1556 12.4431 4.31306 12.2859C4.32329 12.2757 4.33362 12.2654 4.34403 12.255L12.7709 3.82813ZM11.2809 7.0152L5.19256 13.1035C4.98785 13.3082 4.94632 13.3537 4.91627 13.3993C4.88273 13.4502 4.85622 13.5053 4.83745 13.5633C4.82064 13.6152 4.81103 13.6761 4.77906 13.9638L4.62193 15.378L6.03606 15.2208C6.32379 15.1889 6.38466 15.1793 6.4366 15.1624C6.49457 15.1437 6.54973 15.1172 6.60059 15.0836C6.64617 15.0536 6.69169 15.012 6.8964 14.8073L12.9847 8.71904L11.2809 7.0152ZM13.8332 7.87051L12.1294 6.16667L13.6194 4.67666C14.0899 4.20615 14.8527 4.20615 15.3232 4.67666C15.7938 5.14716 15.7938 5.91 15.3232 6.3805L13.8332 7.87051Z\\" fill=\\"#55555D\\"/>\\n\\n","viewBox":"0 0 20 20"}');let l=n._Y.createComponent("GlossaryEditIcon",a,e=>(0,r.jsx)(o.s,{...e.props,name:"GlossaryEditIcon",iconData:c}))},67072:function(e,t,i){"use strict";i.d(t,{L:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Line/&#230;&#150;&#185;&#229;&#144;&#145;/&#231;&#174;&#173;&#229;&#164;&#180;-&#229;&#143;&#179;\\">\\n<path id=\\"Vector (Stroke)\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M3.93591 10.8332C3.75189 10.6511 3.75034 10.3543 3.93244 10.1703L7.733 6.32972C7.91375 6.14706 7.91375 5.85294 7.733 5.67028L3.93244 1.82972C3.75034 1.6457 3.75189 1.34891 3.93591 1.16681C4.11992 0.984715 4.41671 0.98627 4.59881 1.17028L8.39937 5.01085C8.94162 5.55881 8.94162 6.44119 8.39937 6.98915L4.59881 10.8297C4.41671 11.0137 4.11992 11.0153 3.93591 10.8332Z\\" fill=\\"#868692\\"/>\\n</g>\\n\\n","viewBox":"0 0 12 12"}');let l=o._Y.createComponent("LineArrowRightIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"LineArrowRightIcon",iconData:c}))},19393:function(e,t,i){"use strict";i.d(t,{X:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"start icon\\">\\n<g id=\\"Union\\">\\n<path d=\\"M9.25 3.25C9.25 3.94036 8.69036 4.5 8 4.5C7.30964 4.5 6.75 3.94036 6.75 3.25C6.75 2.55964 7.30964 2 8 2C8.69036 2 9.25 2.55964 9.25 3.25Z\\" fill=\\"#A7A7AE\\"/>\\n<path d=\\"M9.25 8C9.25 8.69036 8.69036 9.25 8 9.25C7.30964 9.25 6.75 8.69036 6.75 8C6.75 7.30964 7.30964 6.75 8 6.75C8.69036 6.75 9.25 7.30964 9.25 8Z\\" fill=\\"#A7A7AE\\"/>\\n<path d=\\"M8 14C8.69036 14 9.25 13.4404 9.25 12.75C9.25 12.0596 8.69036 11.5 8 11.5C7.30964 11.5 6.75 12.0596 6.75 12.75C6.75 13.4404 7.30964 14 8 14Z\\" fill=\\"#A7A7AE\\"/>\\n</g>\\n</g>\\n</svg>\\n","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("LineMoreIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"LineMoreIcon",iconData:c}))},89347:function(e,t,i){"use strict";i.d(t,{s:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"memo\\">\\n<g id=\\"Vector\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M2.59998 4.99998C2.59998 2.84606 4.34607 1.09998 6.49998 1.09998H17.5C19.6539 1.09998 21.4 2.84607 21.4 4.99998V20.8147C21.4 22.2572 19.8556 23.1736 18.5895 22.4823L12 18.8846L5.41046 22.4823C4.14434 23.1736 2.59998 22.2572 2.59998 20.8147V4.99998ZM6.49998 2.89998C5.34018 2.89998 4.39998 3.84018 4.39998 4.99998V20.8147C4.39998 20.8403 4.40593 20.8548 4.41184 20.8648C4.41908 20.877 4.43137 20.8902 4.44895 20.9007C4.46652 20.9111 4.48403 20.9155 4.49824 20.916C4.50984 20.9164 4.52544 20.9147 4.5479 20.9024L11.5687 17.0693C11.8375 16.9225 12.1625 16.9225 12.4313 17.0693L19.4521 20.9024C19.4745 20.9147 19.4901 20.9164 19.5017 20.916C19.5159 20.9155 19.5334 20.9111 19.551 20.9007C19.5686 20.8902 19.5809 20.877 19.5881 20.8648C19.594 20.8548 19.6 20.8403 19.6 20.8147V4.99998C19.6 3.84018 18.6598 2.89998 17.5 2.89998H6.49998Z\\" fill=\\"black\\"/>\\n<path d=\\"M11.965 6.72691C12.0777 6.42433 12.5057 6.42433 12.6185 6.72691L13.3687 8.73972C13.4866 9.05581 13.7359 9.30513 14.052 9.42295L16.0648 10.1732C16.3674 10.286 16.3674 10.714 16.0648 10.8267L14.052 11.577C13.7359 11.6948 13.4866 11.9441 13.3687 12.2602L12.6185 14.273C12.5057 14.5756 12.0777 14.5756 11.965 14.273L11.2147 12.2602C11.0969 11.9441 10.8476 11.6948 10.5315 11.577L8.51866 10.8267C8.21608 10.714 8.21608 10.286 8.51865 10.1732L10.5315 9.42295C10.8476 9.30513 11.0969 9.05581 11.2147 8.73972L11.965 6.72691Z\\" fill=\\"black\\"/>\\n</g>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let l=o._Y.createComponent("MemoIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"MemoIcon",iconData:c}))},46665:function(e,t,i){"use strict";i.d(t,{Q:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M11 20.1094C16.031 20.1094 20.1094 16.031 20.1094 11C20.1094 5.96903 16.031 1.89062 11 1.89062C5.96903 1.89062 1.89062 5.96903 1.89062 11C1.89062 16.031 5.96903 20.1094 11 20.1094ZM11 6.35938C11.4746 6.35938 11.8594 6.74413 11.8594 7.21875V12.375C11.8594 12.8496 11.4746 13.2344 11 13.2344C10.5254 13.2344 10.1406 12.8496 10.1406 12.375V7.21875C10.1406 6.74413 10.5254 6.35938 11 6.35938ZM11 14.0938C11.4746 14.0938 11.8594 14.4785 11.8594 14.9531V15.2969C11.8594 15.7715 11.4746 16.1562 11 16.1562C10.5254 16.1562 10.1406 15.7715 10.1406 15.2969V14.9531C10.1406 14.4785 10.5254 14.0938 11 14.0938Z\\" fill=\\"#FFAB00\\"/>\\n\\n","viewBox":"0 0 22 22"}');let l=o._Y.createComponent("NoticeIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"NoticeIcon",iconData:c}))},38133:function(e,t,i){"use strict";i.d(t,{o:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"plus-add\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M12 4.10001C12.497 4.10001 12.9 4.50295 12.9 5.00001V11.1H19C19.497 11.1 19.9 11.5029 19.9 12C19.9 12.4971 19.497 12.9 19 12.9H12.9V19C12.9 19.4971 12.497 19.9 12 19.9C11.5029 19.9 11.1 19.4971 11.1 19V12.9H4.99998C4.50292 12.9 4.09998 12.4971 4.09998 12C4.09998 11.5029 4.50292 11.1 4.99998 11.1H11.1V5.00001C11.1 4.50295 11.5029 4.10001 12 4.10001Z\\" fill=\\"black\\"/>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let l=o._Y.createComponent("PlusAddIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"PlusAddIcon",iconData:c}))},48994:function(e,t,i){"use strict";i.d(t,{D:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"<path data-follow-fill=\\"#595959\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M13.688 2.313a.625.625 0 0 0-.626.624v1.5h-1.5a.625.625 0 1 0 0 1.25h2.126c.345 0 .624-.28.624-.625V2.938a.625.625 0 0 0-.624-.624Z\\" fill=\\"#595959\\"/><path data-follow-fill=\\"#595959\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M13.738 4.686a6.625 6.625 0 1 0 .807 4.348.625.625 0 0 0-1.235-.193A5.377 5.377 0 0 1 2.625 8a5.375 5.375 0 0 1 10.031-2.688.625.625 0 1 0 1.082-.626Z\\" fill=\\"#595959\\"/>","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("RefreshIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"RefreshIcon",iconData:c}))},39052:function(e,t,i){"use strict";i.d(t,{a:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"edit\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M16.1563 2.74231C17.565 1.33361 19.849 1.33361 21.2577 2.74231C22.6664 4.15101 22.6664 6.43496 21.2577 7.84366L18.3887 10.7126C18.3879 10.7134 18.3871 10.7143 18.3862 10.7151C18.3854 10.7159 18.3846 10.7167 18.3838 10.7175L8.6174 20.4839C8.60178 20.4995 8.58631 20.515 8.57099 20.5304C8.33513 20.7666 8.1324 20.9696 7.8918 21.1282C7.68011 21.2678 7.45052 21.3782 7.20928 21.4563C6.93508 21.545 6.6499 21.5765 6.31812 21.6131C6.29657 21.6155 6.27482 21.6179 6.25287 21.6204L3.01355 21.9803C2.74182 22.0105 2.4711 21.9155 2.27777 21.7222C2.08444 21.5289 1.98948 21.2581 2.01967 20.9864L2.37959 17.7471C2.38203 17.7251 2.38444 17.7034 2.38682 17.6818C2.42344 17.35 2.45491 17.0649 2.54368 16.7907C2.62178 16.5494 2.73212 16.3198 2.87171 16.1081C3.03037 15.8676 3.23339 15.6648 3.46958 15.429C3.48493 15.4136 3.50042 15.3982 3.51605 15.3826L16.1563 2.74231ZM13.9213 7.52291L4.78884 16.6553C4.48178 16.9624 4.41949 17.0307 4.3744 17.0991C4.32409 17.1754 4.28432 17.2581 4.25618 17.3451C4.23096 17.423 4.21654 17.5143 4.16858 17.9459L3.9329 20.0671L6.05409 19.8314C6.48568 19.7834 6.57699 19.769 6.6549 19.7438C6.74185 19.7156 6.82459 19.6759 6.90088 19.6255C6.96925 19.5805 7.03754 19.5182 7.3446 19.2111L16.4771 10.0787L13.9213 7.52291ZM17.7499 8.80588L15.1941 6.25012L17.4291 4.0151C18.1349 3.30934 19.2791 3.30935 19.9849 4.0151C20.6906 4.72086 20.6906 5.86511 19.9849 6.57087L17.7499 8.80588Z\\" fill=\\"black\\"/>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let l=o._Y.createComponent("SimpleEditIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"SimpleEditIcon",iconData:c}))},21747:function(e,t,i){"use strict";i.d(t,{r:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"star-01\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M7.56948 1.18376C7.84171 1.05396 8.15799 1.05396 8.43023 1.18376C8.66557 1.29597 8.79533 1.4908 8.86077 1.59768C8.92842 1.70817 8.99786 1.84893 9.06555 1.98613C9.069 1.99313 9.07246 2.00013 9.0759 2.00711L10.5027 4.89764L13.7174 5.36751C13.8687 5.3896 14.024 5.41226 14.1499 5.44255C14.2718 5.47185 14.4971 5.53521 14.6763 5.72444C14.8837 5.94335 14.9813 6.24416 14.9418 6.54312C14.9076 6.80154 14.7624 6.98504 14.681 7.08026C14.5967 7.17868 14.4843 7.28813 14.3748 7.39481L12.0495 9.65957L12.5982 12.8584C12.6241 13.0092 12.6506 13.164 12.6609 13.2932C12.6708 13.4181 12.6803 13.652 12.5559 13.8812C12.4119 14.1462 12.156 14.3322 11.8594 14.3871C11.603 14.4347 11.3835 14.3533 11.2677 14.3052C11.148 14.2556 11.0091 14.1824 10.8736 14.1112L7.99985 12.5999L5.12608 14.1112C4.99064 14.1824 4.85169 14.2556 4.73199 14.3052C4.61623 14.3533 4.39671 14.4347 4.14031 14.3871C3.84373 14.3322 3.58781 14.1462 3.44384 13.8812C3.31937 13.652 3.32894 13.4181 3.33883 13.2932C3.34906 13.164 3.37563 13.0092 3.40153 12.8584L3.95017 9.65957L1.64173 7.41114C1.63615 7.40572 1.63057 7.40028 1.62498 7.39484C1.5154 7.28815 1.40297 7.17868 1.31876 7.08026C1.23729 6.98504 1.09206 6.80154 1.05793 6.54312C1.01845 6.24416 1.11599 5.94335 1.32338 5.72444C1.50265 5.53521 1.72793 5.47185 1.84977 5.44255C1.97571 5.41226 2.13099 5.3896 2.28232 5.36751C2.29004 5.36638 2.29776 5.36526 2.30545 5.36413L5.49701 4.89764L6.9238 2.00711C6.92725 2.00013 6.9307 1.99313 6.93416 1.98612C7.00185 1.84893 7.07129 1.70817 7.13894 1.59768C7.20438 1.4908 7.33413 1.29597 7.56948 1.18376ZM5.42807 5.03568C5.42798 5.03584 5.42798 5.03584 5.42807 5.03568V5.03568ZM5.64957 4.87461C5.64975 4.87457 5.64976 4.87457 5.64957 4.87461V4.87461ZM12.0241 9.50713C12.0241 9.50694 12.0241 9.50694 12.0241 9.50713V9.50713ZM7.99985 2.8395L6.66163 5.55059C6.65907 5.55577 6.65615 5.56181 6.65288 5.5686C6.62111 5.63436 6.55534 5.77054 6.45103 5.88281C6.36299 5.97757 6.25739 6.05436 6.1401 6.1089C6.00114 6.17352 5.85132 6.19411 5.77896 6.20405C5.7715 6.20508 5.76486 6.20599 5.75914 6.20682L2.76546 6.6444L4.93072 8.75336C4.93487 8.7574 4.93972 8.76204 4.94517 8.76726C4.998 8.81784 5.1074 8.92257 5.18205 9.05665C5.24506 9.16982 5.28548 9.29415 5.30107 9.42274C5.31955 9.57508 5.29266 9.72412 5.27968 9.7961C5.27834 9.80353 5.27715 9.81013 5.27617 9.81584L4.76531 12.7944L7.44131 11.3872C7.44644 11.3845 7.45235 11.3813 7.459 11.3777C7.52343 11.3431 7.65684 11.2715 7.8074 11.242C7.93449 11.217 8.06521 11.217 8.1923 11.242C8.34287 11.2715 8.47628 11.3431 8.54071 11.3777C8.54736 11.3813 8.55327 11.3845 8.55839 11.3872L11.2344 12.7944L10.7235 9.81584C10.7226 9.81013 10.7214 9.80353 10.72 9.7961C10.707 9.72412 10.6802 9.57508 10.6986 9.42274C10.7142 9.29415 10.7546 9.16982 10.8177 9.05665C10.8923 8.92258 11.0017 8.81784 11.0545 8.76726C11.06 8.76204 11.0648 8.7574 11.069 8.75336L13.2342 6.6444L10.2406 6.20682C10.2349 6.20599 10.2282 6.20508 10.2207 6.20405C10.1484 6.19411 9.99857 6.17352 9.85961 6.1089C9.74232 6.05436 9.63672 5.97757 9.54868 5.88281C9.44437 5.77054 9.3786 5.63437 9.34683 5.5686C9.34355 5.56181 9.34064 5.55577 9.33808 5.55059L7.99985 2.8395Z\\" fill=\\"#222226\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("StarIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"StarIcon",iconData:c}))},19221:function(e,t,i){"use strict";i.d(t,{w:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"<path data-follow-fill=\\"#868692\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M2.625 8a5.375 5.375 0 1 1 10.75 0 5.375 5.375 0 0 1-10.75 0ZM8 1.375a6.625 6.625 0 1 0 0 13.25 6.625 6.625 0 0 0 0-13.25ZM11.313 8c0 .345-.28.625-.626.625H5.314a.625.625 0 1 1 0-1.25h5.375c.345 0 .624.28.624.625Z\\" fill=\\"#868692\\"/>","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("StopIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"StopIcon",iconData:c}))},85727:function(e,t,i){"use strict";i.d(t,{N:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"translate2\\">\\n<path id=\\"Vector (Stroke)\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.08865 1.09814C5.42002 1.09814 5.68865 1.36677 5.68865 1.69814V2.03392H8.06106C8.39243 2.03392 8.66106 2.30254 8.66106 2.63392C8.66106 2.96529 8.39243 3.23392 8.06106 3.23392H7.19708C7.07308 4.36446 6.601 5.43096 5.84171 6.27132C5.85237 6.27872 5.86307 6.28608 5.8738 6.2934C6.64038 6.81607 7.55838 7.09814 8.50145 7.09814C8.83282 7.09814 9.10145 7.36677 9.10145 7.69814C9.10145 8.02952 8.83282 8.29814 8.50145 8.29814C7.32022 8.29814 6.16611 7.94508 5.1978 7.28487C5.10167 7.21933 5.00783 7.15107 4.91639 7.08022C4.07752 7.65384 3.08615 7.96786 2.06106 7.96786C1.72969 7.96786 1.46106 7.69923 1.46106 7.36786C1.46106 7.03649 1.72969 6.76786 2.06106 6.76786C2.75594 6.76786 3.43388 6.57787 4.02949 6.2235C3.62888 5.74111 3.31144 5.19388 3.09418 4.6022C2.97996 4.29114 3.13954 3.94638 3.4506 3.83216C3.76167 3.71794 4.10643 3.87751 4.22064 4.18858C4.39057 4.65134 4.6399 5.08123 4.95633 5.46127C5.51144 4.84457 5.87059 4.0666 5.98786 3.23392H2.06106C1.72969 3.23392 1.46106 2.96529 1.46106 2.63392C1.46106 2.30254 1.72969 2.03392 2.06106 2.03392H4.48865V1.69814C4.48865 1.36677 4.75728 1.09814 5.08865 1.09814ZM9.90002 2.00023C9.90002 1.66886 10.1687 1.40023 10.5 1.40023H12.3334C13.5852 1.40023 14.6 2.41505 14.6 3.66689V5.50023C14.6 5.8316 14.3314 6.10023 14 6.10023C13.6687 6.10023 13.4 5.8316 13.4 5.50023V3.66689C13.4 3.07779 12.9225 2.60023 12.3334 2.60023H10.5C10.1687 2.60023 9.90002 2.3316 9.90002 2.00023ZM10.5317 8.04732C10.8265 7.36169 11.7986 7.36169 12.0934 8.04732L14.5512 13.7632C14.6821 14.0676 14.5415 14.4205 14.237 14.5514C13.9326 14.6823 13.5797 14.5417 13.4488 14.2372L12.9599 13.1002H9.75002C9.72205 13.1002 9.69452 13.0983 9.66756 13.0946L9.17623 14.2372C9.04533 14.5417 8.69243 14.6823 8.38801 14.5514C8.08359 14.4205 7.94292 14.0676 8.07382 13.7632L10.5317 8.04732ZM10.1811 11.9002H12.4439L11.3125 9.26911L10.1811 11.9002ZM2.00002 9.90023C2.3314 9.90023 2.60002 10.1689 2.60002 10.5002L2.60002 12.3336C2.60002 12.9227 3.07759 13.4002 3.66669 13.4002H5.50002C5.8314 13.4002 6.10003 13.6689 6.10003 14.0002C6.10003 14.3316 5.8314 14.6002 5.50002 14.6002H3.66669C2.41485 14.6002 1.40002 13.5854 1.40002 12.3336L1.40002 10.5002C1.40002 10.1689 1.66865 9.90023 2.00002 9.90023Z\\" fill=\\"#222226\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("Translate2Icon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"Translate2Icon",iconData:c}))},56105:function(e,t,i){"use strict";i.d(t,{X:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<g id=\\"trash\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M7.44306 0.733399H8.55693C8.91018 0.733389 9.21096 0.733381 9.45792 0.753558C9.71736 0.774755 9.96975 0.821177 10.211 0.94412C10.5748 1.12948 10.8706 1.42524 11.0559 1.78902C11.1789 2.03031 11.2253 2.2827 11.2465 2.54214C11.2659 2.779 11.2666 3.06538 11.2667 3.40007H14C14.3314 3.40007 14.6 3.6687 14.6 4.00007C14.6 4.33144 14.3314 4.60007 14 4.60007H13.2667V11.4919C13.2667 12.0306 13.2667 12.4711 13.2374 12.8292C13.2071 13.1998 13.1426 13.5345 12.9833 13.8471C12.734 14.3363 12.3363 14.7341 11.847 14.9833C11.5344 15.1426 11.1997 15.2072 10.8291 15.2375C10.4711 15.2667 10.0305 15.2667 9.4918 15.2667H6.50819C5.96949 15.2667 5.52892 15.2667 5.17087 15.2375C4.80026 15.2072 4.46554 15.1426 4.15295 14.9833C3.66373 14.7341 3.26598 14.3363 3.01671 13.8471C2.85744 13.5345 2.79285 13.1998 2.76257 12.8292C2.73331 12.4711 2.73332 12.0306 2.73333 11.4919L2.73333 4.60007H1.99999C1.66862 4.60007 1.39999 4.33144 1.39999 4.00007C1.39999 3.6687 1.66862 3.40007 1.99999 3.40007H4.73333C4.73335 3.06538 4.73413 2.779 4.75349 2.54214C4.77468 2.2827 4.82111 2.03031 4.94405 1.78902C5.1294 1.42524 5.42517 1.12948 5.78895 0.94412C6.03023 0.821177 6.28263 0.774755 6.54207 0.753558C6.78903 0.733381 7.08981 0.733389 7.44306 0.733399ZM3.93333 4.60007V11.4667C3.93333 12.0367 3.93379 12.4281 3.95858 12.7315C3.9828 13.0279 4.0272 13.1871 4.08592 13.3023C4.22014 13.5657 4.43431 13.7799 4.69774 13.9141C4.81297 13.9729 4.97219 14.0173 5.26859 14.0415C5.57199 14.0663 5.96337 14.0667 6.53333 14.0667H9.46666C10.0366 14.0667 10.428 14.0663 10.7314 14.0415C11.0278 14.0173 11.187 13.9729 11.3022 13.9141C11.5657 13.7799 11.7798 13.5657 11.9141 13.3023C11.9728 13.1871 12.0172 13.0279 12.0414 12.7315C12.0662 12.4281 12.0667 12.0367 12.0667 11.4667V4.60007H3.93333ZM10.0667 3.40007H5.93334C5.93344 3.05392 5.93472 2.82072 5.9495 2.63986C5.96463 2.45463 5.99087 2.37773 6.01326 2.33381C6.08356 2.19582 6.19575 2.08363 6.33373 2.01333C6.37766 1.99095 6.45456 1.96471 6.63979 1.94957C6.83203 1.93387 7.08339 1.9334 7.46666 1.9334H8.53333C8.9166 1.9334 9.16796 1.93387 9.3602 1.94957C9.54543 1.96471 9.62233 1.99095 9.66625 2.01333C9.80424 2.08363 9.91642 2.19582 9.98673 2.33381C10.0091 2.37773 10.0354 2.45463 10.0505 2.63986C10.0653 2.82072 10.0666 3.05392 10.0667 3.40007Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("TrashIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"TrashIcon",iconData:c}))},21010:function(e,t,i){"use strict";i.d(t,{b:function(){return l}});var r=i(71576),n=i(58812),o=i(34491),s=i(66084);class a extends o.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8 14.625C11.6589 14.625 14.625 11.6589 14.625 8C14.625 4.34111 11.6589 1.375 8 1.375C4.34111 1.375 1.375 4.34111 1.375 8C1.375 11.6589 4.34111 14.625 8 14.625ZM8 4.625C8.34518 4.625 8.625 4.90482 8.625 5.25V9C8.625 9.34518 8.34518 9.625 8 9.625C7.65482 9.625 7.375 9.34518 7.375 9V5.25C7.375 4.90482 7.65482 4.625 8 4.625ZM8 10.25C8.34518 10.25 8.625 10.5298 8.625 10.875V11.125C8.625 11.4702 8.34518 11.75 8 11.75C7.65482 11.75 7.375 11.4702 7.375 11.125V10.875C7.375 10.5298 7.65482 10.25 8 10.25Z\\" fill=\\"#FFAB00\\"/>\\n\\n","viewBox":"0 0 16 16"}');let l=o._Y.createComponent("WarningFillIcon",a,e=>(0,r.jsx)(n.s,{...e.props,name:"WarningFillIcon",iconData:c}))},72700:function(e,t,i){"use strict";i.d(t,{U:function(){return l}});var r=i(66084),n=i(56607),o=i(92235),s=i(71749),a=i(70174);class c{async detectAllLanguage(e){if(this.cache[e])return this.cache[e];let t=[];if(n.o.isExtension){let{languages:i}=await s.b.getBrowser().i18n.detectLanguage(e);t=i.map(e=>({locale:e.language,score:e.percentage}))}else{let{data:i}=await a.v.detectLanguage({text:e});t=i}return t&&(this.cache[e]=t),t}async detectLanguage(e){var t;let i=o.m.genId();this.fetchKey=i;let r=await this.detectAllLanguage(e);return this.fetchKey===i&&r&&(null===(t=r.sort((e,t)=>t.score-e.score)[0])||void 0===t?void 0:t.locale)||null}constructor(){(0,r._)(this,"fetchKey",""),(0,r._)(this,"cache",{})}}let l=new c},2199:function(e,t,i){"use strict";i.d(t,{_:function(){return X}});var r=i(66084),n=i(52921),o=i(34491),s=i(88575),a=i(73047),c=i(43390),l=i(70786),p=i(54645),d=i(89203),u=i(19627),h=i(47227),g=i(59609),f=i(38172),m=i(91286);let C=s.c.getLogger("VoiceControl");var S=new WeakMap,y=new WeakMap,P=new WeakMap,R=new WeakMap,I=new WeakMap,b=new WeakMap,T=new WeakMap,E=new WeakMap,w=new WeakMap,A=new WeakSet,x=new WeakSet,O=new WeakSet,M=new WeakSet;class N extends m.ES{cancel(){(0,c._)(this,P)&&((0,c._)(this,P).internalAudio.currentTime=(0,c._)(this,P).internalAudio.duration),(0,c._)(this,R)&&this.emit("speakEnd",{msgId:(0,c._)(this,R)}),(0,p._)(this,R,""),(0,p._)(this,y,null),(0,p._)(this,P,null),(0,p._)(this,I,0),(0,p._)(this,T,0)}async speak(e,t,i){this.streamSpeak(e,t,!0)}async streamSpeak(e,t,i,r){if((0,p._)(this,b,t),(0,p._)(this,E,i),(0,c._)(this,R)!==e&&(this.cancel(),this.emit("speakStart",{msgId:e}),(0,p._)(this,R,e),!await (0,u._)(this,x,_).call(this,e))){C.error("set synthesizer failed");return}(0,c._)(this,y)&&(0,u._)(this,M,z).call(this)}constructor(...e){super(...e),(0,l._)(this,w,{get:D,set:void 0}),(0,h._)(this,A),(0,h._)(this,x),(0,h._)(this,O),(0,h._)(this,M),(0,l._)(this,S,{writable:!0,value:null}),(0,l._)(this,y,{writable:!0,value:null}),(0,l._)(this,P,{writable:!0,value:null}),(0,l._)(this,R,{writable:!0,value:""}),(0,l._)(this,I,{writable:!0,value:0}),(0,l._)(this,b,{writable:!0,value:""}),(0,l._)(this,T,{writable:!0,value:0}),(0,l._)(this,E,{writable:!0,value:!1})}}function D(){var e;return C.log("token",(0,c._)(this,S),null===(e=(0,c._)(this,S))||void 0===e?void 0:e.expireTime,Date.now()),!(0,c._)(this,S)||(0,c._)(this,S).expireTime<Date.now()}async function k(){if(!(0,c._)(this,w))return!0;let e=await f.W.getSpeechToken();return e?((0,p._)(this,S,e),!0):(C.error("get speech token failed",e),!1)}async function _(e){if(C.log("set synthesizer"),!await (0,u._)(this,A,k).call(this))return"tokenFail";if((0,c._)(this,R)!==e)return C.log("msgId changed, ignore",(0,c._)(this,R),e),"msgChange";let t=g.SpeechConfig.fromAuthorizationToken((0,c._)(this,S).token,(0,c._)(this,S).region),i=new g.SpeakerAudioDestination,r=g.AudioConfig.fromSpeakerOutput(i);return(0,p._)(this,P,i),i.onAudioStart=()=>C.log("(audio start)"),i.onAudioEnd=()=>{C.log("(audio end)"),(0,u._)(this,O,L).call(this,i)},(0,p._)(this,y,g.SpeechSynthesizer.FromConfig(t,g.AutoDetectSourceLanguageConfig.fromOpenRange(),r)),(0,c._)(this,y).synthesisCompleted=(e,t)=>{if(e!==(0,c._)(this,y)){C.log("close, because new synthesizer inited"),e.close();return}(0,d._)(this,I).value--,C.log("(synthesized)  Reason: ".concat(g.ResultReason[t.result.reason]," Audio length: ").concat(t.result.audioData.byteLength)),(0,c._)(this,E)&&0===(0,c._)(this,I)&&(C.log("close, because stream finished"),e.close())},(0,c._)(this,y).SynthesisCanceled=(e,t)=>{e===(0,c._)(this,y)&&(0,d._)(this,I).value--;let i=g.CancellationDetails.fromResult(t.result),r="(cancel) Reason: ".concat(g.CancellationReason[i.reason]);i.reason===g.CancellationReason.Error&&(r+=": ".concat(t.result.errorDetails)),C.log(t,r)},"success"}function L(e){(0,c._)(this,P)===e&&(this.emit("speakEnd",{msgId:(0,c._)(this,R)}),(0,p._)(this,R,""),(0,p._)(this,y,null),(0,p._)(this,P,null))}function z(){var e,t;let i=(0,c._)(this,E),r=(0,c._)(this,b).slice((0,c._)(this,T)),n=Array.from(r.matchAll(RegExp("[".concat(m.yx,"]"),"g"))),o=n[n.length-1],s="";if(i){s=(0,c._)(this,b).slice((0,c._)(this,T)),(0,p._)(this,T,(0,c._)(this,b).length),(0,d._)(this,I).value++,C.log("speak text(end of stream):",s),null===(t=(0,c._)(this,y))||void 0===t||t.speakTextAsync(s);return}if((0,c._)(this,I)>1){C.log("synthesizer has text queue, wait");return}if(!o){C.log("no split found, wait");return}s=r.slice(0,o.index+1),(0,p._)(this,T,(0,c._)(this,T)+s.length),""!==s.trim()&&((0,d._)(this,I).value++,C.log("speak text:",s,(0,c._)(this,y)),null===(e=(0,c._)(this,y))||void 0===e||e.speakTextAsync(s))}var j=i(72700),F=i(76469),B=i(56607),U=i(31640),W=i(71749);let V=s.c.getLogger("VoiceControl"),q={en:"en-US",zh:"zh-CN",es:"es-ES",it:"it-IT",pt:"pt-BR"},H=/[,，.!！;?？；;،。…:：\n\r]/,G="en-US";class K extends F.v{get synth(){return globalThis.speechSynthesis}updateVoices(){var e;this.voices=null===(e=this.synth)||void 0===e?void 0:e.getVoices().reverse().filter(e=>{let{name:t}=e;return!t.includes("Male")}),V.log("voice updated",this.voices)}cancel(){this.synth.speaking&&(this.synth.cancel(),this.status="idle",this.msgId="")}async speak(e,t,i){this.cancel(),this.msgId=e,this.status="speaking";let r=await this.createUtterance(t,i);this.emit("speakStart",{msgId:e}),this.doSpeak(e,r)}async streamSpeak(e,t,i,r){var n;let o;this.msgId!==e&&(this.cancel(),this.status="streaming",this.streamOffset=0,this.msgId=e,this.streamQueuedText="",this.streamingLastLang="",this.streamingStarted=!1);let s=t=>{this.streamingStarted||(this.streamingStarted=!0,this.emit("speakStart",{msgId:e})),this.doSpeak(e,t)},a=t.slice(this.streamOffset),c=null===(n=H.exec(a))||void 0===n?void 0:n.index;if(o=i||void 0===c?a:a.slice(0,c+1),V.log(this.streamOffset,c,o),i){let e=await this.createUtterance(this.streamQueuedText+o,r);this.status="streamingEnd",s(e),V.log("finished");return}if(void 0!==c&&c<a.length){V.log("speaking?",this.synth.speaking);let e=this.streamQueuedText+o;if(this.synth.speaking||!o.trim()||e.length<20)this.streamQueuedText+=o;else{let e=await this.createUtterance(this.streamQueuedText+o,r);this.streamQueuedText="",s(e)}this.streamOffset+=c+1;return}V.log("keep waiting")}doSpeak(e,t){V.log("do speak",t),this.synth.speak(t),this.startSpeakKeeper(),this.startStatusChecker(e)}startSpeakKeeper(){this.speakKeeper||(this.speakKeeper=setInterval(()=>{V.log("keep speaking"),this.synth.pause(),this.synth.resume(),!this.synth.speaking&&this.speakKeeper&&(clearInterval(this.speakKeeper),this.speakKeeper=null)},5e3))}startStatusChecker(e){let t=()=>{this.emit("speakEnd",{msgId:e}),clearInterval(i),this.statusChecker===i&&(this.statusChecker=null)},i=setInterval(()=>{if(V.log("check",e,this.msgId,this.synth.speaking,this.status),!this.msgId||e!==this.msgId){t();return}this.synth.speaking||"streamingEnd"!==this.status&&"speaking"!==this.status||(t(),this.status="idle",this.msgId="")},100);this.statusChecker=i}async createUtterance(e,t){let i;let r=await j.U.detectLanguage(e),n=navigator.language;B.o.isExtension&&(n=W.b.getBrowser().i18n.getUILanguage());let o="streaming"===this.status||"streamingEnd"===this.status;if(this.streamingLastLang&&o)i=this.streamingLastLang;else{let e;e=r||G,t&&U.q.compareLocale(t,e)?(i=t,V.log("using speech lang",t)):n&&U.q.compareLocale(n,e)?(i=n,V.log("using ui lang",n)):q[e]?(i=q[e],V.log("found mainstream lang variant",i)):(i=e,V.log("using text lang",e)),o&&(this.streamingLastLang=i)}V.log("looking for voice for language: ",i);let s=this.voices.find(e=>U.q.compareLocale(e.lang,i)&&e.default);s||(s=this.voices.find(e=>U.q.compareLocale(e.lang,i))),s||(V.log(this.synth.getVoices().reverse().map(e=>e.lang)),V.error("unable to find voice for language: ".concat(i,", using ").concat(G," instead")),s=this.voices.find(e=>U.q.compareLocale(e.lang,G))),V.log("voice found",s);let a=new SpeechSynthesisUtterance;return a.text=e,a.voice=s,a.rate=1,a.pitch=1,a}constructor(){var e,t;super(),(0,r._)(this,"status","idle"),(0,r._)(this,"msgId",""),(0,r._)(this,"voices",[]),(0,r._)(this,"streamOffset",0),(0,r._)(this,"streamingLastLang",""),(0,r._)(this,"streamQueuedText",""),(0,r._)(this,"streamingStarted",!1),(0,r._)(this,"speakKeeper",null),(0,r._)(this,"statusChecker",null),this.updateVoices(),null===(t=this.synth)||void 0===t||null===(e=t.addEventListener)||void 0===e||e.call(t,"voiceschanged",()=>{this.updateVoices()}),window.addEventListener("beforeunload",()=>{this.cancel()})}}var J=i(90180);let Z=s.c.getLogger("VoiceControl");async function Y(){return new Promise(e=>{let t=i=>{Z.log(i.blockedURI),Z.log(i.violatedDirective),Z.log(i.originalPolicy),document.removeEventListener("securitypolicyviolation",t),e("browser")};document.addEventListener("securitypolicyviolation",t);let i=document.createElement("audio"),r=new Blob(["audio_test"],{type:"application/json"});i.src=window.URL.createObjectURL(r),setTimeout(()=>{e("azure")},50)})}class Q{async speakMessage(e){let{lang:t=J.A.finalSpeechLang,id:i,text:r}=e;(await this.getSpeechSynth()).speak(i,r,t)}setAutoSpeak(e){var t;this.autoSpeakEnabled=e,null===(t=this._speechSynth)||void 0===t||t.cancel()}async streamSpeak(e){let{lang:t=J.A.finalSpeechLang,id:i,text:r,finished:n}=e;(await this.getSpeechSynth()).streamSpeak(i,r,n,t)}cancelSpeak(){var e;null===(e=this._speechSynth)||void 0===e||e.cancel()}init(e){e.on("speakStart",e=>{let{msgId:t}=e;this.speakingMsgId=t}),e.on("speakEnd",e=>{let{msgId:t}=e;this.speakingMsgId===t&&(this.speakingMsgId=null)})}async getSpeechSynth(){if(this.activatedHost!==window.location.host){this.activatedHost=window.location.host;let e=await Y();this.currentType!==e&&(this._speechSynth&&this._speechSynth.removeAllListeners(),"azure"===e&&(this._speechSynth=new N),"browser"===e&&(this._speechSynth=new K),this.init(this._speechSynth))}return this._speechSynth}constructor(){(0,r._)(this,"autoSpeakEnabled",null),(0,r._)(this,"speakingMsgId",null),(0,r._)(this,"activatedHost",null),(0,r._)(this,"currentType","none"),(0,r._)(this,"_speechSynth",null),(0,a.rC)(this)}}(0,n.gn)([o.SB],Q.prototype,"autoSpeakEnabled",void 0),(0,n.gn)([o.SB],Q.prototype,"speakingMsgId",void 0);let X=new Q},41855:function(e,t,i){"use strict";i.d(t,{c:function(){return l}});var r=i(66084),n=i(52921),o=i(34491),s=i(44469),a=i(73047);class c{get currentPage(){return this.allTabs.find(e=>e.active)}initServiceEventListeners(){s.T3.on("onActiveTabChange",async()=>{this.loadAllTabs()}),this.loadAllTabs()}async loadAllTabs(){let{sort:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sort:!1},t=await s.T3.getAllTabInfo().then(e=>{var t;return null===(t=e||[])||void 0===t?void 0:t.filter(e=>e.id&&e.url)});return e&&(t=t.sort((e,t)=>e.active?-1:1)),this.allTabs=t,this.allTabs}constructor(){(0,r._)(this,"allTabs",[]),(0,a.rC)(this)}}(0,n.gn)([o.SB],c.prototype,"allTabs",void 0),(0,n.gn)([a.Fl],c.prototype,"currentPage",null);let l=new c},79494:function(e,t,i){"use strict";i.d(t,{translationGlossaryController:function(){return u}});var r=i(66084),n=i(52921),o=i(34491),s=i(88882),a=i(92235),c=i(73047),l=i(7893),p=i(15851);class d{get S(){return s.S.Global.controllers.translationGlossaryController}async init(){this.initialized||(this.initialized=!0,l.d.on("change",e=>{void 0!==e.translationGlossaryList&&this.setGlossaryList(e.translationGlossaryList)}))}async getGlossaryList(){if(!this.listLoading){this.listLoading=!0;try{let e=await l.d.getStaledGlossaryList();this.setGlossaryList(e)}catch(e){p.M.error(a.m.formatErrorMsg(e))}this.listLoading=!1}}async delGlossaryTerm(e){if(e.loading)return;e.loading=!0;let{uid:t}=e;try{await l.d.delTerm(t)}catch(e){p.M.error(a.m.formatErrorMsg(e))}e.loading=!1}setGlossaryList(e){this.glossaryList=null===e?[]:e}constructor(){(0,r._)(this,"listLoading",!1),(0,r._)(this,"glossaryList",[]),(0,r._)(this,"initialized",!1),(0,c.rC)(this),this.init()}}(0,n.gn)([o.SB],d.prototype,"listLoading",void 0),(0,n.gn)([o.SB],d.prototype,"glossaryList",void 0),(0,n.gn)([c.Fl],d.prototype,"S",null);let u=new d},91286:function(e,t,i){"use strict";i.d(t,{ES:function(){return c},Iu:function(){return n},WX:function(){return l},yx:function(){return a}});var r,n,o=i(66084),s=i(76469);let a=",，.!！;?？；;،。…:：\n\r";class c extends s.v{}class l{constructor(e){(0,o._)(this,"callbacks",void 0),this.callbacks=e}}(r=n||(n={})).noMicrophone="NO_MIC",r.blocked="BLOCKED",r.denied="DENIED",r.internal="Unable to start voice input (internal error)",r.unsupportedBrowser="Your browser does not support speech recognition feature",r.noToken="Fetch azure token failed"},43368:function(e,t,i){"use strict";i.d(t,{k:function(){return h}});var r=i(71576),n=i(34491),o=i(4461),s=i(92660),a=i(78716),c=i.n(a),l=i(53040),p=i(66084),d=i(52921);class u extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,p._)(this,"props",void 0),(0,p._)(this,"someState",!0)}}(0,d.gn)([n.SB],u.prototype,"someState",void 0);let h=n._Y.createComponent("BotAvatar",u,e=>{let{src:t="",size:i=68,className:n,name:a}=e.props,p=(0,o.Q)(t)||s.py;return(0,r.jsx)("div",{className:c()("bot-avatar--ot8w0",n),style:{width:"".concat(i,"px"),height:"".concat(i,"px")},children:(0,r.jsx)(l.E,{src:p,alt:a,skeleton:!0})})})},91571:function(e,t,i){"use strict";i.d(t,{T:function(){return b}});var r=i(71576),n=i(34491),o=i(13292),s=i(61658),a=i(58812),c=i(66084);class l extends n.PN{constructor(...e){super(...e),(0,c._)(this,"props",void 0)}}var p=JSON.parse('{"fill":"none","content":"\\n<g id=\\"close\\">\\n<g id=\\"Union\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M14.5528 3.14825C15.4966 2.20449 17.0267 2.20449 17.9705 3.14826C18.9142 4.09202 18.9142 5.62217 17.9705 6.56594L16.6336 7.90281C17.5552 9.16386 18.065 10.4644 18.2507 11.6428C18.4557 12.9436 18.2735 14.1677 17.719 14.9994C16.6733 16.5679 15.0895 16.8033 13.8953 16.6839C13.2995 16.6243 12.7716 16.4767 12.3965 16.3468C12.2075 16.2814 12.0535 16.2192 11.9446 16.1722C11.89 16.1487 11.8465 16.1289 11.8153 16.1144C11.7997 16.1071 11.7872 16.1011 11.7778 16.0965L11.7663 16.0909L11.7623 16.0889L11.7608 16.0882C11.7605 16.088 11.7596 16.0876 12.095 15.4168L11.7596 16.0876C11.3891 15.9023 11.2389 15.4518 11.4242 15.0813C11.6091 14.7114 12.0585 14.5612 12.4286 14.7451C12.4284 14.7449 12.4289 14.7452 12.4286 14.7451C12.4288 14.7451 12.4296 14.7455 12.4297 14.7456C12.4297 14.7456 12.4298 14.7456 12.4297 14.7456M12.4297 14.7456L12.4313 14.7464L12.4503 14.7554C12.4687 14.764 12.4985 14.7776 12.5383 14.7947C12.6182 14.8292 12.7376 14.8776 12.8872 14.9294C13.1892 15.0339 13.5988 15.1467 14.0446 15.1913C14.9338 15.2802 15.8499 15.0989 16.4709 14.1674C16.7498 13.7491 16.9373 12.9442 16.769 11.8763C16.6309 10.9995 16.2577 9.99216 15.5579 8.97846L11.5725 12.9639C10.6739 13.8625 9.46614 14.3844 8.19584 14.4228C7.35713 14.4483 6.67046 13.7616 6.69587 12.9229C6.73437 11.6526 7.2562 10.4448 8.15485 9.54619L11.8561 5.84494C10.4228 5.15862 8.9282 4.89089 7.57834 5.01142C7.16577 5.04825 6.80145 4.74366 6.76462 4.33109C6.72778 3.91852 7.03237 3.5542 7.44494 3.51736C9.2353 3.3575 11.1772 3.76275 12.9713 4.72977L14.5528 3.14825M16.9098 4.20892C16.5518 3.85093 15.9714 3.85093 15.6134 4.20891L9.21551 10.6068C8.59802 11.2243 8.23493 12.0505 8.1969 12.9218C9.06822 12.8838 9.89438 12.5207 10.5119 11.9032L16.9098 5.50528C17.2678 5.1473 17.2678 4.5669 16.9098 4.20892ZM1.96542 10.1941C2.37546 10.1355 2.75541 10.4203 2.81406 10.8304C3.09636 12.8041 4.35023 14.878 6.43474 16.3376C7.49411 17.0793 8.63292 17.5672 9.75485 17.812C10.1595 17.9003 10.416 18.3 10.3277 18.7047C10.2394 19.1094 9.83978 19.3659 9.43509 19.2776C8.11557 18.9897 6.79354 18.4199 5.57438 17.5663C3.1877 15.8951 1.67638 13.4703 1.32917 11.0427C1.27052 10.6327 1.55538 10.2528 1.96542 10.1941Z\\" fill=\\"url(#paint0_linear_9_26132)\\"/>\\n<path d=\\"M3.9698 4.00781C4.04498 3.8061 4.3303 3.8061 4.40549 4.00781L4.90566 5.34969C4.9842 5.56042 5.15042 5.72663 5.36114 5.80518L6.70302 6.30535C6.90474 6.38054 6.90474 6.66585 6.70302 6.74104L5.36114 7.24121C5.15042 7.31976 4.9842 7.48597 4.90566 7.6967L4.40549 9.03857C4.3303 9.24029 4.04498 9.24029 3.9698 9.03857L3.46963 7.6967C3.39108 7.48597 3.22487 7.31976 3.01414 7.24121L1.67226 6.74104C1.47055 6.66585 1.47055 6.38054 1.67226 6.30535L3.01414 5.80518C3.22487 5.72663 3.39108 5.56042 3.46963 5.34969L3.9698 4.00781Z\\" fill=\\"url(#paint1_linear_9_26132)\\"/>\\n</g>\\n</g>\\n<defs>\\n<linearGradient id=\\"paint0_linear_9_26132\\" x1=\\"4.5\\" y1=\\"4\\" x2=\\"18\\" y2=\\"15\\" gradientUnits=\\"userSpaceOnUse\\">\\n<stop stop-color=\\"#54B6FC\\"/>\\n<stop offset=\\"1\\" stop-color=\\"#EA2FD7\\"/>\\n</linearGradient>\\n<linearGradient id=\\"paint1_linear_9_26132\\" x1=\\"4.5\\" y1=\\"4\\" x2=\\"18\\" y2=\\"15\\" gradientUnits=\\"userSpaceOnUse\\">\\n<stop stop-color=\\"#54B6FC\\"/>\\n<stop offset=\\"1\\" stop-color=\\"#EA2FD7\\"/>\\n</linearGradient>\\n</defs>\\n\\n","viewBox":"0 0 20 20"}');let d=n._Y.createComponent("MulticolorAiPenIcon",l,e=>(0,r.jsx)(a.s,{...e.props,name:"MulticolorAiPenIcon",iconData:p}));var u=i(82005),h=i(92660),g=i(52921),f=i(88882),m=i(92235),C=i(65324),S=i(15851),y=i(46756),P=i(24900);class R extends n.PN{get S(){return f.S.Global.modules.MainWindow.EditConvTitleDialog}async handleSubmit(){let{convItem:e}=this.props;if(e.conversationId){try{var t,i,r,n,o,s,a,c,l;this.loading=!0;let p={conversationId:e.conversationId,title:this.value,infoData:{hasImg:null===(t=e.infoData)||void 0===t?void 0:t.hasImg,hasDoc:null===(i=e.infoData)||void 0===i?void 0:i.hasDoc,hasArtifact:null===(r=e.infoData)||void 0===r?void 0:r.hasArtifact}};y.y.updateConversationByLocal(p),C.Cb.botFrameworkService.customBotApi.updateConversation(p),null===(n=(o=this.props).onDisposed)||void 0===n||n.call(o),S.M.success(this.S.titleUpdated),null===(s=(a=this.props).onSuccess)||void 0===s||s.call(a,this.value),null===(c=(l=this.props).onClose)||void 0===c||c.call(l)}catch(e){S.M.error(m.m.formatMonicaSdkError(e))}this.loading=!1}}async handleGenTitle(){let{convItem:e}=this.props;if(e.conversationId){this.genLoading=!0;try{P.Tn.genNewConversationTitle(e.conversationId,e=>{this.value=e,this.genLoading=!1,S.M.success(this.S.genSuccess)},e=>{S.M.error(m.m.formatMonicaSdkError(e)),this.genLoading=!1})}catch(e){S.M.error(m.m.formatMonicaSdkError(e)),this.loading=!1}}}onViewCreate(){}onBeforeMount(){let{convItem:e}=this.props;this.value=e.title||h.Q0}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"loading",!1),(0,c._)(this,"genLoading",!1),(0,c._)(this,"value","")}}(0,g.gn)([n.SB],R.prototype,"loading",void 0),(0,g.gn)([n.SB],R.prototype,"genLoading",void 0),(0,g.gn)([n.SB],R.prototype,"value",void 0),(0,g.gn)([n.Fl],R.prototype,"S",null);let I=n._Y.createComponent("EditConvTitleDialog",R,e=>{let{insertTarget:t,onDisposed:i,convItem:n,onClose:a}=e.props;return(0,r.jsx)(o.N,{visible:!0,title:e.S.title,fixed:"dialogRoot"===t,okLoading:e.loading,okDisabled:e.genLoading||!e.value,defaultValue:n.title||h.Q0,onOk:()=>{e.handleSubmit()},onCancel:()=>{null==i||i(),null==a||a()},inputProps:{className:"input--Y952G",value:e.value,onChange:t=>{e.value=t},onEnterWithoutCtrl:()=>{e.handleSubmit()},disabled:e.genLoading,addonAfter:(0,r.jsx)("div",{className:"addon-after--SsoES",onClick:()=>{e.handleGenTitle()},children:e.genLoading?(0,r.jsx)(s.g,{size:20}):(0,r.jsx)(d,{size:20,title:e.S.reGenerate})})}})}),b=u.t.createOpener(I)},37819:function(e,t,i){"use strict";i.d(t,{J:function(){return N}});var r=i(71576),n=i(34491),o=i(92660),s=i(78716),a=i.n(s),c=i(68104),l=i(5857),p=i(46731),d=i(82005),u=i(35076),h=i(66084),g=i(52921),f=i(88882),m=i(37067),C=i(11989),S=i(32004),y=i(92235),P=i(56607),R=i(73047),I=i(37949),b=i(919),T=i(11502),E=i(38172),w=i(44469),A=i(93724),x=i(44016);class O extends n.PN{get sidebarWidth(){return I.w.visible?I.w.sidebarWidth:0}get left(){return I.w.isSidebarRenderLeft?this.sidebarWidth:0}get S(){return f.S.Global.modules.MindMap.MindMapDialog}onViewCreate(){let e=()=>{this.modalWrapperWidth=document.documentElement.clientWidth-this.sidebarWidth};e(),this.isReady=!0,m.I.getProxy(this,window).addEventListener("resize",()=>{e()}),m.I.getProxy(this,document.body).addEventListener("keydown",e=>{C.t.isHotkey(e,["Escape"])&&(this.isFullscreen?this.isFullscreen=!1:this.props.onDisposed())}),I.w.eventEmitter.listenBy(this,"resize",()=>{e()}),S.f.getProxy(this).add((0,R.U5)(()=>I.w.visible,()=>{I.w.visible||this.props.onDisposed()})),this.props.source&&T.M.createUserBehaviorEvent({eventName:x.$.UserEvent.ViewShow,source:this.props.source}),E.W.on("userLogout",()=>{this.props.onDisposed()}),this.updateData(this.props.data)}onViewDestroy(){m.I.getProxy(this,window).removeAllListeners(),I.w.eventEmitter.stopListenBy(this),m.I.getProxy(this,document.body).removeAllListeners(),S.f.getProxy(this).disposeAll()}onEdit(){let e=this.mindMapEditorManager.getData();if(!e)return;let t=b.Qp.toMarkdown(e),i=y.m.genShortId();if(P.o.isExtension&&w.T3.setMindMapData(i,t),P.o.isWeb){let e=localStorage.getItem(o.storageKeys.mindMapData)||"",r={};try{let n=JSON.parse(e)||{};n[i]=t,r=n}catch(e){}r[i]=t,localStorage.setItem(o.storageKeys.mindMapData,JSON.stringify(r))}window.open(y.m.genWebMindMapUrl(i))}updateData(e){if(e){let t=b.Qp.genNodeId(e,this.id);this.mindMapEditorManager.setData(t)}}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"mindMapEditorManager",new A.nC),(0,h._)(this,"isFullscreen",!1),(0,h._)(this,"modalWrapperWidth",0),(0,h._)(this,"isReady",!1),(0,h._)(this,"theme",void 0),(0,h._)(this,"id",y.m.genShortId())}}(0,g.gn)([n.SB],O.prototype,"isFullscreen",void 0),(0,g.gn)([n.SB],O.prototype,"modalWrapperWidth",void 0),(0,g.gn)([n.SB],O.prototype,"isReady",void 0),(0,g.gn)([n.SB],O.prototype,"theme",void 0),(0,g.gn)([R.Fl],O.prototype,"sidebarWidth",null),(0,g.gn)([R.Fl],O.prototype,"left",null),(0,g.gn)([R.Fl],O.prototype,"S",null);let M=n._Y.createComponent("MindMapDialog",O,e=>{let{onDisposed:t,isOutsideContentRoot:i,dataUpdater:n}=e.props;return null==n||n(t=>{e.updateData(t)}),(0,r.jsxs)(c.u,{wrapperStyle:{width:i?"".concat(e.modalWrapperWidth,"px"):"100%",left:i?e.left:0},onDispose:t,fixed:!0,width:e.isFullscreen?"100%":"calc(100% - 80px)",className:a()("mind-map-dialog--_roPL",{"fullscreen--vJCf3":e.isFullscreen}),children:[(0,r.jsx)(l.z,{className:"edit-button--OHuX0",icon:(0,r.jsx)(p.J,{name:o.UZ.lineFeatureEdit,color:"currentColor"}),onClick:()=>{e.onEdit()},children:e.S.editInMonicaMindmap}),e.isReady&&(0,r.jsx)(u.c,{readonly:!0,manager:e.mindMapEditorManager,onThemeChange:t=>{e.theme=t},controlsProps:{showDownload:!0,showFitScreen:!0,isFullscreen:e.isFullscreen,theme:e.theme,onFullscreen:()=>{e.isFullscreen=!e.isFullscreen}}})]})}),N=d.t.createOpener(M)},35076:function(e,t,i){"use strict";i.d(t,{c:function(){return ea}});var r=i(71576),n=i(34491),o=i(78716),s=i.n(o),a=i(5336),c=i(46731),l=i(66084),p=i(52921);class d extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"someState",!0)}}(0,p.gn)([n.SB],d.prototype,"someState",void 0);let u=n._Y.createComponent("Menu",d,e=>{let{children:t,className:i,style:n,getRef:o}=e.props;return(0,r.jsx)("div",{className:s()("menu--Wm1tN",i),style:n,ref:o,children:t})});var h={menuGroup:"menu-group--AVA1_",title:"title--nDAZv"};class g extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"someState",!0)}}(0,p.gn)([n.SB],g.prototype,"someState",void 0);let f=n._Y.createComponent("MenuGroup",g,e=>{let{title:t,children:i}=e.props;return(0,r.jsxs)("div",{className:h.menuGroup,children:[t&&(0,r.jsx)("div",{className:h.title,children:t}),i]})});class m extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"someState",!0)}}(0,p.gn)([n.SB],m.prototype,"someState",void 0);let C=n._Y.createComponent("MenuItem",m,e=>{let{extra:t,label:i,clickable:n,disabled:o,onClick:a}=e.props;return(0,r.jsxs)("div",{className:s()("menu-item--WcGy1",{"disable--zzPze":o,"click--vTM79":n}),onClick:e=>{o||null==a||a(e)},children:[(0,r.jsx)("div",{className:"label--rZVhl",children:i}),(0,r.jsx)("div",{className:"extra--Q_t2a",children:t})]})});var S=i(88882),y=i(92235),P=i(73047),R=i(88575),I=i(28901),b=i(90180),T=i(11502),E=i(44016);R.c.getLogger("MindMap");class w extends n.PN{get S(){return S.S.Global.modules.MindMap.MindMapEditor}themeChange(){let{colorId:e,skeletonId:t}=this.props.theme||{};e&&this.props.manager.changeColor(e),t&&this.props.manager.changeSkeleton(t)}languageChange(){this.lang=this.props.language||b.A.finalGlobalRespondLanguage}onBeforeMount(){let e=this.props.manager;e.emitter.listenBy(this,"dataChangeDetail",e=>{e.forEach(e=>{this.props.readonly||"create"!==e.action&&"delete"!==e.action||T.M.createUserBehaviorEvent({eventName:E.$.UserEvent.WebEdit,extData:{type:e.action}})})}),e.emitter.listenBy(this,"contextMenuVisibilityChange",e=>{let{visible:t,pos:i}=e;this.contextMenuVisible=t;let{x:r,y:n}=i||{x:0,y:0};this.contextMenuPosition={x:r,y:n},setTimeout(()=>{let e=this.contextMenuEl;e&&(r+e.clientWidth>window.innerWidth&&(this.contextMenuPosition.x=window.innerWidth-e.clientWidth-10),n+e.clientHeight>window.innerHeight&&(this.contextMenuPosition.y=window.innerHeight-e.clientHeight-10))},0)}),e.emitter.listenBy(this,"nodeToolbarVisibilityChange",e=>{let{visible:t,pos:i}=e;this.nodeToolbarVisible=t;let{x:r,y:n}=i||{x:0,y:0};this.nodeToolbarPosition={x:r,y:n-34},setTimeout(()=>{let e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,i=this.nodeToolbarEl;i&&(this.nodeToolbarPosition.x=r-i.clientWidth/2,r+i.clientWidth>e&&(this.nodeToolbarPosition.x=e-i.clientWidth-10),n+i.clientHeight>t&&(this.nodeToolbarPosition.y=t-i.clientHeight-10))},0)})}async onViewCreate(){this.props.manager.init({container:this.canvas,theme:this.props.theme,readonly:this.props.readonly});let e=new ResizeObserver(()=>{(!this.canvas||I.x.checkVisibility(this.canvas))&&(this.props.manager.resize(),this.isReadOnly&&this.props.manager.fitScreen())});e.observe(this.canvas),this.resizeObserver=e}onViewDestroy(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.props.manager.emitter.stopListenBy(this),this.props.manager.destroy()}changeColor(e){var t,i;let r=this.props.manager;r.changeColor(e),null===(t=(i=this.props).onThemeChange)||void 0===t||t.call(i,{colorId:r.colorId,skeletonId:r.skeletonId})}changeSkeletonCategory(e){var t,i;let r=this.props.manager;r.changeSkeletonCategory(e),null===(t=(i=this.props).onThemeChange)||void 0===t||t.call(i,{colorId:r.colorId,skeletonId:r.skeletonId})}changeSkeleton(e){var t,i;let r=this.props.manager;r.changeSkeleton(e),null===(t=(i=this.props).onThemeChange)||void 0===t||t.call(i,{colorId:r.colorId,skeletonId:r.skeletonId})}closeContextMenu(){this.contextMenuVisible=!1}closeNodeToolbar(){this.nodeToolbarVisible=!1}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"canvas",null),(0,l._)(this,"contextMenuEl",null),(0,l._)(this,"nodeToolbarEl",null),(0,l._)(this,"contextMenuPosition",{x:-999,y:-999}),(0,l._)(this,"nodeToolbarPosition",{x:0,y:0}),(0,l._)(this,"contextMenuVisible",!1),(0,l._)(this,"nodeToolbarVisible",!1),(0,l._)(this,"isReadOnly",!1),(0,l._)(this,"lang",b.A.finalGlobalRespondLanguage),(0,l._)(this,"resizeObserver",null)}}(0,p.gn)([n.SB],w.prototype,"contextMenuPosition",void 0),(0,p.gn)([n.SB],w.prototype,"nodeToolbarPosition",void 0),(0,p.gn)([n.SB],w.prototype,"contextMenuVisible",void 0),(0,p.gn)([n.SB],w.prototype,"nodeToolbarVisible",void 0),(0,p.gn)([n.SB],w.prototype,"isReadOnly",void 0),(0,p.gn)([n.SB],w.prototype,"lang",void 0),(0,p.gn)([P.Fl],w.prototype,"S",null),(0,p.gn)([(0,n.YP)(e=>[e.props.theme])],w.prototype,"themeChange",null),(0,p.gn)([(0,n.YP)(e=>[e.props.language])],w.prototype,"languageChange",null),w=(0,p.gn)([n.Tt],w);class A extends n.PN{get node(){return this.editor.props.manager.getActiveNode()}get insertNodeBtnDisabled(){return!this.node||this.node.isRoot||this.node.isGeneralization}get upNodeBtnDisabled(){var e,t;return!this.node||!!this.node.isRoot||!!this.node.isGeneralization||(null===(t=this.node.parent)||void 0===t?void 0:null===(e=t.children)||void 0===e?void 0:e.findIndex(e=>e===this.node))===0}get downNodeBtnDisabled(){var e;if(!this.node||this.node.isRoot||this.node.isGeneralization)return!0;let t=(null===(e=this.node.parent)||void 0===e?void 0:e.children)||[];return t.findIndex(e=>e===this.node)===t.length-1}get S(){return S.S.Global.modules.MindMap.MindMapEditor.ContextMenu}get canvasMenu(){let e=y.m.isMacOS()?"⌘":"Ctrl";return[{children:[{label:this.S.backCenter,exec:"RETURN_CENTER",value:"".concat(e," + Enter")},{label:this.S.expandAll,value:"",exec:"EXPAND_ALL"},{label:this.S.unExpandAll,value:"",exec:"UNEXPAND_ALL"}]},{children:[{label:this.S.fitCanvas,value:"".concat(e," + L"),exec:"FIT_CANVAS"},{label:this.S.arrangeLayout,value:"".concat(e," + i"),exec:"RESET_LAYOUT"}]}]}get nodeMenu(){let e=y.m.isMacOS()?"⌘":"Ctrl";return[{children:[{exec:"AI_GENERATE_NODE",label:this.S.generateNode,value:(0,r.jsx)(c.J,{name:"aiGenerateNode",size:16})}]},{children:[{exec:"INSERT_NODE",label:this.S.insertSiblingNode,value:"Enter",disabled:this.insertNodeBtnDisabled},{exec:"INSERT_CHILD_NODE",label:this.S.insertChildNode,value:"Tab"},{exec:"INSERT_PARENT_NODE",label:this.S.insertParentNode,value:"Shift + Tab",disabled:this.insertNodeBtnDisabled}]},{children:[{exec:"UP_NODE",label:this.S.moveUpNode,value:"".concat(e," + ↑"),disabled:this.upNodeBtnDisabled},{exec:"DOWN_NODE",label:this.S.moveDownNode,value:"".concat(e," + ↓"),disabled:this.downNodeBtnDisabled}]},{children:[{exec:"COPY_NODE",label:this.S.copyNode,value:"".concat(e," + C")},{exec:"CUT_NODE",label:this.S.cutNode,value:"".concat(e," + X")},{exec:"PASTE_NODE",label:this.S.pasteNode,value:"".concat(e," + V")},{exec:"REMOVE_CURRENT_NODE",label:this.S.deleteCurrentNode,value:"Shift + Backspace"}]}]}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"editor",(0,n.qp)(w))}}(0,p.gn)([n.Do],A.prototype,"editor",void 0),(0,p.gn)([P.Fl],A.prototype,"S",null),(0,p.gn)([P.Fl],A.prototype,"canvasMenu",null),(0,p.gn)([P.Fl],A.prototype,"nodeMenu",null);let x=n._Y.createComponent("ContextMenu",A,e=>{let{position:{x:t,y:i},getRef:n,onClose:o,onGenerateNodeClick:s}=e.props,a=e.editor.props.manager.getActiveNode()?e.nodeMenu:e.canvasMenu;return(0,r.jsx)(u,{className:"context-menu--ekX2k",style:{top:"".concat(i,"px"),left:"".concat(t,"px")},getRef:n,children:a.map((t,i)=>{let{children:n}=t;return(0,r.jsx)(f,{children:n.map(t=>(0,r.jsx)(C,{clickable:!0,label:t.label,extra:t.value,disabled:t.disabled,onClick:()=>{"AI_GENERATE_NODE"===t.exec?null==s||s():e.editor.props.manager.execCommand(t.exec),null==o||o()}},t.exec))},i)})})});var O=i(92660),M=i(62499),N=i(75372),D=i(48023),k=i(27534),_=i(20995),L=i(57131),z=i(83763),j={style:"style--lDIC3",button:"button--DGucV",open:"open--kcQeG",popoverContent:"popover-content--STQyN",header:"header--Mf3kg",title:"title--ZfTAy",row:"row--N7g2l",rowHeader:"row-header--jCswt",label:"label--hVhi3",rowContent:"row-content--CSDBl",skeletonList:"skeleton-list--KVP8g",skeletonItem:"skeleton-item--lMWjY",active:"active--VKWXf",colorList:"color-list--alDIM",colorItem:"color-item--d77d4",skeletonSelector:"skeleton-selector--FWzdV",arrow:"arrow--FLM8H",text:"text--SeIeu",skeletonPopoverContent:"skeleton-popover-content--lUDsy",item:"item--Tjkf0"},F=i(93724);class B extends n.PN{get S(){return S.S.Global.modules.MindMap.MindMapEditor.Style}get skeleton(){return z.qq.find(e=>e.id===this.skeletonId)}get skeletonRenderList(){let e=z.ci.find(e=>e.id===this.skeletonCategoryId);return e?z.qq.filter(t=>t.parentGroupIds.includes(e.id)):[]}onThemeChange(){let{colorId:e=F.Nx,skeletonId:t=F.u0}=this.props.theme||{};this.colorId=e,this.skeletonId=t,this.skeletonCategoryId=F.AI;let i=z.qq.find(e=>e.id===this.skeletonId);i&&(this.skeletonCategoryId=i.parentGroupIds[0])}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"editor",(0,n.qp)(w)),(0,l._)(this,"popoverOpen",!1),(0,l._)(this,"skeletonSelectorPopoverOpen",!1),(0,l._)(this,"colorId",F.Nx),(0,l._)(this,"skeletonId",F.u0),(0,l._)(this,"skeletonCategoryId",F.AI)}}(0,p.gn)([n.Do],B.prototype,"editor",void 0),(0,p.gn)([n.SB],B.prototype,"popoverOpen",void 0),(0,p.gn)([n.SB],B.prototype,"skeletonSelectorPopoverOpen",void 0),(0,p.gn)([n.SB],B.prototype,"colorId",void 0),(0,p.gn)([n.SB],B.prototype,"skeletonId",void 0),(0,p.gn)([n.SB],B.prototype,"skeletonCategoryId",void 0),(0,p.gn)([P.Fl],B.prototype,"S",null),(0,p.gn)([P.Fl],B.prototype,"skeleton",null),(0,p.gn)([P.Fl],B.prototype,"skeletonRenderList",null),(0,p.gn)([(0,n.YP)(e=>{var t,i;return[null===(t=e.props.theme)||void 0===t?void 0:t.colorId,null===(i=e.props.theme)||void 0===i?void 0:i.skeletonId]})],B.prototype,"onThemeChange",null);let U=n._Y.createComponent("Style",B,e=>(0,r.jsx)("div",{className:j.style,children:(0,r.jsx)(N.x,{trigger:"click",open:e.popoverOpen,content:(0,r.jsx)(W,{vm:e,...e.props}),onOpenChange:t=>{e.popoverOpen=t},children:(0,r.jsxs)("span",{className:s()(j.button,{[j.open]:e.popoverOpen}),children:[(0,r.jsx)(c.J,{name:"mindMapStyle",size:16}),e.S.style]})})})),W=(0,M.Pi)(function(e){let{vm:t}=e;return(0,r.jsxs)("div",{className:j.popoverContent,children:[(0,r.jsxs)("div",{className:j.header,children:[(0,r.jsx)("div",{className:j.title,children:t.S.style}),(0,r.jsx)(k.h,{iconName:"close",title:"",iconSize:18,onClick:()=>{t.popoverOpen=!1}})]}),(0,r.jsxs)("div",{className:j.row,children:[(0,r.jsxs)("div",{className:j.rowHeader,children:[(0,r.jsx)("div",{style:{marginInlineStart:"auto"},className:j.label,children:t.S.skeleton}),(0,r.jsx)(V,{vm:t})]}),(0,r.jsx)("div",{className:j.rowContent,children:(0,r.jsx)("div",{className:j.skeletonList,children:t.skeletonRenderList.map(e=>{let{icon:i,id:n}=e;return(0,r.jsx)("div",{className:s()(j.skeletonItem,{[j.active]:t.skeletonId===n}),onClick:()=>{t.editor.changeSkeleton(n)},children:(0,r.jsx)(c.J,{name:i,size:32})},i)})})})]}),(0,r.jsxs)("div",{className:j.row,children:[(0,r.jsx)("div",{className:j.rowHeader,children:(0,r.jsx)("div",{style:{marginInlineStart:"auto"},className:j.label,children:t.S.color})}),(0,r.jsx)("div",{className:j.rowContent,children:(0,r.jsx)("div",{className:j.colorList,children:z.Iy.map(e=>{let{id:i,colors:n}=e;return(0,r.jsx)("ul",{className:s()(j.colorItem,{[j.active]:t.colorId===i}),onClick:()=>{t.editor.changeColor(i)},children:n.map((e,t)=>(0,r.jsx)("li",{className:s()(j.color),style:{backgroundColor:e}},i+e+t))},i)})})})]})]})}),V=(0,M.Pi)(function(e){let{vm:t}=e;if(!t.skeleton)return null;let i=z.ci.find(e=>{let{id:i}=e;return t.skeleton.parentGroupIds.includes(i)});if(!i)return null;let{icon:n,label:o}=i;return(0,r.jsx)(N.x,{trigger:"click",closeAfterContentClick:!0,open:t.skeletonSelectorPopoverOpen,content:(0,r.jsx)(q,{vm:t}),onOpenChange:e=>{t.skeletonSelectorPopoverOpen=e},children:(0,r.jsxs)("div",{className:s()(j.skeletonSelector,{[j.open]:t.skeletonSelectorPopoverOpen}),children:[(0,r.jsx)(c.J,{name:n}),(0,r.jsx)("span",{className:j.text,children:o}),(0,r.jsx)(c.J,{name:O.UZ.arrowDown,className:s()(j.arrow,{[j.open]:t.skeletonSelectorPopoverOpen})})]})})}),q=(0,M.Pi)(function(e){let{vm:t}=e;return(0,r.jsx)("div",{className:j.skeletonPopoverContent,children:z.ci.map(e=>{let{id:i,icon:n,label:o}=e;return(0,r.jsxs)("div",{className:j.item,onClick:()=>{t.editor.changeSkeletonCategory(i)},children:[(0,r.jsx)(c.J,{name:n}),(0,r.jsx)("span",{children:o})]},n)})})});var H={controls:"controls--JlOVh",divider:"divider--lug3v",exportButton:"export-button--o2GHv",downloadOptions:"download-options--AVdLd",downloadOption:"download-option--OKsdE"},G=i(4461),K=i(93270),J=i(27324),Z=i(33381),Y=i(18245),Q=i(78923);class X extends n.PN{get S(){return S.S.Global.modules.MindMap.MindMapEditor.Controls}onViewCreate(){this.genQrcode()}onViewDestroy(){}zoomIn(){this.props.manager.enlarge()}zoomOut(){this.props.manager.narrow()}fitScreen(){this.props.manager.fitScreen()}async export(e){let t=this.props.manager.getData();if(!t){console.error("data is null");return}let i=t.data.text||"mindmap";if("png"===e||"xmind"===e){if(!Z.userController.isVipUser){Y.K.handleCreditsNotEnough({module:"genius_bot",source:"mind_map_export"});return}this.props.manager.updateConfig({addContentToFooter:()=>{}}),this.props.manager.export(e,i)}else{await this.qrcodeReadySource.waitReady();let e=(0,G.Q)(K.Z);this.props.manager.updateConfig({addContentToFooter:()=>{let t='\n          <img src="'.concat(this.qrcode,'" class="qr-code" />\n          <div class="content">\n            <div class="logo">\n              <img src="').concat(e,'" class="logo-icon" />\n                <span class="logo-text">').concat(y.m.getProductName(),'</span>\n            </div>\n            <p class="description">').concat(this.S.scanToLearn,"</p>\n          </div>\n          "),i=document.createElement("div");return i.innerHTML=t,i.className="container",{el:i,cssText:"\n          .container {\n            width: 100%;\n            display: flex;\n            align-items: center;\n            font-family: ".concat(Q.fontFamily,",\n          }\n          .qr-code {\n            width:50px;\n            height:50px;\n            margin-right: 6px;\n            margin-left: 16px;\n          }\n          .content {\n            flex-grow: 1;\n          }\n          .logo {\n            display:flex;\n            align-items:center;\n          }\n          .logo-icon {\n            width: 24px;\n            height: 24px;\n            background-color: #7c4dff;\n            border-radius: 50%;\n            margin-right: 10px;\n            position: relative;\n          }\n          .logo-text {\n            font-size: 24px;\n            font-weight: bold;\n          }\n          .description {\n            font-size: 14px;\n            color: #666;\n            margin: 0;\n          }\n          "),height:50}}}),this.props.manager.export("png",i)}T.M.createUserBehaviorEvent({eventName:E.$.UserEvent.ViewDownload,extData:{type:"pngWithWatermark"===e?"img_water":"png"===e?"img_nowater":"xmind"}})}async genQrcode(){let e=await J.toDataURL("https://monica.im?utm=mindmap");this.qrcode=e,this.qrcodeReadySource.markReady()}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"editor",(0,n.qp)(w)),(0,l._)(this,"qrcode",""),(0,l._)(this,"qrcodeReadySource",y.m.createReadySource())}}(0,p.gn)([n.Do],X.prototype,"editor",void 0),(0,p.gn)([P.Fl],X.prototype,"S",null);let $=n._Y.createComponent("Controls",X,e=>{let{onFullscreen:t,isFullscreen:i,showDownload:n,showFitScreen:o,showFullScreen:a=!0,className:l,theme:p,readonly:d}=e.props;return(0,r.jsxs)("div",{className:s()(H.controls,l),onClick:e=>{e.stopPropagation()},children:[!d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U,{theme:p}),(0,r.jsx)("div",{className:H.divider})]}),(0,r.jsx)(ee,{vm:e,title:e.S.zoomIn,iconName:O.UZ.lineOperationZoomIn,onClick:()=>{e.zoomIn()}}),(0,r.jsx)(ee,{vm:e,title:e.S.zoomOut,iconName:O.UZ.lineOperationZoomOut,onClick:()=>{e.zoomOut()}}),o&&(0,r.jsx)(ee,{vm:e,title:e.S.fitScreen,iconName:O.UZ.lineOperationFitScreen,onClick:()=>{e.fitScreen()}}),a&&(0,r.jsx)(ee,{vm:e,title:e.S.fullscreen,iconName:i?O.UZ.lineOperationFullscreenExit:O.UZ.lineOperationFullscreen,onClick:()=>{null==t||t()}}),n&&(0,r.jsx)("div",{className:H.divider}),n&&(0,r.jsx)(N.x,{content:(0,r.jsx)(et,{vm:e}),closeAfterContentClick:!0,trigger:"click",children:(0,r.jsx)("span",{style:{display:"flex"},children:(0,r.jsx)(D.u,{title:e.S.download,mouseLeaveDelay:0,children:(0,r.jsxs)("span",{className:H.exportButton,children:[(0,r.jsx)(c.J,{name:O.UZ.lineOperationDownload,size:16}),e.S.exportMindmap]})})})})]})}),ee=(0,M.Pi)(function(e){let{iconName:t,title:i,onClick:n,vm:o}=e;return(0,r.jsx)(k.h,{title:i,padding:4,iconName:t,color:"var(--theme-icon-secondary)",useParentContainer:o.props.useParentContainer,onClick:n})}),et=(0,M.Pi)(function(e){let{vm:t}=e;return(0,r.jsxs)(_.h,{className:H.downloadOptions,children:[(0,r.jsx)(L.X,{icon:"linePngWatermark",content:t.S.downloadPngWatermark,className:H.downloadOption,onClick:()=>{t.export("pngWithWatermark")}}),(0,r.jsx)(L.X,{icon:"linePng",content:t.S.downloadPng,className:H.downloadOption,onClick:()=>{t.export("png")}}),(0,r.jsx)(L.X,{icon:"xmind",content:t.S.exportXmind,className:H.downloadOption,onClick:()=>{t.export("xmind")}})]})});var ei={mindMapEditor:"mind-map-editor--oetsM",canvas:"canvas--JHce5",disableMouse:"disable-mouse--TSlN4",footer:"footer--XPmRY",controls:"controls--Xxovd",translate:"translate--osC39",languageSelect:"language-select--dCEQE"};class er extends n.PN{get S(){return S.S.Global.modules.MindMap.MindMapEditor.NodeToolbar}get insertNodeBtnDisabled(){return!this.props.node||this.props.node.isRoot||this.props.node.isGeneralization}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"someState",!0)}}(0,p.gn)([n.SB],er.prototype,"someState",void 0),(0,p.gn)([n.Fl],er.prototype,"S",null);let en=n._Y.createComponent("NodeToolbar",er,e=>{let{visible:t,position:i,node:n,onGenerateNodeClick:o,onMouseEnter:a,onMouseLeave:l,onDeleteNode:p,getRef:d,onAddChildNode:u,onAddSiblingNode:h,onEditNode:g}=e.props,f="var(--theme-icon-primary)";return(0,r.jsx)("div",{className:s()("node-toolbar--sc09c",{"hidden--MQ4FK":!t}),style:{left:"".concat(i.x,"px"),top:"".concat(i.y,"px")},onMouseEnter:a,onMouseLeave:l,ref:d,children:(0,r.jsxs)("div",{className:"inner--wto_7",children:[(0,r.jsx)(k.h,{title:e.S.deleteNode,iconName:O.UZ.lineOperationDelete,color:f,disabled:null==n?void 0:n.isRoot,onClick:p}),(0,r.jsx)(k.h,{title:e.S.editNode,iconName:O.UZ.lineOperationEdit,color:f,onClick:g}),(0,r.jsx)(k.h,{title:e.S.insertSiblingNode,iconName:O.UZ.lineEditorInsertSibling,color:f,disabled:e.insertNodeBtnDisabled,onClick:h}),(0,r.jsx)(k.h,{title:e.S.insertChildNode,iconName:O.UZ.lineEditorInsertChild,color:f,onClick:u}),(0,r.jsx)("span",{className:"divider--_1W52"}),(0,r.jsx)("span",{onClick:()=>{o()},className:"ai-trans--afY5b",children:(0,r.jsxs)("span",{className:"ai-trans-inner--Fr0EX",children:[(0,r.jsx)(c.J,{name:"aiGenerateNode"}),e.S.aiGenerateNode]})})]})})});class eo extends n.PN{get shortcuts(){let e=y.m.isMacOS(),t=e?"⌘":"Ctrl",i=e?"Return":"Enter";return[{type:this.S.nodeOperation,list:[{icon:"icontianjiazijiedian",name:this.S.insertChildNode,value:"Tab | Insert"},{icon:"iconjiedian",name:this.S.insertSiblingNode,value:i},{icon:"icondodeparent",name:this.S.insertParentNode,value:"Shift + Tab"},{icon:"iconshangyi",name:this.S.moveUpNode,value:"".concat(t," + ↑'")},{icon:"iconxiayi",name:this.S.moveDownNode,value:"".concat(t," + ↓")},{icon:"icongaikuozonglan",name:this.S.insertSummary,value:"".concat(t," + G")},{icon:"iconzhankai",name:this.S.expandUnExpandNode,value:"/"},{icon:"iconshanchu",name:this.S.deleteNode,value:"Delete | Backspace"},{icon:"iconshanchu",name:this.S.deleteCurrentNode,value:"Shift + Backspace"},{icon:"iconfuzhi",name:this.S.copyNode,value:"".concat(t," + C")},{icon:"iconjianqie",name:this.S.cutNode,value:"".concat(t," + X")},{icon:"iconniantie",name:this.S.pasteNode,value:"".concat(t," + V")},{icon:"iconbianji",name:this.S.editNode,value:"".concat(e?"fn + ":"","F2")},{icon:"iconhuanhang",name:this.S.textWrap,value:"Shift + ".concat(i)},{icon:"iconhoutui-shi",name:this.S.undo,value:"".concat(t," + Z")},{icon:"iconqianjin1",name:this.S.redo,value:"".concat(t," + Y")},{icon:"iconquanxuan",name:this.S.selectAll,value:"".concat(t," + A")},{icon:"iconquanxuan",name:this.S.multipleChoice,value:"Right click / ".concat(t," + Left click")},{icon:"iconzhengli",name:this.S.arrangeLayout,value:"".concat(t," + L")},{icon:"iconsousuo",name:this.S.searchAndReplace,value:"".concat(t," + F")}]},{type:this.S.canvasOperation,list:[{icon:"iconfangda",name:this.S.zoomIn,value:"".concat(t," + +")},{icon:"iconsuoxiao",name:this.S.zoomOut,value:"".concat(t," + -")},{icon:"iconfangda",name:this.S.zoomInOut,value:"".concat(t," + Mouse wheel")},{icon:"icondingwei",name:this.S.backRootNode,value:"".concat(t," + ").concat(i)},{icon:"iconquanping1",name:this.S.fitCanvas,value:"".concat(t," + i")}]},{type:this.S.outlineOperation,list:[{icon:"iconhuanhang",name:this.S.textWrapOutline,value:"Shift + ".concat(i)},{icon:"iconshanchu",name:this.S.deleteNodeOutline,value:"Delete"},{icon:"icontianjiazijiedian",name:this.S.insertChildNodeOutline,value:"Tab"},{icon:"iconjiedian",name:this.S.insertSiblingNodeOutline,value:i},{icon:"icondodeparent",name:this.S.moveUpOneLevel,value:"Shift + Tab"}]}]}get S(){return S.S.Global.modules.MindMap.MindMapEditor.ShortcutList}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0)}}(0,p.gn)([P.Fl],eo.prototype,"shortcuts",null),(0,p.gn)([P.Fl],eo.prototype,"S",null);let es=n._Y.createComponent("ShortcutList",eo,e=>{let t=(0,r.jsx)(u,{style:{maxHeight:"calc(100vh - 100px)"},children:e.shortcuts.map(e=>{let{type:t,list:i}=e;return(0,r.jsx)(f,{title:t,children:i.map(e=>{let{name:t,value:i}=e;return(0,r.jsx)(C,{label:t,extra:i},t)})},t)})});return(0,r.jsx)("div",{className:"shortcut-list--AJPNT",children:(0,r.jsx)(N.x,{content:t,trigger:"click",placement:"topRight",children:(0,r.jsx)("div",{className:"button--W6g_9",children:(0,r.jsx)(c.J,{name:"questionLine"})})})})}),ea=n._Y.createComponent("MindMapEditor",w,e=>{var t;let{controlsProps:i,disableMouse:n,readonly:o,noControls:l,manager:p,onGenerateNodeClick:d}=e.props;return(0,r.jsxs)("div",{className:s()(ei.mindMapEditor,{[ei.disableMouse]:n}),onClick:()=>{if(n){var e;null==i||null===(e=i.onFullscreen)||void 0===e||e.call(i)}},children:[(0,r.jsx)("div",{className:ei.canvas,ref:t=>{e.canvas=t}}),(0,r.jsxs)("div",{className:ei.footer,children:[!o&&(0,r.jsx)("div",{className:ei.translate,children:(0,r.jsx)(a.S,{scene:"functional",dropdownLabelClassName:ei.languageSelect,icon:(0,r.jsx)(c.J,{name:"translate",size:16,color:"currentColor"}),value:e.lang,onChange:t=>{var i,r;null===(i=(r=e.props).onTranslate)||void 0===i||i.call(r,t||"auto")}})}),!l&&(0,r.jsx)($,{manager:p,...i,theme:e.props.theme,className:s()(ei.controls,null==i?void 0:i.className)}),!o&&(0,r.jsx)(es,{}),!o&&(0,r.jsx)(en,{visible:e.nodeToolbarVisible,position:e.nodeToolbarPosition,node:null!==(t=e.props.manager.getToolbarActiveNode())&&void 0!==t?t:void 0,getRef:t=>{e.nodeToolbarEl=t},onGenerateNodeClick:()=>{null==d||d(e.props.manager.getToolbarActiveNode()),e.closeNodeToolbar()},onDeleteNode:()=>{e.props.manager.execCommand("REMOVE_NODE"),e.closeNodeToolbar()},onEditNode:()=>{e.props.manager.editNode(e.props.manager.getToolbarActiveNode()),e.closeNodeToolbar()},onAddChildNode:()=>{e.props.manager.execCommand("INSERT_CHILD_NODE"),e.closeNodeToolbar()},onAddSiblingNode:()=>{e.props.manager.execCommand("INSERT_NODE"),e.closeNodeToolbar()}}),!o&&e.contextMenuVisible&&(0,r.jsx)(x,{position:e.contextMenuPosition,onClose:()=>{e.closeContextMenu()},getRef:t=>{e.contextMenuEl=t},onGenerateNodeClick:()=>{null==d||d(e.props.manager.getActiveNode())}})]})]})})},93724:function(e,t,i){"use strict";i.d(t,{nC:function(){return I},Nx:function(){return P},AI:function(){return y},u0:function(){return R}});var r,n=i(66084),o=i(88575),s=i(88882),a=i(32004),c=i(92235),l=i(76469),p=i(73047),d=i(87393),u=i(11502),h=i(44016);let g={UP_NODE:"UP_NODE",DOWN_NODE:"DOWN_NODE",MOVE_NODE_TO:"MOVE_NODE_TO"};class f{async initMindMapConfig(){let[e,t,r,n,o]=await Promise.all([(await Promise.all([i.e(5048),i.e(2964),i.e(687),i.e(7575)]).then(i.bind(i,17575))).default,(await Promise.all([i.e(5048),i.e(2964),i.e(4294)]).then(i.bind(i,4294))).default,(await Promise.all([i.e(5048),i.e(5273),i.e(2964),i.e(6457)]).then(i.bind(i,36457))).default,(await Promise.all([i.e(5048),i.e(2964),i.e(687),i.e(8990)]).then(i.bind(i,98990))).default,(await Promise.resolve().then(i.bind(i,78923))).default]);return e.usePlugin(t),e.usePlugin(r),e.usePlugin(n),e.defineTheme(o.darkName,o.darkConfig),e.defineTheme(o.lightName,o.lightConfig),{MindMap:e,defaultTheme:o}}}let m=new f;var C=i(83763);let S=o.c.getLogger("MindMap"),y=C.ci[0].id,P=C.Iy[0].id,R=null===(r=C.qq.find(e=>e.parentGroupIds.includes(C.ci.find(e=>e.id===y).id)))||void 0===r?void 0:r.id;class I{async init(e){let t;let{MindMap:i,defaultTheme:r}=await m.initMindMapConfig(),{readonly:n=!1,theme:o,container:c}=e;this.defaultTheme=o;let l=()=>d.C.isDark?r.darkName:r.lightName,u=new i({el:c,theme:l(),data:this.data,readonly:n,initRootNodePosition:["5%","center"],defaultInsertSecondLevelNodeText:s.S.Global.modules.MindMap.MindMapEditor.mainTopic,defaultInsertBelowSecondLevelNodeText:s.S.Global.modules.MindMap.MindMapEditor.subTopic,scaleRatio:.07,fitPadding:20,fit:!0});this.instance=u,this.initContextMenu(),this.initNodeToolbar(),this.setReadOnly(n),this.readySource.markReady(),this.data&&this.initDataAfterFitCenter(),a.f.getProxy(this).add((0,p.U5)(()=>d.C.isDark,()=>{let e=l();this.instance.setTheme(e)}));let h=!1,g=!1;u.on("data_change_detail",e=>{e.forEach(t=>{if("create"===t.action){g=!0;let e=t.data.data.uid;if(e){var i;let t=u.renderer.findNodeByUid(e);if(null==t?void 0:null===(i=t.parent)||void 0===i?void 0:i.isRoot){let e=(t.parent.children||[]).findIndex(e=>e.nodeData.data.uid===t.nodeData.data.uid);if(-1!==e){let{color:i,skeleton:r}=this.getSkeletonAndColor({colorId:this.colorId,skeletonId:this.skeletonId});if(!i||!r)return;for(let[n,o]of Object.entries({...r.secondNodeStyle,...this.genNodeStyle({nodeIndex:e,colors:i.colors,colorAcceptProperty:r.colorAcceptProperty,isRoot:!1})}))t.setStyle(n,o)}}}}this.emitter.emit("dataChangeDetail",e)})}),u.on("data_change",e=>{g=!0,b(e,t)||(this.emitter.emit("dataChange",e),t=e)}),u.on("layout_change",()=>{h=!0}),u.on("node_tree_render_end",()=>{(this.isReadOnly||h)&&(h=!1,this.fitCenter()),g&&(g=!1,this.loadTheme({colorId:this.colorId,skeletonId:this.skeletonId}))})}destroy(){var e;null===(e=this.instance)||void 0===e||e.destroy()}async setData(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(b(this.getData(),e)){S.warn("same data");return}if(this.instance)try{this.data||this.initDataAfterFitCenter(),this.data?this.instance.updateData(e):this.instance.setData(e),t&&this.fitCenter()}catch(e){S.error(e)}this.data=e}forceRender(e){var t;null===(t=this.instance)||void 0===t||t.render(e)}getActiveNode(){return this.activeNode}getToolbarActiveNode(){return this.toolbarActiveNode}getData(){var e;return null===(e=this.instance)||void 0===e?void 0:e.getData(!1)}fitScreen(){this.instance&&this.instance.view.fit(()=>this.instance.draw.node.getBoundingClientRect(),!1,20)}enlarge(){var e;null===(e=this.instance)||void 0===e||e.view.enlarge(void 0,void 0,!1)}narrow(){var e;null===(e=this.instance)||void 0===e||e.view.narrow(void 0,void 0,!1)}resize(){var e;null===(e=this.instance)||void 0===e||e.resize()}copy(){var e;null===(e=this.instance)||void 0===e||e.renderer.copy()}cut(){var e;null===(e=this.instance)||void 0===e||e.renderer.cut()}paste(){var e;null===(e=this.instance)||void 0===e||e.renderer.paste()}setRootNodeCenter(){var e;null===(e=this.instance)||void 0===e||e.renderer.setRootNodeCenter()}execCommand(e){switch(e){case"COPY_NODE":this.copy();break;case"CUT_NODE":this.cut();break;case"PASTE_NODE":this.paste();break;case"RETURN_CENTER":this.setRootNodeCenter();break;case"FIT_CANVAS":this.fitScreen();break;default:var t;null===(t=this.instance)||void 0===t||t.execCommand(e)}[g.MOVE_NODE_TO,g.UP_NODE,g.DOWN_NODE].includes(e)&&u.M.createUserBehaviorEvent({eventName:h.$.UserEvent.WebEdit,extData:{type:"move"}})}setReadOnly(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isReadOnly=t,null===(e=this.instance)||void 0===e||e.setMode(t?"readonly":"edit")}updateConfig(e){var t;null===(t=this.instance)||void 0===t||t.updateConfig(e)}export(e,t){var i;null===(i=this.instance)||void 0===i||i.export(e,!0,t)}changeSkeletonCategory(e){this.skeletonCategoryId=e;let t=C.ci.find(t=>t.id===e);if(t){var i;let e=null===(i=C.qq.find(e=>e.parentGroupIds.includes(t.id)))||void 0===i?void 0:i.id;e&&this.changeSkeleton(e)}}changeSkeleton(e){if(this.skeletonId===e)return;let t=C.qq.find(t=>t.id===e);if(t){var i;this.skeletonCategoryId=(null===(i=C.ci.find(e=>t.parentGroupIds.includes(e.id)))||void 0===i?void 0:i.id)||this.skeletonCategoryId}this.loadTheme({colorId:this.colorId,skeletonId:e})}changeColor(e){this.colorId!==e&&this.loadTheme({colorId:e,skeletonId:this.skeletonId})}closeContextMenu(){this.activeNode=null,this.emitter.emit("contextMenuVisibilityChange",{visible:!1})}closeNodeToolbar(){this.toolbarActiveNode=null,this.emitter.emit("nodeToolbarVisibilityChange",{visible:!1})}deleteNode(e){let t=Array.isArray(e)?e:[e];this.instance.renderer.removeNode(t)}editNode(e){this.instance.renderer.activeNodeList=[e],this.instance.renderer.textEdit.show({node:e,isFromKeyDown:!0})}insertChildNode(e){this.instance.renderer.insertChildNode(!0,[e])}insertSiblingNode(e){this.instance.renderer.insertNode(!0,[e])}loadTheme(e){var t,i,r;if(!this.instance)return;this.colorId=e.colorId||this.colorId,this.skeletonId=e.skeletonId||this.skeletonId,this.skeletonCategoryId=(null===(t=C.qq.find(e=>e.id===this.skeletonId))||void 0===t?void 0:t.parentGroupIds[0])||this.skeletonCategoryId;let{colorId:n,skeletonId:o}=e,{color:s,skeleton:a}=this.getSkeletonAndColor({colorId:n,skeletonId:o});if(!a||!s)return;let{lineStyle:c,rootNodeStyle:l,secondNodeStyle:p,colorAcceptProperty:d,category:u}=a;this.instance.getData(!0).layout!==u&&this.instance.setLayout(u),this.instance.getThemeConfig(void 0).lineStyle!==c&&this.instance.setThemeConfig({...this.instance.getThemeConfig(void 0),lineStyle:c});let h=this.instance.renderer.renderTree;for(let[e,t]of Object.entries({...l,...this.genNodeStyle({nodeIndex:0,colors:s.colors,colorAcceptProperty:d,isRoot:!0}),shape:(null==l?void 0:l.shape)||"rectangle"}))(null==h?void 0:null===(i=h._node)||void 0===i?void 0:i.getStyle(e))!==t&&(null==h||null===(r=h._node)||void 0===r||r.setStyle(e,t));((null==h?void 0:h.children)||[]).forEach((e,t)=>{for(let[i,r]of Object.entries({...p,...this.genNodeStyle({nodeIndex:t,colors:s.colors,colorAcceptProperty:d}),shape:(null==p?void 0:p.shape)||"rectangle"}))e._node.getStyle(i)!==r&&e._node.setStyle(i,r)})}async initNodeToolbar(){await this.ensureInstance();let e=this.instance,t=(e,t)=>{this.toolbarTimer&&clearTimeout(this.toolbarTimer),this.toolbarActiveNode=e;let i=t.getBoundingClientRect();this.emitter.emit("nodeToolbarVisibilityChange",{visible:!0,pos:{x:i.left+i.width/2,y:i.top}})};e.on("node_active",e=>{var i,r,n;null!=e&&null!==(r=e.renderer)&&void 0!==r&&null!==(i=r.textEdit)&&void 0!==i&&i.showTextEdit||this.activeNode&&this.activeNode===e||(e?t(e,null==e?void 0:null===(n=e.group)||void 0===n?void 0:n.node):(this.toolbarActiveNode=null,this.emitter.emit("nodeToolbarVisibilityChange",{visible:!1})))});let i=null;e.on("translate",()=>{this.emitter.emit("nodeToolbarVisibilityChange",{visible:!1}),i&&clearTimeout(i),i=setTimeout(()=>{if(this.toolbarActiveNode){var e,i;let r=null===(i=this.toolbarActiveNode)||void 0===i?void 0:null===(e=i.group)||void 0===e?void 0:e.node;t(this.toolbarActiveNode,r)}},600)}),e.on("hide_text_edit",(e,i,r)=>{this.toolbarActiveNode===r&&e&&t(this.toolbarActiveNode,e)}),e.on("before_show_text_edit",()=>{this.emitter.emit("nodeToolbarVisibilityChange",{visible:!1})})}async initContextMenu(){await this.ensureInstance();let e=this.instance,t=0,i=0,r=!1,n=()=>{this.closeContextMenu()},o=e=>{if(this.isReadOnly)return;let{x:t,y:i}=e;this.emitter.emit("contextMenuVisibilityChange",{visible:!0,pos:{x:t,y:i}})};e.on("node_contextmenu",(e,t)=>{this.activeNode=t,o({x:e.clientX+10,y:e.clientY+10})}),e.on("svg_mousedown",e=>{3===e.which&&(t=e.clientX,i=e.clientY,r=!0)}),e.on("mouseup",e=>{if(r){if(r=!1,Math.abs(t-e.clientX)>3||Math.abs(i-e.clientY)>3){n();return}this.activeNode=null,o({x:e.clientX+10,y:e.clientY+10})}}),e.on("node_click",n),e.on("draw_click",n),e.on("expand_btn_click",n)}getSkeletonAndColor(e){let{colorId:t,skeletonId:i}=e;return{skeleton:C.qq.find(e=>e.id===i),color:C.Iy.find(e=>e.id===t)}}genNodeStyle(e){let{colors:t,colorAcceptProperty:i,isRoot:r}=e,n=t.length,o=e.nodeIndex;o>n-2&&(o%=t.slice(1).length-1);let s=t[o],a={lineColor:s,borderColor:"",borderWidth:0};"fill"===i||"fillRoot"===i&&r?a.fillColor=s:(a.fillColor="#fff",a.borderColor=s,a.borderWidth=2);let c=function(e){let t=function(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(function(e){if((e=e.replace(/\s/g,"")).startsWith("#"))return 4===e.length&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),e;if(e.startsWith("rgb")){var t,i,r;let n=e.match(/\d+/g);return t=parseInt(n[0]),i=parseInt(n[1]),r=parseInt(n[2]),"#".concat((16777216+(t<<16)+(i<<8)+r).toString(16).slice(1))}throw Error("Unsupported color format")}(e));return(.299*t.r+.587*t.g+.114*t.b)/255>.8?"#000000":"#FFFFFF"}(a.fillColor);return a.color=c,a}async fitCenter(){await this.ensureInstance(),this.instance.resize(),this.fitScreen()}async ensureInstance(){this.instance||await this.readySource.waitReady()}initDataAfterFitCenter(){if(!this.instance)return;let e=c.m.createReadySource();this.instance.on("node_tree_render_end",()=>{e.markReady()}),e.waitReady().then(()=>{this.loadTheme({colorId:this.colorId,skeletonId:this.skeletonId,...this.defaultTheme}),this.fitCenter(),setTimeout(()=>{this.fitCenter()},40)})}constructor(){(0,n._)(this,"emitter",new l.v),(0,n._)(this,"skeletonCategoryId",y),(0,n._)(this,"skeletonId",R),(0,n._)(this,"colorId",P),(0,n._)(this,"data",void 0),(0,n._)(this,"instance",void 0),(0,n._)(this,"readySource",c.m.createReadySource()),(0,n._)(this,"activeNode",null),(0,n._)(this,"toolbarActiveNode",null),(0,n._)(this,"isReadOnly",!1),(0,n._)(this,"defaultTheme",void 0),(0,n._)(this,"toolbarTimer",null)}}function b(e,t){var i,r,n,o;if(!e&&!t)return!0;if(!e||!t||(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.text)!==(null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.text)||((null===(n=e.children)||void 0===n?void 0:n.length)||0)!==((null===(o=t.children)||void 0===o?void 0:o.length)||0))return!1;if(e.children&&t.children){for(let i=0;i<e.children.length;i++)if(!b(e.children[i],t.children[i]))return!1}return!0}},78923:function(e,t,i){"use strict";i.r(t),i.d(t,{darkThemeName:function(){return a},fontFamily:function(){return c},lightThemeName:function(){return s}});var r=i(74024),n=i(2525),o=i(36167);let s="monica-default-light",a="monica-default-dark",c="-apple-system, 'system-ui', 'Helvetica Neue', Tahoma, 'PingFang SC',\n    'Microsoft Yahei', Arial, 'Hiragino Sans GB', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',\n    'Segoe UI Symbol', 'Noto Color Emoji'",l=e=>(0,r.Z)((0,n.Z)(o.Z),{backgroundColor:e.drawBackgroundColor,lineColor:e.drawLineColor,associativeLineColor:"#E27300",associativeLineActiveColor:"rgba(104, 65, 234, 1)",generalizationLineColor:"rgba(30, 111, 255, 1)",showLineMarker:!1,lineStyle:"curve",rootLineKeepSameInCurve:!0,rootLineStartPositionKeepSameInCurve:!0,associativeLineTextFontFamily:c,paddingX:15,paddingY:5,root:{fillColor:"rgba(104, 65, 234, 1)",borderWidth:0,paddingX:16,paddingY:8,borderRadius:10,fontSize:24,lineHeight:1.5,fontWeight:600,fontFamily:c},second:{fontSize:18,color:"#FFFFFF",borderWidth:0,paddingY:8,borderRadius:8,fillColor:"#000000",fontWeight:600,fontFamily:c},node:{paddingY:6,fontSize:16,borderWidth:0,color:e.nodeColor,fontFamily:c},generalization:{fontFamily:c}});t.default={lightConfig:l({drawBackgroundColor:"#FFFFFF",drawLineColor:"#6841ea",nodeColor:"rgb(30, 53, 86)"}),lightName:s,darkConfig:l({drawBackgroundColor:"#000",drawLineColor:"#7f58fd",nodeColor:"rgb(100, 110, 130)"}),darkName:a}},83763:function(e,t,i){"use strict";i.d(t,{Iy:function(){return n},ci:function(){return d},qq:function(){return p}});var r=i(88882);let n=[{id:"color1",colors:["#191959","#4A51D9","#8BB5FF","#FF7B31","#FFABAA","#4A96D9"]},{id:"color2",colors:["#6B3747","#F9633F","#35C290","#7FC0F8","#E1E1D5","#85C1D3"]},{id:"color3",colors:["#2C2D30","#7AC0FF","#E88BFF","#FFA88B","#BBFFB0","#FFF0B1"]},{id:"color4",colors:["#009988","#C9DD00","#FF9100","#FF2725","#3C51BC","#0099FA"]},{id:"color5",colors:["#1A2C1B","#06592F","#626D46","#40955B","#B7AD8D","#D7D9C1"]},{id:"color6",colors:["#413F57","#D12D48","#EEC900","#EEC900","#524AA0","#005BA5"]}],o={LOGICAL_STRUCTURE:"logicalStructure",LOGICAL_STRUCTURE_LEFT:"logicalStructureLeft",MIND_MAP:"mindMap",ORGANIZATION_STRUCTURE:"organizationStructure",CATALOG_ORGANIZATION:"catalogOrganization",TIMELINE:"timeline",FISHBONE:"fishbone",VERTICAL_TIMELINE:"verticalTimeline"},s={LOGIC:"logic",LOGIC_LEFT:"logicLeft",MIND_MAP:"mindMap",ORGANIZE:"organize",CATALOG:"catalog",TIMELINE:"timeline",TIMELINE_VERTICAL:"timelineVertical",FISH:"fish"},a={paddingX:16,paddingY:8},c={...a,shape:"roundedRectangle"},l={...a,shape:"circle"},p=[{id:"logic1",icon:"lineEditorLogicIcon1",parentGroupIds:[s.LOGIC],category:o.LOGICAL_STRUCTURE,lineStyle:"curve",colorAcceptProperty:"fill"},{id:"logic2",icon:"lineEditorLogicIcon2",parentGroupIds:[s.LOGIC],category:o.LOGICAL_STRUCTURE,lineStyle:"straight",colorAcceptProperty:"fill"},{id:"logic3",icon:"lineEditorLogicIcon3",parentGroupIds:[s.LOGIC],category:o.LOGICAL_STRUCTURE,lineStyle:"direct",colorAcceptProperty:"fill"},{id:"logic4",icon:"lineEditorLogicIcon4",parentGroupIds:[s.LOGIC_LEFT],category:o.LOGICAL_STRUCTURE_LEFT,lineStyle:"curve",colorAcceptProperty:"fill"},{id:"logic5",icon:"lineEditorLogicIcon5",parentGroupIds:[s.LOGIC_LEFT],category:o.LOGICAL_STRUCTURE_LEFT,lineStyle:"straight",colorAcceptProperty:"fill"},{id:"logic6",icon:"lineEditorLogicIcon6",parentGroupIds:[s.LOGIC_LEFT],category:o.LOGICAL_STRUCTURE_LEFT,lineStyle:"direct",colorAcceptProperty:"fill"},{id:"mindMap1",icon:"lineEditorMindMapIcon1",parentGroupIds:[s.MIND_MAP],category:o.MIND_MAP,lineStyle:"curve",colorAcceptProperty:"fill"},{id:"mindMap2",icon:"lineEditorMindMapIcon2",parentGroupIds:[s.MIND_MAP],category:o.MIND_MAP,lineStyle:"straight",colorAcceptProperty:"fill"},{id:"mindMap3",icon:"lineEditorMindMapIcon3",parentGroupIds:[s.MIND_MAP],category:o.MIND_MAP,lineStyle:"straight",colorAcceptProperty:"ghost",rootNodeStyle:a},{id:"mindMap4",icon:"lineEditorMindMapIcon4",parentGroupIds:[s.MIND_MAP],category:o.MIND_MAP,lineStyle:"curve",colorAcceptProperty:"fill",rootNodeStyle:c,secondNodeStyle:l},{id:"mindMap5",icon:"lineEditorMindMapIcon5",parentGroupIds:[s.MIND_MAP],category:o.MIND_MAP,lineStyle:"straight",colorAcceptProperty:"fillRoot"},{id:"mindMap6",icon:"lineEditorMindMapIcon6",parentGroupIds:[s.MIND_MAP],category:o.MIND_MAP,lineStyle:"direct",colorAcceptProperty:"fill"},{id:"organize1",icon:"lineEditorOrganizeIcon1",parentGroupIds:[s.ORGANIZE],category:o.ORGANIZATION_STRUCTURE,lineStyle:"straight",colorAcceptProperty:"fill"},{id:"organize2",icon:"lineEditorOrganizeIcon2",parentGroupIds:[s.ORGANIZE],category:o.ORGANIZATION_STRUCTURE,lineStyle:"direct",colorAcceptProperty:"fill"},{id:"catalog1",icon:"lineEditorCatalogIcon1",category:o.CATALOG_ORGANIZATION,lineStyle:"curve",colorAcceptProperty:"ghost",parentGroupIds:[s.CATALOG]},{id:"catalog2",icon:"lineEditorCatalogIcon2",parentGroupIds:[s.CATALOG],category:o.CATALOG_ORGANIZATION,lineStyle:"direct",colorAcceptProperty:"fill"},{id:"timeline1",icon:"lineEditorTimelineIcon1",parentGroupIds:[s.TIMELINE],category:o.TIMELINE,lineStyle:"direct",colorAcceptProperty:"ghost"},{id:"timeline2",icon:"lineEditorTimelineIcon2",parentGroupIds:[s.TIMELINE],category:o.TIMELINE,lineStyle:"direct",colorAcceptProperty:"fillRoot",rootNodeStyle:c,secondNodeStyle:l},{id:"timeline3",icon:"lineEditorTimelineIcon3",parentGroupIds:[s.TIMELINE],category:o.TIMELINE,lineStyle:"direct",colorAcceptProperty:"fill",rootNodeStyle:l,secondNodeStyle:c},{id:"timelineVertical1",icon:"lineEditorTimelineIcon4",parentGroupIds:[s.TIMELINE_VERTICAL],category:o.VERTICAL_TIMELINE,lineStyle:"curve",colorAcceptProperty:"ghost"},{id:"timelineVertical2",icon:"lineEditorTimelineIcon5",parentGroupIds:[s.TIMELINE_VERTICAL],category:o.VERTICAL_TIMELINE,lineStyle:"curve",colorAcceptProperty:"fill",secondNodeStyle:l},{id:"timelineVertical3",icon:"lineEditorTimelineIcon6",parentGroupIds:[s.TIMELINE_VERTICAL],category:o.VERTICAL_TIMELINE,lineStyle:"curve",colorAcceptProperty:"fill",rootNodeStyle:l,secondNodeStyle:c},{id:"fish1",icon:"lineEditorFishIcon1",parentGroupIds:[s.FISH],category:o.FISHBONE,colorAcceptProperty:"ghost"},{id:"fish2",icon:"lineEditorFishIcon2",parentGroupIds:[s.FISH],category:o.FISHBONE,colorAcceptProperty:"fill"}],d=[{id:s.LOGIC,icon:"lineEditorLogic",get label(){return r.S.Global.modules.MindMap.MindMapEditor.Style.logicalStructure}},{id:s.LOGIC_LEFT,icon:"lineEditorLogicLeft",get label(){return r.S.Global.modules.MindMap.MindMapEditor.Style.logicalStructureLeft}},{id:s.MIND_MAP,icon:"lineEditorMindMap",get label(){return r.S.Global.modules.MindMap.MindMapEditor.Style.mindMap}},{id:s.ORGANIZE,icon:"lineEditorOrganize",get label(){return r.S.Global.modules.MindMap.MindMapEditor.Style.organizationStructure}},{id:s.CATALOG,icon:"lineEditorCatalog",get label(){return r.S.Global.modules.MindMap.MindMapEditor.Style.catalogOrganization}},{id:s.TIMELINE,icon:"lineEditorTimeline",get label(){return r.S.Global.modules.MindMap.MindMapEditor.Style.timeline}},{id:s.TIMELINE_VERTICAL,icon:"lineEditorTimelineVertical",get label(){return r.S.Global.modules.MindMap.MindMapEditor.Style.verticalTimeline}},{id:s.FISH,icon:"lineEditorFish",get label(){return r.S.Global.modules.MindMap.MindMapEditor.Style.fishbone}}]},44016:function(e,t,i){"use strict";var r,n,o,s;i.d(t,{$:function(){return r}}),(o=(n=r||(r={})).UserEvent||(n.UserEvent={})).GeneratorShow="mindmap_generate_show",o.GeneratorClick="mindmap_generate_click",o.ViewShow="mindmap_view_show",o.ViewDownload="mindmap_view_download",o.ViewEdit="mindmap_view_edit",o.WebShow="mindmap_web_show",o.WebGenerateClick="mindmap_web_generate_click",o.WebGenerateSuccess="mindmap_web_generate_success",o.WebGenerateFail="mindmap_web_generate_fail",o.WebEdit="mindmap_web_edit",(s=n.UserEventSource||(n.UserEventSource={})).WebSummary="web_summary",s.ReadSummary="read_summary",s.YTBSummary="youtube_summary",s.SearchEnhance="search_enhance",s.ChatBarGenerate="chatbar_generate",s.AudioToText="audio_to_text"},57131:function(e,t,i){"use strict";i.d(t,{X:function(){return u}});var r=i(71576),n=i(34491),o=i(46731),s=i(78716),a=i.n(s);i(75087);var c={dropdownMenuItem:"dropdown-menu-item--F34KK",menuItemIcon:"menu-item-icon--byfJ4",menuItemContent:"menu-item-content--hWHTw",menuItemDescription:"menu-item-description--HG2nl",active:"active--mgqvY"},l=i(66084),p=i(52921);class d extends n.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"someState",!0)}}(0,p.gn)([n.SB],d.prototype,"someState",void 0);let u=n._Y.createComponent("DropdownMenuItem",d,e=>{let{content:t,icon:i,isActive:n,onClick:s,description:l,iconSize:p=16,className:d}=e.props;return(0,r.jsxs)("div",{className:a()(c.dropdownMenuItem,{[c.active]:n},d),onClick:()=>{null==s||s()},children:[i&&(0,r.jsx)("span",{className:c.menuItemIcon,children:"string"==typeof i?(0,r.jsx)(o.J,{name:i,color:"currentColor",size:p}):i}),(0,r.jsxs)("span",{className:c.menuItemContent,children:[t,l&&(0,r.jsxs)("span",{className:c.menuItemDescription,children:[" ",l]})]})]})})},94987:function(e,t,i){"use strict";i.d(t,{t:function(){return A}});var r=i(71576),n=i(34491),o=i(37231),s=i(5857),a=i(68104),c=i(82005),l=i(62499),p=i(58812),d=i(66084);class u extends n.PN{constructor(...e){super(...e),(0,d._)(this,"props",void 0)}}var h=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.09095 12.8909C4.85664 13.1252 4.47674 13.1252 4.24243 12.8909L1.57576 10.2242C1.34145 9.9899 1.34145 9.61 1.57576 9.37569L4.24243 6.70902C4.47674 6.47471 4.85664 6.47471 5.09095 6.70902C5.32527 6.94334 5.32527 7.32323 5.09095 7.55755L3.44855 9.19995H11C11.4742 9.19995 11.7997 9.19963 12.0535 9.18231C12.3019 9.16537 12.4373 9.13417 12.5358 9.09338C12.8788 8.95129 13.1514 8.67875 13.2935 8.33571C13.3342 8.23723 13.3654 8.10178 13.3824 7.85342C13.3997 7.59967 13.4 7.2741 13.4 6.79995C13.4 6.3258 13.3997 6.00024 13.3824 5.74648C13.3654 5.49812 13.3342 5.36267 13.2935 5.26419C13.1514 4.92115 12.8788 4.64861 12.5358 4.50652C12.4373 4.46573 12.3019 4.43454 12.0535 4.41759C11.7997 4.40028 11.4742 4.39995 11 4.39995H8.00002C7.66865 4.39995 7.40002 4.13132 7.40002 3.79995C7.40002 3.46858 7.66865 3.19995 8.00002 3.19995H11.0209C11.4691 3.19995 11.8357 3.19994 12.1352 3.22037C12.4446 3.24149 12.7259 3.28641 12.995 3.39786C13.6321 3.66175 14.1382 4.1679 14.4021 4.80497C14.5136 5.07404 14.5585 5.35533 14.5796 5.6648C14.6 5.96424 14.6 6.33086 14.6 6.7791V6.8208C14.6 7.26904 14.6 7.63566 14.5796 7.93511C14.5585 8.24457 14.5136 8.52586 14.4021 8.79493C14.1382 9.432 13.6321 9.93815 12.995 10.202C12.7259 10.3135 12.4446 10.3584 12.1352 10.3795C11.8357 10.4 11.4691 10.4 11.0209 10.4H3.44855L5.09095 12.0424C5.32527 12.2767 5.32527 12.6566 5.09095 12.8909Z\\" fill=\\"#868692\\"/>\\n\\n","viewBox":"0 0 16 16"}');let g=n._Y.createComponent("EnterIcon",u,e=>(0,r.jsx)(p.s,{...e.props,name:"EnterIcon",iconData:h}));var f={translationGlossaryCrudDialog:"translation-glossary-crud-dialog--Qvllz",title:"title--QegUM",form:"form--rlolW",formItem:"form-item--fJwQP",footer:"footer--FzDBp",btnGroups:"btn-groups--kaCIi",btn:"btn--B7hjK"},m=i(52921),C=i(88882),S=i(92235),y=i(15851),P=i(79494),R=i(7893);class I extends n.PN{get disabled(){return!this.sourceText.trim()||!this.targetText.trim()}get glossary(){return P.translationGlossaryController.glossaryList}get S(){return C.S.Global.controllers.translationGlossaryController}focusTargetTextInput(){this.targetTextInputEl&&this.sourceText.trim()&&this.targetTextInputEl.focus()}async addOrUpdateTermAndNext(){var e;this.disabled||(this.scene="next",await this.addOrUpdateTerm(()=>{this.sourceText="",this.targetText=""}),null===(e=this.sourceTextInputEl)||void 0===e||e.focus())}async addOrUpdateTermAndDone(e){this.scene="done",await this.addOrUpdateTerm(e)}onViewCreate(){this.props.term&&(this.sourceText=this.props.term.sourceText,this.targetText=this.props.term.targetText)}onViewDestroy(){this.sourceTextInputEl=null,this.targetTextInputEl=null}async addOrUpdateTerm(e){if(!this.loading){this.loading=!0;try{this.props.term?(await R.d.editTerm({uid:this.props.term.uid,sourceText:this.sourceText,targetText:this.targetText}),y.M.success(this.S.updated,this.props.insertTarget)):(await R.d.addTerm({sourceText:this.sourceText,targetText:this.targetText}),y.M.success(this.S.added,this.props.insertTarget)),null==e||e()}catch(e){y.M.error(S.m.formatErrorMsg(e))}this.loading=!1}}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"sourceText",""),(0,d._)(this,"targetText",""),(0,d._)(this,"loading",!1),(0,d._)(this,"scene","next"),(0,d._)(this,"sourceTextInputEl",null),(0,d._)(this,"targetTextInputEl",null)}}(0,m.gn)([n.SB],I.prototype,"sourceText",void 0),(0,m.gn)([n.SB],I.prototype,"targetText",void 0),(0,m.gn)([n.SB],I.prototype,"loading",void 0),(0,m.gn)([n.SB],I.prototype,"scene",void 0),(0,m.gn)([n.Fl],I.prototype,"disabled",null),(0,m.gn)([n.Fl],I.prototype,"glossary",null),(0,m.gn)([n.Fl],I.prototype,"S",null);let b=(0,l.Pi)(function(e){let{vm:t}=e;return(0,r.jsx)("div",{className:f.title,children:t.props.term?t.S.editTerm:t.S.addTerm})}),T=(0,l.Pi)(function(e){let{vm:t}=e,i=!t.props.term;return(0,r.jsxs)("div",{className:f.form,children:[(0,r.jsxs)("div",{className:f.formItem,children:[(0,r.jsx)("label",{children:t.S.originText}),(0,r.jsx)(o.I,{size:"middle",value:t.sourceText,onChange:e=>{t.sourceText=e},placeholder:t.S.inputOriginText,onEnterWithoutCtrl:()=>{t.focusTargetTextInput()},autofocus:!0,getInputRef:e=>{t.sourceTextInputEl=e},originInputProps:{maxLength:50}})]}),(0,r.jsxs)("div",{className:f.formItem,children:[(0,r.jsx)("label",{children:t.S.translation}),(0,r.jsx)(o.I,{size:"middle",value:t.targetText,onChange:e=>{t.targetText=e},placeholder:t.S.inputTargetTranslation,onEnterWithoutCtrl:()=>{i?t.addOrUpdateTermAndNext():t.addOrUpdateTermAndDone(t.props.onDisposed)},getInputRef:e=>{t.targetTextInputEl=e},originInputProps:{maxLength:50}})]})]})}),E=(0,l.Pi)(function(e){let{vm:t}=e,i=!t.props.term;return(0,r.jsxs)("div",{className:f.footer,children:[i&&(0,r.jsx)(s.z,{disabled:t.disabled,loading:t.loading&&"next"===t.scene,type:"outline",size:"overMedium",onClick:()=>{t.addOrUpdateTermAndNext()},className:f.btn,endIcon:(0,r.jsx)(g,{}),children:t.S.addNext}),(0,r.jsxs)("div",{className:f.btnGroups,children:[(0,r.jsx)(s.z,{onClick:t.props.onDisposed,type:"gray",size:"overMedium",className:f.btn,children:t.S.cancel}),(0,r.jsx)(s.z,{disabled:t.disabled,loading:t.loading&&"done"===t.scene,onClick:()=>{t.addOrUpdateTermAndDone(t.props.onDisposed)},type:"primary",size:"overMedium",className:f.btn,children:t.S.completed})]})]})}),w=n._Y.createComponent("TranslationGlossaryCrudDialog",I,e=>{let{insertTarget:t,onDisposed:i}=e.props;return(0,r.jsxs)(a.u,{fixed:"dialogRoot"===t,onDispose:i,className:f.translationGlossaryCrudDialog,width:400,closeWhenEsc:!0,children:[(0,r.jsx)(b,{vm:e}),(0,r.jsx)(T,{vm:e}),(0,r.jsx)(E,{vm:e})]})}),A=c.t.createOpener(w)},30779:function(e,t,i){"use strict";i.d(t,{q:function(){return f}});var r=i(71576),n=i(34491),o=i(58812),s=i(66084);class a extends n.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var c=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.92176 0.641663H9.07836C9.73461 0.641643 10.2796 0.641627 10.7119 0.699738C11.1672 0.760957 11.5751 0.895197 11.9025 1.22257C12.2298 1.54993 12.3641 1.95779 12.4253 2.41309C12.4834 2.84526 12.4834 3.39021 12.4834 4.04634V9.875C12.4834 10.1649 12.2483 10.4 11.9584 10.4C11.4429 10.4 11.0251 10.8595 11.0251 11.375C11.0251 11.7075 11.1989 11.9993 11.4606 12.1646C11.7057 12.3195 11.9584 12.5434 11.9584 12.8333C11.9584 13.1233 11.7233 13.3583 11.4334 13.3583H3.50006C2.40469 13.3583 1.51673 12.4704 1.51673 11.375L1.51672 4.04636C1.5167 3.39023 1.51669 2.84527 1.5748 2.41309C1.63602 1.95779 1.77027 1.54993 2.09763 1.22257C2.425 0.895197 2.83291 0.760957 3.28825 0.699738C3.72047 0.641627 4.26551 0.641643 4.92176 0.641663ZM2.56673 11.375C2.56673 11.8905 2.98459 12.3083 3.50006 12.3083H10.2079C10.0593 12.0302 9.97506 11.7124 9.97506 11.375C9.97506 11.0376 10.0593 10.7198 10.2079 10.4417H3.50006C2.98459 10.4417 2.56673 10.8595 2.56673 11.375ZM11.4334 9.39166V4.083C11.4334 3.3808 11.4323 2.90697 11.3847 2.55302C11.3391 2.21419 11.2598 2.06481 11.16 1.96503C11.0603 1.86527 10.9109 1.78594 10.572 1.74037C10.2179 1.69278 9.74403 1.69166 9.04172 1.69166H4.95839C4.25608 1.69166 3.78217 1.69278 3.42816 1.74037C3.08925 1.78594 2.93986 1.86527 2.84009 1.96503C2.74032 2.06481 2.661 2.21419 2.61543 2.55302C2.56784 2.90697 2.56673 3.3808 2.56673 4.083V9.62456C2.84489 9.47593 3.16264 9.39166 3.50006 9.39166H11.4334ZM4.43339 3.5C4.43339 3.21005 4.66844 2.975 4.95839 2.975H9.10654C9.39649 2.975 9.63154 3.21005 9.63154 3.5C9.63154 3.78995 9.39649 4.025 9.10654 4.025H7.55747V7.58333C7.55747 7.87328 7.32241 8.10833 7.03247 8.10833C6.74252 8.10833 6.50747 7.87328 6.50747 7.58333V4.025H4.95839C4.66844 4.025 4.43339 3.78995 4.43339 3.5Z\\" fill=\\"#6841EA\\"/>\\n\\n","viewBox":"0 0 14 14"}');let l=n._Y.createComponent("BookTIcon",a,e=>(0,r.jsx)(o.s,{...e.props,name:"BookTIcon",iconData:c}));var p=i(14084),d=i(90180),u=i(52921),h=i(88882);class g extends n.PN{get S(){return h.S.Global.controllers.translationGlossaryController}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}(0,u.gn)([n.Fl],g.prototype,"S",null);let f=n._Y.createComponent("TranslationGlossarySwitch",g,e=>{let{iconSize:t,showLabel:i,label:n,labelFontWeight:o,...s}=e.props,a=(0,r.jsxs)("div",{className:"translation-glossary-switch-label--T3GUJ",style:{fontWeight:o},children:[(0,r.jsx)(l,{size:t||14}),e.S.useGlossary]});return(0,r.jsx)(p.r,{className:"translation-glossary-switch--mo8uG",...s,label:i?n||a:null,enabled:d.A.translationGlossaryEnabled,onChange:e=>{d.A.setTranslationGlossaryEnabled(e)}})})},1400:function(e,t){"use strict";t.Z={src:"https://assets.monica.im/home-web/_next/static/media/empty.37dcbd25.png",height:128,width:143,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAATlBMVEXy8/fi4uTm5ucHAEvW1t/l5eV4gfT5+fvc3eAAAA+4tszf3+jO0eWNlO1BPpb19PbR0eBIVfalnbtOWvnh4uT////p6uyprvVUYf/6+u7XufRvAAAAFHRSTlP9WJsinHf8/vwG9cP8sWLxrrciw6ibwGoAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA8SURBVHicFcZJEoAgDADBUZYQdyUR/P9HLfrUaHSQS9HVRfx8CIuL0w5iAcn9Zn6LWe6VNLK1nWnEvvQDTiMCwiPD6ysAAAAASUVORK5CYII=",blurWidth:8,blurHeight:7}},8209:function(e,t){"use strict";t.Z={src:"https://assets.monica.im/home-web/_next/static/media/empty_tool.19f69e67.png",height:160,width:160,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAANlBMVEVMaXHEydDS1trr7O7Eyc/m6Ort7fDM0NfX3OHR1du/xszDy9PDydDu7vHt7fLAxczo6uz39+/eZ3irAAAAEnRSTlMAxBT59/FQ/v7+RCCSUzpzxCEWAQS4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAO0lEQVR4nB3GSRLAIAwEsQZsxmZN/v/ZVEUnAcxRAW6xXMBQSnpepilNbUORR7QOK9L+1BLufoDa+z58M5sBdGRBJ6QAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},94001:function(e,t){"use strict";t.Z={src:"https://assets.monica.im/home-web/_next/static/media/gpt4.9683df95.png",height:64,width:64,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAPFBMVEVkZGQYGBg8PDwGBgYNDQ1HR0cAAAAAAABMaXElJSUXFxcjIyMlJSV7e3s5OTlycnJra2uMjIxaWlqXl5flqjdPAAAAD3RSTlP97egqrvQqLADxr6yw+fHPjlQjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPUlEQVR4nAXBiQEAIQgDsKoo4D0F3H9XE9h6p8swqBMnuuI5ZCAFs1hgNniyKvBjJxhfbmiPAzaFDfG5l11baAKCniCTIwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},28129:function(e,t,i){"use strict";function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,{Z:function(){return r}})},17177:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var r=i(36075);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,r.Z)(n.key),n)}}function o(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}},956:function(e,t,i){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}i.d(t,{Z:function(){return r}})},31479:function(e,t,i){"use strict";function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}i.d(t,{Z:function(){return r}})},36075:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});var r=i(91081);function n(e){var t=function(e,t){if("object"!=(0,r.Z)(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=(0,r.Z)(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.Z)(t)?t:String(t)}},91081:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.d(t,{Z:function(){return r}})},90875:function(e,t,i){"use strict";function r(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}i.d(t,{E:function(){return r}})},9923:function(e,t,i){"use strict";function r(e,t){return t.get?t.get.call(e):t.value}i.d(t,{e:function(){return r}})},80617:function(e,t,i){"use strict";function r(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=i}}i.d(t,{y:function(){return r}})},98928:function(e,t,i){"use strict";function r(e,t){if(t.set){if(!t.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(v){t.set.call(e,v)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw TypeError("attempted to set read only private field");return t}i.d(t,{b:function(){return r}})},59805:function(e,t,i){"use strict";function r(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}i.d(t,{J:function(){return r}})},43390:function(e,t,i){"use strict";i.d(t,{_:function(){return o}});var r=i(9923),n=i(59805);function o(e,t){var i=(0,n.J)(e,t,"get");return(0,r.e)(e,i)}},70786:function(e,t,i){"use strict";i.d(t,{_:function(){return n}});var r=i(90875);function n(e,t,i){(0,r.E)(e,t),t.set(e,i)}},54645:function(e,t,i){"use strict";i.d(t,{_:function(){return o}});var r=i(80617),n=i(59805);function o(e,t,i){var o=(0,n.J)(e,t,"set");return(0,r.y)(e,o,i),i}},89203:function(e,t,i){"use strict";i.d(t,{_:function(){return o}});var r=i(98928),n=i(59805);function o(e,t){var i=(0,n.J)(e,t,"update");return(0,r.b)(e,i)}},19627:function(e,t,i){"use strict";function r(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}i.d(t,{_:function(){return r}})},47227:function(e,t,i){"use strict";i.d(t,{_:function(){return n}});var r=i(90875);function n(e,t){(0,r.E)(e,t),t.add(e)}},94589:function(e,t){"use strict";var i=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.Z=function(e){return i.test(e)}},71549:function(e,t){"use strict";t.Z=function(e){return null==e}},67519:function(e,t,i){"use strict";i.d(t,{Z:function(){return b}});var r=i(65668),n=i(53245),o=i(64714),s=function(e,t,i){var r=e.length;return i=void 0===i?r:i,!t&&i>=r?e:(0,o.Z)(e,t,i)},a=i(65470),c=function(e,t){for(var i=e.length;i--&&(0,a.Z)(t,e[i],0)>-1;);return i},l=function(e,t){for(var i=-1,r=e.length;++i<r&&(0,a.Z)(t,e[i],0)>-1;);return i},p=i(94589),d="\ud800-\udfff",u="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",h="\ud83c[\udffb-\udfff]",g="[^"+d+"]",f="(?:\ud83c[\udde6-\uddff]){2}",m="[\ud800-\udbff][\udc00-\udfff]",C="(?:"+u+"|"+h+")?",S="[\\ufe0e\\ufe0f]?",y="(?:\\u200d(?:"+[g,f,m].join("|")+")"+S+C+")*",P=RegExp(h+"(?="+h+")|(?:"+[g+u+"?",u,f,m,"["+d+"]"].join("|")+")"+(S+C+y),"g"),R=function(e){return(0,p.Z)(e)?e.match(P)||[]:e.split("")},I=i(53554),b=function(e,t,i){if((e=(0,I.Z)(e))&&(i||void 0===t))return(0,n.Z)(e);if(!e||!(t=(0,r.Z)(t)))return e;var o=R(e),a=R(t),p=l(o,a),d=c(o,a)+1;return s(o,p,d).join("")}},44042:function(e,t,i){"use strict";i.d(t,{Z:function(){return P}});var r=i(75087),n=i(1340),o=i(20978),s=i(89257),a=function(){return(a=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},c=null,l=null;function p(){if(null===c){if("undefined"==typeof document)return c=0;var e=document.body,t=document.createElement("div");t.classList.add("simplebar-hide-scrollbar"),e.appendChild(t);var i=t.getBoundingClientRect().right;e.removeChild(t),c=i}return c}function d(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}function u(e){return e&&e.ownerDocument?e.ownerDocument:document}s&&window.addEventListener("resize",function(){l!==window.devicePixelRatio&&(l=window.devicePixelRatio,c=null)});var h=function(e){return Array.prototype.reduce.call(e,function(e,t){var i=t.name.match(/data-simplebar-(.+)/);if(i){var r=i[1].replace(/\W+(.)/g,function(e,t){return t.toUpperCase()});switch(t.value){case"true":case void 0:e[r]=!0;break;case"false":e[r]=!1;break;default:e[r]=t.value}}return e},{})};function g(e,t){var i;e&&(i=e.classList).add.apply(i,t.split(" "))}function f(e,t){e&&t.split(" ").forEach(function(t){e.classList.remove(t)})}function m(e){return".".concat(e.split(" ").join("."))}var C=Object.freeze({__proto__:null,getElementWindow:d,getElementDocument:u,getOptions:h,addClasses:g,removeClasses:f,classNamesToQuery:m}),S=function(){function e(t,i){void 0===i&&(i={});var r=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var e=d(r.el);r.scrollXTicking||(e.requestAnimationFrame(r.scrollX),r.scrollXTicking=!0),r.scrollYTicking||(e.requestAnimationFrame(r.scrollY),r.scrollYTicking=!0),r.isScrolling||(r.isScrolling=!0,g(r.el,r.classNames.scrolling)),r.showScrollbar("x"),r.showScrollbar("y"),r.onStopScrolling()},this.scrollX=function(){r.axis.x.isOverflowing&&r.positionScrollbar("x"),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&r.positionScrollbar("y"),r.scrollYTicking=!1},this._onStopScrolling=function(){f(r.el,r.classNames.scrolling),r.options.autoHide&&(r.hideScrollbar("x"),r.hideScrollbar("y")),r.isScrolling=!1},this.onMouseEnter=function(){r.isMouseEntering||(g(r.el,r.classNames.mouseEntered),r.showScrollbar("x"),r.showScrollbar("y"),r.isMouseEntering=!0),r.onMouseEntered()},this._onMouseEntered=function(){f(r.el,r.classNames.mouseEntered),r.options.autoHide&&(r.hideScrollbar("x"),r.hideScrollbar("y")),r.isMouseEntering=!1},this._onMouseMove=function(e){r.mouseX=e.clientX,r.mouseY=e.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis("y")},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis("y"),r.mouseX=-1,r.mouseY=-1},this._onWindowResize=function(){r.scrollbarWidth=r.getScrollbarWidth(),r.hideNativeScrollbar()},this.onPointerEvent=function(e){var t,i;r.axis.x.track.el&&r.axis.y.track.el&&r.axis.x.scrollbar.el&&r.axis.y.scrollbar.el&&(r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(t=r.isWithinBounds(r.axis.x.track.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(i=r.isWithinBounds(r.axis.y.track.rect)),(t||i)&&(e.stopPropagation(),"pointerdown"===e.type&&"touch"!==e.pointerType&&(t&&(r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.x.scrollbar.rect)?r.onDragStart(e,"x"):r.onTrackClick(e,"x")),i&&(r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.scrollbar.rect)?r.onDragStart(e,"y"):r.onTrackClick(e,"y")))))},this.drag=function(t){if(r.draggedAxis&&r.contentWrapperEl){var i,n,o,s,a,c,l,p,d,u,h,g=r.axis[r.draggedAxis].track,f=null!==(n=null===(i=g.rect)||void 0===i?void 0:i[r.axis[r.draggedAxis].sizeAttr])&&void 0!==n?n:0,m=r.axis[r.draggedAxis].scrollbar,C=null!==(s=null===(o=r.contentWrapperEl)||void 0===o?void 0:o[r.axis[r.draggedAxis].scrollSizeAttr])&&void 0!==s?s:0,S=parseInt(null!==(c=null===(a=r.elStyles)||void 0===a?void 0:a[r.axis[r.draggedAxis].sizeAttr])&&void 0!==c?c:"0px",10);t.preventDefault(),t.stopPropagation();var y=("y"===r.draggedAxis?t.pageY:t.pageX)-(null!==(p=null===(l=g.rect)||void 0===l?void 0:l[r.axis[r.draggedAxis].offsetAttr])&&void 0!==p?p:0)-r.axis[r.draggedAxis].dragOffset,P=(y="x"===r.draggedAxis&&r.isRtl?(null!==(u=null===(d=g.rect)||void 0===d?void 0:d[r.axis[r.draggedAxis].sizeAttr])&&void 0!==u?u:0)-m.size-y:y)/(f-m.size)*(C-S);"x"===r.draggedAxis&&r.isRtl&&(P=(null===(h=e.getRtlHelpers())||void 0===h?void 0:h.isScrollingToNegative)?-P:P),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=P}},this.onEndDrag=function(e){var t=u(r.el),i=d(r.el);e.preventDefault(),e.stopPropagation(),f(r.el,r.classNames.dragging),t.removeEventListener("mousemove",r.drag,!0),t.removeEventListener("mouseup",r.onEndDrag,!0),r.removePreventClickId=i.setTimeout(function(){t.removeEventListener("click",r.preventClick,!0),t.removeEventListener("dblclick",r.preventClick,!0),r.removePreventClickId=null})},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.options=a(a({},e.defaultOptions),i),this.classNames=a(a({},e.defaultOptions.classNames),i.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},"object"!=typeof this.el||!this.el.nodeName)throw Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=(0,n.Z)(this._onMouseMove,64),this.onWindowResize=(0,o.Z)(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=(0,o.Z)(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=(0,o.Z)(this._onMouseEntered,this.stopScrollDelay),this.init()}return e.getRtlHelpers=function(){if(e.rtlHelpers)return e.rtlHelpers;var t=document.createElement("div");t.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var i=t.firstElementChild,r=null==i?void 0:i.firstElementChild;if(!r)return null;document.body.appendChild(i),i.scrollLeft=0;var n=e.getOffset(i),o=e.getOffset(r);i.scrollLeft=-999;var s=e.getOffset(r);return document.body.removeChild(i),e.rtlHelpers={isScrollOriginAtZero:n.left!==o.left,isScrollingToNegative:o.left!==s.left},e.rtlHelpers},e.prototype.getScrollbarWidth=function(){try{if(this.contentWrapperEl&&"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style)return 0;return p()}catch(e){return p()}},e.getOffset=function(e){var t=e.getBoundingClientRect(),i=u(e),r=d(e);return{top:t.top+(r.pageYOffset||i.documentElement.scrollTop),left:t.left+(r.pageXOffset||i.documentElement.scrollLeft)}},e.prototype.init=function(){s&&(this.initDOM(),this.rtlHelpers=e.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},e.prototype.initDOM=function(){var e,t;this.wrapperEl=this.el.querySelector(m(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(m(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(m(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(m(this.classNames.offset)),this.maskEl=this.el.querySelector(m(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,m(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(m(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(m(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(m(this.classNames.track)).concat(m(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(m(this.classNames.track)).concat(m(this.classNames.vertical))),this.axis.x.scrollbar.el=(null===(e=this.axis.x.track.el)||void 0===e?void 0:e.querySelector(m(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=(null===(t=this.axis.y.track.el)||void 0===t?void 0:t.querySelector(m(this.classNames.scrollbar)))||null,this.options.autoHide||(g(this.axis.x.scrollbar.el,this.classNames.visible),g(this.axis.y.scrollbar.el,this.classNames.visible))},e.prototype.initListeners=function(){var e,t=this,i=d(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),null===(e=this.contentWrapperEl)||void 0===e||e.addEventListener("scroll",this.onScroll),i.addEventListener("resize",this.onWindowResize),this.contentEl){if(window.ResizeObserver){var r=!1,n=i.ResizeObserver||ResizeObserver;this.resizeObserver=new n(function(){r&&i.requestAnimationFrame(function(){t.recalculate()})}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),i.requestAnimationFrame(function(){r=!0})}this.mutationObserver=new i.MutationObserver(function(){i.requestAnimationFrame(function(){t.recalculate()})}),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},e.prototype.recalculate=function(){if(this.heightAutoObserverEl&&this.contentEl&&this.contentWrapperEl&&this.wrapperEl&&this.placeholderEl){var e=d(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var t=this.contentEl.offsetWidth,i=this.heightAutoObserverEl.offsetHeight<=1,r=this.heightAutoObserverEl.offsetWidth<=1||t>0,n=this.contentWrapperEl.offsetWidth,o=this.elStyles.overflowX,s=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var a=this.contentEl.scrollHeight,c=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=i?"auto":"100%",this.placeholderEl.style.width=r?"".concat(t||c,"px"):"auto",this.placeholderEl.style.height="".concat(a,"px");var l=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==t&&c>t,this.axis.y.isOverflowing=a>l,this.axis.x.isOverflowing="hidden"!==o&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==s&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var p=this.axis.x.isOverflowing?this.scrollbarWidth:0,u=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&c>n-u,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&a>l-p,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},e.prototype.getScrollbarSize=function(e){if(void 0===e&&(e="y"),!this.axis[e].isOverflowing||!this.contentEl)return 0;var t,i,r,n=this.contentEl[this.axis[e].scrollSizeAttr],o=null!==(i=null===(t=this.axis[e].track.el)||void 0===t?void 0:t[this.axis[e].offsetSizeAttr])&&void 0!==i?i:0;return r=Math.max(~~(o/n*o),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(r=Math.min(r,this.options.scrollbarMaxSize)),r},e.prototype.positionScrollbar=function(t){void 0===t&&(t="y");var i,r,n,o=this.axis[t].scrollbar;if(this.axis[t].isOverflowing&&this.contentWrapperEl&&o.el&&this.elStyles){var s=this.contentWrapperEl[this.axis[t].scrollSizeAttr],a=(null===(i=this.axis[t].track.el)||void 0===i?void 0:i[this.axis[t].offsetSizeAttr])||0,c=parseInt(this.elStyles[this.axis[t].sizeAttr],10),l=this.contentWrapperEl[this.axis[t].scrollOffsetAttr];l="x"===t&&this.isRtl&&(null===(r=e.getRtlHelpers())||void 0===r?void 0:r.isScrollOriginAtZero)?-l:l,"x"===t&&this.isRtl&&(l=(null===(n=e.getRtlHelpers())||void 0===n?void 0:n.isScrollingToNegative)?l:-l);var p=l/(s-c),d=~~((a-o.size)*p);d="x"===t&&this.isRtl?-d+(a-o.size):d,o.el.style.transform="x"===t?"translate3d(".concat(d,"px, 0, 0)"):"translate3d(0, ".concat(d,"px, 0)")}},e.prototype.toggleTrackVisibility=function(e){void 0===e&&(e="y");var t=this.axis[e].track.el,i=this.axis[e].scrollbar.el;t&&i&&this.contentWrapperEl&&(this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(e))):(t.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(e))),this.axis[e].isOverflowing?i.style.display="block":i.style.display="none")},e.prototype.showScrollbar=function(e){void 0===e&&(e="y"),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(g(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},e.prototype.hideScrollbar=function(e){void 0===e&&(e="y"),this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(f(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},e.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},e.prototype.onMouseMoveForAxis=function(e){void 0===e&&(e="y");var t=this.axis[e];t.track.el&&t.scrollbar.el&&(t.track.rect=t.track.el.getBoundingClientRect(),t.scrollbar.rect=t.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(t.track.rect)?(this.showScrollbar(e),g(t.track.el,this.classNames.hover),this.isWithinBounds(t.scrollbar.rect)?g(t.scrollbar.el,this.classNames.hover):f(t.scrollbar.el,this.classNames.hover)):(f(t.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},e.prototype.onMouseLeaveForAxis=function(e){void 0===e&&(e="y"),f(this.axis[e].track.el,this.classNames.hover),f(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},e.prototype.onDragStart=function(e,t){void 0===t&&(t="y");var i,r=u(this.el),n=d(this.el),o=this.axis[t].scrollbar,s="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=s-((null===(i=o.rect)||void 0===i?void 0:i[this.axis[t].offsetAttr])||0),this.draggedAxis=t,g(this.el,this.classNames.dragging),r.addEventListener("mousemove",this.drag,!0),r.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(r.addEventListener("click",this.preventClick,!0),r.addEventListener("dblclick",this.preventClick,!0)):(n.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.prototype.onTrackClick=function(e,t){var i,r,n,o,s=this;void 0===t&&(t="y");var a=this.axis[t];if(this.options.clickOnTrack&&a.scrollbar.el&&this.contentWrapperEl){e.preventDefault();var c=d(this.el);this.axis[t].scrollbar.rect=a.scrollbar.el.getBoundingClientRect();var l=null!==(r=null===(i=this.axis[t].scrollbar.rect)||void 0===i?void 0:i[this.axis[t].offsetAttr])&&void 0!==r?r:0,p=parseInt(null!==(o=null===(n=this.elStyles)||void 0===n?void 0:n[this.axis[t].sizeAttr])&&void 0!==o?o:"0px",10),u=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],h=("y"===t?this.mouseY-l:this.mouseX-l)<0?-1:1,g=-1===h?u-p:u+p,f=function(){s.contentWrapperEl&&(-1===h?u>g&&(u-=40,s.contentWrapperEl[s.axis[t].scrollOffsetAttr]=u,c.requestAnimationFrame(f)):u<g&&(u+=40,s.contentWrapperEl[s.axis[t].scrollOffsetAttr]=u,c.requestAnimationFrame(f)))};f()}},e.prototype.getContentElement=function(){return this.contentEl},e.prototype.getScrollElement=function(){return this.contentWrapperEl},e.prototype.removeListeners=function(){var e=d(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},e.prototype.unMount=function(){this.removeListeners()},e.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e.prototype.findChild=function(e,t){var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,function(e){return i.call(e,t)})[0]},e.rtlHelpers=null,e.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},e.getOptions=h,e.helpers=C,e}(),y=function(){return(y=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},P=r.forwardRef(function(e,t){var i=e.children,n=e.scrollableNodeProps,o=void 0===n?{}:n,s=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i}(e,["children","scrollableNodeProps"]),a=r.useRef(),c=r.useRef(),l=r.useRef(),p={},d={};Object.keys(s).forEach(function(e){Object.prototype.hasOwnProperty.call(S.defaultOptions,e)?p[e]=s[e]:d[e]=s[e]});var u=y(y({},S.defaultOptions.classNames),p.classNames),h=y(y({},o),{className:"".concat(u.contentWrapper).concat(o.className?" ".concat(o.className):""),tabIndex:0,role:"region","aria-label":p.ariaLabel||S.defaultOptions.ariaLabel});return r.useEffect(function(){var e;return c.current=h.ref?h.ref.current:c.current,a.current&&(e=new S(a.current,y(y(y({},p),c.current&&{scrollableNode:c.current}),l.current&&{contentNode:l.current})),"function"==typeof t?t(e):t&&(t.current=e)),function(){null==e||e.unMount(),e=null,"function"==typeof t&&t(null)}},[]),r.createElement("div",y({"data-simplebar":"init",ref:a},d),r.createElement("div",{className:u.wrapper},r.createElement("div",{className:u.heightAutoObserverWrapperEl},r.createElement("div",{className:u.heightAutoObserverEl})),r.createElement("div",{className:u.mask},r.createElement("div",{className:u.offset},"function"==typeof i?i({scrollableNodeRef:c,scrollableNodeProps:y(y({},h),{ref:c}),contentNodeRef:l,contentNodeProps:{className:u.contentEl,ref:l}}):r.createElement("div",y({},h),r.createElement("div",{className:u.contentEl},i)))),r.createElement("div",{className:u.placeholder})),r.createElement("div",{className:"".concat(u.track," simplebar-horizontal")},r.createElement("div",{className:u.scrollbar})),r.createElement("div",{className:"".concat(u.track," simplebar-vertical")},r.createElement("div",{className:u.scrollbar})))});P.displayName="SimpleBar"}}]);