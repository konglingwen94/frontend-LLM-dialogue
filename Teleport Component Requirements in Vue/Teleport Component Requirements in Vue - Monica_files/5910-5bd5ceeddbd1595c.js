"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5910],{96312:function(e,i,t){t.d(i,{y:function(){return l}});var n=t(66084),r=t(52921),a=t(92235),o=t(34491),s=t(73047);class l{register(e,i){let t=this.validators.findIndex(i=>i.key===e);if(-1===t){let t=this.validators.push({key:e,validator:()=>{let t=this.validators.findIndex(i=>i.key===e);if(-1!==t){let e=i();return this.validators[t].errMsg=e,e}return""},unregister:()=>{let i=this.validators.findIndex(i=>i.key===e);-1!==i&&this.validators.splice(i,1)},getBindDom:{run:()=>null}});return this.validators[t-1]}return this.validators[t]}validateAll(e){for(let i=0;i<this.validators.length;i++){let t=this.validators[i];if((null==e||!e(t.key))&&t.validator())return{...t,index:i}}return null}checkString(e,i){let{required:t,isEmail:n,maxLength:r,minLength:o,maxToken:s}=i;return t&&!e?t.message:n&&!a.m.getIsEmail(e)?n.message:r&&e.length>r.value?r.message:o&&e.length<o.value?o.message:""}constructor(){(0,n._)(this,"validators",[]),(0,s.rC)(this)}}(0,r.gn)([o.SB],l.prototype,"validators",void 0)},61055:function(e,i,t){t.d(i,{Y:function(){return p}});var n=t(71576),r=t(34491),a=t(46731),o=t(78716),s=t.n(o),l=t(75087),d={formItem:"form-item--pUJaE",errorMsg:"error-msg--r5QjY",formItemWithError:"form-item-with-error--K4W7I"},c=t(66084),g=t(52921);class h extends r.PN{onViewCreate(){this.props.getBindDom&&(this.props.getBindDom.run=()=>this.domEl)}onViewDestroy(){var e,i;null===(e=(i=this.props).unregister)||void 0===e||e.call(i)}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"domEl",null),(0,c._)(this,"someState",!0)}}(0,g.gn)([r.SB],h.prototype,"someState",void 0);let p=r._Y.createComponent("FormItemV2",h,e=>{let{validator:i,errMsg:t,className:r,style:o,withErrorIcon:c}=e.props;return(0,n.jsxs)("div",{className:s()(d.formItem,{[d.formItemWithError]:t},r),style:o,ref:i=>{e.domEl=i},children:[l.Children.map(e.props.children,e=>{if(!l.isValidElement(e))return e;let{onChange:t}=e.props;return l.cloneElement(e,{onChange:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t(...n),i()}})}),t&&(0,n.jsxs)("div",{className:d.errorMsg,children:[c&&(0,n.jsx)(a.J,{name:"a32",style:{marginRight:4,flexShrink:0},color:"currentColor"}),t]})]})})},51158:function(e,i,t){t.d(i,{z:function(){return f}});var n=t(71576),r=t(34491),a=t(78716),o=t.n(a),s={humanMachineVerification:"human-machine-verification--jSPti"},l=t(66084),d=t(52921),c=t(56607),g=t(88882),h=t(65324);let p="monica.humanMachineVerificationCallbackName",m="monica.humanMachineVerificationErrorCallbackName",u={zh_CN:"zho",en:"eng",zh_TW:"zho-tw",zh_HK:"zho-hk",ja:"jpn",id:"ind",ko:"kor",ru:"rus",ar:"ara",pt_BR:"pon",pt_PT:"por",fr:"fra",de:"deu",es:"eng",it:"eng",tr:"eng",vi:"eng",es_419:"eng",nl:"eng",pl:"eng",uk:"eng",cs:"eng",fa:"eng",hi:"eng",th:"eng"};class v extends r.PN{onViewCreate(){var e,i;null===(e=(i=this.props).getValidate)||void 0===e||e.call(i,()=>{this.validate()}),this.mounted=!0;let{mode:t}=this.props;if("google"===t){this.registryReCAPTCHA();return}if("geetest"===t){this.registryGeeTest();return}}onViewDestroy(){var e,i;null===(e=(i=this.props).getValidate)||void 0===e||e.call(i,null),this.unRegistry()}async validate(){if(!this.ready)return;let{mode:e,beforeValidate:i,onStart:t}=this.props;if(!i||await i()){if(null==t||t(),"google"===e){this.validateForGoogle();return}if("geetest"===e){this.validateForGeeTest();return}}}registryReCAPTCHA(){var e;this.registryScriptNode((null===(e=c.o.envvars)||void 0===e?void 0:e.recaptchaJsSrc)||""),window[p]=this.validationCallback.bind(this),window[m]=this.validationErrorCallback.bind(this)}validateForGoogle(){window.grecaptcha.reset(),window.grecaptcha.execute()}registryGeeTest(){var e;this.registryScriptNode((null===(e=c.o.envvars)||void 0===e?void 0:e.gt4JsSrc)||"",()=>{var e;null===(e=initGeetest4)||void 0===e||e({captchaId:window.GEETEST_RECAPTCHA_ID,product:"bind",language:u[g.a.locale]||"eng"},e=>{e.onSuccess(()=>{let i=e.getValidate();this.validationCallback(i),e.reset()}),e.onClose(()=>{var e,i;null===(e=(i=this.props).onClose)||void 0===e||e.call(i)}),this.geekTestTriggerFunc=()=>{e.showCaptcha()}})})}validateForGeeTest(){var e;null===(e=this.geekTestTriggerFunc)||void 0===e||e.call(this)}unRegistry(){var e;null===(e=this.scriptNode)||void 0===e||e.remove(),window[p]=void 0,window[m]=void 0}validationCallback(e){var i,t;null===(i=(t=this.props).onValidate)||void 0===i||i.call(t,e)}validationErrorCallback(){var e,i;null===(e=(i=this.props).onError)||void 0===e||e.call(i)}registryScriptNode(e,i){let t=!1,n=()=>{var e,t;this.ready=!0,null===(e=(t=this.props).onReady)||void 0===e||e.call(t),null==i||i()},r=document.createElement("script");r.src=e,r.async=!0,r.defer=!0,r.onload=()=>{t=!0,n()};let{mode:a,email:o}=this.props;r.onerror=()=>{var e,i;h.Cb.userBehaviorApi.createErrorEvent({errorName:"captchaLoadError-".concat(a),errorMessage:o},{ignoreGlobalErrorHandler:!0}),null===(e=(i=this.props).onError)||void 0===e||e.call(i)},document.body.appendChild(r),this.scriptNode=r,setTimeout(()=>{t||h.Cb.userBehaviorApi.createErrorEvent({errorName:"captchaLoadTimeout-".concat(a,"-10s"),errorMessage:o},{ignoreGlobalErrorHandler:!0})},1e4)}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"ready",!1),(0,l._)(this,"mounted",!1),(0,l._)(this,"scriptNode",null),(0,l._)(this,"geekTestTriggerFunc",null)}}(0,d.gn)([r.SB],v.prototype,"ready",void 0),(0,d.gn)([r.SB],v.prototype,"mounted",void 0);let f=r._Y.createComponent("HumanMachineVerification",v,e=>(0,n.jsxs)("div",{className:o()(s.humanMachineVerification,e.props.className,{[s.disabled]:!e.ready}),children:["google"===e.props.mode&&e.mounted&&(0,n.jsx)("div",{className:"g-recaptcha","data-sitekey":globalThis.GOOGLE_RECAPTCHA_SITE_KEY,"data-callback":p,"data-error-callback":m,"data-size":"invisible"}),(0,n.jsx)("div",{className:s.content,onClick:e.validate.bind(e),children:e.props.children})]}))},75394:function(e,i,t){t.d(i,{T:function(){return S}});var n=t(71576),r=t(34491),a=t(78716),o=t.n(a),s=t(46731),l=t(66084);class d extends r.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0)}}let c=r._Y.createComponent("Alert",d,e=>{let i,t;let{type:r,children:a,className:l}=e.props;return(0,n.jsxs)("div",{className:o()("alert--Fkacv",l,{"error--x71sJ":"error"===r}),children:[(i="",t="","error"===r&&(i="error",t="#FF7C52"),(0,n.jsx)(s.J,{name:i,size:24,color:t})),(0,n.jsx)("div",{className:"alert-content--LimgL",children:a})]})});var g=t(95782),h=t(92660),p=t(60445),m={},u=t(52921),v=t(88882),f=t(73047);class y extends r.PN{get S(){return v.S.Global.components.SignInDialog.ChineseUserSignUpErrorAlert}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"someState",!0)}}(0,u.gn)([r.SB],y.prototype,"someState",void 0),(0,u.gn)([f.Fl],y.prototype,"S",null);let S=r._Y.createComponent("ChineseUserSignUpErrorAlert",y,e=>(0,n.jsx)(c,{type:"error",className:m.errorAlert,children:(0,n.jsx)(g.Z,{S:e.S.chineseUserSignUpError,data:{contact:h.xK.label},components:{p:e=>(0,n.jsx)("p",{children:e}),a:e=>(0,n.jsx)("a",{href:p.Cl.mailLanding,target:"_blank",rel:"noreferrer",children:e})}})}))},30542:function(e,i,t){t.d(i,{i:function(){return g}});var n=t(71576),r=t(34491),a={divider:"divider--S626T",line:"line--s1BC9",or:"or--zbESL"},o=t(66084),s=t(52921),l=t(88882),d=t(73047);class c extends r.PN{get S(){return l.S.Global.components.SignInDialog.Divider}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,o._)(this,"props",void 0),(0,o._)(this,"someState",!0)}}(0,s.gn)([r.SB],c.prototype,"someState",void 0),(0,s.gn)([d.Fl],c.prototype,"S",null);let g=r._Y.createComponent("Divider",c,e=>(0,n.jsxs)("div",{className:a.divider,children:[(0,n.jsx)("div",{className:a.line}),(0,n.jsx)("span",{className:a.or,children:e.S.or}),(0,n.jsx)("div",{className:a.line})]}))},49636:function(e,i,t){t.d(i,{r:function(){return u}});var n=t(71576),r=t(34491),a=t(46515),o=t(95782),s=t(78716),l=t.n(s),d={signInHint:"sign-in-hint--Edavs",link:"link--dXrF_"},c=t(66084),g=t(52921),h=t(88882),p=t(73047);class m extends r.PN{get S(){return h.S.Global.components.SignInDialog.SignInHint}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0)}}(0,g.gn)([p.Fl],m.prototype,"S",null);let u=r._Y.createComponent("SignInHint",m,e=>{let i="signIn"===a.u.mode;return(0,n.jsx)("div",{className:l()(d.signInHint,e.props.className),children:i?(0,n.jsx)(o.Z,{S:e.S.signUpForFree,components:{link:e=>(0,n.jsx)("span",{className:d.link,onClick:()=>{a.u.mode="signUp",a.u.emailFormVisible=!1,a.u.chineseSignUpAlertVisible=!1},children:e})}}):(0,n.jsx)(o.Z,{S:e.S.alreadyHaveAccount,components:{link:e=>(0,n.jsx)("span",{className:d.link,onClick:()=>{a.u.mode="signIn",a.u.emailFormVisible=!0,a.u.chineseSignUpAlertVisible=!1},children:e})}})})})},9408:function(e,i,t){t.d(i,{w:function(){return u}});var n=t(71576),r=t(34491),a=t(46731),o=t(95782),s=t(78716),l=t.n(s),d={signInTerms:"sign-in-terms--hZwbP",icon:"icon--LCFjs"},c=t(66084),g=t(52921),h=t(88882),p=t(73047);class m extends r.PN{get S(){return h.S.Global.components.SignInDialog.SignInTerms}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0)}}(0,g.gn)([p.Fl],m.prototype,"S",null);let u=r._Y.createComponent("SignInTerms",m,e=>(0,n.jsxs)("div",{className:l()(d.signInTerms,e.props.className),children:[!e.props.hideIcon&&(0,n.jsx)("span",{className:d.icon,children:(0,n.jsx)(a.J,{name:"promptInfo"})}),(0,n.jsx)("span",{children:(0,n.jsx)(o.Z,{S:e.props.forSubscribe?e.S.subscribeTerms:e.S.terms,components:{terms:e=>(0,n.jsx)("a",{href:"/terms",target:"_blank",rel:"noreferrer",children:e}),privacy:e=>(0,n.jsx)("a",{href:"/privacy",target:"_blank",rel:"noreferrer",children:e})}})})]}))},75688:function(e,i,t){t.d(i,{s:function(){return S}});var n=t(71576),r=t(34491),a=t(5857),o=t(46731),s=t(78826),l=t(33381),d=t(46515),c=t(92235),g=t(60445),h=t(65324),p=t(66084),m=t(52921),u=t(88882),v=t(73047),f=t(38172);class y extends r.PN{get S(){return u.S.Global.components.SignInDialog.SignInWithApple}async onBeforeMount(){this.clientId=await f.W.getClientId()}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,p._)(this,"props",void 0),(0,p._)(this,"loading",!1),(0,p._)(this,"clientId","")}}(0,m.gn)([r.SB],y.prototype,"loading",void 0),(0,m.gn)([r.SB],y.prototype,"clientId",void 0),(0,m.gn)([v.Fl],y.prototype,"S",null);let S=r._Y.createComponent("SignInWithApple",y,e=>{let i=s.routerController.params.channel,{from:t="",utm:r,refer:p="",firstEntry:m,firstFromPlatform:u="",installFrom:v,origin:f="",tapClickId:y}=l.userController.getLoginTraceData(),S={redirect_url:c.m.genFullUrl(c.m.genUrl(g.Cl.authLanding,{from:t,mode:d.u.mode,type:"apple",channel:i,redirectTo:e.props.redirectTo||""})),first_from_platform:u,refer:p,type:"apple",origin:f,client_id:e.clientId,...c.m.getDeviceInfo(!0)};r&&(S.utm=r),m&&(S.first_entry=m),v&&(S.install_from=v),y&&(S.tap_click_id=y);let C=c.m.genUrl("".concat(h.Xo,"/user/oauth2_authorize"),S);return(0,n.jsx)(a.z,{className:"sign-in-with-apple--Buu2o",type:"blackOutline",onClick:()=>{e.loading=!0,location.href=C},loading:e.loading,icon:(0,n.jsx)(o.J,{color:"var(--theme-icon-primary)",name:"apple",size:20}),children:d.u.isSignIn?e.S.signIn:e.S.signUp})})},56987:function(e,i,t){t.d(i,{M:function(){return R}});var n=t(71576),r=t(34491),a=t(4461),o=t(5857),s=t(61055),l=t(37231),d=t(51158),c=t(48023),g=t(46515),h={src:"https://assets.monica.im/home-web/_next/static/media/email.2ccac815.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAMFBMVEVigv/o8f9MaXFwhv8+Zf9gf/5Zef+yxv/6///d5f/X4v/g6P/B0P/C0P9Rdv+WrP+0L2i3AAAADnRSTlP7/gATWVLzWhtaWlz6+t3bkMMAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAAzSURBVHicNcvJDQAgCADBBVHBs/9uTYzOf9AH7y2idafKVTGmyMCwxd4sI0MpkNF0Kb8fKsYBEmJelVMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},p=t(88882),m=t(60445),u=t(62499),v={signInWithEmail:"sign-in-with-email--syPcM",emailForm:"email-form--hzZ2q",title:"title--S6Ean",content:"content--fxSNO",formItem:"form-item--LloUl",input:"input--tMD7S",footer:"footer--GfM5U",continueBtn:"continue-btn--ixIwq",signUpBtn:"sign-up-btn--IpEZQ",forgotPassword:"forgot-password--GP3wJ"},f=t(66084),y=t(52921),S=t(15851),C=t(33381),A=t(78826),w=t(92660),x=t(92235);class b{setDataAndJumpLandingPage(e){localStorage.setItem(w.storageKeys.refundUserToken,e.token),window.location.href=x.m.genUrl(m.Cl.bannedList,{paymentPlatform:e.paymentPlatform})}}let I=new b;var _=t(96312),V=t(65324),N=t(73047),k=t(68104),E=t(66952),j=t(82005),D=t(78716),T=t.n(D),M=t(38569),B={verifyEmailDialogWrapper:"verify-email-dialog-wrapper--GKvtM",verifyEmailDialog:"verify-email-dialog--EqARM",container:"container--fQCyM",title:"title--RWBYr",email:"email--I7X_b",emailAddress:"email-address--fXlKP",tips:"tips--leOdt",addContent:"add-content--YWDPT",addContentNumber:"add-content-number--qf1TY",buttonVerify:"button-verify--LO6Xd",or:"or--Wi4rC",line:"line--JfrSV",googleBtn:"google-btn--Jbctz"};class U extends r.PN{get captchaMode(){return"google"}get S(){return p.S.Global.components.SignInDialog.VerifyEmailDialog}get isH5(){return x.m.getIsMobile()}get verifyDisabled(){return!this.code}startCountDown(){let e=()=>{this.timer&&(clearInterval(this.timer),this.timer=null)};e(),this.countDown=60,this.timer=setInterval(()=>{this.countDown--,0===this.countDown&&(this.addonType="resend",e())},1e3)}async handleClickResend(){this.addonType="number",this.startCountDown(),await this.sendCode()}async sendCode(){let e=C.userController.userRegisterPayload;await V.Cb.userApi.sendEmailVerifyCodeWithCaptcha({email:e.email,action:"register",captchaPassToken:"google"===this.captchaMode?{captchaResponse:this.humanMachineVerificationToken}:this.humanMachineVerificationToken})}async handleClickVerify(){if(this.verifyDisabled)return;let e=C.userController.userRegisterPayload;this.btnLoading=!0;try{let i=C.userController.getLoginTraceData();await V.Cb.userApi.registerByEmail({verifyCode:this.code,utm:i.utm,refer:i.refer,firstEntry:i.firstEntry,locale:p.a.locale,firstFromPlatform:i.firstFromPlatform,tapClickId:i.tapClickId,tapRefCode:i.tapRefCode,...e,...i.installFrom?{installFrom:i.installFrom}:{},...x.m.getDeviceInfo(),origin:i.origin}),A.routerController.navigateToAuthLanding({mode:"signUp",from:A.routerController.params.from||"web",redirectTo:this.props.redirectTo||"",channel:A.routerController.params.channel})}catch(e){console.log(e)}finally{this.btnLoading=!1}}onViewCreate(){this.startCountDown()}onViewDestroy(){}constructor(...e){super(...e),(0,f._)(this,"props",void 0),(0,f._)(this,"timer",null),(0,f._)(this,"code",""),(0,f._)(this,"addonType","number"),(0,f._)(this,"countDown",60),(0,f._)(this,"googleLoading",!1),(0,f._)(this,"btnLoading",!1),(0,f._)(this,"humanMachineVerificationReady",!1),(0,f._)(this,"humanMachineVerificationToken","")}}(0,y.gn)([r.SB],U.prototype,"code",void 0),(0,y.gn)([r.SB],U.prototype,"addonType",void 0),(0,y.gn)([r.SB],U.prototype,"countDown",void 0),(0,y.gn)([r.SB],U.prototype,"googleLoading",void 0),(0,y.gn)([r.SB],U.prototype,"btnLoading",void 0),(0,y.gn)([r.SB],U.prototype,"humanMachineVerificationReady",void 0),(0,y.gn)([r.SB],U.prototype,"humanMachineVerificationToken",void 0),(0,y.gn)([N.Fl],U.prototype,"captchaMode",null),(0,y.gn)([N.Fl],U.prototype,"S",null),(0,y.gn)([N.Fl],U.prototype,"isH5",null),(0,y.gn)([N.Fl],U.prototype,"verifyDisabled",null);let P=r._Y.createComponent("VerifyEmailDialog",U,e=>{var i,t;return(0,n.jsx)(k.u,{className:B.verifyEmailDialogWrapper,onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,width:446,closeOnMaskClick:!1,children:(0,n.jsx)("div",{className:B.verifyEmailDialog,children:(0,n.jsxs)("div",{className:B.container,children:[(0,n.jsx)(E.T,{className:B.logo,size:38,titleSize:24}),(0,n.jsx)("h1",{className:B.title,children:e.S.verifyEmail}),(0,n.jsxs)("div",{className:B.email,children:[(0,n.jsx)("p",{children:e.S.email}),(0,n.jsx)("p",{className:B.emailAddress,children:null===(i=C.userController.userRegisterPayload)||void 0===i?void 0:i.email})]}),(0,n.jsxs)("div",{className:B.tips,children:[(0,n.jsx)("p",{children:e.S.enterCode}),(0,n.jsx)("p",{children:e.S.codeExpires})]}),(0,n.jsx)(l.I,{placeholder:e.S.enterYourCode,className:B.input,value:e.code,size:"large",onChange:i=>{e.code=i},onEnterWithoutCtrl:()=>{e.handleClickVerify()},addonAfter:"resend"===e.addonType?(0,n.jsx)(d.z,{mode:e.captchaMode,email:null===(t=C.userController.userRegisterPayload)||void 0===t?void 0:t.email,onReady:()=>{e.humanMachineVerificationReady=!0},onValidate:i=>{e.humanMachineVerificationToken=i,e.handleClickResend()},children:(0,n.jsx)("div",{className:T()(B.addContent),children:e.S.resend})}):(0,n.jsx)("div",{className:T()(B.addContent,B.addContentNumber),children:e.countDown})}),(0,n.jsx)(o.z,{disabled:e.verifyDisabled,loading:e.btnLoading,type:"primaryGradient",className:B.buttonVerify,onClick:()=>{e.handleClickVerify()},children:e.S.verify}),(0,n.jsxs)("div",{className:B.or,children:[(0,n.jsx)("div",{className:B.line}),e.S.or,(0,n.jsx)("div",{className:B.line})]}),(0,n.jsx)(M.e,{type:"primaryOutline",className:B.googleBtn})]})})})}),F=j.t.createOpener(P);class L extends r.PN{get S(){return p.S.Global.components.SignInDialog.SignInWithEmail}get captchaMode(){return"google"}get signInDisabled(){return!this.email||!this.password||!x.m.getIsEmail(this.email)||this.password.length<this.minPasswordLength||this.password.length>this.maxPasswordLength}get signUpDisabled(){return!this.email||!this.password||!this.name||!x.m.getIsEmail(this.email)||this.password.length<this.minPasswordLength||this.password.length>this.maxPasswordLength||this.name.length>this.maxNameLength}onViewCreate(){}async validate(){this.loading=!0;try{let{registeredPlatformList:e}=await V.Cb.userApi.listEmailRegistered({email:this.email});if(!(null==e?void 0:e.length))return!0;return S.M.error(this.S.emailAlreadyRegistered),this.loading=!1,!1}catch(e){return S.M.error(this.S.emailRegistrationFailed),this.loading=!1,!1}}async handleSignUp(){if(!this.signUpDisabled){this.loading=!0;try{C.userController.userRegisterPayload={email:this.email,password:this.password,name:this.name},await V.Cb.userApi.sendEmailVerifyCodeWithCaptcha({email:this.email,action:"register",captchaPassToken:{captchaResponse:this.humanMachineVerificationToken}}),F({insertTarget:"dialogRoot",redirectTo:this.props.redirectTo})}catch(e){S.M.error(this.S.emailRegistrationFailed)}finally{this.loading=!1}}}async handleSignIn(){if(this.signInDisabled||this.loading)return;this.loading=!0;let e=C.userController.getLoginTraceData();try{await V.Cb.userApi.loginByEmail({email:this.email,password:this.password,firstEntry:e.firstEntry,refer:e.refer,utm:e.utm,origin:e.origin,tapClickId:e.tapClickId,...x.m.getDeviceInfo()},{ignoreGlobalErrorHandler:!0}),A.routerController.navigateToAuthLanding({redirectTo:this.props.redirectTo||"",from:A.routerController.params.from,channel:A.routerController.params.channel})}catch(e){if(1001===e.code)S.M.error(this.S.norRegistered);else if(1014===e.code)S.M.error(this.S.wrongPassword);else if(1040===e.code){var i;let t=null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.detail;t.refundToken&&I.setDataAndJumpLandingPage({token:decodeURIComponent(t.refundToken),paymentPlatform:t.paymentPlatform})}else S.M.error(x.m.formatErrorMsg(e))}finally{this.loading=!1}}onViewDestroy(){}constructor(...e){super(...e),(0,f._)(this,"props",void 0),(0,f._)(this,"minPasswordLength",6),(0,f._)(this,"maxPasswordLength",20),(0,f._)(this,"maxNameLength",20),(0,f._)(this,"formManager",new _.y),(0,f._)(this,"humanMachineValidator",null),(0,f._)(this,"loading",!1),(0,f._)(this,"email",""),(0,f._)(this,"password",""),(0,f._)(this,"name",""),(0,f._)(this,"humanMachineVerificationReady",!1),(0,f._)(this,"humanMachineVerificationToken","")}}(0,y.gn)([r.SB],L.prototype,"loading",void 0),(0,y.gn)([r.SB],L.prototype,"email",void 0),(0,y.gn)([r.SB],L.prototype,"password",void 0),(0,y.gn)([r.SB],L.prototype,"name",void 0),(0,y.gn)([r.SB],L.prototype,"humanMachineVerificationReady",void 0),(0,y.gn)([r.SB],L.prototype,"humanMachineVerificationToken",void 0),(0,y.gn)([N.Fl],L.prototype,"S",null),(0,y.gn)([N.Fl],L.prototype,"captchaMode",null),(0,y.gn)([N.Fl],L.prototype,"signInDisabled",null),(0,y.gn)([N.Fl],L.prototype,"signUpDisabled",null);let R=r._Y.createComponent("SignInWithEmail",L,e=>g.u.emailFormVisible?(0,n.jsxs)("div",{className:v.emailForm,children:[(0,n.jsx)("div",{className:v.title,children:g.u.isSignIn?e.S.signInWithEmail:e.S.signUpWithEmail}),(0,n.jsxs)("div",{className:v.content,children:[(0,n.jsx)(s.Y,{className:v.formItem,...e.formManager.register("email",()=>e.formManager.checkString(e.email,{required:{message:e.S.requiredMsg},isEmail:{message:e.S.invalidEmail}})),children:(0,n.jsx)(l.I,{size:"large",className:v.input,value:e.email,autofocus:!0,placeholder:e.S.emailAddress,onChange:i=>{e.email=i}})}),(0,n.jsx)(s.Y,{className:v.formItem,...e.formManager.register("password",()=>e.formManager.checkString(e.password,{required:{message:e.S.requiredMsg},maxLength:{value:e.maxPasswordLength,message:(0,p.x)(e.S.maxStringLength,{length:e.maxPasswordLength})},minLength:{value:e.minPasswordLength,message:(0,p.x)(e.S.minStringLength,{length:e.minPasswordLength})}})),children:(0,n.jsx)(l.I,{type:"password",size:"large",className:v.input,value:e.password,placeholder:e.S.password,onChange:i=>{e.password=i},onEnterWithoutCtrl:()=>{g.u.isSignIn&&e.handleSignIn()}})}),g.u.isSignUp&&(0,n.jsx)(s.Y,{className:v.formItem,...e.formManager.register("name",()=>e.formManager.checkString(e.name,{required:{message:e.S.requiredMsg},maxLength:{value:e.maxPasswordLength,message:(0,p.x)(e.S.maxStringLength,{length:e.maxNameLength})}})),children:(0,n.jsx)(l.I,{size:"large",className:v.input,value:e.name,placeholder:e.S.name,onChange:i=>{e.name=i},onEnterWithoutCtrl:()=>{var i;e.humanMachineVerificationReady&&!e.signUpDisabled&&(null===(i=e.humanMachineValidator)||void 0===i||i.call(e))}})})]}),(0,n.jsxs)("div",{className:v.footer,children:[g.u.isSignIn&&(0,n.jsx)(z,{vm:e}),g.u.isSignIn?(0,n.jsx)(o.z,{type:"primary",className:v.continueBtn,loading:e.loading,disabled:e.signInDisabled,onClick:()=>{e.handleSignIn()},children:e.S.continue}):(0,n.jsx)(d.z,{mode:e.captchaMode,email:e.email,beforeValidate:async()=>!e.signUpDisabled&&!e.loading&&await e.validate(),onReady:()=>{e.humanMachineVerificationReady=!0},onValidate:i=>{e.humanMachineVerificationToken=i,e.handleSignUp()},getValidate:i=>{e.humanMachineValidator=i},children:e.humanMachineVerificationReady?(0,n.jsx)(o.z,{loading:e.loading,type:"primary",className:v.signUpBtn,disabled:!e.humanMachineVerificationReady||e.signUpDisabled,children:e.S.signUp}):(0,n.jsx)(c.u,{title:e.S.loadingHint,children:(0,n.jsx)("span",{children:(0,n.jsx)(o.z,{loading:e.loading,type:"primary",className:v.signUpBtn,disabled:!e.humanMachineVerificationReady||e.signUpDisabled,children:e.S.signUp})})})})]})]}):(0,n.jsx)(o.z,{type:"blackOutline",className:v.signInWithEmail,onClick:()=>{g.u.emailFormVisible=!0},icon:(0,n.jsx)(a.E,{src:h,width:20,height:20,alt:""}),children:e.S.signUpWithEmail})),z=(0,u.Pi)(e=>{let{vm:i}=e;return(0,n.jsx)("a",{href:m.Cl.resetPassword,className:v.forgotPassword,target:"_blank",rel:"noreferrer",children:i.S.forgotPassword})})},38569:function(e,i,t){t.d(i,{e:function(){return w}});var n=t(71576),r=t(34491),a=t(4461),o=t(5857),s=t(78826),l=t(33381),d=t(46515),c={src:"https://assets.monica.im/home-web/_next/static/media/signInDialogGoogle.6746b151.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAYFBMVEX////////wgHd1xIv/////////+fn7/Pn///9MaXH/uqtRncE8qljpSjz9///O4f6byv3/49z3zlp5qff/0tBRi/nN8NiMzp7e9uSr4Ka3yfz/opHzlY7T2Hj/v3Ln+OH8VqXBAAAADnRSTlOwtf7+7PgvLvQA+fn5+T87Kz0AAAAJcEhZcwAAFiUAABYlAUlSJPAAAABDSURBVHicBcEHAsAgCASwU0Ggw9W9///LJjABsxNDpOr9TBGo4311CdD2plKyQtuTzmVS4Bu2o8+A0B7CSgITxwyxH2NFAsxXPJQCAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},g=t(92235),h=t(60445),p=t(65324),m=t(78716),u=t.n(m),v=t(66084),f=t(52921),y=t(88882),S=t(73047),C=t(38172);class A extends r.PN{get S(){return y.S.Global.components.SignInDialog.SignInWithGoogle}async onBeforeMount(){this.clientId=await C.W.getClientId()}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,v._)(this,"props",void 0),(0,v._)(this,"loading",!1),(0,v._)(this,"clientId","")}}(0,f.gn)([r.SB],A.prototype,"loading",void 0),(0,f.gn)([r.SB],A.prototype,"clientId",void 0),(0,f.gn)([S.Fl],A.prototype,"S",null);let w=r._Y.createComponent("SignInWithGoogle",A,e=>{let i=s.routerController.params.channel,{from:t="",utm:r,refer:m="",firstEntry:v,firstFromPlatform:f="",installFrom:y,origin:S="",tapClickId:C}=l.userController.getLoginTraceData(),A={redirect_url:g.m.genFullUrl(g.m.genUrl(h.Cl.authLanding,{from:t,mode:d.u.mode,type:"google",redirectTo:e.props.redirectTo||"",channel:i})),first_from_platform:f,refer:m,type:"google",origin:S,client_id:e.clientId,...g.m.getDeviceInfo(!0)};r&&(A.utm=r),v&&(A.first_entry=v),y&&(A.install_from=y),C&&(A.tap_click_id=C);let w=g.m.genUrl("".concat(p.Xo,"/user/oauth2_authorize"),A);return(0,n.jsx)(o.z,{className:u()("sign-in-with-google--sHmQb",e.props.className),type:e.props.type,onClick:()=>{var i,t;null===(i=(t=e.props).onClick)||void 0===i||i.call(t),e.loading=!0,location.href=w},loading:e.loading,icon:(0,n.jsx)(a.E,{src:c,width:20,height:20,alt:""}),children:e.S.continue})})},46515:function(e,i,t){t.d(i,{u:function(){return l}});var n=t(66084),r=t(52921),a=t(34491),o=t(73047);class s{get isSignIn(){return"signIn"===this.mode}get isSignUp(){return"signUp"===this.mode}reset(){this.mode="signUp",this.emailFormVisible=!1,this.chineseSignUpAlertVisible=!1,this.isCn=null}constructor(){(0,n._)(this,"mode","signUp"),(0,n._)(this,"emailFormVisible",!1),(0,n._)(this,"chineseSignUpAlertVisible",!1),(0,n._)(this,"isCn",!1),(0,o.rC)(this)}}(0,r.gn)([a.SB],s.prototype,"mode",void 0),(0,r.gn)([a.SB],s.prototype,"emailFormVisible",void 0),(0,r.gn)([a.SB],s.prototype,"chineseSignUpAlertVisible",void 0),(0,r.gn)([a.SB],s.prototype,"isCn",void 0),(0,r.gn)([o.Fl],s.prototype,"isSignIn",null),(0,r.gn)([o.Fl],s.prototype,"isSignUp",null);let l=new s}}]);