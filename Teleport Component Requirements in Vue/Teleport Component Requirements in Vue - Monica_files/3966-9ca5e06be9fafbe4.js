"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3966],{34788:function(e,t,i){i.d(t,{Z:function(){return v}});var n=i(75087),a=i(82186),r=i(78716),s=i.n(r),o=i(17027),l=i(56033),c=i(87390),h=i(44586),d=i(67639);let u=e=>{let{componentCls:t,antCls:i,carouselArrowSize:n,carouselDotOffset:a,marginXXS:r}=e,s=e.calc(n).mul(-1.25).equal();return{[t]:Object.assign(Object.assign({},(0,c.Wf)(e)),{".slick-slider":{position:"relative",display:"block",boxSizing:"border-box",touchAction:"pan-y",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",".slick-track, .slick-list":{transform:"translate3d(0, 0, 0)",touchAction:"pan-y"}},".slick-list":{position:"relative",display:"block",margin:0,padding:0,overflow:"hidden","&:focus":{outline:"none"},"&.dragging":{cursor:"pointer"},".slick-slide":{pointerEvents:"none",["input".concat(i,"-radio-input, input").concat(i,"-checkbox-input")]:{visibility:"hidden"},"&.slick-active":{pointerEvents:"auto",["input".concat(i,"-radio-input, input").concat(i,"-checkbox-input")]:{visibility:"visible"}},"> div > div":{verticalAlign:"bottom"}}},".slick-track":{position:"relative",top:0,insetInlineStart:0,display:"block","&::before, &::after":{display:"table",content:'""'},"&::after":{clear:"both"}},".slick-slide":{display:"none",float:"left",height:"100%",minHeight:1,img:{display:"block"},"&.dragging img":{pointerEvents:"none"}},".slick-initialized .slick-slide":{display:"block"},".slick-vertical .slick-slide":{display:"block",height:"auto"},".slick-arrow.slick-hidden":{display:"none"},".slick-prev, .slick-next":{position:"absolute",top:"50%",display:"block",width:n,height:n,marginTop:e.calc(n).mul(-1).div(2).equal(),padding:0,color:"transparent",fontSize:0,lineHeight:0,background:"transparent",border:0,outline:"none",cursor:"pointer","&:hover, &:focus":{color:"transparent",background:"transparent",outline:"none","&::before":{opacity:1}},"&.slick-disabled::before":{opacity:.25}},".slick-prev":{insetInlineStart:s,"&::before":{content:'"←"'}},".slick-next":{insetInlineEnd:s,"&::before":{content:'"→"'}},".slick-dots":{position:"absolute",insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:15,display:"flex !important",justifyContent:"center",paddingInlineStart:0,margin:0,listStyle:"none","&-bottom":{bottom:a},"&-top":{top:a,bottom:"auto"},li:{position:"relative",display:"inline-block",flex:"0 1 auto",boxSizing:"content-box",width:e.dotWidth,height:e.dotHeight,marginInline:r,padding:0,textAlign:"center",textIndent:-999,verticalAlign:"top",transition:"all ".concat(e.motionDurationSlow),button:{position:"relative",display:"block",width:"100%",height:e.dotHeight,padding:0,color:"transparent",fontSize:0,background:e.colorBgContainer,border:0,borderRadius:e.dotHeight,outline:"none",cursor:"pointer",opacity:.3,transition:"all ".concat(e.motionDurationSlow),"&: hover, &:focus":{opacity:.75},"&::after":{position:"absolute",inset:e.calc(r).mul(-1).equal(),content:'""'}},"&.slick-active":{width:e.dotActiveWidth,"& button":{background:e.colorBgContainer,opacity:1},"&: hover, &:focus":{opacity:1}}}}})}},p=e=>{let{componentCls:t,carouselDotOffset:i,marginXXS:n}=e,a={width:e.dotHeight,height:e.dotWidth};return{["".concat(t,"-vertical")]:{".slick-dots":{top:"50%",bottom:"auto",flexDirection:"column",width:e.dotHeight,height:"auto",margin:0,transform:"translateY(-50%)","&-left":{insetInlineEnd:"auto",insetInlineStart:i},"&-right":{insetInlineEnd:i,insetInlineStart:"auto"},li:Object.assign(Object.assign({},a),{margin:"".concat((0,l.unit)(n)," 0"),verticalAlign:"baseline",button:a,"&.slick-active":Object.assign(Object.assign({},a),{button:a})})}}}},g=e=>{let{componentCls:t}=e;return[{["".concat(t,"-rtl")]:{direction:"rtl",".slick-dots":{["".concat(t,"-rtl&")]:{flexDirection:"row-reverse"}}}},{["".concat(t,"-vertical")]:{".slick-dots":{["".concat(t,"-rtl&")]:{flexDirection:"column"}}}}]};var m=(0,h.I$)("Carousel",e=>{let{controlHeightLG:t,controlHeightSM:i}=e,n=(0,d.TS)(e,{carouselArrowSize:e.calc(t).div(2).equal(),carouselDotOffset:e.calc(i).div(2).equal()});return[u(n),p(n),g(n)]},()=>({dotWidth:16,dotHeight:3,dotWidthActive:24,dotActiveWidth:24}),{deprecatedTokens:[["dotWidthActive","dotActiveWidth"]]}),f=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(i[n[a]]=e[n[a]]);return i},v=n.forwardRef((e,t)=>{let{dots:i=!0,arrows:r=!1,draggable:l=!1,waitForAnimate:c=!1,dotPosition:h="bottom",vertical:d="left"===h||"right"===h,rootClassName:u,className:p,style:g,id:v}=e,y=f(e,["dots","arrows","draggable","waitForAnimate","dotPosition","vertical","rootClassName","className","style","id"]),{getPrefixCls:x,direction:k,carousel:b}=n.useContext(o.E_),C=n.useRef(),w=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];C.current.slickGoTo(e,t)};n.useImperativeHandle(t,()=>({goTo:w,autoPlay:C.current.innerSlider.autoPlay,innerSlider:C.current.innerSlider,prev:C.current.slickPrev,next:C.current.slickNext}),[C.current]);let S=n.useRef(n.Children.count(e.children));n.useEffect(()=>{S.current!==n.Children.count(e.children)&&(w(e.initialSlide||0,!1),S.current=n.Children.count(e.children))},[e.children]);let _=Object.assign({vertical:d,className:s()(p,null==b?void 0:b.className),style:Object.assign(Object.assign({},null==b?void 0:b.style),g)},y);"fade"===_.effect&&(_.fade=!0);let T=x("carousel",_.prefixCls),P="slick-dots",A=s()(P,"".concat(P,"-").concat(h),"boolean"!=typeof i&&(null==i?void 0:i.className)),[D,N]=m(T),j=s()(T,{["".concat(T,"-rtl")]:"rtl"===k,["".concat(T,"-vertical")]:_.vertical},N,u);return D(n.createElement("div",{className:j,id:v},n.createElement(a.default,Object.assign({ref:C},_,{dots:!!i,dotsClass:A,arrows:r,draggable:l,verticalSwiping:d,waitForAnimate:c}))))})},91221:function(e,t,i){var n=i(97312),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return n.isMemo(e)?s:o[e.$$typeof]||a}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=s;var c=Object.defineProperty,h=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(g){var a=p(i);a&&a!==g&&e(t,a,n)}var s=h(i);d&&(s=s.concat(d(i)));for(var o=l(t),m=l(i),f=0;f<s.length;++f){var v=s[f];if(!r[v]&&!(n&&n[v])&&!(m&&m[v])&&!(o&&o[v])){var y=u(i,v);try{c(t,v,y)}catch(e){}}}}return t}},42826:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Animation=void 0;let n=i(32800),a=i(60767),r=n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return new Date().getTime()};class s{setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){let t=this.layers,i=t.length;for(let n=0;n<i;n++)if(t[n]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){let e=s.animations,t=e.length;for(let i=0;i<t;i++)if(e[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),s._addAnimation(this),this}stop(){return s._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){let t=e.id,i=this.animations,n=i.length;for(let e=0;e<n;e++)if(i[e].id===t){this.animations.splice(e,1);break}}static _runFrames(){let e={},t=this.animations;for(let i=0;i<t.length;i++){let n=t[i],a=n.layers,s=n.func;n._updateFrameObject(r());let o=a.length;if(!s||!1!==s.call(n,n.frame))for(let t=0;t<o;t++){let i=a[t];void 0!==i._id&&(e[i._id]=i)}}for(let t in e)e.hasOwnProperty(t)&&e[t].batchDraw()}static _animationLoop(){s.animations.length?(s._runFrames(),a.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,a.Util.requestAnimFrame(this._animationLoop))}constructor(e,t){this.id=s.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=e,this.setLayers(t)}}t.Animation=s,s.animations=[],s.animIdCounter=0,s.animRunning=!1},53501:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],t.getCubicArcLength=(e,n,a)=>{let r,s,o;r=a/2,s=0;for(let a=0;a<20;a++)o=r*t.tValues[20][a]+r,s+=t.cValues[20][a]*function(e,t,n){let a=i(1,n,e),r=i(1,n,t);return Math.sqrt(a*a+r*r)}(e,n,o);return r*s},t.getQuadraticArcLength=(e,t,i)=>{void 0===i&&(i=1);let n=e[0]-2*e[1]+e[2],a=t[0]-2*t[1]+t[2],r=2*e[1]-2*e[0],s=2*t[1]-2*t[0],o=4*(n*n+a*a);if(0===o)return i*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));let l=4*(n*r+a*s)/(2*o),c=i+l,h=(r*r+s*s)/o-l*l,d=c*c+h>0?Math.sqrt(c*c+h):0,u=l*l+h>0?Math.sqrt(l*l+h):0;return Math.sqrt(o)/2*(c*d-l*u+(l+Math.sqrt(l*l+h)!==0?h*Math.log(Math.abs((c+d)/(l+u))):0))};let i=(e,n,a)=>{let r,s;let o=a.length-1;if(0===o)return 0;if(0===e){s=0;for(let e=0;e<=o;e++)s+=t.binomialCoefficients[o][e]*Math.pow(1-n,o-e)*Math.pow(n,e)*a[e];return s}r=Array(o);for(let e=0;e<o;e++)r[e]=o*(a[e+1]-a[e]);return i(e-1,n,r)};t.t2length=(e,t,i)=>{let n=1,a=e/t,r=(e-i(a))/t,s=0;for(;n>.001;){let o=Math.abs(e-i(a+r))/t;if(o<n)n=o,a+=r;else{let s=Math.abs(e-i(a-r))/t;s<n?(n=s,a-=r):r/=2}if(++s>500)break}return a}},25314:function(e,t,i){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.HitCanvas=t.SceneCanvas=t.Canvas=void 0;let a=i(60767),r=i(80314),s=i(32800),o=i(37305),l=i(77527);class c{getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch(e){try{return this._canvas.toDataURL()}catch(e){return a.Util.error("Unable to get data URL. "+e.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=(e||{}).pixelRatio||s.Konva.pixelRatio||function(){if(n)return n;var e=a.Util.createCanvasElement(),t=e.getContext("2d");return n=(s.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),a.Util.releaseCanvas(e),n}();this.pixelRatio=t,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}}t.Canvas=c,o.Factory.addGetterSetter(c,"pixelRatio",void 0,(0,l.getNumberValidator)());class h extends c{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new r.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}t.SceneCanvas=h;class d extends c{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new r.HitContext(this),this.setSize(e.width,e.height)}}t.HitCanvas=d},6641:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;let n=i(37305),a=i(91148),r=i(77527);class s extends a.Node{getChildren(e){if(!e)return this.children||[];let t=this.children||[];var i=[];return t.forEach(function(t){e(t)&&i.push(t)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(0===t.length)return this;if(t.length>1){for(var n=0;n<t.length;n++)this.add(t[n]);return this}let a=t[0];return a.getParent()?a.moveTo(this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw()),this}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var i=[];return this._descendants(n=>{let a=n._isMatch(e);return a&&i.push(n),!!a&&!!t}),i}_descendants(e){for(let t of this.getChildren())if(e(t)||t.hasChildren()&&t._descendants(e))return!0;return!1}toObject(){var e=a.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var t=a.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(e){t.add(e.clone())}),t}getAllIntersections(e){var t=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&t.push(i)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach(function(t){t._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach(function(e,t){e.index=t}),this._requestDraw()}drawScene(e,t){var i=this.getLayer(),n=e||i&&i.getCanvas(),a=n&&n.getContext(),r=this._getCanvasCache(),s=r&&r.scene,o=n&&n.isCache;if(!this.isVisible()&&!o)return this;if(s){a.save();var l=this.getAbsoluteTransform(t).getMatrix();a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(a),a.restore()}else this._drawChildren("drawScene",n,t);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var i=this.getLayer(),n=e||i&&i.hitCanvas,a=n&&n.getContext(),r=this._getCanvasCache();if(r&&r.hit){a.save();var s=this.getAbsoluteTransform(t).getMatrix();a.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._drawCachedHitCanvas(a),a.restore()}else this._drawChildren("drawHit",n,t);return this}_drawChildren(e,t,i){var n,a=t&&t.getContext(),r=this.clipWidth(),s=this.clipHeight(),o=this.clipFunc(),l=r&&s||o;let c=i===this;if(l){let e;a.save();var h=this.getAbsoluteTransform(i),d=h.getMatrix();if(a.transform(d[0],d[1],d[2],d[3],d[4],d[5]),a.beginPath(),o)e=o.call(this,a,this);else{var u=this.clipX(),p=this.clipY();a.rect(u,p,r,s)}a.clip.apply(a,e),d=h.copy().invert().getMatrix(),a.transform(d[0],d[1],d[2],d[3],d[4],d[5])}var g=!c&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;g&&(a.save(),a._applyGlobalCompositeOperation(this)),null===(n=this.children)||void 0===n||n.forEach(function(n){n[e](t,i)}),g&&a.restore(),l&&a.restore()}getClientRect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,i,n,a,r,s=e.skipTransform,o=e.relativeTo,l={x:1/0,y:1/0,width:0,height:0},c=this;null===(t=this.children)||void 0===t||t.forEach(function(t){if(t.visible()){var s=t.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});(0!==s.width||0!==s.height)&&(void 0===i?(i=s.x,n=s.y,a=s.x+s.width,r=s.y+s.height):(i=Math.min(i,s.x),n=Math.min(n,s.y),a=Math.max(a,s.x+s.width),r=Math.max(r,s.y+s.height)))}});for(var h=this.find("Shape"),d=!1,u=0;u<h.length;u++)if(h[u]._isVisible(this)){d=!0;break}return(l=d&&void 0!==i?{x:i,y:n,width:a-i,height:r-n}:{x:0,y:0,width:0,height:0},s)?l:this._transformedRect(l,o)}constructor(){super(...arguments),this.children=[]}}t.Container=s,n.Factory.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),n.Factory.addGetterSetter(s,"clipX",void 0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(s,"clipY",void 0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(s,"clipWidth",void 0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(s,"clipHeight",void 0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(s,"clipFunc")},80314:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HitContext=t.SceneContext=t.Context=void 0;let n=i(60767),a=i(32800);var r=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class s{fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){var i,a,r,s,o=this.traceArr,l=o.length,c="";for(i=0;i<l;i++)(r=(a=o[i]).method)?(s=a.args,c+=r,e?c+="()":n.Util._isArray(s[0])?c+="(["+s.join(",")+"])":(t&&(s=s.map(e=>"number"==typeof e?Math.floor(e):e)),c+="("+s.join(",")+")")):(c+=a.property,e||(c+="="+a.val)),c+=";";return c}clearTrace(){this.traceArr=[]}_trace(e){var t=this.traceArr;t.push(e),t.length>=100&&t.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){let t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){var t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){let t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,i,n,a,r){this._context.arc(e,t,i,n,a,r)}arcTo(e,t,i,n,a){this._context.arcTo(e,t,i,n,a)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,i,n,a,r){this._context.bezierCurveTo(e,t,i,n,a,r)}clearRect(e,t,i,n){this._context.clearRect(e,t,i,n)}clip(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(e,t){var i=arguments;return 2===i.length?this._context.createImageData(e,t):1===i.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,i,n){return this._context.createLinearGradient(e,t,i,n)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,i,n,a,r){return this._context.createRadialGradient(e,t,i,n,a,r)}drawImage(e,t,i,n,a,r,s,o,l){var c=arguments,h=this._context;3===c.length?h.drawImage(e,t,i):5===c.length?h.drawImage(e,t,i,n,a):9===c.length&&h.drawImage(e,t,i,n,a,r,s,o,l)}ellipse(e,t,i,n,a,r,s,o){this._context.ellipse(e,t,i,n,a,r,s,o)}isPointInPath(e,t,i,n){return i?this._context.isPointInPath(i,e,t,n):this._context.isPointInPath(e,t,n)}fill(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this._context.fill.apply(this._context,t)}fillRect(e,t,i,n){this._context.fillRect(e,t,i,n)}strokeRect(e,t,i,n){this._context.strokeRect(e,t,i,n)}fillText(e,t,i,n){n?this._context.fillText(e,t,i,n):this._context.fillText(e,t,i)}measureText(e){return this._context.measureText(e)}getImageData(e,t,i,n){return this._context.getImageData(e,t,i,n)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,i,n){this._context.rect(e,t,i,n)}putImageData(e,t,i){this._context.putImageData(e,t,i)}quadraticCurveTo(e,t,i,n){this._context.quadraticCurveTo(e,t,i,n)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,i,n,a,r){this._context.setTransform(e,t,i,n,a,r)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,i,n){this._context.strokeText(e,t,i,n)}transform(e,t,i,n,a,r){this._context.transform(e,t,i,n,a,r)}translate(e,t){this._context.translate(e,t)}_enableTrace(){var e,t,i=this,a=r.length,s=this.setAttr,o=function(e){var a,r=i[e];i[e]=function(){return t=function(e){var t,i,a=[],r=e.length,s=n.Util;for(t=0;t<r;t++)i=e[t],s._isNumber(i)?i=Math.round(1e3*i)/1e3:s._isString(i)||(i+=""),a.push(i);return a}(Array.prototype.slice.call(arguments,0)),a=r.apply(i,arguments),i._trace({method:e,args:t}),a}};for(e=0;e<a;e++)o(r[e]);i.setAttr=function(){s.apply(i,arguments);var e=arguments[0],t=arguments[1];("shadowOffsetX"===e||"shadowOffsetY"===e||"shadowBlur"===e)&&(t/=this.canvas.getPixelRatio()),i._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){let t=e.attrs.globalCompositeOperation;t&&"source-over"!==t&&this.setAttr("globalCompositeOperation",t)}constructor(e){this.canvas=e,a.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}}t.Context=s,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(e){Object.defineProperty(s.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class o extends s{_fillColor(e){var t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){let t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){let t=e.fill(),i=e.getFillPriority();if(t&&"color"===i){this._fillColor(e);return}let n=e.getFillPatternImage();if(n&&"pattern"===i){this._fillPattern(e);return}let a=e.getFillLinearGradientColorStops();if(a&&"linear-gradient"===i){this._fillLinearGradient(e);return}let r=e.getFillRadialGradientColorStops();if(r&&"radial-gradient"===i){this._fillRadialGradient(e);return}t?this._fillColor(e):n?this._fillPattern(e):a?this._fillLinearGradient(e):r&&this._fillRadialGradient(e)}_strokeLinearGradient(e){let t=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),n=e.getStrokeLinearGradientColorStops(),a=this.createLinearGradient(t.x,t.y,i.x,i.y);if(n){for(var r=0;r<n.length;r+=2)a.addColorStop(n[r],n[r+1]);this.setAttr("strokeStyle",a)}}_stroke(e){var t=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var t,i,n,a=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",r=null!==(i=e.getShadowBlur())&&void 0!==i?i:5,s=null!==(n=e.getShadowOffset())&&void 0!==n?n:{x:0,y:0},o=e.getAbsoluteScale(),l=this.canvas.getPixelRatio(),c=o.x*l,h=o.y*l;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",r*Math.min(Math.abs(c),Math.abs(h))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*h)}constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}}t.SceneContext=o;class l extends s{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){let a=e.getStrokeScaleEnabled();if(!a){this.save();var t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(e);var i=e.hitStrokeWidth(),n="auto"===i?e.strokeWidth():i;this.setAttr("lineWidth",n),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),a||this.restore()}}constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}}t.HitContext=l},31569:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;let n=i(32800),a=i(60767);t.DD={get isDragging(){var r=!1;return t.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&(r=!0)}),r},justDragged:!1,get node(){var s;return t.DD._dragElements.forEach(e=>{s=e.node}),s},_dragElements:new Map,_drag(e){let i=[];t.DD._dragElements.forEach((t,n)=>{let{node:r}=t,s=r.getStage();s.setPointersPositions(e),void 0===t.pointerId&&(t.pointerId=a.Util._getFirstPointerId(e));let o=s._changedPointerPositions.find(e=>e.id===t.pointerId);if(o){if("dragging"!==t.dragStatus){var l=r.dragDistance();if(Math.max(Math.abs(o.x-t.startPointerPos.x),Math.abs(o.y-t.startPointerPos.y))<l||(r.startDrag({evt:e}),!r.isDragging()))return}r._setDragPosition(e,t),i.push(r)}}),i.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:e},!0)})},_endDragBefore(e){let i=[];t.DD._dragElements.forEach(a=>{let{node:r}=a,s=r.getStage();if(e&&s.setPointersPositions(e),!s._changedPointerPositions.find(e=>e.id===a.pointerId))return;("dragging"===a.dragStatus||"stopped"===a.dragStatus)&&(t.DD.justDragged=!0,n.Konva._mouseListenClick=!1,n.Konva._touchListenClick=!1,n.Konva._pointerListenClick=!1,a.dragStatus="stopped");let o=a.node.getLayer()||a.node instanceof n.Konva.Stage&&a.node;o&&-1===i.indexOf(o)&&i.push(o)}),i.forEach(e=>{e.draw()})},_endDragAfter(e){t.DD._dragElements.forEach((i,n)=>{"stopped"===i.dragStatus&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:e},!0),"dragging"!==i.dragStatus&&t.DD._dragElements.delete(n)})}},n.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))},37305:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;let n=i(60767),a=i(77527);t.Factory={addGetterSetter(e,i,n,a,r){t.Factory.addGetter(e,i,n),t.Factory.addSetter(e,i,a,r),t.Factory.addOverloadedGetterSetter(e,i)},addGetter(e,t,i){var a="get"+n.Util._capitalize(t);e.prototype[a]=e.prototype[a]||function(){var e=this.attrs[t];return void 0===e?i:e}},addSetter(e,i,a,r){var s="set"+n.Util._capitalize(i);e.prototype[s]||t.Factory.overWriteSetter(e,i,a,r)},overWriteSetter(e,t,i,a){var r="set"+n.Util._capitalize(t);e.prototype[r]=function(e){return i&&null!=e&&(e=i.call(this,e,t)),this._setAttr(t,e),a&&a.call(this),this}},addComponentsGetterSetter(e,i,r,s,o){var l,c,h=r.length,d=n.Util._capitalize,u="get"+d(i),p="set"+d(i);e.prototype[u]=function(){var e={};for(l=0;l<h;l++)e[c=r[l]]=this.getAttr(i+d(c));return e};var g=(0,a.getComponentValidator)(r);e.prototype[p]=function(e){var t,n=this.attrs[i];for(t in s&&(e=s.call(this,e)),g&&g.call(this,e,i),e)e.hasOwnProperty(t)&&this._setAttr(i+d(t),e[t]);return e||r.forEach(e=>{this._setAttr(i+d(e),void 0)}),this._fireChangeEvent(i,n,e),o&&o.call(this),this},t.Factory.addOverloadedGetterSetter(e,i)},addOverloadedGetterSetter(e,t){var i=n.Util._capitalize(t),a="set"+i,r="get"+i;e.prototype[t]=function(){return arguments.length?(this[a](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(e,i,a,r){n.Util.error("Adding deprecated "+i);var s="get"+n.Util._capitalize(i),o=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[s]=function(){n.Util.error(o);var e=this.attrs[i];return void 0===e?a:e},t.Factory.addSetter(e,i,r,function(){n.Util.error(o)}),t.Factory.addOverloadedGetterSetter(e,i)},backCompat(e,t){n.Util.each(t,function(t,i){var a=e.prototype[i],r="get"+n.Util._capitalize(t),s="set"+n.Util._capitalize(t);function o(){a.apply(this,arguments),n.Util.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}e.prototype[t]=o,e.prototype[r]=o,e.prototype[s]=o})},afterSetFilter(){this._filterUpToDate=!1}}},80089:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FastLayer=void 0;let n=i(60767),a=i(83067),r=i(32800);class s extends a.Layer{constructor(e){super(e),this.listening(!1),n.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}t.FastLayer=s,s.prototype.nodeType="FastLayer",(0,r._registerNode)(s)},32800:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;let n=Math.PI/180;t.glob=void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},t.Konva={_global:t.glob,version:"9.2.3",isBrowser:"undefined"!=typeof window&&("[object Window]"===({}).toString.call(window)||"[object global]"===({}).toString.call(window)),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle:e=>t.Konva.angleDeg?e*n:e,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>t.Konva.DD.isDragging,isDragReady:()=>!!t.Konva.DD.node,releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(e){t.glob.Konva=e}},t._registerNode=e=>{t.Konva[e.prototype.getClassName()]=e},t.Konva._injectGlobal(t.Konva)},87147:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;let n=i(60767),a=i(6641),r=i(32800);class s extends a.Container{_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&n.Util.throw("You may only add groups and shapes to groups.")}}t.Group=s,s.prototype.nodeType="Group",(0,r._registerNode)(s)},83067:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Layer=void 0;let n=i(60767),a=i(6641),r=i(91148),s=i(37305),o=i(25314),l=i(77527),c=i(67181),h=i(32800);var d=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],u=d.length;class p extends a.Container{createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;var e=this.getStage();return!!e&&!!e.content&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),e&&e.parentNode&&n.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize(e){let{width:t,height:i}=e;return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&n.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){n.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){n.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,n.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var t=1,i=!1;;){for(let n=0;n<u;n++){let a=d[n],r=this._getIntersection({x:e.x+a.x*t,y:e.y+a.y*t}),s=r.shape;if(s)return s;if(i=!!r.antialiased,!r.antialiased)break}if(!i)return null;t+=1}}_getIntersection(e){let t=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,a=i[3];if(255===a){let e=n.Util._rgbToHex(i[0],i[1],i[2]),t=c.shapes["#"+e];return t?{shape:t}:{antialiased:!0}}return a>0?{antialiased:!0}:{}}drawScene(e,t){var i=this.getLayer(),n=e||i&&i.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),a.Container.prototype.drawScene.call(this,n,t),this._fire("draw",{node:this}),this}drawHit(e,t){var i=this.getLayer(),n=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),a.Container.prototype.drawHit.call(this,n,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var e=this.parent;this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return n.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}constructor(e){super(e),this.canvas=new o.SceneCanvas,this.hitCanvas=new o.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}}t.Layer=p,p.prototype.nodeType="Layer",(0,h._registerNode)(p),s.Factory.addGetterSetter(p,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(p,"clearBeforeDraw",!0),s.Factory.addGetterSetter(p,"hitGraphEnabled",!0,(0,l.getBooleanValidator)())},91148:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;let n=i(60767),a=i(37305),r=i(25314),s=i(32800),o=i(31569),l=i(77527);var c="absoluteOpacity",h="allEventListeners",d="absoluteTransform",u="absoluteScale",p="canvas",g="listening",m="mouseenter",f="mouseleave",v="Shape",y="stage",x="transform",k="visible";let b=1;class C{hasChildren(){return!1}_clearCache(e){(e===x||e===d)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){var i=this._cache.get(e),n=e===x||e===d;return(void 0===i||n&&!0===i.dirty)&&(i=t.call(this),this._cache.set(e,i)),i}_calculate(e,t,i){if(!this._attachedDepsListeners.get(e)){let i=t.map(e=>e+"Change.konva").join(" ");this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===d&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){let{scene:e,filter:t,hit:i}=this._cache.get(p);n.Util.releaseCanvas(e,t,i),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var t=e||{},i={};(void 0===t.x||void 0===t.y||void 0===t.width||void 0===t.height)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var a=Math.ceil(t.width||i.width),s=Math.ceil(t.height||i.height),o=t.pixelRatio,l=void 0===t.x?Math.floor(i.x):t.x,h=void 0===t.y?Math.floor(i.y):t.y,d=t.offset||0,g=t.drawBorder||!1,m=t.hitCanvasPixelRatio||1;if(!a||!s){n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}a+=2*d+1,s+=2*d+1,l-=d,h-=d;var f=new r.SceneCanvas({pixelRatio:o,width:a,height:s}),v=new r.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),y=new r.HitCanvas({pixelRatio:m,width:a,height:s}),x=f.getContext(),k=y.getContext();return y.isCache=!0,f.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,!1===t.imageSmoothingEnabled&&(f.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),x.save(),k.save(),x.translate(-l,-h),k.translate(-l,-h),this._isUnderCache=!0,this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(u),this.drawScene(f,this),this.drawHit(y,this),this._isUnderCache=!1,x.restore(),k.restore(),g&&(x.save(),x.beginPath(),x.rect(0,0,a,s),x.closePath(),x.setAttr("strokeStyle","red"),x.setAttr("lineWidth",5),x.stroke(),x.restore()),this._cache.set(p,{scene:f,filter:v,hit:y,x:l,y:h}),this._requestDraw(),this}isCached(){return this._cache.has(p)}getClientRect(e){throw Error('abstract "getClientRect" method call')}_transformedRect(e,t){var i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=1/0,a=1/0,r=-1/0,s=-1/0,o=this.getAbsoluteTransform(t);return i.forEach(function(e){var t=o.point(e);void 0===n&&(n=r=t.x,a=s=t.y),n=Math.min(n,t.x),a=Math.min(a,t.y),r=Math.max(r,t.x),s=Math.max(s,t.y)}),{x:n,y:a,width:r-n,height:s-a}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);let t=this._getCanvasCache();e.translate(t.x,t.y);var i=this._getCachedSceneCanvas(),n=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/n,i.height/n),e.restore()}_drawCachedHitCanvas(e){var t=this._getCanvasCache(),i=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e,t,i,a,r=this.filters(),s=this._getCanvasCache(),o=s.scene,l=s.filter,c=l.getContext();if(r){if(!this._filterUpToDate){var h=o.pixelRatio;l.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(e=r.length,c.clear(),c.drawImage(o._canvas,0,0,o.getWidth()/h,o.getHeight()/h),t=c.getImageData(0,0,l.getWidth(),l.getHeight()),i=0;i<e;i++){if(a=r[i],"function"!=typeof a){n.Util.error("Filter should be type of function, but got "+typeof a+" instead. Please check correct filters");continue}a.call(this,t),c.putImageData(t,0,0)}}catch(e){n.Util.error("Unable to apply filter. "+e.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return o}on(e,t){if(this._cache&&this._cache.delete(h),3==arguments.length)return this._delegate.apply(this,arguments);var i,n,a,r,s=e.split(" "),o=s.length;for(i=0;i<o;i++)a=(n=s[i].split("."))[0],r=n[1]||"",this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:r,handler:t});return this}off(e,t){var i,n,a,r,s,o=(e||"").split(" "),l=o.length;if(this._cache&&this._cache.delete(h),!e)for(n in this.eventListeners)this._off(n);for(i=0;i<l;i++)if(r=(a=o[i].split("."))[0],s=a[1],r)this.eventListeners[r]&&this._off(r,s,t);else for(n in this.eventListeners)this._off(n,s,t);return this}dispatchEvent(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(e){t.call(this,e.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,i){var a=this;this.on(e,function(e){for(var r=e.target.findAncestors(t,!0,a),s=0;s<r.length;s++)(e=n.Util.cloneObject(e)).currentTarget=r[s],i.call(r[s],e)})}remove(){return this.isDragging()&&this.stopDrag(),o.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var t="get"+n.Util._capitalize(e);return n.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),t=[];e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var t,i;if(!e)return this;for(t in e)"children"!==t&&(i="set"+n.Util._capitalize(t),n.Util._isFunction(this[i])?this[i](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(e){if(!this.listening())return!1;let t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(k,this._isVisible)}_isVisible(e){if(!this.visible())return!1;let t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isVisible(e)&&this._isListening(e);var i=this.getLayer(),n=!1;o.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType?n=!0:e.node.getLayer()===i&&(n=!0))});var a=!t&&!s.Konva.hitOnDragEnabled&&n;return this.isListening()&&this.isVisible()&&!a}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e,t,i,n,a=this.getDepth(),r=this,s=0;let o=this.getStage();return"Stage"!==r.nodeType&&o&&function o(l){for(i=0,e=[],t=l.length;i<t;i++)n=l[i],s++,n.nodeType!==v&&(e=e.concat(n.getChildren().slice())),n._id===r._id&&(i=t);e.length>0&&e[0].getDepth()<=a&&o(e)}(o.getChildren()),s}getDepth(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(x),this._clearSelfAndDescendantCache(d)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let e=this.getStage();if(!e)return null;var t=e.getPointerPosition();if(!t)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(e){let t=!1,i=this.parent;for(;i;){if(i.isCached()){t=!0;break}i=i.parent}t&&!e&&(e=!0);var a=this.getAbsoluteTransform(e).getMatrix(),r=new n.Transform,s=this.offset();return r.m=a.slice(),r.translate(s.x,s.y),r.getTranslation()}setAbsolutePosition(e){let{x:t,y:i,...n}=this._clearTransform();this.attrs.x=t,this.attrs.y=i,this._clearCache(x);var a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(e.x,e.y),e={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(x),this._clearSelfAndDescendantCache(d),this}_setTransform(e){var t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var t=e.x,i=e.y,n=this.x(),a=this.y();return void 0!==t&&(n+=t),void 0!==i&&(a+=i),this.setPosition({x:n,y:a}),this}_eachAncestorReverse(e,t){var i,n,a=[],r=this.getParent();if(!t||t._id!==this._id){for(a.unshift(this);r&&(!t||r._id!==t._id);)a.unshift(r),r=r.parent;for(n=0,i=a.length;n<i;n++)e(a[n])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&n.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(c,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e,t,i,a,r={},s=this.getAttrs();for(e in r.attrs={},s)t=s[e],(!n.Util.isObject(t)||n.Util._isPlainObject(t)||n.Util._isArray(t))&&(i="function"==typeof this[e]&&this[e],delete s[e],a=i?i.call(this):null,s[e]=t,a!==t&&(r.attrs[e]=t));return r.className=this.getClassName(),n.Util._prepareToStringify(r)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,i){var n=[];t&&this._isMatch(e)&&n.push(this);for(var a=this.parent;a&&a!==i;)a._isMatch(e)&&n.push(a),a=a.parent;return n}isAncestorOf(e){return!1}findAncestor(e,t,i){return this.findAncestors(e,t,i)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);var t,i,a=e.replace(/ /g,"").split(","),r=a.length;for(t=0;t<r;t++)if(i=a[t],n.Util.isValidSelector(i)||(n.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),"#"===i.charAt(0)){if(this.id()===i.slice(1))return!0}else if("."===i.charAt(0)){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(y,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return t.target=t.target||this,i?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(d,this._getAbsoluteTransform)}_getAbsoluteTransform(e){if(e)return t=new n.Transform,this._eachAncestorReverse(function(e){var i=e.transformsEnabled();"all"===i?t.multiply(e.getTransform()):"position"===i&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())},e),t;t=this._cache.get(d)||new n.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();var t,i=this.transformsEnabled();if("all"===i)t.multiply(this.getTransform());else if("position"===i){let e=this.attrs.x||0,i=this.attrs.y||0,n=this.attrs.offsetX||0,a=this.attrs.offsetY||0;t.translate(e-n,i-a)}return t.dirty=!1,t}getAbsoluteScale(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();let i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(x,this._getTransform)}_getTransform(){var e,t,i=this._cache.get(x)||new n.Transform;i.reset();var a=this.x(),r=this.y(),o=s.Konva.getAngle(this.rotation()),l=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,c=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,h=this.attrs.skewX||0,d=this.attrs.skewY||0,u=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(0!==a||0!==r)&&i.translate(a,r),0!==o&&i.rotate(o),(0!==h||0!==d)&&i.skew(h,d),(1!==l||1!==c)&&i.scale(l,c),(0!==u||0!==p)&&i.translate(-1*u,-1*p),i.dirty=!1,i}clone(e){var t,i,a,r,s,o=n.Util.cloneObject(this.attrs);for(t in e)o[t]=e[t];var l=new this.constructor(o);for(t in this.eventListeners)for(r=0,a=(i=this.eventListeners[t]).length;r<a;r++)0>(s=i[r]).name.indexOf("konva")&&(l.eventListeners[t]||(l.eventListeners[t]=[]),l.eventListeners[t].push(s));return l}_toKonvaCanvas(e){e=e||{};var t=this.getClientRect(),i=this.getStage(),n=void 0!==e.x?e.x:Math.floor(t.x),a=void 0!==e.y?e.y:Math.floor(t.y),s=e.pixelRatio||1,o=new r.SceneCanvas({width:e.width||Math.ceil(t.width)||(i?i.width():0),height:e.height||Math.ceil(t.height)||(i?i.height():0),pixelRatio:s}),l=o.getContext();return!1===e.imageSmoothingEnabled&&(l._context.imageSmoothingEnabled=!1),l.save(),(n||a)&&l.translate(-1*n,-1*a),this.drawScene(o),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){var t=(e=e||{}).mimeType||null,i=e.quality||null,n=this._toKonvaCanvas(e).toDataURL(t,i);return e.callback&&e.callback(n),n}toImage(e){return new Promise((t,i)=>{try{let i=null==e?void 0:e.callback;i&&delete e.callback,n.Util._urlToImage(this.toDataURL(e),function(e){t(e),null==i||i(e)})}catch(e){i(e)}})}toBlob(e){return new Promise((t,i)=>{try{let i=null==e?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(e=>{t(e),null==i||i(e)})}catch(e){i(e)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(e,t,i){var n,a,r,s=this.eventListeners[e];for(n=0;n<s.length;n++)if(a=s[n].name,r=s[n].handler,("konva"!==a||"konva"===t)&&(!t||a===t)&&(!i||i===r)){if(s.splice(n,1),0===s.length){delete this.eventListeners[e];break}n--}}_fireChangeEvent(e,t,i){this._fire(e+"Change",{oldVal:t,newVal:i})}addName(e){if(!this.hasName(e)){var t=this.name();this.name(t?t+" "+e:e)}return this}hasName(e){if(!e)return!1;let t=this.name();return!!t&&-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){var t=(this.name()||"").split(/\s/g),i=t.indexOf(e);return -1!==i&&(t.splice(i,1),this.name(t.join(" "))),this}setAttr(e,t){var i=this["set"+n.Util._capitalize(e)];return n.Util._isFunction(i)?i.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(s.Konva.autoDrawEnabled){let e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){var i=this.attrs[e];(i!==t||n.Util.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,t),this._requestDraw())}_setComponentAttr(e,t,i){var n;void 0!==i&&((n=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=i,this._fireChangeEvent(e,n,i))}_fireAndBubble(e,t,i){if(t&&this.nodeType===v&&(t.target=this),!((e===m||e===f)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||"Stage"===this.nodeType&&!i))){this._fire(e,t);var n=(e===m||e===f)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!n&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,t,i):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,i,n;let a=null!==(t=this._cache.get(h))&&void 0!==t?t:{},r=null==a?void 0:a[e];if(void 0===r){r=[];let t=Object.getPrototypeOf(this);for(;t;){let a=null!==(n=null===(i=t.eventListeners)||void 0===i?void 0:i[e])&&void 0!==n?n:[];r.push(...a),t=Object.getPrototypeOf(t)}a[e]=r,this._cache.set(h,a)}return r}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;let i=this._getProtoListeners(e);if(i)for(var n=0;n<i.length;n++)i[n].handler.call(this,t);let a=this.eventListeners[e];if(a)for(var n=0;n<a.length;n++)a[n].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var t=e?e.pointerId:void 0,i=this.getStage(),n=this.getAbsolutePosition();if(i){var a=i._getPointerById(t)||i._changedPointerPositions[0]||n;o.DD._dragElements.set(this._id,{node:this,startPointerPos:a,offset:{x:a.x-n.x,y:a.y-n.y},dragStatus:"ready",pointerId:t})}}startDrag(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];o.DD._dragElements.has(this._id)||this._createDragElement(e),o.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){let i=this.getStage()._getPointerById(t.pointerId);if(i){var a={x:i.x-t.offset.x,y:i.y-t.offset.y},r=this.dragBoundFunc();if(void 0!==r){let t=r.call(this,a,e);t?a=t:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===a.x&&this._lastPos.y===a.y||(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}}stopDrag(e){let t=o.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),o.DD._endDragBefore(e),o.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){let e=o.DD._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(!(void 0!==e.evt.button)||s.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())){var t=!1;o.DD._dragElements.forEach(e=>{this.isAncestorOf(e.node)&&(t=!0)}),t||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;let e=o.DD._dragElements.get(this._id),t=e&&"dragging"===e.dragStatus,i=e&&"ready"===e.dragStatus;t?this.stopDrag():i&&o.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this.getStage();if(!t)return!1;let i={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return n.Util.haveIntersection(i,this.getClientRect())}static create(e,t){return n.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){var i,a,r,o=C.prototype.getClassName.call(e),l=e.children;if(t&&(e.attrs.container=t),s.Konva[o]||(n.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape"),i=new s.Konva[o](e.attrs),l)for(r=0,a=l.length;r<a;r++)i.add(C._createNode(l[r]));return i}constructor(e){this._id=b++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}}t.Node=C,C.prototype.nodeType="Node",C.prototype._attrsAffectingSize=[],C.prototype.eventListeners={},C.prototype.on.call(C.prototype,"xChange.konva yChange.konva scaleXChange.konva scaleYChange.konva skewXChange.konva skewYChange.konva rotationChange.konva offsetXChange.konva offsetYChange.konva transformsEnabledChange.konva",function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(x),this._clearSelfAndDescendantCache(d)}),C.prototype.on.call(C.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(k)}),C.prototype.on.call(C.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),C.prototype.on.call(C.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(c)});let w=a.Factory.addGetterSetter;w(C,"zIndex"),w(C,"absolutePosition"),w(C,"position"),w(C,"x",0,(0,l.getNumberValidator)()),w(C,"y",0,(0,l.getNumberValidator)()),w(C,"globalCompositeOperation","source-over",(0,l.getStringValidator)()),w(C,"opacity",1,(0,l.getNumberValidator)()),w(C,"name","",(0,l.getStringValidator)()),w(C,"id","",(0,l.getStringValidator)()),w(C,"rotation",0,(0,l.getNumberValidator)()),a.Factory.addComponentsGetterSetter(C,"scale",["x","y"]),w(C,"scaleX",1,(0,l.getNumberValidator)()),w(C,"scaleY",1,(0,l.getNumberValidator)()),a.Factory.addComponentsGetterSetter(C,"skew",["x","y"]),w(C,"skewX",0,(0,l.getNumberValidator)()),w(C,"skewY",0,(0,l.getNumberValidator)()),a.Factory.addComponentsGetterSetter(C,"offset",["x","y"]),w(C,"offsetX",0,(0,l.getNumberValidator)()),w(C,"offsetY",0,(0,l.getNumberValidator)()),w(C,"dragDistance",null,(0,l.getNumberValidator)()),w(C,"width",0,(0,l.getNumberValidator)()),w(C,"height",0,(0,l.getNumberValidator)()),w(C,"listening",!0,(0,l.getBooleanValidator)()),w(C,"preventDefault",!0,(0,l.getBooleanValidator)()),w(C,"filters",null,function(e){return this._filterUpToDate=!1,e}),w(C,"visible",!0,(0,l.getBooleanValidator)()),w(C,"transformsEnabled","all",(0,l.getStringValidator)()),w(C,"size"),w(C,"dragBoundFunc"),w(C,"draggable",!1,(0,l.getBooleanValidator)()),a.Factory.backCompat(C,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},73328:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.releaseCapture=t.setPointerCapture=t.hasPointerCapture=t.createEvent=t.getCapturedShape=void 0;let n=i(32800),a=new Map,r=void 0!==n.Konva._global.PointerEvent;function s(e){return{evt:e,pointerId:e.pointerId}}function o(e,t){let i=a.get(e);if(!i)return;let n=i.getStage();n&&n.content,a.delete(e),r&&i._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}t.getCapturedShape=function(e){return a.get(e)},t.createEvent=s,t.hasPointerCapture=function(e,t){return a.get(e)===t},t.setPointerCapture=function(e,t){o(e),t.getStage()&&(a.set(e,t),r&&t._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))},t.releaseCapture=o},67181:function(e,t,i){let n;Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;let a=i(32800),r=i(60767),s=i(37305),o=i(91148),l=i(77527),c=i(32800),h=i(73328);var d="hasShadow",u="shadowRGBA",p="patternImage",g="linearGradient",m="radialGradient";function f(){return n||(n=r.Util.createCanvasElement().getContext("2d"))}t.shapes={};class v extends o.Node{getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(d,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){let e=f().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){let t=new r.Transform;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(a.Konva.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let i=t.getMatrix(),n="undefined"==typeof DOMMatrix?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);e.setTransform(n)}return e}}_getLinearGradient(){return this._getCache(g,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var t=f(),i=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),a=t.createLinearGradient(i.x,i.y,n.x,n.y),r=0;r<e.length;r+=2)a.addColorStop(e[r],e[r+1]);return a}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var t=f(),i=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),a=t.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),r=0;r<e.length;r+=2)a.addColorStop(e[r],e[r+1]);return a}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=r.Util.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var t=this.getStage();if(!t)return!1;let i=t.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!this.getStage()||!(null===(t=this.attrs.perfectDrawEnabled)||void 0===t||t))return!1;let i=e||this.hasFill(),n=this.hasStroke(),a=1!==this.getAbsoluteOpacity();if(i&&n&&a)return!0;let r=this.hasShadow(),s=this.shadowForStrokeEnabled();return!!i&&!!n&&!!r&&!!s}setStrokeHitEnabled(e){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skipTransform,i=e.relativeTo,n=this.getSelfRect(),a=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,r=n.width+a,s=n.height+a,o=!e.skipShadow&&this.hasShadow(),l=o?this.shadowOffsetX():0,c=o?this.shadowOffsetY():0,h=o&&this.shadowBlur()||0,d={width:r+Math.abs(l)+2*h,height:s+Math.abs(c)+2*h,x:-(a/2+h)+Math.min(l,0)+n.x,y:-(a/2+h)+Math.min(c,0)+n.y};return t?d:this._transformedRect(d,i)}drawScene(e,t){var i,n,a=this.getLayer(),r=e||a.getCanvas(),s=r.getContext(),o=this._getCanvasCache(),l=this.getSceneFunc(),c=this.hasShadow(),h=r.isCache,d=t===this;if(!this.isVisible()&&!d)return this;if(o){s.save();var u=this.getAbsoluteTransform(t).getMatrix();return s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!l)return this;if(s.save(),this._useBufferCanvas()&&!h){(n=(i=this.getStage().bufferCanvas).getContext()).clear(),n.save(),n._applyLineJoin(this);var p=this.getAbsoluteTransform(t).getMatrix();n.transform(p[0],p[1],p[2],p[3],p[4],p[5]),l.call(this,n,this),n.restore();var g=i.pixelRatio;c&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(i._canvas,0,0,i.width/g,i.height/g)}else{if(s._applyLineJoin(this),!d){var p=this.getAbsoluteTransform(t).getMatrix();s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}c&&s._applyShadow(this),l.call(this,s,this)}return s.restore(),this}drawHit(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.shouldDrawHit(t,i))return this;var n=this.getLayer(),a=e||n.hitCanvas,s=a&&a.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){s.save();var h=this.getAbsoluteTransform(t).getMatrix();return s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),s._applyLineJoin(this),this!==t){var d=this.getAbsoluteTransform(t).getMatrix();s.transform(d[0],d[1],d[2],d[3],d[4],d[5])}return o.call(this,s,this),s.restore(),this}drawHitFromCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t,i,n,a,s,o=this._getCanvasCache(),l=this._getCachedSceneCanvas(),c=o.hit,h=c.getContext(),d=c.getWidth(),u=c.getHeight();h.clear(),h.drawImage(l._canvas,0,0,d,u);try{for(s=0,n=(i=(t=h.getImageData(0,0,d,u)).data).length,a=r.Util._hexToRgb(this.colorKey);s<n;s+=4)i[s+3]>e?(i[s]=a.r,i[s+1]=a.g,i[s+2]=a.b,i[s+3]=255):i[s+3]=0;h.putImageData(t,0,0)}catch(e){r.Util.error("Unable to draw hit graph from cached scene canvas. "+e.message)}return this}hasPointerCapture(e){return h.hasPointerCapture(e,this)}setPointerCapture(e){h.setPointerCapture(e,this)}releaseCapture(e){h.releaseCapture(e,this)}constructor(e){let i;for(super(e);!(i=r.Util.getRandomColor())||(i in t.shapes););this.colorKey=i,t.shapes[i]=this}}t.Shape=v,v.prototype._fillFunc=function(e){let t=this.attrs.fillRule;t?e.fill(t):e.fill()},v.prototype._strokeFunc=function(e){e.stroke()},v.prototype._fillFuncHit=function(e){e.fill()},v.prototype._strokeFuncHit=function(e){e.stroke()},v.prototype._centroid=!1,v.prototype.nodeType="Shape",(0,c._registerNode)(v),v.prototype.eventListeners={},v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(d)}),v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(u)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(p)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(g)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(m)}),s.Factory.addGetterSetter(v,"stroke",void 0,(0,l.getStringOrGradientValidator)()),s.Factory.addGetterSetter(v,"strokeWidth",2,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(v,"hitStrokeWidth","auto",(0,l.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(v,"strokeHitEnabled",!0,(0,l.getBooleanValidator)()),s.Factory.addGetterSetter(v,"perfectDrawEnabled",!0,(0,l.getBooleanValidator)()),s.Factory.addGetterSetter(v,"shadowForStrokeEnabled",!0,(0,l.getBooleanValidator)()),s.Factory.addGetterSetter(v,"lineJoin"),s.Factory.addGetterSetter(v,"lineCap"),s.Factory.addGetterSetter(v,"sceneFunc"),s.Factory.addGetterSetter(v,"hitFunc"),s.Factory.addGetterSetter(v,"dash"),s.Factory.addGetterSetter(v,"dashOffset",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"shadowColor",void 0,(0,l.getStringValidator)()),s.Factory.addGetterSetter(v,"shadowBlur",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"shadowOpacity",1,(0,l.getNumberValidator)()),s.Factory.addComponentsGetterSetter(v,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(v,"shadowOffsetX",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"shadowOffsetY",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillPatternImage"),s.Factory.addGetterSetter(v,"fill",void 0,(0,l.getStringOrGradientValidator)()),s.Factory.addGetterSetter(v,"fillPatternX",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillPatternY",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(v,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(v,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(v,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(v,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(v,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(v,"fillEnabled",!0),s.Factory.addGetterSetter(v,"strokeEnabled",!0),s.Factory.addGetterSetter(v,"shadowEnabled",!0),s.Factory.addGetterSetter(v,"dashEnabled",!0),s.Factory.addGetterSetter(v,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(v,"fillPriority","color"),s.Factory.addComponentsGetterSetter(v,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(v,"fillPatternOffsetX",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillPatternOffsetY",0,(0,l.getNumberValidator)()),s.Factory.addComponentsGetterSetter(v,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(v,"fillPatternScaleX",1,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillPatternScaleY",1,(0,l.getNumberValidator)()),s.Factory.addComponentsGetterSetter(v,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(v,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(v,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(v,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(v,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(v,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(v,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(v,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(v,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(v,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(v,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(v,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(v,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(v,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(v,"fillPatternRotation",0),s.Factory.addGetterSetter(v,"fillRule",void 0,(0,l.getStringValidator)()),s.Factory.backCompat(v,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},44806:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;let n=i(60767),a=i(37305),r=i(6641),s=i(32800),o=i(25314),l=i(31569),c=i(32800),h=i(73328);var d="mouseleave",u="mouseover",p="mouseenter",g="mousemove",m="mousedown",f="mouseup",v="pointermove",y="pointerdown",x="pointerup",k="pointercancel",b="pointerout",C="pointerleave",w="pointerover",S="pointerenter",_="contextmenu",T="touchstart",P="touchend",A="touchmove",D="touchcancel",N="wheel",j=[[p,"_pointerenter"],[m,"_pointerdown"],[g,"_pointermove"],[f,"_pointerup"],[d,"_pointerleave"],[T,"_pointerdown"],[A,"_pointermove"],[P,"_pointerup"],[D,"_pointercancel"],[u,"_pointerover"],[N,"_wheel"],[_,"_contextmenu"],[y,"_pointerdown"],[v,"_pointermove"],[x,"_pointerup"],[k,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];let E={mouse:{[b]:"mouseout",[C]:d,[w]:u,[S]:p,[v]:g,[y]:m,[x]:f,[k]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[b]:"touchout",[C]:"touchleave",[w]:"touchover",[S]:"touchenter",[v]:A,[y]:T,[x]:P,[k]:D,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[b]:b,[C]:C,[w]:w,[S]:S,[v]:v,[y]:y,[x]:x,[k]:k,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},M=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",I=e=>{let t=M(e);return"pointer"===t?s.Konva.pointerEventsEnabled&&E.pointer:"touch"===t?E.touch:"mouse"===t?E.mouse:void 0};function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e.clipFunc||e.clipWidth||e.clipHeight)&&n.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}t.stages=[];class F extends r.Container{_validateAdd(e){let t="Layer"===e.getType(),i="FastLayer"===e.getType();t||i||n.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){if("."===e.charAt(0)){var t,i=e.slice(1);e=document.getElementsByClassName(i)[0]}else t="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e,t=this.children,i=t.length;for(e=0;e<i;e++)t[e].clear();return this}clone(e){return e||(e={}),e.container="undefined"!=typeof document&&document.createElement("div"),r.Container.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&n.Util._isInDocument(e)&&this.container().removeChild(e);var i=t.stages.indexOf(this);return i>-1&&t.stages.splice(i,1),n.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(n.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var t=new o.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=t.getContext()._context,n=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),n.forEach(function(t){if(t.isVisible()){var n=t._toKonvaCanvas(e);i.drawImage(n._canvas,e.x,e.y,n.getWidth()/n.getPixelRatio(),n.getHeight()/n.getPixelRatio())}}),t}getIntersection(e){if(!e)return null;var t,i=this.children;for(t=i.length-1;t>=0;t--){let n=i[t].getIntersection(e);if(n)return n}return null}_resizeDOM(){var e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(i=>{i.setSize({width:e,height:t}),i.draw()})}add(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var o=this.children.length;return o>5&&n.Util.warn("The stage has "+o+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),s.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return h.hasPointerCapture(e,this)}setPointerCapture(e){h.setPointerCapture(e,this)}releaseCapture(e){h.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&j.forEach(e=>{let[t,i]=e;this.content.addEventListener(t,e=>{this[i](e)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);let t=I(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);let t=I(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){let t=I(e.type),i=M(e.type);if(t){this.setPointersPositions(e);var n=this._getTargetShape(i),a=!l.DD.isDragging||s.Konva.hitOnDragEnabled;n&&a?(n._fireAndBubble(t.pointerout,{evt:e}),n._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):a&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(e){let t=I(e.type),i=M(e.type);if(t){this.setPointersPositions(e);var n=!1;this._changedPointerPositions.forEach(a=>{var r=this.getIntersection(a);if(l.DD.justDragged=!1,s.Konva["_"+i+"ListenClick"]=!0,!r||!r.isListening())return;s.Konva.capturePointerEventsEnabled&&r.setPointerCapture(a.id),this[i+"ClickStartShape"]=r,r._fireAndBubble(t.pointerdown,{evt:e,pointerId:a.id}),n=!0;let o=e.type.indexOf("touch")>=0;r.preventDefault()&&e.cancelable&&o&&e.preventDefault()}),n||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){let t=I(e.type),i=M(e.type);if(!t||(l.DD.isDragging&&l.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),!(!l.DD.isDragging||s.Konva.hitOnDragEnabled)))return;var n={};let a=!1;var r=this._getTargetShape(i);this._changedPointerPositions.forEach(s=>{let o=h.getCapturedShape(s.id)||this.getIntersection(s),l=s.id,c={evt:e,pointerId:l};var d=r!==o;if(d&&r&&(r._fireAndBubble(t.pointerout,{...c},o),r._fireAndBubble(t.pointerleave,{...c},o)),o){if(n[o._id])return;n[o._id]=!0}o&&o.isListening()?(a=!0,d&&(o._fireAndBubble(t.pointerover,{...c},r),o._fireAndBubble(t.pointerenter,{...c},r),this[i+"targetShape"]=o),o._fireAndBubble(t.pointermove,{...c})):r&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:l}),this[i+"targetShape"]=null)}),a||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){let t=I(e.type),i=M(e.type);if(!t)return;this.setPointersPositions(e);let n=this[i+"ClickStartShape"],a=this[i+"ClickEndShape"];var r={};let o=!1;this._changedPointerPositions.forEach(c=>{let d=h.getCapturedShape(c.id)||this.getIntersection(c);if(d){if(d.releaseCapture(c.id),r[d._id])return;r[d._id]=!0}let u=c.id,p={evt:e,pointerId:u},g=!1;s.Konva["_"+i+"InDblClickWindow"]?(g=!0,clearTimeout(this[i+"DblTimeout"])):l.DD.justDragged||(s.Konva["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){s.Konva["_"+i+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),d&&d.isListening()?(o=!0,this[i+"ClickEndShape"]=d,d._fireAndBubble(t.pointerup,{...p}),s.Konva["_"+i+"ListenClick"]&&n&&n===d&&(d._fireAndBubble(t.pointerclick,{...p}),g&&a&&a===d&&d._fireAndBubble(t.pointerdblclick,{...p}))):(this[i+"ClickEndShape"]=null,s.Konva["_"+i+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:u}),g&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:u}))}),o||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+i+"ListenClick"]=!1,e.cancelable&&"touch"!==i&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(_,{evt:e}):this._fire(_,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(N,{evt:e}):this._fire(N,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);let t=h.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(x,h.createEvent(e)),h.releaseCapture(e.pointerId)}_lostpointercapture(e){h.releaseCapture(e.pointerId)}setPointersPositions(e){var t=this._getContentPosition(),i=null,a=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})})):(i=(e.clientX-t.left)/t.scaleX,a=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:i,y:a},this._pointerPositions=[{x:i,y:a,id:n.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:a,id:n.Util._getFirstPointerId(e)}])}_setPointerPosition(e){n.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),s.Konva.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return n.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}constructor(e){super(R(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{R(this.attrs)}),this._checkVisibility()}}t.Stage=F,F.prototype.nodeType="Stage",(0,c._registerNode)(F),a.Factory.addGetterSetter(F,"container")},23217:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;let n=i(60767),a=i(42826),r=i(91148),s=i(32800);var o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=0,c=["fill","stroke","shadowColor"];class h{fire(e){var t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return new Date().getTime()}constructor(e,t,i,n,a,r,s){this.prop=e,this.propFunc=t,this.begin=n,this._pos=n,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=a-this.begin,this.pause()}}class d{_addAttr(e,t){var i,a,r,s,o,l,h,u,p=this.node,g=p._id;if((r=d.tweens[g][e])&&delete d.attrs[g][r][e],i=p.getAttr(e),n.Util._isArray(t)){if(a=[],o=Math.max(t.length,i.length),"points"===e&&t.length!==i.length&&(t.length>i.length?(h=i,i=n.Util._prepareArrayForTween(i,t,p.closed())):(l=t,t=n.Util._prepareArrayForTween(t,i,p.closed()))),0===e.indexOf("fill"))for(s=0;s<o;s++)if(s%2==0)a.push(t[s]-i[s]);else{var m=n.Util.colorToRGBA(i[s]);u=n.Util.colorToRGBA(t[s]),i[s]=m,a.push({r:u.r-m.r,g:u.g-m.g,b:u.b-m.b,a:u.a-m.a})}else for(s=0;s<o;s++)a.push(t[s]-i[s])}else -1!==c.indexOf(e)?(i=n.Util.colorToRGBA(i),a={r:(u=n.Util.colorToRGBA(t)).r-i.r,g:u.g-i.g,b:u.b-i.b,a:u.a-i.a}):a=t-i;d.attrs[g][this._id][e]={start:i,diff:a,end:t,trueEnd:l,trueStart:h},d.tweens[g][e]=this._id}_tweenFunc(e){var t,i,a,r,s,o,l,h,u=this.node,p=d.attrs[u._id][this._id];for(t in p){if(a=(i=p[t]).start,r=i.diff,h=i.end,n.Util._isArray(a)){if(s=[],l=Math.max(a.length,h.length),0===t.indexOf("fill"))for(o=0;o<l;o++)o%2==0?s.push((a[o]||0)+r[o]*e):s.push("rgba("+Math.round(a[o].r+r[o].r*e)+","+Math.round(a[o].g+r[o].g*e)+","+Math.round(a[o].b+r[o].b*e)+","+(a[o].a+r[o].a*e)+")");else for(o=0;o<l;o++)s.push((a[o]||0)+r[o]*e)}else s=-1!==c.indexOf(t)?"rgba("+Math.round(a.r+r.r*e)+","+Math.round(a.g+r.g*e)+","+Math.round(a.b+r.b*e)+","+(a.a+r.a*e)+")":a+r*e;u.setAttr(t,s)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,t=d.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,t=d.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e,t=this.node._id,i=this._id,n=d.tweens[t];for(e in this.pause(),n)delete d.tweens[t][e];delete d.attrs[t][i]}constructor(e){var i,r,c=this,u=e.node,p=u._id,g=e.easing||t.Easings.Linear,m=!!e.yoyo;i=void 0===e.duration?.3:0===e.duration?.001:e.duration,this.node=u,this._id=l++;var f=u.getLayer()||(u instanceof s.Konva.Stage?u.getLayers():null);for(r in f||n.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new a.Animation(function(){c.tween.onEnterFrame()},f),this.tween=new h(r,function(e){c._tweenFunc(e)},g,0,1,1e3*i,m),this._addListeners(),d.attrs[p]||(d.attrs[p]={}),d.attrs[p][this._id]||(d.attrs[p][this._id]={}),d.tweens[p]||(d.tweens[p]={}),e)void 0===o[r]&&this._addAttr(r,e[r]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}}t.Tween=d,d.attrs={},d.tweens={},r.Node.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new d(e).play()},t.Easings={BackEaseIn:(e,t,i,n)=>i*(e/=n)*e*(2.70158*e-1.70158)+t,BackEaseOut:(e,t,i,n)=>i*((e=e/n-1)*e*(2.70158*e+1.70158)+1)+t,BackEaseInOut(e,t,i,n){var a=1.70158;return(e/=n/2)<1?i/2*(e*e*(((a*=1.525)+1)*e-a))+t:i/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+t},ElasticEaseIn(e,t,i,n,a,r){var s=0;return 0===e?t:1==(e/=n)?t+i:(r||(r=.3*n),!a||a<Math.abs(i)?(a=i,s=r/4):s=r/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(e-=1))*Math.sin(2*Math.PI*(e*n-s)/r))+t)},ElasticEaseOut(e,t,i,n,a,r){var s=0;return 0===e?t:1==(e/=n)?t+i:(r||(r=.3*n),!a||a<Math.abs(i)?(a=i,s=r/4):s=r/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*e)*Math.sin(2*Math.PI*(e*n-s)/r)+i+t)},ElasticEaseInOut(e,t,i,n,a,r){var s=0;return 0===e?t:2==(e/=n/2)?t+i:(r||(r=.3*1.5*n),!a||a<Math.abs(i)?(a=i,s=r/4):s=r/(2*Math.PI)*Math.asin(i/a),e<1)?-(a*Math.pow(2,10*(e-=1))*Math.sin(2*Math.PI*(e*n-s)/r)*.5)+t:a*Math.pow(2,-10*(e-=1))*Math.sin(2*Math.PI*(e*n-s)/r)*.5+i+t},BounceEaseOut:(e,t,i,n)=>(e/=n)<1/2.75?7.5625*e*e*i+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(e,i,n,a)=>n-t.Easings.BounceEaseOut(a-e,0,n,a)+i,BounceEaseInOut:(e,i,n,a)=>e<a/2?.5*t.Easings.BounceEaseIn(2*e,0,n,a)+i:.5*t.Easings.BounceEaseOut(2*e-a,0,n,a)+.5*n+i,EaseIn:(e,t,i,n)=>i*(e/=n)*e+t,EaseOut:(e,t,i,n)=>-i*(e/=n)*(e-2)+t,EaseInOut:(e,t,i,n)=>(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,i,n)=>i*(e/=n)*e*e*e*e+t,StrongEaseOut:(e,t,i,n)=>i*((e=e/n-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,i,n)=>(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,i,n)=>i*e/n+t}},60767:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;let n=i(32800);class a{reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new a(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){var t=Math.cos(e),i=Math.sin(e),n=this.m[0]*t+this.m[2]*i,a=this.m[1]*t+this.m[3]*i,r=-(this.m[0]*i)+this.m[2]*t,s=-(this.m[1]*i)+this.m[3]*t;return this.m[0]=n,this.m[1]=a,this.m[2]=r,this.m[3]=s,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){var i=this.m[0]+this.m[2]*t,n=this.m[1]+this.m[3]*t,a=this.m[2]+this.m[0]*e,r=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=n,this.m[2]=a,this.m[3]=r,this}multiply(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],n=this.m[0]*e.m[2]+this.m[2]*e.m[3],a=this.m[1]*e.m[2]+this.m[3]*e.m[3],r=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],s=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=i,this.m[2]=n,this.m[3]=a,this.m[4]=r,this.m[5]=s,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,i=-this.m[1]*e,n=-this.m[2]*e,a=this.m[0]*e,r=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=i,this.m[2]=n,this.m[3]=a,this.m[4]=r,this.m[5]=s,this}getMatrix(){return this.m}decompose(){var e=this.m[0],i=this.m[1],n=this.m[2],a=this.m[3],r=this.m[4],s=this.m[5],o=e*a-i*n;let l={x:r,y:s,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=e||0!=i){var c=Math.sqrt(e*e+i*i);l.rotation=i>0?Math.acos(e/c):-Math.acos(e/c),l.scaleX=c,l.scaleY=o/c,l.skewX=(e*n+i*a)/o,l.skewY=0}else if(0!=n||0!=a){var h=Math.sqrt(n*n+a*a);l.rotation=Math.PI/2-(a>0?Math.acos(-n/h):-Math.acos(n/h)),l.scaleX=o/h,l.scaleY=h,l.skewX=0,l.skewY=(e*n+i*a)/o}return l.rotation=t.Util._getRotation(l.rotation),l}constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}}t.Transform=a;var r=Math.PI/180,s=180/Math.PI,o="Konva error: ",l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},c=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,h=[];let d="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)};t.Util={_isElement:e=>!!(e&&1==e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;var t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e?1:e>0?1:-1,requestAnimFrame(e){h.push(e),1===h.length&&d(function(){let e=h;h=[],e.forEach(function(e){e()})})},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch(e){}return e},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,i){var n=t.Util.createImageElement();n.onload=function(){i(n)},n.src=e},_rgbToHex:(e,t,i)=>(16777216+(e<<16)+(t<<8)+i).toString(16).slice(1),_hexToRgb(e){var t=parseInt(e=e.replace("#",""),16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e="0"+e;return"#"+e},getRGB(e){var t;return e in l?{r:(t=l[e])[0],g:t[1],b:t[2]}:"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?{r:parseInt((t=c.exec(e.replace(/ /g,"")))[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}:{r:0,g:0,b:0}},colorToRGBA:e=>(e=e||"black",t.Util._namedColorToRBA(e)||t.Util._hex3ColorToRGBA(e)||t.Util._hex4ColorToRGBA(e)||t.Util._hex6ColorToRGBA(e)||t.Util._hex8ColorToRGBA(e)||t.Util._rgbColorToRGBA(e)||t.Util._rgbaColorToRGBA(e)||t.Util._hslColorToRGBA(e)),_namedColorToRBA(e){var t=l[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){let t,i,n;let[a,...r]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),s=Number(r[0])/360,o=Number(r[1])/100,l=Number(r[2])/100;if(0===o)return{r:Math.round(n=255*l),g:Math.round(n),b:Math.round(n),a:1};t=l<.5?l*(1+o):l+o-l*o;let c=2*l-t,h=[0,0,0];for(let e=0;e<3;e++)(i=s+-(1/3*(e-1)))<0&&i++,i>1&&i--,n=6*i<1?c+(t-c)*6*i:2*i<1?t:3*i<2?c+(t-c)*(2/3-i)*6:c,h[e]=255*n;return{r:Math.round(h[0]),g:Math.round(h[1]),b:Math.round(h[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){var t={};for(var i in e)this._isPlainObject(e[i])?t[i]=this.cloneObject(e[i]):this._isArray(e[i])?t[i]=this.cloneArray(e[i]):t[i]=e[i];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*r,radToDeg:e=>e*s,_degToRad:e=>(t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(e)),_radToDeg:e=>(t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(e)),_getRotation:e=>n.Konva.angleDeg?t.Util.radToDeg(e):e,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw Error(o+e)},error(e){console.error(o+e)},warn(e){n.Konva.showWarnings&&console.warn("Konva warning: "+e)},each(e,t){for(var i in e)t(i,e[i])},_inRange:(e,t,i)=>t<=e&&e<i,_getProjectionToSegment(e,t,i,n,a,r){var s,o,l,c=(e-i)*(e-i)+(t-n)*(t-n);if(0==c)s=e,o=t,l=(a-i)*(a-i)+(r-n)*(r-n);else{var h=((a-e)*(i-e)+(r-t)*(n-t))/c;h<0?(s=e,o=t,l=(e-a)*(e-a)+(t-r)*(t-r)):h>1?(s=i,o=n,l=(i-a)*(i-a)+(n-r)*(n-r)):l=((s=e+h*(i-e))-a)*(s-a)+((o=t+h*(n-t))-r)*(o-r)}return[s,o,l]},_getProjectionToLine(e,i,n){var a=t.Util.cloneObject(e),r=Number.MAX_VALUE;return i.forEach(function(s,o){if(n||o!==i.length-1){var l=i[(o+1)%i.length],c=t.Util._getProjectionToSegment(s.x,s.y,l.x,l.y,e.x,e.y),h=c[0],d=c[1],u=c[2];u<r&&(a.x=h,a.y=d,r=u)}}),a},_prepareArrayForTween(e,i,n){var a,r=[],s=[];if(e.length>i.length){var o=i;i=e,e=o}for(a=0;a<e.length;a+=2)r.push({x:e[a],y:e[a+1]});for(a=0;a<i.length;a+=2)s.push({x:i[a],y:i[a+1]});var l=[];return s.forEach(function(e){var i=t.Util._getProjectionToLine(e,r,n);l.push(i.x),l.push(i.y)}),l},_prepareToStringify(e){var i;for(var n in e.visitedByCircularReferenceRemoval=!0,e)if(e.hasOwnProperty(n)&&e[n]&&"object"==typeof e[n]){if(i=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||t.Util._isElement(e[n])){if(!i.configurable)return null;delete e[n]}else if(null===t.Util._prepareToStringify(e[n])){if(!i.configurable)return null;delete e[n]}}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var i in t)e[i]=t[i];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n.Konva.releaseCanvasOnDestroy&&t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(e,t,i,n){let a=0,r=0,s=0,o=0;"number"==typeof n?a=r=s=o=Math.min(n,t/2,i/2):(a=Math.min(n[0]||0,t/2,i/2),r=Math.min(n[1]||0,t/2,i/2),o=Math.min(n[2]||0,t/2,i/2),s=Math.min(n[3]||0,t/2,i/2)),e.moveTo(a,0),e.lineTo(t-r,0),e.arc(t-r,r,r,3*Math.PI/2,0,!1),e.lineTo(t,i-o),e.arc(t-o,i-o,o,0,Math.PI/2,!1),e.lineTo(s,i),e.arc(s,i-s,s,Math.PI/2,Math.PI,!1),e.lineTo(0,a),e.arc(a,a,a,Math.PI,3*Math.PI/2,!1)}}},77527:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getComponentValidator=t.getBooleanValidator=t.getNumberArrayValidator=t.getFunctionValidator=t.getStringOrGradientValidator=t.getStringValidator=t.getNumberOrAutoValidator=t.getNumberOrArrayOfNumbersValidator=t.getNumberValidator=t.alphaComponent=t.RGBComponent=void 0;let n=i(32800),a=i(60767);function r(e){return a.Util._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||a.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}t.RGBComponent=function(e){return e>255?255:e<0?0:Math.round(e)},t.alphaComponent=function(e){return e>1?1:e<1e-4?1e-4:e},t.getNumberValidator=function(){if(n.Konva.isUnminified)return function(e,t){return a.Util._isNumber(e)||a.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}},t.getNumberOrArrayOfNumbersValidator=function(e){if(n.Konva.isUnminified)return function(t,i){let n=a.Util._isNumber(t),s=a.Util._isArray(t)&&t.length==e;return n||s||a.Util.warn(r(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}},t.getNumberOrAutoValidator=function(){if(n.Konva.isUnminified)return function(e,t){var i=a.Util._isNumber(e),n="auto"===e;return i||n||a.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}},t.getStringValidator=function(){if(n.Konva.isUnminified)return function(e,t){return a.Util._isString(e)||a.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}},t.getStringOrGradientValidator=function(){if(n.Konva.isUnminified)return function(e,t){let i=a.Util._isString(e),n="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return i||n||a.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}},t.getFunctionValidator=function(){if(n.Konva.isUnminified)return function(e,t){return a.Util._isFunction(e)||a.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}},t.getNumberArrayValidator=function(){if(n.Konva.isUnminified)return function(e,t){let i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(a.Util._isArray(e)?e.forEach(function(e){a.Util._isNumber(e)||a.Util.warn('"'+t+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")}):a.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}},t.getBooleanValidator=function(){if(n.Konva.isUnminified)return function(e,t){return!0===e||!1===e||a.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}},t.getComponentValidator=function(e){if(n.Konva.isUnminified)return function(t,i){return null==t||a.Util.isObject(t)||a.Util.warn(r(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}},56005:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;let n=i(32800),a=i(60767),r=i(91148),s=i(6641),o=i(44806),l=i(83067),c=i(80089),h=i(87147),d=i(31569),u=i(67181),p=i(42826),g=i(23217),m=i(80314),f=i(25314);t.Konva=a.Util._assign(n.Konva,{Util:a.Util,Transform:a.Transform,Node:r.Node,Container:s.Container,Stage:o.Stage,stages:o.stages,Layer:l.Layer,FastLayer:c.FastLayer,Group:h.Group,DD:d.DD,Shape:u.Shape,shapes:u.shapes,Animation:p.Animation,Tween:g.Tween,Easings:g.Easings,Context:m.Context,Canvas:f.Canvas}),t.default=t.Konva},78922:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;let n=i(56005),a=i(96366),r=i(19046),s=i(25554),o=i(25810),l=i(97869),c=i(15042),h=i(81653),d=i(53895),u=i(562),p=i(49574),g=i(56244),m=i(31116),f=i(81009),v=i(7329),y=i(98978),x=i(60552),k=i(9512),b=i(86226),C=i(29919),w=i(34836),S=i(57374),_=i(50458),T=i(89355),P=i(1986),A=i(42111),D=i(65968),N=i(40342),j=i(80392),E=i(130),M=i(55506),I=i(24599),R=i(83178),F=i(84194),L=i(83482),B=i(95785),O=i(34472);t.Konva=n.Konva.Util._assign(n.Konva,{Arc:a.Arc,Arrow:r.Arrow,Circle:s.Circle,Ellipse:o.Ellipse,Image:l.Image,Label:c.Label,Tag:c.Tag,Line:h.Line,Path:d.Path,Rect:u.Rect,RegularPolygon:p.RegularPolygon,Ring:g.Ring,Sprite:m.Sprite,Star:f.Star,Text:v.Text,TextPath:y.TextPath,Transformer:x.Transformer,Wedge:k.Wedge,Filters:{Blur:b.Blur,Brighten:C.Brighten,Contrast:w.Contrast,Emboss:S.Emboss,Enhance:_.Enhance,Grayscale:T.Grayscale,HSL:P.HSL,HSV:A.HSV,Invert:D.Invert,Kaleidoscope:N.Kaleidoscope,Mask:j.Mask,Noise:E.Noise,Pixelate:M.Pixelate,Posterize:I.Posterize,RGB:R.RGB,RGBA:F.RGBA,Sepia:L.Sepia,Solarize:B.Solarize,Threshold:O.Threshold}})},86226:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Blur=void 0;let n=i(37305),a=i(91148),r=i(77527);function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.Blur=function(e){var t=Math.round(this.blurRadius());t>0&&function(e,t){var i,n,a,r,c,h,d,u,p,g,m,f,v,y,x,k,b,C,w,S,_,T,P,A,D=e.data,N=e.width,j=e.height,E=t+t+1,M=N-1,I=j-1,R=t+1,F=R*(R+1)/2,L=new s,B=null,O=L,G=null,V=null,z=o[t],U=l[t];for(a=1;a<E;a++)O=O.next=new s,a===R&&(B=O);for(n=0,O.next=L,d=h=0;n<j;n++){for(k=b=C=w=u=p=g=m=0,f=R*(S=D[h]),v=R*(_=D[h+1]),y=R*(T=D[h+2]),x=R*(P=D[h+3]),u+=F*S,p+=F*_,g+=F*T,m+=F*P,O=L,a=0;a<R;a++)O.r=S,O.g=_,O.b=T,O.a=P,O=O.next;for(a=1;a<R;a++)r=h+((M<a?M:a)<<2),u+=(O.r=S=D[r])*(A=R-a),p+=(O.g=_=D[r+1])*A,g+=(O.b=T=D[r+2])*A,m+=(O.a=P=D[r+3])*A,k+=S,b+=_,C+=T,w+=P,O=O.next;for(i=0,G=L,V=B;i<N;i++)D[h+3]=P=m*z>>U,0!==P?(P=255/P,D[h]=(u*z>>U)*P,D[h+1]=(p*z>>U)*P,D[h+2]=(g*z>>U)*P):D[h]=D[h+1]=D[h+2]=0,u-=f,p-=v,g-=y,m-=x,f-=G.r,v-=G.g,y-=G.b,x-=G.a,r=d+((r=i+t+1)<M?r:M)<<2,k+=G.r=D[r],b+=G.g=D[r+1],C+=G.b=D[r+2],w+=G.a=D[r+3],u+=k,p+=b,g+=C,m+=w,G=G.next,f+=S=V.r,v+=_=V.g,y+=T=V.b,x+=P=V.a,k-=S,b-=_,C-=T,w-=P,V=V.next,h+=4;d+=N}for(i=0;i<N;i++){for(b=C=w=k=p=g=m=u=0,f=R*(S=D[h=i<<2]),v=R*(_=D[h+1]),y=R*(T=D[h+2]),x=R*(P=D[h+3]),u+=F*S,p+=F*_,g+=F*T,m+=F*P,O=L,a=0;a<R;a++)O.r=S,O.g=_,O.b=T,O.a=P,O=O.next;for(a=1,c=N;a<=t;a++)h=c+i<<2,u+=(O.r=S=D[h])*(A=R-a),p+=(O.g=_=D[h+1])*A,g+=(O.b=T=D[h+2])*A,m+=(O.a=P=D[h+3])*A,k+=S,b+=_,C+=T,w+=P,O=O.next,a<I&&(c+=N);for(n=0,h=i,G=L,V=B;n<j;n++)D[(r=h<<2)+3]=P=m*z>>U,P>0?(P=255/P,D[r]=(u*z>>U)*P,D[r+1]=(p*z>>U)*P,D[r+2]=(g*z>>U)*P):D[r]=D[r+1]=D[r+2]=0,u-=f,p-=v,g-=y,m-=x,f-=G.r,v-=G.g,y-=G.b,x-=G.a,r=i+((r=n+R)<I?r:I)*N<<2,u+=k+=G.r=D[r],p+=b+=G.g=D[r+1],g+=C+=G.b=D[r+2],m+=w+=G.a=D[r+3],G=G.next,f+=S=V.r,v+=_=V.g,y+=T=V.b,x+=P=V.a,k-=S,b-=_,C-=T,w-=P,V=V.next,h+=N}}(e,t)},n.Factory.addGetterSetter(a.Node,"blurRadius",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},29919:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Brighten=void 0;let n=i(37305),a=i(91148),r=i(77527);t.Brighten=function(e){var t,i=255*this.brightness(),n=e.data,a=n.length;for(t=0;t<a;t+=4)n[t]+=i,n[t+1]+=i,n[t+2]+=i},n.Factory.addGetterSetter(a.Node,"brightness",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},34836:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Contrast=void 0;let n=i(37305),a=i(91148),r=i(77527);t.Contrast=function(e){var t,i=Math.pow((this.contrast()+100)/100,2),n=e.data,a=n.length,r=150,s=150,o=150;for(t=0;t<a;t+=4)r=n[t],s=n[t+1],o=n[t+2],r/=255,r-=.5,r*=i,r+=.5,r*=255,s/=255,s-=.5,s*=i,s+=.5,s*=255,o/=255,o-=.5,o*=i,o+=.5,o*=255,r=r<0?0:r>255?255:r,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,n[t]=r,n[t+1]=s,n[t+2]=o},n.Factory.addGetterSetter(a.Node,"contrast",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},57374:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Emboss=void 0;let n=i(37305),a=i(91148),r=i(60767),s=i(77527);t.Emboss=function(e){var t=10*this.embossStrength(),i=255*this.embossWhiteLevel(),n=this.embossDirection(),a=this.embossBlend(),s=0,o=0,l=e.data,c=e.width,h=e.height,d=4*c,u=h;switch(n){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:r.Util.error("Unknown emboss direction: "+n)}do{var p=(u-1)*d,g=s;u+g<1&&(g=0),u+g>h&&(g=0);var m=(u-1+g)*c*4,f=c;do{var v=p+(f-1)*4,y=o;f+y<1&&(y=0),f+y>c&&(y=0);var x=m+(f-1+y)*4,k=l[v]-l[x],b=l[v+1]-l[x+1],C=l[v+2]-l[x+2],w=k,S=w>0?w:-w,_=C>0?C:-C;if((b>0?b:-b)>S&&(w=b),_>S&&(w=C),w*=t,a){var T=l[v]+w,P=l[v+1]+w,A=l[v+2]+w;l[v]=T>255?255:T<0?0:T,l[v+1]=P>255?255:P<0?0:P,l[v+2]=A>255?255:A<0?0:A}else{var D=i-w;D<0?D=0:D>255&&(D=255),l[v]=l[v+1]=l[v+2]=D}}while(--f)}while(--u)},n.Factory.addGetterSetter(a.Node,"embossStrength",.5,(0,s.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"embossWhiteLevel",.5,(0,s.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"embossDirection","top-left",null,n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"embossBlend",!1,null,n.Factory.afterSetFilter)},50458:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Enhance=void 0;let n=i(37305),a=i(91148),r=i(77527);function s(e,t,i,n,a){var r=i-t,s=a-n;return 0===r?n+s/2:0===s?n:(e-t)/r*s+n}t.Enhance=function(e){var t,i,n,a,r,o,l,c,h,d,u,p,g,m=e.data,f=m.length,v=m[0],y=v,x=m[1],k=x,b=m[2],C=b,w=this.enhance();if(0!==w){for(g=0;g<f;g+=4)(d=m[g+0])<v?v=d:d>y&&(y=d),(u=m[g+1])<x?x=u:u>k&&(k=u),(p=m[g+2])<b?b=p:p>C&&(C=p);for(y===v&&(y=255,v=0),k===x&&(k=255,x=0),C===b&&(C=255,b=0),w>0?(i=y+w*(255-y),n=v-w*(v-0),r=k+w*(255-k),o=x-w*(x-0),c=C+w*(255-C),h=b-w*(b-0)):(t=(y+v)*.5,i=y+w*(y-t),n=v+w*(v-t),a=(k+x)*.5,r=k+w*(k-a),o=x+w*(x-a),l=(C+b)*.5,c=C+w*(C-l),h=b+w*(b-l)),g=0;g<f;g+=4)m[g+0]=s(m[g+0],v,y,n,i),m[g+1]=s(m[g+1],x,k,o,r),m[g+2]=s(m[g+2],b,C,h,c)}},n.Factory.addGetterSetter(a.Node,"enhance",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},89355:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Grayscale=void 0,t.Grayscale=function(e){var t,i,n=e.data,a=n.length;for(t=0;t<a;t+=4)i=.34*n[t]+.5*n[t+1]+.16*n[t+2],n[t]=i,n[t+1]=i,n[t+2]=i}},1986:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HSL=void 0;let n=i(37305),a=i(91148),r=i(77527);n.Factory.addGetterSetter(a.Node,"hue",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"saturation",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"luminance",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),t.HSL=function(e){var t,i,n,a,r,s=e.data,o=s.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,h=127*this.luminance(),d=1*l*Math.cos(c*Math.PI/180),u=1*l*Math.sin(c*Math.PI/180),p=.299+.701*d+.167*u,g=.587-.587*d+.33*u,m=.114-.114*d-.497*u,f=.299-.299*d-.328*u,v=.587+.413*d+.035*u,y=.114-.114*d+.293*u,x=.299-.3*d+1.25*u,k=.587-.586*d-1.05*u,b=.114+.886*d-.2*u;for(r=0;r<o;r+=4)t=s[r+0],i=s[r+1],n=s[r+2],a=s[r+3],s[r+0]=p*t+g*i+m*n+h,s[r+1]=f*t+v*i+y*n+h,s[r+2]=x*t+k*i+b*n+h,s[r+3]=a}},42111:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HSV=void 0;let n=i(37305),a=i(91148),r=i(77527);t.HSV=function(e){var t,i,n,a,r,s=e.data,o=s.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,d=l*c*Math.cos(h*Math.PI/180),u=l*c*Math.sin(h*Math.PI/180),p=.299*l+.701*d+.167*u,g=.587*l-.587*d+.33*u,m=.114*l-.114*d-.497*u,f=.299*l-.299*d-.328*u,v=.587*l+.413*d+.035*u,y=.114*l-.114*d+.293*u,x=.299*l-.3*d+1.25*u,k=.587*l-.586*d-1.05*u,b=.114*l+.886*d-.2*u;for(r=0;r<o;r+=4)t=s[r+0],i=s[r+1],n=s[r+2],a=s[r+3],s[r+0]=p*t+g*i+m*n,s[r+1]=f*t+v*i+y*n,s[r+2]=x*t+k*i+b*n,s[r+3]=a},n.Factory.addGetterSetter(a.Node,"hue",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"saturation",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"value",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},65968:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Invert=void 0,t.Invert=function(e){var t,i=e.data,n=i.length;for(t=0;t<n;t+=4)i[t]=255-i[t],i[t+1]=255-i[t+1],i[t+2]=255-i[t+2]}},40342:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Kaleidoscope=void 0;let n=i(37305),a=i(91148),r=i(60767),s=i(77527);var o=function(e,t,i){var n,a,r,s,o=e.data,l=t.data,c=e.width,h=e.height,d=i.polarCenterX||c/2,u=i.polarCenterY||h/2,p=0,g=0,m=0,f=0,v=Math.sqrt(d*d+u*u);v=(s=Math.sqrt((a=c-d)*a+(r=h-u)*r))>v?s:v;var y,x,k,b,C=360/c*Math.PI/180;for(x=0;x<c;x+=1)for(y=0,k=Math.sin(x*C),b=Math.cos(x*C);y<h;y+=1)a=Math.floor(d+v*y/h*b),p=o[(n=((r=Math.floor(u+v*y/h*k))*c+a)*4)+0],g=o[n+1],m=o[n+2],f=o[n+3],l[(n=(x+y*c)*4)+0]=p,l[n+1]=g,l[n+2]=m,l[n+3]=f},l=function(e,t,i){var n,a,r,s,o,l,c,h=e.data,d=t.data,u=e.width,p=e.height,g=i.polarCenterX||u/2,m=i.polarCenterY||p/2,f=0,v=0,y=0,x=0,k=Math.sqrt(g*g+m*m);k=(c=Math.sqrt((r=u-g)*r+(s=p-m)*s))>k?c:k;var b,C=i.polarRotation||0;for(r=0;r<u;r+=1)for(s=0;s<p;s+=1)b=Math.sqrt((o=r-g)*o+(l=s-m)*l)*p/k,n=Math.floor((180*Math.atan2(l,o)/Math.PI+360+C)%360*u/360),f=h[(a=(Math.floor(b)*u+n)*4)+0],v=h[a+1],y=h[a+2],x=h[a+3],d[(a=(s*u+r)*4)+0]=f,d[a+1]=v,d[a+2]=y,d[a+3]=x};t.Kaleidoscope=function(e){var t,i,n,a,s,c,h,d,u,p,g=e.width,m=e.height,f=Math.round(this.kaleidoscopePower()),v=Math.floor(Math.round(this.kaleidoscopeAngle())%360*g/360);if(!(f<1)){var y=r.Util.createCanvasElement();y.width=g,y.height=m;var x=y.getContext("2d").getImageData(0,0,g,m);r.Util.releaseCanvas(y),o(e,x,{polarCenterX:g/2,polarCenterY:m/2});for(var k=g/Math.pow(2,f);k<=8;)k*=2,f-=1;var b=k=Math.ceil(k),C=0,w=b,S=1;for(v+k>g&&(C=b,w=0,S=-1),i=0;i<m;i+=1)for(t=C;t!==w;t+=S)n=Math.round(t+v)%g,u=(g*i+n)*4,s=x.data[u+0],c=x.data[u+1],h=x.data[u+2],d=x.data[u+3],p=(g*i+t)*4,x.data[p+0]=s,x.data[p+1]=c,x.data[p+2]=h,x.data[p+3]=d;for(i=0;i<m;i+=1)for(a=0,b=Math.floor(k);a<f;a+=1){for(t=0;t<b+1;t+=1)u=(g*i+t)*4,s=x.data[u+0],c=x.data[u+1],h=x.data[u+2],d=x.data[u+3],p=(g*i+2*b-t-1)*4,x.data[p+0]=s,x.data[p+1]=c,x.data[p+2]=h,x.data[p+3]=d;b*=2}l(x,e,{polarRotation:0})}},n.Factory.addGetterSetter(a.Node,"kaleidoscopePower",2,(0,s.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"kaleidoscopeAngle",0,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},80392:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Mask=void 0;let n=i(37305),a=i(91148),r=i(77527);function s(e,t,i){var n=(i*e.width+t)*4,a=[];return a.push(e.data[n++],e.data[n++],e.data[n++],e.data[n++]),a}function o(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}t.Mask=function(e){var t=function(e,t){var i=s(e,0,0),n=s(e,e.width-1,0),a=s(e,0,e.height-1),r=s(e,e.width-1,e.height-1),l=t||10;if(o(i,n)<l&&o(n,r)<l&&o(r,a)<l&&o(a,i)<l){for(var c=function(e){for(var t=[0,0,0],i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}([n,i,r,a]),h=[],d=0;d<e.width*e.height;d++){var u=o(c,[e.data[4*d],e.data[4*d+1],e.data[4*d+2]]);h[d]=u<l?0:255}return h}}(e,this.threshold());return t&&(t=function(e,t,i){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],a=Math.round(Math.sqrt(n.length)),r=Math.floor(a/2),s=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var c=o*t+l,h=0,d=0;d<a;d++)for(var u=0;u<a;u++){var p=o+d-r,g=l+u-r;if(p>=0&&p<i&&g>=0&&g<t){var m=p*t+g,f=n[d*a+u];h+=e[m]*f}}s[c]=h}return s}(t=function(e,t,i){for(var n=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(n.length)),r=Math.floor(a/2),s=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var c=o*t+l,h=0,d=0;d<a;d++)for(var u=0;u<a;u++){var p=o+d-r,g=l+u-r;if(p>=0&&p<i&&g>=0&&g<t){var m=p*t+g,f=n[d*a+u];h+=e[m]*f}}s[c]=h>=1020?255:0}return s}(t=function(e,t,i){for(var n=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(n.length)),r=Math.floor(a/2),s=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var c=o*t+l,h=0,d=0;d<a;d++)for(var u=0;u<a;u++){var p=o+d-r,g=l+u-r;if(p>=0&&p<i&&g>=0&&g<t){var m=p*t+g,f=n[d*a+u];h+=e[m]*f}}s[c]=2040===h?255:0}return s}(t,e.width,e.height),e.width,e.height),e.width,e.height),function(e,t){for(var i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}(e,t)),e},n.Factory.addGetterSetter(a.Node,"threshold",0,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},130:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Noise=void 0;let n=i(37305),a=i(91148),r=i(77527);t.Noise=function(e){var t,i=255*this.noise(),n=e.data,a=n.length,r=i/2;for(t=0;t<a;t+=4)n[t+0]+=r-2*r*Math.random(),n[t+1]+=r-2*r*Math.random(),n[t+2]+=r-2*r*Math.random()},n.Factory.addGetterSetter(a.Node,"noise",.2,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},55506:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Pixelate=void 0;let n=i(37305),a=i(60767),r=i(91148),s=i(77527);t.Pixelate=function(e){var t,i,n,r,s,o,l,c,h,d,u,p,g,m,f=Math.ceil(this.pixelSize()),v=e.width,y=e.height,x=Math.ceil(v/f),k=Math.ceil(y/f),b=e.data;if(f<=0){a.Util.error("pixelSize value can not be <= 0");return}for(p=0;p<x;p+=1)for(g=0;g<k;g+=1){for(r=0,s=0,o=0,l=0,h=(c=p*f)+f,u=(d=g*f)+f,m=0,t=c;t<h;t+=1)if(!(t>=v))for(i=d;i<u;i+=1)i>=y||(r+=b[(n=(v*i+t)*4)+0],s+=b[n+1],o+=b[n+2],l+=b[n+3],m+=1);for(r/=m,s/=m,o/=m,l/=m,t=c;t<h;t+=1)if(!(t>=v))for(i=d;i<u;i+=1)i>=y||(b[(n=(v*i+t)*4)+0]=r,b[n+1]=s,b[n+2]=o,b[n+3]=l)}},n.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,s.getNumberValidator)(),n.Factory.afterSetFilter)},24599:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Posterize=void 0;let n=i(37305),a=i(91148),r=i(77527);t.Posterize=function(e){var t,i=Math.round(254*this.levels())+1,n=e.data,a=n.length,r=255/i;for(t=0;t<a;t+=1)n[t]=Math.floor(n[t]/r)*r},n.Factory.addGetterSetter(a.Node,"levels",.5,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},83178:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RGB=void 0;let n=i(37305),a=i(91148),r=i(77527);t.RGB=function(e){var t,i,n=e.data,a=n.length,r=this.red(),s=this.green(),o=this.blue();for(t=0;t<a;t+=4)i=(.34*n[t]+.5*n[t+1]+.16*n[t+2])/255,n[t]=i*r,n[t+1]=i*s,n[t+2]=i*o,n[t+3]=n[t+3]},n.Factory.addGetterSetter(a.Node,"red",0,function(e){return(this._filterUpToDate=!1,e>255)?255:e<0?0:Math.round(e)}),n.Factory.addGetterSetter(a.Node,"green",0,function(e){return(this._filterUpToDate=!1,e>255)?255:e<0?0:Math.round(e)}),n.Factory.addGetterSetter(a.Node,"blue",0,r.RGBComponent,n.Factory.afterSetFilter)},84194:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RGBA=void 0;let n=i(37305),a=i(91148),r=i(77527);t.RGBA=function(e){var t,i,n=e.data,a=n.length,r=this.red(),s=this.green(),o=this.blue(),l=this.alpha();for(t=0;t<a;t+=4)i=1-l,n[t]=r*l+n[t]*i,n[t+1]=s*l+n[t+1]*i,n[t+2]=o*l+n[t+2]*i},n.Factory.addGetterSetter(a.Node,"red",0,function(e){return(this._filterUpToDate=!1,e>255)?255:e<0?0:Math.round(e)}),n.Factory.addGetterSetter(a.Node,"green",0,function(e){return(this._filterUpToDate=!1,e>255)?255:e<0?0:Math.round(e)}),n.Factory.addGetterSetter(a.Node,"blue",0,r.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(a.Node,"alpha",1,function(e){return(this._filterUpToDate=!1,e>1)?1:e<0?0:e})},83482:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Sepia=void 0,t.Sepia=function(e){var t,i,n,a,r=e.data,s=r.length;for(t=0;t<s;t+=4)i=r[t+0],n=r[t+1],a=r[t+2],r[t+0]=Math.min(255,.393*i+.769*n+.189*a),r[t+1]=Math.min(255,.349*i+.686*n+.168*a),r[t+2]=Math.min(255,.272*i+.534*n+.131*a)}},95785:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Solarize=void 0,t.Solarize=function(e){var t=e.data,i=e.width,n=e.height,a=4*i,r=n;do{var s=(r-1)*a,o=i;do{var l=s+(o-1)*4,c=t[l],h=t[l+1],d=t[l+2];c>127&&(c=255-c),h>127&&(h=255-h),d>127&&(d=255-d),t[l]=c,t[l+1]=h,t[l+2]=d}while(--o)}while(--r)}},34472:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Threshold=void 0;let n=i(37305),a=i(91148),r=i(77527);t.Threshold=function(e){var t,i=255*this.threshold(),n=e.data,a=n.length;for(t=0;t<a;t+=1)n[t]=n[t]<i?0:255},n.Factory.addGetterSetter(a.Node,"threshold",.5,(0,r.getNumberValidator)(),n.Factory.afterSetFilter)},99329:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});let n=i(78922);e.exports=n.Konva},96366:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Arc=void 0;let n=i(37305),a=i(67181),r=i(32800),s=i(77527),o=i(32800);class l extends a.Shape{_sceneFunc(e){var t=r.Konva.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,i),e.arc(0,0,this.innerRadius(),t,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){let e=this.innerRadius(),t=this.outerRadius(),i=this.clockwise(),n=r.Konva.getAngle(i?360-this.angle():this.angle()),a=Math.cos(Math.min(n,Math.PI)),s=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),o=Math.sin(Math.min(n,Math.PI/2)),l=a*(a>0?e:t),c=s*(s>0?e:t),h=o*(o>0?t:e);return{x:l,y:i?-1*h:c,width:1*t-l,height:h-c}}}t.Arc=l,l.prototype._centroid=!0,l.prototype.className="Arc",l.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,o._registerNode)(l),n.Factory.addGetterSetter(l,"innerRadius",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"outerRadius",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"angle",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"clockwise",!1,(0,s.getBooleanValidator)())},19046:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Arrow=void 0;let n=i(37305),a=i(81653),r=i(77527),s=i(32800),o=i(53895);class l extends a.Line{_sceneFunc(e){super._sceneFunc(e);var t,i,n=2*Math.PI,a=this.points(),r=a,s=0!==this.tension()&&a.length>4;s&&(r=this.getTensionPoints());var l=this.pointerLength(),c=a.length;if(s){let e=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],a[c-2],a[c-1]],n=o.Path.calcLength(r[r.length-4],r[r.length-3],"C",e),s=o.Path.getPointOnQuadraticBezier(Math.min(1,1-l/n),e[0],e[1],e[2],e[3],e[4],e[5]);t=a[c-2]-s.x,i=a[c-1]-s.y}else t=a[c-2]-a[c-4],i=a[c-1]-a[c-3];var h=(Math.atan2(i,t)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(a[c-2],a[c-1]),e.rotate(h),e.moveTo(0,0),e.lineTo(-l,d/2),e.lineTo(-l,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(a[0],a[1]),s?(t=(r[0]+r[2])/2-a[0],i=(r[1]+r[3])/2-a[1]):(t=a[2]-a[0],i=a[3]-a[1]),e.rotate((Math.atan2(-i,-t)+n)%n),e.moveTo(0,0),e.lineTo(-l,d/2),e.lineTo(-l,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){let e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}}}t.Arrow=l,l.prototype.className="Arrow",(0,s._registerNode)(l),n.Factory.addGetterSetter(l,"pointerLength",10,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(l,"pointerWidth",10,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(l,"pointerAtBeginning",!1),n.Factory.addGetterSetter(l,"pointerAtEnding",!0)},25554:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;let n=i(37305),a=i(67181),r=i(77527),s=i(32800);class o extends a.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}t.Circle=o,o.prototype._centroid=!0,o.prototype.className="Circle",o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),n.Factory.addGetterSetter(o,"radius",0,(0,r.getNumberValidator)())},25810:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Ellipse=void 0;let n=i(37305),a=i(67181),r=i(77527),s=i(32800);class o extends a.Shape{_sceneFunc(e){var t=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),t!==i&&e.scale(1,i/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}t.Ellipse=o,o.prototype.className="Ellipse",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(o),n.Factory.addComponentsGetterSetter(o,"radius",["x","y"]),n.Factory.addGetterSetter(o,"radiusX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(o,"radiusY",0,(0,r.getNumberValidator)())},97869:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Image=void 0;let n=i(60767),a=i(37305),r=i(67181),s=i(32800),o=i(77527);class l extends r.Shape{_setImageLoad(){let e=this.image();e&&e.complete||e&&4===e.readyState||!e||!e.addEventListener||e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){let t;let i=this.getWidth(),a=this.getHeight(),r=this.cornerRadius(),s=this.attrs.image;if(s){let e=this.attrs.cropWidth,n=this.attrs.cropHeight;t=e&&n?[s,this.cropX(),this.cropY(),e,n,0,0,i,a]:[s,0,0,i,a]}(this.hasFill()||this.hasStroke()||r)&&(e.beginPath(),r?n.Util.drawRoundedRectPath(e,i,a,r):e.rect(0,0,i,a),e.closePath(),e.fillStrokeShape(this)),s&&(r&&e.clip(),e.drawImage.apply(e,t))}_hitFunc(e){var t=this.width(),i=this.height(),a=this.cornerRadius();e.beginPath(),a?n.Util.drawRoundedRectPath(e,t,i,a):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return null!==(e=this.attrs.width)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.width}getHeight(){var e,t;return null!==(e=this.attrs.height)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.height}static fromURL(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var a=n.Util.createImageElement();a.onload=function(){t(new l({image:a}))},a.onerror=i,a.crossOrigin="Anonymous",a.src=e}constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}}t.Image=l,l.prototype.className="Image",(0,s._registerNode)(l),a.Factory.addGetterSetter(l,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4)),a.Factory.addGetterSetter(l,"image"),a.Factory.addComponentsGetterSetter(l,"crop",["x","y","width","height"]),a.Factory.addGetterSetter(l,"cropX",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(l,"cropY",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(l,"cropWidth",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(l,"cropHeight",0,(0,o.getNumberValidator)())},15042:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=t.Label=void 0;let n=i(37305),a=i(67181),r=i(87147),s=i(77527),o=i(32800);var l=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],c="right",h="down",d="left",u=l.length;class p extends r.Group{getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var t,i=this,n=function(){i._sync()};for(t=0;t<u;t++)e.on(l[t]+"Change.konva",n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e,t,i,n,a,r,s,o=this.getText(),l=this.getTag();if(o&&l){switch(e=o.width(),t=o.height(),i=l.pointerDirection(),n=l.pointerWidth(),s=l.pointerHeight(),a=0,r=0,i){case"up":a=e/2,r=-1*s;break;case c:a=e+n,r=t/2;break;case h:a=e/2,r=t+s;break;case d:a=-1*n,r=t/2}l.setAttrs({x:-1*a,y:-1*r,width:e,height:t}),o.setAttrs({x:-1*a,y:-1*r})}}constructor(e){super(e),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}}t.Label=p,p.prototype.className="Label",(0,o._registerNode)(p);class g extends a.Shape{_sceneFunc(e){var t=this.width(),i=this.height(),n=this.pointerDirection(),a=this.pointerWidth(),r=this.pointerHeight(),s=this.cornerRadius();let o=0,l=0,u=0,p=0;"number"==typeof s?o=l=u=p=Math.min(s,t/2,i/2):(o=Math.min(s[0]||0,t/2,i/2),l=Math.min(s[1]||0,t/2,i/2),p=Math.min(s[2]||0,t/2,i/2),u=Math.min(s[3]||0,t/2,i/2)),e.beginPath(),e.moveTo(o,0),"up"===n&&(e.lineTo((t-a)/2,0),e.lineTo(t/2,-1*r),e.lineTo((t+a)/2,0)),e.lineTo(t-l,0),e.arc(t-l,l,l,3*Math.PI/2,0,!1),n===c&&(e.lineTo(t,(i-r)/2),e.lineTo(t+a,i/2),e.lineTo(t,(i+r)/2)),e.lineTo(t,i-p),e.arc(t-p,i-p,p,0,Math.PI/2,!1),n===h&&(e.lineTo((t+a)/2,i),e.lineTo(t/2,i+r),e.lineTo((t-a)/2,i)),e.lineTo(u,i),e.arc(u,i-u,u,Math.PI/2,Math.PI,!1),n===d&&(e.lineTo(0,(i+r)/2),e.lineTo(-1*a,i/2),e.lineTo(0,(i-r)/2)),e.lineTo(0,o),e.arc(o,o,o,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,t=0,i=this.pointerWidth(),n=this.pointerHeight(),a=this.pointerDirection(),r=this.width(),s=this.height();return"up"===a?(t-=n,s+=n):a===h?s+=n:a===d?(e-=1.5*i,r+=i):a===c&&(r+=1.5*i),{x:e,y:t,width:r,height:s}}}t.Tag=g,g.prototype.className="Tag",(0,o._registerNode)(g),n.Factory.addGetterSetter(g,"pointerDirection","none"),n.Factory.addGetterSetter(g,"pointerWidth",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(g,"pointerHeight",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(g,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4))},81653:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0;let n=i(37305),a=i(67181),r=i(77527),s=i(32800);function o(e,t,i,n,a,r,s){var o=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),l=Math.sqrt(Math.pow(a-i,2)+Math.pow(r-n,2)),c=s*o/(o+l),h=s*l/(o+l);return[i-c*(a-e),n-c*(r-t),i+h*(a-e),n+h*(r-t)]}function l(e,t){var i,n,a=e.length,r=[];for(i=2;i<a-2;i+=2)isNaN((n=o(e[i-2],e[i-1],e[i],e[i+1],e[i+2],e[i+3],t))[0])||(r.push(n[0]),r.push(n[1]),r.push(e[i]),r.push(e[i+1]),r.push(n[2]),r.push(n[3]));return r}class c extends a.Shape{_sceneFunc(e){var t,i,n,a=this.points(),r=a.length,s=this.tension(),o=this.closed(),l=this.bezier();if(r){if(e.beginPath(),e.moveTo(a[0],a[1]),0!==s&&r>4){for(i=(t=this.getTensionPoints()).length,n=o?0:4,o||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);n<i-2;)e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);o||e.quadraticCurveTo(t[i-2],t[i-1],a[r-2],a[r-1])}else if(l)for(n=2;n<r;)e.bezierCurveTo(a[n++],a[n++],a[n++],a[n++],a[n++],a[n++]);else for(n=2;n<r;n+=2)e.lineTo(a[n],a[n+1]);o?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():l(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),t=e.length,i=this.tension(),n=o(e[t-2],e[t-1],e[0],e[1],e[2],e[3],i),a=o(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],i),r=l(e,i);return[n[2],n[3]].concat(r).concat([a[0],a[1],e[t-2],e[t-1],a[2],a[3],n[0],n[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e,t,i=this.points();if(i.length<4)return{x:i[0]||0,y:i[1]||0,width:0,height:0};for(var n=(i=0!==this.tension()?[i[0],i[1],...this._getTensionPoints(),i[i.length-2],i[i.length-1]]:this.points())[0],a=i[0],r=i[1],s=i[1],o=0;o<i.length/2;o++)e=i[2*o],t=i[2*o+1],n=Math.min(n,e),a=Math.max(a,e),r=Math.min(r,t),s=Math.max(s,t);return{x:n,y:r,width:a-n,height:s-r}}constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}}t.Line=c,c.prototype.className="Line",c.prototype._attrsAffectingSize=["points","bezier","tension"],(0,s._registerNode)(c),n.Factory.addGetterSetter(c,"closed",!1),n.Factory.addGetterSetter(c,"bezier",!1),n.Factory.addGetterSetter(c,"tension",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(c,"points",[],(0,r.getNumberArrayValidator)())},53895:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Path=void 0;let n=i(37305),a=i(67181),r=i(32800),s=i(53501);class o extends a.Shape{_readDataAttribute(){this.dataArray=o.parsePathData(this.data()),this.pathLength=o.getPathLength(this.dataArray)}_sceneFunc(e){var t=this.dataArray;e.beginPath();for(var i=!1,n=0;n<t.length;n++){var a=t[n].command,r=t[n].points;switch(a){case"L":e.lineTo(r[0],r[1]);break;case"M":e.moveTo(r[0],r[1]);break;case"C":e.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":e.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var s=r[0],o=r[1],l=r[2],c=r[3],h=r[4],d=r[5],u=r[6],p=r[7],g=l>c?l:c,m=l>c?1:l/c,f=l>c?c/l:1;e.translate(s,o),e.rotate(u),e.scale(m,f),e.arc(0,0,g,h,h+d,1-p),e.scale(1/m,1/f),e.rotate(-u),e.translate(-s,-o);break;case"z":i=!0,e.closePath()}}i||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){var e,t,i=[];this.dataArray.forEach(function(e){if("A"===e.command){var t=e.points[4],n=e.points[5],a=e.points[4]+n,r=Math.PI/180;if(Math.abs(t-a)<r&&(r=Math.abs(t-a)),n<0)for(let n=t-r;n>a;n-=r){let t=o.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],n,0);i.push(t.x,t.y)}else for(let n=t+r;n<a;n+=r){let t=o.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],n,0);i.push(t.x,t.y)}}else if("C"===e.command)for(let t=0;t<=1;t+=.01){let n=o.getPointOnCubicBezier(t,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);i.push(n.x,n.y)}else i=i.concat(e.points)});for(var n=i[0],a=i[0],r=i[1],s=i[1],l=0;l<i.length/2;l++)e=i[2*l],t=i[2*l+1],isNaN(e)||(n=Math.min(n,e),a=Math.max(a,e)),isNaN(t)||(r=Math.min(r,t),s=Math.max(s,t));return{x:n,y:r,width:a-n,height:s-r}}getLength(){return this.pathLength}getPointAtLength(e){return o.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,i,n){return Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))}static getPathLength(e){let t=0;for(var i=0;i<e.length;++i)t+=e[i].pathLength;return t}static getPointAtLengthOfDataArray(e,t){var i,n=0,a=t.length;if(!a)return null;for(;n<a&&e>t[n].pathLength;)e-=t[n].pathLength,++n;if(n===a)return{x:(i=t[n-1].points.slice(-2))[0],y:i[1]};if(e<.01)return{x:(i=t[n].points.slice(0,2))[0],y:i[1]};var r=t[n],l=r.points;switch(r.command){case"L":return o.getPointOnLine(e,r.start.x,r.start.y,l[0],l[1]);case"C":return o.getPointOnCubicBezier((0,s.t2length)(e,o.getPathLength(t),e=>(0,s.getCubicArcLength)([r.start.x,l[0],l[2],l[4]],[r.start.y,l[1],l[3],l[5]],e)),r.start.x,r.start.y,l[0],l[1],l[2],l[3],l[4],l[5]);case"Q":return o.getPointOnQuadraticBezier((0,s.t2length)(e,o.getPathLength(t),e=>(0,s.getQuadraticArcLength)([r.start.x,l[0],l[2]],[r.start.y,l[1],l[3]],e)),r.start.x,r.start.y,l[0],l[1],l[2],l[3]);case"A":var c=l[0],h=l[1],d=l[2],u=l[3],p=l[4],g=l[5],m=l[6];return p+=g*e/r.pathLength,o.getPointOnEllipticalArc(c,h,d,u,p,m)}return null}static getPointOnLine(e,t,i,n,a,r,s){void 0===r&&(r=t),void 0===s&&(s=i);var o=(a-i)/(n-t+1e-8),l=Math.sqrt(e*e/(1+o*o));n<t&&(l*=-1);var c=o*l;if(n===t)h={x:r,y:s+c};else if((s-i)/(r-t+1e-8)===o)h={x:r+l,y:s+c};else{var h,d,u,p=this.getLineLength(t,i,n,a),g=(r-t)*(n-t)+(s-i)*(a-i);g/=p*p,d=t+g*(n-t),u=i+g*(a-i);var m=this.getLineLength(r,s,d,u),f=Math.sqrt(e*e-m*m);l=Math.sqrt(f*f/(1+o*o)),n<t&&(l*=-1),c=o*l,h={x:d+l,y:u+c}}return h}static getPointOnCubicBezier(e,t,i,n,a,r,s,o,l){function c(e){return 3*e*(1-e)*(1-e)}return{x:e*e*e*o+3*e*e*(1-e)*r+n*c(e)+(1-e)*(1-e)*(1-e)*t,y:e*e*e*l+3*e*e*(1-e)*s+a*c(e)+(1-e)*(1-e)*(1-e)*i}}static getPointOnQuadraticBezier(e,t,i,n,a,r,s){return{x:e*e*r+2*e*(1-e)*n+(1-e)*(1-e)*t,y:e*e*s+2*e*(1-e)*a+(1-e)*(1-e)*i}}static getPointOnEllipticalArc(e,t,i,n,a,r){var s=Math.cos(r),o=Math.sin(r),l={x:i*Math.cos(a),y:n*Math.sin(a)};return{x:e+(l.x*s-l.y*o),y:t+(l.x*o+l.y*s)}}static parsePathData(e){if(!e)return[];var t=e,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(RegExp(" ","g"),",");for(var n=0;n<i.length;n++)t=t.replace(RegExp(i[n],"g"),"|"+i[n]);var a=t.split("|"),r=[],s=[],o=0,l=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(n=1;n<a.length;n++){var h=a[n],d=h.charAt(0);for(h=h.slice(1),s.length=0;f=c.exec(h);)s.push(f[0]);for(var u=[],p=0,g=s.length;p<g;p++){if("00"===s[p]){u.push(0,0);continue}var m=parseFloat(s[p]);isNaN(m)?u.push(0):u.push(m)}for(;u.length>0&&!isNaN(u[0]);){var f,v,y,x,k,b,C,w,S,_,T,P="",A=[],D=o,N=l;switch(d){case"l":o+=u.shift(),l+=u.shift(),P="L",A.push(o,l);break;case"L":o=u.shift(),l=u.shift(),A.push(o,l);break;case"m":var j=u.shift(),E=u.shift();if(o+=j,l+=E,P="M",r.length>2&&"z"===r[r.length-1].command){for(var M=r.length-2;M>=0;M--)if("M"===r[M].command){o=r[M].points[0]+j,l=r[M].points[1]+E;break}}A.push(o,l),d="l";break;case"M":o=u.shift(),l=u.shift(),P="M",A.push(o,l),d="L";break;case"h":o+=u.shift(),P="L",A.push(o,l);break;case"H":o=u.shift(),P="L",A.push(o,l);break;case"v":l+=u.shift(),P="L",A.push(o,l);break;case"V":l=u.shift(),P="L",A.push(o,l);break;case"C":A.push(u.shift(),u.shift(),u.shift(),u.shift()),o=u.shift(),l=u.shift(),A.push(o,l);break;case"c":A.push(o+u.shift(),l+u.shift(),o+u.shift(),l+u.shift()),o+=u.shift(),l+=u.shift(),P="C",A.push(o,l);break;case"S":y=o,x=l,"C"===(v=r[r.length-1]).command&&(y=o+(o-v.points[2]),x=l+(l-v.points[3])),A.push(y,x,u.shift(),u.shift()),o=u.shift(),l=u.shift(),P="C",A.push(o,l);break;case"s":y=o,x=l,"C"===(v=r[r.length-1]).command&&(y=o+(o-v.points[2]),x=l+(l-v.points[3])),A.push(y,x,o+u.shift(),l+u.shift()),o+=u.shift(),l+=u.shift(),P="C",A.push(o,l);break;case"Q":A.push(u.shift(),u.shift()),o=u.shift(),l=u.shift(),A.push(o,l);break;case"q":A.push(o+u.shift(),l+u.shift()),o+=u.shift(),l+=u.shift(),P="Q",A.push(o,l);break;case"T":y=o,x=l,"Q"===(v=r[r.length-1]).command&&(y=o+(o-v.points[0]),x=l+(l-v.points[1])),o=u.shift(),l=u.shift(),P="Q",A.push(y,x,o,l);break;case"t":y=o,x=l,"Q"===(v=r[r.length-1]).command&&(y=o+(o-v.points[0]),x=l+(l-v.points[1])),o+=u.shift(),l+=u.shift(),P="Q",A.push(y,x,o,l);break;case"A":k=u.shift(),b=u.shift(),C=u.shift(),w=u.shift(),S=u.shift(),_=o,T=l,o=u.shift(),l=u.shift(),P="A",A=this.convertEndpointToCenterParameterization(_,T,o,l,w,S,k,b,C);break;case"a":k=u.shift(),b=u.shift(),C=u.shift(),w=u.shift(),S=u.shift(),_=o,T=l,o+=u.shift(),l+=u.shift(),P="A",A=this.convertEndpointToCenterParameterization(_,T,o,l,w,S,k,b,C)}r.push({command:P||d,points:A,start:{x:D,y:N},pathLength:this.calcLength(D,N,P||d,A)})}("z"===d||"Z"===d)&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r}static calcLength(e,t,i,n){var a,r,l,c;switch(i){case"L":return o.getLineLength(e,t,n[0],n[1]);case"C":return(0,s.getCubicArcLength)([e,n[0],n[2],n[4]],[t,n[1],n[3],n[5]],1);case"Q":return(0,s.getQuadraticArcLength)([e,n[0],n[2]],[t,n[1],n[3]],1);case"A":a=0;var h=n[4],d=n[5],u=n[4]+d,p=Math.PI/180;if(Math.abs(h-u)<p&&(p=Math.abs(h-u)),r=o.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),d<0)for(c=h-p;c>u;c-=p)l=o.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),a+=o.getLineLength(r.x,r.y,l.x,l.y),r=l;else for(c=h+p;c<u;c+=p)l=o.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),a+=o.getLineLength(r.x,r.y,l.x,l.y),r=l;return l=o.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),a+=o.getLineLength(r.x,r.y,l.x,l.y)}return 0}static convertEndpointToCenterParameterization(e,t,i,n,a,r,s,o,l){var c=Math.PI/180*l,h=Math.cos(c)*(e-i)/2+Math.sin(c)*(t-n)/2,d=-1*Math.sin(c)*(e-i)/2+Math.cos(c)*(t-n)/2,u=h*h/(s*s)+d*d/(o*o);u>1&&(s*=Math.sqrt(u),o*=Math.sqrt(u));var p=Math.sqrt((s*s*(o*o)-s*s*(d*d)-o*o*(h*h))/(s*s*(d*d)+o*o*(h*h)));a===r&&(p*=-1),isNaN(p)&&(p=0);var g=p*s*d/o,m=-(p*o)*h/s,f=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},v=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(f(e)*f(t))},y=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(v(e,t))},x=y([1,0],[(h-g)/s,(d-m)/o]),k=[(h-g)/s,(d-m)/o],b=[(-1*h-g)/s,(-1*d-m)/o],C=y(k,b);return -1>=v(k,b)&&(C=Math.PI),v(k,b)>=1&&(C=0),0===r&&C>0&&(C-=2*Math.PI),1===r&&C<0&&(C+=2*Math.PI),[(e+i)/2+Math.cos(c)*g-Math.sin(c)*m,(t+n)/2+Math.sin(c)*g+Math.cos(c)*m,s,o,x,C,c,r]}constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}}t.Path=o,o.prototype.className="Path",o.prototype._attrsAffectingSize=["data"],(0,r._registerNode)(o),n.Factory.addGetterSetter(o,"data")},562:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Rect=void 0;let n=i(37305),a=i(67181),r=i(32800),s=i(60767),o=i(77527);class l extends a.Shape{_sceneFunc(e){var t=this.cornerRadius(),i=this.width(),n=this.height();e.beginPath(),t?s.Util.drawRoundedRectPath(e,i,n,t):e.rect(0,0,i,n),e.closePath(),e.fillStrokeShape(this)}}t.Rect=l,l.prototype.className="Rect",(0,r._registerNode)(l),n.Factory.addGetterSetter(l,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4))},49574:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RegularPolygon=void 0;let n=i(37305),a=i(67181),r=i(77527),s=i(32800);class o extends a.Shape{_sceneFunc(e){let t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;i++)e.lineTo(t[i].x,t[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){let e=this.attrs.sides,t=this.attrs.radius||0,i=[];for(var n=0;n<e;n++)i.push({x:t*Math.sin(2*n*Math.PI/e),y:-1*t*Math.cos(2*n*Math.PI/e)});return i}getSelfRect(){let e=this._getPoints();var t=e[0].x,i=e[0].y,n=e[0].x,a=e[0].y;return e.forEach(e=>{t=Math.min(t,e.x),i=Math.max(i,e.x),n=Math.min(n,e.y),a=Math.max(a,e.y)}),{x:t,y:n,width:i-t,height:a-n}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}t.RegularPolygon=o,o.prototype.className="RegularPolygon",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),n.Factory.addGetterSetter(o,"radius",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(o,"sides",0,(0,r.getNumberValidator)())},56244:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Ring=void 0;let n=i(37305),a=i(67181),r=i(77527),s=i(32800);var o=2*Math.PI;class l extends a.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,o,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),o,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}t.Ring=l,l.prototype.className="Ring",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(l),n.Factory.addGetterSetter(l,"innerRadius",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(l,"outerRadius",0,(0,r.getNumberValidator)())},31116:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Sprite=void 0;let n=i(37305),a=i(67181),r=i(42826),s=i(77527),o=i(32800);class l extends a.Shape{_sceneFunc(e){var t=this.animation(),i=this.frameIndex(),n=4*i,a=this.animations()[t],r=this.frameOffsets(),s=a[n+0],o=a[n+1],l=a[n+2],c=a[n+3],h=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,c),e.closePath(),e.fillStrokeShape(this)),h){if(r){var d=r[t],u=2*i;e.drawImage(h,s,o,l,c,d[u+0],d[u+1],l,c)}else e.drawImage(h,s,o,l,c,0,0,l,c)}}_hitFunc(e){var t=this.animation(),i=this.frameIndex(),n=4*i,a=this.animations()[t],r=this.frameOffsets(),s=a[n+2],o=a[n+3];if(e.beginPath(),r){var l=r[t],c=2*i;e.rect(l[c+0],l[c+1],s,o)}else e.rect(0,0,s,o);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}constructor(e){super(e),this._updated=!0,this.anim=new r.Animation(()=>{var e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}}t.Sprite=l,l.prototype.className="Sprite",(0,o._registerNode)(l),n.Factory.addGetterSetter(l,"animation"),n.Factory.addGetterSetter(l,"animations"),n.Factory.addGetterSetter(l,"frameOffsets"),n.Factory.addGetterSetter(l,"image"),n.Factory.addGetterSetter(l,"frameIndex",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"frameRate",17,(0,s.getNumberValidator)()),n.Factory.backCompat(l,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})},81009:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Star=void 0;let n=i(37305),a=i(67181),r=i(77527),s=i(32800);class o extends a.Shape{_sceneFunc(e){var t=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(var a=1;a<2*n;a++){var r=a%2==0?i:t,s=r*Math.sin(a*Math.PI/n),o=-1*r*Math.cos(a*Math.PI/n);e.lineTo(s,o)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}t.Star=o,o.prototype.className="Star",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(o),n.Factory.addGetterSetter(o,"numPoints",5,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(o,"innerRadius",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(o,"outerRadius",0,(0,r.getNumberValidator)())},7329:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Text=t.stringToArray=void 0;let n=i(60767),a=i(37305),r=i(67181),s=i(77527),o=i(32800);function l(e){return Array.from(e)}t.stringToArray=l;var c,h="auto",d="inherit",u="justify",p="left",g="middle",m="normal",f="none",v=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],y=v.length;function x(){return c||(c=n.Util.createCanvasElement().getContext("2d"))}class k extends r.Shape{_sceneFunc(e){var t=this.textArr,i=t.length;if(this.text()){var n,a=this.padding(),r=this.fontSize(),s=this.lineHeight()*r,o=this.verticalAlign(),c=this.direction(),h=0,m=this.align(),f=this.getWidth(),v=this.letterSpacing(),y=this.fill(),x=this.textDecoration(),k=-1!==x.indexOf("underline"),b=-1!==x.indexOf("line-through");c=c===d?e.direction:c;var C=s/2,w=0,S=0;for("rtl"===c&&e.setAttr("direction",c),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",g),e.setAttr("textAlign",p),o===g?h=(this.getHeight()-i*s-2*a)/2:"bottom"===o&&(h=this.getHeight()-i*s-2*a),e.translate(a,h+a),n=0;n<i;n++){var _,T,P,w=0,S=0,A=t[n],D=A.text,N=A.width,j=A.lastInParagraph;if(e.save(),"right"===m?w+=f-N-2*a:"center"===m&&(w+=(f-N-2*a)/2),k){e.save(),e.beginPath(),e.moveTo(w,C+S+Math.round(r/2)),T=0==(_=D.split(" ").length-1),P=m!==u||j?N:f-2*a,e.lineTo(w+Math.round(P),C+S+Math.round(r/2)),e.lineWidth=r/15;let t=this._getLinearGradient();e.strokeStyle=t||y,e.stroke(),e.restore()}if(b){e.save(),e.beginPath(),e.moveTo(w,C+S),T=0==(_=D.split(" ").length-1),P=m===u&&j&&!T?f-2*a:N,e.lineTo(w+Math.round(P),C+S),e.lineWidth=r/15;let t=this._getLinearGradient();e.strokeStyle=t||y,e.stroke(),e.restore()}if("rtl"!==c&&(0!==v||m===u)){_=D.split(" ").length-1;for(var E=l(D),M=0;M<E.length;M++){var I=E[M];" "!==I||j||m!==u||(w+=(f-2*a-N)/_),this._partialTextX=w,this._partialTextY=C+S,this._partialText=I,e.fillStrokeShape(this),w+=this.measureSize(I).width+v}}else 0!==v&&e.setAttr("letterSpacing","".concat(v,"px")),this._partialTextX=w,this._partialTextY=C+S,this._partialText=D,e.fillStrokeShape(this);e.restore(),i>1&&(C+=s)}}}_hitFunc(e){var t=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=n.Util._isString(e)?e:null==e?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width===h||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===h||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,i=x(),n=this.fontSize();return i.save(),i.font=this._getContextFont(),t=i.measureText(e),i.restore(),{width:t.width,height:n}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map(e=>{let t=(e=e.trim()).indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!i&&(e='"'.concat(e,'"')),e}).join(", ")}_addTextLine(e){this.align()===u&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){var t=this.letterSpacing(),i=e.length;return x().measureText(e).width+(i?t*(i-1):0)}_setTextData(){var e=this.text().split("\n"),t=+this.fontSize(),i=0,n=this.lineHeight()*t,a=this.attrs.width,r=this.attrs.height,s=a!==h&&void 0!==a,o=r!==h&&void 0!==r,l=this.padding(),c=a-2*l,d=r-2*l,u=0,p=this.wrap(),g="char"!==p&&p!==f,m=this.ellipsis();this.textArr=[],x().font=this._getContextFont();for(var v=m?this._getTextWidth("…"):0,y=0,k=e.length;y<k;++y){var b=e[y],C=this._getTextWidth(b);if(s&&C>c)for(;b.length>0;){for(var w=0,S=b.length,_="",T=0;w<S;){var P=w+S>>>1,A=b.slice(0,P+1),D=this._getTextWidth(A)+v;D<=c?(w=P+1,_=A,T=D):S=P}if(_){if(g){var N,j=b[_.length];(N=(" "===j||"-"===j)&&T<=c?_.length:Math.max(_.lastIndexOf(" "),_.lastIndexOf("-"))+1)>0&&(w=N,_=_.slice(0,w),T=this._getTextWidth(_))}if(_=_.trimRight(),this._addTextLine(_),i=Math.max(i,T),u+=n,this._shouldHandleEllipsis(u)){this._tryToAddEllipsisToLastLine();break}if((b=(b=b.slice(w)).trimLeft()).length>0&&(C=this._getTextWidth(b))<=c){this._addTextLine(b),u+=n,i=Math.max(i,C);break}}else break}else this._addTextLine(b),u+=n,i=Math.max(i,C),this._shouldHandleEllipsis(u)&&y<k-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),o&&u+n>d)break}this.textHeight=t,this.textWidth=i}_shouldHandleEllipsis(e){var t=+this.fontSize(),i=this.lineHeight()*t,n=this.attrs.height,a=this.padding();return!(this.wrap()!==f)||n!==h&&void 0!==n&&e+i>n-2*a}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,t=this.padding(),i=this.ellipsis(),n=this.textArr[this.textArr.length-1];n&&i&&(e===h||void 0===e||this._getTextWidth(n.text+"…")<e-2*t||(n.text=n.text.slice(0,n.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(n.text+"…"))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let e=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),t=this.hasShadow();return!!e&&!!t||super._useBufferCanvas()}constructor(e){var t;super(((t=(t=e)||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<y;i++)this.on(v[i]+"Change.konva",this._setTextData);this._setTextData()}}t.Text=k,k.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},k.prototype._strokeFunc=function(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},k.prototype.className="Text",k.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,o._registerNode)(k),a.Factory.overWriteSetter(k,"width",(0,s.getNumberOrAutoValidator)()),a.Factory.overWriteSetter(k,"height",(0,s.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(k,"direction",d),a.Factory.addGetterSetter(k,"fontFamily","Arial"),a.Factory.addGetterSetter(k,"fontSize",12,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(k,"fontStyle",m),a.Factory.addGetterSetter(k,"fontVariant",m),a.Factory.addGetterSetter(k,"padding",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(k,"align",p),a.Factory.addGetterSetter(k,"verticalAlign","top"),a.Factory.addGetterSetter(k,"lineHeight",1,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(k,"wrap","word"),a.Factory.addGetterSetter(k,"ellipsis",!1,(0,s.getBooleanValidator)()),a.Factory.addGetterSetter(k,"letterSpacing",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(k,"text","",(0,s.getStringValidator)()),a.Factory.addGetterSetter(k,"textDecoration","")},98978:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextPath=void 0;let n=i(60767),a=i(37305),r=i(67181),s=i(53895),o=i(7329),l=i(77527),c=i(32800);var h="normal";function d(e){e.fillText(this.partialText,0,0)}function u(e){e.strokeText(this.partialText,0,0)}class p extends r.Shape{_getTextPathLength(){return s.Path.getPathLength(this.dataArray)}_getPointAtLength(e){return!this.attrs.data||e-1>this.pathLength?null:s.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=s.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),i=this.fill(),n=this.fontSize(),a=this.glyphInfo;"underline"===t&&e.beginPath();for(var r=0;r<a.length;r++){e.save();var s=a[r].p0;e.translate(s.x,s.y),e.rotate(a[r].rotation),this.partialText=a[r].text,e.fillStrokeShape(this),"underline"===t&&(0===r&&e.moveTo(0,n/2+1),e.lineTo(n,n/2+1)),e.restore()}"underline"===t&&(e.strokeStyle=i,e.lineWidth=n/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var i=t[0].p0;e.moveTo(i.x,i.y)}for(var n=0;n<t.length;n++){var a=t[n].p1;e.lineTo(a.x,a.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return o.Text.prototype.setText.call(this,e)}_getContextFont(){return o.Text.prototype._getContextFont.call(this)}_getTextSize(e){var t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();var i=t.measureText(e);return t.restore(),{width:i.width,height:parseInt("".concat(this.fontSize()),10)}}_setTextData(){let{width:e,height:t}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=t,this.glyphInfo=[],!this.attrs.data)return null;let i=this.letterSpacing(),n=this.align(),a=this.kerningFunc(),r=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0),l=0;"center"===n&&(l=Math.max(0,this.pathLength/2-r/2)),"right"===n&&(l=Math.max(0,this.pathLength-r));let c=(0,o.stringToArray)(this.text()),h=l;for(var d=0;d<c.length;d++){let e=this._getPointAtLength(h);if(!e)return;let t=this._getTextSize(c[d]).width+i;if(" "===c[d]&&"justify"===n){let e=this.text().split(" ").length-1;t+=(this.pathLength-r)/e}let o=this._getPointAtLength(h+t);if(!o)return;let l=s.Path.getLineLength(e.x,e.y,o.x,o.y),u=0;if(a)try{u=a(c[d-1],c[d])*this.fontSize()}catch(e){u=0}e.x+=u,o.x+=u,this.textWidth+=u;let p=s.Path.getPointOnLine(u+l/2,e.x,e.y,o.x,o.y),g=Math.atan2(o.y-e.y,o.x-e.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:c[d],rotation:g,p0:e,p1:o}),h+=t}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e,t,i=[];this.glyphInfo.forEach(function(e){i.push(e.p0.x),i.push(e.p0.y),i.push(e.p1.x),i.push(e.p1.y)});for(var n=i[0]||0,a=i[0]||0,r=i[1]||0,s=i[1]||0,o=0;o<i.length/2;o++)e=i[2*o],t=i[2*o+1],n=Math.min(n,e),a=Math.max(a,e),r=Math.min(r,t),s=Math.max(s,t);var l=this.fontSize();return{x:n-l/2,y:r-l/2,width:a-n+l,height:s-r+l}}destroy(){return n.Util.releaseCanvas(this.dummyCanvas),super.destroy()}constructor(e){super(e),this.dummyCanvas=n.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}}t.TextPath=p,p.prototype._fillFunc=d,p.prototype._strokeFunc=u,p.prototype._fillFuncHit=d,p.prototype._strokeFuncHit=u,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,c._registerNode)(p),a.Factory.addGetterSetter(p,"data"),a.Factory.addGetterSetter(p,"fontFamily","Arial"),a.Factory.addGetterSetter(p,"fontSize",12,(0,l.getNumberValidator)()),a.Factory.addGetterSetter(p,"fontStyle",h),a.Factory.addGetterSetter(p,"align","left"),a.Factory.addGetterSetter(p,"letterSpacing",0,(0,l.getNumberValidator)()),a.Factory.addGetterSetter(p,"textBaseline","middle"),a.Factory.addGetterSetter(p,"fontVariant",h),a.Factory.addGetterSetter(p,"text",""),a.Factory.addGetterSetter(p,"textDecoration",null),a.Factory.addGetterSetter(p,"kerningFunc",null)},60552:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Transformer=void 0;let n=i(60767),a=i(37305),r=i(91148),s=i(67181),o=i(562),l=i(87147),c=i(32800),h=i(77527),d=i(32800);var u="tr-konva",p=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+".".concat(u)).join(" "),g="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};let v="ontouchstart"in c.Konva._global;var y=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function x(e,t,i){let n=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),a=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:n,y:a}}class k extends l.Group{attachTo(e){return this.setNode(e),this}setNode(e){return n.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._nodes&&this._nodes.length&&this.detach();let t=e.filter(e=>!e.isAncestorOf(this)||(n.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));return this._nodes=e=t,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(e=>{let t=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},i=e._attrsAffectingSize.map(e=>e+"Change."+this._getEventNamespace()).join(" ");e.on(i,t),e.on(m.map(e=>e+".".concat(this._getEventNamespace())).join(" "),t),e.on("absoluteTransformChange.".concat(this._getEventNamespace()),t),this._proxyDrag(e)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on("dragstart.".concat(this._getEventNamespace()),i=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(i,!1)}),e.on("dragmove.".concat(this._getEventNamespace()),i=>{if(!t)return;let n=e.getAbsolutePosition(),a=n.x-t.x,r=n.y-t.y;this.nodes().forEach(t=>{if(t===e||t.isDragging())return;let n=t.getAbsolutePosition();t.setAbsolutePosition({x:n.x+a,y:n.y+r}),t.startDrag(i)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(g),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(g,this.__getNodeRect)}__getNodeShape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotation(),i=arguments.length>2?arguments[2]:void 0;var n=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=e.getAbsoluteScale(i),r=e.getAbsolutePosition(i),s=n.x*a.x-e.offsetX()*a.x,o=n.y*a.y-e.offsetY()*a.y;let l=(c.Konva.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return x({x:r.x+s*Math.cos(l)+o*Math.sin(-l),y:r.y+o*Math.cos(l)+s*Math.sin(l),width:n.width*a.x,height:n.height*a.y,rotation:l},-c.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};let e=[];this.nodes().map(t=>{let i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var n=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],a=t.getAbsoluteTransform();n.forEach(function(t){var i=a.point(t);e.push(i)})});let t=new n.Transform;t.rotate(-c.Konva.getAngle(this.rotation()));var i=1/0,a=1/0,r=-1/0,s=-1/0;e.forEach(function(e){var n=t.point(e);void 0===i&&(i=r=n.x,a=s=n.y),i=Math.min(i,n.x),a=Math.min(a,n.y),r=Math.max(r,n.x),s=Math.max(s,n.y)}),t.invert();let o=t.point({x:i,y:a});return{x:o.x,y:o.y,width:r-i,height:s-a,rotation:c.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),y.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var t=new o.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:v?10:"auto"}),i=this;t.on("mousedown touchstart",function(e){i._handleMouseDown(e)}),t.on("dragstart",e=>{t.stopDrag(),e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),t.on("mouseenter",()=>{var i=function(e,t,i){if("rotater"===e)return i;t+=n.Util.degToRad(f[e]||0);var a=(n.Util.radToDeg(t)%360+360)%360;if(n.Util._inRange(a,337.5,360)||n.Util._inRange(a,0,22.5))return"ns-resize";if(n.Util._inRange(a,22.5,67.5))return"nesw-resize";if(n.Util._inRange(a,67.5,112.5))return"ew-resize";if(n.Util._inRange(a,112.5,157.5))return"nwse-resize";if(n.Util._inRange(a,157.5,202.5))return"ns-resize";if(n.Util._inRange(a,202.5,247.5))return"nesw-resize";if(n.Util._inRange(a,247.5,292.5))return"ew-resize";else if(n.Util._inRange(a,292.5,337.5))return"nwse-resize";else return n.Util.error("Transformer has unknown angle for cursor detection: "+a),"pointer"}(e,c.Konva.getAngle(this.rotation()),this.rotateAnchorCursor());t.getStage().content&&(t.getStage().content.style.cursor=i),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){var e=new s.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,t){var i=t.getParent(),a=i.padding();e.beginPath(),e.rect(-a,-a,t.width()+2*a,t.height()+2*a),e.moveTo(t.width()/2,-a),i.rotateEnabled()&&e.lineTo(t.width()/2,-i.rotateAnchorOffset()*n.Util._sign(t.height())-a),e.fillStrokeShape(t)},hitFunc:(e,t)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();e.beginPath(),e.rect(-i,-i,t.width()+2*i,t.height()+2*i),e.fillStrokeShape(t)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",e=>{e.cancelBubble=!0}),e.on("dragmove",e=>{e.cancelBubble=!0}),e.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var t=this._getNodeRect(),i=t.width,n=t.height,a=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));this.sin=Math.abs(n/a),this.cos=Math.abs(i/a),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var r=e.target.getAbsolutePosition(),s=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:s.x-r.x,y:s.y-r.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(t=>{t._fire("transformstart",{evt:e.evt,target:t})})}_handleMouseMove(e){var t,i,n,a,r=this.findOne("."+this._movingAnchorName),s=r.getStage();s.setPointersPositions(e);let o=s.getPointerPosition(),l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y},h=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,e)),r.setAbsolutePosition(l);let d=r.getAbsolutePosition();if(h.x!==d.x||h.y!==d.y){if("rotater"===this._movingAnchorName){var u=this._getNodeRect();t=r.x()-u.width/2;let n=Math.atan2(-(i=-r.y()+u.height/2),t)+Math.PI/2;u.height<0&&(n-=Math.PI);let a=c.Konva.getAngle(this.rotation())+n,s=c.Konva.getAngle(this.rotationSnapTolerance()),o=function(e,t,i){let n=t;for(let a=0;a<e.length;a++){let r=c.Konva.getAngle(e[a]),s=Math.abs(r-t)%(2*Math.PI);Math.min(s,2*Math.PI-s)<i&&(n=r)}return n}(this.rotationSnaps(),a,s)-u.rotation,l=function(e,t){let i={x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)};return x(e,t,i)}(u,o);this._fitNodesInto(l,e);return}var p=this.shiftBehavior();a="inverted"===p?this.keepRatio()&&!e.shiftKey:"none"===p?this.keepRatio():this.keepRatio()||e.shiftKey;var g=this.centeredScaling()||e.altKey;if("top-left"===this._movingAnchorName){if(a){var m=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(m.x-r.x(),2)+Math.pow(m.y-r.y(),2));var f=this.findOne(".top-left").x()>m.x?-1:1,v=this.findOne(".top-left").y()>m.y?-1:1;t=n*this.cos*f,i=n*this.sin*v,this.findOne(".top-left").x(m.x-t),this.findOne(".top-left").y(m.y-i)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(r.y());else if("top-right"===this._movingAnchorName){if(a){var m=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(r.x()-m.x,2)+Math.pow(m.y-r.y(),2));var f=this.findOne(".top-right").x()<m.x?-1:1,v=this.findOne(".top-right").y()>m.y?-1:1;t=n*this.cos*f,i=n*this.sin*v,this.findOne(".top-right").x(m.x+t),this.findOne(".top-right").y(m.y-i)}var y=r.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(r.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(r.x());else if("bottom-left"===this._movingAnchorName){if(a){var m=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(m.x-r.x(),2)+Math.pow(r.y()-m.y,2));var f=m.x<r.x()?-1:1,v=r.y()<m.y?-1:1;t=n*this.cos*f,i=n*this.sin*v,r.x(m.x-t),r.y(m.y+i)}y=r.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(r.y());else if("bottom-right"===this._movingAnchorName){if(a){var m=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(r.x()-m.x,2)+Math.pow(r.y()-m.y,2));var f=this.findOne(".bottom-right").x()<m.x?-1:1,v=this.findOne(".bottom-right").y()<m.y?-1:1;t=n*this.cos*f,i=n*this.sin*v,this.findOne(".bottom-right").x(m.x+t),this.findOne(".bottom-right").y(m.y+i)}}else console.error(Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var g=this.centeredScaling()||e.altKey;if(g){var k=this.findOne(".top-left"),b=this.findOne(".bottom-right"),C=k.x(),w=k.y(),S=this.getWidth()-b.x(),_=this.getHeight()-b.y();b.move({x:-C,y:-w}),k.move({x:S,y:_})}var T=this.findOne(".top-left").getAbsolutePosition();t=T.x,i=T.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),A=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:i,width:P,height:A,rotation:c.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var t=this.getNode();this._fire("transformend",{evt:e,target:t}),t&&this._nodes.forEach(t=>{t._fire("transformend",{evt:e,target:t})}),this._movingAnchorName=null}}_fitNodesInto(e,t){var i=this._getNodeRect();if(n.Util._inRange(e.width,-(2*this.padding())-1,1)||n.Util._inRange(e.height,-(2*this.padding())-1,1)){this.update();return}var a=new n.Transform;if(a.rotate(c.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){let t=a.point({x:-(2*this.padding()),y:0});e.x+=t.x,e.y+=t.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){let t=a.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.width+=2*this.padding()}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){let t=a.point({x:0,y:-(2*this.padding())});e.x+=t.x,e.y+=t.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding()}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let t=a.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding()}if(this.boundBoxFunc()){let t=this.boundBoxFunc()(i,e);t?e=t:n.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let r=new n.Transform;r.translate(i.x,i.y),r.rotate(i.rotation),r.scale(i.width/1e7,i.height/1e7);let s=new n.Transform,o=e.width/1e7,l=e.height/1e7;!1===this.flipEnabled()?(s.translate(e.x,e.y),s.rotate(e.rotation),s.translate(e.width<0?e.width:0,e.height<0?e.height:0),s.scale(Math.abs(o),Math.abs(l))):(s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(o,l));let h=s.multiply(r.invert());this._nodes.forEach(e=>{var i;let a=e.getParent().getAbsoluteTransform(),r=e.getTransform().copy();r.translate(e.offsetX(),e.offsetY());let s=new n.Transform;s.multiply(a.copy().invert()).multiply(h).multiply(a).multiply(r);let o=s.decompose();e.setAttrs(o),this._fire("transform",{evt:t,target:e}),e._fire("transform",{evt:t,target:e}),null===(i=e.getLayer())||void 0===i||i.batchDraw()}),this.rotation(n.Util._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e,t=this._getNodeRect();this.rotation(n.Util._getRotation(t.rotation));var i=t.width,a=t.height,r=this.enabledAnchors(),s=this.resizeEnabled(),o=this.padding(),l=this.anchorSize();let c=this.find("._anchor");c.forEach(e=>{e.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:s&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:l/2+o,visible:s&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:s&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:a/2,offsetX:l/2+o,visible:s&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:a/2,offsetX:l/2-o,visible:s&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:a,offsetX:l/2+o,offsetY:l/2-o,visible:s&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:a,offsetY:l/2-o,visible:s&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:a,offsetX:l/2-o,offsetY:l/2-o,visible:s&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*n.Util._sign(a)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:a,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});let h=this.anchorStyleFunc();h&&c.forEach(e=>{h(e)}),null===(e=this.getLayer())||void 0===e||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),l.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(e){return r.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(p,this.update),this.getNode()&&this.update()}}t.Transformer=k,k.prototype.className="Transformer",(0,d._registerNode)(k),a.Factory.addGetterSetter(k,"enabledAnchors",y,function(e){return e instanceof Array||n.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(e){-1===y.indexOf(e)&&n.Util.warn("Unknown anchor name: "+e+". Available names are: "+y.join(", "))}),e||[]}),a.Factory.addGetterSetter(k,"flipEnabled",!0,(0,h.getBooleanValidator)()),a.Factory.addGetterSetter(k,"resizeEnabled",!0),a.Factory.addGetterSetter(k,"anchorSize",10,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(k,"rotateEnabled",!0),a.Factory.addGetterSetter(k,"rotationSnaps",[]),a.Factory.addGetterSetter(k,"rotateAnchorOffset",50,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(k,"rotateAnchorCursor","crosshair"),a.Factory.addGetterSetter(k,"rotationSnapTolerance",5,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(k,"borderEnabled",!0),a.Factory.addGetterSetter(k,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(k,"anchorStrokeWidth",1,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(k,"anchorFill","white"),a.Factory.addGetterSetter(k,"anchorCornerRadius",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(k,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(k,"borderStrokeWidth",1,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(k,"borderDash"),a.Factory.addGetterSetter(k,"keepRatio",!0),a.Factory.addGetterSetter(k,"shiftBehavior","default"),a.Factory.addGetterSetter(k,"centeredScaling",!1),a.Factory.addGetterSetter(k,"ignoreStroke",!1),a.Factory.addGetterSetter(k,"padding",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(k,"node"),a.Factory.addGetterSetter(k,"nodes"),a.Factory.addGetterSetter(k,"boundBoxFunc"),a.Factory.addGetterSetter(k,"anchorDragBoundFunc"),a.Factory.addGetterSetter(k,"anchorStyleFunc"),a.Factory.addGetterSetter(k,"shouldOverdrawWholeArea",!1),a.Factory.addGetterSetter(k,"useSingleNodeRotation",!0),a.Factory.backCompat(k,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})},9512:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Wedge=void 0;let n=i(37305),a=i(67181),r=i(32800),s=i(77527),o=i(32800);class l extends a.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}t.Wedge=l,l.prototype.className="Wedge",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radius"],(0,o._registerNode)(l),n.Factory.addGetterSetter(l,"radius",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"angle",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(l,"clockwise",!1),n.Factory.backCompat(l,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})},20539:function(e,t){},44641:function(e,t){/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,r=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,o=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,f=i?Symbol.for("react.lazy"):60116,v=i?Symbol.for("react.block"):60121,y=i?Symbol.for("react.fundamental"):60117,x=i?Symbol.for("react.responder"):60118,k=i?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case h:case d:case r:case o:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case f:case m:case l:return e;default:return t}}case a:return t}}}function C(e){return b(e)===d}t.AsyncMode=h,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=u,t.Fragment=r,t.Lazy=f,t.Memo=m,t.Portal=a,t.Profiler=o,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return C(e)||b(e)===h},t.isConcurrentMode=C,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return b(e)===u},t.isFragment=function(e){return b(e)===r},t.isLazy=function(e){return b(e)===f},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===a},t.isProfiler=function(e){return b(e)===o},t.isStrictMode=function(e){return b(e)===s},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===d||e===o||e===s||e===p||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===u||e.$$typeof===y||e.$$typeof===x||e.$$typeof===k||e.$$typeof===v)},t.typeOf=b},97312:function(e,t,i){e.exports=i(44641)},13866:function(e,t,i){i.d(t,{Z:function(){return s}}),e=i.hmd(e);var n,a,r,s=("function"==typeof(a=("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i.g?i.g:e).Symbol)?a.observable?n=a.observable:(n=a("observable"),a.observable=n):n="@@observable",n)},30506:function(e,t,i){i.d(t,{b:function(){return u}});var n=i(71576),a=i(34491),r=i(46731),s=i(78716),o=i.n(s),l={branchPagination:"branch-pagination--uvjfl",pagination:"pagination--u9w__",paginationContent:"pagination-content--oYsWi",paginationContentCurrent:"pagination-content-current--FWqUc",paginationContentTotal:"pagination-content-total--baM1l",paginationBtn:"pagination-btn--TTE0O",paginationBtnDisabled:"pagination-btn-disabled--y5H4_"},c=i(66084),h=i(52921);class d extends a.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"someState",!0)}}(0,h.gn)([a.SB],d.prototype,"someState",void 0);let u=a._Y.createComponent("BranchPagination",d,e=>{let{page:t,pageSize:i,disabled:a,onPrevClick:s,onNextClick:c,style:h,className:d}=e.props,u=a||0===t,p=a||t===i-1;return(0,n.jsx)("div",{className:o()(l.branchPagination,d),style:h,children:(0,n.jsxs)("div",{className:l.pagination,children:[(0,n.jsx)("span",{className:o()(l.paginationBtn,{[l.paginationBtnDisabled]:u}),onClick:()=>{u||null==s||s()},children:(0,n.jsx)(r.J,{name:"arrowDown",color:"currentColor",style:{rotate:"90deg"},size:14})}),(0,n.jsxs)("span",{className:l.paginationContent,children:[(0,n.jsx)("span",{className:l.paginationContentCurrent,children:t+1}),(0,n.jsxs)("span",{className:l.paginationContentTotal,children:["/",i]})]}),(0,n.jsx)("span",{className:o()(l.paginationBtn,{[l.paginationBtnDisabled]:p}),onClick:()=>{p||null==c||c()},children:(0,n.jsx)(r.J,{name:"arrowDown",style:{rotate:"-90deg"},color:"currentColor",size:14})})]})})})},29686:function(e,t,i){i.d(t,{J:function(){return v}});var n=i(71576),a=i(34491),r=i(68104),s=i(9163),o=i(5857),l=i(82005),c=i(95782),h={disableConfirmDialog:"disable-confirm-dialog--bFdtG",title:"title--Fj9LQ",radioGroup:"radio-group--so68Z",label:"label--wxIcQ",desc:"desc--g8QpZ",link:"link--s5Sq5",footer:"footer--oVIdp"},d=i(66084),u=i(52921),p=i(88882),g=i(73047);class m extends a.PN{get S(){return p.S.Global.components.DisableConfirmDialog}get options(){return[{key:"disableUntilNext",label:this.S.disableUntilNext},{key:"disableForThisPage",label:this.S.disableForThisSite},{key:"disableGlobally",label:this.S.disableGlobally}]}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"key","disableUntilNext")}}(0,u.gn)([a.SB],m.prototype,"key",void 0),(0,u.gn)([g.Fl],m.prototype,"S",null),(0,u.gn)([g.Fl],m.prototype,"options",null);let f=a._Y.createComponent("DisableConfirmDialog",m,e=>{let{reEnableTipVisible:t=!0}=e.props;return(0,n.jsxs)(r.u,{className:h.disableConfirmDialog,onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,children:[(0,n.jsx)("div",{className:h.title,children:e.S.disableConfirm}),(0,n.jsx)(s.E,{className:h.radioGroup,options:e.options,value:e.key,labelClassName:h.label,onChange:t=>{e.key=t}}),t&&(0,n.jsx)(c.Z,{className:h.desc,S:e.S.restartTips,components:{link:t=>(0,n.jsx)("span",{className:h.link,onClick:()=>{var t,i;null===(t=(i=e.props).onRestartTipsClick)||void 0===t||t.call(i)},children:t})}}),(0,n.jsxs)("footer",{className:h.footer,children:[(0,n.jsx)(o.z,{type:"blackOutline",onClick:()=>{e.props.onDisposed()},children:e.S.cancel}),(0,n.jsx)(o.z,{type:"primary",onClick:()=>{var t,i;null===(t=(i=e.props).onOk)||void 0===t||t.call(i,e.key),e.props.onDisposed()},children:e.S.confirm})]})]})}),v=l.t.createOpener(f)},20905:function(e,t,i){i.d(t,{W:function(){return m}});var n=i(71576),a=i(34491),r=i(78716),s=i.n(r),o=i(87393),l=i(75372),c=i(32771),h=i(66084),d=i(52921),u=i(52825),p=i(73047);class g extends a.PN{get localeList(){let{includeLocales:e}=this.props;return e?u.sV.filter(t=>e.includes(t.locale)):u.sV}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"popoverVisible",!1)}}(0,d.gn)([a.SB],g.prototype,"popoverVisible",void 0),(0,d.gn)([p.Fl],g.prototype,"localeList",null);let m=a._Y.createComponent("LanguageSetting",g,e=>{let{placement:t="bottomRight",popoverFullWidth:i,triggerNode:a,onOpenChange:r,popoverContentClassName:h,popoverUseParentContainer:d,dropdownLabelClassName:u,dropdownLabelContentClassName:p,contentHeight:g=368,popoverWrapperClassName:m,open:f,getTooltipContainer:v,trigger:y,...x}=e.props,k=void 0!==f?f:e.popoverVisible;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.x,{destroyTooltipOnHide:!0,open:k,onOpenChange:t=>{e.popoverVisible=t,null==r||r(t)},trigger:y||["click"],placement:t,fullWidth:i,useParentContainer:d,getTooltipContainer:v,wrapperClassName:m,className:h,content:(0,n.jsx)("div",{className:s()("language-select-content--X3H9Q",{...o.C.getThemeClassNames()}),onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),style:{width:252,height:g},children:(0,n.jsx)(c.i,{...x,onChange:(t,i)=>{var n;e.popoverVisible=!1,null===(n=x.onChange)||void 0===n||n.call(x,t,i)}})}),children:a||(0,n.jsx)(c.i,{showSelectLabel:!0,className:u,labelClassName:p,...x})})})})},55485:function(e,t,i){i.d(t,{m:function(){return p}});var n=i(71576),a=i(34491),r=i(46731),s=i(78716),o=i.n(s),l={tabs:"tabs--YiEv4",wrapper:"wrapper--WDu02",tab:"tab--iB6NU","equal-width":"equal-width--CpBst",equalWidth:"equal-width--CpBst","tab-label":"tab-label--vyUXN",tabLabel:"tab-label--vyUXN","active-tab":"active-tab--avq4i",activeTab:"active-tab--avq4i","light-theme":"light-theme--lpARS",lightTheme:"light-theme--lpARS","small-size":"small-size--TjeOT",smallSize:"small-size--TjeOT","middle-size":"middle-size--WHXGw",middleSize:"middle-size--WHXGw","large-size":"large-size--LuO3S",largeSize:"large-size--LuO3S",primary:"primary--ndKp_","no-transition":"no-transition--GpUAK",noTransition:"no-transition--GpUAK"},c=i(66084),h=i(52921),d=i(88882);class u extends a.PN{get S(){return d.S.Global.components.TranslateSubmenus}handleChange(e){var t,i;null===(t=(i=this.props).onChange)||void 0===t||t.call(i,e)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"someState",!0)}}(0,h.gn)([a.SB],u.prototype,"someState",void 0),(0,h.gn)([a.Fl],u.prototype,"S",null);let p=a._Y.createComponent("Tabs",u,e=>{let{className:t,theme:i="dark",type:a="default",equalWidth:s=!1,list:c,value:h}=e.props,d="middle",u=c.findIndex(e=>e.key===h);return(0,n.jsxs)("div",{className:o()(l.tabs,t,{[l["".concat(d,"-size")]]:d,[l["".concat(i,"-theme")]]:i,[l["".concat(a)]]:a}),children:[(0,n.jsx)("style",{children:"\n          .".concat(l.wrapper," {\n            --monica-tab-index: ").concat(u,";\n            --monica-tab-length: ").concat(c.length,";\n          }\n        ")}),(0,n.jsx)("div",{className:l.wrapper,children:c.map(t=>{var i;let{key:a,label:c}=t;return(0,n.jsxs)("div",{className:o()(l.tab,{[l.activeTab]:a===h,[l.equalWidth]:s}),onClick:()=>{e.handleChange(a)},children:[t.icon&&(0,n.jsx)(r.J,{color:null!==(i=t.iconColor)&&void 0!==i?i:"var(--theme-icon-quaternary)",className:l.icon,name:t.icon,size:18}),(0,n.jsx)("span",{className:l.tabLabel,children:c})]},a)})})]})})},49387:function(e,t,i){i.d(t,{r:function(){return lk}});var n,a,r,s,o,l,c,h=i(66084),d=i(71576),u=i(67061),p=i(92660),g=i(56607),m=i(92235),f=i(70151),v=i(99329),y=i.n(v),x=i(27243),k=i(11502),b=i(76469),C=i(69662),w=i.n(C),S=i(88882),_=i(11989);let T=["#FF3D00","#FFAB00","#5ABA4D","#426CEC","#000000","#90959D","#ffffff"],P=["rect","circle","arrow","pen"],A=["rect","circle","arrow","pen","mosaic","text"],D="#FF3D00",N={size:4,color:D},j="#5C97F7";var E=i(52921),M=i(34491),I=i(73047);class R{useCommonCreator(e){let t={x:0,y:0},i=!1,n=null,{deviation:a=5,trigger:r="drag",create:s,handleUpdate:o}=e;return{onmousedown:e=>{t={x:e.evt.clientX,y:e.evt.clientY},"click"!==r||n||s(t)},onmousemove:e=>{let l={x:e.evt.clientX,y:e.evt.clientY};!i&&(Math.abs(t.x-l.x)>a||Math.abs(t.y-l.y)>a)&&(i=!0),i&&"drag"===r&&(n||(n=s(t)),null==o||o(n,t,l),n.draw())},onmouseup:e=>{null==n||n.emit("changed",null)}}}}class F extends b.v{getShapes(){return[this.shape,...this.handlers.map(e=>e.shape)]}handleSelect(){this.selected=!0,this.handlers.forEach(e=>{e.show()}),this.moveToTop()}moveToTop(){this.shape.moveToTop(),this.handlers.forEach(e=>{e.shape.moveToTop()})}handleUnselect(){this.selected=!1,this.handlers.forEach(e=>{e.hide()})}draw(){this.shape.draw(),this.handlers.forEach(e=>{e.draw()})}setToolConfig(e){this.applyToolConfig(e),this.draw(),this.markToolConfigChange(),this.emit("changed",null)}markToolConfigChange(){let e=this.getToolConfig();this.toolConfig=e}constructor(e){super(),(0,h._)(this,"id",void 0),(0,h._)(this,"handlers",[]),(0,h._)(this,"selected",!1),(0,h._)(this,"manager",void 0),(0,h._)(this,"toolConfig",void 0),this.id=m.m.genId(!0),this.manager=e,this.toolConfig={size:4,color:""},(0,I.rC)(this)}}(0,E.gn)([M.SB],F.prototype,"toolConfig",void 0),(s||(s={})).handleGenericMove=function(e){let{deviation:t=5,shape:i,getStartPos:n,onDrag:a}=e,r=null,s=null,o=!1;i.on("dragstart",()=>{r=n(),s={x:i.x(),y:i.y()}}),i.on("dragmove",()=>{if(!r||!s)return;let e={x:i.x(),y:i.y()};!o&&(Math.abs(r.x-e.x)>t||Math.abs(r.y-e.y)>t)&&(o=!0),o&&a({x:r.x+(e.x-s.x),y:r.y+(e.y-s.y)})})};class L extends b.v{draw(){this.shape.draw()}show(){this.shape.opacity(1),this.draw()}hide(){this.shape.opacity(0),this.draw()}init(e,t){this.shape.on("mousedown",t=>{t.cancelBubble=!0,e.manager.selectRune(e)}),this.shape.on("mouseenter",()=>{e.manager.setCursor(t)}),this.shape.on("mouseleave",()=>{e.manager.restoreCursor()}),s.handleGenericMove({shape:this.shape,getStartPos:()=>({x:this.shape.x(),y:this.shape.y()}),onDrag:e=>{this.emit("drag",{x:e.x,y:e.y})}}),this.shape.on("dragend",()=>{this.emit("dragEnd",null)})}constructor(...e){super(...e),(0,h._)(this,"type",void 0),(0,h._)(this,"shape",void 0)}}class B extends L{setPos(e,t){this.shape.setAttrs({x:e,y:t})}constructor(e,t,i,n="move"){super(),(0,h._)(this,"type","anchor"),this.shape=new(y()).Circle({x:t,y:i,radius:5,fill:"#fff",stroke:j,strokeWidth:2,draggable:!0,opacity:0}),this.init(e,n)}}class O extends L{constructor(e,t,i="move"){super(),(0,h._)(this,"type","custom"),this.shape=t,this.init(e,i)}}class G extends L{show(){this.shape.opacity(.8),this.draw()}constructor(e,t,i="move"){super(),(0,h._)(this,"type","custom"),this.shape=t,this.init(e,i)}}class V extends R{getCreator(e){return this.useCommonCreator({create:t=>{let i=e.controller.activeToolConfigs.arrow,n=new z(e.runeManager,t.x,t.y,t.x,t.y,i.color,i.size);return e.runeManager.addRune(n),n},handleUpdate:(e,t,i)=>{e.ax=t.x,e.ay=t.y,e.bx=i.x,e.by=i.y,e.draw()}})}}class z extends F{draw(){let{ax:e,ay:t,bx:i,by:n,color:a}=this,r=this.getPoints(),s=180/Math.PI*Math.atan2(n-t,i-e);this.shape.setAttrs({x:e,y:t,points:r,rotation:s,fill:a}),this.boundary.shape.setAttrs({x:e,y:t,points:r,rotation:s}),this.anchors[0].setPos(this.ax,this.ay),this.anchors[1].setPos(this.bx,this.by),super.draw()}clone(){return new z(this.manager,this.ax,this.ay,this.bx,this.by,this.color,this.size)}applyToolConfig(e){this.color=e.color,this.size=e.size}getToolConfig(){return{color:this.color,size:this.size}}createHandlers(){this.createBoundaryHandler(),this.createAnchors(),this.handlers.forEach(e=>{e.on("dragEnd",()=>{this.emit("changed",null)})})}createBoundaryHandler(){let e=new(y()).Line({x:0,y:0,points:[],stroke:j,strokeWidth:1,opacity:0,closed:!0,draggable:!0});this.boundary=new O(this,e,"move"),this.boundary.on("drag",e=>{let t=this.bx-this.ax,i=this.by-this.ay;this.ax=e.x,this.ay=e.y,this.bx=e.x+t,this.by=e.y+i,this.draw()}),this.handlers.push(this.boundary)}createAnchors(){let e=new B(this,this.ax,this.ay,"default");e.on("drag",e=>{this.ax=e.x,this.ay=e.y,this.draw()});let t=new B(this,this.bx,this.by,"default");t.on("drag",e=>{this.bx=e.x,this.by=e.y,this.draw()}),this.anchors=[e,t],this.handlers.push(e,t)}getPoints(){let{ax:e,ay:t,bx:i,by:n,size:a}=this,r=Math.sqrt((i-e)**2+(n-t)**2),s=2,o=8,l=20,c=24,h=1;8===a?(s=4,o=12,l=28,c=32):16===a&&(s=8,o=20,l=40,c=44);let d=2*c;r<d&&(h=r/d);let u=Math.max(r-c*h,0);return[0,-s/2*h,u,-o/2*h,u,(-l/2+1)*h,u+1,-l/2*h,r,-1,r,1,u+1,l/2*h,u,(l/2-1)*h,u,o/2*h,0,s/2*h]}constructor(e,t,i,n,a,r,s){super(e),(0,h._)(this,"ax",void 0),(0,h._)(this,"ay",void 0),(0,h._)(this,"bx",void 0),(0,h._)(this,"by",void 0),(0,h._)(this,"color",void 0),(0,h._)(this,"size",void 0),(0,h._)(this,"anchors",[]),(0,h._)(this,"boundary",void 0),(0,h._)(this,"type","arrow"),(0,h._)(this,"shape",void 0),this.ax=t,this.ay=i,this.bx=n,this.by=a,this.size=s,this.color=r,this.shape=new(y()).Line({x:t,y:i,points:[],fill:r,closed:!0,listening:!1}),this.createHandlers(),this.markToolConfigChange()}}class U extends R{getCreator(e){return this.useCommonCreator({create:t=>{let i=e.controller.activeToolConfigs.circle,n=new W(e.runeManager,t.x,t.y,0,0,i.color,i.size);return e.runeManager.addRune(n),n},handleUpdate:(e,t,i)=>{e.x=Math.min(t.x,i.x),e.y=Math.min(t.y,i.y),e.w=Math.abs(t.x-i.x),e.h=Math.abs(t.y-i.y),e.draw()}})}}class W extends F{draw(){let{x:e,y:t,w:i,h:n,color:a,strokeWidth:r}=this;this.shape.setAttrs({x:e+i/2,y:t+n/2,radiusX:Math.abs(i/2),radiusY:Math.abs(n/2),strokeWidth:r,stroke:a}),this.boundary.shape.setAttrs({x:e+i/2,y:t+n/2,points:this.sampleEllipsePoints(0,0,i/2,n/2)}),this.anchors[0].setPos(e,t),this.anchors[1].setPos(e+i,t),this.anchors[2].setPos(e,t+n),this.anchors[3].setPos(e+i,t+n),super.draw()}clone(){return new W(this.manager,this.x,this.y,this.w,this.h,this.color,this.strokeWidth)}applyToolConfig(e){this.color=e.color,this.strokeWidth=e.size}getToolConfig(){return{color:this.color,size:this.strokeWidth}}createHandlers(){this.createBoundaryHandler(),this.createAnchors(),this.handlers.forEach(e=>{e.on("dragEnd",()=>{this.normalize(),this.emit("changed",null)})})}createBoundaryHandler(){let e=new(y()).Line({x:0,y:0,points:[],stroke:j,strokeWidth:2,opacity:0,hitStrokeWidth:16,draggable:!0});this.boundary=new O(this,e,"move"),this.boundary.on("drag",e=>{this.x=e.x-this.w/2,this.y=e.y-this.h/2,this.draw()}),this.handlers.push(this.boundary)}normalize(){let{x:e,y:t,w:i,h:n}=this;this.x=Math.min(e,e+i),this.y=Math.min(t,t+n),this.w=Math.abs(i),this.h=Math.abs(n),this.draw()}createAnchors(){let e=new B(this,0,0,"nwse-resize");e.on("drag",e=>{let t=e.x-this.x,i=e.y-this.y;this.x=e.x,this.y=e.y,this.w-=t,this.h-=i,this.draw()});let t=new B(this,this.w,0,"nesw-resize");t.on("drag",e=>{let t=e.x-(this.x+this.w),i=e.y-this.y;this.y=e.y,this.w+=t,this.h-=i,this.draw()});let i=new B(this,0,this.h,"nesw-resize");i.on("drag",e=>{let t=e.x-this.x,i=e.y-(this.y+this.h);this.x=e.x,this.w-=t,this.h+=i,this.draw()});let n=new B(this,this.w,this.h,"nwse-resize");n.on("drag",e=>{let t=e.x-(this.x+this.w),i=e.y-(this.y+this.h);this.w+=t,this.h+=i,this.draw()}),this.anchors=[e,t,i,n],this.handlers.push(e,t,i,n)}sampleEllipsePoints(e,t,i,n){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:64,r=[];for(let s=0;s<a;s++){let o=2*Math.PI*s/a,l=e+i*Math.cos(o),c=t+n*Math.sin(o);r.push(l,c)}return r.push(r[0],r[1]),r}constructor(e,t,i,n,a,r,s){super(e),(0,h._)(this,"x",void 0),(0,h._)(this,"y",void 0),(0,h._)(this,"w",void 0),(0,h._)(this,"h",void 0),(0,h._)(this,"color",void 0),(0,h._)(this,"strokeWidth",void 0),(0,h._)(this,"anchors",[]),(0,h._)(this,"boundary",void 0),(0,h._)(this,"type","circle"),(0,h._)(this,"shape",void 0),this.x=t,this.y=i,this.w=n,this.h=a,this.color=r,this.strokeWidth=s,this.shape=new(y()).Ellipse({x:t+n/2,y:i+a/2,radiusX:n/2,radiusY:a/2,stroke:r,strokeWidth:s,listening:!1}),this.createHandlers(),this.markToolConfigChange()}}class H extends R{getCreator(e){return this.useCommonCreator({create:t=>{let i=e.controller.activeToolConfigs.mosaic,n=e.runeManager.getMosaicRune();if(n)return n.addNewPath(i.size,[t.x,t.y]),n;let a=new q(e,[{size:i.size,points:[t.x,t.y]}]);return e.runeManager.addRune(a),a},handleUpdate:(t,i,n)=>{t.addPathPoint(n.x,n.y),e.runeManager.drawRunes()}})}}class q extends F{get lastPath(){return this.paths[this.paths.length-1]}draw(){super.draw()}clone(){return new q(this.board,m.m.jsonClone(this.paths))}addNewPath(e,t){this.paths.push({size:e,points:t})}addPathPoint(e,t){this.lastPath.points.push(e,t)}applyToolConfig(e){if(this.lastPath.size!==e.size){if(0===this.lastPath.points.length){this.lastPath.size=e.size;return}this.paths.push({size:e.size,points:[]})}}getToolConfig(){return{color:"",size:0}}constructor(e,t){super(e.runeManager),(0,h._)(this,"type","mosaic"),(0,h._)(this,"shape",void 0),(0,h._)(this,"paths",void 0),(0,h._)(this,"board",void 0),this.board=e,this.paths=t,this.shape=new(y()).Group({clipFunc:e=>{this.paths.forEach(t=>{if(0===t.points.length)return;let i=t.points,n=3*t.size,a=null;for(let t=0;t<i.length;t+=2){let r=i[t],s=i[t+1];if(a){let t=function(e,t,i){let n=i/2;if(e.x===t.x){let i=Math.min(e.y,t.y),a=Math.max(e.y,t.y);return[e.x-n,i-n,e.x+n,i-n,t.x+n,a+n,t.x-n,a+n]}let a=e.x<t.x?e:t,r=e.x<t.x?t:e;return r.y<a.y?[a.x+n,a.y+n,a.x-n,a.y+n,a.x-n,a.y-n,r.x-n,r.y-n,r.x+n,r.y-n,r.x+n,r.y+n]:[a.x-n,a.y+n,a.x-n,a.y-n,a.x+n,a.y-n,r.x+n,r.y-n,r.x+n,r.y+n,r.x-n,r.y+n]}({x:a[0],y:a[1]},{x:r,y:s},n);e.moveTo(t[0],t[1]);for(let i=2;i<t.length;i+=2)e.lineTo(t[i],t[i+1])}else e.rect(r-n/2,s-n/2,n,n);a=[r,s]}})},listening:!1});let i=new(y()).Rect({x:e.state.x+2,y:e.state.y+2,width:e.state.width-4,height:e.state.height-4,...e.getBgImageFillPattern()});i.cache(),i.filters([y().Filters.Pixelate]),i.pixelSize(20),this.shape.add(i),this.markToolConfigChange()}}class Q extends R{getCreator(e){return this.useCommonCreator({create:t=>{let i=e.controller.activeToolConfigs.pen,n=new Y(e.runeManager,t.x,t.y,[],i.color,i.size);return e.runeManager.addRune(n),n},handleUpdate:(e,t,i)=>{e.addPoint(i.x-t.x,i.y-t.y),e.draw()}})}}class Y extends F{draw(){let{x:e,y:t,points:i,color:n,size:a}=this;this.shape.setAttrs({x:e,y:t,points:i,strokeWidth:a,stroke:n}),this.boundary.shape.setAttrs({x:e,y:t,points:i}),super.draw()}clone(){return new Y(this.manager,this.x,this.y,m.m.jsonClone(this.points),this.color,this.size)}addPoint(e,t){this.points.push(e,t)}applyToolConfig(e){this.color=e.color,this.size=e.size}getToolConfig(){return{color:this.color,size:this.size}}createHandlers(){this.createBoundaryHandler(),this.handlers.forEach(e=>{e.on("dragEnd",()=>{this.emit("changed",null)})})}createBoundaryHandler(){let e=new(y()).Line({x:0,y:0,points:[],stroke:j,strokeWidth:2,opacity:0,hitStrokeWidth:4,draggable:!0});this.boundary=new O(this,e,"move"),this.boundary.on("drag",e=>{this.x=e.x,this.y=e.y,this.draw()}),this.handlers.push(this.boundary)}constructor(e,t,i,n,a,r){super(e),(0,h._)(this,"x",void 0),(0,h._)(this,"y",void 0),(0,h._)(this,"points",void 0),(0,h._)(this,"color",void 0),(0,h._)(this,"size",void 0),(0,h._)(this,"boundary",void 0),(0,h._)(this,"type","pen"),(0,h._)(this,"shape",void 0),this.x=t,this.y=i,this.points=n,this.color=a,this.size=r,this.shape=new(y()).Line({x:t,y:i,points:n,stroke:a,strokeWidth:r,lineJoin:"round",lineCap:"round",listening:!1}),this.createHandlers(),this.markToolConfigChange()}}class K extends R{getCreator(e){return this.useCommonCreator({create:t=>{let i=e.controller.activeToolConfigs.rect,n=new X(e.runeManager,t.x,t.y,0,0,i.color,i.size);return e.runeManager.addRune(n),n},handleUpdate:(e,t,i)=>{e.x=Math.min(t.x,i.x),e.y=Math.min(t.y,i.y),e.w=Math.abs(t.x-i.x),e.h=Math.abs(t.y-i.y),e.draw()}})}}class X extends F{draw(){let{x:e,y:t,w:i,h:n,color:a,strokeWidth:r}=this;this.shape.setAttrs({x:e,y:t,width:i,height:n,strokeWidth:r,stroke:a}),this.boundary.shape.setAttrs({x:e,y:t,points:[0,0,i,0,i,n,0,n,0,0]}),this.anchors[0].setPos(e,t),this.anchors[1].setPos(e+i,t),this.anchors[2].setPos(e,t+n),this.anchors[3].setPos(e+i,t+n),super.draw()}clone(){return new X(this.manager,this.x,this.y,this.w,this.h,this.color,this.strokeWidth)}applyToolConfig(e){this.color=e.color,this.strokeWidth=e.size}getToolConfig(){return{color:this.color,size:this.strokeWidth}}createHandlers(){this.createBoundaryHandler(),this.createAnchors(),this.handlers.forEach(e=>{e.on("dragEnd",()=>{this.normalize(),this.emit("changed",null)})})}createBoundaryHandler(){let e=new(y()).Line({x:0,y:0,points:[],stroke:j,strokeWidth:2,opacity:0,hitStrokeWidth:16,draggable:!0});this.boundary=new O(this,e,"move"),this.boundary.on("drag",e=>{this.x=e.x,this.y=e.y,this.draw()}),this.handlers.push(this.boundary)}normalize(){let{x:e,y:t,w:i,h:n}=this;this.x=Math.min(e,e+i),this.y=Math.min(t,t+n),this.w=Math.abs(i),this.h=Math.abs(n),this.draw()}createAnchors(){let e=new B(this,0,0,"nwse-resize");e.on("drag",e=>{let t=e.x-this.x,i=e.y-this.y;this.x=e.x,this.y=e.y,this.w-=t,this.h-=i,this.draw()});let t=new B(this,this.w,0,"nesw-resize");t.on("drag",e=>{let t=e.x-(this.x+this.w),i=e.y-this.y;this.y=e.y,this.w+=t,this.h-=i,this.draw()});let i=new B(this,0,this.h,"nesw-resize");i.on("drag",e=>{let t=e.x-this.x,i=e.y-(this.y+this.h);this.x=e.x,this.w-=t,this.h+=i,this.draw()});let n=new B(this,this.w,this.h,"nwse-resize");n.on("drag",e=>{let t=e.x-(this.x+this.w),i=e.y-(this.y+this.h);this.w+=t,this.h+=i,this.draw()}),this.anchors=[e,t,i,n],this.handlers.push(e,t,i,n)}constructor(e,t,i,n,a,r,s){super(e),(0,h._)(this,"x",void 0),(0,h._)(this,"y",void 0),(0,h._)(this,"w",void 0),(0,h._)(this,"h",void 0),(0,h._)(this,"color",void 0),(0,h._)(this,"strokeWidth",void 0),(0,h._)(this,"anchors",[]),(0,h._)(this,"boundary",void 0),(0,h._)(this,"type","rect"),(0,h._)(this,"shape",void 0),this.x=t,this.y=i,this.w=n,this.h=a,this.color=r,this.strokeWidth=s,this.shape=new(y()).Rect({x:t,y:i,width:n,height:a,stroke:r,strokeWidth:s,lineJoin:"round",listening:!1}),this.createHandlers(),this.markToolConfigChange()}}class Z extends b.v{get canUndo(){return!!this.layer&&(this.history.length>0||this.runes.length>0)}undo(){if(this.canUndo){if(this.runes.forEach(e=>{e.getShapes().forEach(e=>e.remove())}),0===this.history.length)this.runes=[];else{let e=this.history.pop();this.runes=e,this.runes.forEach(e=>{this.layer.add(...e.getShapes())})}this.drawRunes(),this.lastSnapshot=this.runes.map(e=>e.clone()),this.controller.canUndo=this.canUndo}}deleteSelectedRune(){this.runes=this.runes.filter(e=>!e.selected||(e.getShapes().forEach(e=>e.remove()),!1)),this.snapshot(),this.emit("selectionChange",{selectedRune:null})}setLayer(e){this.layer=e,this.runes.forEach(t=>{e.add(...t.getShapes())}),this.drawRunes()}setCursor(e){this.currentCursor!==e&&(this.lastCursor=this.currentCursor,this.currentCursor=e,this.emit("cursorChange",e))}restoreCursor(){this.currentCursor=this.lastCursor}addRune(e){"mosaic"===e.type?this.runes.unshift(e):this.runes.push(e),e.on("changed",()=>{this.snapshot()}),this.layer&&("mosaic"===e.type?(this.runes.forEach(e=>{e.getShapes().forEach(e=>e.remove())}),this.runes.forEach(e=>{this.layer.add(...e.getShapes())})):this.layer.add(...e.getShapes()),this.drawRunes())}drawRunes(){this.runes.forEach(e=>{e.draw()})}snapshot(){this.lastSnapshot&&this.history.push(this.lastSnapshot),this.lastSnapshot=this.runes.map(e=>e.clone()),this.controller.canUndo=this.canUndo}selectRune(e){e.selected||(this.runes.forEach(t=>{t!==e&&t.selected&&t.handleUnselect()}),e.handleSelect(),this.drawRunes(),this.emit("selectionChange",{selectedRune:e}))}clearSelection(){this.runes.forEach(e=>{e.selected&&e.handleUnselect()}),this.drawRunes(),this.emit("selectionChange",{selectedRune:null})}getMosaicRune(){return this.runes.filter(e=>"mosaic"===e.type)[0]||null}constructor(e){super(),(0,h._)(this,"controller",void 0),(0,h._)(this,"runes",void 0),(0,h._)(this,"history",void 0),(0,h._)(this,"lastSnapshot",void 0),(0,h._)(this,"layer",void 0),(0,h._)(this,"lastCursor",void 0),(0,h._)(this,"currentCursor",void 0),this.controller=e,this.runes=[],this.history=[],this.lastSnapshot=null,this.layer=null,this.lastCursor="",this.currentCursor=""}}class J extends R{getCreator(e){return this.useCommonCreator({trigger:"click",create:t=>{let i=e.controller.activeToolConfigs.text,n=new $(e,t.x,t.y,0,0,"",i.size,i.color);return n.createEditableNode(),n}})}}class $ extends F{draw(){let{x:e,y:t,w:i,h:n,text:a,size:r,color:s}=this;this.shape.setAttrs({x:e,y:t,width:i,height:n,fontSize:r,text:a,fill:s}),this.boundary.shape.setAttrs({x:e,y:t,width:i,height:n}),super.draw()}clone(){return new $(this.board,this.x,this.y,this.w,this.h,this.text,this.size,this.color)}createEditableNode(){let{x:e,y:t,text:i,size:n,color:a}=this,r=document.createElement("div");this.addCommonStyles(r,{left:e,top:t,fontSize:n,color:a}),r.contentEditable="true",r.innerText=i,r.addEventListener("click",e=>{e.stopPropagation()});let s=document.createElement("div");s.style.position="absolute",s.style.left="0",s.style.right="0",s.style.top="0",s.style.bottom="0",s.style.background="transparent",s.style.zIndex="1000",s.addEventListener("click",e=>{if(e.stopPropagation(),!r)return;let t=r.innerText;if(""===t){r.remove(),s.remove(),this.editableNode=null;return}this.manager.addRune(this);let i=r.getBoundingClientRect();this.w=i.width,this.h=i.height,this.text=t,this.draw(),r.remove(),s.remove(),this.editableNode=null,this.emit("changed")}),s.addEventListener("keydown",e=>{e.stopPropagation()}),s.appendChild(r),this.editableNode=r,this.board.rootNode.appendChild(s),setTimeout(()=>{let e=document.createRange();e.selectNodeContents(r),e.collapse(!1);let t=window.getSelection();null==t||t.removeAllRanges(),null==t||t.addRange(e),r.focus()},10)}applyToolConfig(e){this.color=e.color,this.size=e.size;let t=this.getTextBoxRect();this.w=t.width,this.h=t.height}getToolConfig(){return{color:this.color,size:this.size}}createHandlers(){this.createBoundaryHandler(),this.handlers.forEach(e=>{e.on("dragEnd",()=>{this.emit("changed",null)})}),this.boundary.shape.on("dblclick",()=>{this.w=0,this.h=0,this.draw(),this.createEditableNode()})}createBoundaryHandler(){let e=new(y()).Rect({x:0,y:0,width:0,height:0,stroke:j,strokeWidth:2,cornerRadius:4,draggable:!0,opacity:0});this.boundary=new G(this,e,"move"),this.boundary.on("drag",e=>{this.x=e.x,this.y=e.y,this.draw()}),this.handlers.push(this.boundary)}getTextBoxRect(){let e=document.createElement("div");this.addCommonStyles(e,{left:-999,top:-999,fontSize:this.size,color:this.color,visibility:"hidden"}),e.innerText=this.text,this.board.rootNode.appendChild(e);let t=e.getBoundingClientRect();return e.remove(),t}addCommonStyles(e,t){let{left:i,top:n,fontSize:a,color:r,visibility:s="visible"}=t,o={position:"absolute",left:"".concat(i,"px"),top:"".concat(n,"px"),border:"2px solid #5C97F7",borderRadius:"4px",boxSizing:"border-box",padding:"4px",lineHeight:"1",color:r,caretColor:r,outline:"none",fontSize:"".concat(a,"px"),fontFamily:"sans-serif",visibility:s};Object.keys(o).forEach(t=>{e.style[t]=o[t]})}constructor(e,t,i,n=0,a=0,r,s,o){super(e.runeManager),(0,h._)(this,"board",void 0),(0,h._)(this,"x",void 0),(0,h._)(this,"y",void 0),(0,h._)(this,"w",void 0),(0,h._)(this,"h",void 0),(0,h._)(this,"size",void 0),(0,h._)(this,"color",void 0),(0,h._)(this,"text",""),(0,h._)(this,"type","text"),(0,h._)(this,"shape",void 0),(0,h._)(this,"boundary",void 0),(0,h._)(this,"editableNode",null),this.board=e,this.x=t,this.y=i,this.w=n,this.h=a,this.text=r,this.size=s,this.color=o,this.shape=new(y()).Text({x:t,y:i,width:0,height:0,text:r,fontSize:s,fontFamily:"sans-serif",fill:o,draggable:!1,padding:6}),this.shape.on("mousedown",e=>{e.cancelBubble=!0}),this.shape.on("mouseup",e=>{e.cancelBubble=!0}),this.shape.on("mouseenter",e=>{e.cancelBubble=!0,this.board.runeManager.setCursor("move")}),this.shape.on("mouseleave",e=>{e.cancelBubble=!0,this.board.runeManager.setCursor("crosshair")}),this.shape.on("dragmove",e=>{e.cancelBubble=!0;let{x:t,y:i}=e.target.getPosition();this.x=t,this.y=i,this.draw()}),this.createHandlers(),this.markToolConfigChange()}}var ee=i(32986);class et extends b.v{get canUndo(){return this.runeManager.canUndo}undo(){this.runeManager.undo()}deleteSelectedRune(){this.runeManager.deleteSelectedRune()}selectTool(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.state&&(this.controller.selectedRune&&this.controller.selectedRune.type!==e&&this.runeManager.clearSelection(),this.activeTool=t?e:null,this.activeTool?this.controller.setActiveTool(e):this.setCursor("default"),this.draw({...this.state,transformDisabled:t}))}async download(e){e||(e=await this.toDataURL()),e&&m.m.downloadFile(e,this.getFileName())}async copy(){let e=await this.toDataURL();if(!e)return"";let t=[new ClipboardItem({"image/png":ee.P.dataUrlToBlob(e)})];return navigator.clipboard.write(t),e}async draw(e){let t=this.boardLayer;t.removeChildren(),this.state={...this.state,...e},e.transformDisabled&&this.disableTransform();let i=this.createHighlightShape(e);if(t.add(i),!this.transformDisabled){let e=new(y()).Transformer({rotateEnabled:!1,borderEnabled:!1,borderStroke:j,borderStrokeWidth:2,borderDash:[3,3],anchorSize:10,anchorCornerRadius:5,anchorStroke:"#ffffff",anchorStrokeWidth:1,anchorFill:j,keepRatio:!1,ignoreStroke:!0});e.nodes([i]),t.add(e)}this.runeManager.setLayer(t)}async toDataURL(){this.runeManager.clearSelection(),this.draw({...this.state,transformDisabled:!0,strokeDisabled:!0});let e=this.boardLayer.toCanvas(),t=ee.P.cropImage(e,this.state);return this.draw({...this.state,strokeDisabled:!1}),t}getBoundingRect(){return this.state?{x:this.state.x,y:this.state.y,width:this.state.width,height:this.state.height}:{x:0,y:0,width:0,height:0}}disable(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null===(e=this.boardLayer)||void 0===e||e.setAttr("listening",!t)}destroy(){var e;null===(e=this.boardLayer)||void 0===e||e.destroy()}getFileName(){return"Monica_".concat(w()().format("YYYY-MM-DD_HH-mm-ss"),".png")}getIsDisabled(){return this.transformDisabled}getBgImageFillPattern(){let e=this.backgroundImage,t=1/devicePixelRatio;return{fillPatternImage:e,fillPatternScaleX:t,fillPatternScaleY:t,fillPatternOffsetX:this.state.x/t,fillPatternOffsetY:this.state.y/t,fillPatternRepeat:"no-repeat"}}async init(){this.ctx=this.opts.ctx,this.backgroundImage=this.opts.backgroundImage,this.boardLayer=new(y()).Layer,this.ctx.add(this.boardLayer);let e=null;this.ctx.on("mousedown",t=>{if(this.runeManager.clearSelection(),!this.activeTool)return;let i=this.factories[this.activeTool];if(!i)throw Error("factory not found for tool: ".concat(this.activeTool));(e=i.getCreator(this)).onmousedown(t),t.cancelBubble=!0}),this.ctx.on("mousemove",t=>{e&&e.onmousemove(t),t.cancelBubble=!0}),this.ctx.on("mouseup",t=>{e&&(e.onmouseup(t),e=null),t.cancelBubble=!0})}disableTransform(){this.transformDisabled||(this.transformDisabled=!0)}createHighlightShape(e){let t=1/devicePixelRatio,i=this.getBgImageFillPattern(),n=new(y()).Rect({...e,...i,strokeEnabled:!e.strokeDisabled,stroke:j,strokeWidth:2,strokeScaleEnabled:!1,dash:[3,3],draggable:!this.transformDisabled,dragBoundFunc:e=>{let{innerWidth:t,innerHeight:i}=window,{width:a,height:r}=n.size(),s=n.rotation(),o=n.scaleX(),l=n.scaleY();return(180===s||-180===s)&&(o*=-1,l*=-1),ee.P.getBoundPosition(e,{boxWidth:t,boxHeight:i,width:a*o,height:r*l})}});n.on("mouseenter",e=>{if(e.cancelBubble=!0,this.activeTool){if(A.includes(this.activeTool)){this.setCursor("crosshair");return}}else this.transformDisabled?this.setCursor("default"):this.setCursor("move")}),n.on("mouseleave",e=>{e.cancelBubble=!0,this.transformDisabled&&!this.activeTool?this.setCursor("default"):this.setCursor("crosshair")}),n.on("dragmove",e=>{e.cancelBubble=!0,a(e.target)}),n.on("dragend",()=>{this.controller.highlightAreaDragging=!1}),n.on("transform",e=>{e.cancelBubble=!0,a(e.target)}),n.on("transformend",()=>{this.controller.highlightAreaDragging=!1});let a=e=>{let{x:i,y:a}=e.position(),{width:r,height:s}=e.size(),o=e.scaleX(),l=e.scaleY(),c=e.rotation();(180===c||-180===c)&&(o*=-1,l*=-1),n.setAttrs({fillPatternScaleX:t/o,fillPatternScaleY:t/l,fillPatternOffsetX:i/t,fillPatternOffsetY:a/t}),n.draw();let h={x:i,y:a,width:r*o,height:s*l};h.width<0&&(h.x=i+h.width,h.width=-h.width),h.height<0&&(h.y=a+h.height,h.height=-h.height),this.state={...this.state,...h},this.controller.highlightAreaDragging=!0,this.emit("transform",h)};return n}setCursor(e){this.ctx.container().style.cursor=e}constructor(e){super(),(0,h._)(this,"opts",void 0),(0,h._)(this,"runeManager",void 0),(0,h._)(this,"rootNode",void 0),(0,h._)(this,"state",void 0),(0,h._)(this,"controller",void 0),(0,h._)(this,"ctx",void 0),(0,h._)(this,"backgroundImage",void 0),(0,h._)(this,"boardLayer",void 0),(0,h._)(this,"factories",void 0),(0,h._)(this,"transformDisabled",void 0),(0,h._)(this,"activeTool",void 0),this.opts=e,this.state={x:-1,y:-1,width:-1,height:-1},this.factories={rect:new K,circle:new U,arrow:new V,text:new J,pen:new Q,mosaic:new H},this.transformDisabled=!1,this.activeTool=null,this.controller=e.controller,this.rootNode=e.rootNode,this.runeManager=new Z(this.controller),this.runeManager.on("cursorChange",e=>{this.setCursor(e)}),this.runeManager.on("selectionChange",e=>{let{selectedRune:t}=e;this.controller.setSelectedRune(t)}),this.init()}}class ei extends b.v{draw(){this.maskLayer.removeChildren(),this.ctx.container().style.cursor=this.cursor;let e=new(y()).Image({x:0,y:0,width:this.ctx.width(),height:this.ctx.height(),image:this.opts.backgroundImage});this.maskLayer.add(e);let t=new(y()).Rect({x:0,y:0,width:this.ctx.width(),height:this.ctx.height(),fill:"black",opacity:.3}),i=null,n=!1;t.on("mousedown",e=>{i={x:e.evt.clientX,y:e.evt.clientY}}),t.on("mousemove",e=>{if(i){let t={x:e.evt.clientX,y:e.evt.clientY};if(!n&&(Math.abs(i.x-t.x)>5||Math.abs(i.y-t.y)>5)&&(n=!0,this.emit("dragStart",{...i,width:0,height:0})),n){let e=Math.min(i.x,t.x),n=Math.min(i.y,t.y),a=Math.abs(i.x-t.x),r=Math.abs(i.y-t.y);this.emit("dragging",{x:e,y:n,width:a,height:r})}}}),t.on("mouseup",e=>{let t={x:e.evt.clientX,y:e.evt.clientY};if(i&&n){let e=Math.min(i.x,t.x),n=Math.min(i.y,t.y),a=Math.abs(i.x-t.x),r=Math.abs(i.y-t.y);this.emit("dragEnd",{x:e,y:n,width:a,height:r})}i=null,n=!1}),this.maskLayer.add(t)}setCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cursor;this.cursor=e}destroy(){var e;null===(e=this.maskLayer)||void 0===e||e.destroy()}constructor(e){super(),(0,h._)(this,"opts",void 0),(0,h._)(this,"ctx",void 0),(0,h._)(this,"maskLayer",void 0),(0,h._)(this,"cursor",void 0),this.opts=e,this.cursor="crosshair",this.ctx=e.ctx,this.maskLayer=new(y()).Layer,this.ctx.add(this.maskLayer)}}var en=i(46731),ea=i(28901),er=i(78716),es=i.n(er),eo=i(82005),el=i(22879),ec=i(52580),eh=i(75087),ed=i(91221),eu=i.n(ed);function ep(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function eg(){return(eg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function em(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i(20539);var ef=(0,eh.createContext)(),ev={context:n=ef,withTheme:function(e){var t=eh.forwardRef(function(t,i){return eh.createElement(n.Consumer,null,function(n){return eh.createElement(e,eg({theme:n,ref:i},t))})});return eu()(t,e),t},useTheme:function(){return eh.useContext(n)},ThemeProvider:function(e){function t(){for(var t,i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return ep(em(em(t=e.call.apply(e,[this].concat(a))||this)),"cachedTheme",void 0),ep(em(em(t)),"lastOuterTheme",void 0),ep(em(em(t)),"lastTheme",void 0),ep(em(em(t)),"renderProvider",function(e){var i=t.props.children;return eh.createElement(n.Provider,{value:t.getTheme(e)},i)}),t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var i=t.prototype;return i.getTheme=function(e){if(this.props.theme!==this.lastTheme||e!==this.lastOuterTheme||!this.cachedTheme){if(this.lastOuterTheme=e,this.lastTheme=this.props.theme,"function"==typeof this.lastTheme){var t=this.props.theme;this.cachedTheme=t(e)}else{var i=this.props.theme;this.cachedTheme=e?eg({},e,i):i}}return this.cachedTheme},i.render=function(){return this.props.children?eh.createElement(n.Consumer,null,this.renderProvider):null},t}(eh.Component)};ev.withTheme,ev.ThemeProvider,ev.useTheme;var ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex=("undefined"==typeof window?"undefined":ey(window))==="object"&&("undefined"==typeof document?"undefined":ey(document))==="object"&&9===document.nodeType,ek=i(956),eb=function(e,t){},eC=i(17177),ew=i(31479);function eS(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,ew.Z)(e,t)}var e_=i(28129),eT={}.constructor;function eP(e,t,i){void 0===e&&(e="unnamed");var n=i.jss,a=function e(t){if(null==t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);if(t.constructor!==eT)return t;var i={};for(var n in t)i[n]=e(t[n]);return i}(t);return n.plugins.onCreateRule(e,a,i)||(e[0],null)}var eA=function(e,t){for(var i="",n=0;n<e.length&&"!important"!==e[n];n++)i&&(i+=t),i+=e[n];return i},eD=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var i=0;i<e.length&&"!important"!==e[i];i++)t&&(t+=", "),t+=eA(e[i]," ");else t=eA(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function eN(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function ej(e,t){for(var i="",n=0;n<t;n++)i+="  ";return i+e}function eE(e,t,i){void 0===i&&(i={});var n="";if(!t)return n;var a=i.indent,r=void 0===a?0:a,s=t.fallbacks;!1===i.format&&(r=-1/0);var o=eN(i),l=o.linebreak,c=o.space;if(e&&r++,s){if(Array.isArray(s))for(var h=0;h<s.length;h++){var d=s[h];for(var u in d){var p=d[u];null!=p&&(n&&(n+=l),n+=ej(u+":"+c+eD(p)+";",r))}}else for(var g in s){var m=s[g];null!=m&&(n&&(n+=l),n+=ej(g+":"+c+eD(m)+";",r))}}for(var f in t){var v=t[f];null!=v&&"fallbacks"!==f&&(n&&(n+=l),n+=ej(f+":"+c+eD(v)+";",r))}return(n||i.allowEmpty)&&e?(r--,n&&(n=""+l+n+l),ej(""+e+c+"{"+n,r)+ej("}",r)):n}var eM=/([[\].#*$><+~=|^:(),"'`\s])/g,eI="undefined"!=typeof CSS&&CSS.escape,eR=function(e){return eI?eI(e):e.replace(eM,"\\$1")},eF=function(){function e(e,t,i){this.type="style",this.isProcessed=!1;var n=i.sheet,a=i.Renderer;this.key=e,this.options=i,this.style=t,n?this.renderer=n.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,i){if(void 0===t)return this.style[e];var n=!!i&&i.force;if(!n&&this.style[e]===t)return this;var a=t;i&&!1===i.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var r=null==a||!1===a,s=e in this.style;if(r&&!s&&!n)return this;var o=r&&s;if(o?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return o?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var l=this.options.sheet;return l&&l.attached,this},e}(),eL=function(e){function t(t,i,n){a=e.call(this,t,i,n)||this;var a,r=n.selector,s=n.scoped,o=n.sheet,l=n.generateId;return r?a.selectorText=r:!1!==s&&(a.id=l((0,e_.Z)((0,e_.Z)(a)),o),a.selectorText="."+eR(a.id)),a}eS(t,e);var i=t.prototype;return i.applyTo=function(e){var t=this.renderer;if(t){var i=this.toJSON();for(var n in i)t.setProperty(e,n,i[n])}return this},i.toJSON=function(){var e={};for(var t in this.style){var i=this.style[t];"object"!=typeof i?e[t]=i:Array.isArray(i)&&(e[t]=eD(i))}return e},i.toString=function(e){var t=this.options.sheet,i=t&&t.options.link?(0,ek.Z)({},e,{allowEmpty:!0}):e;return eE(this.selectorText,this.style,i)},(0,eC.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,i=this.renderable;i&&t&&!t.setSelector(i,e)&&t.replaceRule(i,this)}},get:function(){return this.selectorText}}]),t}(eF),eB={indent:1,children:!0},eO=/@([\w-]+)/,eG=function(){function e(e,t,i){this.type="conditional",this.isProcessed=!1,this.key=e;var n=e.match(eO);for(var a in this.at=n?n[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new e5((0,ek.Z)({},i,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,i){var n=this.rules.add(e,t,i);return n?(this.options.jss.plugins.onProcessRule(n),n):null},t.replaceRule=function(e,t,i){var n=this.rules.replace(e,t,i);return n&&this.options.jss.plugins.onProcessRule(n),n},t.toString=function(e){void 0===e&&(e=eB);var t=eN(e).linebreak;if(null==e.indent&&(e.indent=eB.indent),null==e.children&&(e.children=eB.children),!1===e.children)return this.query+" {}";var i=this.rules.toString(e);return i?this.query+" {"+t+i+t+"}":""},e}(),eV=/@container|@media|@supports\s+/,ez={indent:1,children:!0},eU=/@keyframes\s+([\w-]+)/,eW=function(){function e(e,t,i){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var n=e.match(eU);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var a=i.scoped,r=i.sheet,s=i.generateId;for(var o in this.id=!1===a?this.name:eR(s(this,r)),this.rules=new e5((0,ek.Z)({},i,{parent:this})),t)this.rules.add(o,t[o],(0,ek.Z)({},i,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=ez);var t=eN(e).linebreak;if(null==e.indent&&(e.indent=ez.indent),null==e.children&&(e.children=ez.children),!1===e.children)return this.at+" "+this.id+" {}";var i=this.rules.toString(e);return i&&(i=""+t+i+t),this.at+" "+this.id+" {"+i+"}"},e}(),eH=/@keyframes\s+/,eq=/\$([\w-]+)/g,eQ=function(e,t){return"string"==typeof e?e.replace(eq,function(e,i){return i in t?t[i]:e}):e},eY=function(e,t,i){var n=e[t],a=eQ(n,i);a!==n&&(e[t]=a)},eK=function(e){function t(){return e.apply(this,arguments)||this}return eS(t,e),t.prototype.toString=function(e){var t=this.options.sheet,i=t&&t.options.link?(0,ek.Z)({},e,{allowEmpty:!0}):e;return eE(this.key,this.style,i)},t}(eF),eX=function(){function e(e,t,i){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=i}return e.prototype.toString=function(e){var t=eN(e).linebreak;if(Array.isArray(this.style)){for(var i="",n=0;n<this.style.length;n++)i+=eE(this.at,this.style[n]),this.style[n+1]&&(i+=t);return i}return eE(this.at,this.style,e)},e}(),eZ=/@font-face/,eJ=function(){function e(e,t,i){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=i}return e.prototype.toString=function(e){return eE(this.key,this.style,e)},e}(),e$=function(){function e(e,t,i){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=i}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",i=0;i<this.value.length;i++)t+=this.key+" "+this.value[i]+";",this.value[i+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),e0={"@charset":!0,"@import":!0,"@namespace":!0},e1=[{onCreateRule:function(e,t,i){return"@"===e[0]||i.parent&&"keyframes"===i.parent.type?null:new eL(e,t,i)}},{onCreateRule:function(e,t,i){return eV.test(e)?new eG(e,t,i):null}},{onCreateRule:function(e,t,i){return"string"==typeof e&&eH.test(e)?new eW(e,t,i):null},onProcessStyle:function(e,t,i){return"style"===t.type&&i&&("animation-name"in e&&eY(e,"animation-name",i.keyframes),"animation"in e&&eY(e,"animation",i.keyframes)),e},onChangeValue:function(e,t,i){var n=i.options.sheet;if(!n)return e;switch(t){case"animation":case"animation-name":return eQ(e,n.keyframes);default:return e}}},{onCreateRule:function(e,t,i){return i.parent&&"keyframes"===i.parent.type?new eK(e,t,i):null}},{onCreateRule:function(e,t,i){return eZ.test(e)?new eX(e,t,i):null}},{onCreateRule:function(e,t,i){return"@viewport"===e||"@-ms-viewport"===e?new eJ(e,t,i):null}},{onCreateRule:function(e,t,i){return e in e0?new e$(e,t,i):null}}],e2={process:!0},e3={force:!0,process:!0},e5=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,i){var n=this.options,a=n.parent,r=n.sheet,s=n.jss,o=n.Renderer,l=n.generateId,c=n.scoped,h=(0,ek.Z)({classes:this.classes,parent:a,sheet:r,jss:s,Renderer:o,generateId:l,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},i),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(h.selector="."+eR(this.classes[d]));var u=eP(d,t,h);if(!u)return null;this.register(u);var p=void 0===h.index?this.index.length:h.index;return this.index.splice(p,0,u),u},t.replace=function(e,t,i){var n=this.get(e),a=this.index.indexOf(n);n&&this.remove(n);var r=i;return -1!==a&&(r=(0,ek.Z)({},i,{index:a})),this.add(e,t,r)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof eL?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof eW&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof eL?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof eW&&delete this.keyframes[e.name]},t.update=function(){if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,i);else for(var e,t,i,n=0;n<this.index.length;n++)this.updateOne(this.index[n],t,i)},t.updateOne=function(t,i,n){void 0===n&&(n=e2);var a=this.options,r=a.jss.plugins,s=a.sheet;if(t.rules instanceof e){t.rules.update(i,n);return}var o=t.style;if(r.onUpdate(i,t,s,n),n.process&&o&&o!==t.style){for(var l in r.onProcessStyle(t.style,t,s),t.style){var c=t.style[l];c!==o[l]&&t.prop(l,c,e3)}for(var h in o){var d=t.style[h],u=o[h];null==d&&d!==u&&t.prop(h,null,e3)}}},t.toString=function(e){for(var t="",i=this.options.sheet,n=!!i&&i.options.link,a=eN(e).linebreak,r=0;r<this.index.length;r++){var s=this.index[r].toString(e);(s||n)&&(t&&(t+=a),t+=s)}return t},e}(),e6=function(){function e(e,t){for(var i in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,ek.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new e5(this.options),e)this.rules.add(i,e[i]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached&&(this.renderer&&this.renderer.detach(),this.attached=!1),this},t.addRule=function(e,t,i){var n=this.queue;this.attached&&!n&&(this.queue=[]);var a=this.rules.add(e,t,i);return a?((this.options.jss.plugins.onProcessRule(a),this.attached)?this.deployed&&(n?n.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))):this.deployed=!1,a):null},t.replaceRule=function(e,t,i){var n=this.rules.get(e);if(!n)return this.addRule(e,t,i);var a=this.rules.replace(e,t,i);return(a&&this.options.jss.plugins.onProcessRule(a),this.attached)?this.deployed&&this.renderer&&(a?n.renderable&&this.renderer.replaceRule(n.renderable,a):this.renderer.deleteRule(n)):this.deployed=!1,a},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var i=[];for(var n in e){var a=this.addRule(n,e[n],t);a&&i.push(a)}return i},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!!t&&(!this.attached||!!t.renderable)&&(this.rules.remove(t),!this.attached||!t.renderable||!this.renderer||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,i){return this.rules.updateOne(e,t,i),this},t.toString=function(e){return this.rules.toString(e)},e}(),e8=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,i){for(var n=0;n<this.registry.onCreateRule.length;n++){var a=this.registry.onCreateRule[n](e,t,i);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,i){for(var n=0;n<this.registry.onProcessStyle.length;n++)t.style=this.registry.onProcessStyle[n](t.style,t,i)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,i,n){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,i,n)},t.onChangeValue=function(e,t,i){for(var n=e,a=0;a<this.registry.onChangeValue.length;a++)n=this.registry.onChangeValue[a](n,t,i);return n},t.use=function(e,t){void 0===t&&(t={queue:"external"});var i=this.plugins[t.queue];-1===i.indexOf(e)&&(i.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(e,t){for(var i in t)i in e&&e[i].push(t[i]);return e},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),e7=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,i=e.options.index;if(-1===t.indexOf(e)){if(0===t.length||i>=this.index){t.push(e);return}for(var n=0;n<t.length;n++)if(t[n].options.index>i){t.splice(n,0,e);return}}},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,i=t.attached,n=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)t.indexOf(i=r[n])>=0||(a[i]=e[i]);return a}(t,["attached"]),a=eN(n).linebreak,r="",s=0;s<this.registry.length;s++){var o=this.registry[s];(null==i||o.attached===i)&&(r&&(r+=a),r+=o.toString(n))}return r},(0,eC.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),e4="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),e9="2f1acc6c3a606b082e5eef5e54414ffb";null==e4[e9]&&(e4[e9]=0);var te=e4[e9]++,tt=function(e){void 0===e&&(e={});var t=0;return function(i,n){t+=1;var a="",r="";return(n&&(n.options.classNamePrefix&&(r=n.options.classNamePrefix),null!=n.options.jss.id&&(a=String(n.options.jss.id))),e.minify)?""+(r||"c")+te+a+t:r+i.key+"-"+te+(a?"-"+a:"")+"-"+t}},ti=function(e){var t;return function(){return t||(t=e()),t}},tn=function(e,t){try{if(e.attributeStyleMap)return e.attributeStyleMap.get(t);return e.style.getPropertyValue(t)}catch(e){return""}},ta=function(e,t,i){try{var n=i;if(Array.isArray(i)&&(n=eD(i)),e.attributeStyleMap)e.attributeStyleMap.set(t,n);else{var a=n?n.indexOf("!important"):-1,r=a>-1?n.substr(0,a-1):n;e.style.setProperty(t,r,a>-1?"important":"")}}catch(e){return!1}return!0},tr=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(e){}},ts=function(e,t){return e.selectorText=t,e.selectorText===t},to=ti(function(){return document.querySelector("head")}),tl=ti(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),tc=function(e,t,i){try{"insertRule"in e?e.insertRule(t,i):"appendRule"in e&&e.appendRule(t)}catch(e){return!1}return e.cssRules[i]},th=function(e,t){var i=e.cssRules.length;return void 0===t||t>i?i:t},td=function(){var e=document.createElement("style");return e.textContent="\n",e},tu=function(){function e(e){this.getPropertyValue=tn,this.setProperty=ta,this.removeProperty=tr,this.setSelector=ts,this.hasInsertedRules=!1,this.cssRules=[],e&&e7.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},i=t.media,n=t.meta,a=t.element;this.element=a||td(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),n&&this.element.setAttribute("data-meta",n);var r=tl();r&&this.element.setAttribute("nonce",r)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var i=t.insertionPoint,n=function(e){var t=e7.registry;if(t.length>0){var i=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e);if(i&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element};if((i=function(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e))&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&"string"==typeof n){var a=function(e){for(var t=to(),i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}(n);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}(t);if(!1!==n&&n.parent){n.parent.insertBefore(e,n.node);return}if(i&&"number"==typeof i.nodeType){var a=i.parentNode;a&&a.insertBefore(e,i.nextSibling);return}to().appendChild(e)}(this.element,this.sheet.options);var e=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;if(e){if(e.options.link){this.insertRules(e.rules);return}this.element.textContent="\n"+e.toString()+"\n"}},t.insertRules=function(e,t){for(var i=0;i<e.index.length;i++)this.insertRule(e.index[i],i,t)},t.insertRule=function(e,t,i){if(void 0===i&&(i=this.element.sheet),e.rules){var n=i;if("conditional"===e.type||"keyframes"===e.type){var a=th(i,t);if(!1===(n=tc(i,e.toString({children:!1}),a)))return!1;this.refCssRule(e,a,n)}return this.insertRules(e.rules,n),n}var r=e.toString();if(!r)return!1;var s=th(i,t),o=tc(i,r,s);return!1!==o&&(this.hasInsertedRules=!0,this.refCssRule(e,s,o),o)},t.refCssRule=function(e,t,i){e.renderable=i,e.options.parent instanceof e6&&this.cssRules.splice(t,0,i)},t.deleteRule=function(e){var t=this.element.sheet,i=this.indexOf(e);return -1!==i&&(t.deleteRule(i),this.cssRules.splice(i,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var i=this.indexOf(e);return -1!==i&&(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(t,i))},t.getRules=function(){return this.element.sheet.cssRules},e}(),tp=0,tg=function(){function e(e){this.id=tp++,this.version="10.10.0",this.plugins=new e8,this.options={id:{minify:!1},createGenerateId:tt,Renderer:ex?tu:null,plugins:[]},this.generateId=tt({minify:!1});for(var t=0;t<e1.length;t++)this.plugins.use(e1[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,ek.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var i=t.index;"number"!=typeof i&&(i=0===e7.index?0:e7.index+1);var n=new e6(e,(0,ek.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:i}));return this.plugins.onProcessSheet(n),n},t.removeStyleSheet=function(e){return e.detach(),e7.remove(e),this},t.createRule=function(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),"object"==typeof e)return this.createRule(void 0,e,t);var n=(0,ek.Z)({},i,{name:e,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var a=eP(e,t,n);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach(function(t){e.plugins.use(t)}),this},e}(),tm=function(e){return new tg(e)},tf=function(){function e(){this.length=0,this.sheets=new WeakMap}var t=e.prototype;return t.get=function(e){var t=this.sheets.get(e);return t&&t.sheet},t.add=function(e,t){this.sheets.has(e)||(this.length++,this.sheets.set(e,{sheet:t,refs:0}))},t.manage=function(e){var t=this.sheets.get(e);if(t)return 0===t.refs&&t.sheet.attach(),t.refs++,t.sheet;eb(!1,"[JSS] SheetsManager: can't find sheet to manage")},t.unmanage=function(e){var t=this.sheets.get(e);t?t.refs>0&&(t.refs--,0===t.refs&&t.sheet.detach()):eb(!1,"SheetsManager: can't find sheet to unmanage")},(0,eC.Z)(e,[{key:"size",get:function(){return this.length}}]),e}(),tv="object"==typeof CSS&&null!=CSS&&"number"in CSS;tm();var ty=Date.now(),tx="fnValues"+ty,tk="fnStyle"+ ++ty,tb=i(13866),tC=function(e){return e&&e[tb.Z]&&e===e[tb.Z]()},tw=/;\n/,tS=function(e){for(var t={},i=e.split(tw),n=0;n<i.length;n++){var a=(i[n]||"").trim();if(a){var r=a.indexOf(":");if(-1===r)continue;var s=a.substr(0,r).trim(),o=a.substr(r+1).trim();t[s]=o}}return t},t_=function(e){"string"==typeof e.style&&(e.style=tS(e.style))},tT=i(47877),tP="@global",tA="@global ",tD=function(){function e(e,t,i){for(var n in this.type="global",this.at=tP,this.isProcessed=!1,this.key=e,this.options=i,this.rules=new e5((0,tT.Z)({},i,{parent:this})),t)this.rules.add(n,t[n]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,i){var n=this.rules.add(e,t,i);return n&&this.options.jss.plugins.onProcessRule(n),n},t.replaceRule=function(e,t,i){var n=this.rules.replace(e,t,i);return n&&this.options.jss.plugins.onProcessRule(n),n},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),tN=function(){function e(e,t,i){this.type="global",this.at=tP,this.isProcessed=!1,this.key=e,this.options=i;var n=e.substr(tA.length);this.rule=i.jss.createRule(n,t,(0,tT.Z)({},i,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),tj=/\s*,\s*/g;function tE(e,t){for(var i=e.split(tj),n="",a=0;a<i.length;a++)n+=t+" "+i[a].trim(),i[a+1]&&(n+=", ");return n}var tM=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},tI="extendCurrValue"+Date.now(),tR=/\s*,\s*/g,tF=/&/g,tL=/\$([\w-]+)/g,tB=/[A-Z]/g,tO=/^ms-/,tG={};function tV(e){return"-"+e.toLowerCase()}var tz=function(e){if(tG.hasOwnProperty(e))return tG[e];var t=e.replace(tB,tV);return tG[e]=tO.test(t)?"-"+t:t};function tU(e){var t={};for(var i in e)t[0===i.indexOf("--")?i:tz(i)]=e[i];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(tU):t.fallbacks=tU(e.fallbacks)),t}var tW=tv&&CSS?CSS.px:"px",tH=tv&&CSS?CSS.ms:"ms",tq=tv&&CSS?CSS.percent:"%";function tQ(e){var t=/(-[a-z])/g,i=function(e){return e[1].toUpperCase()},n={};for(var a in e)n[a]=e[a],n[a.replace(t,i)]=e[a];return n}var tY=tQ({"animation-delay":tH,"animation-duration":tH,"background-position":tW,"background-position-x":tW,"background-position-y":tW,"background-size":tW,border:tW,"border-bottom":tW,"border-bottom-left-radius":tW,"border-bottom-right-radius":tW,"border-bottom-width":tW,"border-left":tW,"border-left-width":tW,"border-radius":tW,"border-right":tW,"border-right-width":tW,"border-top":tW,"border-top-left-radius":tW,"border-top-right-radius":tW,"border-top-width":tW,"border-width":tW,"border-block":tW,"border-block-end":tW,"border-block-end-width":tW,"border-block-start":tW,"border-block-start-width":tW,"border-block-width":tW,"border-inline":tW,"border-inline-end":tW,"border-inline-end-width":tW,"border-inline-start":tW,"border-inline-start-width":tW,"border-inline-width":tW,"border-start-start-radius":tW,"border-start-end-radius":tW,"border-end-start-radius":tW,"border-end-end-radius":tW,margin:tW,"margin-bottom":tW,"margin-left":tW,"margin-right":tW,"margin-top":tW,"margin-block":tW,"margin-block-end":tW,"margin-block-start":tW,"margin-inline":tW,"margin-inline-end":tW,"margin-inline-start":tW,padding:tW,"padding-bottom":tW,"padding-left":tW,"padding-right":tW,"padding-top":tW,"padding-block":tW,"padding-block-end":tW,"padding-block-start":tW,"padding-inline":tW,"padding-inline-end":tW,"padding-inline-start":tW,"mask-position-x":tW,"mask-position-y":tW,"mask-size":tW,height:tW,width:tW,"min-height":tW,"max-height":tW,"min-width":tW,"max-width":tW,bottom:tW,left:tW,top:tW,right:tW,inset:tW,"inset-block":tW,"inset-block-end":tW,"inset-block-start":tW,"inset-inline":tW,"inset-inline-end":tW,"inset-inline-start":tW,"box-shadow":tW,"text-shadow":tW,"column-gap":tW,"column-rule":tW,"column-rule-width":tW,"column-width":tW,"font-size":tW,"font-size-delta":tW,"letter-spacing":tW,"text-decoration-thickness":tW,"text-indent":tW,"text-stroke":tW,"text-stroke-width":tW,"word-spacing":tW,motion:tW,"motion-offset":tW,outline:tW,"outline-offset":tW,"outline-width":tW,perspective:tW,"perspective-origin-x":tq,"perspective-origin-y":tq,"transform-origin":tq,"transform-origin-x":tq,"transform-origin-y":tq,"transform-origin-z":tq,"transition-delay":tH,"transition-duration":tH,"vertical-align":tW,"flex-basis":tW,"shape-margin":tW,size:tW,gap:tW,grid:tW,"grid-gap":tW,"row-gap":tW,"grid-row-gap":tW,"grid-column-gap":tW,"grid-template-rows":tW,"grid-template-columns":tW,"grid-auto-rows":tW,"grid-auto-columns":tW,"box-shadow-x":tW,"box-shadow-y":tW,"box-shadow-blur":tW,"box-shadow-spread":tW,"font-line-height":tW,"text-shadow-x":tW,"text-shadow-y":tW,"text-shadow-blur":tW});function tK(e,t,i){if(null==t)return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=tK(e,t[n],i);else if("object"==typeof t){if("fallbacks"===e)for(var a in t)t[a]=tK(a,t[a],i);else for(var r in t)t[r]=tK(e+"-"+r,t[r],i)}else if("number"==typeof t&&!1===isNaN(t)){var s=i[e]||tY[e];return s&&!(0===t&&s===tW)?"function"==typeof s?s(t).toString():""+t+s:t.toString()}return t}var tX=function(e){void 0===e&&(e={});var t=tQ(e);return{onProcessStyle:function(e,i){if("style"!==i.type)return e;for(var n in e)e[n]=tK(n,e[n],t);return e},onChangeValue:function(e,i){return tK(i,e,t)}}},tZ={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},tJ={position:!0,size:!0},t$={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},t0={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function t1(e,t,i,n,a){if(!(t$[t]||t0[t]))return[];var r=[];if(t0[t]&&(e=function(e,t,i,n){for(var a in i){var r=i[a];if(void 0!==e[a]&&(n||!t.prop(r))){var s,o=t2(((s={})[r]=e[a],s),t)[r];n?t.style.fallbacks[r]=o:t.style[r]=o}delete e[a]}return e}(e,i,t0[t],n)),Object.keys(e).length)for(var s in t$[t]){if(e[s]){Array.isArray(e[s])?r.push(null===tJ[s]?e[s]:e[s].join(" ")):r.push(e[s]);continue}null!=t$[t][s]&&r.push(t$[t][s])}return!r.length||a?r:[r]}function t2(e,t,i){for(var n in e){var a=e[n];if(Array.isArray(a)){if(!Array.isArray(a[0])){if("fallbacks"===n){for(var r=0;r<e.fallbacks.length;r++)e.fallbacks[r]=t2(e.fallbacks[r],t,!0);continue}e[n]=function e(t,i,n,a){return null==n[i]?t:0===t.length?[]:Array.isArray(t[0])?e(t[0],i,n,a):"object"==typeof t[0]?t.map(function(e){return t1(e,i,a,!1,!0)}):[t]}(a,n,tZ,t),e[n].length||delete e[n]}}else if("object"==typeof a){if("fallbacks"===n){e.fallbacks=t2(e.fallbacks,t,!0);continue}e[n]=t1(a,n,t,i),e[n].length||delete e[n]}else""===e[n]&&delete e[n]}return e}var t3=i(36086),t5="",t6="",t8="",t7="",t4=ex&&"ontouchstart"in document.documentElement;if(ex){var t9={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ie=document.createElement("p").style;for(var it in t9)if(it+"Transform" in ie){t5=it,t6=t9[it];break}"Webkit"===t5&&"msHyphens"in ie&&(t5="ms",t6=t9.ms,t7="edge"),"Webkit"===t5&&"-apple-trailing-word"in ie&&(t8="apple")}var ii={js:t5,css:t6,vendor:t8,browser:t7,isTouch:t4},ia=/[-\s]+(.)?/g;function ir(e,t){return t?t.toUpperCase():""}function is(e){return e.replace(ia,ir)}function io(e){return is("-"+e)}var il={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ic={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},ih=Object.keys(ic),id=function(e){return ii.css+e},iu=[{noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===ii.js?"-webkit-"+e:ii.css+e)}},{noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===ii.js?ii.css+"print-"+e:e)}},{noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===ii.js){var i="mask-image";if(is(i) in t)return e;if(ii.js+io(i) in t)return ii.css+e}return e}},{noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==ii.vendor||ii.isTouch?e:ii.css+e)}},{noPrefill:["transform"],supportedProperty:function(e,t,i){return"transform"===e&&(i.transform?e:ii.css+e)}},{noPrefill:["transition"],supportedProperty:function(e,t,i){return"transition"===e&&(i.transition?e:ii.css+e)}},{noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===ii.js||"ms"===ii.js&&"edge"!==ii.browser?ii.css+e:e)}},{noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===ii.js||"ms"===ii.js||"apple"===ii.vendor?ii.css+e:e)}},{supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===ii.js?"WebkitColumn"+io(e) in t&&ii.css+"column-"+e:"Moz"===ii.js&&"page"+io(e) in t&&"page-"+e)}},{supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===ii.js)return e;var i=e.replace("-inline","");return ii.js+io(i) in t&&ii.css+i}},{supportedProperty:function(e,t){return is(e) in t&&e}},{supportedProperty:function(e,t){var i=io(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:ii.js+i in t?ii.css+e:"Webkit"!==ii.js&&"Webkit"+i in t&&"-webkit-"+e}},{supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===ii.js?""+ii.css+e:e)}},{supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===ii.js?ii.css+"scroll-chaining":e)}},{supportedProperty:function(e,t){var i=il[e];return!!i&&ii.js+io(i) in t&&ii.css+i}},{supportedProperty:function(e,t,i){var n=i.multiple;if(ih.indexOf(e)>-1){var a=ic[e];if(!Array.isArray(a))return ii.js+io(a) in t&&ii.css+a;if(!n)return!1;for(var r=0;r<a.length;r++)if(!(ii.js+io(a[0]) in t))return!1;return a.map(id)}return!1}}],ip=iu.filter(function(e){return e.supportedProperty}).map(function(e){return e.supportedProperty}),ig=iu.filter(function(e){return e.noPrefill}).reduce(function(e,t){return e.push.apply(e,(0,t3.Z)(t.noPrefill)),e},[]),im={};if(ex){o=document.createElement("p");var iv=window.getComputedStyle(document.documentElement,"");for(var iy in iv)isNaN(iy)||(im[iv[iy]]=iv[iy]);ig.forEach(function(e){return delete im[e]})}function ix(e,t){if(void 0===t&&(t={}),!o)return e;if(null!=im[e])return im[e];("transition"===e||"transform"===e)&&(t[e]=e in o.style);for(var i=0;i<ip.length&&(im[e]=ip[i](e,o.style,t),!im[e]);i++);try{o.style[e]=""}catch(e){return!1}return im[e]}var ik={},ib={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},iC=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function iw(e,t,i){return"var"===t?"var":"all"===t?"all":"all"===i?", all":(t?ix(t):", "+ix(i))||t||i}function iS(e,t){var i=t;if(!l||"content"===e)return t;if("string"!=typeof i||!isNaN(parseInt(i,10)))return i;var n=e+i;if(null!=ik[n])return ik[n];try{l.style[e]=i}catch(e){return ik[n]=!1,!1}if(ib[e])i=i.replace(iC,iw);else if(""===l.style[e]&&("-ms-flex"===(i=ii.css+i)&&(l.style[e]="-ms-flexbox"),l.style[e]=i,""===l.style[e]))return ik[n]=!1,!1;return l.style[e]="",ik[n]=i,ik[n]}ex&&(l=document.createElement("p"));var i_=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,i){if("style"!==i.type)return t;for(var n={},a=Object.keys(t).sort(e),r=0;r<a.length;r++)n[a[r]]=t[a[r]];return n}}},iT=function(e){var t;return void 0===e&&(e={}),{plugins:[{onCreateRule:function(e,t,i){if("function"!=typeof t)return null;var n=eP(e,{},i);return n[tk]=t,n},onProcessStyle:function(e,t){if(tx in t||tk in t)return e;var i={};for(var n in e){var a=e[n];"function"==typeof a&&(delete e[n],i[n]=a)}return t[tx]=i,e},onUpdate:function(e,t,i,n){var a=t[tk];a&&(t.style=a(e)||{});var r=t[tx];if(r)for(var s in r)t.prop(s,r[s](e),n)}},(t=e.observable,{onCreateRule:function(e,i,n){if(!tC(i))return null;var a=eP(e,{},n);return i.subscribe(function(e){for(var i in e)a.prop(i,e[i],t)}),a},onProcessRule:function(e){if(!e||"style"===e.type){var i=e.style,n=function(n){var a=i[n];if(!tC(a))return"continue";delete i[n],a.subscribe({next:function(i){e.prop(n,i,t)}})};for(var a in i)if("continue"===n(a))continue}}}),{onProcessRule:t_},{onCreateRule:function(e,t,i){if(!e)return null;if(e===tP)return new tD(e,t,i);if("@"===e[0]&&e.substr(0,tA.length)===tA)return new tN(e,t,i);var n=i.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(i.scoped=!1),i.selector||!1!==i.scoped||(i.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var i=e.options,n=e.style,a=n?n[tP]:null;if(a){for(var r in a)t.addRule(r,a[r],(0,tT.Z)({},i,{selector:tE(r,e.selector)}));delete n[tP]}}(e,t),function(e,t){var i=e.options,n=e.style;for(var a in n)if("@"===a[0]&&a.substr(0,tP.length)===tP){var r=tE(a.substr(tP.length),e.selector);t.addRule(r,n[a],(0,tT.Z)({},i,{selector:r})),delete n[a]}}(e,t))}},{onProcessStyle:function(e,t,i){return"extend"in e?function e(t,i,n,a){return void 0===a&&(a={}),function(t,i,n,a){if("string"==typeof t.extend){if(!n)return;var r=n.getRule(t.extend);if(!r||r===i)return;var s=r.options.parent;s&&e(s.rules.raw[t.extend],i,n,a);return}if(Array.isArray(t.extend)){for(var o=0;o<t.extend.length;o++){var l=t.extend[o];e("string"==typeof l?(0,tT.Z)({},t,{extend:l}):t.extend[o],i,n,a)}return}for(var c in t.extend){if("extend"===c){e(t.extend.extend,i,n,a);continue}if(tM(t.extend[c])){c in a||(a[c]={}),e(t.extend[c],i,n,a[c]);continue}a[c]=t.extend[c]}}(t,i,n,a),function(t,i,n,a){for(var r in t)if("extend"!==r){if(tM(a[r])&&tM(t[r])){e(t[r],i,n,a[r]);continue}if(tM(t[r])){a[r]=e(t[r],i,n);continue}a[r]=t[r]}}(t,i,n,a),a}(e,t,i):e},onChangeValue:function(e,t,i){if("extend"!==t)return e;if(null==e||!1===e){for(var n in i[tI])i.prop(n,null);return i[tI]=null,null}if("object"==typeof e){for(var a in e)i.prop(a,e[a]);i[tI]=e}return null}},{onProcessStyle:function(e,t,i){if("style"!==t.type)return e;var n,a,r=t.options.parent;for(var s in e){var o=-1!==s.indexOf("&"),l="@"===s[0];if(o||l){if(n=function(e,t,i){if(i)return(0,tT.Z)({},i,{index:i.index+1});var n=e.options.nestingLevel;n=void 0===n?1:n+1;var a=(0,tT.Z)({},e.options,{nestingLevel:n,index:t.indexOf(e)+1});return delete a.name,a}(t,r,n),o){var c=function(e,t){for(var i=t.split(tR),n=e.split(tR),a="",r=0;r<i.length;r++)for(var s=i[r],o=0;o<n.length;o++){var l=n[o];a&&(a+=", "),a+=-1!==l.indexOf("&")?l.replace(tF,s):s+" "+l}return a}(s,t.selector);a||(a=function(e,t){return function(i,n){var a=e.getRule(n)||t&&t.getRule(n);return a?a.selector:n}}(r,i)),c=c.replace(tL,a);var h=t.key+"-"+s;"replaceRule"in r?r.replaceRule(h,e[s],(0,tT.Z)({},n,{selector:c})):r.addRule(h,e[s],(0,tT.Z)({},n,{selector:c}))}else l&&r.addRule(s,{},n).addRule(t.key,e[s],{selector:t.selector});delete e[s]}}return e}},{onProcessStyle:function(e,t){return"composes"in e&&(function e(t,i){if(!i)return!0;if(Array.isArray(i)){for(var n=0;n<i.length;n++)if(!e(t,i[n]))return!1;return!0}if(i.indexOf(" ")>-1)return e(t,i.split(" "));var a=t.options.parent;if("$"===i[0]){var r=a.getRule(i.substr(1));return!!r&&r!==t&&(a.classes[t.key]+=" "+a.classes[r.key],!0)}return a.classes[t.key]+=" "+i,!0}(t,e.composes),delete e.composes),e}},{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=tU(e[t]);return e}return tU(e)},onChangeValue:function(e,t,i){if(0===t.indexOf("--"))return e;var n=tz(t);return t===n?e:(i.prop(n,e),null)}},tX(e.defaultUnit),{onProcessStyle:function(e,t){if(!e||"style"!==t.type)return e;if(Array.isArray(e)){for(var i=0;i<e.length;i++)e[i]=t2(e[i],t);return e}return t2(e,t)}},{onProcessRule:function(e){if("keyframes"===e.type){var t;e.at="-"===(t=e.at)[1]||"ms"===ii.js?t:"@"+ii.css+"keyframes"+t.substr(10)}},onProcessStyle:function(e,t){return"style"!==t.type?e:function e(t){for(var i in t){var n=t[i];if("fallbacks"===i&&Array.isArray(n)){t[i]=n.map(e);continue}var a=!1,r=ix(i);r&&r!==i&&(a=!0);var s=!1,o=iS(r,eD(n));o&&o!==n&&(s=!0),(a||s)&&(a&&delete t[i],t[r||i]=o||n)}return t}(e)},onChangeValue:function(e,t){return iS(t,eD(e))||e}},i_()]}},iP=tm(iT()),iA=function(e){void 0===e&&(e=iP);var t,i=new Map,n=0,a=function(){return(!t||t.rules.index.length>1e4)&&(t=e.createStyleSheet().attach()),t};function r(){var e=arguments,t=JSON.stringify(e),r=i.get(t);if(r)return r.className;var s=[];for(var o in e){var l=e[o];if(!Array.isArray(l)){s.push(l);continue}for(var c=0;c<l.length;c++)s.push(l[c])}for(var h={},d=[],u=0;u<s.length;u++){var p=s[u];if(p){var g=p;if("string"==typeof p){var m=i.get(p);m&&(m.labels.length&&d.push.apply(d,m.labels),g=m.style)}g.label&&-1===d.indexOf(g.label)&&d.push(g.label),Object.assign(h,g)}}delete h.label;var f=(0===d.length?"css":d.join("-"))+"-"+n++;a().addRule(f,h);var v=a().classes[f],y={style:h,labels:d,className:v};return i.set(t,y),i.set(v,y),v}return r.getSheet=a,r}(),iD=Number.MIN_SAFE_INTEGER||-1e9,iN=(0,eh.createContext)({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!ex}),ij=new Map,iE=function(e,t){var i=e.managers;if(i)return i[t]||(i[t]=new tf),i[t];var n=ij.get(t);return n||(n=new tf,ij.set(t,n)),n},iM=function(e){var t=e.sheet,i=e.context,n=e.index,a=e.theme;t&&(iE(i,n).manage(a),i.registry&&i.registry.add(t))},iI=function(e){e.sheet&&iE(e.context,e.index).unmanage(e.theme)},iR=tm(iT()),iF=new WeakMap,iL=function(e){return iF.get(e)},iB=function(e,t){iF.set(e,t)},iO=function(e){var t=e.styles;return"function"!=typeof t?t:t(e.theme)},iG=function(e){if(!e.context.disableStylesGeneration){var t,i,n,a=iE(e.context,e.index),r=a.get(e.theme);if(r)return r;var s=e.context.jss||iR,o=iO(e),l=function e(t){var i=null;for(var n in t){var a=t[n],r=typeof a;if("function"===r)i||(i={}),i[n]=a;else if("object"===r&&null!==a&&!Array.isArray(a)){var s=e(a);s&&(i||(i={}),i[n]=s)}}return i}(o),c=s.createStyleSheet(o,(e.context.id&&null!=e.context.id.minify&&(t=e.context.id.minify),i=e.context.classNamePrefix||"",e.name&&!t&&(i+=e.name.replace(/\s/g,"-")+"-"),n="",e.name&&(n=e.name+", "),n+="function"==typeof e.styles?"Themed":"Unthemed",(0,el.Z)({},e.sheetOptions,{index:e.index,meta:n,classNamePrefix:i,link:null!==l,generateId:e.sheetOptions&&e.sheetOptions.generateId?e.sheetOptions.generateId:e.context.generateId})));return iB(c,{dynamicStyles:l,styles:o}),a.add(e.theme,c),c}},iV=function(e,t){for(var i in t)e.deleteRule(t[i])},iz=function(e,t,i){for(var n in i)t.updateOne(i[n],e)},iU=function(e,t){var i=iL(e);if(i){var n={};for(var a in i.dynamicStyles)for(var r=e.rules.index.length,s=e.addRule(a,i.dynamicStyles[a]),o=r;o<e.rules.index.length;o++){var l=e.rules.index[o];e.updateOne(l,t),n[s===l?a:l.key]=l}return n}},iW=function(e,t){if(!t)return e.classes;var i=iL(e);if(!i)return e.classes;var n={};for(var a in i.styles)n[a]=e.classes[a],a in t&&(n[a]+=" "+e.classes[t[a].key]);return n};function iH(e){return e?eh.useEffect:eh.useInsertionEffect||eh.useLayoutEffect}var iq={},iQ=function(e,t){void 0===t&&(t={});var i=t,n=i.index,a=void 0===n?iD++:n,r=i.theming,s=i.name,o=(0,ec.Z)(i,["index","theming","name"]),l=r&&r.context||ef,c={};return function(t){var i,n=(0,eh.useRef)(!0),r=(0,eh.useContext)(iN),h=(i=t&&t.theme,"function"==typeof e&&(i||(0,eh.useContext)(l))||iq),d=(0,eh.useMemo)(function(){var i=iG({context:r,styles:e,name:s,theme:h,index:a,sheetOptions:o});return i&&r.isSSR&&iM({index:a,context:r,sheet:i,theme:h}),[i,i?iU(i,t):null]},[r,h]),u=d[0],p=d[1];iH(r.isSSR)(function(){u&&p&&!n.current&&iz(t,u,p)},[t]),iH(r.isSSR)(function(){return u&&iM({index:a,context:r,sheet:u,theme:h}),function(){u&&(iI({index:a,context:r,sheet:u,theme:h}),p&&iV(u,p))}},[u]);var g=(0,eh.useMemo)(function(){return u&&p?iW(u,p):c},[u,p]);return(0,eh.useDebugValue)(g),(0,eh.useDebugValue)(h===iq?"No theme":h),(0,eh.useEffect)(function(){n.current=!1}),g}};Symbol("react-jss-styled"),void 0===a&&(a=iA);let iY=iQ({"@keyframes loading":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},ocr:{zIndex:2147483647,position:"fixed",display:"flex",flexDirection:"column",gap:"8px",borderRadius:"8px",background:"#F4F4F5",boxShadow:"0px 1.2px 3.6px rgba(0, 0, 0, 0.06), 0px 3.2px 10.2px rgba(0, 0, 0, 0.06)","&,*":{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, 'Noto Sans JP',\n      'Noto Sans KR', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji'",boxSizing:"border-box"}},header:{fontSize:"16px",lineHeight:"24px",display:"flex",padding:"12px 12px 0",alignItems:"center",justifyContent:"space-between",position:"relative",color:"#21262D",fontWeight:700,"&:hover":{"& $dragIcon":{visibility:"visible"}}},headerActions:{display:"flex",gap:"8px",margin:0},dragIcon:{position:"absolute",visibility:"hidden",left:"50%",top:0,transform:"translateX(-50%)"},body:{display:"flex",flexDirection:"column",borderRadius:"12px",padding:"0 2px 2px",margin:"0 10px 10px",gap:"8px",background:"#fff",minHeight:"0px"},iconWrapper:{width:"18px",height:"18px",cursor:"pointer",fontSize:"20px",display:"inline-flex",justifyContent:"center",alignItems:"center",color:"#c1c1c1",transition:"color 0.2s, background-color 0.2s",borderRadius:"4px","&:hover":{color:"rgba(0, 0, 0, 0.88)",backgroundColor:"rgba(0, 0, 0, 0.06)"}},loading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100px"},loadingIcon:{animation:"$loading 1s linear infinite"},content:{fontSize:"14px",lineHeight:"22px",minHeight:"100px",overflowY:"auto",marginRight:"-12px",padding:"12px",flex:"1",whiteSpace:"pre-wrap",wordBreak:"break-word",color:"#262626"},error:{color:"#ff3d00"},empty:{color:"#637381",display:"flex",justifyContent:"center",alignItems:"center"},footer:{display:"flex",alignItems:"center",justifyContent:"right",minHeight:"24px",padding:"12px",borderTop:"1px solid #4F59661F"},button:{height:"24px",background:"#6841ea",borderRadius:"6px",padding:"0px 8px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:"600",lineHeight:"20px",color:"#fff",cursor:"pointer","&:hover":{background:"#836bf9"}}});var iK=i(34889),iX=i(92498),iZ=i(58756);class iJ extends M.PN{get S(){return S.S.Global.components.Screenshot.Ocr}get finalText(){return this.errorText?this.errorText:""!==this.text?this.text:this.S.emptyText}async onViewCreate(){try{let e;if(this.calcPosition(),e=this.props.getFileObject?await this.props.getFileObject():this.props.file,g.o.isDesktop&&m.m.isMacOS()){let t=await m.m.fileToDataUrl(e);this.text=await this.extractTextFromBase64(t)}else this.text=await this.extractTextFromFile(e)}catch(e){this.errorText=m.m.formatMonicaSdkError(e)}this.loading=!1,this.nextTick(()=>{this.draggableController.reposition()})}onViewDestroy(){this.draggableController.destroy()}close(){var e,t;null===(e=(t=this.props).onDisposed)||void 0===e||e.call(t)}handleOcrError(e){this.errorText=e}handleCopy(){this.copied||(this.copied=!0,m.m.copyToClipboard(this.text),setTimeout(()=>{this.copied=!1},2500))}calcPosition(){let e,t;let{dbRect:i}=this.props;this.inited=!0;let n=window.innerWidth,a=i.x,r=n-i.x-i.width;e=r>this.width+10?"right":a>this.width+10?"left":a>r?"left":"right",t=window.innerHeight-i.y-i.height>50?"bottom":i.y>50?"top":"bottom";let s=Math.max(Math.min("left"===e?i.x-this.width-10:n-r+10,n-this.width-10),0);if("top"===t){let e=Math.max(0,Math.min(i.y,window.innerHeight-150)),t=window.innerHeight-e-10;this.position={left:s,top:e,maxHeight:t}}else{let e=window.innerHeight-i.y-i.height;this.position={left:s,bottom:e,maxHeight:window.innerHeight-e-10}}}async extractTextFromFile(e){let t=new iK.c3({maxFileSize:4});if(await t.uploadFile({filename:e.name,module:"chat_bot"},e),"error"===t.status)throw Error(t.errorText);let i=await k.M.ocr({objectUrl:t.uploadResult.objectUrl});if(0!==i.code)throw Error(i.msg);return i.data.text}async extractTextFromBase64(e){return iZ.y.getService().extractTextFromImage(e)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"draggableController",new iX.$),(0,h._)(this,"loading",!0),(0,h._)(this,"text",""),(0,h._)(this,"position",{left:0,maxHeight:0}),(0,h._)(this,"inited",!1),(0,h._)(this,"errorText",""),(0,h._)(this,"copied",!1),(0,h._)(this,"width",320)}}(0,E.gn)([M.SB],iJ.prototype,"loading",void 0),(0,E.gn)([M.SB],iJ.prototype,"text",void 0),(0,E.gn)([M.SB],iJ.prototype,"position",void 0),(0,E.gn)([M.SB],iJ.prototype,"inited",void 0),(0,E.gn)([M.SB],iJ.prototype,"errorText",void 0),(0,E.gn)([M.SB],iJ.prototype,"copied",void 0),(0,E.gn)([I.Fl],iJ.prototype,"S",null),(0,E.gn)([I.Fl],iJ.prototype,"finalText",null);let i$=M._Y.createComponent("Ocr",iJ,e=>{let t=iY();return e.inited?(0,d.jsxs)("div",{ref:t=>{e.draggableController.init(t)},className:t.ocr,style:{left:e.position.left,width:e.width,maxHeight:e.position.maxHeight,bottom:e.position.bottom,top:e.position.top,zIndex:e.props.zIndex,transform:e.draggableController.translateStyle},onMouseDown:t=>e.draggableController.handleMouseDown(t),children:[(0,d.jsxs)("div",{className:t.header,children:[e.S.extractText,(0,d.jsx)("ol",{className:t.headerActions,children:(0,d.jsx)("li",{className:t.iconWrapper,onMouseDown:ea.x.stopPropagation,onClick:()=>e.close(),children:(0,d.jsx)(en.J,{size:20,name:"close"})})}),(0,d.jsx)("span",{className:t.dragIcon,children:(0,d.jsx)(en.J,{name:"drag",size:16})})]}),(0,d.jsxs)("div",{className:t.body,onMouseDown:ea.x.stopPropagation,children:[e.loading?(0,d.jsx)("div",{className:t.loading,children:(0,d.jsx)(en.J,{size:20,name:"loading",color:"#6841ea",className:t.loadingIcon})}):(0,d.jsx)("div",{className:es()(t.content,{[t.error]:e.errorText,[t.empty]:""===e.errorText&&""===e.text}),children:e.finalText}),e.text&&(0,d.jsx)("div",{className:t.footer,children:(0,d.jsx)("div",{className:t.button,onClick:()=>{e.handleCopy()},children:e.copied?e.S.copied:e.S.copy})})]})]}):null});eo.t.createOpener(i$,{singleton:!0,closeBeforeDialog:!0});class i0{get currentTool(){return this.selectedRune?this.selectedRune.type:this.activeTool}get currentToolConfig(){return this.selectedRune?this.selectedRune.toolConfig:this.activeTool?this.activeToolConfigs[this.activeTool]:null}setSelectedRune(e){this.selectedRune=e}setToolConfig(e){this.selectedRune&&this.selectedRune.setToolConfig(e),this.activeTool&&(this.activeToolConfigs[this.activeTool]=e)}setActiveTool(e){this.activeTool=e}constructor(){(0,h._)(this,"highlightAreaDragging",!1),(0,h._)(this,"selectedRune",null),(0,h._)(this,"activeTool",null),(0,h._)(this,"activeToolConfigs",{rect:{...N},text:{size:24,color:D},arrow:{...N},pen:{...N},circle:{...N},mosaic:{size:8,color:""}}),(0,h._)(this,"canUndo",!1),(0,I.rC)(this)}}(0,E.gn)([M.SB],i0.prototype,"highlightAreaDragging",void 0),(0,E.gn)([M.SB],i0.prototype,"selectedRune",void 0),(0,E.gn)([M.SB],i0.prototype,"activeTool",void 0),(0,E.gn)([M.SB],i0.prototype,"activeToolConfigs",void 0),(0,E.gn)([M.SB],i0.prototype,"canUndo",void 0),(0,E.gn)([I.Fl],i0.prototype,"currentTool",null),(0,E.gn)([I.Fl],i0.prototype,"currentToolConfig",null);class i1 extends b.v{batchOn(e,t){e.forEach(e=>{this.on(e,t)})}destroy(){this.rootElement&&(document.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("contextmenu",this.handleContextMenu),this.rootElement.removeEventListener("keydown",this.handleKeyDown),this.rootElement.removeEventListener("contextmenu",this.handleContextMenu),this.rootElement=null)}constructor(e){var t,i;super(),(0,h._)(this,"rootElement",void 0),(0,h._)(this,"handleKeyDown",void 0),(0,h._)(this,"handleContextMenu",void 0),this.rootElement=e,this.handleKeyDown=e=>{"Escape"===e.code&&this.emit("esc",e),"Backspace"===e.code&&this.emit("backspace",e),"Delete"===e.code&&this.emit("delete",e),"Enter"===e.key&&this.emit("enter",e),this.emit("keydown",e),e.stopPropagation(),e.preventDefault()},this.handleContextMenu=e=>{this.emit("contextmenu",e)},null===(t=document)||void 0===t||t.addEventListener("keydown",this.handleKeyDown),e.addEventListener("keydown",this.handleKeyDown),null===(i=window)||void 0===i||i.addEventListener("contextmenu",this.handleContextMenu),e.addEventListener("contextmenu",this.handleContextMenu)}}let i2=iQ({tips:{position:"absolute",padding:"4px 8px",background:"#fff",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",color:"#212B36",fontFamily:"sans-serif",fontSize:14,lineHeight:"18px",whiteSpace:"nowrap",pointerEvents:"none"}});function i3(e){let{position:t}=e,i=i2(),n=(0,eh.useRef)(null),[a,r]=(0,eh.useState)([-1,-1]),{x:s,y:o,width:l,height:c}=t;return(0,eh.useEffect)(()=>{if(!n.current)return;let{clientHeight:e}=n.current,t=o-e-8;t<0&&(t=o+c+8),r([t,s])},[c,s,o]),(0,d.jsx)("div",{ref:n,className:i.tips,style:{top:a[0],left:a[1],visibility:-1!==a[0]?"visible":"hidden"},children:"".concat(Math.round(l)," \xd7 ").concat(Math.round(c))})}var i5=i(92396),i6=i(62499),i8=i(35081);let i7=iQ({actionBtn:{width:28,height:28,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},colorBtn:{width:18,height:18,boxSizing:"border-box",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff"},whiteBtn:{border:"1px solid #919EAB",color:"#212B36"}}),i4=(0,i6.Pi)(e=>{let{value:t,onChange:i}=e,n=i7(),[a,r]=(0,eh.useState)(t);return(0,eh.useEffect)(()=>{r(t)},[t]),(0,d.jsx)(d.Fragment,{children:T.map((e,t)=>(0,d.jsx)("div",{className:n.actionBtn,onClick:()=>{a!==e&&(null==i||i(e))},children:(0,d.jsx)("div",{className:es()(n.colorBtn,{[n.whiteBtn]:"#ffffff"===e}),style:{background:e},children:a===e&&(0,d.jsx)(en.J,{size:16,name:"sConfirm",color:"currentColor"})})},t))})}),i9=iQ({fontAndColorSettings:{height:40,padding:"0 8px",borderRadius:8,background:"#fff",display:"inline-flex",alignItems:"center"},divider:{width:1,height:20,margin:"0 8px",background:"#919EAB3D"},actionBtn:{width:28,height:28,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},colorBtn:{width:18,height:18,boxSizing:"border-box",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff"},whiteBtn:{border:"1px solid #919EAB",color:"#212B36"}}),ne={fontSizes:[12,16,24,36,48,60,72,96].map(e=>({label:e,value:e})),colors:T},nt=(0,i6.Pi)(e=>{let{settings:t,onChange:i}=e,n=i9(),[a,r]=(0,eh.useState)(t);return(0,eh.useEffect)(()=>{r(t)},[t]),(0,d.jsxs)("div",{className:n.fontAndColorSettings,children:[(0,d.jsx)(i8.default,{defaultValue:a.size,style:{width:80},options:ne.fontSizes,getPopupContainer:e=>e.parentElement,onChange:e=>{console.log({...a,size:e}),i({...a,size:e})}}),(0,d.jsx)("div",{className:n.divider}),(0,d.jsx)(i4,{value:a.color,onChange:e=>{console.log({...a,color:e}),i({...a,color:e})}})]})}),ni=iQ({settingPanel:{position:"relative",width:"100%"},settingPanelInner:{position:"relative",marginTop:8,display:"flex"},settingPanelArrow:{position:"absolute",top:-8,left:8,zIndex:1,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"10px solid #fff"}}),nn=(0,i6.Pi)(e=>{let{children:t,offsetX:i=18}=e,n=ni();return(0,d.jsxs)("div",{className:n.settingPanel,children:[(0,d.jsx)("div",{className:n.settingPanelArrow,style:{left:i-6}}),(0,d.jsx)("div",{className:n.settingPanelInner,children:t})]})}),na=iQ({sizeAndColorSettings:{height:40,padding:"0 8px",borderRadius:8,background:"#fff",display:"inline-flex",alignItems:"center"},noColor:{marginLeft:118},divider:{width:1,height:20,margin:"0 8px",background:"#919EAB3D"},actionBtn:{width:28,height:28,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},sizeBtn:{background:"#919EAB"},sizeBtnActive:{background:"#3872E0"}}),nr={tiers:["small","middle","large"]},ns=(0,i6.Pi)(e=>{let{settings:t,onChange:i}=e,n=na(),[a,r]=(0,eh.useState)(t);return(0,eh.useEffect)(()=>{r(t)},[t]),(0,d.jsxs)("div",{className:es()(n.sizeAndColorSettings,{[n.noColor]:e.noColor}),children:[nr.tiers.map((e,t)=>{let r="large"===e?16:"middle"===e?8:4;return(0,d.jsx)("div",{className:n.actionBtn,onClick:()=>{a.size!==r&&(null==i||i({...a,size:r}))},children:(0,d.jsx)("div",{className:es()(n.sizeBtn,{[n.sizeBtnActive]:a.size===r}),style:{width:r,height:r,borderRadius:r/2}})},t)}),!e.noColor&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:n.divider}),(0,d.jsx)(i4,{value:a.color,onChange:e=>{null==i||i({...a,color:e})}})]})]})}),no=iQ({box:{position:"absolute",userSelect:"none",zIndex:1,"&,*":{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, 'Noto Sans JP',\n      'Noto Sans KR', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji'",boxSizing:"border-box"}},toolbar:{height:40,padding:"0 8px",background:"#fff",borderRadius:8,display:"flex",alignItems:"center",gap:8},divider:{width:1,height:20,background:"#919EAB3D"},innerBtn:{pointerEvents:"none",display:"flex"},defaultActionBtn:{minWidth:28,height:28,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center",color:"#212B36",transition:"all .2s ease",cursor:"pointer","&:hover":{background:"rgba(56, 114, 224, 0.10)",color:"#3872E0"},"&:active":{background:"rgba(56, 114, 224, 0.20)",color:"#3872E0"}},defaultToolBtnActive:{background:"rgba(56, 114, 224, 0.10)",color:"#3872E0"},disabled:{opacity:.5,cursor:"default"},primaryActionBtn:{height:30,boxSizing:"border-box",padding:"0 8px",borderRadius:6,border:"1px solid #3872E029",display:"flex",alignItems:"center",gap:4,color:"#3872E0",cursor:"pointer",transition:"all .2s ease","&:hover":{background:"rgba(56, 114, 224, 0.10)"},"&:active":{background:"rgba(56, 114, 224, 0.20)"},"& span":{fontSize:13,lineHeight:"20px"}},primaryIconBtn:{padding:4},"@global":{".screenshot_toolbar .ant-popover-inner":{padding:"0 !important"}}}),nl=(0,i6.Pi)(e=>{let{position:t,disabledTools:i=[],onToolClick:n,controller:a}=e,r=no(),s=(0,eh.useRef)(null),[o,l]=(0,eh.useState)({}),[c,h]=(0,eh.useState)([-1,-1]),[u,p]=(0,eh.useState)(!1),{x:g,y:m,width:f,height:v}=t,y=function(e,t){let i={},n=function(e){let t=S.S.Global.components.Screenshot;return{painting:[{key:"rect",get name(){return t.Tools.rect},icon:"sRectangular"},{key:"circle",get name(){return t.Tools.circle},icon:"sCircle"},{key:"arrow",get name(){return t.Tools.arrow},icon:"sArrow"},{key:"pen",get name(){return t.Tools.pen},icon:"sPen"},{key:"mosaic",get name(){return t.Tools.mosaic},icon:"sMosaic"},{key:"text",get name(){return t.Tools.text},icon:"sText"}],general:[{key:"undo",get name(){return"".concat(t.Tools.undo," (").concat(_.t.prettifyHotkey("mod+z"),")")},icon:"sUndo"},{key:"download",get name(){return t.Tools.download},icon:"sDownload"},{key:"close",get name(){return"".concat(t.Tools.close," (").concat(_.t.prettifyHotkey("esc"),")")},icon:"sClose"},{key:"copy",get name(){let i=_.t.prettifyHotkey("enter");if("screenshot"===e)return"".concat(t.Tools.copy," (").concat(i,")");return"".concat(t.Tools.finish," (").concat(i,")")},icon:"sConfirm"}],external:[{key:"chat",get name(){return t.Tools.chat},get desc(){return t.Tools.chatDesc},icon:"sChat"},{key:"note",get name(){return t.Tools.memo},get desc(){return t.Tools.memoDesc},icon:"sNote"},{key:"ocr",get name(){return""},get desc(){return t.Tools.ocr},icon:"sOcr"}]}}(e);return Object.keys(n).forEach(e=>{i[e]=n[e].filter(e=>!t.includes(e.key))}),i}(e.scene,i);(0,eh.useEffect)(()=>{let e={x:-1,y:-1},t=!1,i=t=>{e={x:t.clientX,y:t.clientY}},n=i=>{if(-1===e.x||-1===e.y)return;let{clientX:n,clientY:a}=i,r=n-e.x,s=a-e.y;if(Math.abs(r)>5||Math.abs(s)>5){if(t=!0,u)return;p(!0)}},a=()=>{t&&(t=!1),e={x:-1,y:-1},u&&p(!1)};return window.addEventListener("mousedown",i),window.addEventListener("mousemove",n),window.addEventListener("mouseup",a),()=>{window.removeEventListener("mousedown",i),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",a)}},[u]),(0,eh.useEffect)(()=>{if(!s.current)return;let{innerWidth:e,innerHeight:t}=window,{clientWidth:i,clientHeight:n}=s.current,a=m+v+8;if(a+n>t){let e=m-n-8;e>0?a=e:f>i&&(a=m+v-n-8)}let r=e-(g+f);r<0?r=i:r>e-i&&(r=e-i),h([a,r])},[v,f,g,m,a.activeTool]);let x=e=>(0,d.jsx)(i5.Z,{title:e.name,getTooltipContainer:e=>e.parentElement?e.parentElement:e,children:(0,d.jsx)("div",{className:es()(r.defaultActionBtn,{[r.defaultToolBtnActive]:a.currentTool===e.key,[r.disabled]:"undo"===e.key&&!a.canUndo}),ref:t=>{t&&a.currentTool===e.key&&l(i=>({...i,[e.key]:t}))},onClick:t=>{A.includes(e.key)?a.currentTool!==e.key?(l(i=>({...i,[e.key]:t.currentTarget})),a.setActiveTool(e.key),null==n||n(e.key,!0)):(a.setActiveTool(null),null==n||n(e.key,!1)):null==n||n(e.key,!0)},children:(0,d.jsx)("div",{className:r.innerBtn,children:(0,d.jsx)(en.J,{size:20,name:e.icon,color:"currentColor"})})})},e.key),k=()=>{if(!s.current)return 18;let e=o[a.currentTool];if(!e)return 18;let t=e.getBoundingClientRect(),i=s.current.getBoundingClientRect();return t.left-i.left+t.width/2},b=P.includes(a.currentTool),{currentTool:C}=a;return(0,d.jsxs)("div",{ref:s,className:r.box,style:{top:c[0],right:c[1],opacity:a.highlightAreaDragging?0:1,visibility:-1!==c[0]?"visible":"hidden",pointerEvents:u?"none":"auto"},children:[(0,d.jsxs)("div",{className:r.toolbar,children:[y.painting.map(e=>x(e)),(0,d.jsx)("div",{className:r.divider}),y.external.length>0&&(0,d.jsxs)(d.Fragment,{children:[y.external.map(e=>(0,d.jsx)(i5.Z,{title:e.desc,getTooltipContainer:e=>e.parentElement?e.parentElement:e,children:(0,d.jsxs)("div",{className:es()(r.primaryActionBtn,{[r.primaryIconBtn]:""===e.name}),onClick:()=>{null==n||n(e.key,!0)},children:[(0,d.jsx)(en.J,{size:20,name:e.icon,color:"currentColor"}),e.name&&(0,d.jsx)("span",{children:e.name})]})},e.key)),(0,d.jsx)("div",{className:r.divider})]}),y.general.map(e=>x(e))]}),a.currentToolConfig&&b&&(0,d.jsx)(nn,{offsetX:k(),children:(0,d.jsx)(ns,{settings:a.currentToolConfig,onChange:e=>{a.setToolConfig(e)}})}),a.currentToolConfig&&"mosaic"===C&&(0,d.jsx)(nn,{offsetX:k(),children:(0,d.jsx)(ns,{settings:a.currentToolConfig,noColor:!0,onChange:e=>{a.setToolConfig(e)}})}),a.currentToolConfig&&"text"===C&&(0,d.jsx)(nn,{offsetX:k(),children:(0,d.jsx)(nt,{settings:a.currentToolConfig,onChange:e=>{a.setToolConfig(e)}})})]})});class nc{async captureArea(){var e;if(!this.stageNode)return;let{innerWidth:t,innerHeight:i}=window,n=await (null===(e=this.opts)||void 0===e?void 0:e.captureVisible());if(!n)return;let a=await new Promise(e=>{let t=new Image;t.onload=()=>{e(t)},t.src=n});this.stageCtx||(this.stageCtx=new(y()).Stage({container:this.stageNode,width:t,height:i})),this.maskIns=new ei({ctx:this.stageCtx,backgroundImage:a}),this.drawingBoard=new et({ctx:this.stageCtx,backgroundImage:a,controller:this.controller,rootNode:this.rootNode}),this.drawingBoard.on("transform",e=>{this.showToolbar(e),this.showTips(e)}),this.maskIns.on("dragStart",async e=>{var t,i;(null===(t=this.drawingBoard)||void 0===t?void 0:t.getIsDisabled())||(this.screenLocked=!0,null===(i=this.drawingBoard)||void 0===i||i.disable(!0),this.hideToolbar(),this.showTips(e))}),this.maskIns.on("dragging",e=>{var t,i;(null===(t=this.drawingBoard)||void 0===t?void 0:t.getIsDisabled())||(null===(i=this.drawingBoard)||void 0===i||i.draw(e),this.showTips(e))}),this.maskIns.on("dragEnd",e=>{var t,i;(null===(t=this.drawingBoard)||void 0===t?void 0:t.getIsDisabled())||(null===(i=this.drawingBoard)||void 0===i||i.disable(!1),this.showTips(e),this.showToolbar(e))}),this.maskIns.draw()}getDrawingBoardIns(){return this.drawingBoard}getIsScreenLocked(){return this.screenLocked}captureNode(){}captureFullScreen(){}destroy(e){var t,i,n,a,r,s;this.destroyed||(null===(t=this.maskIns)||void 0===t||t.destroy(),this.maskIns=null,null===(i=this.drawingBoard)||void 0===i||i.destroy(),this.drawingBoard=null,this.toolbarReactNode.unmount(),this.tipsReactNode.unmount(),(null==e?void 0:null===(n=e.exclude)||void 0===n?void 0:n.includes("ocr"))||this.ocrReactNode.unmount(),this.rootNode.remove(),null===(a=this.stageCtx)||void 0===a||a.destroy(),this.stageCtx=null,this.shortcutKeyManager.destroy(),this.destroyed=!0,null===(r=(s=this.opts).onClose)||void 0===r||r.call(s))}init(){let{innerWidth:e,innerHeight:t}=window,i=document.createElement("div");i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="".concat(e,"px"),i.style.height="".concat(t,"px"),i.style.zIndex=p.dw.toString(),i.style.fontFamily="Inter",(this.opts.container||document.body).appendChild(i),this.rootNode=i;let n=document.createElement("div");i.appendChild(n),this.stageNode=n;let a=document.createElement("div");i.appendChild(a),this.toolbarReactNode=(0,x.createRoot)(a);let r=this.ocrNode=document.createElement("div");document.body.appendChild(r),this.ocrReactNode=(0,x.createRoot)(r);let s=document.createElement("div");i.appendChild(s),this.tipsReactNode=(0,x.createRoot)(s),this.shortcutKeyManager=new i1(this.rootNode),this.shortcutKeyManager.on("enter",()=>{this.copy()}),this.shortcutKeyManager.on("keydown",e=>{var t,i;(0,f.P6)(["backspace","delete"],e)?this.controller.selectedRune&&(null===(t=this.drawingBoard)||void 0===t||t.deleteSelectedRune()):(0,f.P6)(["esc"],e)?(console.log("close by esc"),this.close()):(0,f.P6)(["mod+z"],e)&&(null===(i=this.drawingBoard)||void 0===i||i.undo())}),this.shortcutKeyManager.on("contextmenu",e=>{e.preventDefault(),console.log("close by context menu"),this.close()}),g.o.isDesktop||window.addEventListener("resize",()=>{u.L.dispatchedResizeByMainWindow||(console.log("close by resize"),this.close())})}showToolbar(e){k.M.createUserBehaviorEvent({eventName:"screen_shot_toolbar_show"}),this.toolbarReactNode.render((0,d.jsx)(nl,{position:e,scene:this.opts.scene,disabledTools:this.opts.disabledTools,controller:this.controller,onToolClick:async(e,t)=>{var i,n,a,r;if(this.drawingBoard){if(("ocr"===e||"chat"===e||"note"===e)&&k.M.createUserBehaviorEvent({eventName:"screen_shot_toolbar_click",extData:{module:e}}),A.includes(e)&&this.drawingBoard.selectTool(e,t),"ocr"===e){let e=await this.drawingBoard.toDataURL();e&&this.handleOcr(e);return}if("chat"===e){let e=await this.drawingBoard.toDataURL();e&&this.handleChat(e);return}if("note"===e){let e=await this.drawingBoard.toDataURL();e&&this.handleAddMemo(e);return}if("undo"===e){null===(i=this.drawingBoard)||void 0===i||i.undo();return}if("close"===e){console.log("close by x btn"),this.close();return}if("download"===e){let e=await this.drawingBoard.toDataURL();g.o.isDesktop||(await (null===(r=this.drawingBoard)||void 0===r?void 0:r.download(e)),this.destroy()),e&&(null===(n=(a=this.opts).onDownloadAction)||void 0===n||n.call(a,e));return}if("copy"===e){this.copy();return}}}}))}handleAddMemo(e){var t,i;null===(t=(i=this.opts).onMemoAction)||void 0===t||t.call(i,e),g.o.isDesktop?this.close():this.destroy()}handleChat(e){var t,i;null===(t=(i=this.opts).onChatAction)||void 0===t||t.call(i,e),g.o.isDesktop?this.close():this.destroy()}handleOcr(e){var t,i,n;let a=this.drawingBoard.getBoundingRect(),r=(null===(t=this.getDrawingBoardIns())||void 0===t?void 0:t.getFileName())||"",s=m.m.dataURLtoFile(e,r);this.showOcr(s,a),null===(i=(n=this.opts).onOcrAction)||void 0===i||i.call(n,e,a),g.o.isDesktop||this.closeWithoutOcr()}hideToolbar(){this.toolbarReactNode.render((0,d.jsx)(d.Fragment,{}))}showOcr(e,t){this.ocrReactNode.render((0,d.jsx)(i$,{onDisposed:()=>{this.hideOcr()},insertTarget:"dialogRoot",file:e,dbRect:t}))}hideOcr(){this.destroyed?(this.ocrReactNode.unmount(),this.ocrNode.remove()):this.ocrReactNode.render((0,d.jsx)(d.Fragment,{}))}showTips(e){this.tipsReactNode.render((0,d.jsx)(i3,{position:e}))}disablePageScroll(){let{overflow:e,overscrollBehavior:t}=document.body.style;this.pageState={overflow:e,behavior:t},document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none"}enablePageScroll(){let{overflow:e,behavior:t}=this.pageState;document.body.style.overflow=e,document.body.style.overscrollBehavior=t}async copy(){var e,t,i,n,a;let r=await (null===(e=this.drawingBoard)||void 0===e?void 0:e.copy());r&&(g.o.isDesktop?(null===(t=(i=this.opts).onCopyAction)||void 0===t||t.call(i,r),setTimeout(()=>{this.close()},100)):(this.destroy(),null===(n=(a=this.opts).onCopyAction)||void 0===n||n.call(a,r)))}constructor(e){(0,h._)(this,"opts",void 0),(0,h._)(this,"rootNode",void 0),(0,h._)(this,"stageNode",void 0),(0,h._)(this,"toolbarReactNode",void 0),(0,h._)(this,"ocrNode",void 0),(0,h._)(this,"ocrReactNode",void 0),(0,h._)(this,"tipsReactNode",void 0),(0,h._)(this,"shortcutKeyManager",void 0),(0,h._)(this,"stageCtx",void 0),(0,h._)(this,"pageState",void 0),(0,h._)(this,"maskIns",void 0),(0,h._)(this,"drawingBoard",void 0),(0,h._)(this,"controller",void 0),(0,h._)(this,"destroyed",void 0),(0,h._)(this,"screenLocked",void 0),(0,h._)(this,"close",void 0),(0,h._)(this,"closeWithoutOcr",void 0),this.opts=e,this.stageCtx=null,this.maskIns=null,this.drawingBoard=null,this.controller=new i0,this.destroyed=!1,this.screenLocked=!1,this.close=()=>{var e,t;this.destroy(),null===(e=(t=this.opts).onCloseAction)||void 0===e||e.call(t)},this.closeWithoutOcr=()=>{var e,t;this.destroy({exclude:["ocr"]}),null===(e=(t=this.opts).onCloseAction)||void 0===e||e.call(t)},this.init()}}var nh=i(35850),nd=i(68104),nu=i(48023),np=i(5857),ng=i(90180),nm=i(90683),nf=i(60445),nv=i(4293),ny={fileContextLimitDialog:"file-context-limit-dialog--D4Rlt",title:"title--qr15Y",content:"content--WFwxe",fileInfo:"file-info--xXjP6",fileToken:"file-token--OKyRH",tokenLimit:"token-limit--vkXOn",tokenTip:"token-tip--a3Vv9",footer:"footer--DFKtd",btn:"btn--hcVdY",ctxSetting:"ctx-setting--tyQwo",ctxTitle:"ctx-title--MOZmC",tipIcon:"tip-icon--H5uJ0"};(r=c||(c={}))[r.PreConfirm=1]="PreConfirm",r[r.AdjustCtx=2]="AdjustCtx";class nx extends M.PN{get S(){return S.S.Global.components.ChatComponents.ChatToolbars.ChatSetting.ChatContextLimit}get FileS(){return S.S.Global.components.ChatComponents.ChatToolbars.ChatSetting.FileContextLimitDialog}onBeforeMount(){this.currentToken=nm.T.ctxTokenLimit,this.adjustToken=nm.T.ctxTokenLimit}onViewCreate(){nm.T.userEvent.reportFileLimitShow()}onViewDestroy(){}calcToken(e){return e>p.GQ.MAX?p.GQ.MAX+p.GQ.ADJUST_GAP:Math.ceil(e/p.GQ.ADJUST_GAP)*p.GQ.ADJUST_GAP}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"viewMode",1),(0,h._)(this,"currentToken",0),(0,h._)(this,"adjustToken",0)}}(0,E.gn)([M.SB],nx.prototype,"viewMode",void 0),(0,E.gn)([M.SB],nx.prototype,"currentToken",void 0),(0,E.gn)([M.SB],nx.prototype,"adjustToken",void 0),(0,E.gn)([M.Fl],nx.prototype,"S",null),(0,E.gn)([M.Fl],nx.prototype,"FileS",null);let nk=M._Y.createComponent("FileContextLimitDialog",nx,e=>(0,d.jsxs)(nd.u,{className:ny.fileContextLimitDialog,onDispose:()=>{var t,i;null===(t=(i=e.props).onClose)||void 0===t||t.call(i),e.props.onDisposed()},width:388,closeOffset:20,children:[(0,d.jsx)("div",{className:ny.title,children:e.FileS.reachLimit}),(0,d.jsxs)("div",{className:ny.content,children:[(0,d.jsxs)("div",{className:ny.fileInfo,children:[(0,d.jsx)("div",{className:ny.fileToken,children:(0,S.x)(e.FileS.fileToken,{token:nm.T.formatToken(e.props.fileToken)})}),(0,d.jsx)("div",{className:ny.tokenLimit,children:(0,S.x)(e.FileS.tokenLimit,{token:nm.T.formatToken(e.currentToken)})}),(0,d.jsx)("div",{className:ny.tokenTip,children:e.FileS.tokenTip})]}),e.viewMode===c.AdjustCtx&&(0,d.jsxs)("div",{className:ny.ctxSetting,children:[(0,d.jsxs)("div",{className:ny.ctxTitle,children:[(0,d.jsx)("span",{children:e.FileS.customContext}),(0,d.jsx)(nu.u,{title:e.S.chatContextTip,children:(0,d.jsx)("div",{className:ny.tipIcon,onClick:()=>{window.open(m.m.getHelpCenterPageUrl({},nf.se.creditsRule),"_blank","noopener")},children:(0,d.jsx)(en.J,{name:"monicaFeedback",size:16,color:"currentColor"})})})]}),(0,d.jsx)(nv.C,{value:e.adjustToken,onChange:t=>{e.adjustToken=t}})]})]}),(0,d.jsxs)("div",{className:ny.footer,children:[e.viewMode===c.PreConfirm&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(np.z,{type:"gray",className:ny.btn,onClick:()=>{var t,i;nm.T.userEvent.reportFileLimitClick("smart"),e.props.onDisposed(),null===(t=(i=e.props).onContinue)||void 0===t||t.call(i)},children:e.FileS.continueInSmartCrop}),(0,d.jsx)(np.z,{type:"primary",className:ny.btn,onClick:()=>{nm.T.userEvent.reportFileLimitClick("edit"),e.adjustToken=e.calcToken(e.props.fileToken),e.viewMode=c.AdjustCtx},children:e.FileS.adjust},"adjust")]}),e.viewMode===c.AdjustCtx&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(np.z,{type:"gray",className:ny.btn,onClick:()=>{nm.T.userEvent.reportFileLimitEditClick("back"),e.viewMode=c.PreConfirm,ng.A.setChatContextLimit(e.currentToken)},children:e.FileS.back}),(0,d.jsx)(np.z,{type:"primary",className:ny.btn,onClick:()=>{var t,i;nm.T.userEvent.reportFileLimitEditClick("confirm"),ng.A.setChatContextLimit(e.adjustToken),e.props.onDisposed(),null===(t=(i=e.props).onConfirm)||void 0===t||t.call(i)},children:e.FileS.confirmToUpload},"confirm")]})]})]})),nb=eo.t.createOpener(nk,{singleton:!0});var nC=i(29686),nw=i(79894),nS=i(34891),n_=i(49712),nT=i(11703),nP=i(79523),nA=i(56921),nD=i(70290),nN=i(58120),nj=i(32138),nE=i(37949),nM=i(10148),nI=i(63243),nR=i(19613),nF=i(1396),nL=i(90230),nB=i(663),nO=i(44015),nG=i(91390),nV=i(97965),nz=i(89322),nU=i(77313),nW=i(18245),nH=i(67925),nq=i(47549),nQ=i(51018),nY=i(41884),nK=i(91433),nX=i(24900),nZ=i(10043);class nJ extends nq.Y{get actionList(){return nH.customPromptController.actionRenderList.filter(e=>"selectionAction:Copy"!==e.systemKey)}setViews(e){this.views=e}checkCredits(e){let{isEnough:t,handleCreditsNotEnough:i}=nW.K.checkCredits({module:e?"genius_bot":"basic_query",source:"quick_action"});return!!t||(i(),!1)}openQuickActionPanel(e,t){if(!e.selection.trim().length||!this.checkCredits(e.enableAdvancedModel))return;let{position:i,container:n,placement:a,offsetX:r,offsetY:s,size:o,triggerSource:l,handleBackClick:c}=t||{};this.triggerSource=l||null;let h=o||this.size||this.defaultPanelSize,d=i||this.position||void 0;c&&(this.tempHandleBackClick=c),this.generate(e),this.views.openQuickActionPanel({name:"Quick Action",layoutData:h,controller:this},n?{relativeDomConfig:{el:n,placement:a||"bottom"},offsetX:r,offsetY:s}:{relativeMouseConfig:d})}async generate(e,t){if(!this.checkCredits(e.enableAdvancedModel))return;let i=this.getPayload(e),n={selectedText:i.selection,promptContent:i.action.content,language:{key:this.resolveTargetRespLang(i),name:""},actionLang:this.getLanguage(i),systemKey:i.action.systemKey,actionInput:i.selection,fullContext:i.context,actionId:i.action.id,useModel:i.enableAdvancedModel?nK.f2:nK.Q7},{taskId:a}=await nX.Tn.triggerSelectionQuickAction(n,(e,t,n)=>{if(e){if(t||n){this.updateOutput(a,{loading:!1,finished:!0,error:n||""});return}if((0,nZ._z)(i.action.systemKey)){let t=nQ.c.parsePartialJson(null==e?void 0:e.fullText);this.updateOutput(a,{...t,itemType:"translate",loading:!(null==e?void 0:e.fullText.trim().length)})}else this.updateOutput(a,{content:null==e?void 0:e.fullText,loading:!(null==e?void 0:e.fullText.trim().length)})}});t&&this.activeOutput?this.updateOutput(this.activeOutput.taskId,{...i,loading:!0,error:void 0,finished:!1,content:"",taskId:a,itemType:"common"}):(this.outputList.push({...i,loading:!0,finished:!1,content:"",taskId:a,itemType:"common"}),this.page=this.outputList.length-1)}restQuickPanel(){this.outputList=[],this.page=0,this.triggerSource=null,this.isEditing=!1,this.position=null,this.size=null,this.pinned=!1,this.tempHandleBackClick=null,this.timerId=null}getPayload(e){let{selection:t,context:i,enableAdvancedModel:n,action:a,language:r}=e;return{selection:t,context:i,enableAdvancedModel:n,action:a,language:r}}async refresh(){this.activeOutput&&this.generate(this.activeOutput)}retry(){this.activeOutput&&this.generate(this.activeOutput,!0)}stop(){if(!this.activeOutput)return;let e=this.activeOutput.taskId;e&&(nX.Tn.cancelTask(e,"quickAction"),this.updateOutput(e,{loading:!1,finished:!0}))}togglePinned(e){this.pinned=e}async continueInChat(e){let t=this.getMemoContent();this.handleCloseClick(),"quick_ask"===this.triggerSource&&ae.restQuickPanel();let i=await nF.Mp.beforeContinueInChat();await i.continueInChat(t,e)}getMemoContent(){let e=this.activeOutput.action,t=ng.A.finalQuickActionTranslateLanguage,i=m.m.transformActionContent(e.content,{lang:t});return{type:"quickAction",name:e.name,content:i,result:this.getOutputContent(),icon:e.iconName||nU.jp,selectedText:this.activeOutput.selection}}getOutputContent(){return this.activeOutput?"translate"===this.activeOutput.itemType?[this.activeOutput.translation,"word"===this.activeOutput.type&&this.activeOutput.selection,this.activeOutput.pronounce&&"/".concat(this.activeOutput.pronounce,"/"),this.activeOutput.detail].filter(Boolean).join("\n"):this.activeOutput.content||"":""}async handleSaveToMemo(){let e;let t=this.activeOutput;e=(null==t?void 0:t.itemType)==="translate"?"word"===t.type?{type:"quickActionTranslate",detail:t.detail||"",input:t.selection,pronounce:t.pronounce,translation:t.translation}:{type:"commonTranslate",input:t.selection,detail:(null==t?void 0:t.translation)||""}:{type:"quickAction",selectedText:(null==t?void 0:t.selection)||"",content:(null==t?void 0:t.action.content)||"",icon:(null==t?void 0:t.action.iconName)||"",name:(null==t?void 0:t.action.name)||"",result:(null==t?void 0:t.content)||""};let i=await nL.a.createFromEmbed({embedData:e});nL.a.saveToMemoSuccess(i.item.uid,"dialogRoot")}handleBackClick(){if(this.tempHandleBackClick){this.tempHandleBackClick(this.windowItemPosition);return}this.handleCloseClick()}handleDelayCloseQuickAction(){this.position=this.windowItemPosition,this.size=this.windowItemSize,this.windowId&&nY.E.disposeWindow(this.windowId),this.timerId=setTimeout(()=>{this.restQuickPanel(),ae.resetQuickAskData()},1e4)}handleRecoveryQuickActionData(){this.views.openQuickActionPanel({name:"Quick Action",layoutData:this.size||this.defaultPanelSize,controller:this},{relativeMouseConfig:this.position||void 0}),this.timerId=null}getLanguage(e){return e.language?e.language:ng.A.finalQuickActionTranslateLanguage}resolveTargetRespLang(e){let t=e.action;return(0,nZ.UX)(t.systemKey)||(0,nZ.Pj)(t.systemKey)||(0,nZ.hz)(t.systemKey)?"auto":this.getLanguage(e)}constructor(){super(),(0,h._)(this,"triggerSource",null),(0,h._)(this,"isEditing",!1),(0,h._)(this,"tempHandleBackClick",null),(0,h._)(this,"timerId",null),(0,h._)(this,"defaultPanelSize",{width:500,height:240}),(0,h._)(this,"views",void 0),(0,I.rC)(this)}}(0,E.gn)([M.SB],nJ.prototype,"triggerSource",void 0),(0,E.gn)([M.SB],nJ.prototype,"isEditing",void 0),(0,E.gn)([I.Fl],nJ.prototype,"actionList",null);let n$=new nJ;var n0=i(38299),n1=i(33381),n2=i(15065),n3=i(44795),n5=i(38172),n6=i(22810),n8=i(71528),n7=i(52184),n4=i(1340);class n9 extends nq.Y{get S(){return S.S.Global.controllers.QuickPanelController.QuickAskController}get inputContent(){return this.quickAskData.inputValue.trim()}get actionList(){return nH.customPromptController.actionRenderList.sort((e,t)=>(t.pinned?1:0)-(e.pinned?1:0)).map(e=>({icon:e.iconName||nU.jp,title:e.name,extData:{key:e.systemKey||e.name,module:"action",...e}}))}get suggestionList(){if(this.quickAskData.actionData||!this.inputContent)return[];let e=[];return this.quickAskData.quote||(e=[{icon:"outlineChat",title:this.S.askAi,extData:{key:"askAi",module:"ask"}},{icon:"memoSearch",title:this.S.aiSearch,hotkeys:["mod","enter"],extData:{key:"aiSearch",module:"ask"}},{icon:"memoMobileLink",title:this.S.InstantOpen,hotkeys:["shift","enter"],extData:{key:"instantOpen",module:"ask"}}]),e=[...this.actionList.filter(e=>e.title.toLocaleLowerCase().includes(this.inputContent.toLocaleLowerCase())),...e]}get recommendList(){return!this.quickAskData.inputValue||this.quickAskData.quote||this.quickAskData.actionData?[]:this.actionList.filter(e=>!e.title.toLocaleLowerCase().includes(this.quickAskData.inputValue.toLocaleLowerCase())).map(e=>({...e,isRecommend:!0}))}get allSuggestionList(){return[...this.suggestionList,...this.recommendList]}get actualPosition(){if(this.position)return{clientX:this.position.clientX+this.draggableController.translate.x,clientY:this.position.clientY+this.draggableController.translate.y}}get gpt4Enabled(){return ng.A.quickAskGpt4Enabled}get webAccessEnabled(){var e;return null!==(e=ng.A.quickAksWebAccessEnabled)&&void 0!==e?e:nF.Mp.getMonicaChatController().clientConfig.shouldEnableSkill("web_access")}setViews(e){this.views=e}handleInputKeydown(e){if(_.t.isHotkey(e,["down","ctrl+n","tab"])){this.onActiveIndexChange(1),e.stopPropagation(),e.preventDefault();return}if(_.t.isHotkey(e,["up","ctrl+p"])){this.onActiveIndexChange(-1),e.stopPropagation(),e.preventDefault();return}if(_.t.isHotkey(e,["esc"])){this.onBack(),e.stopPropagation();return}if(_.t.isHotkey(e,["enter"])){this.onEnterKeydown(e);return}if(_.t.isHotkey(e,["backspace"])&&!this.quickAskData.inputValue&&this.quickAskData.actionData){this.updateQuickAskData({actionData:void 0}),e.stopPropagation();return}for(let t of this.suggestionList)if(t.hotkeys&&_.t.isHotkey(e,[t.hotkeys.join("+")])){this.onAction(t.extData),e.stopPropagation();return}}handleGlobalKeydown(e){if(_.t.isHotkey(e,["esc"])){this.onBack(),e.stopPropagation();return}}async openQuickAsk(e){let{source:t,position:i}=e;if(await n1.userController.checkLogin(),!n1.userController.isLogin)return;if(!n$.panelVisible&&"quick_ask"===n$.triggerSource){n$.handleRecoveryQuickActionData();return}if(this.outputList.length&&!this.panelVisible){this.handleRecoveryQuickAskPanelData();return}let n=n0.N.selectedText||"";n&&(n$.restQuickPanel(),this.resetQuickAskData(),this.updateQuickAskData({quote:n}),n0.N.clearSelection()),this.source=t,this.position=i||null,this.showQuickAsk()}closeQuickAsk(){if("quick_ask"===n$.triggerSource&&n$.panelVisible){n$.handleDelayCloseQuickAction();return}if(this.outputList.length&&this.panelVisible){this.handleDelayCloseQuickAskPanel();return}this.visible=!1,this.source=void 0,this.resetQuickAskData()}showQuickAsk(){this.visible=!0}hideQuickAsk(){this.visible=!1}async onAction(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{isEnough:i,handleCreditsNotEnough:n}=this.preCheckAskAI("askAi"===e.key);if(!i){n();return}if(("action"!==e.module||this.quickAskData.actionData||this.quickAskData.quote)&&n5.W.createUserBehaviorEvent({eventName:"quick_ask_click",source:this.source,extData:{module:e.module,type:e.key}}),"action"===e.module){if(t){this.executeAction(e,this.inputContent);return}if(!this.quickAskData.actionData&&!this.quickAskData.quote){this.updateQuickAskData({inputValue:"",actionData:e});return}this.executeAction(e,this.quickAskData.quote||this.inputContent);return}if("ask"===e.module){let{key:t}=e;if("askAi"===t){this.executeAskAi();return}if("instantOpen"===t){this.openInstantOpen(this.inputContent);return}if("aiSearch"===t){this.openAiSearch(this.inputContent);return}}}executeAction(e,t){this.hideQuickAsk(),n$.openQuickActionPanel({action:e,selection:t,context:t,enableAdvancedModel:this.gpt4Enabled},{handleBackClick:e=>{this.position=e,n$.handleCloseClick(),this.showQuickAsk()},triggerSource:"quick_ask",position:this.actualPosition,size:this.DEFAULT_PANEL_SIZE})}async executeAskAi(){this.hideQuickAsk(),this.openQuickAskPanel({enableAdvancedModel:this.gpt4Enabled,enableWebAccess:this.webAccessEnabled,input:this.inputContent,selection:this.quickAskData.quote})}getPayload(e){let{selection:t,input:i,enableAdvancedModel:n,enableWebAccess:a}=e;return{selection:t,input:i,enableAdvancedModel:n,enableWebAccess:a}}checkCredits(e){let{isEnough:t,handleCreditsNotEnough:i}=nW.K.checkCredits({module:e?"genius_bot":"basic_query",source:"quick_ask"});return!!t||(i(),!1)}openQuickAskPanel(e,t){if(!this.checkCredits(e.enableAdvancedModel))return;let{position:i,size:n}=t||{},a=n||this.size||this.DEFAULT_PANEL_SIZE,r=i||this.actualPosition||void 0;this.generateAskAI(e),this.views.openQuickAskPanel({name:"Quick Ask",layoutData:a,controller:this},{relativeMouseConfig:r})}async generateAskAI(e,t){if(!this.checkCredits(e.enableAdvancedModel))return;let i=this.getPayload(e),n={selectText:i.selection,userInput:i.input,useModel:i.enableAdvancedModel?nK.f2:nK.Q7,webSearch:i.enableWebAccess},{taskId:a}=await nX.Tn.triggerQuickAskActions(n,(e,t,i)=>{var n;if(e){if(t||i){this.updateOutput(a,{error:i||"",finished:t});return}(null===(n=e.agentStatus)||void 0===n?void 0:n.type)==="web_search"&&this.updateOutput(a,{webAccess:!0}),this.updateOutput(a,{content:null==e?void 0:e.fullText,loading:!(null==e?void 0:e.fullText.trim().length)})}});t?this.updateOutput(a,{...i,content:"",loading:!0,error:void 0,finished:!1,taskId:a}):(this.outputList.push({...i,taskId:a,content:"",loading:!0,finished:!1}),this.page=this.outputList.length-1)}async retryGenerateAskAI(){this.activeOutput&&this.generateAskAI(this.activeOutput,!0)}refreshGenerateAskAI(){this.activeOutput&&this.generateAskAI(this.activeOutput)}async stopGenerateAskAI(){if(!this.activeOutput)return;let e=this.activeOutput.taskId;e&&(nX.Tn.cancelTask(e,"quickAction"),this.updateOutput(e,{loading:!1,finished:!0}))}async handleSaveToMemo(){if(!this.activeOutput)return;let e=["### ".concat(this.activeOutput.input),!!this.activeOutput.selection&&"> ".concat(this.activeOutput.selection),this.activeOutput.content].filter(Boolean),t=await nL.a.createTextMemo({content:e.join("\n\n"),isMarkdown:!0});nL.a.saveToMemoSuccess(t.item.uid,"dialogRoot")}async continueInChat(e){if(!this.activeOutput)return;let{content:t}=this.activeOutput;await nE.w.show("chat"),this.continueInChatHandler({text:e,quote:this.activeOutput.selection||"",content:t,question:this.activeOutput.input}),this.resetQuickAskData(),this.restQuickPanel()}toggleQuickAskPanelPinned(e){this.pinned=e}handleCloseQuickAskPanel(){this.pinned=!1,this.closeQuickAsk()}async openInstantOpen(e){this.updateQuickAskData({loading:!0,loadingText:this.S.instantOpenLoading});try{let t=await this.searchWebHelper.doSearch(e),i=(await nX.Tn.quickAskInstantOpen({data:{query:e,searchItems:t.sites.map((e,t)=>({title:e.title,url:e.url,snippet:e.snippet,index:t})),useModel:this.gpt4Enabled?nK.f2:nK.Q7},language:"auto",locale:S.a.locale,taskUid:m.m.genId(),taskType:"quick_action:instant_open"})).data.link;if(i){this.visible&&(this.closeQuickAsk(),window.open(i,"_blank"));return}throw Error("no url")}catch(e){this.updateQuickAskData({loading:!1,loadingText:"",error:!0,errorText:this.S.instantOpenError}),setTimeout(()=>{this.quickAskData.error&&this.onBack()},2e3)}}async openAiSearch(e){let t=await n5.W.getIsMonicaSoAuthorized(),i=n6.q.createMonicaSoUrlByQuestion({question:e,utm:"monica_quick_ask",isMonicaSoAuthorized:t});setTimeout(()=>{this.closeQuickAsk(),window.open(i,"_blank")})}onBack(){if(this.quickAskData.error||this.quickAskData.loading){this.updateQuickAskData({error:!1,errorText:"",loading:!1,loadingText:""}),this.inputFocus(!0);return}if(this.quickAskData.inputValue){this.updateQuickAskData({inputValue:""});return}if(this.quickAskData.actionData){this.updateQuickAskData({actionData:void 0});return}this.closeQuickAsk()}onInputChange(e){this.updateQuickAskData({inputValue:e}),this.activeIndex=0}setQuickAskData(e){this.quickAskData=e}updateQuickAskData(e){this.quickAskData={...this.quickAskData,...e}}inputFocus(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inputRef&&setTimeout(()=>{var t,i;null===(t=this.inputRef)||void 0===t||t.focus(),e&&(null===(i=this.inputRef)||void 0===i||i.select())},100)}resetQuickAskData(){this.setQuickAskData({inputValue:""}),this.position=null,this.currentActionIndex=0,this.size=null,this.timerId=null,this.source=void 0}restQuickPanel(){super.restQuickPanel(),this.currentActionIndex=0,this.size=null,this.timerId=null}handleDelayCloseQuickAskPanel(){this.position=this.windowItemPosition,this.size=this.windowItemSize,this.windowId&&nY.E.disposeWindow(this.windowId),this.timerId=setTimeout(()=>{this.restQuickPanel(),this.resetQuickAskData()},1e4)}handleRecoveryQuickAskPanelData(){this.views.openQuickAskPanel({name:"Quick Ask",layoutData:this.size||this.DEFAULT_PANEL_SIZE,controller:this},{relativeMouseConfig:this.position||void 0}),this.timerId=null}preCheckAskAI(e){if(ng.A.quickAksWebAccessEnabled&&e){let e=nW.K.checkCredits({module:"web_search",source:"quick_ask"});if(!e.isEnough)return e}return nW.K.checkCredits({module:this.gpt4Enabled?"genius_bot":"basic_query",source:"quick_ask"})}onEnterKeydown(e){if(e.stopPropagation(),!this.inputContent)return;let t=this.quickAskData.actionData;if(t){this.onAction(t);return}let i=this.allSuggestionList[this.activeIndex];if(i){this.onAction(i.extData,i.isRecommend);return}this.onAction({key:"askAi",module:"ask"})}onActiveIndexChange(e){let t=this.activeIndex+e;t<0&&(t=0),t>=this.allSuggestionList.length&&(t=this.allSuggestionList.length-1),this.activeIndex=t,this.autoScrollSuggestionList()}autoScrollSuggestionList(){if(!this.scrollTarget)return;let e=this.scrollTarget.querySelector('[data-index="'.concat(this.activeIndex,'"]'));if(e){if(this.activeIndex===this.allSuggestionList.length-1){this.scrollTarget.scrollTop=this.scrollTarget.scrollHeight;return}if(0===this.activeIndex){this.scrollTarget.scrollTop=0;return}e.scrollIntoView({block:"nearest"})}}updateOffsetSize(){var e;if(!this.targetEl)return;let{height:t,width:i}=this.targetEl.getBoundingClientRect(),n=null!==(e=this.position)&&void 0!==e?e:{clientX:(window.innerWidth-i)/2,clientY:(window.innerHeight-t)/2-220};this.position={clientX:(0,n7.Z)(n.clientX,50,window.innerWidth-i),clientY:(0,n7.Z)(n.clientY,50,window.innerHeight-t)}}constructor(){super(),(0,h._)(this,"visible",!1),(0,h._)(this,"activeIndex",0),(0,h._)(this,"quickAskData",{inputValue:""}),(0,h._)(this,"currentActionIndex",0),(0,h._)(this,"isEditing",!1),(0,h._)(this,"listenerManager",new n8.M),(0,h._)(this,"draggableController",new iX.$),(0,h._)(this,"targetEl",null),(0,h._)(this,"inputRef",null),(0,h._)(this,"scrollTarget",null),(0,h._)(this,"source",void 0),(0,h._)(this,"QUICK_ASK_WIDTH",600),(0,h._)(this,"timerId",null),(0,h._)(this,"DEFAULT_PANEL_SIZE",{width:this.QUICK_ASK_WIDTH,height:240}),(0,h._)(this,"views",void 0),(0,h._)(this,"KeyboardShortcutToggleQuickAskVisible",(0,n3.c)({name:"quickAsk",channels:["extensionContent"],handler:async e=>{let{source:t}=e;this.visible||this.panelVisible||n$.panelVisible&&"quick_ask"===n$.triggerSource?this.closeQuickAsk():(this.openQuickAsk({source:t}),this.source=t)}})),(0,h._)(this,"continueInChatHandler",(0,n3.c)({name:"quickAsk.continueInChat",channels:["extensionSidePanel","extensionContent"],handler:async e=>{let{text:t,content:i,quote:n,question:a}=e;nF.Mp.openBot(nK.Z9.monica);let r=await nF.Mp.beforeContinueInChat(),s=await nX.Tn.quickAskContinueInChat({quote:n,content:i,question:a,conversationInfo:r.conversationInfo});await r.addChatItems(s),r.sendQuestionOrAction({actionOrQuestion:t})}})),(0,h._)(this,"updateOffsetSizeThrottle",(0,n4.Z)(()=>{this.updateOffsetSize()},300)),(0,h._)(this,"searchWebHelper",new n2.v(async(e,t)=>await k.M.proxyFetch(e,t),async e=>await k.M.abortProxyFetch(e),(e,t)=>{console.log("".concat(e," search web error"),t)})),(0,I.rC)(this)}}(0,E.gn)([M.SB],n9.prototype,"visible",void 0),(0,E.gn)([M.SB],n9.prototype,"activeIndex",void 0),(0,E.gn)([M.SB],n9.prototype,"quickAskData",void 0),(0,E.gn)([M.SB],n9.prototype,"currentActionIndex",void 0),(0,E.gn)([M.SB],n9.prototype,"isEditing",void 0),(0,E.gn)([I.Fl],n9.prototype,"S",null),(0,E.gn)([I.Fl],n9.prototype,"inputContent",null),(0,E.gn)([I.Fl],n9.prototype,"actionList",null),(0,E.gn)([I.Fl],n9.prototype,"suggestionList",null),(0,E.gn)([I.Fl],n9.prototype,"recommendList",null),(0,E.gn)([I.Fl],n9.prototype,"allSuggestionList",null),(0,E.gn)([I.Fl],n9.prototype,"actualPosition",null),(0,E.gn)([I.Fl],n9.prototype,"gpt4Enabled",null),(0,E.gn)([I.Fl],n9.prototype,"webAccessEnabled",null);let ae=new n9;var at=i(70174),ai=i(31640),an=i(82270),aa=i(3544),ar=i(76752),as=i(92849);let ao=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"humanize"===e};var al=i(15851);class ac extends nq.Y{get actionList(){return nH.customPromptController.composeActionList}get composeToneConfig(){return this.updateFormat(this.defaultComposeToneConfig)}get socialPinedTemplate(){let{twitter:e,facebook:t,linkedin:i,reddit:n}=ng.A.socialMediaPinedTemplate||{};return{twitter:null!=e?e:[],facebook:null!=t?t:[],linkedin:null!=i?i:[],reddit:null!=n?n:[]}}get mailTemplates(){return this.templates.filter(e=>{var t;return null===(t=e.tag)||void 0===t?void 0:t.includes("email")})}get emailPinedTemplate(){var e;return null!==(e=ng.A.emailPinedTemplate)&&void 0!==e?e:[]}setViews(e){this.views=e}getSocialPinedTemplate(e){let t=e.toLowerCase();return this.socialPinedTemplate[t]||[]}getGlobalWritingConfig(e){return e?{enableAdvancedModel:ng.A.writingGpt4Enabled,composeLanguage:ng.A.finalQuickComposeRespondLanguage,toneConfig:{format:"text",tone:["auto"],length:"auto",formality:"auto"}}:{enableAdvancedModel:ng.A.writingGpt4Enabled,composeLanguage:ng.A.finalQuickComposeRespondLanguage,toneConfig:this.composeToneConfig}}async checkCredits(e){if(!n1.userController.isLogin)return n5.W.openLoginWindow({width:window.screen.width,height:window.screen.height,availLeft:screen.availLeft||0,availTop:screen.availTop||0},{source:"quick_compose_social_media"}),!1;let{isEnough:t,handleCreditsNotEnough:i}=nW.K.checkCredits({module:e?"genius_bot":"basic_query",source:"quick_compose"});return!!t||(i(),!1)}async openQuickComposePanel(e,t){var i;let n=JSON.parse(JSON.stringify(e));"generateQuickCompose"===n.type&&"action"===n.data.panelData.type&&(n.data.toneConfig.format="auto");let a="generateQuickCompose"===n.type?n.data.enableAdvancedModel:ng.A.writingGpt4Enabled;if(!await this.checkCredits(a))return;let{position:r,size:s,container:o,placement:l,offsetX:c,offsetY:h,inputEl:d}=t||{},u=s||this.size||("aiReply"===n.data.panelData.type?this.AI_REPLY_PANEL_SIZE:this.DEFAULT_PANEL_SIZE),p=r||this.position||void 0,{data:g,type:m}=n;(null===(i=g.panelData)||void 0===i?void 0:i.type)==="aiReply"&&this.getMailIntent(g.panelData.emailData),"openQuickCompose"===m&&(this.emptyPanelData=g.panelData||null),d?this.inputEl=d:this.inputEl=null;let f=n.data.panelData;("action"===f.type||"userInput"===f.type)&&(f.selection?this.insertType="replace":this.insertType="insert"),this.views.openQuickComposePanel({name:"Quick Compose",layoutData:u,controller:this},o?{relativeDomConfig:{el:o,placement:l||"bottom"},offsetX:c,offsetY:h}:{relativeMouseConfig:p}),"generateQuickCompose"===m&&this.generateQuickCompose(g,!1)}async generateQuickCompose(e,t){if(this.isAiContentDetectData(e.taskData)){this.generateHumanize(e,t);return}if(!this.checkCredits(e.enableAdvancedModel))return;let{taskData:i,enableAdvancedModel:n,composeLanguage:a,toneConfig:r}=e,{setTaskId:s,callback:o,updateOutput:l}=this.createWritingCallback();if(this.isQuickComposeSiteIntegrationData(i)){let{site:e}=i.data.siteIntegrationContext,{userInput:t}=i.data,{taskId:l}=await nX.Tn.doSiteIntegrationWriting(i.taskType,{userInput:t,config:{...r,composeLanguage:a,useModel:n?nK.f2:nK.Q7,socialMediaType:e}},o);s(l)}else{let{taskId:e}=await nX.Tn.doWriting(i.taskType,{...i.data,config:{...r,composeLanguage:a,useModel:n?nK.f2:nK.Q7}},o);s(e)}l(e,t)}async generateHumanize(e,t){var i;if(!ar.L.checkBypass())return;let n="writing:optimize"===e.taskData.taskType?e.taskData.data.content:null===(i=e.taskData.data.userInput)||void 0===i?void 0:i.value;if(!n)return;let{setTaskId:a,callback:r,updateOutput:s}=this.createWritingCallback(),{taskId:o}=await ar.L.bypass(n,r);a(o),s(e,t)}restQuickPanel(){super.restQuickPanel(),this.isEditing=!1,this.emptyPanelData=null,this.pinned=!1,this.insertType="insert",this.position=null,this.inputEl=null}togglePinned(e){this.pinned=e}handleBackClick(){this.outputList=[],this.page=0}async init(){this.initServiceEventListeners();let e=await at.v.getAllConfig();this.defaultComposeToneConfig={formality:e.formality||"auto",tone:e.tones.length?e.tones:["auto"],length:e.length||"auto",format:e.format||"text"},e.templates.length?this.templates=e.templates.map(e=>({...e,templateScene:"default"})):at.v.getTemplateList({useCache:!1}),e.siteTemplates.length?this.socialTemplates=e.siteTemplates:at.v.getSiteTemplateList({useCache:!1})}refresh(){this.activeOutput&&this.generateQuickCompose(this.activeOutput)}retry(){this.activeOutput&&this.generateQuickCompose(this.activeOutput,!0)}stop(){if(!this.activeOutput)return;let e=this.activeOutput.taskId;e&&(this.isQuickComposeSiteIntegrationData(this.activeOutput.taskData)?nX.Tn.cancelTask(e,"siteIntegration"):this.isAiContentDetectData(this.activeOutput.taskData)?nX.Tn.cancelTask(e,"aiContentDetect"):nX.Tn.cancelTask(e,"writing"),this.updateOutput(e,{loading:!1,finished:!0}))}continueInChat(e){this.activeOutput&&this.generateQuickCompose({...this.activeOutput,panelData:{type:"userInput",userInput:e,selection:this.activeOutput.content},taskData:{...this.activeOutput.taskData,taskType:"writing:optimize",data:{...this.activeOutput.taskData.data,content:this.activeOutput.content,userInput:{inputType:"user_input",value:e}}}})}updateMailData(e){this.mailData?(0,aa.Z)(this.mailData,e)||(this.intent="",this.suggestions=[]):this.mailData=e}async getMailSuggestion(e){if(!this.suggestions.length&&!this.isLoadingSuggestion){this.isLoadingSuggestion=!0;try{let t="task:".concat(m.m.genId()),i=await at.v.generateMailSuggestion({data:{config:{...this.composeToneConfig,composeLanguage:ng.A.finalQuickComposeRespondLanguage,useModel:ng.A.writingGpt4Enabled?"gpt-4o":"gpt-3.5"},emailData:e},taskType:"writing:mail:get_suggestion",taskUid:t});this.suggestions=i.data.suggestions}catch(e){al.M.error(m.m.formatMonicaSdkError(e),"dialogRoot"),console.error(e)}this.isLoadingSuggestion=!1}}async getMailIntent(e){if(this.intent)return;this.isLoadingIntent=!0;let t=()=>{this.isLoadingIntent=!1},i=e=>{t(),al.M.error(m.m.formatMonicaSdkError(e),"dialogRoot")},n=e=>{e&&(this.isLoadingIntent&&(this.isLoadingIntent=!1),this.intent=e)};this.isLoadingIntent=!0;try{await nX.Tn.doWriting("writing:mail:gen_intent",{config:{...this.composeToneConfig,composeLanguage:ng.A.finalQuickComposeRespondLanguage,useModel:ng.A.writingGpt4Enabled?"gpt-4o":"gpt-3.5"},content:"",emailData:e},(e,a,r)=>{if(r){i("".concat(r));return}n(e),a&&t()})}catch(e){alert(e)}}updateFormat(e){let t=this.isEmailWebSite(),i=this.isTwitterWebSite(),n=this.isRedditWebSite(),a=this.isFacebookWebSite(),r=this.isLinkedinWebSite(),s=e.format;return t&&"text"===s?{...e,format:"email"}:n&&"text"===s?{...e,format:"reddit"}:a&&"text"===s?{...e,format:"facebook"}:r&&"text"===s?{...e,format:"linkedin"}:i&&"text"===s?{...e,format:"twitter"}:e}async updateOriginLang(e){let t=await as.translateHelper.detectTextLang(e);"zh"===t&&(t="zh_CN"),this.mailLang=ai.q.getLanguageDisplayNameByLocale(t,S.a.locale)||"",this.aiReplyLang=ai.q.getComposeLanguageByLocale(t)||"auto"}async handleSaveToMemo(){if(!this.activeOutput)return;let e=["".concat(this.activeOutput.content)].filter(Boolean),t=await nL.a.createTextMemo({content:e.join("\n\n"),isMarkdown:!0});nL.a.saveToMemoSuccess(t.item.uid,"dialogRoot")}handleGpt4Change(e){this.activeOutput&&this.generateQuickCompose({...this.activeOutput,enableAdvancedModel:e,taskData:{...this.activeOutput.taskData}})}getSocialTemplate(e,t){return this.socialTemplates.flatMap(i=>i.socialMediaType===e&&i.templateScene===t?i:[])}isQuickComposeGenerateData(e){return"writing:optimize"===e.taskType||"writing:generate"===e.taskType||"writing:mail:quick_reply"===e.taskType}isAiContentDetectData(e){if(!e)return!1;if(this.isQuickComposeGenerateData(e))return"template"===e.data.userInput.inputType?ao(e.data.userInput.key):"user_input"===e.data.userInput.inputType&&(0,nZ.ED)(e.data.userInput.key);if(this.isQuickComposeSiteIntegrationData(e)){var t,i;if((null===(t=e.data.userInput)||void 0===t?void 0:t.inputType)==="template")return ao(e.data.userInput.key);if((null===(i=e.data.userInput)||void 0===i?void 0:i.inputType)==="user_input")return(0,nZ.ED)(e.data.userInput.key)}return!1}isTemplatePanelData(e){return!this.activeOutput&&((null==e?void 0:e.type)==="template"||(null==e?void 0:e.type)==="siteTemplate"&&"post"===e.siteTemplateType)}isActionPanelData(e){return!this.activeOutput&&((null==e?void 0:e.type)==="action"||(null==e?void 0:e.type)==="siteTemplate"&&"comment"===e.siteTemplateType)}isAiReplyPanelData(e){return(null==e?void 0:e.type)==="aiReply"}isEmailWebSite(){return window.location.host.includes("mail")||window.location.pathname.includes("mail")}isTwitterWebSite(){return["twitter.com","x.com"].some(e=>window.location.host.includes(e))}isRedditWebSite(){return["reddit.com"].some(e=>window.location.host.includes(e))}isFacebookWebSite(){return["facebook.com"].some(e=>window.location.host.includes(e))}isLinkedinWebSite(){return["linkedin.com"].some(e=>window.location.host.includes(e))}updateComposeToneConfig(e){let{format:t,formality:i,length:n,tone:a}=e;at.v.setStorage("format",t),at.v.setStorage("formality",i),at.v.setStorage("length",n),at.v.setStorage("tones",a)}async handleAiContentDetect(e,t){if(!ar.L.checkAiContentCredits()){this.updateAiContentDetectResult(e,{isEnough:!1,checkStatus:"error",progress:0});return}this.updateAiContentDetectResult(e,{checkStatus:"checking",isEnough:!0,progress:0});let{stop:i}=m.m.fakeProgress(5,t=>{this.updateAiContentDetectResult(e,{checkStatus:"checking",progress:t})});try{let i=await ar.L.check(t);i.data&&this.updateAiContentDetectResult(e,{modelStateList:ar.L.getModelStateList(i.data),checkStatus:ar.L.getCheckStatus(i.data)})}catch(i){let t=m.m.formatErrorMsg(i);t===an.Eg.quotaExceeded?this.updateAiContentDetectResult(e,{isEnough:!1,checkStatus:"error"}):this.updateAiContentDetectResult(e,{errorMsg:t,isEnough:!1,checkStatus:"error"})}this.updateAiContentDetectResult(e,{progress:100}),i()}updateAiContentDetectResult(e,t){let i=this.outputList.find(t=>t.taskId===e);i&&this.updateOutput(e,{aiContentDetectResult:{...i.aiContentDetectResult,...t}})}async initServiceEventListeners(){at.v.on("storageChange",e=>{void 0!==e.templates&&(this.templates=e.templates.map(e=>({...e,templateScene:"default"}))),void 0!==e.siteTemplates&&(this.socialTemplates=e.siteTemplates),void 0!==e.tones&&(this.composeToneConfig.tone=e.tones),void 0!==e.format&&(this.composeToneConfig.format=e.format),void 0!==e.formality&&(this.composeToneConfig.formality=e.formality),void 0!==e.length&&(this.composeToneConfig.length=e.length)})}createWritingCallback(e){let t;return{setTaskId:e=>{t=e},callback:(i,n,a)=>{if(a||n){this.updateOutput(t,{finished:!0,loading:!1,error:a}),a||null==e||e();return}i&&this.updateOutput(t,{content:i,loading:!i.trim().length})},updateOutput:(e,i)=>{i?this.updateOutput(t,{...e,content:"",loading:!0,finished:!1,taskId:t}):(this.outputList.push({...e,content:"",loading:!0,finished:!1,taskId:t}),this.page=this.outputList.length-1)}}}constructor(){super(),(0,h._)(this,"isEditing",!1),(0,h._)(this,"templates",[]),(0,h._)(this,"socialTemplates",[]),(0,h._)(this,"emptyPanelData",null),(0,h._)(this,"insertType","insert"),(0,h._)(this,"defaultComposeToneConfig",{formality:"auto",tone:["auto"],length:"auto",format:"text"}),(0,h._)(this,"inputEl",null),(0,h._)(this,"mailData",null),(0,h._)(this,"suggestions",[]),(0,h._)(this,"intent",""),(0,h._)(this,"isLoadingIntent",!1),(0,h._)(this,"isLoadingSuggestion",!1),(0,h._)(this,"mailLang",""),(0,h._)(this,"aiReplyLang","auto"),(0,h._)(this,"DEFAULT_PANEL_SIZE",{width:520,height:294}),(0,h._)(this,"AI_REPLY_PANEL_SIZE",{width:520,height:420}),(0,h._)(this,"views",void 0),(0,h._)(this,"isQuickComposeSiteIntegrationData",e=>"site_integration:comment"===e.taskType||"site_integration:post"===e.taskType),(0,I.rC)(this)}}(0,E.gn)([M.SB],ac.prototype,"isEditing",void 0),(0,E.gn)([M.SB],ac.prototype,"templates",void 0),(0,E.gn)([M.SB],ac.prototype,"socialTemplates",void 0),(0,E.gn)([M.SB],ac.prototype,"emptyPanelData",void 0),(0,E.gn)([M.SB],ac.prototype,"insertType",void 0),(0,E.gn)([M.SB],ac.prototype,"defaultComposeToneConfig",void 0),(0,E.gn)([M.SB],ac.prototype,"inputEl",void 0),(0,E.gn)([M.SB],ac.prototype,"mailData",void 0),(0,E.gn)([M.SB],ac.prototype,"suggestions",void 0),(0,E.gn)([M.SB],ac.prototype,"intent",void 0),(0,E.gn)([M.SB],ac.prototype,"isLoadingIntent",void 0),(0,E.gn)([M.SB],ac.prototype,"isLoadingSuggestion",void 0),(0,E.gn)([M.SB],ac.prototype,"mailLang",void 0),(0,E.gn)([M.SB],ac.prototype,"aiReplyLang",void 0),(0,E.gn)([I.Fl],ac.prototype,"actionList",null),(0,E.gn)([I.Fl],ac.prototype,"composeToneConfig",null),(0,E.gn)([I.Fl],ac.prototype,"socialPinedTemplate",null),(0,E.gn)([I.Fl],ac.prototype,"mailTemplates",null),(0,E.gn)([I.Fl],ac.prototype,"emailPinedTemplate",null);let ah=new ac;var ad=i(7318),au=i(80315),ap=i(42420),ag=i(81137),am=i(43939),af=i(80670),av=i(61658),ay={notification:"notification--nq5rE",box:"box--uuD08",container:"container--ZG4WW",dividing:"dividing--aWSTa",text:"text--RHIAQ",toolbar:"toolbar--mQQnK",actionBtn:"action-btn--KVHRy",active:"active--KnMNo",triggerNode:"trigger-node--vuvwn",moreMenuCard:"more-menu-card--qNBck",item:"item--OICxk"},ax=i(4461),ak=i(63623),ab=i(34788),aC={notificationImagePreview:"notification-image-preview--IJ0Y7",operation:"operation--zLQiU",switch:"switch--_Py0R",switchPrev:"switch-prev--ieoB7",switchNext:"switch-next--CbdgQ",disabled:"disabled--eKnWM",toolbar:"toolbar--hqIi5",ct:"ct--vJBDU",rt:"rt--YenwR",toolbarItem:"toolbar-item--RqTIr",container:"container--oR0tP",content:"content--IAI83"};class aw extends M.PN{get images(){var e;return null!==(e=this.props.images)&&void 0!==e?e:[]}onViewCreate(){let{images:e,activated:t}=this.props;t>=0&&t<e.length&&(this.activated=t),this.imageLoaded=!0}onViewDestroy(){}prev(){this.activated>0&&this.activated--}next(){this.activated<this.images.length-1&&this.activated++}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"activated",0),(0,h._)(this,"imageLoaded",!1)}}(0,E.gn)([M.SB],aw.prototype,"activated",void 0),(0,E.gn)([M.SB],aw.prototype,"imageLoaded",void 0),(0,E.gn)([I.Fl],aw.prototype,"images",null);let aS=M._Y.createComponent("NotificationImagePreview",aw,e=>(0,d.jsxs)("div",{className:aC.notificationImagePreview,onClick:()=>{e.props.onDisposed()},children:[(0,d.jsxs)("div",{className:aC.operation,onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("div",{className:es()(aC.switch,aC.switchPrev,{[aC.disabled]:0===e.activated}),onClick:e.prev.bind(e),children:(0,d.jsx)(en.J,{name:"arrowLt",size:20,color:"currentColor"})}),(0,d.jsx)("div",{className:es()(aC.switch,aC.switchNext,{[aC.disabled]:e.activated===e.images.length-1}),onClick:e.next.bind(e),children:(0,d.jsx)(en.J,{name:"arrowRt",size:20,color:"currentColor"})}),(0,d.jsxs)("div",{className:aC.toolbar,children:[(0,d.jsx)("div",{className:aC.lt}),(0,d.jsx)("div",{className:aC.ct,children:(0,d.jsx)("div",{className:aC.progress,children:"".concat(e.activated+1," / ").concat(e.images.length)})}),(0,d.jsx)("div",{className:aC.rt,children:(0,d.jsx)("div",{className:aC.toolbarItem,onClick:()=>{e.props.onDisposed()},children:(0,d.jsx)(en.J,{name:"close",size:24,color:"currentColor"})})})]})]}),(0,d.jsx)("div",{className:aC.container,onClick:e=>e.stopPropagation(),children:(0,d.jsx)("div",{className:aC.content,children:(0,d.jsx)(ax.E,{style:{transform:e.imageLoaded?"scale(1)":"scale(0.2)"},src:e.images[e.activated],alt:""})})})]})),a_=eo.t.createOpener(aS);var aT={notificationItem:"notification-item--rR83e",header:"header--iphly",title:"title--PxS_3",feedback:"feedback--LZ94t",actionBtn:"action-btn--KmgnB",dislike:"dislike--K40Tj",disabled:"disabled--__HNx",active:"active--ESK4z",summary:"summary--iVYl7",markdown:"markdown--f1VTz",images:"images--igT2C",action:"action--Qi7yl",carousel:"carousel--W65DM",transition:"transition--r_diI",slide:"slide--Hf0Sc",dividing:"dividing--DwzEW",dividingLine:"dividing-line--s3xf1",footer:"footer--swgr6",textBtn:"text-btn--GOPlB"};class aP extends M.PN{get S(){return S.S.Global.modules.Bots.Notification.NotificationItem}onViewCreate(){}onViewDestroy(){}feedback(e){let{id:t,hasLike:i}=this.props.item;"boolean"!=typeof i&&(this.props.item.hasLike=e,nF.Mp.getNotificationController().feedback(t,e))}carouselPrev(){var e;null===(e=this.carouselRef.current)||void 0===e||e.prev()}carouselNext(){var e;null===(e=this.carouselRef.current)||void 0===e||e.next()}executeAction(e){nF.Mp.getNotificationController().executeAction(e)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"currentSlide",0),(0,h._)(this,"isScrolling",!1),(0,h._)(this,"carouselRef",(0,eh.createRef)())}}(0,E.gn)([M.SB],aP.prototype,"currentSlide",void 0),(0,E.gn)([M.SB],aP.prototype,"isScrolling",void 0),(0,E.gn)([I.Fl],aP.prototype,"S",null);let aA=M._Y.createComponent("NotificationItem",aP,e=>{var t;let i={placement:"top",mouseEnterDelay:.3},{item:n,onImageLoaded:a}=e.props,r="boolean"==typeof n.hasLike,s=!0===n.hasLike,o=!1===n.hasLike;return(0,d.jsxs)("div",{className:aT.notificationItem,children:[(0,d.jsxs)("div",{className:aT.header,children:[(0,d.jsx)("div",{className:aT.title,children:n.title}),(0,d.jsxs)("div",{className:aT.feedback,children:[(0,d.jsx)(nu.u,{title:e.S.like,...i,children:(0,d.jsx)("div",{className:es()(aT.actionBtn,{[aT.disabled]:r,[aT.active]:s}),onClick:e.feedback.bind(e,!0),children:s?(0,d.jsx)(en.J,{name:"thumbUpFilled",size:16,fill:"currentColor"}):(0,d.jsx)(en.J,{name:"thumbup",size:16,stroke:"currentColor"})})}),(0,d.jsx)(nu.u,{title:e.S.dislike,...i,children:(0,d.jsx)("div",{className:es()(aT.actionBtn,aT.dislike,{[aT.disabled]:r,[aT.active]:o}),onClick:e.feedback.bind(e,!1),children:o?(0,d.jsx)(en.J,{name:"thumbUpFilled",size:16,fill:"currentColor"}):(0,d.jsx)(en.J,{name:"thumbup",size:16,stroke:"currentColor"})})})]})]}),(0,d.jsx)("div",{className:aT.summary,children:(0,d.jsx)(ak.U,{className:aT.markdown,children:n.summary})}),n.images&&n.images.length>0&&(0,d.jsxs)("div",{className:aT.images,children:[(0,d.jsx)("div",{className:aT.action,children:0!==e.currentSlide&&(0,d.jsx)("div",{className:aT.actionBtn,onClick:e.carouselPrev.bind(e),children:(0,d.jsx)(en.J,{name:"arrow",size:16,stroke:"currentColor"})})}),(0,d.jsx)("div",{className:es()(aT.carousel,{[aT.transition]:e.isScrolling}),children:(0,d.jsx)(ab.Z,{ref:e.carouselRef,dots:!1,draggable:!0,infinite:!1,beforeChange:(t,i)=>{e.isScrolling=!0,setTimeout(()=>{e.isScrolling=!1},500),e.currentSlide=i},children:n.images.map((e,t)=>(0,d.jsx)("div",{className:aT.slide,onClick:()=>{var e;a_({images:null!==(e=n.images)&&void 0!==e?e:[],activated:t,insertTarget:"mainWindow"})},children:(0,d.jsx)(ax.E,{src:e,alt:"",onLoad:()=>{null==a||a()}})},t))})}),(0,d.jsx)("div",{className:aT.action,children:e.currentSlide!==n.images.length-1&&(0,d.jsx)("div",{className:aT.actionBtn,onClick:e.carouselNext.bind(e),children:(0,d.jsx)(en.J,{name:"arrow-y",size:16,stroke:"currentColor"})})})]}),(0,d.jsx)("div",{className:aT.dividing,children:(0,d.jsx)("div",{className:aT.dividingLine})}),(null===(t=n.actions)||void 0===t?void 0:t.length)&&(0,d.jsx)("div",{className:aT.footer,children:n.actions.map((t,i)=>{let n="primary"===t.btnStyle?"primary":"outline"===t.btnStyle?"blackOutline":"text-primary";return(0,d.jsx)(np.z,{className:es()(aT.actionBtn,{[aT.textBtn]:"text-primary"===n}),type:n,onClick:e.executeAction.bind(e,t.action),children:t.btnName},i)})})]})});var aD=i(92020);class aN extends M.PN{get S(){return S.S.Global.modules.Bots.Notification}async onViewCreate(){let e=nF.Mp.getNotificationController();e.emitter.on("dataChanged",async()=>{await this.updateScroll()}),e.fetchNotificationList().then(()=>{this.updateScroll()})}onViewDestroy(){nF.Mp.getNotificationController().emitter.off("dataChanged")}helpCenter(){window.open(m.m.getHelpCenterPageUrl(),"_blank")}giveFiveStar(){window.open(m.m.getStoreUrl(),"_blank")}feedback(){g.o.isDesktop?iZ.y.getService().openBrowserPage(nf.Cl.mailLanding):aD.ll.openMonicaOptionsPage({menuKey:"contactUs"})}updateScroll(){return this.timer&&clearTimeout(this.timer),new Promise(e=>{this.timer=setTimeout(()=>{if(this.containerRef.current){let{scrollHeight:e,clientHeight:t}=this.containerRef.current;this.containerRef.current.scrollTop=e-t}e()},10)})}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"containerRef",(0,eh.createRef)()),(0,h._)(this,"hasMore",!1),(0,h._)(this,"isOpen",!1),(0,h._)(this,"timer",null)}}(0,E.gn)([M.SB],aN.prototype,"containerRef",void 0),(0,E.gn)([M.SB],aN.prototype,"hasMore",void 0),(0,E.gn)([M.SB],aN.prototype,"isOpen",void 0),(0,E.gn)([I.Fl],aN.prototype,"S",null);let aj=M._Y.createComponent("Notification",aN,e=>{let t=nF.Mp.getNotificationController();return t.loading&&e.props.visible?(0,d.jsx)(av.g,{fullScreen:!0}):(0,d.jsxs)("div",{className:ay.notification,style:{display:e.props.visible?"flex":"none"},children:[(0,d.jsx)("div",{className:ay.box,children:(0,d.jsx)("div",{className:ay.container,ref:e.containerRef,children:t.items.map(e=>(0,d.jsx)(aA,{item:e},e.id))})}),(0,d.jsx)(aE,{vm:e})]})}),aE=(0,i6.Pi)(e=>{let{vm:t}=e;return(0,d.jsxs)("div",{className:ay.toolbar,children:[(0,d.jsx)("div",{className:ay.actionBtn,onClick:t.helpCenter.bind(t),children:(0,d.jsx)("span",{className:ay.text,children:t.S.helpCenter})}),(0,d.jsx)(aI,{}),(0,d.jsx)("div",{className:ay.actionBtn,onClick:t.giveFiveStar.bind(t),children:(0,d.jsx)("span",{className:ay.text,children:t.S.give5star})}),(0,d.jsx)(aI,{}),(0,d.jsxs)(af.J,{className:es()(ay.actionBtn,{[ay.active]:t.isOpen}),triggerNodeClassName:ay.triggerNode,placement:"top",trigger:"click",closeOnContentClick:!0,content:(0,d.jsx)(aM,{vm:t}),spacing:20,onOpen:()=>t.isOpen=!0,onClose:()=>t.isOpen=!1,children:[(0,d.jsx)("span",{className:ay.text,children:t.S.contactUs}),(0,d.jsx)(en.J,{size:12,name:"arrow-up",color:"currentColor"})]})]})}),aM=(0,i6.Pi)(e=>{let{vm:t}=e;return(0,d.jsx)("div",{className:ay.moreMenuCard,children:(0,d.jsxs)("div",{className:ay.box,children:[(0,d.jsx)("a",{className:ay.item,target:"_blank",href:m.m.getWebOrigin()+m.m.genUrl(nf.Cl.mailLanding,{scene:"collaboration"}),rel:"noreferrer",children:t.S.collaboration}),(0,d.jsx)("div",{className:ay.item,onClick:t.feedback.bind(t),children:t.S.feedback})]})})}),aI=(0,i6.Pi)(()=>(0,d.jsx)("div",{className:ay.dividing}));class aR extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],aR.prototype,"someState",void 0);let aF=M._Y.createComponent("NotificationDrawer",aR,e=>(0,d.jsx)(am.d,{title:S.S.Global.controllers.mainWindowController.gift,visible:!0,enableHorizontalStyle:!0,onDispose:()=>{e.props.onDisposed()},children:(0,d.jsx)(aj,{visible:!0})})),aL=eo.t.createOpener(aF,{singleton:!0});var aB=i(53676),aO=i(66135),aG=i(76917),aV=i(82724),az=i(94808),aU=i(39744),aW=i(95782),aH={globalSidebarGuideDialog:"global-sidebar-guide-dialog--MEWWR",box:"box--T7CAZ",title:"title--AgMLp",desc:"desc--_pOFL",ext:"ext--j0SRY",video:"video--vUDfV",footer:"footer--BqeVV",btn:"btn--utNQ9",enableBtn:"enable-btn--NO7oO"};class aq extends M.PN{get S(){return S.S.Global.modules.MainWindow.GlobalSidebarGuideDialog}onViewCreate(){ng.A.desktopSidebarGuideShowed||aD.ll.setUiFlag("desktopSidebarGuideShowed",!0)}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],aq.prototype,"someState",void 0),(0,E.gn)([I.Fl],aq.prototype,"S",null);let aQ=M._Y.createComponent("GlobalSidebarGuideDialog",aq,e=>(0,d.jsx)(nd.u,{className:aH.globalSidebarGuideDialog,maskType:"transparent",onDispose:e.props.onDisposed,width:544,children:(0,d.jsxs)("div",{className:aH.box,children:[(0,d.jsx)("div",{className:aH.title,children:e.S.title}),(0,d.jsx)("div",{className:aH.desc,children:(0,d.jsx)(aW.Z,{S:e.S.desc,components:{ext:()=>(0,d.jsx)("span",{className:aH.ext,children:(0,d.jsx)(en.J,{name:"extension",size:16,color:"currentColor"})})}})}),(0,d.jsx)("div",{className:aH.video,children:(0,d.jsx)("video",{src:"https://assets.monica.im/home-web/_next/static/videos/globalSidebar-870f94109a66699dd9102ba4fb9db360.mp4",muted:!0,loop:!0,autoPlay:!0})}),(0,d.jsxs)("div",{className:aH.footer,children:[(0,d.jsx)(np.z,{className:aH.btn,type:"default",color:"secondary",onClick:e.props.onDisposed,children:e.S.gotIt}),(0,d.jsx)(np.z,{className:es()(aH.btn,aH.enableBtn),type:"default",color:"primary",onClick:()=>{aD.ll.set("sidebarEnabled",!0),e.props.onDisposed()},children:e.S.enableIt})]})]})})),aY=eo.t.createOpener(aQ,{singleton:!0});var aK=i(25449),aX={highTrafficDialog:"high-traffic-dialog--V2cwc",mark:"mark--NUxPH",title:"title--svvnz",main:"main--pQSrJ",description:"description--UOVSd",upgradeDesc:"upgrade-desc--CefGy",button:"button--gCmlX"},aZ=i(32004);class aJ extends M.PN{get S(){return S.S.Global.modules.MainWindow.HighTrafficDialog}onViewCreate(){k.M.createUserBehaviorEvent({eventName:"high_traffic_dialog_show"}),n1.userController.eventEmitter.listenBy(this,"markPaid",()=>{this.props.onDisposed(),nG.n.endTime=null,nG.n.countdownController.destroy()}),aZ.f.getProxy(this).add((0,I.U5)(()=>nG.n.countdownEnable,e=>{e||(nG.n.endTime=null,this.props.onDisposed())}))}onViewDestroy(){n1.userController.eventEmitter.stopListenBy(this)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],aJ.prototype,"someState",void 0),(0,E.gn)([I.Fl],aJ.prototype,"S",null);let a$=M._Y.createComponent("HighTrafficDialog",aJ,e=>(0,d.jsxs)(nd.u,{className:aX.highTrafficDialog,onDispose:()=>{e.props.onDisposed()},fixed:"dialogRoot"===e.props.insertTarget,closeOnMaskClick:!1,width:350,children:[(0,d.jsx)("h2",{className:aX.title,children:(0,d.jsx)(aW.Z,{S:e.S.title,data:{count:"".concat(nG.n.waitUserCount,"+")}})}),(0,d.jsxs)("main",{className:aX.main,children:[(0,d.jsx)("p",{className:aX.description,children:(0,d.jsx)(aW.Z,{S:e.S.description,components:{mark:e=>(0,d.jsx)("span",{className:aX.mark,children:e})},data:{second:nG.n.restSecond}})}),(0,d.jsx)("p",{className:aX.upgradeDesc,children:(0,d.jsx)(aW.Z,{S:e.S.upgradeDesc,components:{mark:e=>(0,d.jsx)("span",{className:aX.mark,children:e})}})})]}),(0,d.jsx)(np.z,{className:aX.button,size:"large",type:"primary",loading:n1.userController.resubscribeLoading,onClick:async()=>{let t="high_traffic_dialog_payment";if(n1.userController.canResubscribe){await n1.userController.resubscribe(t),e.props.onDisposed();return}k.M.createUserBehaviorEvent({eventName:"high_traffic_dialog_click",extData:{button:"upgrade"}}),n1.userController.upgrade(t)},children:aK.promotionController.subscribeButtonText})]})),a0=eo.t.createOpener(a$,{singleton:!0});var a1=i(53040),a2=i(87393),a3={imageDisplayDialog:"image-display-dialog--fyPjI",content:"content--BVEk4",imageWrapper:"image-wrapper--PpIh9",inner:"inner--Op3eJ",image:"image--nVFUW",msg:"msg--_PuqC",title:"title--LU4qp",newTag:"new-tag--t5Awt",desc:"desc--mkLg4",footer:"footer--trjnj",noMore:"no-more--Icp0Q",submit:"submit--zTNqM",cancel:"cancel--XZS5_"},a5=i(8621),a6=i(18312);class a8 extends M.PN{get S(){return S.S.Global.modules.MainWindow.ImageDisplayDialog}onViewCreate(){this.setFlag()}async setFlag(){let e=await aD.ll.getUiFlag("showedImageFeatures")||[];this.props.config.id&&aD.ll.setUiFlag("showedImageFeatures",[...e,this.props.config.id])}onViewDestroy(){}handleClose(){nM.E.imageDisplayDialogController.close()}handleStart(){let{createInfo:e,routerKey:t}=this.props.config;a6.J.onTabChange("image"),a5.imageController.goto(t,e),nM.E.imageDisplayDialogController.close()}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],a8.prototype,"someState",void 0),(0,E.gn)([M.Fl],a8.prototype,"S",null);var a7=i(58812);class a4 extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var a9=JSON.parse('{"fill":"none","content":"\\n<g clip-path=\\"url(#clip0_317_5235)\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8 0.733276C3.98673 0.733276 0.733337 3.98667 0.733337 7.99994C0.733337 12.0132 3.98673 15.2666 8 15.2666C12.0133 15.2666 15.2667 12.0132 15.2667 7.99994C15.2667 3.98667 12.0133 0.733276 8 0.733276ZM11.1909 5.70649C10.9155 5.43112 10.4691 5.43112 10.1937 5.70649L7.10257 8.79763L5.8063 7.50136C5.53093 7.22599 5.08447 7.22599 4.8091 7.50136C4.53373 7.77673 4.53373 8.22319 4.8091 8.49856L6.60397 10.2934C6.87934 10.5688 7.3258 10.5688 7.60117 10.2934L11.1909 6.70369C11.4663 6.42832 11.4663 5.98186 11.1909 5.70649Z\\" fill=\\"white\\" fill-opacity=\\"0.65\\"/>\\n</g>\\n<defs>\\n<clipPath id=\\"clip0_317_5235\\">\\n<rect width=\\"16\\" height=\\"16\\" fill=\\"white\\"/>\\n</clipPath>\\n</defs>\\n\\n","viewBox":"0 0 16 16"}');let re=M._Y.createComponent("CheckedCircleIcon",a4,e=>(0,d.jsx)(a7.s,{...e.props,name:"CheckedCircleIcon",iconData:a9}));class rt extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var ri=JSON.parse('{"fill":"none","content":"\\n<g clip-path=\\"url(#clip0_317_1045)\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M0.733398 8.00006C0.733398 3.9868 3.9868 0.733398 8.00006 0.733398C12.0133 0.733398 15.2667 3.9868 15.2667 8.00006C15.2667 12.0133 12.0133 15.2667 8.00006 15.2667C3.9868 15.2667 0.733398 12.0133 0.733398 8.00006ZM8.00006 1.9334C4.64954 1.9334 1.9334 4.64954 1.9334 8.00006C1.9334 11.3506 4.64954 14.0667 8.00006 14.0667C11.3506 14.0667 14.0667 11.3506 14.0667 8.00006C14.0667 4.64954 11.3506 1.9334 8.00006 1.9334Z\\" fill=\\"white\\" fill-opacity=\\"0.65\\"/>\\n</g>\\n<defs>\\n<clipPath id=\\"clip0_317_1045\\">\\n<rect width=\\"16\\" height=\\"16\\" fill=\\"white\\"/>\\n</clipPath>\\n</defs>\\n\\n","viewBox":"0 0 16 16"}');let rn=M._Y.createComponent("CheckboxCircleIcon",rt,e=>(0,d.jsx)(a7.s,{...e.props,name:"CheckboxCircleIcon",iconData:ri}));var ra={whiteCheckbox:"white-checkbox--xVG1_",icon:"icon--gAQGt"};class rr extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],rr.prototype,"someState",void 0);let rs=M._Y.createComponent("WhiteCheckbox",rr,e=>{let{checked:t,onChange:i,onClick:n,size:a=24,label:r,className:s}=e.props;return(0,d.jsxs)("div",{className:es()(ra.whiteCheckbox,s),onClick:e=>{null==n||n(e),null==i||i(!t)},children:[t?(0,d.jsx)(re,{color:"currentColor",size:a,className:ra.icon}):(0,d.jsx)(rn,{color:"currentColor",size:a,className:ra.icon}),r]})}),ro=M._Y.createComponent("ImageDisplayDialog",a8,e=>{if(!nM.E.imageDisplayDialogController.visible)return null;let{title:t,subTitle:i,banner:n,bgDarkColor:a,bgColor:r}=e.props.config;return(0,d.jsxs)(nd.u,{className:a3.imageDisplayDialog,onDispose:()=>{var t,i;null===(t=(i=e.props).onClose)||void 0===t||t.call(i),e.props.onDisposed()},fixed:"dialogRoot"===e.props.insertTarget,closeOnMaskClick:!1,width:360,closeIconVisible:!1,style:{backgroundColor:a2.C.isDark?a:r},children:[(0,d.jsx)("div",{className:a3.content,children:(0,d.jsx)("div",{className:a3.imageWrapper,children:(0,d.jsxs)("div",{className:a3.inner,children:[(0,d.jsx)(a1.E,{skeleton:!0,src:n,className:a3.image,alt:""}),(0,d.jsxs)("div",{className:a3.msg,children:[(0,d.jsxs)("div",{className:a3.title,children:[t,(0,d.jsx)("div",{className:a3.newTag,children:"NEW"})]}),(0,d.jsx)("div",{className:a3.desc,children:i})]})]})})}),(0,d.jsxs)("div",{className:a3.footer,children:[(0,d.jsx)("div",{className:a3.noMore,children:(0,d.jsx)(rs,{className:a3.checkbox,checked:ng.A.noMoreShowedImageDialog,size:16,label:e.S.noMore,onClick:e=>{e.stopPropagation(),aD.ll.setUiFlag("noMoreShowedImageDialog",!ng.A.noMoreShowedImageDialog)}})}),(0,d.jsx)(np.z,{type:"lightGray",className:a3.submit,onClick:()=>{e.handleStart()},size:"overMedium",children:e.S.start}),(0,d.jsx)(np.z,{onClick:()=>{e.handleClose()},className:a3.cancel,type:"text-gray",size:"overMedium",children:e.S.cancel})]})]})}),rl=eo.t.createOpener(ro,{singleton:!0});var rc=i(39502),rh=JSON.parse('{"v":"5.7.12","fr":60,"ip":0,"op":241,"w":609,"h":812,"nm":"lottie (mobile)","ddd":0,"assets":[{"id":"comp_0","nm":"cannon (small - left)","layers":[{"ddd":0,"ind":1,"ty":0,"nm":"_small-side","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[218,320,0],"ix":2,"l":2},"a":{"a":0,"k":[400,400,0],"ix":1,"l":2},"s":{"a":0,"k":[-100,100,100],"ix":6,"l":2}},"ao":0,"w":800,"h":800,"ip":15,"op":234,"st":15,"bm":0}]},{"id":"comp_1","nm":"_small-side","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"circle a","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":1,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":29,"s":[321.019]},{"t":158,"s":[1800]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":1,"s":[599.5,838,0],"to":[-30,-106.667,0],"ti":[46.667,0,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":29,"s":[419.5,198,0],"to":[-46.667,0,0],"ti":[0,0,0]},{"t":158,"s":[319.5,838,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0,0]},"t":1,"s":[50,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":29,"s":[100,100,100]},{"t":128,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":1,"op":159,"st":1,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"circle b","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":3,"s":[0]},{"t":128,"s":[1440]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":3,"s":[599.5,838,0],"to":[-26.667,-93.333,0],"ti":[66.667,0,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":21,"s":[439.5,278,0],"to":[-66.667,0,0],"ti":[0,0,0]},{"t":128,"s":[199.5,838,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0,0]},"t":3,"s":[50,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":21,"s":[100,100,100]},{"t":98,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":3,"op":129,"st":3,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"star a","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":1,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":31,"s":[343.949]},{"t":158,"s":[1800]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":1,"s":[596.087,836.292,0],"to":[-36.098,-100,0],"ti":[52.765,0,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":31,"s":[379.5,236.292,0],"to":[-52.765,0,0],"ti":[0,0,0]},{"t":158,"s":[279.5,836.292,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0,0]},"t":1,"s":[50,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":31,"s":[100,100,100]},{"t":128,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"sr","sy":1,"d":1,"pt":{"a":0,"k":5,"ix":3},"p":{"a":0,"k":[0,0],"ix":4},"r":{"a":0,"k":0,"ix":5},"ir":{"a":0,"k":5,"ix":6},"is":{"a":0,"k":0,"ix":8},"or":{"a":0,"k":12,"ix":7},"os":{"a":0,"k":0,"ix":9},"ix":1,"nm":"Polystar Path 1","mn":"ADBE Vector Shape - Star","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Polystar 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":1,"op":159,"st":1,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"star b","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":3,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":23,"s":[288]},{"t":128,"s":[1800]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":3,"s":[596.087,836.292,0],"to":[-39.431,-113.333,0],"ti":[66.098,1.667,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":23,"s":[359.5,156.292,0],"to":[-66.098,-1.667,0],"ti":[0,0,0]},{"t":128,"s":[199.5,826.292,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0,0]},"t":3,"s":[50,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":23,"s":[100,100,100]},{"t":98,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"sr","sy":1,"d":1,"pt":{"a":0,"k":5,"ix":3},"p":{"a":0,"k":[0,0],"ix":4},"r":{"a":0,"k":0,"ix":5},"ir":{"a":0,"k":5,"ix":6},"is":{"a":0,"k":0,"ix":8},"or":{"a":0,"k":12,"ix":7},"os":{"a":0,"k":0,"ix":9},"ix":1,"nm":"Polystar Path 1","mn":"ADBE Vector Shape - Star","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.521568655968,0.270588248968,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Polystar 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":3,"op":129,"st":3,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"rec a","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":33,"s":[381.468]},{"t":218,"s":[2520]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":0,"s":[599.5,842,0],"to":[-23.333,-100,0],"ti":[41.333,1.333,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":33,"s":[459.5,242,0],"to":[-41.333,-1.333,0],"ti":[0,0,0]},{"t":218,"s":[351.5,834,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0,0]},"t":0,"s":[50,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":33,"s":[100,100,100]},{"t":188,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,8],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":219,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"rec b","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":25,"s":[262.857]},{"t":191,"s":[2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":2,"s":[599.5,842,0],"to":[-23.333,-113.333,0],"ti":[74,5,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":25,"s":[459.5,162,0],"to":[-74,-5,0],"ti":[0,0,0]},{"t":191,"s":[155.5,812,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0,0]},"t":2,"s":[50,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":25,"s":[100,100,100]},{"t":161,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,8],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":192,"st":2,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"square a","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":35,"s":[462.385]},{"t":218,"s":[2880]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":0,"s":[599.5,838,0],"to":[-43.333,-123.333,0],"ti":[60,0,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":35,"s":[339.5,98,0],"to":[-60,0,0],"ti":[0,0,0]},{"t":218,"s":[239.5,838,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0,0]},"t":0,"s":[50,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":35,"s":[100,100,100]},{"t":188,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":219,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"square b","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":27,"s":[285.714]},{"t":191,"s":[2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":2,"s":[599.5,838,0],"to":[-30,-120,0],"ti":[75,3.333,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":27,"s":[419.5,118,0],"to":[-75,-3.333,0],"ti":[0,0,0]},{"t":191,"s":[149.5,818,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0,0]},"t":2,"s":[50,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":27,"s":[100,100,100]},{"t":161,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":192,"st":2,"bm":0},{"ddd":0,"ind":9,"ty":4,"nm":"circle a 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":1,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":29,"s":[-371.368]},{"t":191,"s":[-2520]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":1,"s":[599.5,838,0],"to":[-53.333,-113.333,0],"ti":[56.667,-3.333,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":29,"s":[279.5,158,0],"to":[-56.667,3.333,0],"ti":[0,0,0]},{"t":191,"s":[259.5,858,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0.167,0]},"t":1,"s":[100,50,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":29,"s":[100,100,100]},{"t":161,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":1,"op":192,"st":1,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"circle b 2","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":3,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":21,"s":[-250.839]},{"t":158,"s":[-2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":3,"s":[599.5,838,0],"to":[-53.333,-100,0],"ti":[63,-7,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":21,"s":[279.5,238,0],"to":[-63,7,0],"ti":[0,0,0]},{"t":158,"s":[221.5,880,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0.167,0]},"t":3,"s":[100,50,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":21,"s":[100,100,100]},{"t":128,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.521568655968,0.270588248968,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":3,"op":159,"st":3,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"star a 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":1,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":31,"s":[-397.895]},{"t":191,"s":[-2520]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":1,"s":[596.087,836.292,0],"to":[-9.431,-113.333,0],"ti":[42.765,-3.333,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":31,"s":[539.5,156.292,0],"to":[-42.765,3.333,0],"ti":[0,0,0]},{"t":191,"s":[339.5,856.292,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0.167,0]},"t":1,"s":[100,50,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":31,"s":[100,100,100]},{"t":161,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"sr","sy":1,"d":1,"pt":{"a":0,"k":5,"ix":3},"p":{"a":0,"k":[0,0],"ix":4},"r":{"a":0,"k":0,"ix":5},"ir":{"a":0,"k":5,"ix":6},"is":{"a":0,"k":0,"ix":8},"or":{"a":0,"k":12,"ix":7},"os":{"a":0,"k":0,"ix":9},"ix":1,"nm":"Polystar Path 1","mn":"ADBE Vector Shape - Star","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Polystar 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":1,"op":192,"st":1,"bm":0},{"ddd":0,"ind":12,"ty":4,"nm":"star b 2","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":3,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":23,"s":[-278.71]},{"t":158,"s":[-2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":3,"s":[596.087,836.292,0],"to":[-12.765,-96.667,0],"ti":[52.765,-3.333,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":23,"s":[519.5,256.292,0],"to":[-52.765,3.333,0],"ti":[0,0,0]},{"t":158,"s":[279.5,856.292,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0.167,0]},"t":3,"s":[100,50,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":23,"s":[100,100,100]},{"t":128,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"sr","sy":1,"d":1,"pt":{"a":0,"k":5,"ix":3},"p":{"a":0,"k":[0,0],"ix":4},"r":{"a":0,"k":0,"ix":5},"ir":{"a":0,"k":5,"ix":6},"is":{"a":0,"k":0,"ix":8},"or":{"a":0,"k":12,"ix":7},"os":{"a":0,"k":0,"ix":9},"ix":1,"nm":"Polystar Path 1","mn":"ADBE Vector Shape - Star","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Polystar 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":3,"op":159,"st":3,"bm":0},{"ddd":0,"ind":13,"ty":4,"nm":"rec a 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":33,"s":[-556.875]},{"t":128,"s":[-2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":0,"s":[599.5,842,0],"to":[-16.667,-120,0],"ti":[66.667,0,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":33,"s":[499.5,122,0],"to":[-66.667,0,0],"ti":[0,0,0]},{"t":128,"s":[199.5,842,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0.167,0]},"t":0,"s":[100,50,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":33,"s":[100,100,100]},{"t":98,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,8],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":129,"st":0,"bm":0},{"ddd":0,"ind":14,"ty":4,"nm":"rec b 2","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":25,"s":[-306.667]},{"t":218,"s":[-2880]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":2,"s":[599.5,842,0],"to":[-22.62,-109.87,0],"ti":[2.877,-2.055,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":25,"s":[339.5,262,0],"to":[-51.333,36.667,0],"ti":[0,0,0]},{"t":218,"s":[219.5,862,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0.167,0]},"t":2,"s":[100,50,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":25,"s":[100,100,100]},{"t":188,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,8],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":219,"st":2,"bm":0},{"ddd":0,"ind":15,"ty":4,"nm":"square a 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":35,"s":[-590.625]},{"t":128,"s":[-2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":0,"s":[599.5,838,0],"to":[-20,-90,0],"ti":[36.667,0,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":35,"s":[479.5,298,0],"to":[-36.667,0,0],"ti":[0,0,0]},{"t":128,"s":[379.5,838,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0.167,0]},"t":0,"s":[100,50,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":35,"s":[100,100,100]},{"t":98,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":129,"st":0,"bm":0},{"ddd":0,"ind":16,"ty":4,"nm":"square b 2","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":27,"s":[-333.333]},{"t":218,"s":[-2880]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":2,"s":[599.5,838,0],"to":[-10,-103.333,0],"ti":[50,0,0]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":27,"s":[539.5,218,0],"to":[-50,0,0],"ti":[0,0,0]},{"t":218,"s":[299.5,838,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0.167,0]},"t":2,"s":[100,50,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":27,"s":[100,100,100]},{"t":188,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":219,"st":2,"bm":0}]},{"id":"comp_2","nm":"cannon (small - right)","layers":[{"ddd":0,"ind":1,"ty":0,"nm":"_small-side","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[260,320,0],"ix":2,"l":2},"a":{"a":0,"k":[400,400,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"w":800,"h":800,"ip":0,"op":219,"st":0,"bm":0}]},{"id":"comp_3","nm":"cannon (small - top)","layers":[{"ddd":0,"ind":1,"ty":0,"nm":"left","refId":"comp_4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400,400,0],"ix":2,"l":2},"a":{"a":0,"k":[400,400,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"w":800,"h":800,"ip":13,"op":313,"st":13,"bm":0},{"ddd":0,"ind":2,"ty":0,"nm":"right","refId":"comp_4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400,400,0],"ix":2,"l":2},"a":{"a":0,"k":[400,400,0],"ix":1,"l":2},"s":{"a":0,"k":[-100,100,100],"ix":6,"l":2}},"ao":0,"w":800,"h":800,"ip":30,"op":330,"st":30,"bm":0}]},{"id":"comp_4","nm":"right","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"circle a 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":8,"s":[0]},{"t":155,"s":[1800]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":8,"s":[325.643,-26.292,0],"to":[-101.333,75.667,0],"ti":[15.333,-507.667,0]},{"t":155,"s":[125.643,835.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":8,"s":[50,100,100]},{"t":155,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":8,"op":156,"st":-7,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"circle b 4","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0]},{"t":215,"s":[2520]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":2,"s":[619.5,-26.292,0],"to":[-138,77.667,0],"ti":[-2,-497.667,0]},{"t":215,"s":[259.5,835.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":2,"s":[50,100,100]},{"t":215,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":216,"st":-13,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"star a 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":6,"s":[0]},{"t":245,"s":[2880]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":6,"s":[376.929,-28,0],"to":[-213.333,157.667,0],"ti":[173.333,-127.667,0]},{"t":245,"s":[116.929,834,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":6,"s":[50,100,100]},{"t":245,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"sr","sy":1,"d":1,"pt":{"a":0,"k":5,"ix":3},"p":{"a":0,"k":[0,0],"ix":4},"r":{"a":0,"k":0,"ix":5},"ir":{"a":0,"k":5,"ix":6},"is":{"a":0,"k":0,"ix":8},"or":{"a":0,"k":12,"ix":7},"os":{"a":0,"k":0,"ix":9},"ix":1,"nm":"Polystar Path 1","mn":"ADBE Vector Shape - Star","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Polystar 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":6,"op":246,"st":-9,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"star b 4","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0]},{"t":125,"s":[1800]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.985},"o":{"x":0.167,"y":0.015},"t":2,"s":[171.786,-28,0],"to":[0,0,0],"ti":[-161.333,-275.667,0]},{"t":125,"s":[251.786,834,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":2,"s":[50,100,100]},{"t":125,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"sr","sy":1,"d":1,"pt":{"a":0,"k":5,"ix":3},"p":{"a":0,"k":[0,0],"ix":4},"r":{"a":0,"k":0,"ix":5},"ir":{"a":0,"k":5,"ix":6},"is":{"a":0,"k":0,"ix":8},"or":{"a":0,"k":12,"ix":7},"os":{"a":0,"k":0,"ix":9},"ix":1,"nm":"Polystar Path 1","mn":"ADBE Vector Shape - Star","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.521568655968,0.270588248968,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Polystar 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":126,"st":-13,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"rec a 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":4,"s":[0]},{"t":185,"s":[2520]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":4,"s":[428.214,-22.292,0],"to":[-167.333,119.667,0],"ti":[-130.667,-315.667,0]},{"t":185,"s":[228.214,839.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":4,"s":[50,100,100]},{"t":185,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,8],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":4,"op":186,"st":-11,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"rec b 4","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":6,"s":[0]},{"t":245,"s":[2880]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":6,"s":[223.071,-22.292,0],"to":[0,0,0],"ti":[-92.571,-383.708,0]},{"t":245,"s":[223.071,839.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":6,"s":[50,100,100]},{"t":245,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,8],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":6,"op":246,"st":-9,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"square a 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":4,"s":[0]},{"t":217,"s":[2520]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.985},"o":{"x":0.167,"y":0.015},"t":4,"s":[120.5,-26.292,0],"to":[13,430.305,0],"ti":[52.221,-418.892,0]},{"t":217,"s":[198.5,833.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":4,"s":[50,100,100]},{"t":217,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":4,"op":218,"st":-11,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"square b 4","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":8,"s":[0]},{"t":215,"s":[2520]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":8,"s":[274.357,-26.292,0],"to":[157.333,415.667,0],"ti":[22.667,-253.667,0]},{"t":215,"s":[114.357,835.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":8,"s":[50,100,100]},{"t":215,"s":[100,50,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":8,"op":216,"st":-7,"bm":0},{"ddd":0,"ind":9,"ty":4,"nm":"circle a 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0]},{"t":125,"s":[-1800]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":2,"s":[365.643,-26.292,0],"to":[-101.333,75.667,0],"ti":[15.333,-507.667,0]},{"t":125,"s":[165.643,835.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":2,"s":[100,50,100]},{"t":125,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":126,"st":-13,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"circle b 3","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":8,"s":[0]},{"t":245,"s":[-2880]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":8,"s":[519.5,-26.292,0],"to":[-138,77.667,0],"ti":[-2,-497.667,0]},{"t":245,"s":[159.5,835.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":8,"s":[100,50,100]},{"t":245,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.521568655968,0.270588248968,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":8,"op":246,"st":-7,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"star a 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":6,"s":[0]},{"t":245,"s":[-2880]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":6,"s":[416.929,-28,0],"to":[-213.333,157.667,0],"ti":[173.333,-127.667,0]},{"t":245,"s":[156.929,834,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":6,"s":[100,50,100]},{"t":245,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"sr","sy":1,"d":1,"pt":{"a":0,"k":5,"ix":3},"p":{"a":0,"k":[0,0],"ix":4},"r":{"a":0,"k":0,"ix":5},"ir":{"a":0,"k":5,"ix":6},"is":{"a":0,"k":0,"ix":8},"or":{"a":0,"k":12,"ix":7},"os":{"a":0,"k":0,"ix":9},"ix":1,"nm":"Polystar Path 1","mn":"ADBE Vector Shape - Star","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Polystar 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":6,"op":246,"st":-9,"bm":0},{"ddd":0,"ind":12,"ty":4,"nm":"star b 3","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":8,"s":[0]},{"t":155,"s":[-2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.985},"o":{"x":0.167,"y":0.015},"t":8,"s":[211.786,-28,0],"to":[0,0,0],"ti":[-161.333,-275.667,0]},{"t":155,"s":[291.786,834,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":8,"s":[100,50,100]},{"t":155,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"sr","sy":1,"d":1,"pt":{"a":0,"k":5,"ix":3},"p":{"a":0,"k":[0,0],"ix":4},"r":{"a":0,"k":0,"ix":5},"ir":{"a":0,"k":5,"ix":6},"is":{"a":0,"k":0,"ix":8},"or":{"a":0,"k":12,"ix":7},"os":{"a":0,"k":0,"ix":9},"ix":1,"nm":"Polystar Path 1","mn":"ADBE Vector Shape - Star","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Polystar 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":8,"op":156,"st":-7,"bm":0},{"ddd":0,"ind":13,"ty":4,"nm":"rec a 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":4,"s":[0]},{"t":185,"s":[-2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":4,"s":[468.214,-22.292,0],"to":[-167.333,119.667,0],"ti":[-130.667,-315.667,0]},{"t":185,"s":[268.214,839.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":4,"s":[100,50,100]},{"t":185,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,8],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.262745112181,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":4,"op":186,"st":-11,"bm":0},{"ddd":0,"ind":14,"ty":4,"nm":"rec b 3","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":6,"s":[0]},{"t":245,"s":[-2880]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":6,"s":[263.071,-22.292,0],"to":[0,143.667,0],"ti":[-114.571,-267.708,0]},{"t":245,"s":[263.071,839.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":6,"s":[100,50,100]},{"t":245,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,8],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":6,"op":246,"st":-9,"bm":0},{"ddd":0,"ind":15,"ty":4,"nm":"square a 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0]},{"t":217,"s":[-2520]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.985},"o":{"x":0.167,"y":0.015},"t":2,"s":[160.5,-26.292,0],"to":[13,430.305,0],"ti":[52.221,-418.892,0]},{"t":217,"s":[238.5,833.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":2,"s":[100,50,100]},{"t":217,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.121568627656,0.843137264252,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":218,"st":-13,"bm":0},{"ddd":0,"ind":16,"ty":4,"nm":"square b 3","sr":1,"ks":{"o":{"a":0,"k":50,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":4,"s":[0]},{"t":185,"s":[-2160]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0},"t":4,"s":[314.357,-26.292,0],"to":[157.333,415.667,0],"ti":[22.667,-253.667,0]},{"t":185,"s":[154.357,835.708,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":4,"s":[100,50,100]},{"t":185,"s":[50,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.121568627656,0.564705908298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":4,"op":186,"st":-11,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"cannon (small - left)","refId":"comp_0","sr":0.8,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[76,452,0],"ix":2,"l":2},"a":{"a":0,"k":[0,360,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"w":480,"h":720,"ip":0,"op":240,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":0,"nm":"cannon (small - right)","refId":"comp_2","sr":0.8,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[533,452,0],"ix":2,"l":2},"a":{"a":0,"k":[479.994,360,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"w":480,"h":720,"ip":0,"op":240,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":0,"nm":"cannon (small - top)","refId":"comp_3","sr":0.8,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[304,408,0],"ix":2,"l":2},"a":{"a":0,"k":[400,400,0],"ix":1,"l":2},"s":{"a":0,"k":[102,102,100],"ix":6,"l":2}},"ao":0,"w":800,"h":800,"ip":0,"op":240,"st":0,"bm":0}],"markers":[]}');class rd extends M.PN{get S(){return S.S.Global.modules.MainWindow.Invite.InviteBonusDialog}onViewCreate(){k.M.createUserBehaviorEvent({eventName:"invite_gift_show"})}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}(0,E.gn)([M.Fl],rd.prototype,"S",null);let ru=M._Y.createComponent("InviteBonusDialog",rd,e=>{let t=(0,eh.useRef)(null);return(0,rc.Z)({renderer:"svg",loop:!1,autoplay:!0,containerRef:t,path:rh,name:"inviteBonus"}),(0,d.jsxs)(nd.u,{width:350,fixed:"dialogRoot"===e.props.insertTarget,onDispose:e.props.onDisposed,closeIconVisible:!1,className:"invite-bonus-dialog--FKAuQ",children:[(0,d.jsx)("div",{className:"lottie--xhrfu",ref:t}),(0,d.jsxs)("div",{className:"banner--tw7QB",children:[(0,d.jsx)(a1.E,{className:"claude--URdv4",src:"https://assets.monica.im/assets/img/apps_avatar/claude-star-100x100.png",alt:"claude3",skeleton:!0}),(0,d.jsx)(a1.E,{className:"gpt--r4AoU",src:"https://assets.monica.im/assets/img/apps_avatar/gpt-4.png",alt:"gpt-4"}),(0,d.jsx)(a1.E,{className:"gemini--Lf_de",src:"https://assets.monica.im/assets/img/gemini.png",alt:"gemini"})]}),(0,d.jsx)("div",{className:"title--TIU5r",children:e.S.title}),(0,d.jsx)("div",{className:"reward--B5sjx",children:e.S.reward}),(0,d.jsx)("div",{className:"desc--mvlAw",children:e.S.desc}),(0,d.jsx)(np.z,{className:"btn--moRsB",type:"primary",onClick:()=>{k.M.createUserBehaviorEvent({eventName:"invite_gift_click"}),e.props.onDisposed()},children:e.S.ok})]})}),rp=eo.t.createOpener(ru);var rg=i(47720);class rm extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],rm.prototype,"someState",void 0);let rf=M._Y.createComponent("BaseDialog",rm,e=>(0,d.jsx)("div",{className:"base-dialog--uRtw5",children:(0,d.jsxs)("div",{className:es()("container--AlhBD",e.props.className),children:[(0,d.jsx)("div",{className:"close--wM1WG",onClick:()=>{e.props.onDisposed()},children:(0,d.jsx)(en.J,{color:"currentColor",size:20,name:"close"})}),e.props.children,(0,d.jsx)("span",{className:"symbol--2TXNQ"})]})}));class rv extends M.PN{get S(){return S.S.Global.modules.MainWindow.Invite.InviteDialog}onViewCreate(){k.M.createUserBehaviorEvent({eventName:"reward_popup_show",extData:{page:"invite_dialog"}}),aZ.f.getProxy(this).add((0,I.U5)(()=>n1.userController.isLogin,e=>{e||this.props.onDisposed()}))}onViewDestroy(){aZ.f.getProxy(this).disposeAll()}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}(0,E.gn)([I.Fl],rv.prototype,"S",null);let ry=M._Y.createComponent("InviteDialog",rv,e=>(0,d.jsxs)(rf,{onDisposed:e.props.onDisposed,className:"invite-dialog--NVrWL",children:[(0,d.jsx)("header",{className:"header--Zfrht",children:(0,d.jsx)("h2",{className:"title--UOWBJ",children:(0,d.jsx)(aW.Z,{S:e.S.title,data:{plan:rg.serverConfigController.copywritingManager.getVersionDisplayName("starter")}})})}),(0,d.jsxs)("main",{className:"main--ngVzW",children:[(0,d.jsx)(aW.Z,{S:e.S.earnReward,components:{strong:e=>(0,d.jsx)("strong",{className:"strong--wFbwY",children:e})},data:{days:49}}),(0,d.jsx)("span",{children:e.S.doNotMissOut})]}),(0,d.jsx)("footer",{className:"footer--sRv0p",children:(0,d.jsx)(np.z,{type:"primary",className:"button--L4k7n",onClick:()=>{window.open(m.m.getRewardPageUrl(),"_blank"),k.M.createUserBehaviorEvent({eventName:"reward_popup_click",extData:{page:"invite_dialog",button:"claim_now"}})},children:e.S.claimNow})})]})),rx=eo.t.createOpener(ry);var rk={rewardsObtainedDialog:"rewards-obtained-dialog--IXGCe",header:"header--tqHAB",title:"title--R868b",main:"main--qguYY",rewards:"rewards--swzo8",description:"description--CyOhR",footer:"footer--IR6nQ",button:"button--NIeQi"};class rb extends M.PN{get S(){return S.S.Global.modules.MainWindow.Invite.RewardsObtainedDialog}onViewCreate(){k.M.createUserBehaviorEvent({eventName:"reward_popup_show",extData:{page:"rewards_obtained_dialog",rewardType:this.props.type,inviteName:this.props.invitedUserName}}),aZ.f.getProxy(this).add((0,I.U5)(()=>n1.userController.isLogin,e=>{e||this.props.onDisposed()}))}onViewDestroy(){aZ.f.getProxy(this).disposeAll()}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],rb.prototype,"someState",void 0),(0,E.gn)([I.Fl],rb.prototype,"S",null);let rC=M._Y.createComponent("RewardsObtainedDialog",rb,e=>{let t="invite:first_payment"===e.props.type;return(0,d.jsxs)(rf,{className:rk.rewardsObtainedDialog,onDisposed:e.props.onDisposed,children:[(0,d.jsx)("header",{className:rk.header,children:(0,d.jsx)("h2",{className:rk.title,children:e.S.title})}),(0,d.jsxs)("main",{className:rk.main,children:[(0,d.jsx)("p",{className:rk.rewards,children:t?e.S.subscribeRewards:e.S.registerRewards}),e.props.invitedUserName&&(0,d.jsx)("p",{className:rk.description,children:(0,S.x)(t?e.S.yourFriendsSubscribed:e.S.yourFriendsRegistered,{friend:e.props.invitedUserName})})]}),(0,d.jsxs)("footer",{className:rk.footer,children:[(0,d.jsx)(np.z,{type:"primary",className:rk.button,onClick:()=>{window.open(m.m.getRewardPageUrl(),"_blank"),k.M.createUserBehaviorEvent({eventName:"reward_popup_click",extData:{page:"rewards_obtained_dialog",rewardType:e.props.type,button:"get_more_rewards",inviteName:e.props.invitedUserName}})},children:e.S.getMoreRewards}),(0,d.jsx)(np.z,{type:"text-gray",onClick:async()=>{e.props.onDisposed(),nM.E.rewardsObtained.handleNotShowAgain(),k.M.createUserBehaviorEvent({eventName:"reward_popup_click",extData:{page:"rewards_obtained_dialog",rewardType:e.props.type,button:"do_not_show_again",inviteName:e.props.invitedUserName}})},children:e.S.doNotShowAgain})]})]})}),rw=eo.t.createOpener(rC,{singleton:!0});var rS=i(70860),r_=i(73361),rT=i(54560);class rP extends M.PN{get S(){return S.S.Global.modules.MainWindow.MonthlyVipResubscribeDialog}onViewCreate(){k.M.createUserBehaviorEvent({eventName:"monthly_vip_resubscribe_dialog_show"})}async onResubscribe(){k.M.createUserBehaviorEvent({eventName:"monthly_vip_resubscribe_dialog_click"});try{this.loading=!0,await rT.u.resubscribe(),al.M.success(this.S.resubscribeSuccess),this.loading=!1,this.props.onDisposed(),await Promise.all([n1.userController.fetchVipStatus(),r_.gM.updateUsageInfos()])}catch(e){al.M.error(m.m.formatMonicaSdkError(e)),this.loading=!1}}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"loading",!1)}}(0,E.gn)([M.SB],rP.prototype,"loading",void 0),(0,E.gn)([I.Fl],rP.prototype,"S",null);let rA=M._Y.createComponent("MonthlyVipResubscribeDialog",rP,e=>(0,d.jsxs)(nd.u,{className:"monthly-vip-resubscribe-dialog--fjwFk",onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,width:350,closeOnMaskClick:!1,children:[(0,d.jsx)("header",{className:"title--AMToU",children:e.S.title}),(0,d.jsx)("p",{className:"description--VQ70I",children:e.S.description}),(0,d.jsxs)("footer",{className:"footer--MkSMP",children:[(0,d.jsx)(np.z,{size:"large",type:"gray",onClick:e.props.onDisposed,children:e.S.cancel}),(0,d.jsx)(np.z,{size:"large",type:"primary",loading:e.loading,onClick:()=>{e.onResubscribe()},children:e.S.resubscribe})]})]})),rD=eo.t.createOpener(rA);var rN=i(18918),rj=i(98581);class rE extends M.PN{get S(){return S.S.Global.modules.MainWindow.NewTeamDialog}onViewCreate(){}onViewDestroy(){}async switchWorkspace(){this.props.onDisposed();let e=this.props.team.teamId,t=this.props.team.userId,i=(0,rj.v)({insertTarget:this.props.insertTarget,teamId:e,userId:t});await rN.teamController.selectWorkspace({teamId:e,userId:t}),setTimeout(()=>{null==i||i.dispose()},2e3)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],rE.prototype,"someState",void 0),(0,E.gn)([M.Fl],rE.prototype,"S",null);let rM=M._Y.createComponent("NewTeamDialog",rE,e=>{let{onDisposed:t,team:i}=e.props;return(0,d.jsxs)(nd.u,{width:390,className:"new-team-dialog--Q2La1",onDispose:t,children:[(0,d.jsx)("div",{className:"dialog-title--OWhEv",children:(0,d.jsx)(aW.Z,{S:e.S.dialogTitle,data:{teamName:i.workspaceName},components:{b:e=>(0,d.jsx)("strong",{children:e})}})}),(0,d.jsx)("p",{className:"desc--fTxCF",children:e.S.dialogDesc}),(0,d.jsxs)("div",{className:"footer--OqV1o",children:[(0,d.jsx)(np.z,{size:"medium",onClick:()=>{t()},children:e.S.cancel}),(0,d.jsx)(np.z,{type:"primary",loading:rN.teamController.switchingWorkspace,size:"medium",onClick:()=>{e.switchWorkspace()},children:e.S.confirmBtnText})]})]})}),rI=eo.t.createOpener(rM);var rR={rewardExpireReminderDialog:"reward-expire-reminder-dialog--vymxF",header:"header--dL2Vd",title:"title--rQrqx",main:"main--lXmJ3",content:"content--c4u3q",footer:"footer--ltQOk"};class rF extends M.PN{get S(){return S.S.Global.modules.MainWindow.RewardExpireReminderDialog}async onViewCreate(){k.M.createUserBehaviorEvent({eventName:"reward_popup_show",extData:{page:"reward_expire_reminder_dialog",remainDays:this.props.remainDays}})}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],rF.prototype,"someState",void 0),(0,E.gn)([I.Fl],rF.prototype,"S",null);let rL=M._Y.createComponent("RewardExpireReminderDialog",rF,e=>(0,d.jsxs)(nd.u,{className:rR.rewardExpireReminderDialog,onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,width:350,closeOnMaskClick:!1,children:[(0,d.jsx)("header",{className:rR.header,children:(0,d.jsx)("h2",{className:rR.title,children:1===e.props.remainDays?e.S.title1:(0,S.x)(e.S.title,{days:e.props.remainDays})})}),(0,d.jsx)("main",{className:rR.main,children:(0,d.jsx)("p",{className:rR.content,children:e.S.renewToContinue})}),(0,d.jsx)("footer",{className:rR.footer,children:(0,d.jsx)(np.z,{type:"primary",className:rR.button,size:"large",onClick:()=>{k.M.createUserBehaviorEvent({eventName:"reward_popup_click",extData:{page:"reward_expire_reminder_dialog",button:"renew_now",remainDays:e.props.remainDays}}),rT.u.gotoPricingForSubscribe({source:"reward_expire_reminder_dialog"})},children:e.S.renewNow})})]})),rB=eo.t.createOpener(rL,{singleton:!0});var rO=i(65324),rG=i(59111),rV={versionUpgradeDialog:"version-upgrade-dialog--mJUeJ",container:"container--xbtUt",banner:"banner--cGB72",videoWrapper:"video-wrapper--FAfCt",newInVersion:"new-in-version--12VFZ",content:"content--nX2s3",title:"title--prpL2",features:"features--I9QdP",featureTitle:"feature-title--OcYRn",footer:"footer--LKIRU",close:"close--__VU9"};class rz extends M.PN{get S(){return S.S.Global.components.VersionUpgradeDialog}get versionInfo(){return ng.A.upgradeVersion}onBeforeMount(){var e;(null===(e=this.versionInfo)||void 0===e?void 0:e.showReaction)&&k.M.getNewVersionReactionData().then(e=>{let{data:t}=e;(t.counts||[]).forEach(e=>{let{count:t,emotion:i}=e,n=this.reactions.find(e=>e.value===i);n&&(n.count=t||0)})})}onViewCreate(){this.trackEvent("show")}trackEvent(e){var t;k.M.createUserBehaviorEvent({eventName:"version_upgrade_dialog_".concat(e),extData:{version:null===(t=ng.A.upgradeVersion)||void 0===t?void 0:t.version}})}onViewDestroy(){}toggleReaction(e){let t=this.reactions.find(t=>t.value===e);t&&("add"===t.action?(t.count-=1,t.action=void 0):(t.count+=1,t.action="add","confused"===t.value&&al.M.success((0,d.jsx)(aW.Z,{S:this.S.confusedToast,components:{link:e=>(0,d.jsx)("a",{href:m.m.getFeedbackPageUrl({issueType:"feature_request"}),target:"_blank",rel:"noreferrer",children:e})}}))),k.M.postNewVersionReactionData({action:"add"===t.action?"add":"remove",emotion:e}),k.M.createUserBehaviorEvent({eventName:"version_upgrade_dialog_reaction_click",extData:{emotion:e,action:"add"===t.action?1:0}}))}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"isScrolledBottom",!1),(0,h._)(this,"reactions",[{icon:"❤️",value:"like",count:0},{icon:"\uD83D\uDC4D",value:"good",count:0},{icon:"\uD83D\uDE04",value:"haha",count:0},{icon:"\uD83C\uDF89",value:"congratulation",count:0},{icon:"\uD83D\uDE15",value:"confused",count:0}])}}(0,E.gn)([M.SB],rz.prototype,"isScrolledBottom",void 0),(0,E.gn)([I.Fl],rz.prototype,"S",null),(0,E.gn)([I.Fl],rz.prototype,"versionInfo",null),(0,E.gn)([M.SB],rz.prototype,"reactions",void 0);class rU extends M.PN{onViewCreate(){}onViewDestroy(){}handlePlay(e){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"videoDialogVisible",!1),(0,h._)(this,"loaded",!1)}}(0,E.gn)([M.SB],rU.prototype,"videoDialogVisible",void 0),(0,E.gn)([M.SB],rU.prototype,"loaded",void 0);class rW extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"videoRef",null)}}(0,E.gn)([M.SB],rW.prototype,"videoRef",void 0);let rH=M._Y.createComponent("VideoDialog",rW,e=>e.props.open?(0,d.jsx)("div",{className:"video-dialog--nJ2XA",style:{display:e.props.open?"block":"none"},onClick:()=>{var t,i,n;null===(t=(i=e.props).onClose)||void 0===t||t.call(i),null===(n=e.videoRef)||void 0===n||n.pause()},children:(0,d.jsxs)("div",{className:"container--BHBtR",onClick:e=>{e.stopPropagation()},children:[(0,d.jsx)("div",{className:"close--iqhX0",onClick:()=>{var t,i,n;null===(t=(i=e.props).onClose)||void 0===t||t.call(i),null===(n=e.videoRef)||void 0===n||n.pause()},children:(0,d.jsx)(en.J,{name:"close",size:24})}),(0,d.jsx)("div",{className:"content--mmCJd",children:(0,d.jsx)("video",{ref:t=>{e.videoRef||(e.videoRef=t)},autoPlay:!0,className:"video--UTBP5",controls:!0,src:e.props.videoUrl})})]})}):null),rq=M._Y.createComponent("VideoPreview",rU,e=>{let{url:t,image:i}=e.props;return(0,d.jsxs)("div",{className:"video-preview--fVt7f",onClick:()=>{e.videoDialogVisible=!0},children:[(0,d.jsx)(a1.E,{skeleton:!0,className:"img--Ilj37",src:i,alt:""}),(0,d.jsx)(rH,{videoUrl:t,open:e.videoDialogVisible,onClose:()=>{e.videoDialogVisible=!1}})]})}),rQ=M._Y.createComponent("VersionUpgradeDialog",rz,e=>{var t,i,n,a,r,s,o,l,c,h,u,p,g,f,v,y,x,k,b,C,w;let S=null===(t=e.versionInfo)||void 0===t?void 0:t.dynamicActionGuideVideo;return(0,d.jsxs)(nd.u,{className:rV.versionUpgradeDialog,onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,width:360,closeOnMaskClick:!1,closeIconVisible:!1,children:[(0,d.jsx)("div",{className:rV.close,onClick:()=>{e.props.onDisposed(),e.trackEvent("close")},children:(0,d.jsx)(en.J,{name:"upgradeClose",size:15})}),(0,d.jsxs)("div",{className:rV.container,children:[S?(0,d.jsx)("div",{className:rV.videoWrapper,children:(0,d.jsx)(rq,{url:S,image:null===(n=e.versionInfo)||void 0===n?void 0:n.bannerImgUrl})}):(0,d.jsx)(a1.E,{skeleton:!0,className:rV.banner,src:null===(i=e.versionInfo)||void 0===i?void 0:i.bannerImgUrl,alt:""}),(0,d.jsx)("div",{style:{insetInlineStart:12},className:rV.newInVersion,children:(null===(a=e.versionInfo)||void 0===a?void 0:a.titleDesc)?e.versionInfo.titleDesc:"V".concat((null===(r=e.versionInfo)||void 0===r?void 0:r.version)||rO.Cb.getVersion())}),(0,d.jsxs)("div",{className:rV.content,children:[(0,d.jsx)("div",{className:rV.title,children:null===(s=e.versionInfo)||void 0===s?void 0:s.title}),(0,d.jsx)("ul",{className:rV.features,children:null===(o=e.versionInfo)||void 0===o?void 0:o.features.map(e=>(0,d.jsx)("li",{className:rV.feature,children:(0,d.jsx)(aW.Z,{S:e,components:{b:e=>(0,d.jsx)("span",{className:rV.featureTitle,children:e})}})},e))}),n1.userController.isFreeUser&&(null===(l=e.versionInfo)||void 0===l?void 0:l.primaryButtonLink)&&(0,d.jsx)("div",{style:{width:"100%"},children:(0,d.jsxs)(np.z,{size:"large",type:"text",color:"primary",style:{width:"fit-content",background:"transparent"},onClick:()=>{var t;let i=null===(t=e.versionInfo)||void 0===t?void 0:t.primaryButtonLink;window.open(i,"_blank"),e.trackEvent("primary_button_click"),e.props.onDisposed()},children:[null===(c=e.versionInfo)||void 0===c?void 0:c.primaryButtonText,(0,d.jsx)(rG.L,{size:20,color:"var(--theme-text-brand)"})]})})]}),(0,d.jsxs)("footer",{className:es()(rV.footer,{[rV.blurHidden]:e.isScrolledBottom}),children:[!n1.userController.isFreeUser&&(null===(h=e.versionInfo)||void 0===h?void 0:h.primaryButtonLink)&&(0,d.jsx)(np.z,{size:"large",color:"primary",onClick:()=>{var t;let i=null===(t=e.versionInfo)||void 0===t?void 0:t.primaryButtonLink;window.open(i,"_blank"),e.trackEvent("primary_button_click"),e.props.onDisposed()},children:null===(u=e.versionInfo)||void 0===u?void 0:u.primaryButtonText}),n1.userController.isFreeUser&&(0,d.jsx)(np.z,{size:"large",color:"primary",onClick:()=>{n1.userController.upgrade("version_upgrade_dialog"),e.trackEvent("payment"),e.props.onDisposed()},children:e.S.upgradeNow}),(null===(p=e.versionInfo)||void 0===p?void 0:p.secondaryButtonLink)&&(0,d.jsx)(np.z,{size:"large",type:n1.userController.isFreeUser||(null===(g=e.versionInfo)||void 0===g?void 0:g.primaryButtonLink)?"outline":"default",color:n1.userController.isFreeUser||(null===(f=e.versionInfo)||void 0===f?void 0:f.primaryButtonLink)?"secondary":"primary",onClick:()=>{var t;window.open(null===(t=e.versionInfo)||void 0===t?void 0:t.secondaryButtonLink,"_blank"),e.trackEvent("secondary_button_click")},children:null===(v=e.versionInfo)||void 0===v?void 0:v.secondaryButtonText}),(null===(y=e.versionInfo)||void 0===y?void 0:y.buttonLink)&&(0,d.jsx)(np.z,{size:"large",type:n1.userController.isFreeUser||(null===(x=e.versionInfo)||void 0===x?void 0:x.primaryButtonLink)||(null===(k=e.versionInfo)||void 0===k?void 0:k.secondaryButtonLink)?"outline":"default",color:n1.userController.isFreeUser||(null===(b=e.versionInfo)||void 0===b?void 0:b.primaryButtonLink)||(null===(C=e.versionInfo)||void 0===C?void 0:C.secondaryButtonLink)?"secondary":"primary",onClick:()=>{var t;window.open(null===(t=e.versionInfo)||void 0===t?void 0:t.buttonLink,"_blank"),e.trackEvent("click")},children:(null===(w=e.versionInfo)||void 0===w?void 0:w.buttonText)||e.S.learnMore}),(0,d.jsx)(np.z,{type:"text",color:"primary",style:{width:"fit-content",textAlign:"center",background:"transparent"},onClick:()=>{window.open("".concat(m.m.getStoreUrl(),"/reviews"),"_blank"),e.props.onDisposed()},children:e.S.rateUs5})]})]})]})}),rY=eo.t.createOpener(rQ);var rK={videoDisplayDialog:"video-display-dialog--tYy61",content:"content--rWZG7",imageWrapper:"image-wrapper--wurJb",inner:"inner--rIEXK",image:"image--M4Ze_",msg:"msg--LCVYu",title:"title--kyGsU",newTag:"new-tag--NVzij",desc:"desc--cLkyK",footer:"footer--RDFY5",noMore:"no-more--T_kCB",submit:"submit--v1Cjd",cancel:"cancel--kDxS_"};class rX extends M.PN{get S(){return S.S.Global.modules.MainWindow.VideoDisplayDialog}async onViewCreate(){this.setFlag()}async setFlag(){let e=await aD.ll.getUiFlag("showedVideoFeatures")||[];this.props.config.id&&aD.ll.setUiFlag("showedVideoFeatures",[...e,this.props.config.id])}onViewDestroy(){}handleClose(){nM.E.videoDisplayDialogController.close()}handleStart(){let{createInfo:e,routerKey:t}=this.props.config;a6.J.onTabChange("video"),a5.imageController.goto(t,e),nM.E.videoDisplayDialogController.close()}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],rX.prototype,"someState",void 0),(0,E.gn)([M.Fl],rX.prototype,"S",null);var rZ={whiteCheckbox:"white-checkbox--Eh1sf",icon:"icon--MNS6p"};class rJ extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],rJ.prototype,"someState",void 0);let r$=M._Y.createComponent("WhiteCheckbox",rJ,e=>{let{checked:t,onChange:i,onClick:n,size:a=24,label:r,className:s}=e.props;return(0,d.jsxs)("div",{className:es()(rZ.whiteCheckbox,s),onClick:e=>{null==n||n(e),null==i||i(!t)},children:[t?(0,d.jsx)(re,{color:"currentColor",size:a,className:rZ.icon}):(0,d.jsx)(rn,{color:"currentColor",size:a,className:rZ.icon}),r]})}),r0=M._Y.createComponent("VideoDisplayDialog",rX,e=>{if(!nM.E.videoDisplayDialogController.visible)return null;let{title:t,subTitle:i,banner:n,bgDarkColor:a,bgColor:r}=e.props.config;return(0,d.jsxs)(nd.u,{className:rK.videoDisplayDialog,onDispose:()=>{var t,i;null===(t=(i=e.props).onClose)||void 0===t||t.call(i),e.props.onDisposed()},fixed:"dialogRoot"===e.props.insertTarget,closeOnMaskClick:!1,width:360,closeIconVisible:!1,style:{backgroundColor:a2.C.isDark?a:r},children:[(0,d.jsx)("div",{className:rK.content,children:(0,d.jsx)("div",{className:rK.imageWrapper,children:(0,d.jsxs)("div",{className:rK.inner,children:[(0,d.jsx)(a1.E,{skeleton:!0,src:n,className:rK.image,alt:""}),(0,d.jsxs)("div",{className:rK.msg,children:[(0,d.jsxs)("div",{className:rK.title,children:[t,(0,d.jsx)("div",{className:rK.newTag,children:"NEW"})]}),(0,d.jsx)("div",{className:rK.desc,children:i})]})]})})}),(0,d.jsxs)("div",{className:rK.footer,children:[(0,d.jsx)("div",{className:rK.noMore,children:(0,d.jsx)(r$,{className:rK.checkbox,checked:ng.A.noMoreShowedVideoDialog,size:16,label:e.S.noMore,onClick:e=>{e.stopPropagation(),aD.ll.setUiFlag("noMoreShowedVideoDialog",!ng.A.noMoreShowedVideoDialog)}})}),(0,d.jsx)(np.z,{type:"lightGray",className:rK.submit,onClick:()=>{e.handleStart()},size:"overMedium",children:e.S.start}),(0,d.jsx)(np.z,{onClick:()=>{e.handleClose()},className:rK.cancel,type:"text-gray",size:"overMedium",children:e.S.cancel})]})]})}),r1=eo.t.createOpener(r0,{singleton:!0});var r2=i(37819),r3=i(30506),r5=i(75372),r6=i(20995),r8=i(69645),r7=i(21609),r4=i(5336),r9={hotkeyTitle:"hotkeyTitle--pgcLB",hotkey:"hotkey--f5ceS"};class se extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],se.prototype,"someState",void 0);let st=M._Y.createComponent("HotkeyTooltip",se,e=>{let{children:t,title:i,hotkey:n,...a}=e.props;return(0,d.jsx)(nu.u,{title:(0,d.jsx)(si,{title:i,hotkey:n}),...a,children:t})}),si=(0,i6.Pi)(function(e){let{title:t,hotkey:i}=e;return(0,d.jsxs)("div",{className:r9.hotkeyTitle,children:[(0,d.jsx)("span",{children:t}),i&&(0,d.jsx)("span",{className:r9.hotkey,children:_.t.prettifyHotkey(i)})]})});var sn=i(47190),sa=i(77176),sr=i(97562),ss=i(97953),so=i(54493),sl={contentBox:"content-box--ERZlf",editBox:"edit-box--JrgTH",input:"input--J4Nnu",toolbar:"toolbar--F0tEM",iconBtn:"icon-btn--k11Zv"};class sc extends M.PN{get S(){return S.S.Global.modules.LiteWindow.OperationPanel}onViewCreate(){}onViewDestroy(){var e,t;null===(e=(t=this.props).onCancel)||void 0===e||e.call(t)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"content",""),(0,h._)(this,"focusedFlag",!1)}}(0,E.gn)([M.SB],sc.prototype,"content",void 0),(0,E.gn)([I.Fl],sc.prototype,"S",null);let sh=M._Y.createComponent("ContentBox",sc,e=>{let{isEdit:t=!1,content:i,onCancel:n,onSave:a,style:r,className:s,toolbarClassName:o}=e.props;return(0,eh.useEffect)(()=>{e.content=t?i:""},[i,t,e]),(0,d.jsx)("div",{className:es()(sl.contentBox,s),style:r,children:t?(0,d.jsxs)("div",{className:sl.editBox,children:[(0,d.jsx)(so.g,{className:sl.input,getTextAreaRef:t=>{e.focusedFlag||(null==t||t.focus({cursor:"end"}),e.focusedFlag=!0)},autoFocus:!0,autoSize:!0,value:e.content,onChange:t=>{e.content=t.target.value},onKeyDown:t=>{_.t.isHotkey(t,["esc"])&&(null==n||n(),t.stopPropagation(),t.preventDefault()),_.t.isHotkey(t,["enter"])&&(null==a||a(e.content),t.stopPropagation(),t.preventDefault()),t.stopPropagation()}}),(0,d.jsxs)("div",{className:es()(sl.toolbar,o),children:[(0,d.jsx)(nu.u,{title:e.S.cancel,children:(0,d.jsx)("div",{className:sl.iconBtn,onClick:n,children:(0,d.jsx)(en.J,{name:"monicaClose",size:16,color:"currentColor"})})}),(0,d.jsx)(nu.u,{title:e.S.save,children:(0,d.jsx)("div",{className:sl.iconBtn,onClick:()=>{null==a||a(e.content)},children:(0,d.jsx)(en.J,{name:"monicaSuccess",size:16})})})]})]}):(0,d.jsx)(ak.U,{loading:e.props.loading,children:i})})});class sd extends M.PN{get S(){return S.S.Global.modules.LiteWindow.OperationPanel.Gpt4Ads}get disabled(){return g.o.isDesktop||!n1.userController.isFreeUser}onViewCreate(){this.disabled||k.M.createUserBehaviorEvent({eventName:"quick_active_gpt4_ads_show"})}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}(0,E.gn)([I.Fl],sd.prototype,"S",null),(0,E.gn)([I.Fl],sd.prototype,"disabled",null);let su=M._Y.createComponent("Gpt4Ads",sd,e=>{let{source:t}=e.props;return e.disabled?null:(0,d.jsx)("div",{className:"gpt4-ads--_Kevs",children:(0,d.jsxs)("div",{className:"gpt4--lNKrA",onClick:()=>{n5.W.createUserBehaviorEvent({eventName:"quick_active_gpt4_ads_click"});let{isEnough:e,handleCreditsNotEnough:i}=nW.K.checkCredits({module:"genius_bot",source:t,featureName:"quick_action_translate"===t?"quickActionTranslate":"default"});if(!e){i();return}},children:[(0,d.jsx)(en.J,{name:"askGpt4",size:16}),(0,d.jsx)("span",{children:e.S.askGpt4})]})})});var sp={quickPanelContentWrapper:"quick-panel-content-wrapper--ozZyy",quickPanelContent:"quick-panel-content--YXqQ_",errorText:"error-text--g3iPV",contentBox:"content-box--IvwSr",toolbar:"toolbar--saqHb"};class sg extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}let sm=M._Y.createComponent("QuickPanelContent",sg,e=>{let{output:t,source:i,content:n,isEditing:a,className:r,disabledAd:s}=e.props,{finished:o}=t;return(0,d.jsxs)("div",{className:es()(sp.quickPanelContentWrapper,r),children:[(0,d.jsx)(sr.x,{children:(0,d.jsx)("div",{className:sp.quickPanelContent,children:(0,d.jsx)(sf,{content:n,output:t,source:i,isEditing:a,vm:e})})}),o&&!s&&(0,d.jsx)(su,{source:i})]})}),sf=(0,i6.Pi)(function(e){let{content:t,output:i,source:n,isEditing:a,vm:r}=e,{loading:s,error:o,finished:l}=i;return s?(0,d.jsx)(av.g,{type:"geist",styles:{display:"inline-block"}}):o?(0,d.jsx)("div",{className:sp.errorText,children:(0,d.jsx)(ss.y,{error:o,source:n,className:sp.errorText})}):"string"==typeof t?(0,d.jsx)(sh,{loading:!l,className:sp.contentBox,toolbarClassName:sp.toolbar,isEdit:a,content:t,onCancel:()=>{var e,t;null===(e=(t=r.props).onResultEditCancel)||void 0===e||e.call(t)},onSave:e=>{var t,i;null===(t=(i=r.props).onResultEditSave)||void 0===t||t.call(i,e)}}):t});var sv=i(51782),sy={hotkeyTitle:"hotkeyTitle--cCEH9",hotkey:"hotkey--FHbDm"};class sx extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],sx.prototype,"someState",void 0);let sk=M._Y.createComponent("HotkeyTooltip",sx,e=>{let{children:t,title:i,hotkey:n,...a}=e.props;return(0,d.jsx)(nu.u,{title:(0,d.jsx)(sb,{title:i,hotkey:n}),...a,children:t})}),sb=(0,i6.Pi)(function(e){let{title:t,hotkey:i}=e;return(0,d.jsxs)("div",{className:sy.hotkeyTitle,children:[(0,d.jsx)("span",{children:t}),i&&(0,d.jsx)("span",{className:sy.hotkey,children:_.t.prettifyHotkey(i)})]})});var sC={quickPanelToolActionList:"quick-panel-tool-action-list--TDeeR",iconBtn:"icon-btn--tqQKY",dropdownMenuItem:"dropdown-menu-item--Ko2gw"},sw=i(2199);class sS extends M.PN{get S(){return S.S.Global.modules.QuickPanel.Components.QuickPanelToolbar}get speaking(){return sw._.speakingMsgId===this.content}get content(){return this.props.content}onCopyClick(){var e,t;this.preCopied=!0,m.m.copyToClipboard(this.content),setTimeout(()=>{this.preCopied=!1},1e3),null===(e=(t=this.props).onCopyClick)||void 0===e||e.call(t)}onRefreshClick(){var e,t;null===(e=(t=this.props).onRefreshClick)||void 0===e||e.call(t)}async onSaveToMemoClick(){var e,t;await (null===(e=(t=this.props).onSaveToMemoClick)||void 0===e?void 0:e.call(t))}onSpeakClick(){sw._.speakingMsgId===this.content?sw._.cancelSpeak():sw._.speakMessage({id:this.content,text:this.content})}onEditClick(){var e,t;null===(e=(t=this.props).onEditClick)||void 0===e||e.call(t)}registerShortcuts(){this.listenerManager.addDocumentEventListener("keydown",e=>{if(_.t.isHotkey(e,["mod+c"])){let t=window.getSelection();t&&t.toString().trim().length>0||(this.onCopyClick(),e.preventDefault(),e.stopPropagation())}})}onViewCreate(){this.registerShortcuts()}onViewDestroy(){this.listenerManager.removeAll()}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"listenerManager",new n8.M),(0,h._)(this,"preCopied",!1)}}(0,E.gn)([M.SB],sS.prototype,"preCopied",void 0),(0,E.gn)([M.Fl],sS.prototype,"S",null),(0,E.gn)([M.Fl],sS.prototype,"speaking",null);let s_=M._Y.createComponent("QuickPanelToolActionList",sS,e=>(0,d.jsxs)("div",{className:sC.quickPanelToolActionList,children:[(0,d.jsx)(sk,{open:e.preCopied,title:e.preCopied?e.S.copied:e.S.copy,hotkey:"mod+c",children:(0,d.jsx)("div",{className:sC.iconBtn,onClick:()=>{e.onCopyClick()},children:e.preCopied?(0,d.jsx)(en.J,{name:"monicaSuccess",size:16,color:"currentColor",style:{color:"var(--theme-function-success)"}}):(0,d.jsx)(en.J,{name:"monicaCopy",size:18,color:"currentColor"})})}),(0,d.jsx)(nu.u,{title:e.S.generateAgain,children:(0,d.jsx)("div",{className:sC.iconBtn,onClick:()=>{e.onRefreshClick()},children:(0,d.jsx)(en.J,{name:"monicaRefresh",size:16,color:"currentColor"})})}),(0,d.jsx)(sv.f,{className:sC.iconBtn,onClick:async()=>{await e.onSaveToMemoClick()}}),(0,d.jsx)(r5.x,{placement:"top",closeAfterContentClick:!0,content:(0,d.jsxs)(r6.h,{children:[(0,d.jsx)(r8.X,{className:sC.dropdownMenuItem,icon:e.speaking?"monicaSoundOff":"monicaSound",isActive:e.speaking,content:e.speaking?e.S.stop:e.S.speak,onClick:t=>{t.stopPropagation(),e.onSpeakClick()}}),(0,d.jsx)(r8.X,{className:sC.dropdownMenuItem,icon:"monicaEditLine",content:e.S.edit,onClick:()=>{e.onEditClick()}})]}),children:(0,d.jsx)("div",{className:sC.iconBtn,children:(0,d.jsx)(en.J,{name:"sidebarMoreFill",size:16,color:"currentColor"})})})]}));var sT=i(94001),sP=i(93270),sA={src:"https://assets.monica.im/home-web/_next/static/media/singleMonica.ac9b4bd3.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAM1BMVEVYLOlaLujCr/+2urpkSNFfN+lwS+////9MaXFrUOSLkpPEsv/w6v2tk//j4+iZef+Uc/9g979wAAAADHRSTlNuuP38B7W1+wAJ/P03dZ7aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOklEQVR4nEXLOQ7AIAwAwcX4AGIM/39tqij1aBiT1pgDtStyTWFHRGzw7Fk9Hc9VtdJ/UjuPHFO+/gI+QgHAXSHcKwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},sD={gpt4Dropdown:"gpt4-dropdown--kysSK",arrow:"arrow--N1_Gi",logo:"logo--Sj087",menuItem:"menu-item--IgIl0"};class sN extends M.PN{get S(){return S.S.Global.modules.LiteWindow.QuickAction.Gpt4Switch}onGpt4Change(e){var t,i;let{quotaCheck:n=!0}=this.props;if(n&&e){let{isEnough:e,handleCreditsNotEnough:t}=nW.K.checkCredits({module:"genius_bot",source:this.props.source,featureName:"quick_action_translate"===this.props.source?"quickActionTranslate":"default"});if(!e){t();return}}null===(t=(i=this.props).onChange)||void 0===t||t.call(i,e)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"gpt4PopupVisible",!1)}}(0,E.gn)([M.SB],sN.prototype,"gpt4PopupVisible",void 0),(0,E.gn)([I.Fl],sN.prototype,"S",null);let sj=M._Y.createComponent("Gpt4Switch",sN,e=>{let t=e.props.placement||"bottomRight";return(0,d.jsx)(r5.x,{trigger:"hover",open:e.gpt4PopupVisible,onOpenChange:t=>{e.gpt4PopupVisible=t},closeAfterContentClick:!0,content:(0,d.jsx)(sE,{vm:e}),placement:t,children:(0,d.jsxs)("div",{className:sD.gpt4Dropdown,children:[e.props.enabled?(0,d.jsx)(a1.E,{src:(0,ax.Q)(sT.Z),className:sD.logo}):(0,d.jsx)(a1.E,{src:(0,ax.Q)(sA),className:sD.logo}),(0,d.jsx)(en.J,{name:"monicaRightArrow",size:10,color:"currentColor",className:sD.arrow,style:{transform:e.gpt4PopupVisible?"rotate(-90deg)":"rotate(90deg)"}})]})})}),sE=(0,i6.Pi)(function(e){let{vm:t}=e;return(0,d.jsxs)(r6.h,{maxWidth:"max-content",style:{minWidth:140},children:[(0,d.jsx)(r8.X,{className:sD.menuItem,onClick:()=>{t.onGpt4Change(!1)},content:t.S.default,icon:(0,d.jsx)(a1.E,{src:(0,ax.Q)(sP.Z),className:sD.logo})}),(0,d.jsx)(r8.X,{className:sD.menuItem,content:t.S.gpt4o,icon:(0,d.jsx)(a1.E,{src:(0,ax.Q)(sT.Z),className:sD.logo}),onClick:()=>{t.onGpt4Change(!0)}})]})});var sM=i(92880);class sI extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}let sR=M._Y.createComponent("QuickPanelScrollContainer",sI,e=>{let{className:t,children:i}=e.props;return(0,d.jsx)("div",{className:es()("quick-panel-scroll-container--e4D5b",{"hide-scroll-bar--rNVv7":e.props.controller.activeOutput&&!e.props.controller.activeOutput.finished},t),ref:t=>{e.props.controller.scrollContainer=t},"data-draggable":"false",children:i})});var sF=i(48994),sL=i(19221);class sB extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var sO=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Line/&#230;&#150;&#185;&#229;&#144;&#145;/&#231;&#174;&#173;&#229;&#164;&#180;-&#229;&#183;&#166;\\">\\n<path id=\\"Vector (Stroke)\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M172.034 231.108C175.96 227.223 175.993 220.892 172.108 216.966L91.0294 135.034C87.1733 131.137 87.1733 124.863 91.0294 120.966L172.108 39.034C175.993 35.1083 175.96 28.7768 172.034 24.892C168.108 21.0073 161.777 21.0404 157.892 24.966L76.8134 106.898C65.2453 118.588 65.2453 137.412 76.8134 149.102L157.892 231.034C161.777 234.96 168.108 234.993 172.034 231.108Z\\" fill=\\"black\\"/>\\n</g>\\n\\n","viewBox":"0 0 256 256"}');let sG=M._Y.createComponent("ArrowLeftIcon",sB,e=>(0,d.jsx)(a7.s,{...e.props,name:"ArrowLeftIcon",iconData:sO}));var sV=i(37231);class sz extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var sU=JSON.parse('{"fill":"none","content":"<path fill=\\"#C0C5CC\\" d=\\"M14.006 3.162 4.157 6.703c-1.504.541-2.256.812-2.282 1.332-.025.52.697.864 2.14 1.55l3.991 1.897c.242.115.363.172.457.264.094.092.153.213.272.453l1.924 3.878c.698 1.408 1.047 2.112 1.564 2.082.516-.03.78-.771 1.307-2.252l3.477-9.753c.721-2.023 1.082-3.034.556-3.558-.525-.524-1.536-.16-3.557.566Z\\" data-follow-fill=\\"#C0C5CC\\"/>","viewBox":"0 0 20 20"}');let sW=M._Y.createComponent("ChatInputSendIcon",sz,e=>(0,d.jsx)(a7.s,{...e.props,name:"ChatInputSendIcon",iconData:sU}));class sH extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var sq=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Fill/&#229;&#175;&#188;&#232;&#136;&#170;/chat-&#233;&#128;&#137;&#228;&#184;&#173;-&#229;&#183;&#166;\\">\\n<path id=\\"Subtract\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8.03125 1.375C4.3551 1.375 1.375 4.3551 1.375 8.03125C1.375 11.7074 4.3551 14.6875 8.03125 14.6875H10.25C12.7008 14.6875 14.6875 12.7008 14.6875 10.25V8.03125C14.6875 4.3551 11.7074 1.375 8.03125 1.375ZM4.375 5C3.89175 5 3.5 5.39175 3.5 5.875V7.625C3.5 8.10825 3.89175 8.5 4.375 8.5C4.85825 8.5 5.25 8.10825 5.25 7.625V5.875C5.25 5.39175 4.85825 5 4.375 5ZM8.25 5C7.76675 5 7.375 5.39175 7.375 5.875V7.625C7.375 8.10825 7.76675 8.5 8.25 8.5C8.73325 8.5 9.125 8.10825 9.125 7.625V5.875C9.125 5.39175 8.73325 5 8.25 5Z\\" fill=\\"#6841EA\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let sQ=M._Y.createComponent("FillChatIcon",sH,e=>(0,d.jsx)(a7.s,{...e.props,name:"FillChatIcon",iconData:sq}));class sY extends M.PN{get iconName(){return"mod"===this.props.hotkey?m.m.isMacOS()?"monicaCommand":"monicaCtrl":"enter"===this.props.hotkey?"monicaEnter":"shift"===this.props.hotkey?"monicaShift":this.props.hotkey}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}(0,E.gn)([I.Fl],sY.prototype,"iconName",null);let sK=M._Y.createComponent("HotkeyIcon",sY,e=>{let{className:t,size:i=14}=e.props;return(0,d.jsx)("div",{className:es()("hotkey-icon--fmFdl",t),children:(0,d.jsx)(en.J,{name:e.iconName,size:i,color:"currentColor"})})});var sX=i(96567),sZ=i.n(sX),sJ={suggestionList:"suggestion-list--n8eVO",suggestionItem:"suggestion-item--UVccT",icon:"icon--ilo0C",active:"active--o3LxL",itemContent:"item-content--eGNuu"};class s$ extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"allRenderItems",[])}}let s0=M._Y.createComponent("SuggestionList",s$,e=>{let{suggestionList:t,inputValue:i,activeIndex:n,onSuggestionClick:a}=e.props;return(null==t?void 0:t.length)?(null!==n&&e.allRenderItems[n]&&e.allRenderItems[n].scrollIntoView({block:"nearest",inline:"nearest"}),(0,d.jsx)("div",{className:sJ.suggestionList,children:t.map((t,r)=>(0,d.jsxs)("div",{className:es()(sJ.suggestionItem,{[sJ.active]:r===n}),ref:t=>{t&&(e.allRenderItems[r]=t)},onMouseDown:()=>{null==a||a(t)},children:[t.icon&&(0,d.jsx)("span",{className:sJ.icon,children:(0,d.jsx)(en.J,{name:t.icon,size:16,color:"currentColor"})}),(0,d.jsx)("span",{className:sJ.itemContent,children:(0,d.jsx)(sZ(),{searchWords:[i],textToHighlight:t.name,highlightStyle:{color:"var(--theme-text-brand)",backgroundColor:"transparent"}})})]},t.name))})):null});var s1={quickPanelToolbar:"quick-panel-toolbar--i4F5h",lt:"lt--MSSFp",actionItem:"action-item--oQL8H",inputBox:"input-box--_XJjm",back:"back--FWS0H",input:"input--mEVKJ",send:"send--XmZ4F",disabled:"disabled--OQLrz",continueChat:"continue-chat--VWCDB",logo:"logo--h0iXW",enterIcon:"enter-icon--jjqnt"};class s2 extends M.PN{get S(){return S.S.Global.modules.QuickPanel.Components.QuickPanelToolbar}get disabled(){return!this.inputValue.trim().length}get showInput(){return this.focus||!!this.inputValue.trim().length}get renderSuggestionList(){var e;return(null===(e=this.props.suggestList)||void 0===e?void 0:e.filter(e=>m.m.isLike(e.name,this.inputValue)))||[]}handleBackClick(){this.inputValue="",this.focus=!1}onInputKeydown(e){var t,i,n,a,r;let s=this.inputValue.trim();if(_.t.isHotkey(e,["backspace"])&&!s&&(this.inputValue="",this.focus=!1,e.preventDefault(),e.stopPropagation()),_.t.isHotkey(e,["enter"])){let t=null===(n=this.renderSuggestionList)||void 0===n?void 0:n[this.activeIndex];t?(null===(a=(r=this.props).triggerSuggestion)||void 0===a||a.call(r,t),this.inputValue="",this.focus=!1):s&&this.onSend(),e.stopPropagation()}_.t.isHotkey(e,["esc"])&&(this.inputValue="",this.focus=!1,e.stopPropagation()),_.t.isHotkey(e,["up","ctrl+p"])&&(null===(t=this.renderSuggestionList)||void 0===t?void 0:t.length)&&(this.switchSuggestionListActiveIndex(-1),e.preventDefault(),e.stopPropagation()),_.t.isHotkey(e,["down","ctrl+n","tab"])&&(null===(i=this.renderSuggestionList)||void 0===i?void 0:i.length)&&(this.switchSuggestionListActiveIndex(1),e.preventDefault(),e.stopPropagation())}switchSuggestionListActiveIndex(e){var t,i;if(!(null===(t=this.renderSuggestionList)||void 0===t?void 0:t.length))return;let n=this.activeIndex+e;this.activeIndex=(0,n7.Z)(n,0,(null===(i=this.renderSuggestionList)||void 0===i?void 0:i.length)-1)}onSend(){var e,t;this.disabled||(null===(e=(t=this.props).onSend)||void 0===e||e.call(t,this.inputValue),this.inputValue="",this.focus=!1)}registerShortcuts(){this.listenerManager.addDocumentEventListener("keydown",e=>{_.t.isHotkey(e,["enter"])&&!this.focus&&this.props.output.finished&&(this.focus=!0,e.preventDefault(),e.stopPropagation())})}onViewCreate(){this.registerShortcuts()}onViewDestroy(){this.listenerManager.removeAll()}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"listenerManager",new n8.M),(0,h._)(this,"inputRef",null),(0,h._)(this,"inputValue",""),(0,h._)(this,"focus",!1),(0,h._)(this,"activeIndex",-1)}}(0,E.gn)([M.SB],s2.prototype,"inputValue",void 0),(0,E.gn)([M.SB],s2.prototype,"focus",void 0),(0,E.gn)([M.SB],s2.prototype,"activeIndex",void 0),(0,E.gn)([M.Fl],s2.prototype,"S",null),(0,E.gn)([M.Fl],s2.prototype,"disabled",null),(0,E.gn)([M.Fl],s2.prototype,"showInput",null);let s3=M._Y.createComponent("QuickPanelToolbar",s2,e=>{let{output:t,children:i,className:n,placeholder:a}=e.props;return(0,d.jsxs)("div",{className:es()(s1.quickPanelToolbar,n),"data-draggable":"false",children:[(0,d.jsx)("div",{className:s1.lt,children:(0,d.jsx)(s5,{vm:e,output:t,placeholder:a})}),!e.showInput&&i]})}),s5=(0,i6.Pi)(function(e){let{vm:t,output:i,placeholder:n}=e,{finished:a,error:r}=i,s=n||t.S.askFollowup;if(r)return(0,d.jsxs)(np.z,{type:"text",size:"small",className:s1.actionItem,onClick:()=>{t.props.onRetry()},children:[(0,d.jsx)(sF.D,{size:16,color:"currentColor"}),t.S.retry]});if(!a)return(0,d.jsxs)(np.z,{type:"text",size:"small",className:s1.actionItem,onClick:()=>{t.props.onStop()},children:[(0,d.jsx)(sL.w,{size:16,color:"currentColor"}),t.S.stopIt]});if(t.showInput){var o;return(0,d.jsxs)("div",{className:s1.inputBox,children:[(0,d.jsx)(r5.x,{placement:"topLeft",open:!!(null===(o=t.renderSuggestionList)||void 0===o?void 0:o.length)&&t.focus,content:(0,d.jsx)(s0,{inputValue:t.inputValue,suggestionList:t.renderSuggestionList,activeIndex:t.activeIndex,onSuggestionClick:e=>{var i,n;null===(i=(n=t.props).triggerSuggestion)||void 0===i||i.call(n,e)}}),children:(0,d.jsx)("div",{className:s1.back,onClick:()=>{t.handleBackClick()},children:(0,d.jsx)(sG,{size:16,color:"var(--theme-icon-tertiary)"})})}),(0,d.jsx)(sV.I,{className:s1.input,placeholder:s,autofocus:!0,getInputRef:e=>{t.inputRef=e},value:t.inputValue,onChange:e=>{t.activeIndex=-1,t.inputValue=e},originInputProps:{onKeyDown:e=>{t.onInputKeydown(e)},onFocus:()=>{t.focus=!0},onBlur:()=>{t.focus=!1}}}),(0,d.jsx)(nu.u,{title:t.S.sendTips,children:(0,d.jsx)("div",{className:es()(s1.send,{[s1.disabled]:t.disabled}),onMouseDown:()=>{if(!t.disabled){var e,i;null===(e=(i=t.props).onSend)||void 0===e||e.call(i,t.inputValue)}},children:(0,d.jsx)(sW,{size:20,color:"var(--theme-icon-brand)"})})})]})}return(0,d.jsxs)("div",{className:s1.continueChat,onClick:()=>{t.focus=!0},children:[(0,d.jsx)("div",{className:s1.logo,children:(0,d.jsx)(sQ,{size:16,color:"currentColor"})}),(0,d.jsx)("span",{className:s1.input,children:s}),(0,d.jsx)(sK,{className:s1.enterIcon,hotkey:"enter",size:10})]})});var s6={quickActionPanel:"quick-action-panel--mhaFf",quickActionTitle:"quick-action-title--dphwc",quickActionTitleInner:"quick-action-title-inner--v_1EA",title:"title--uWwSb",backIcon:"back-icon--qBXux",languageSelectLabel:"language-select-label--kIbdp",languageSelect:"language-select--zCnXo"};class s8 extends M.PN{get windowItem(){return nY.E.getWindowItem(this.props.windowId)}get S(){return S.S.Global.modules.QuickPanel.QuickActionPanel}get langSelectEnabled(){let{action:e}=n$.activeOutput||{};return e&&((0,nZ._z)(null==e?void 0:e.systemKey)||m.m.hasLangPlaceholder(null==e?void 0:e.content))}get windowItemPosition(){return n$.windowItemPosition}get windowItemSize(){return n$.windowItemSize}get content(){return n$.getOutputContent()}handleLanguageChange(e){if(!n$.activeOutput)return;let{action:t}=n$.activeOutput;t&&!(0,nZ._z)(null==t?void 0:t.systemKey)&&aD.ll.set("quickActionTranslateLanguage",e),n$.generate({...n$.activeOutput,language:e})}handleGpt4SwitchChange(e){n$.activeOutput&&(n$.generate({...n$.activeOutput,enableAdvancedModel:e}),"quick_ask"!==n$.triggerSource&&aD.ll.set("quickActionGpt4Enabled",e))}handleActionChange(e){n$.activeOutput&&n$.generate({...n$.activeOutput,action:e})}handleMaskClick(){n$.pinned||("quick_ask"===n$.triggerSource?n$.handleDelayCloseQuickAction():n$.handleBackClick())}onViewCreate(){n$.windowId=this.props.windowId,this.registerBackListener()}onViewDestroy(){this.unregisterBackListener()}registerBackListener(){this.listenerManager.addDocumentEventListener("keydown",e=>{_.t.isHotkey(e,["esc"])&&(n$.handleBackClick(),e.preventDefault(),e.stopPropagation())})}unregisterBackListener(){this.listenerManager.removeAll()}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"listenerManager",new n8.M)}}(0,E.gn)([M.Fl],s8.prototype,"windowItem",null),(0,E.gn)([M.Fl],s8.prototype,"S",null),(0,E.gn)([M.Fl],s8.prototype,"langSelectEnabled",null),(0,E.gn)([M.Fl],s8.prototype,"windowItemPosition",null),(0,E.gn)([M.Fl],s8.prototype,"windowItemSize",null);var s7=i(77397);class s4 extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,E.gn)([M.SB],s4.prototype,"someState",void 0);let s9=M._Y.createComponent("Gpt4Logo",s4,e=>(0,d.jsxs)("div",{className:"gpt4-logo--Xv9ev",children:[(0,d.jsx)(en.J,{name:"gpt",className:"icon--KMmyZ",size:16,color:"currentColor"}),(0,d.jsx)("span",{children:"GPT-4o"})]}));var oe={quickActionTranslateCard:"quick-action-translate-card--MkUZv",logoWrapper:"logo-wrapper--LWAZj",hints:"hints--eBmmy",word:"word--fZ6PT",output:"output--Vr05l",inputWrapper:"input-wrapper--SOmvy",input:"input--tZwu_",soundIcon:"sound-icon--H5Vc9",pronounce:"pronounce--C7YKv",slash:"slash--oe7ua",divider:"divider--HhnMf"},ot=JSON.parse('{"v":"5.12.1","fr":60,"ip":0,"op":59,"w":84,"h":84,"nm":"音量 2","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"小","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[0.731]},"o":{"x":[0.296],"y":[0]},"t":1,"s":[100]},{"i":{"x":[0.81],"y":[1]},"o":{"x":[0.429],"y":[-0.259]},"t":21,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":36,"s":[100]},{"t":59,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[56.258,41.965,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.677,1.681],[-1.681,-0.677],[0,-7.852],[6.558,-2.642],[0.677,1.681],[-1.681,0.677],[0,5.625],[3.681,1.483]],"o":[[0.677,-1.681],[6.558,2.642],[0,7.852],[-1.681,0.677],[-0.677,-1.681],[3.681,-1.483],[0,-5.625],[-1.681,-0.677]],"v":[[-7.444,-15.751],[-3.174,-17.569],[7.682,0],[-3.174,17.569],[-7.444,15.751],[-5.626,11.481],[1.12,0],[-5.626,-11.481]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"小","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"大","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[0.852]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[100]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[-12.962]},"t":14.09,"s":[0]},{"i":{"x":[0.667],"y":[12.184]},"o":{"x":[0.333],"y":[0]},"t":26.418,"s":[0]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.333],"y":[-0.12]},"t":37.045,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.163],"y":[0]},"t":48.434,"s":[100]},{"t":59,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[67.875,41.965,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[10.673,4.44],[0.696,-1.673],[-1.673,-0.696],[0,-11.475],[7.758,-3.228],[-0.696,-1.673],[-1.673,0.696],[0,13.579]],"o":[[-1.673,-0.696],[-0.696,1.673],[7.758,3.228],[0,11.475],[-1.673,0.696],[0.696,1.673],[10.673,-4.44],[0,-13.579]],"v":[[-6.66,-30.031],[-10.95,-28.262],[-9.181,-23.972],[4.64,0],[-9.181,23.972],[-10.95,28.262],[-6.66,30.031],[11.203,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"大","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Union","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[24.75,42.355,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[4.05,-4.396],[0,0],[0,0],[0,-5.437],[0,0],[-5.437,0],[0,0],[0,0],[0,5.861]],"o":[[0,-5.977],[0,0],[0,0],[-5.437,0],[0,0],[0,5.437],[0,0],[0,0],[4.125,4.164],[0,0]],"v":[[19.828,-23.31],[8.438,-27.756],[-3.277,-15.038],[-9.984,-15.038],[-19.828,-5.195],[-19.828,6.166],[-9.984,16.01],[-3.206,16.01],[8.603,27.929],[19.828,23.31]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-0.621,0.674],[0,0],[0,0],[0,0],[0.876,0],[0,0],[0,1.812],[0,0],[-1.812,0],[0,0]],"o":[[0,0],[0,0],[0,0],[-0.616,-0.622],[0,0],[-1.812,0],[0,0],[0,-1.812],[0,0],[0.917,0]],"v":[[0.576,-9.534],[13.265,-23.31],[13.265,23.31],[0.493,10.419],[-1.838,9.447],[-9.984,9.447],[-13.265,6.166],[-13.265,-5.195],[-9.984,-8.476],[-1.838,-8.476]],"c":true},"ix":2},"nm":"路径 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"合并路径 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[0.407843137255,0.254901960784,0.917647058824,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"Union","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"ct":1,"bm":0}],"markers":[],"props":{}}'),oi=i(52376),on=i.n(oi);class oa extends M.PN{get S(){return S.S.Global.modules.QuickPanel.Components.QuickActionTranslateCard}get isSpeaking(){return sw._.speakingMsgId===this.props.output.selection}isSpeakingChange(){var e,t;this.isSpeaking?null===(e=this.lottieAnimation)||void 0===e||e.play("speakAnimation"):null===(t=this.lottieAnimation)||void 0===t||t.stop("speakAnimation")}startOrStopSpeak(){if(this.isSpeaking)sw._.cancelSpeak();else{let e=ai.q.getLocaleByComposeLanguage(this.props.output.language||ng.A.finalQuickActionRespondLanguage);sw._.speakMessage({id:this.props.output.selection,text:this.props.output.selection,lang:e||void 0})}}loadAnimation(){this.speakContainerEl&&(this.lottieAnimation=on().loadAnimation({container:this.speakContainerEl,renderer:"svg",loop:!0,autoplay:!1,path:ot,name:"speakAnimation"}))}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"speakContainerEl",null),(0,h._)(this,"lottieAnimation",null)}}(0,E.gn)([M.SB],oa.prototype,"lottieAnimation",void 0),(0,E.gn)([M.Fl],oa.prototype,"S",null),(0,E.gn)([M.Fl],oa.prototype,"isSpeaking",null),(0,E.gn)([(0,M.YP)(e=>[e.isSpeaking])],oa.prototype,"isSpeakingChange",null);let or=M._Y.createComponent("QuickActionTranslateCard",oa,e=>{let{output:t,isEditing:i}=e.props;return(0,d.jsxs)("div",{className:oe.quickActionTranslateCard,children:[(0,d.jsxs)("div",{className:oe.logoWrapper,children:[(null==t?void 0:t.enableAdvancedModel)&&(0,d.jsx)(s9,{}),(0,d.jsx)("div",{className:oe.hints,title:e.S.translateContextHint,children:e.S.translateContextHint})]}),(0,d.jsx)(os,{vm:e,output:t,isEditing:i})]})}),os=(0,i6.Pi)(function(e){let{vm:t,output:i,isEditing:n}=e,{onResultEditCancel:a,onResultEditSave:r}=t.props;return i.type?"sentence"===i.type?(0,d.jsx)(sh,{loading:!i.finished,isEdit:n,content:i.translation,onCancel:()=>{null==a||a()},onSave:r}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:oe.word,children:[(0,d.jsx)("span",{className:oe.output,children:null==i?void 0:i.translation}),(0,d.jsxs)("span",{className:oe.inputWrapper,children:[(0,d.jsx)("span",{className:oe.input,children:null==i?void 0:i.selection}),(0,d.jsx)(s7.j,{onViewCreate:()=>{t.loadAnimation()},onViewDestroy:()=>{var e;null===(e=t.lottieAnimation)||void 0===e||e.destroy()},children:(0,d.jsx)("span",{className:oe.soundIcon,onClick:()=>{t.startOrStopSpeak()},ref:e=>{t.speakContainerEl=e}})})]})]}),(null==i?void 0:i.pronounce)&&(0,d.jsxs)("div",{className:oe.pronounce,children:[(0,d.jsx)("span",{className:oe.slash,children:"/"}),i.pronounce,(0,d.jsx)("span",{className:oe.slash,children:"/"})]}),(0,d.jsx)("div",{className:oe.divider}),(0,d.jsx)(sh,{loading:!i.finished,isEdit:n,content:i.detail,onCancel:()=>{null==a||a()},onSave:r})]}):null}),oo=M._Y.createComponent("QuickActionPanel",s8,e=>{let t=n$.activeOutput;return t?(0,d.jsxs)(sn.y,{className:s6.quickActionPanel,...e.props,onClose:()=>{e.handleMaskClick()},children:[(0,d.jsx)(sa.K,{title:(0,d.jsx)(ol,{vm:e}),pinned:n$.pinned,togglePinned:e=>{n$.togglePinned(e)},onClose:()=>{n$.handleCloseClick()},rightExtra:(0,d.jsx)(oc,{vm:e})}),(0,d.jsxs)(sR,{controller:n$,children:[(0,d.jsx)(sM.d,{content:t.selection,onTextChange:e=>{n$.updateOutput(t.taskId,{selection:e})}}),(0,d.jsx)(sm,{isEditing:n$.isEditing,onResultEditCancel:()=>{n$.isEditing=!1},onResultEditSave:e=>{n$.updateOutput(t.taskId,{content:e}),n$.isEditing=!1},content:"translate"===t.itemType?(0,d.jsx)(or,{isEditing:n$.isEditing,output:t,onResultEditCancel:()=>{n$.isEditing=!1},onResultEditSave:e=>{n$.isEditing=!1,"word"===t.type?n$.updateOutput(t.taskId,{detail:e}):"sentence"===t.type&&n$.updateOutput(t.taskId,{translation:e})}}):t.content,output:t,source:"translate"===t.itemType?"quick_action_translate":"quick_action"})]}),(0,d.jsxs)(s3,{onSend:e=>{n$.continueInChat(e)},output:t,onRetry:()=>{n$.retry()},onStop:()=>{n$.stop()},children:[t.finished&&(0,d.jsx)(s_,{content:e.content,onRefreshClick:()=>{n$.refresh()},onEditClick:()=>{n$.isEditing=!0},onSaveToMemoClick:async()=>{await n$.handleSaveToMemo()}}),n$.pageSize>1&&(0,d.jsx)(r3.b,{className:s6.pagination,page:n$.page,pageSize:n$.pageSize,onPrevClick:()=>{n$.page-=1},onNextClick:()=>{n$.page+=1}}),(0,d.jsx)("div",{className:s6.gpt4Switch,children:(0,d.jsx)(sj,{enabled:t.enableAdvancedModel,onChange:t=>{e.handleGpt4SwitchChange(t)},source:"translate"===t.itemType?"quick_action_translate":"quick_action"})})]})]}):null}),ol=(0,i6.Pi)(function(e){let{vm:t}=e;if(!n$.activeOutput)return null;let{action:i}=n$.activeOutput;return(0,d.jsxs)("div",{className:s6.quickActionTitle,children:[n$.tempHandleBackClick&&(0,d.jsx)(st,{hotkey:"esc",title:t.S.back,trigger:["hover"],children:(0,d.jsx)("div",{"data-draggable":"false",className:s6.backIcon,onClick:()=>{var e;null===(e=n$.tempHandleBackClick)||void 0===e||e.call(n$,t.windowItemPosition),n$.handleCloseClick()},children:(0,d.jsx)(en.J,{name:"arrow",size:16,color:"var(--theme-icon-primary)"})})}),(0,d.jsx)(r5.x,{trigger:"click",placement:"bottomLeft",closeAfterContentClick:!0,content:(0,d.jsx)(r6.h,{children:n$.actionList.map(e=>(0,d.jsx)(r8.X,{isActive:e.id===i.id,icon:e.iconName||nU.jp,content:e.name,onClick:()=>{t.handleActionChange(e)}},e.id))}),children:(0,d.jsxs)("div",{className:s6.quickActionTitleInner,"data-draggable":"false",children:[(0,d.jsx)(en.J,{name:i.iconName||nU.jp,size:16,color:"currentColor",style:{color:"var(--theme-icon-tertiary)"}}),(0,d.jsx)("span",{className:s6.title,children:i.name}),(0,d.jsx)(r7.v,{size:16,color:"var(--theme-icon-tertiary)"})]})})]})}),oc=(0,i6.Pi)(function(e){let{vm:t}=e;if(t.langSelectEnabled){var i;return(0,d.jsx)("div",{"data-draggable":"false",children:(0,d.jsx)(r4.S,{dropdownLabelClassName:s6.languageSelectLabel,popoverWrapperClassName:s6.languageSelect,contentWidth:200,contentHeight:240,scene:"functional",value:(null===(i=n$.activeOutput)||void 0===i?void 0:i.language)||ng.A.finalQuickActionRespondLanguage,onChange:e=>{t.handleLanguageChange(e)},allowAuto:!1,allowFollowSystem:!0})})}return null}),oh=nY.E.createWindow(oo,{singleton:!0});var od={"web-access-switch":"web-access-switch--XdvFP",webAccessSwitch:"web-access-switch--XdvFP","size-default":"size-default--wRsld",sizeDefault:"size-default--wRsld","size-small":"size-small--S9e11",sizeSmall:"size-small--S9e11","web-access-checked":"web-access-checked--japrP",webAccessChecked:"web-access-checked--japrP",icon:"icon--rnEMc"};class ou extends M.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}let op=M._Y.createComponent("WebAccessSwitch",ou,e=>{let{size:t="default",title:i}=e.props,n="default"===t?20:18;return(0,d.jsx)(nu.u,{title:i,children:(0,d.jsx)("div",{className:es()(od.webAccessSwitch,od["size-".concat(t)]),onClick:()=>{let t=!e.props.value;if(t){let{handleCreditsNotEnough:e,isEnough:t}=nW.K.checkCredits({module:"web_search",source:"quick_ask"});if(!t){e();return}}e.props.onChange(t)},children:e.props.value?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(en.J,{name:"earth-2",size:n,color:"currentColor",style:{color:"var(--theme-icon-brand)"}}),(0,d.jsx)("div",{className:od.webAccessChecked,children:(0,d.jsx)(en.J,{name:"circleCheckboxChecked",size:8})})]}):(0,d.jsx)(en.J,{name:"earth-2",size:n,color:"currentColor",style:{color:"var(--theme-icon-secondary)"}})})})});var og={quickAskPanel:"quick-ask-panel--MzQKS",quickAskTitle:"quick-ask-title--U8soS",titleInner:"title-inner--EuJ0V",iconBtn:"icon-btn--mo3UY",title:"title--qjrfN",backIcon:"back-icon--mS5Iz",input:"input--lcdlZ",quickAskInner:"quick-ask-inner--iUAKA",webAccess:"web-access--vGqWL",icon:"icon--ElIvc",webAccessText:"web-access-text--t_LmC"};class om extends M.PN{get S(){return S.S.Global.modules.QuickPanel.QuickAskPanel}get windowItem(){return nY.E.getWindowItem(this.props.windowId)}get windowItemPosition(){return ae.windowItemPosition}get windowItemSize(){return ae.windowItemSize}registerBackListener(){this.listenerManager.addDocumentEventListener("keydown",e=>{_.t.isHotkey(e,["esc"])&&(this.handleBackClick(),e.preventDefault(),e.stopPropagation())})}handleBackClick(){ae.showQuickAsk(),ae.handleCloseClick()}unregisterBackListener(){this.listenerManager.removeAll()}handleTitleInputValueConfirm(){ae.activeOutput&&(this.isTitleEditing=!1,this.isInputChanged&&(this.isInputChanged=!1,ae.generateAskAI({...ae.activeOutput,input:this.titleInputValue})))}handleMaskClick(){ae.pinned||ae.handleDelayCloseQuickAskPanel()}onViewCreate(){ae.windowId=this.props.windowId,this.registerBackListener()}onViewDestroy(){this.unregisterBackListener()}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"listenerManager",new n8.M),(0,h._)(this,"isTitleEditing",!1),(0,h._)(this,"titleInputValue",""),(0,h._)(this,"isInputChanged",!1),(0,h._)(this,"handleGpt4SwitchChange",e=>{if(!ae.activeOutput)return;let t=ae.activeOutput.enableAdvancedModel;ae.updateOutput(ae.activeOutput.taskId,{...ae.activeOutput,enableAdvancedModel:e}),!t&&e&&ae.refreshGenerateAskAI()}),(0,h._)(this,"handleWebAccessSwitchChange",e=>{if(!ae.activeOutput)return;let t=ae.activeOutput.enableWebAccess;ae.updateOutput(ae.activeOutput.taskId,{...ae.activeOutput,enableWebAccess:e}),!t&&e&&ae.refreshGenerateAskAI()})}}(0,E.gn)([M.SB],om.prototype,"isTitleEditing",void 0),(0,E.gn)([M.SB],om.prototype,"titleInputValue",void 0),(0,E.gn)([M.SB],om.prototype,"isInputChanged",void 0),(0,E.gn)([M.Fl],om.prototype,"S",null),(0,E.gn)([M.Fl],om.prototype,"windowItem",null),(0,E.gn)([M.Fl],om.prototype,"windowItemPosition",null),(0,E.gn)([M.Fl],om.prototype,"windowItemSize",null);let of=M._Y.createComponent("QuickAskPanel",om,e=>{let t=ae.activeOutput;return t?(0,d.jsxs)(sn.y,{className:og.quickAskPanel,...e.props,onClose:()=>{e.handleMaskClick()},children:[(0,d.jsx)(sa.K,{title:(0,d.jsx)(ov,{vm:e}),pinned:ae.pinned,togglePinned:e=>{ae.toggleQuickAskPanelPinned(e)},onClose:()=>{ae.handleCloseClick()}}),(0,d.jsxs)(sR,{controller:ae,children:[t.selection&&(0,d.jsx)(sM.d,{content:t.selection,onTextChange:e=>{ae.updateOutput(t.taskId,{...t,selection:e})}}),(0,d.jsxs)("div",{className:og.quickAskInner,children:[t.webAccess&&t.input&&(0,d.jsxs)("div",{className:og.webAccess,children:[(0,d.jsx)(en.J,{name:"earth-2",size:16,className:og.icon,color:"currentColor"}),(0,d.jsx)("span",{className:og.webAccessText,children:(0,S.x)(e.S.searching,{input:t.input})})]}),(0,d.jsx)(sm,{isEditing:ae.isEditing,onResultEditCancel:()=>{ae.isEditing=!1},onResultEditSave:e=>{ae.updateOutput(t.taskId,{content:e}),ae.isEditing=!1},content:t.content,output:t,source:"quick_ask"})]})]}),(0,d.jsxs)(s3,{onSend:e=>{ae.continueInChat(e)},output:t,onRetry:()=>{ae.retryGenerateAskAI()},onStop:()=>{ae.stopGenerateAskAI()},children:[t.finished&&(0,d.jsx)(s_,{content:ae.activeOutput.content,onRefreshClick:()=>{ae.refreshGenerateAskAI()},onEditClick:()=>{ae.isEditing=!0},onSaveToMemoClick:async()=>{await ae.handleSaveToMemo()}}),ae.pageSize>1&&(0,d.jsx)(r3.b,{className:og.pagination,page:ae.page,pageSize:ae.pageSize,onPrevClick:()=>{ae.page-=1},onNextClick:()=>{ae.page+=1}}),(0,d.jsx)(op,{title:e.S.webAccess,value:t.enableWebAccess,onChange:t=>{e.handleWebAccessSwitchChange(t)}}),(0,d.jsx)("div",{className:og.gpt4Switch,children:(0,d.jsx)(sj,{enabled:t.enableAdvancedModel,onChange:t=>{e.handleGpt4SwitchChange(t)},source:"quick_ask"})})]})]}):null}),ov=(0,i6.Pi)(function(e){let{vm:t}=e;return ae.activeOutput?(0,d.jsxs)("div",{className:og.quickAskTitle,children:[(0,d.jsx)(st,{hotkey:"esc",title:t.S.back,trigger:["hover"],children:(0,d.jsx)("div",{"data-draggable":"false",className:og.backIcon,onClick:()=>{t.handleBackClick()},children:(0,d.jsx)(en.J,{name:"arrow",size:16,color:"var(--theme-icon-primary)"})})}),t.isTitleEditing?(0,d.jsx)("input",{"data-draggable":"false",className:og.input,value:t.titleInputValue,placeholder:ae.activeOutput.input,onChange:e=>{t.isInputChanged=!0,t.titleInputValue=e.target.value},onKeyDown:e=>{_.t.isHotkey(e,["enter"])&&(t.handleTitleInputValueConfirm(),e.preventDefault(),e.stopPropagation())},onBlur:()=>{t.handleTitleInputValueConfirm()},autoFocus:!0}):(0,d.jsxs)("div",{className:og.titleInner,children:[(0,d.jsx)("span",{className:og.title,children:ae.activeOutput.input}),(0,d.jsx)("div",{className:og.iconBtn,"data-draggable":"false",onClick:()=>{t.isTitleEditing=!0,t.titleInputValue=ae.activeOutput.input},children:(0,d.jsx)(en.J,{name:"monicaEditLine",size:16,color:"currentColor"})})]})]}):null}),oy=nY.E.createWindow(of,{singleton:!0});class ox extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var ok=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Line/&#230;&#147;&#141;&#228;&#189;&#156;/&#230;&#150;&#135;&#228;&#187;&#182;-&#230;&#155;&#191;&#230;&#141;&#162;\\">\\n<g id=\\"Vector\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.22465 0.875H9.52535C10.0617 0.874993 10.5008 0.874988 10.8578 0.903263C11.2272 0.932518 11.5624 0.994964 11.8765 1.15013C12.3673 1.39256 12.77 1.78123 13.0236 2.2637C13.1871 2.57474 13.2526 2.90681 13.2832 3.26907C13.3125 3.6175 13.3125 4.04521 13.3125 4.5634V5.98196C13.3125 6.32714 13.0327 6.60696 12.6875 6.60696C12.3423 6.60696 12.0625 6.32714 12.0625 5.98196V4.59C12.0625 4.03856 12.062 3.66376 12.0376 3.37405C12.0138 3.09223 11.9708 2.94734 11.9171 2.84526C11.7887 2.60095 11.5819 2.39874 11.323 2.27086C11.2109 2.21553 11.0542 2.17273 10.7591 2.14936C10.4573 2.12546 10.0679 2.125 9.5 2.125H5.25C4.68214 2.125 4.29268 2.12546 3.99088 2.14936C3.69583 2.17273 3.53906 2.21553 3.42704 2.27086C3.16814 2.39874 2.96128 2.60095 2.83287 2.84526C2.77922 2.94734 2.73619 3.09223 2.71243 3.37405C2.68802 3.66376 2.6875 4.03856 2.6875 4.59V11.285C2.6875 11.8364 2.68802 12.2112 2.71243 12.5009C2.73619 12.7828 2.77922 12.9277 2.83287 13.0297C2.96128 13.274 3.16814 13.4763 3.42704 13.6041C3.60464 13.6919 3.66984 13.7131 3.79608 13.728C3.97271 13.7489 4.23445 13.75 4.8125 13.75C5.15768 13.75 5.4375 14.0298 5.4375 14.375C5.4375 14.7202 5.15768 15 4.8125 15L4.75839 15C4.25074 15 3.90939 15.0001 3.64949 14.9694C3.33008 14.9317 3.12202 14.8476 2.87346 14.7249C2.38266 14.4824 1.97998 14.0938 1.7264 13.6113C1.56292 13.3003 1.49738 12.9682 1.46685 12.6059C1.43748 12.2575 1.43749 11.8298 1.4375 11.3116V4.56339C1.43749 4.04521 1.43748 3.6175 1.46685 3.26907C1.49738 2.90681 1.56292 2.57474 1.7264 2.2637C1.97998 1.78123 2.38266 1.39256 2.87347 1.15013C3.1876 0.994964 3.52284 0.932518 3.89219 0.903263C4.24919 0.874988 4.68832 0.874993 5.22465 0.875Z\\" fill=\\"#55555D\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4 4C4 3.68934 4.25184 3.4375 4.5625 3.4375H9.9375C10.2482 3.4375 10.5 3.68934 10.5 4C10.5 4.31066 10.2482 4.5625 9.9375 4.5625H4.5625C4.25184 4.5625 4 4.31066 4 4Z\\" fill=\\"#55555D\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4 6.25C4 5.93934 4.25184 5.6875 4.5625 5.6875H7.3125C7.62316 5.6875 7.875 5.93934 7.875 6.25C7.875 6.56066 7.62316 6.8125 7.3125 6.8125H4.5625C4.25184 6.8125 4 6.56066 4 6.25Z\\" fill=\\"#55555D\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M14.5126 10.525C14.5126 10.8702 14.2328 11.15 13.8876 11.15H7.61633C6.87186 11.15 6.5731 10.1892 7.18633 9.76703L8.86678 8.61019C9.1511 8.41446 9.54026 8.48628 9.73599 8.7706C9.93172 9.05492 9.8599 9.44408 9.57558 9.63981L9.19762 9.9H13.8876C14.2328 9.9 14.5126 10.1798 14.5126 10.525Z\\" fill=\\"#55555D\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M6.86239 12.725C6.86239 12.3798 7.14221 12.1 7.48739 12.1H13.7587C14.5031 12.1 14.8019 13.0608 14.1887 13.483L12.5082 14.6398C12.2239 14.8355 11.8347 14.7637 11.639 14.4794C11.4433 14.1951 11.5151 13.8059 11.7994 13.6102L12.1774 13.35H7.48739C7.14221 13.35 6.86239 13.0702 6.86239 12.725Z\\" fill=\\"#55555D\\"/>\\n</g>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let ob=M._Y.createComponent("LineReplaceIcon",ox,e=>(0,d.jsx)(a7.s,{...e.props,name:"LineReplaceIcon",iconData:ok}));class oC extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var ow=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Line/&#230;&#147;&#141;&#228;&#189;&#156;/&#230;&#143;&#146;&#229;&#133;&#165;&#228;&#191;&#161;&#230;&#129;&#175;\\">\\n<path id=\\"Union\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M2 2.6875C1.65482 2.6875 1.375 2.96732 1.375 3.3125C1.375 3.65768 1.65482 3.9375 2 3.9375H14C14.3452 3.9375 14.625 3.65768 14.625 3.3125C14.625 2.96732 14.3452 2.6875 14 2.6875H8H2ZM1.375 8C1.375 7.65482 1.65482 7.375 2 7.375H8C8.34518 7.375 8.625 7.65482 8.625 8C8.625 8.34518 8.34518 8.625 8 8.625H2C1.65482 8.625 1.375 8.34518 1.375 8ZM1.375 12.6875C1.375 12.3423 1.65482 12.0625 2 12.0625H8C8.34518 12.0625 8.625 12.3423 8.625 12.6875C8.625 13.0327 8.34518 13.3125 8 13.3125H2C1.65482 13.3125 1.375 13.0327 1.375 12.6875ZM9.375 10.6875C9.375 10.3423 9.65482 10.0625 10 10.0625H11.375V8.6875C11.375 8.34232 11.6548 8.0625 12 8.0625C12.3452 8.0625 12.625 8.34232 12.625 8.6875V10.0625H14C14.3452 10.0625 14.625 10.3423 14.625 10.6875C14.625 11.0327 14.3452 11.3125 14 11.3125H12.625V12.6875C12.625 13.0327 12.3452 13.3125 12 13.3125C11.6548 13.3125 11.375 13.0327 11.375 12.6875V11.3125H10C9.65482 11.3125 9.375 11.0327 9.375 10.6875Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let oS=M._Y.createComponent("LineInsertIcon",oC,e=>(0,d.jsx)(a7.s,{...e.props,name:"LineInsertIcon",iconData:ow}));var o_=i(87984);class oT extends M.PN{onRetryClick(){let e=ah.activeOutput;e&&ah.generateHumanize({...e,aiContentDetectResult:void 0,taskData:{taskType:"writing:optimize",data:{content:e.content,userInput:{inputType:"user_input",key:"humanize",value:"humanize"}}}})}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}let oP=M._Y.createComponent("QuickComposeDetectDetails",oT,e=>{let{aiContentDetectResult:t,taskId:i,content:n,finished:a}=ah.activeOutput||{};return a&&i&&n?(0,d.jsx)("div",{className:"quick-compose-detect-details--fEr63",children:(0,d.jsx)(o_.G,{size:"large",source:"quick_compose",contentDetectDetail:t,onCheck:()=>{ah.handleAiContentDetect(i,n)},onRetry:()=>{e.onRetryClick()}})}):null});var oA=i(81131),oD=i(99778),oN=i(48996);class oj extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var oE=JSON.parse('{"fill":"currentColor","content":"\\n<g id=\\"Line/&#229;&#138;&#159;&#232;&#131;&#189;/&#230;&#150;&#135;&#228;&#187;&#182;-&#229;&#138;&#160;\\">\\n<g id=\\"Union\\">\\n<path d=\\"M10.0556 1.71875H9.94438C8.55647 1.71873 7.43771 1.71871 6.55583 1.83443C5.64086 1.95449 4.86779 2.21109 4.24575 2.80917C4.20889 2.84461 4.17273 2.88077 4.13729 2.91763C3.53922 3.53966 3.28262 4.31273 3.16256 5.2277C3.04684 6.10958 3.04686 7.22834 3.04688 8.61625V11.3838C3.04686 12.7717 3.04684 13.8904 3.16256 14.7723C3.28262 15.6873 3.53922 16.4603 4.13729 17.0824C4.17273 17.1192 4.20889 17.1554 4.24575 17.1908C4.86779 17.7889 5.64086 18.0455 6.55583 18.1656C7.4377 18.2813 8.55648 18.2813 9.94436 18.2813H10C10.4315 18.2813 10.7813 17.9315 10.7813 17.5C10.7813 17.0685 10.4315 16.7188 10 16.7188C8.54335 16.7188 7.52747 16.7172 6.75911 16.6163C6.0121 16.5183 5.61395 16.3388 5.3287 16.0645C5.30659 16.0432 5.28489 16.0215 5.26363 15.9994C4.98937 15.7142 4.8098 15.316 4.71178 14.569C4.61096 13.8007 4.60938 12.7848 4.60938 11.3281V8.67188C4.60938 7.21522 4.61096 6.19934 4.71178 5.43099C4.8098 4.68397 4.98937 4.28582 5.26363 4.00058C5.28489 3.97846 5.30659 3.95676 5.3287 3.9355C5.61395 3.66124 6.0121 3.48167 6.75911 3.38365C7.52747 3.28283 8.54335 3.28125 10 3.28125C11.4567 3.28125 12.4725 3.28283 13.2409 3.38365C13.9879 3.48167 14.3861 3.66124 14.6713 3.9355C14.6934 3.95676 14.7151 3.97846 14.7364 4.00058C15.0106 4.28582 15.1902 4.68397 15.2882 5.43099C15.389 6.19934 15.3906 7.21522 15.3906 8.67188V10C15.3906 10.4315 15.7404 10.7813 16.1719 10.7813C16.6033 10.7813 16.9531 10.4315 16.9531 10V8.6162C16.9531 7.22832 16.9532 6.10957 16.8374 5.2277C16.7174 4.31274 16.4608 3.53966 15.8627 2.91763C15.8273 2.88077 15.7911 2.84461 15.7542 2.80917C15.1322 2.21109 14.3591 1.95449 13.4442 1.83443C12.5623 1.71871 11.4435 1.71873 10.0556 1.71875Z\\" fill=\\"#868692\\"/>\\n<path d=\\"M6.95312 6.25C6.52165 6.25 6.17188 6.59978 6.17188 7.03125C6.17188 7.46272 6.52165 7.8125 6.95312 7.8125H13.0469C13.4783 7.8125 13.8281 7.46272 13.8281 7.03125C13.8281 6.59978 13.4783 6.25 13.0469 6.25H6.95312Z\\" fill=\\"#868692\\"/>\\n<path d=\\"M6.17188 10.1562C6.17188 9.72478 6.52165 9.375 6.95312 9.375H10.0781C10.5096 9.375 10.8594 9.72478 10.8594 10.1562C10.8594 10.5877 10.5096 10.9375 10.0781 10.9375H6.95312C6.52165 10.9375 6.17188 10.5877 6.17188 10.1562Z\\" fill=\\"#868692\\"/>\\n<path d=\\"M15.8066 12.7344C15.8066 12.3029 15.4569 11.9531 15.0254 11.9531C14.5939 11.9531 14.2441 12.3029 14.2441 12.7344V14.5566H12.4219C11.9904 14.5566 11.6406 14.9064 11.6406 15.3379C11.6406 15.7694 11.9904 16.1191 12.4219 16.1191H14.2441V17.8906C14.2441 18.3221 14.5939 18.6719 15.0254 18.6719C15.4569 18.6719 15.8066 18.3221 15.8066 17.8906V16.1191H17.5781C18.0096 16.1191 18.3594 15.7694 18.3594 15.3379C18.3594 14.9064 18.0096 14.5566 17.5781 14.5566H15.8066V12.7344Z\\" fill=\\"#868692\\"/>\\n</g>\\n</g>\\n","viewBox":"0 0 20 20"}');let oM=M._Y.createComponent("FileAddIcon",oj,e=>(0,d.jsx)(a7.s,{...e.props,name:"FileAddIcon",iconData:oE}));var oI=i(49515),oR=i(30115),oF={wrapper:"wrapper--mPGJg",writingTone:"writing-tone--u0dTG",text:"text--wx67J",content:"content--aoeV1",toneItem:"tone-item--cfhe5",toneTitle:"tone-title--SBhKs",toneTitleLeft:"tone-title-left--jEOaJ",tabList:"tab-list--bXHLy",closeBtn:"close-btn--noYY9"};class oL extends M.PN{get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel.WritingToolbar.WritingTone}onOpenChange(){this.open&&(this.isOpen=!0)}get toneAndFormalityText(){let{tone:e=[],format:t,formality:i,length:n}=this.props.onConfigChange?this.currentTone:this.props.config,a=Object.values(oD.Q.allQuickCompose).flat(1),r=[n,i,...e].flatMap(e=>{var t;return e&&"auto"===e?[]:(null===(t=a.find(t=>t.uid===e||t.key===e))||void 0===t?void 0:t.name)||[]});if("text"!==t&&!("email"===t&&ah.isEmailWebSite())&&!("twitter"===t&&ah.isTwitterWebSite())&&!("reddit"===t&&ah.isRedditWebSite())&&!("facebook"===t&&ah.isFacebookWebSite())&&!("linkedin"===t&&ah.isLinkedinWebSite())){var s;let e=(null===(s=oD.Q.allQuickCompose.format.find(e=>e.uid===t||e.key===t))||void 0===s?void 0:s.name)||"";e&&r.push(e)}return r.length?r.join(" / "):this.S.lengthAndTone}async handleDeleteTone(e){try{await at.v.deleteTone({uid:e})}catch(e){al.M.error(m.m.formatErrorMsg(e))}}async handleDeleteFormat(e){try{await ng.A.deleteCustomFormat(e)}catch(e){al.M.error(m.m.formatErrorMsg(e))}}getWritingConfig(){let{tone:e=[],formality:t,length:i,format:n}=this.currentTone;return this.props.config.format?[e[0],t,i,n]:[e[0],t,i]}handleClose(){if(this.isOpen&&!this.compareConfig()){var e,t;null===(e=(t=this.props).onClose)||void 0===e||e.call(t,this.currentTone)}this.defaultWritingTone=[]}compareConfig(){let e=this.getWritingConfig();return this.defaultWritingTone.join(",")===e.join(",")}onViewCreate(){this.currentTone=this.props.config}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"open",!1),(0,h._)(this,"currentTone",{formality:"auto",tone:["auto"],length:"auto",format:"text"}),(0,h._)(this,"defaultWritingTone",[]),(0,h._)(this,"lock",!1),(0,h._)(this,"isOpen",!1)}}(0,E.gn)([M.SB],oL.prototype,"open",void 0),(0,E.gn)([M.SB],oL.prototype,"currentTone",void 0),(0,E.gn)([M.SB],oL.prototype,"defaultWritingTone",void 0),(0,E.gn)([M.SB],oL.prototype,"lock",void 0),(0,E.gn)([M.SB],oL.prototype,"isOpen",void 0),(0,E.gn)([I.Fl],oL.prototype,"S",null),(0,E.gn)([(0,M.YP)(e=>[e.open])],oL.prototype,"onOpenChange",null);let oB=M._Y.createComponent("WritingTone",oL,e=>{let{className:t}=e.props;return(0,d.jsx)("div",{className:es()(oF.wrapper,t),children:(0,d.jsx)(r5.x,{open:e.open,zIndex:1,onOpenChange:t=>{e.lock||t===e.open||(e.open=t,t?(e.defaultWritingTone=e.getWritingConfig(),e.currentTone=e.props.config):e.handleClose())},content:(0,d.jsx)(oO,{vm:e,config:e.currentTone}),trigger:["click"],placement:"bottom",children:(0,d.jsxs)("div",{className:oF.writingTone,children:[(0,d.jsx)(en.J,{name:"tone",size:16,color:"currentColor",style:{color:"var(--theme-icon-brand)"}}),(0,d.jsx)("span",{className:oF.text,children:e.toneAndFormalityText})]})})})}),oO=(0,i6.Pi)(function(e){let{vm:t,config:i}=e;return(0,d.jsxs)("div",{className:oF.content,"data-draggable":"false",children:[(0,d.jsx)("div",{className:oF.closeBtn,onClick:()=>{t.open=!1,t.handleClose()},children:(0,d.jsx)(en.J,{name:"monicaClose",size:16})}),(0,d.jsxs)("div",{className:oF.toneItem,children:[(0,d.jsx)("div",{className:oF.toneTitle,children:(0,d.jsxs)("div",{className:oF.toneTitleLeft,children:[(0,d.jsx)(en.J,{name:"monicaDoc",size:20,color:"currentColor"}),t.S.length]})}),(0,d.jsx)("div",{className:oF.tabList,children:oD.Q.allQuickCompose.length.map(e=>{var n;return(0,d.jsx)(oN.D,{type:"secondary",text:e.name,className:oF.tabItem,active:e.key===(null===(n=t.currentTone)||void 0===n?void 0:n.length),onClick:()=>{var n,a;null===(n=(a=t.props).onConfigChange)||void 0===n||n.call(a,{...i,length:e.key}),t.currentTone={...i,length:e.key}}},e.key)})})]}),(0,d.jsxs)("div",{className:oF.toneItem,children:[(0,d.jsx)("div",{className:oF.toneTitle,children:(0,d.jsxs)("div",{className:oF.toneTitleLeft,children:[(0,d.jsx)(en.J,{name:"chatInputPromptTrigger",size:20,color:"currentColor"}),t.S.formality]})}),(0,d.jsx)("div",{className:oF.tabList,children:oD.Q.allQuickCompose.formality.map(e=>{var n;return(0,d.jsx)(oN.D,{type:"secondary",text:e.name,className:oF.tabItem,active:e.key===(null===(n=t.currentTone)||void 0===n?void 0:n.formality),onClick:()=>{var n,a;null===(n=(a=t.props).onConfigChange)||void 0===n||n.call(a,{...i,formality:e.key}),t.currentTone={...i,formality:e.key}}},e.key)})})]}),t.props.config.format&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:oF.toneItem,children:[(0,d.jsx)("div",{className:oF.toneTitle,children:(0,d.jsxs)("div",{className:oF.toneTitleLeft,children:[(0,d.jsx)(oM,{size:20,color:"currentColor"}),t.S.format]})}),(0,d.jsxs)("div",{className:oF.tabList,children:[oD.Q.allQuickCompose.format.map(e=>{var n,a;let r=null===(a=t.currentTone)||void 0===a?void 0:null===(n=a.format)||void 0===n?void 0:n.includes(e.uid);return(0,d.jsx)(oN.D,{text:e.name,type:"secondary",className:es()(oF.tabItem),active:r,closeable:!e.isSystem,autoComputedTooltips:!0,onClose:()=>{e.isSystem||(t.handleDeleteFormat(e.uid),n5.W.createUserBehaviorEvent({eventName:"delete_format_click",source:"quick_compose"}))},onClick:()=>{var n,a;null===(n=(a=t.props).onConfigChange)||void 0===n||n.call(a,{...i,format:e.uid}),t.currentTone={...i,format:e.uid}}},e.uid)}),(0,d.jsx)(oN.D,{type:"secondary",className:es()(oF.tabItem),onClick:()=>{t.lock=!0,(0,oI.E)({insertTarget:"dialogRoot",source:"quick_compose",onClose:()=>{t.lock=!1}})},text:t.S.addFormat,iconName:"addMemo"})]})]})}),(0,d.jsxs)("div",{className:oF.toneItem,children:[(0,d.jsx)("div",{className:oF.toneTitle,children:(0,d.jsxs)("div",{className:oF.toneTitleLeft,children:[(0,d.jsx)(en.J,{name:"monicaTone",size:20,color:"currentColor"}),t.S.tone]})}),(0,d.jsxs)("div",{className:oF.tabList,children:[oD.Q.allQuickCompose.tone.map(e=>{var n,a;let r=null===(a=t.currentTone)||void 0===a?void 0:null===(n=a.tone)||void 0===n?void 0:n.includes(e.uid);return(0,d.jsx)(oN.D,{text:e.name,type:"secondary",className:es()(oF.tabItem),active:r,closeable:!e.isSystem,autoComputedTooltips:!0,onClose:()=>{e.isSystem||(t.handleDeleteTone(e.uid),n5.W.createUserBehaviorEvent({eventName:"delete_tone_click",source:"quick_compose"}))},onClick:()=>{var n,a;null===(n=(a=t.props).onConfigChange)||void 0===n||n.call(a,{...i,tone:[e.uid]}),t.currentTone={...i,tone:[e.uid]}}},e.uid)}),(0,d.jsx)(oN.D,{type:"secondary",className:es()(oF.tabItem),onClick:()=>{t.lock=!0,(0,oR.F)({insertTarget:"dialogRoot",source:"quick_compose",onClose:()=>{t.lock=!1}})},text:t.S.addTone,iconName:"addMemo"})]})]})]})});var oG={writingToolbar:"writing-toolbar--z0Tl6",asFooterChild:"as-footer-child--bWLnx",driver:"driver--QleL8",langSelectTriggerNode:"lang-select-trigger-node--cXQfM",text:"text--He0IL"};class oV extends M.PN{get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel.WritingToolbar}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}(0,E.gn)([M.Fl],oV.prototype,"S",null);let oz=M._Y.createComponent("WritingToolbar",oV,e=>{var t;let{config:i,disableTone:n,composeLanguage:a,onConfigChange:r,onRefresh:s,asFooterChild:o}=e.props;return!ah.activeOutput||(null===(t=ah.activeOutput)||void 0===t?void 0:t.finished)?(0,d.jsxs)("div",{className:es()(oG.writingToolbar,{[oG.asFooterChild]:o}),"data-draggable":"false",children:[!n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(oB,{config:i,onConfigChange:r,onClose:e=>{null==s||s(e)}}),(0,d.jsx)("div",{className:oG.driver})]}),(0,d.jsx)(r4.S,{scene:"functional",allowAuto:!0,value:a,onChange:t=>{var i,n,a,r;null===(i=(n=e.props).onLangChange)||void 0===i||i.call(n,t),null===(a=(r=e.props).onRefresh)||void 0===a||a.call(r,{composeLanguage:t||"auto"})},placement:"bottom",triggerNode:(0,d.jsxs)("div",{className:oG.langSelectTriggerNode,children:[(0,d.jsx)(en.J,{name:"quickComposeTranslate",size:16,color:"currentColor",style:{color:"var(--theme-icon-brand)"}}),(0,d.jsx)("span",{className:oG.text,children:"auto"===a?e.S.auto:ai.q.getLanguageDisplayNameByComposeLanguage(S.a.locale,a)})]})})]}):null});class oU extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var oW=JSON.parse('{"fill":"none","content":"\\n<g id=\\"chatInputV2More 1\\">\\n<path id=\\"Vector\\" d=\\"M8.85718 15.4311C8.52718 15.621 8.26718 15.7171 8.00018 15.7171C7.72718 15.7171 7.46718 15.6221 7.13718 15.4311L2.19818 12.5681C1.66518 12.258 1.43018 11.991 1.43018 11.5911C1.43018 11.1851 1.66518 10.9241 2.19818 10.6071L3.06818 10.1051L2.19818 9.60405C1.66518 9.29305 1.43018 9.02605 1.43018 8.62605C1.43018 8.22605 1.66518 7.96005 2.19818 7.64905L3.22018 7.05905L2.19818 6.46205C1.66518 6.15105 1.43018 5.88405 1.43018 5.48405C1.43018 5.07805 1.66518 4.81805 2.19818 4.50005L7.13718 1.63805C7.46718 1.44805 7.72718 1.35205 8.00018 1.35205C8.26718 1.35205 8.52718 1.44705 8.85718 1.63805L13.7952 4.50005C14.3292 4.81805 14.5632 5.07805 14.5632 5.48405C14.5632 5.88405 14.3292 6.15105 13.7952 6.46205L12.7732 7.05205L13.7952 7.64905C14.3292 7.96005 14.5632 8.22705 14.5632 8.62605C14.5632 9.02605 14.3292 9.29305 13.7952 9.60405L12.9322 10.1061L13.7952 10.6061C14.3292 10.9241 14.5632 11.1851 14.5632 11.5911C14.5632 11.991 14.3292 12.2571 13.7952 12.5681L8.85718 15.4311ZM8.00018 8.29005C8.09037 8.2844 8.1777 8.25621 8.25418 8.20805L12.9322 5.54105C12.9572 5.52905 12.9772 5.51005 12.9772 5.48405C12.9772 5.45305 12.9572 5.44005 12.9322 5.42105L8.25418 2.76005C8.1788 2.70986 8.09071 2.68212 8.00018 2.68005C7.90741 2.68168 7.8171 2.71016 7.74018 2.76205L3.06818 5.42205C3.03618 5.44105 3.02318 5.45405 3.02318 5.48505C3.02318 5.51105 3.03618 5.53005 3.06818 5.54305L7.74018 8.20705C7.83518 8.25705 7.91118 8.28905 8.00018 8.28905V8.29005ZM8.00018 9.61005C7.72718 9.61005 7.46718 9.52105 7.13718 9.32505L4.45818 7.77005L3.06818 8.56305C3.03618 8.58205 3.02318 8.59505 3.02318 8.62605C3.02318 8.65805 3.03618 8.67105 3.06818 8.69005L7.74018 11.3501C7.81712 11.4019 7.90741 11.4304 8.00018 11.4321C8.09091 11.4294 8.17901 11.4009 8.25418 11.3501L12.9322 8.69005C12.9572 8.67005 12.9772 8.65805 12.9772 8.62605C12.9772 8.59505 12.9572 8.58205 12.9322 8.56305L11.5362 7.77605L8.85618 9.32505C8.52618 9.52105 8.26618 9.61005 8.00018 9.61005ZM7.74018 14.3141C7.83518 14.3641 7.91118 14.3961 8.00018 14.3961C8.09035 14.3903 8.17767 14.3621 8.25418 14.3141L12.9322 11.6481C12.9572 11.6351 12.9772 11.616 12.9772 11.5911C12.9772 11.5591 12.9572 11.5461 12.9322 11.5271L11.6942 10.8231L8.85718 12.4671C8.52718 12.6641 8.26718 12.7591 8.00018 12.7591C7.72718 12.7591 7.46718 12.6641 7.13718 12.4671L4.30618 10.8231L3.06818 11.5271C3.03618 11.5471 3.02318 11.5591 3.02318 11.5911C3.02318 11.616 3.03618 11.6351 3.06818 11.6481L7.74018 14.3141Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let oH=M._Y.createComponent("ChatInputMoreIcon",oU,e=>(0,d.jsx)(a7.s,{...e.props,name:"ChatInputMoreIcon",iconData:oW}));var oq={quickComposeActionList:"quick-compose-action-list--UH7QG",actionList:"action-list--clHlV",actionBtn:"action-btn--B9y7d",actionBtnText:"action-btn-text--HSZuu",calcRenderCount:"calc-render-count--PvlS7"};class oQ extends M.PN{get actions(){return this.props.actions}get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel.QuickComposeActionPanel.QuickComposeActionList}get showMoreBtn(){return this.actions.length>this.renderCount}get showedActions(){return this.actions.slice(0,this.renderCount)}get restActions(){return this.actions.slice(this.renderCount)}onViewCreate(){this.containerEl&&(this.calcRenderCount(),this.rootResizeObserver=new ResizeObserver(e=>{e[0].target===this.containerEl&&this.calcRenderCount()}),this.rootResizeObserver.observe(this.containerEl))}onViewDestroy(){var e;null===(e=this.rootResizeObserver)||void 0===e||e.disconnect()}calcRenderCount(){if(!this.containerEl)return;let e=this.containerEl.getBoundingClientRect().width;if(0===e)return;let t=Array.from(this.containerEl.children).map(e=>e.getBoundingClientRect()),i=0,n=0,a=t.length>1?e-120:e;for(let e=0;e<t.length;e++){let r=t[e].width+(0===e?0:8);if(i+r>a)break;i+=r,n++}this.renderCount=Math.max(1,n)}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"containerEl",null),(0,h._)(this,"previewEl",null),(0,h._)(this,"renderCount",2),(0,h._)(this,"rootResizeObserver",null)}}(0,E.gn)([M.SB],oQ.prototype,"renderCount",void 0),(0,E.gn)([I.Fl],oQ.prototype,"S",null),(0,E.gn)([I.Fl],oQ.prototype,"showMoreBtn",null),(0,E.gn)([I.Fl],oQ.prototype,"showedActions",null),(0,E.gn)([I.Fl],oQ.prototype,"restActions",null);let oY=M._Y.createComponent("QuickComposeActionList",oQ,e=>{let{onClick:t,moreAction:i}=e.props;return(0,d.jsxs)("div",{className:oq.quickComposeActionList,children:[(0,d.jsx)("div",{className:es()(oq.actionList),children:e.showedActions.map(e=>(0,d.jsx)(oK,{icon:e.icon,onClick:()=>{t(e.key)},name:e.name},e.key))}),e.showMoreBtn&&(0,d.jsx)(r5.x,{trigger:"click",closeAfterContentClick:!0,content:(0,d.jsx)(r6.h,{children:e.restActions.map(e=>(0,d.jsx)(r8.X,{content:e.name,icon:"string"==typeof e.icon?(0,d.jsx)("span",{children:e.icon}):e.icon,onClick:()=>{t(e.key)}},e.key))}),placement:"topRight",children:(0,d.jsx)(oK,{icon:(null==i?void 0:i.icon)||(0,d.jsx)(oH,{size:16,color:"currentColor",style:{color:"var(--theme-icon-tertiary)"}}),name:(null==i?void 0:i.name)||e.S.more},"more")}),(0,d.jsx)("div",{className:es()(oq.actionList,oq.calcRenderCount),ref:t=>{e.containerEl=t},children:e.actions.map(e=>(0,d.jsx)(oK,{icon:e.icon,name:e.name},e.key))})]})}),oK=(0,i6.Pi)(e=>{let{icon:t,name:i,onClick:n}=e;return(0,d.jsxs)("div",{className:es()(oq.actionBtn),onClick:n,children:[t,(0,d.jsx)("span",{className:oq.actionBtnText,children:i})]})});var oX={quickComposeActionPanel:"quick-compose-action-panel--_Z_e8",textareaInner:"textarea-inner--qNTSC",footer:"footer--Z6E4g",footerLeft:"footer-left--dYJNK",sendBtn:"send-btn--vC8kf"};class oZ extends M.PN{get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel.QuickComposeActionPanel}get disabled(){return!this.value.trim()}get actions(){let{emptyPanelData:e,actionList:t,socialTemplates:i}=ah;return e?"action"===e.type?t.map(e=>({type:"action",action:e})):"siteTemplate"===e.type&&"comment"===e.siteTemplateType?i.flatMap(t=>"comment"===t.templateScene&&t.socialMediaType===e.siteIntegrationContext.site?[{type:"comment",action:t}]:[]):[]:[]}get isSocialMediaComment(){let{emptyPanelData:e}=ah;return(null==e?void 0:e.type)==="siteTemplate"&&(null==e?void 0:e.siteTemplateType)==="comment"}get moreAction(){return this.isSocialMediaComment?{name:this.S.more,icon:"\uD83D\uDDC2️",key:"more"}:null}get renderActions(){return this.actions.flatMap(e=>"action"===e.type?(0,nZ._z)(e.action.systemKey)?[]:[{name:e.action.name,icon:(0,d.jsx)(en.J,{name:e.action.iconName||nU.jp,size:16,color:"currentColor",style:{color:"var(--theme-icon-tertiary)"}}),key:e.action.name}]:"comment"===e.type?[{name:e.action.name,icon:e.action.emoji,key:e.action.name}]:[])}handleKeyDown(e){_.t.isHotkey(e,["enter"])&&(this.handleStartGenerate(),e.preventDefault(),e.stopPropagation())}updatePanelData(e){var t,i;((null===(t=ah.emptyPanelData)||void 0===t?void 0:t.type)==="action"||(null===(i=ah.emptyPanelData)||void 0===i?void 0:i.type)==="siteTemplate")&&(ah.emptyPanelData={...ah.emptyPanelData,value:e})}recoveryPanelData(){var e,t;((null===(e=ah.emptyPanelData)||void 0===e?void 0:e.type)==="action"||(null===(t=ah.emptyPanelData)||void 0===t?void 0:t.type)==="siteTemplate")&&(this.value=ah.emptyPanelData.value||"")}handleStartGenerate(){if(this.disabled)return;let e=ah.emptyPanelData;if(this.updatePanelData(this.value),(null==e?void 0:e.type)==="siteTemplate"&&"comment"===e.siteTemplateType)this.isSocialMediaComment&&ah.generateQuickCompose({panelData:{type:"userInput",userInput:this.value},...ah.getGlobalWritingConfig(),taskData:{taskType:"site_integration:comment",data:{siteIntegrationContext:e.siteIntegrationContext,userInput:{inputType:"user_input",value:this.value,postContent:e.siteIntegrationContext.reply,poster:e.siteIntegrationContext.poster}}}});else if((null==e?void 0:e.type)==="action"){var t;ah.generateQuickCompose({panelData:{type:"userInput",userInput:this.value,selection:e.selection},...ah.getGlobalWritingConfig(),taskData:{taskType:"writing:optimize",data:{content:e.selection,userInput:{inputType:"user_input",key:null===(t=e.action)||void 0===t?void 0:t.systemKey,value:this.value}}}})}}handleActionClick(e){var t,i;let n=ah.emptyPanelData;if(this.updatePanelData(),(null==n?void 0:n.type)==="siteTemplate"&&"comment"===n.siteTemplateType){let i=null===(t=this.actions.find(t=>"comment"===t.type&&t.action.name===e))||void 0===t?void 0:t.action;if(!i)return;ah.generateQuickCompose({panelData:{...n,template:i},...ah.getGlobalWritingConfig(),taskData:{taskType:"site_integration:comment",data:{siteIntegrationContext:n.siteIntegrationContext,userInput:{inputType:"template",value:i.key,key:i.key,postContent:n.siteIntegrationContext.reply,poster:n.siteIntegrationContext.poster}}}})}else if((null==n?void 0:n.type)==="action"){let t=null===(i=this.actions.find(t=>"action"===t.type&&t.action.name===e))||void 0===i?void 0:i.action;if(!t)return;ah.generateQuickCompose({panelData:{...n,action:t},...ah.getGlobalWritingConfig(),taskData:{taskType:"writing:optimize",data:{content:n.selection,userInput:{inputType:"user_input",value:t.content,key:t.systemKey}}}})}}onViewCreate(){this.recoveryPanelData()}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"textareaRef",null),(0,h._)(this,"value","")}}(0,E.gn)([M.SB],oZ.prototype,"value",void 0),(0,E.gn)([I.Fl],oZ.prototype,"S",null),(0,E.gn)([I.Fl],oZ.prototype,"disabled",null),(0,E.gn)([I.Fl],oZ.prototype,"actions",null),(0,E.gn)([I.Fl],oZ.prototype,"isSocialMediaComment",null),(0,E.gn)([I.Fl],oZ.prototype,"moreAction",null),(0,E.gn)([I.Fl],oZ.prototype,"renderActions",null);let oJ=M._Y.createComponent("QuickComposeActionPanel",oZ,e=>{let{emptyPanelData:t}=ah;return ah.isActionPanelData(t)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(sR,{controller:ah,className:oX.quickComposeActionPanel,children:["action"===t.type&&t.selection&&(0,d.jsx)(sM.d,{content:t.selection,onTextChange:e=>{ah.emptyPanelData={...t,selection:e}}}),(0,d.jsx)(oA.W,{autoFocus:!0,value:e.value,className:oX.textareaInner,getTextAreaRef:t=>{e.textareaRef=t},placeholder:e.S.placeholder,onChange:t=>{e.value=t.target.value},onKeyDown:t=>{e.handleKeyDown(t)}}),(0,d.jsx)(oY,{actions:e.renderActions,onClick:t=>{e.handleActionClick(t)},moreAction:e.moreAction})]}),(0,d.jsxs)("div",{className:oX.footer,"data-draggable":"false",children:[(0,d.jsxs)("div",{className:oX.footerLeft,children:[(0,d.jsx)(sj,{placement:"bottomLeft",enabled:ng.A.quickActionGpt4Enabled,source:"quick_compose",onChange:e=>{aD.ll.set("quickActionGpt4Enabled",e)}}),(0,d.jsx)(oz,{disableTone:e.isSocialMediaComment,asFooterChild:!0,config:ah.composeToneConfig,composeLanguage:ng.A.finalQuickComposeRespondLanguage,onConfigChange:e=>{ah.updateComposeToneConfig(e)},onLangChange:e=>{e&&ng.A.setQuickComposeRespondLanguage(e)}})]}),(0,d.jsxs)(np.z,{color:"primary",shape:"default",className:oX.sendBtn,disabled:e.disabled,onClick:()=>{e.handleStartGenerate()},size:"medium",children:[(0,d.jsx)(sW,{size:16,color:"currentColor"}),e.S.startGenerate]})]})]}):null});var o$={quickComposeEmailSummary:"quick-compose-email-summary--HwzH1",title:"title--zYfwU",content:"content--oYhvE",loading:"loading--tXfn5",markdown:"markdown--rmyhO"};class o0 extends M.PN{get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel.QuickComposeEmailSummary}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}(0,E.gn)([M.Fl],o0.prototype,"S",null);let o1=M._Y.createComponent("QuickComposeEmailSummary",o0,e=>{let{intent:t,isLoadingIntent:i}=ah,{className:n}=e.props;return(0,d.jsxs)("div",{className:es()(o$.quickComposeEmailSummary,n),children:[(0,d.jsx)("div",{className:o$.title,children:e.S.emailSummary}),(0,d.jsx)("div",{className:o$.content,children:i?(0,d.jsx)(av.g,{className:o$.loading,type:"geist"}):(0,d.jsx)(sr.x,{children:(0,d.jsx)(ak.U,{className:o$.markdown,children:t})})})]})});class o2 extends M.PN{get disabled(){return!this.value.trim()}get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel.QuickComposeAiReplyPanel}handleKeyDown(e){_.t.isHotkey(e,["enter"])&&(this.handleStartGenerate(),e.preventDefault(),e.stopPropagation())}handleStartGenerate(){if(this.disabled)return;let e=ah.emptyPanelData;ah.isAiReplyPanelData(e)&&(ah.emptyPanelData={...e,value:this.value},ah.generateQuickCompose({enableAdvancedModel:ng.A.quickActionGpt4Enabled,panelData:e,toneConfig:ah.composeToneConfig,composeLanguage:ng.A.finalQuickComposeRespondLanguage,taskData:{taskType:"writing:mail:quick_reply",data:{emailData:e.emailData,userInput:{inputType:"user_input",value:this.value}}}}))}onViewCreate(){let{emptyPanelData:e}=ah;(null==e?void 0:e.type)==="aiReply"&&(this.value=e.value||"")}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"value","")}}(0,E.gn)([M.SB],o2.prototype,"value",void 0),(0,E.gn)([M.Fl],o2.prototype,"disabled",null),(0,E.gn)([M.Fl],o2.prototype,"S",null);let o3=M._Y.createComponent("QuickComposeAiReplyPanel",o2,e=>{let{emptyPanelData:t}=ah;return(null==t?void 0:t.type)!=="aiReply"?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(sR,{className:"quick-compose-ai-reply-panel--tT0bK",controller:ah,children:[(0,d.jsx)(o1,{}),(0,d.jsxs)("div",{className:"ai-reply-content--OLfP9",children:[(0,d.jsx)("div",{className:"title--dFAxT",children:e.S.title}),(0,d.jsx)(oA.W,{autoFocus:!0,value:e.value,className:"textarea-inner--gxnPg",placeholder:e.S.placeholder,rows:5,onChange:t=>{e.value=t.target.value},onKeyDown:t=>{e.handleKeyDown(t)}})]})]}),(0,d.jsxs)("div",{className:"footer--P27so","data-draggable":"false",children:[(0,d.jsxs)("div",{className:"footer-left--o1DK7",children:[(0,d.jsx)(sj,{enabled:ng.A.quickActionGpt4Enabled,placement:"bottomLeft",source:"quick_compose",onChange:e=>{aD.ll.set("quickActionGpt4Enabled",e)}}),(0,d.jsx)(oz,{asFooterChild:!0,config:ah.composeToneConfig,composeLanguage:ng.A.finalQuickComposeRespondLanguage,onConfigChange:e=>{ah.updateComposeToneConfig(e)},onLangChange:e=>{e&&ng.A.setQuickComposeRespondLanguage(e)}})]}),(0,d.jsxs)(np.z,{color:"primary",shape:"default",className:"send-btn--GuBdU",disabled:e.disabled,onClick:()=>{e.handleStartGenerate()},size:"medium",children:[(0,d.jsx)(sW,{size:16,color:"currentColor"}),e.S.startGenerate]})]})]})});class o5 extends M.PN{constructor(...e){super(...e),(0,h._)(this,"props",void 0)}}var o6=JSON.parse('{"fill":"none","content":"\\n<g id=\\"end icon\\">\\n<path id=\\"Union\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M12.2501 5.74218C12.5521 5.74218 12.7969 5.49733 12.7969 5.1953C12.7969 4.89327 12.5521 4.64843 12.2501 4.64843L3.01669 4.64843L4.90442 3.34888C5.1532 3.17762 5.21604 2.83711 5.04477 2.58833C4.87351 2.33955 4.53299 2.27671 4.28421 2.44797L1.52725 4.34592C0.908143 4.77212 1.20976 5.74218 1.96139 5.74218L12.2501 5.74218ZM1.75005 8.2578C1.44802 8.2578 1.20318 8.50265 1.20318 8.80468C1.20318 9.10671 1.44802 9.35155 1.75005 9.35155H10.9834L9.09569 10.6511C8.84691 10.8224 8.78407 11.1629 8.95533 11.4117C9.1266 11.6604 9.46711 11.7233 9.71589 11.552L12.4728 9.65406C13.092 9.22786 12.7903 8.2578 12.0387 8.2578L1.75005 8.2578Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 14 14"}');let o8=M._Y.createComponent("LineSwitchIcon",o5,e=>(0,d.jsx)(a7.s,{...e.props,name:"LineSwitchIcon",iconData:o6}));var o7=i(66952),o4={quickPanelHeader:"quick-panel-header--TQvOU",templateInner:"template-inner--CeXoz",templateInnerText:"template-inner-text--Lya7M",text:"text--JxVOH",quickComposeTitle:"quick-compose-title--EnWuW",titleWrapper:"title-wrapper--zvWaj",title:"title--K9Co1",actionBtn:"action-btn--WpozL",templateSelectWrapper:"template-select-wrapper--frqEm",templateSelectContent:"template-select-content--F3K8r",templateSelectContentLeft:"template-select-content-left--uGt5E",templateIcon:"template-icon--zXjZO",templateName:"template-name--kfMGo",pinBtn:"pin-btn--qYQaC"};class o9 extends M.PN{get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel.QuickComposeHeader}get templateOptions(){let{emptyPanelData:e,activeOutput:t,socialTemplates:i,templates:n,inputEl:a,emailPinedTemplate:r,socialPinedTemplate:s}=ah;return t||!ah.isTemplatePanelData(e)?[]:(null==e?void 0:e.type)==="siteTemplate"?i.flatMap(t=>t.templateScene===e.siteTemplateType&&t.socialMediaType===e.siteIntegrationContext.site?[{label:t.name,key:t.key,icon:t.iconName,type:"siteTemplate",original:t,pinned:ah.getSocialPinedTemplate(t.socialMediaType).includes(t.key)}]:[]):"template"===e.type&&a?n.flatMap(e=>{var t;return(null==e?void 0:null===(t=e.tag)||void 0===t?void 0:t.includes("email"))?[{label:e.name,key:e.key,icon:e.iconName,type:"template",pinned:null==r?void 0:r.includes(e.key),original:e}]:[]}):(null==e?void 0:e.type)==="template"?n.flatMap(e=>{var t;return(null==e?void 0:null===(t=e.tag)||void 0===t?void 0:t.includes("general"))?[{label:e.name,key:e.key,icon:e.iconName,type:"template",pinned:!1,original:e}]:[]}):[]}get humanizeInfo(){return ah.templates.find(e=>ao(e.key))}handleActionChange(e){let{activeOutput:t}=ah;(null==t?void 0:t.taskData.taskType)==="writing:generate"&&ah.generateQuickCompose({...t,panelData:{...t.panelData,action:e},taskData:{...t.taskData,data:{...t.taskData.data,content:""}}})}handleTogglePin(e){if("siteTemplate"===e.type){let t=ah.getSocialPinedTemplate(e.original.socialMediaType);if(!e.pinned&&t.length>=this.MAX_PINNED_TEMPLATE_COUNT){al.M.error((0,S.x)(this.S.maxPinnedTemplateCount,{count:this.MAX_PINNED_TEMPLATE_COUNT}),"body");return}aD.ll.set("socialMediaPinedTemplate",{...ah.socialPinedTemplate,[e.original.socialMediaType.toLowerCase()]:e.pinned?t.filter(t=>t!==e.key):[...t,e.key]})}if("template"===e.type&&ah.inputEl){let t=ah.emailPinedTemplate||[];if(!e.pinned&&t.length>=this.MAX_PINNED_TEMPLATE_COUNT){al.M.error((0,S.x)(this.S.maxPinnedTemplateCount,{count:this.MAX_PINNED_TEMPLATE_COUNT}),"body");return}aD.ll.set("emailPinedTemplate",e.pinned?t.filter(t=>t!==e.key):[...t,e.key])}}handleTemplateChange(e){let{emptyPanelData:t}=ah;ah.isTemplatePanelData(t)&&("default"===e.templateScene&&"template"===t.type?ah.emptyPanelData={...t,template:e}:"post"===e.templateScene&&"siteTemplate"===t.type&&(ah.emptyPanelData={...t,template:e}))}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"MAX_PINNED_TEMPLATE_COUNT",2)}}(0,E.gn)([M.Fl],o9.prototype,"S",null),(0,E.gn)([M.Fl],o9.prototype,"templateOptions",null),(0,E.gn)([M.Fl],o9.prototype,"humanizeInfo",null);let le=M._Y.createComponent("QuickComposeHeader",o9,e=>(0,d.jsx)(sa.K,{className:o4.quickPanelHeader,title:(0,d.jsx)(lt,{vm:e}),pinned:ah.pinned,togglePinned:e=>{ah.togglePinned(e)},onClose:()=>{ah.handleCloseClick()},rightExtra:(0,d.jsx)(li,{vm:e})})),lt=(0,i6.Pi)(function(e){let{vm:t}=e,{emptyPanelData:i,activeOutput:n,inputEl:a}=ah;if(n){var r,s,o,l,c;let e=n.panelData;if("aiReply"===e.type)return(0,d.jsxs)("div",{className:o4.quickComposeTitle,children:[(0,d.jsx)(ln,{vm:t}),(0,d.jsx)(la,{text:t.S.aiReply})]});if("template"===e.type||"siteTemplate"===e.type&&"post"===e.siteTemplateType){let i=e.value||(null===(r=e.template)||void 0===r?void 0:r.name)||t.S.writingAssistant;return ah.isAiContentDetectData(n.taskData)&&t.humanizeInfo?(0,d.jsxs)("div",{className:o4.quickComposeTitle,children:[(0,d.jsx)(ln,{vm:t}),(0,d.jsx)(la,{text:t.humanizeInfo.name,icon:(0,d.jsx)(en.J,{name:t.humanizeInfo.iconName||nU.jp,size:18,color:"currentColor",style:{color:"var(--theme-icon-secondary)"}})})]}):(0,d.jsxs)("div",{className:o4.quickComposeTitle,children:[(0,d.jsx)(ln,{vm:t}),(0,d.jsx)(la,{text:i,hideIcon:!0})]})}if("siteTemplate"===e.type&&"comment"===e.siteTemplateType){let i=(null===(s=e.template)||void 0===s?void 0:s.name)||t.S.writingAssistant,n=null===(o=e.template)||void 0===o?void 0:o.emoji;return(0,d.jsxs)("div",{className:o4.quickComposeTitle,children:[(0,d.jsx)(ln,{vm:t}),(0,d.jsx)(la,{text:i,icon:n})]})}if("action"===e.type)return(0,d.jsxs)("div",{className:o4.quickComposeTitle,children:[(0,d.jsx)(ln,{vm:t}),(0,d.jsx)(la,{text:(null===(l=e.action)||void 0===l?void 0:l.name)||t.S.writingAssistant,icon:(0,d.jsx)(en.J,{name:(null===(c=e.action)||void 0===c?void 0:c.iconName)||nU.jp,size:18,color:"currentColor",style:{color:"var(--theme-icon-secondary)"}})})]});if("userInput"===e.type)return(0,d.jsxs)("div",{className:o4.quickComposeTitle,children:[(0,d.jsx)(ln,{vm:t}),(0,d.jsx)("span",{className:o4.title,children:e.userInput})]})}else if(i)return"aiReply"===i.type?(0,d.jsx)(la,{text:t.S.aiReply}):"template"===i.type?(0,d.jsx)(la,{text:t.S.writingAssistant}):"siteTemplate"===i.type?(0,d.jsx)(la,{text:"post"===i.siteTemplateType?t.S.aiPost:t.S.aiReply}):a?(0,d.jsx)(la,{text:t.S.aiRewrite}):(0,d.jsx)(la,{text:t.S.writingAssistant});return null}),li=(0,i6.Pi)(function(e){let{vm:t}=e,{emptyPanelData:i}=ah;if(ah.isTemplatePanelData(i)){var n;return(0,d.jsx)(r5.x,{placement:"bottom",trigger:"click",closeAfterContentClick:!0,content:(0,d.jsx)(r6.h,{maxListHeight:200,children:t.templateOptions.map(e=>(0,d.jsx)(r8.X,{className:o4.templateSelectWrapper,content:(0,d.jsx)(lr,{vm:t,item:e}),onClick:()=>{t.handleTemplateChange(e.original)}},e.key))}),children:(0,d.jsxs)("div",{className:o4.templateInner,"data-draggable":"false",children:[(0,d.jsx)("div",{className:o4.templateInnerText,children:(0,d.jsx)("span",{className:o4.text,children:(null===(n=i.template)||void 0===n?void 0:n.name)||t.S.selectTemplate})}),(0,d.jsx)(o8,{size:14,color:"var(--theme-icon-tertiary)"})]})})}return null}),ln=(0,i6.Pi)(function(e){let{vm:t}=e,{emptyPanelData:i,activeOutput:n}=ah;return i&&(null==n?void 0:n.panelData)?(0,d.jsx)(st,{hotkey:"esc",title:t.S.back,trigger:["hover"],children:(0,d.jsx)("div",{"data-draggable":"false",className:o4.actionBtn,onClick:()=>{ah.handleBackClick()},children:(0,d.jsx)(en.J,{name:"arrow",size:16,color:"currentColor",style:{color:"var(--theme-icon-secondary)"}})})}):null}),la=(0,i6.Pi)(function(e){let{text:t,icon:i,hideIcon:n=!1}=e;return(0,d.jsxs)("div",{className:o4.titleWrapper,children:[!n&&(i||(0,d.jsx)(o7.T,{size:20})),(0,d.jsx)("span",{className:o4.title,children:t})]})}),lr=(0,i6.Pi)(function(e){let{vm:t,item:i}=e,n="siteTemplate"===i.type||"template"===i.type&&ah.inputEl;return(0,d.jsxs)("div",{className:o4.templateSelectContent,children:[(0,d.jsxs)("div",{className:o4.templateSelectContentLeft,children:[(0,d.jsx)("span",{className:o4.templateIcon,children:(0,d.jsx)(en.J,{name:i.icon,size:16,color:"currentColor",style:{color:"var(--theme-icon-primary)"}})}),(0,d.jsx)("span",{className:o4.templateName,children:i.original.name})]}),n&&(0,d.jsx)("div",{className:o4.pinBtn,onClick:e=>{e.stopPropagation(),t.handleTogglePin(i)},children:(0,d.jsx)(en.J,{name:i.pinned?"bot-pin":"prompt-unpin",stroke:"currentColor",color:"currentColor",style:{color:i.pinned?"var(--theme-icon-brand)":"var(--theme-icon-tertiary)"},size:14})})]})});var ls={templateInfo:"template-info--_6ykR",templateName:"template-name--eNyQr",insertItem:"insert-item--Q8GQf",arrowIcon:"arrow-icon--hIkG2",divider:"divider--qfZa5"},lo=i(1159);class ll extends M.PN{get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel}get windowItem(){return nY.E.getWindowItem(this.props.windowId)}get windowItemPosition(){return ah.windowItemPosition}get suggestList(){return ah.actionList.flatMap(e=>(0,nZ._z)(e.systemKey)?[]:[{...e,type:"action",name:e.name,icon:e.iconName||nU.jp,key:e.id}])}handleInsertClick(){let{activeOutput:e}=ah;e&&(lo.h.insertText(e.content),ah.handleCloseClick())}handleReplaceClick(){let{activeOutput:e,inputEl:t}=ah;e&&(lo.h.replaceText({type:t?"replaceAll":"replaceSelection",text:e.content,inputEl:t||void 0}),ah.handleCloseClick())}triggerSuggestion(e){if(!ah.activeOutput)return;let t=ah.activeOutput.content;ah.generateQuickCompose({panelData:{type:"action",action:e,selection:t},...ah.getGlobalWritingConfig(),taskData:{taskType:"writing:optimize",data:{content:t,userInput:{inputType:"user_input",key:e.systemKey,value:e.content}}}})}registerBackListener(){this.listenerManager.addDocumentEventListener("keydown",e=>{_.t.isHotkey(e,["esc"])&&(ah.handleBackClick(),e.preventDefault(),e.stopPropagation())})}onViewCreate(){ah.windowId=this.props.windowId,this.registerBackListener()}onViewDestroy(){this.listenerManager.removeAll()}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"listenerManager",new n8.M)}}(0,E.gn)([M.Fl],ll.prototype,"S",null),(0,E.gn)([M.Fl],ll.prototype,"windowItem",null),(0,E.gn)([M.Fl],ll.prototype,"windowItemPosition",null),(0,E.gn)([M.Fl],ll.prototype,"suggestList",null);var lc={quickComposeTemplatePanel:"quick-compose-template-panel--XQjpZ",tips:"tips--JJ3xl",textareaInner:"textarea-inner--LswOs",footer:"footer--DJQsE",footerLeft:"footer-left--tm5Pd",sendBtn:"send-btn--JVqt3"};class lh extends M.PN{get disabled(){return!this.value.trim()}get S(){return S.S.Global.modules.QuickPanel.QuickComposePanel.QuickComposeTemplatePanel}get currentTemplate(){let{emptyPanelData:e}=ah;return(null==e?void 0:e.type)==="template"||(null==e?void 0:e.type)==="siteTemplate"?e.template:null}onTemplateChange(){var e;null===(e=this.textareaRef)||void 0===e||e.focus()}updatePanelData(e){var t,i;((null===(t=ah.emptyPanelData)||void 0===t?void 0:t.type)==="template"||(null===(i=ah.emptyPanelData)||void 0===i?void 0:i.type)==="siteTemplate")&&(ah.emptyPanelData={...ah.emptyPanelData,value:e})}recoveryPanelData(){var e,t;((null===(e=ah.emptyPanelData)||void 0===e?void 0:e.type)==="template"||(null===(t=ah.emptyPanelData)||void 0===t?void 0:t.type)==="siteTemplate")&&(this.value=ah.emptyPanelData.value||"")}handleKeyDown(e){_.t.isHotkey(e,["enter"])&&(this.handleStartGenerate(),e.preventDefault(),e.stopPropagation())}handleStartGenerate(){if(this.disabled)return;let e=ah.emptyPanelData;this.updatePanelData(this.value),(null==e?void 0:e.type)==="template"&&(e.template?ah.generateQuickCompose({panelData:{...e,template:e.template,value:this.value},...ah.getGlobalWritingConfig(),taskData:{taskType:"writing:generate",data:{userInput:{inputType:"template",value:this.value,key:e.template.key}}}}):ah.generateQuickCompose({panelData:{type:"userInput",userInput:this.value},...ah.getGlobalWritingConfig(),taskData:{taskType:"writing:generate",data:{userInput:{inputType:"user_input",value:this.value}}}})),(null==e?void 0:e.type)==="siteTemplate"&&(e.template?(ah.emptyPanelData={...e,value:this.value},ah.generateQuickCompose({panelData:{...e,template:e.template,value:this.value},...ah.getGlobalWritingConfig(),taskData:{taskType:"site_integration:post",data:{siteIntegrationContext:e.siteIntegrationContext,userInput:{inputType:"siteTemplate",key:e.template.key,value:this.value}}}})):(ah.emptyPanelData={...e,value:this.value},ah.generateQuickCompose({panelData:{type:"userInput",userInput:this.value},...ah.getGlobalWritingConfig(),taskData:{taskType:"site_integration:post",data:{siteIntegrationContext:e.siteIntegrationContext,userInput:{inputType:"user_input",value:this.value}}}})))}onViewCreate(){let{emptyPanelData:e}=ah;((null==e?void 0:e.type)==="template"||(null==e?void 0:e.type)==="siteTemplate")&&(this.value=e.value||"")}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"textareaRef",null),(0,h._)(this,"value","")}}(0,E.gn)([M.SB],lh.prototype,"value",void 0),(0,E.gn)([M.Fl],lh.prototype,"disabled",null),(0,E.gn)([M.Fl],lh.prototype,"S",null),(0,E.gn)([M.Fl],lh.prototype,"currentTemplate",null),(0,E.gn)([(0,M.YP)(e=>[e.currentTemplate])],lh.prototype,"onTemplateChange",null);let ld=M._Y.createComponent("QuickComposeTemplatePanel",lh,e=>{var t;let{emptyPanelData:i}=ah;return ah.isTemplatePanelData(i)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(sR,{className:lc.quickComposeTemplatePanel,controller:ah,children:[!!(null===(t=i.template)||void 0===t?void 0:t.placeholder)&&(0,d.jsxs)("div",{className:lc.tips,children:[e.S.tips,i.template.placeholder]}),(0,d.jsx)(oA.W,{autoFocus:!0,value:e.value,className:lc.textareaInner,getTextAreaRef:t=>{e.textareaRef=t},placeholder:e.S.placeholder,onChange:t=>{e.value=t.target.value},onKeyDown:t=>{e.handleKeyDown(t)}})]}),(0,d.jsxs)("div",{className:lc.footer,"data-draggable":"false",children:[(0,d.jsxs)("div",{className:lc.footerLeft,children:[(0,d.jsx)(sj,{enabled:ng.A.quickActionGpt4Enabled,placement:"bottomLeft",source:"quick_compose",onChange:e=>{aD.ll.set("quickActionGpt4Enabled",e)}}),(0,d.jsx)(oz,{asFooterChild:!0,disableTone:"siteTemplate"===i.type,config:ah.composeToneConfig,composeLanguage:ng.A.finalQuickComposeRespondLanguage,onConfigChange:e=>{ah.updateComposeToneConfig(e)},onLangChange:e=>{e&&ng.A.setQuickComposeRespondLanguage(e)}})]}),(0,d.jsxs)(np.z,{color:"primary",shape:"default",className:lc.sendBtn,disabled:e.disabled,onClick:()=>{e.handleStartGenerate()},size:"medium",children:[(0,d.jsx)(sW,{size:16,color:"currentColor"}),e.S.startGenerate]})]})]}):null}),lu=M._Y.createComponent("QuickComposePanel",ll,e=>{let{emptyPanelData:t,activeOutput:i}=ah;return t||i?(0,d.jsxs)(sn.y,{className:ls.quickComposePanel,...e.props,onClose:()=>{ah.pinned||ah.handleCloseClick()},children:[(0,d.jsx)(le,{}),(0,d.jsx)(lp,{vm:e})]}):null}),lp=(0,i6.Pi)(function(e){let{vm:t}=e,{emptyPanelData:i,activeOutput:n}=ah;if(n){var a;let e=ah.isAiContentDetectData(n.taskData)&&(null===(a=ah.activeOutput)||void 0===a?void 0:a.finished);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(sR,{controller:ah,children:[(0,d.jsx)(lg,{}),(0,d.jsx)(lm,{}),(0,d.jsx)(sm,{disabledAd:e,isEditing:ah.isEditing,onResultEditCancel:()=>{ah.isEditing=!1},onResultEditSave:e=>{ah.updateOutput(n.taskId,{content:e}),ah.isEditing=!1},content:n.content,output:n,source:"quick_compose"}),e&&(0,d.jsx)(oP,{})]}),!e&&(0,d.jsx)(oz,{config:n.toneConfig,composeLanguage:n.composeLanguage,onRefresh:e=>{let{composeLanguage:t,...i}=e;ah.generateQuickCompose({...n,composeLanguage:t||"auto",toneConfig:{length:i.length||n.toneConfig.length,formality:i.formality||n.toneConfig.formality,format:i.format||n.toneConfig.format,tone:i.tone||n.toneConfig.tone}})}}),(0,d.jsxs)(s3,{placeholder:t.S.placeholder,onSend:e=>{ah.continueInChat(e)},suggestList:t.suggestList,triggerSuggestion:e=>{t.triggerSuggestion(e)},output:n,onRetry:()=>{ah.retry()},onStop:()=>{ah.stop()},children:[(0,d.jsx)(lf,{vm:t}),ah.pageSize>1&&(0,d.jsx)(r3.b,{className:ls.pagination,page:ah.page,pageSize:ah.pageSize,onPrevClick:()=>{ah.page-=1},onNextClick:()=>{ah.page+=1}}),(0,d.jsx)(sj,{enabled:n.enableAdvancedModel,onChange:e=>{ah.handleGpt4Change(e)},source:"quick_compose"})]})]})}if(i){if("template"===i.type||"siteTemplate"===i.type&&"post"===i.siteTemplateType)return(0,d.jsx)(ld,{});if("aiReply"===i.type)return(0,d.jsx)(o3,{});if("action"===i.type||"siteTemplate"===i.type&&"comment"===i.siteTemplateType)return(0,d.jsx)(oJ,{})}return null}),lg=(0,i6.Pi)(function(){let{panelData:e,taskData:t}=ah.activeOutput||{};if(!ah.isAiContentDetectData(t)&&((null==e?void 0:e.type)==="template"||(null==e?void 0:e.type)==="siteTemplate"&&"post"===e.siteTemplateType)){var i,n;return(0,d.jsxs)("div",{className:ls.templateInfo,children:[(0,d.jsx)(en.J,{name:(null===(i=e.template)||void 0===i?void 0:i.iconName)||nU.jp,size:16,color:"currentColor",style:{color:"var(--theme-icon-quaternary)"}}),(0,d.jsx)("div",{className:ls.templateName,children:null===(n=e.template)||void 0===n?void 0:n.name})]})}return(null==e?void 0:e.type)==="aiReply"?(0,d.jsx)(o1,{className:ls.extraInfo}):null}),lm=(0,i6.Pi)(function(){let{activeOutput:e}=ah;return e&&ah.isQuickComposeGenerateData(e.taskData)&&e.taskData.data.content?(0,d.jsx)(sM.d,{content:e.taskData.data.content,onTextChange:t=>{ah.updateOutput(e.taskId,{...e,taskData:{...e.taskData,data:{...e.taskData.data,content:t}}})},className:ls.quoteInfo}):null}),lf=(0,i6.Pi)(function(e){let{vm:t}=e,{activeOutput:i}=ah;return(null==i?void 0:i.finished)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(lv,{vm:t}),(0,d.jsx)("div",{className:ls.divider}),(0,d.jsx)(s_,{content:i.content,onRefreshClick:()=>{ah.refresh()},onEditClick:()=>{ah.isEditing=!0},onSaveToMemoClick:async()=>{ah.handleSaveToMemo()}})]}):null}),lv=(0,i6.Pi)(function(e){let{vm:t}=e,{inputEl:i,emptyPanelData:n}=ah;return i?(0,d.jsx)(np.z,{type:"text",color:"primary",size:"small",className:ls.insertItem,onClick:()=>{t.handleReplaceClick()},children:(null==n?void 0:n.type)==="action"?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ob,{size:12,color:"var(--theme-icon-brand)"}),t.S.replace]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(oS,{size:12,color:"var(--theme-icon-brand)"}),t.S.insert]})}):(0,d.jsx)(r5.x,{trigger:"hover",content:(0,d.jsxs)(r6.h,{style:{justifyContent:"insert"===ah.insertType?"flex-start":"flex-end"},children:[(0,d.jsx)(r8.X,{icon:(0,d.jsx)(ob,{size:16,color:"var(--theme-icon-secondary)"}),content:t.S.replace,onClick:()=>{t.handleReplaceClick()}}),(0,d.jsx)(r8.X,{icon:(0,d.jsx)(oS,{size:16,color:"var(--theme-icon-secondary)"}),content:t.S.insert,onClick:()=>{t.handleInsertClick()}})]}),children:"insert"===ah.insertType?(0,d.jsxs)(np.z,{type:"text",color:"primary",size:"small",className:ls.insertItem,onClick:()=>{t.handleInsertClick()},children:[(0,d.jsx)(oS,{size:12,color:"var(--theme-icon-brand)"}),t.S.insert,(0,d.jsx)(r7.v,{size:12,color:"var(--theme-icon-brand)",className:ls.arrowIcon})]}):(0,d.jsxs)(np.z,{type:"text",color:"primary",size:"small",className:ls.insertItem,onClick:()=>{t.handleReplaceClick()},children:[(0,d.jsx)(ob,{size:12,color:"var(--theme-icon-brand)"}),t.S.replace]})})}),ly=nY.E.createWindow(lu,{singleton:!0});var lx=i(24487);let lk=()=>{(0,ad.O)(),nG.n.setViews({openHighTrafficDialog:a0}),nE.w.setViews({memoUploadController:rS.d,openNotificationDrawer:aL,Screenshot:nc,openDeviceExceededLimitDialog:aU.q}),(0,nV.Y)(),nM.E.setViews({openInviteDialog:rx,openMonthlyVipResubscribeDialog:rD,openRewardExpireReminderDialog:rB,openRewardsObtainedDialog:rw,openVersionUpgradeDialog:rY,openInviteBonusDialog:rp,openGlobalSidebarGuideDialog:aY,openNewTeamDialog:rI,openImageDisplayDialog:rl,openVideoDisplayDialog:r1,openUpgradeYearlyDialog:nj.Z}),nI.docChatController.setViews({openReplySourceDialog:aV.c,openUpgradeDialog:nh.$}),nm.T.setViews({openUpgradeDialog:nh.$,openFileContextLimitDialog:nb}),nR.w.setViews({openDisabledConfirmDialog:nC.J}),nF.Mp.setViews({artistBotsExploreDrawer:ap.r,chatBotsExploreDrawer:ag.B,openCommonImagePreviewDialog:nD.r,openCommonReportDialog:nw.e,openConvHistoryDrawer:az.r,openReplySourceDialog:aV.c,openShareBotDialog:aB.c,openArtifactPreviewDialog:au.M,openDisableBaseModelDialog:nT.Y,openDisableKnowledgeSourceDialog:nP.m,openToolNotSupportedDialog:nA.D,openMindMapDialog:r2.J,openRealtimeDialog:lx.N}),nL.a.setViews({openConfirm:nS.B}),nB.m.setViews({openPaymentCompletedDialog:nN.G}),nO.$.setViews({openLinkCopiedDialog:n_.u}),n$.setViews({openQuickActionPanel:oh}),ae.setViews({openQuickAskPanel:oy}),ah.setViews({openQuickComposePanel:ly}),nz.p.setViews({openSearchResourceWindow:aG.i,openFileResourceWindow:aO.M})}},66135:function(e,t,i){i.d(t,{Q:function(){return L},M:function(){return U}});var n=i(71576),a=i(34491),r=i(4461),s=i(8209),o=i(56607),l=i(92235),c=i(62499),h=i(75087),d=i(27534),u=i(53040),p=i(58812),g=i(66084);class m extends a.PN{constructor(...e){super(...e),(0,g._)(this,"props",void 0)}}var f=JSON.parse('{"fill":"none","content":"\\n<rect width=\\"28\\" height=\\"28\\" fill=\\"#EF614A\\"/>\\n<path d=\\"M21.3007 20.2344C21.3007 21.3217 20.4192 22.2031 19.3319 22.2031C15.7773 22.2031 12.2226 22.2031 8.66797 22.2031C7.58066 22.2031 6.69922 21.3217 6.69922 20.2344C6.69922 16.0781 6.69922 11.9219 6.69922 7.76562C6.69922 6.67831 7.58066 5.79688 8.66797 5.79688C11.4112 5.79688 14.1544 5.79688 16.8976 5.79688C16.8976 5.79688 20.1739 9.25157 21.3007 10.3542C21.3007 13.6476 21.3007 16.941 21.3007 20.2344Z\\" fill=\\"white\\"/>\\n<path d=\\"M17.5609 15.0489C17.6806 15.0489 17.7953 15.0965 17.8799 15.1811C17.9646 15.2657 18.0121 15.3805 18.0121 15.5001C18.0121 15.6198 17.9646 15.7345 17.8799 15.8191C17.7953 15.9038 17.6806 15.9513 17.5609 15.9513H13.9515C13.8319 15.9513 13.7171 15.9038 13.6325 15.8191C13.5479 15.7345 13.5004 15.6198 13.5004 15.5001C13.5004 15.3805 13.5479 15.2657 13.6325 15.1811C13.7171 15.0965 13.8319 15.0489 13.9515 15.0489H17.5609ZM17.5609 18.2072C17.6806 18.2072 17.7953 18.2547 17.8799 18.3393C17.9646 18.4239 18.0121 18.5387 18.0121 18.6583C18.0121 18.778 17.9646 18.8927 17.8799 18.9774C17.7953 19.062 17.6806 19.1095 17.5609 19.1095H13.9515C13.8319 19.1095 13.7171 19.062 13.6325 18.9774C13.5479 18.8927 13.5004 18.778 13.5004 18.6583C13.5004 18.5387 13.5479 18.4239 13.6325 18.3393C13.7171 18.2547 13.8319 18.2072 13.9515 18.2072H17.5609ZM17.5609 11.8907C17.6806 11.8907 17.7953 11.9383 17.8799 12.0229C17.9646 12.1075 18.0121 12.2222 18.0121 12.3419C18.0121 12.4616 17.9646 12.5763 17.8799 12.6609C17.7953 12.7455 17.6806 12.7931 17.5609 12.7931H13.9515C13.8319 12.7931 13.7171 12.7455 13.6325 12.6609C13.5479 12.5763 13.5004 12.4616 13.5004 12.3419C13.5004 12.2222 13.5479 12.1075 13.6325 12.0229C13.7171 11.9383 13.8319 11.8907 13.9515 11.8907H17.5609ZM9.4398 15.9513L9.37979 15.9481C8.83883 15.8899 8.85914 15.0489 9.4398 15.0489H10.3421C10.5777 15.0489 10.6697 14.8599 10.7987 14.0216C10.8141 13.9215 10.8213 13.8727 10.8303 13.8186C11.0045 12.7236 11.2634 12.161 12.0043 11.9137C12.1178 11.8759 12.2417 11.8848 12.3488 11.9383C12.4558 11.9919 12.5372 12.0858 12.575 12.1993C12.6128 12.3129 12.604 12.4368 12.5504 12.5438C12.4968 12.6509 12.403 12.7323 12.2894 12.7701C11.9885 12.8702 11.845 13.1824 11.7209 13.9603L11.6902 14.1588C11.6411 14.4787 11.5887 14.7503 11.5233 14.9781L11.5017 15.0489H12.1468C12.2573 15.049 12.364 15.0895 12.4466 15.163C12.5292 15.2364 12.5819 15.3376 12.5948 15.4473L12.598 15.5001C12.598 15.6198 12.5505 15.7345 12.4659 15.8191C12.3813 15.9038 12.2665 15.9513 12.1468 15.9513H11.5021L11.5238 16.0221C11.5806 16.2215 11.6275 16.4543 11.6717 16.7237L11.6902 16.841L11.7214 17.04C11.845 17.8178 11.9885 18.13 12.2899 18.2302C12.4034 18.268 12.4973 18.3495 12.5508 18.4565C12.6043 18.5636 12.6131 18.6876 12.5752 18.8011C12.5374 18.9147 12.4559 19.0085 12.3488 19.0621C12.2418 19.1156 12.1178 19.1244 12.0043 19.0865C11.263 18.8392 11.0045 18.2766 10.8303 17.1816C10.8213 17.1275 10.8141 17.0788 10.7987 16.9786C10.6697 16.1408 10.5777 15.9513 10.3421 15.9513H9.4398Z\\" fill=\\"#EF614A\\"/>\\n<path opacity=\\"0.4\\" d=\\"M21.3006 10.4497V10.5712H17.728C17.4975 10.5712 17.2764 10.4797 17.1134 10.3169C16.9505 10.1542 16.8589 9.93336 16.8589 9.70314V5.79689C16.9733 5.79623 17.0867 5.81813 17.1926 5.86132C17.2984 5.90452 17.3948 5.96817 17.476 6.04863L21.0573 9.83334C21.2168 9.99857 21.3043 10.2202 21.3006 10.4497Z\\" fill=\\"#EF614A\\"/>\\n\\n","viewBox":"0 0 28 28"}');let v=a._Y.createComponent("MindMapRoundIcon",m,e=>(0,n.jsx)(p.s,{...e.props,name:"MindMapRoundIcon",iconData:f}));var y=i(3379);class x extends a.PN{constructor(...e){super(...e),(0,g._)(this,"props",void 0)}}var k=JSON.parse('{"fill":"none","content":"\\n<rect width=\\"40\\" height=\\"40\\" rx=\\"8\\" fill=\\"#FB5473\\"/>\\n<path d=\\"M30.4295 28.9062C30.4295 30.4595 29.1703 31.7187 27.617 31.7187C22.5389 31.7187 17.4609 31.7187 12.3828 31.7187C10.8295 31.7187 9.57031 30.4595 9.57031 28.9062C9.57031 22.9687 9.57031 17.0312 9.57031 11.0937C9.57031 9.54045 10.8295 8.28125 12.3828 8.28125C16.3017 8.28125 20.2206 8.28125 24.1394 8.28125C24.1394 8.28125 28.8198 13.2165 30.4295 14.7917C30.4295 19.4965 30.4295 24.2014 30.4295 28.9062Z\\" fill=\\"white\\"/>\\n<path opacity=\\"0.4\\" d=\\"M30.4295 14.9281V15.1017H25.3257C24.9964 15.1017 24.6806 14.971 24.4478 14.7385C24.2149 14.5059 24.0841 14.1905 24.0841 13.8616V8.28127C24.2475 8.28033 24.4095 8.31161 24.5608 8.37332C24.712 8.43503 24.8496 8.52596 24.9657 8.64089L30.0818 14.0476C30.3097 14.2837 30.4347 14.6002 30.4295 14.9281Z\\" fill=\\"#FB5473\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M15.5 17H16.5V19.5H14V18.5C14 17.6716 14.6716 17 15.5 17ZM14 20.5V27.5C14 28.3284 14.6716 29 15.5 29H24.5C25.3284 29 26 28.3284 26 27.5V20.5H17H14ZM17.5 19.5H26V18.5C26 17.6716 25.3284 17 24.5 17H17.5V19.5ZM16 22.5C15.7239 22.5 15.5 22.7239 15.5 23C15.5 23.2761 15.7239 23.5 16 23.5H24C24.2761 23.5 24.5 23.2761 24.5 23C24.5 22.7239 24.2761 22.5 24 22.5H16ZM15.5 25.5C15.5 25.2239 15.7239 25 16 25H21C21.2761 25 21.5 25.2239 21.5 25.5C21.5 25.7761 21.2761 26 21 26H16C15.7239 26 15.5 25.7761 15.5 25.5Z\\" fill=\\"#FB5473\\"/>\\n\\n","viewBox":"0 0 40 40"}');let b=a._Y.createComponent("WebappIcon",x,e=>(0,n.jsx)(p.s,{...e.props,name:"WebappIcon",iconData:k}));var C=i(70510),w=i(89322),S=i(67061),_=i(919),T=i(44469),P=i(95398),A=i(32250),D=i(41884),N={fileResourceWindow:"file-resource-window--U3TXv",header:"header--MXjL5",title:"title--q8vpd",tools:"tools--fDtKG",content:"content--CqZpP",image:"image--X2j10",empty:"empty--PUEfS",desc:"desc--CQcUU",resourceItem:"resource-item--wTG6V",resourceIcon:"resource-icon--CHhYk",resourceInfo:"resource-info--kBxvT",resourceName:"resource-name--IJW9Q",resourceDesc:"resource-desc--hWzXS"},j=i(52921),E=i(88882),M=i(81157),I=i(1396),R=i(46756);class F extends a.PN{get S(){return E.S.Global.modules.ChatBox.ChatResources.FileResourceWindow}get windowId(){return this.props.windowId}get windowItem(){return D.E.getWindowItem(this.windowId)}get chatBotController(){return I.Mp.getActiveChatBotController()}get containerEvents(){var e;let t=!1;return this.resources.forEach(e=>{"file"===e.resourceType&&e.visible&&(t=!0)}),t?{}:null===(e=this.windowItem)||void 0===e?void 0:e.layoutManager.containerEvents}onViewCreate(){var e;let t=w.p.getDefaultWindowOptions(this.container);null===(e=this.windowItem)||void 0===e||e.layoutManager.init(t),this.updateResources()}onViewDestroy(){var e;null===(e=this.windowItem)||void 0===e||e.layoutManager.destroy()}async updateResources(){var e,t,i;let n=null===(e=this.chatBotController)||void 0===e?void 0:e.conversationId;if(!n)return;this.resources=w.p.getFilesFromChatItems((0,M.Z)(null===(t=this.chatBotController)||void 0===t?void 0:t.chatTree.renderItems));let a=[],{data:r}=await R.y.getConvAttachmentList(n);null==r||null===(i=r.attachments)||void 0===i||i.forEach(e=>{let t="artifact"===e.resourceType&&e.chatArtifactData?{...e,chatArtifactData:{streaming:!1,fromEdit:!1,data:e.chatArtifactData}}:e;a.push(t)}),a.length>this.resources.length&&(this.resources=a)}constructor(...e){super(...e),(0,g._)(this,"props",void 0),(0,g._)(this,"container",null),(0,g._)(this,"size",40),(0,g._)(this,"iconSize",30),(0,g._)(this,"mindMapDataUpdater",void 0),(0,g._)(this,"resources",[])}}(0,j.gn)([a.SB],F.prototype,"resources",void 0),(0,j.gn)([a.Fl],F.prototype,"S",null),(0,j.gn)([a.Fl],F.prototype,"windowId",null),(0,j.gn)([a.Fl],F.prototype,"windowItem",null),(0,j.gn)([a.Fl],F.prototype,"chatBotController",null),(0,j.gn)([a.Fl],F.prototype,"containerEvents",null);let L=a._Y.createComponent("FileResourceWindow",F,e=>{var t;let{allowedDirections:i,draggable:a=!0}=e.props;return(0,n.jsxs)("div",{className:N.fileResourceWindow,ref:t=>{e.container=t},style:{...null===(t=e.windowItem)||void 0===t?void 0:t.layoutManager.layoutStyle},...e.containerEvents,children:[e.windowItem&&(0,n.jsx)(A.y,{windowItem:e.windowItem,allowedDirections:i}),(0,n.jsxs)("div",{className:N.header,"data-draggable":a,children:[(0,n.jsx)("div",{className:N.title,children:e.S.title}),(0,n.jsx)("div",{className:N.tools,"data-draggable":"false",children:(0,n.jsx)(d.h,{iconName:"closeLine",title:"",color:"var(--theme-icon-tertiary)",onClick:()=>{w.p.closeWindow("file")}})})]}),(0,n.jsx)("div",{className:N.content,"data-draggable":"false",children:e.resources.length>0?(0,n.jsx)(h.Fragment,{children:e.resources.map((t,i)=>"artifact"===t.resourceType?(0,n.jsx)(B,{vm:e,resource:t},i):"mind_map"===t.resourceType?(0,n.jsx)(O,{vm:e,resource:t},i):"ai_form"===t.resourceType?(0,n.jsx)(G,{vm:e,resource:t},i):"file"===t.resourceType?(0,n.jsx)(V,{vm:e,resource:t},i):null)}):(0,n.jsxs)("div",{className:N.empty,children:[(0,n.jsx)(u.E,{className:N.image,src:(0,r.Q)(s.Z)}),(0,n.jsx)("div",{className:N.title,children:e.S.emptyTitle}),(0,n.jsx)("div",{className:N.desc,children:e.S.emptyDesc})]})})]})}),B=(0,c.Pi)(function(e){let{vm:t,resource:i}=e,{conversationId:a,chatItemId:r,chatArtifactData:s}=i,{id:o,type:l}=s.data;return(0,n.jsx)(z,{item:{icon:(0,n.jsx)(P.K,{type:l,size:t.size,iconSize:t.iconSize}),name:s.data.name,desc:t.S.artifact},onClick:()=>{t.chatBotController&&(w.p.closeWindow("file"),t.chatBotController.artifactManager.show({artifactData:s,convId:a,replyId:r,enableQuickFix:!0,fromChatResources:!0}))}},o)}),O=(0,c.Pi)(function(e){let{vm:t,resource:i}=e,{conversationId:a,chatItemId:r,chatMindMapData:s}=i,l=_.Qp.parseMidMapNodeFromText(s.data);return l?(0,n.jsx)(z,{item:{icon:(0,n.jsx)(v,{size:t.size}),name:l.data.text,desc:t.S.mindMap},onClick:()=>{if(t.chatBotController){if("ext-sidebar"===o.o.entryType||"horizontal"===S.L.mainWindowMode)t.chatBotController.openMindMapDialog({insertTarget:"dialogRoot",isOutsideContentRoot:!0,data:l});else{var e;T.T3.openMonicaChatTabPageV2({tab:"chat",botName:null===(e=t.chatBotController.botData.botItem)||void 0===e?void 0:e.name,botUid:t.chatBotController.botData.botId,convId:a,itemId:r,action:"openMindMap"})}}}},"mind_map:".concat(r)):null}),G=(0,c.Pi)(function(e){let{vm:t,resource:i}=e,{uid:a,title:r}=i.chatAiFormData;return(0,n.jsx)(z,{item:{icon:(0,n.jsx)(y.i,{size:t.size}),name:r,desc:t.S.aiForm},onClick:()=>{t.chatBotController&&window.open("".concat(l.m.genWebAIFormUrl(a),"&source=chat"),"__blank")}},a)}),V=(0,c.Pi)(function(e){var t;let{vm:i,resource:a}=e,{fileUid:r,fileType:s,fileMetaInfo:o,fileName:c,fileUrl:h,fileSize:d,fileExt:p=""}=a.chatFileData;if("browser_tab"===s)return(0,n.jsx)(z,{item:{icon:(0,n.jsx)(b,{size:i.size}),name:null==o?void 0:o.title,desc:null==o?void 0:o.sourceUrl},onClick:()=>{window.open(null==o?void 0:o.sourceUrl,"__blank")}},r);let g=null===(t=i.chatBotController)||void 0===t?void 0:t.chatBotAttachment,m="".concat(p.toUpperCase()).concat(d?", ".concat(l.m.formatFileSize(d)):"");return(null==g?void 0:g.isImage(p))?(0,n.jsx)(z,{item:{icon:(0,n.jsx)(u.E,{className:N.image,src:h,size:i.size,skeleton:!0,allowPreview:!0,previewOptions:{visible:a.visible,onVisibleChange:e=>{a.visible=e}}}),name:c,desc:m},onClick:()=>{a.visible=!0}},r):(0,n.jsx)(z,{item:{icon:(0,n.jsx)(C.a,{type:p,size:i.size,iconSize:i.iconSize}),name:c,desc:m},onClick:()=>{window.open(h,"__blank")}},r)}),z=(0,c.Pi)(function(e){let{item:t,onClick:i}=e;return(0,n.jsxs)("div",{className:N.resourceItem,onClick:i,children:[(0,n.jsx)("div",{className:N.resourceIcon,children:t.icon}),(0,n.jsxs)("div",{className:N.resourceInfo,children:[(0,n.jsx)("div",{className:N.resourceName,children:t.name}),(0,n.jsx)("div",{className:N.resourceDesc,children:t.desc})]})]})}),U=D.E.createWindow(L,{singleton:!0})},76917:function(e,t,i){i.d(t,{X:function(){return A},i:function(){return D}});var n=i(71576),a=i(34491),r=i(4461),s=i(8209),o=i(92235),l=i(75087),c=i(14084),h=i(75372),d=i(20995),u=i(69645),p=i(68339),g=i(27534),m=i(53040),f=i(89322),v=i(92020),y=i(32250),x=i(41884),k={searchResourceWindow:"search-resource-window--xKABb",header:"header--J64x_",title:"title--a_R11",tools:"tools--seuGs",search:"search--nPuA8",hide:"hide--s8Ox1",switch:"switch--apj7N",actionBtn:"action-btn--I4TKL",text:"text--BQAGO",others:"others--d3WMt",content:"content--sFkuI",searchItem:"search-item--NyXM9",searchHeader:"search-header--mEnnL",icon:"icon--o5_Dv",source:"source--Enlpe",searchTitle:"search-title--eKByb",divider:"divider--qBSsH",line:"line--d52DL",empty:"empty--Qius2",image:"image--MJNqO"},b=i(66084),C=i(52921),w=i(88882),S=i(1396),_=i(90180),T=i(67061);class P extends a.PN{get S(){return w.S.Global.modules.ChatBox.ChatResources.SearchResourceWindow}get isHorizontalView(){return"horizontal"===T.L.mainWindowMode}get windowId(){return this.props.windowId}get windowItem(){return x.E.getWindowItem(this.windowId)}get chatBotController(){return S.Mp.getActiveChatBotController()}get expandSearchEnable(){return _.A.chatExpandResearchEnable}get sourceList(){var e;return null!==(e=f.p.windowInfos.search.data)&&void 0!==e?e:[]}onViewCreate(){var e;let t=f.p.getDefaultWindowOptions(this.container);null===(e=this.windowItem)||void 0===e||e.layoutManager.init(t)}onViewDestroy(){var e;null===(e=this.windowItem)||void 0===e||e.layoutManager.destroy()}onSearchExpand(){this.searchEl&&this.switchEl&&(this.searchExpand=this.searchEl.clientWidth>this.switchEl.clientWidth+20)}getDomainFromUrl(e){try{return new URL(e).hostname.split(".").slice(-2).join(".")}catch(e){return""}}constructor(...e){super(...e),(0,b._)(this,"props",void 0),(0,b._)(this,"container",null),(0,b._)(this,"searchEl",null),(0,b._)(this,"switchEl",null),(0,b._)(this,"searchExpand",!0)}}(0,C.gn)([a.SB],P.prototype,"searchExpand",void 0),(0,C.gn)([a.Fl],P.prototype,"S",null),(0,C.gn)([a.Fl],P.prototype,"isHorizontalView",null),(0,C.gn)([a.Fl],P.prototype,"windowId",null),(0,C.gn)([a.Fl],P.prototype,"windowItem",null),(0,C.gn)([a.Fl],P.prototype,"chatBotController",null),(0,C.gn)([a.Fl],P.prototype,"expandSearchEnable",null),(0,C.gn)([a.Fl],P.prototype,"sourceList",null),(0,C.gn)([(0,a.YP)(e=>{var t;return[null===(t=e.windowItem)||void 0===t?void 0:t.layoutManager.layoutStyle]})],P.prototype,"onSearchExpand",null);let A=a._Y.createComponent("SearchResourceWindow",P,e=>{var t,i,a;return(0,n.jsxs)("div",{className:k.searchResourceWindow,ref:t=>{e.container=t},style:{...null===(t=e.windowItem)||void 0===t?void 0:t.layoutManager.layoutStyle},...null===(i=e.windowItem)||void 0===i?void 0:i.layoutManager.containerEvents,children:[e.windowItem&&(0,n.jsx)(y.y,{windowItem:e.windowItem,allowedDirections:e.isHorizontalView?["left"]:void 0}),(0,n.jsxs)("div",{className:k.header,"data-draggable":!e.isHorizontalView,children:[(0,n.jsx)("div",{className:k.title,children:e.S.title}),(0,n.jsxs)("div",{className:k.tools,children:[(0,n.jsxs)("div",{className:k.search,ref:t=>e.searchEl=t,children:[(0,n.jsx)("div",{className:k.hide,children:(0,n.jsx)("div",{className:k.switch,ref:t=>e.switchEl=t,children:(0,n.jsx)(c.r,{enabled:!0,label:e.S.expand,size:"small"})})}),(0,n.jsx)("div",{style:{display:"flex"},"data-draggable":"false",children:e.searchExpand?(0,n.jsx)(c.r,{enabled:e.expandSearchEnable,labelClassName:k.switchLabel,label:e.S.expand,size:"small",onChange:e=>{v.ll.setUiFlag("chatExpandResearchEnable",e)}}):(0,n.jsx)(h.x,{closeAfterContentClick:!0,content:(0,n.jsx)(d.h,{children:(0,n.jsx)(u.X,{content:(0,n.jsx)(c.r,{enabled:e.expandSearchEnable,labelClassName:k.switchLabel,label:e.S.expand,size:"small",onChange:e=>{v.ll.setUiFlag("chatExpandResearchEnable",e)}})})}),children:(0,n.jsx)("div",{className:k.actionBtn,children:(0,n.jsx)(p.n,{size:16,color:"currentcolor"})})})})]}),(0,n.jsx)("div",{className:k.others,"data-draggable":"false",children:(0,n.jsx)(g.h,{iconName:"closeLine","data-draggable":"true",title:"",color:"var(--theme-icon-tertiary)",onClick:()=>{f.p.closeWindow("search")}})})]})]}),(0,n.jsx)("div",{className:k.content,"data-draggable":"false",children:(null===(a=e.sourceList)||void 0===a?void 0:a.length)?e.sourceList.map((t,i)=>{if("article"===t.sourceType||"web_search"===t.sourceType){let{data:a}=t,r=a.text.match(/\[.*?\]\((https?:\/\/[^\s)"']+).*?\)/),s=a.text.match(/\[([^\]]+)]\([^)]+\)/),c=r?r[1]:"",h=s?s[1]:"";return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsxs)("div",{className:k.searchItem,onClick:()=>{if(c)window.open(c);else{var i;null===(i=e.chatBotController)||void 0===i||i.handleReplySourceClick(t.data)}},children:[(0,n.jsxs)("div",{className:k.searchHeader,children:[(0,n.jsx)(m.E,{className:k.icon,src:o.m.getFaviconFromOrigin(c),alt:""}),(0,n.jsxs)("div",{className:k.source,children:[e.getDomainFromUrl(c)," \xb7 ",i+1]})]}),(0,n.jsx)("div",{className:k.searchTitle,children:h})]}),e.sourceList.length-1!==i&&(0,n.jsx)("div",{className:k.divider,children:(0,n.jsx)("div",{className:k.line})})]},i)}return null}):(0,n.jsxs)("div",{className:k.empty,children:[(0,n.jsx)(m.E,{className:k.image,src:(0,r.Q)(s.Z)}),(0,n.jsx)("div",{className:k.text,children:e.S.empty})]})})]})}),D=x.E.createWindow(A,{singleton:!0})},70860:function(e,t,i){i.d(t,{d:function(){return A}});var n=i(66084),a=i(52921),r=i(34491),s=i(92235),o=i(73047),l=i(34889),c=i(71576),h=i(4461),d=i(80670),u=i(5857),p=i(43939),g=i(46731),m=i(48023),f=i(90230),v=i(82005),y=i(78716),x=i.n(y),k=i(62499),b={memoImageDrawer:"memo-image-drawer--W8JSL",memoImageContent:"memo-image-content--xsSoC",image:"image--gmAcG",ocrIcon:"ocr-icon--lHeeo",imageSummary:"image-summary--td1bu",imageSummaryItem:"image-summary-item--VXRKB",imageSummaryHeader:"image-summary-header--sl8AS",itemDesc:"item-desc--cYESw",itemTitle:"item-title--S7BHc",loading:"loading--A0l8W",itemContent:"item-content--R50sZ",imageOperation:"image-operation--Ikz9D",ocrWrapper:"ocr-wrapper--M51yd",ocrContent:"ocr-content--DkXQ4",ocrContentTitle:"ocr-content-title--TQ657"},C=i(88882);class w extends r.PN{get S(){return C.S.Global.modules.MainWindow.MemoV2.MemoImageDrawer}get item(){return f.a.memoDataSources.find(e=>e.uid===this.props.uid)}get status(){var e;return(null===(e=this.item)||void 0===e?void 0:e.status)||"complete"}get statusIcon(){return"running"===this.status?"memoLoading":"failed"===this.status?"memoCheckFail":"memoCheckCircle"}get statusText(){return"running"===this.status?this.S.summarizingYourImage:"failed"===this.status?this.S.failedToSummarize:this.S.imageSummarizationComplete}handleCancelCreate(){this.isCancel=!0,this.timerId&&(clearTimeout(this.timerId),this.visible=!1)}async summaryImage(){let{uid:e,src:t,width:i,height:n}=this.props;try{await f.a.summaryImage({image:t,uid:e,width:i,height:n})}catch(e){console.error(e)}}onRetry(){this.summaryImage()}onCancel(){this.visible=!1}onViewCreate(){this.summaryImage()}onViewDestroy(){}constructor(...e){super(...e),(0,n._)(this,"props",void 0),(0,n._)(this,"visible",!0),(0,n._)(this,"isCancel",!1),(0,n._)(this,"timerId",null)}}(0,a.gn)([r.SB],w.prototype,"visible",void 0),(0,a.gn)([o.Fl],w.prototype,"S",null),(0,a.gn)([o.Fl],w.prototype,"item",null),(0,a.gn)([o.Fl],w.prototype,"status",null),(0,a.gn)([o.Fl],w.prototype,"statusIcon",null),(0,a.gn)([o.Fl],w.prototype,"statusText",null);let S=r._Y.createComponent("MemoImageDrawer",w,e=>{var t;if(!e.item)return null;let i=e.item.status;return(0,c.jsx)(p.d,{enableHorizontalStyle:!0,title:e.S.imageSummary,height:"auto",maxHeight:700,style:{borderRadius:"12px 12px 0 0",overflow:"hidden"},visible:e.visible,onDispose:()=>{e.onCancel()},children:(0,c.jsx)("div",{className:b.memoImageDrawer,children:(0,c.jsxs)("div",{className:b.memoImageContent,children:[(0,c.jsxs)("div",{className:b.image,children:[(0,c.jsx)(h.E,{src:e.props.previewSrc||e.props.src,alt:""}),(0,c.jsx)(d.J,{style:{position:"absolute"},content:(0,c.jsx)(_,{vm:e}),containerClassName:b.ocrWrapper,trigger:"click",placement:"bottomLeft",children:(0,c.jsx)(m.u,{placement:"top",title:e.S.textInImage,trigger:["hover"],children:(0,c.jsx)("div",{className:b.ocrIcon,children:(0,c.jsx)(g.J,{name:"sOcr",size:16,fill:"currentColor"})})})})]}),(0,c.jsx)("div",{className:b.imageSummary,children:(0,c.jsxs)("div",{className:b.imageSummaryItem,children:[(0,c.jsxs)("div",{className:b.imageSummaryHeader,children:[(0,c.jsxs)("div",{className:b.itemTitle,children:[(0,c.jsx)(g.J,{name:e.statusIcon,size:18,className:x()({[b.loading]:(null===(t=e.item)||void 0===t?void 0:t.status)==="running"})}),(0,c.jsx)("span",{children:e.statusText})]}),"running"===i&&(0,c.jsx)("div",{className:b.itemDesc,children:e.S.closeThisPage})]}),(!i||"complete"===i)&&(0,c.jsx)("div",{className:b.itemContent,children:e.item.description.summary})]})}),(0,c.jsxs)("div",{className:b.imageOperation,children:[i&&"complete"!==i&&(0,c.jsx)(u.z,{type:"gray",onClick:async()=>{var t;(null===(t=e.item)||void 0===t?void 0:t.uid)&&await f.a.handleCancelSummaryImage(e.item.uid),e.visible=!1},children:e.S.cancel}),"failed"===i?(0,c.jsx)(u.z,{type:"primary",onClick:()=>{e.onRetry()},children:e.S.retry}):(0,c.jsx)(u.z,{type:"primary",onClick:()=>{e.onCancel()},children:i&&"complete"!==i?e.S.runInBackground:e.S.gotIt})]})]})})})}),_=(0,k.Pi)(e=>{let{vm:t}=e;return t.item?(0,c.jsxs)("div",{className:b.ocrContent,children:[(0,c.jsxs)("p",{className:b.ocrContentTitle,children:[t.S.textInImage,":"]}),(0,c.jsx)("p",{children:t.item.ocrContent})]}):null}),T=v.t.createOpener(S);class P{async handleUploadFile(e){let t=e[0];if(!t)return;this.tmpFile=t;let i=s.m.genId();if(await this.uploadStatusManager.uploadFile({objId:i,filenameList:[t.name],module:"memo_note",location:"files"},t),"success"===this.uploadStatusManager.status&&this.imageUploadVisible){let{width:e,height:n}=await this.getImageSize(t);this.imageUploadVisible=!1,T({insertTarget:"mainWindow",src:this.uploadStatusManager.uploadResult.cdnUrl,previewSrc:this.uploadStatusManager.imgPreviewUrl,uid:i,width:e,height:n}),this.uploadStatusManager.reset()}}handleChoseFile(){"default"===this.uploadStatusManager.status&&s.m.selectFile(e=>{this.handleUploadFile(e)},{accept:l.Gi.imageFileTypes})}handleAgain(){"error"===this.uploadStatusManager.status&&this.tmpFile&&this.handleUploadFile([this.tmpFile])}onCancel(){this.imageUploadVisible=!1}async getImageSize(e){return new Promise(t=>{let i=new FileReader;i.onload=function(e){var i;let n=new Image;n.src=null===(i=e.target)||void 0===i?void 0:i.result,n.addEventListener("load",()=>{t({width:n.naturalWidth,height:n.naturalHeight})})},i.readAsDataURL(e)})}constructor(){(0,n._)(this,"imageUploadVisible",!1),(0,n._)(this,"imageMaxSize",20),(0,n._)(this,"uploadStatusManager",new l.c3({maxFileSize:this.imageMaxSize})),(0,n._)(this,"tmpFile",null),(0,o.rC)(this)}}(0,a.gn)([r.SB],P.prototype,"imageUploadVisible",void 0),(0,a.gn)([r.SB],P.prototype,"imageMaxSize",void 0),(0,a.gn)([r.SB],P.prototype,"uploadStatusManager",void 0),(0,a.gn)([r.SB],P.prototype,"tmpFile",void 0);let A=new P},49515:function(e,t,i){i.d(t,{E:function(){return f}});var n=i(71576),a=i(34491),r=i(13292),s=i(82005),o=i(11502),l=i(66084),c=i(52921),h=i(88882),d=i(92235),u=i(90180),p=i(15851);class g extends a.PN{get S(){return h.S.Global.modules.MainWindow.WriteView.Compose.AddFormat}async handleCreateFormat(e){let t=e.length>100?e.slice(0,100):e;o.M.createUserBehaviorEvent({eventName:"add_format_dialog_click",source:this.props.source,extData:{module:"add"}});try{var i,n;u.A.addCustomFormat(t),p.M.success(this.S.addFormatSuccess,this.props.insertTarget),this.props.onDisposed(),null===(i=(n=this.props).onClose)||void 0===i||i.call(n)}catch(e){p.M.error(d.m.formatErrorMsg(e),this.props.insertTarget)}}onViewCreate(){o.M.createUserBehaviorEvent({eventName:"add_format_dialog_show",source:this.props.source})}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"loading",!1)}}(0,c.gn)([a.SB],g.prototype,"loading",void 0),(0,c.gn)([a.Fl],g.prototype,"S",null);let m=a._Y.createComponent("AddFormat",g,e=>(0,n.jsx)(r.N,{fixed:"dialogRoot"===e.props.insertTarget,visible:!0,okText:e.S.add,okLoading:e.loading,title:e.S.addFormat,placeholder:e.S.placeholder,cancelText:e.S.cancel,onOk:t=>{e.handleCreateFormat(t)},onCancel:()=>{var t,i;null===(t=(i=e.props).onClose)||void 0===t||t.call(i),e.props.onDisposed(),o.M.createUserBehaviorEvent({eventName:"add_format_dialog_click",source:e.props.source,extData:{module:"cancel"}})},onEnter:t=>{e.handleCreateFormat(t)}})),f=s.t.createOpener(m)},30115:function(e,t,i){i.d(t,{F:function(){return v}});var n=i(71576),a=i(34491),r=i(82005),s=i(13292),o=i(11502),l=i(66084),c=i(52921),h=i(88882),d=i(92235),u=i(73047),p=i(15851),g=i(70174);class m extends a.PN{get S(){return h.S.Global.modules.MainWindow.WriteView.Compose.AddTone}async handleCreateTone(e){let t=e.length>100?e.slice(0,100):e;o.M.createUserBehaviorEvent({eventName:"add_tone_dialog_click",source:this.props.source,extData:{module:"add"}}),this.loading=!0;try{var i,n;await g.v.createTone({key:t,name:t,uid:d.m.genId()}),p.M.success(this.S.addToneSuccess,this.props.insertTarget),this.props.onDisposed(),null===(i=(n=this.props).onClose)||void 0===i||i.call(n)}catch(e){p.M.error(d.m.formatErrorMsg(e),this.props.insertTarget)}this.loading=!1}onViewCreate(){o.M.createUserBehaviorEvent({eventName:"add_tone_dialog_show",source:this.props.source})}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"loading",!1)}}(0,c.gn)([a.SB],m.prototype,"loading",void 0),(0,c.gn)([u.Fl],m.prototype,"S",null);let f=a._Y.createComponent("AddTone",m,e=>(0,n.jsx)(s.N,{fixed:"dialogRoot"===e.props.insertTarget,visible:!0,okText:e.S.add,okLoading:e.loading,title:e.S.addTone,placeholder:e.S.placeholder,cancelText:e.S.cancel,onOk:t=>{e.handleCreateTone(t)},onCancel:()=>{var t,i;null===(t=(i=e.props).onClose)||void 0===t||t.call(i),e.props.onDisposed(),o.M.createUserBehaviorEvent({eventName:"add_tone_dialog_click",source:e.props.source,extData:{module:"cancel"}})},onEnter:t=>{e.handleCreateTone(t)}})),v=r.t.createOpener(f)},47190:function(e,t,i){i.d(t,{y:function(){return c}});var n=i(71576),a=i(34491),r=i(78716),s=i.n(r);i(75087);var o=i(32250),l=i(46423);let c=a._Y.createComponent("BaseQuickPanel",l.Y,e=>{var t,i;let{children:a,className:r,getContainer:l}=e.props;return(0,n.jsxs)("div",{className:s()("base-quick-panel--BZJtU",r),ref:t=>{t&&(e.container=t,null==l||l(t))},style:{...null===(t=e.windowItem)||void 0===t?void 0:t.layoutManager.layoutStyle},...null===(i=e.windowItem)||void 0===i?void 0:i.layoutManager.containerEvents,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[e.windowItem&&(0,n.jsx)(o.y,{windowItem:e.windowItem}),a]})})},46423:function(e,t,i){i.d(t,{Y:function(){return l}});var n=i(66084),a=i(52921),r=i(34491),s=i(71528),o=i(41884);class l extends r.PN{get windowItem(){return o.E.getWindowItem(this.props.windowId)}registerListener(){this.listenerManager.addDocumentEventListener("mousedown",e=>{var t,i,n;let a=e.target;(null===(t=this.container)||void 0===t?void 0:t.contains(a))||this.props.controller.pinned||(null===(i=(n=this.props).onClose)||void 0===i||i.call(n),e.preventDefault(),e.stopPropagation())})}onViewCreate(){var e;if(this.registerListener(),null===(e=this.windowItem)||void 0===e||e.layoutManager.init({container:this.container,initData:this.props.layoutData,resizeTouchArea:20,getMinSize:()=>({width:500,height:230})}),this.container){let e=new MutationObserver(()=>{this.resize()});e.observe(this.container,{childList:!0,subtree:!0,characterData:!0}),this.containerObserver=e}}onViewDestroy(){var e;this.listenerManager.removeAll(),null===(e=this.containerObserver)||void 0===e||e.disconnect()}resize(){var e;null===(e=this.windowItem)||void 0===e||e.layoutManager.handleContainerContentChange(this.props.controller.scrollContainer)}constructor(...e){super(...e),(0,n._)(this,"props",void 0),(0,n._)(this,"listenerManager",new s.M),(0,n._)(this,"container",null),(0,n._)(this,"containerObserver",null)}}l=(0,a.gn)([r.Tt],l)},77176:function(e,t,i){i.d(t,{K:function(){return b}});var n=i(71576),a=i(34491),r=i(58812),s=i(66084);class o extends a.PN{constructor(...e){super(...e),(0,s._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"<path data-follow-fill=\\"#DADEE3\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M2 5.625a.625.625 0 1 0 0 1.25h12a.625.625 0 1 0 0-1.25H2Zm0 3.5a.625.625 0 1 0 0 1.25h12a.625.625 0 1 0 0-1.25H2Z\\" fill=\\"#DADEE3\\"/>","viewBox":"0 0 16 16"}');let c=a._Y.createComponent("DragIcon",o,e=>(0,n.jsx)(r.s,{...e.props,name:"DragIcon",iconData:l}));var h=i(48023),d=i(84853),u=i(3658),p=i(90226),g=i(78716),m=i.n(g),f={quickPanelHeader:"quick-panel-header--eaKWp",dragIcon:"drag-icon--a9Nyl",dragging:"dragging--a828Q",lt:"lt--Awov7",rt:"rt--_RsXq",actionBtn:"action-btn--cauSU"},v=i(52921),y=i(88882),x=i(46423);class k extends a.PN{get dragging(){var e;return null===(e=this.baseQuickPanelVm.windowItem)||void 0===e?void 0:e.layoutManager.dragging}get S(){return y.S.Global.modules.QuickPanel.Components.QuickPanelHeader}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,s._)(this,"props",void 0),(0,s._)(this,"baseQuickPanelVm",(0,a.qp)(x.Y))}}(0,v.gn)([a.Do],k.prototype,"baseQuickPanelVm",void 0),(0,v.gn)([a.Fl],k.prototype,"dragging",null),(0,v.gn)([a.Fl],k.prototype,"S",null);let b=a._Y.createComponent("QuickPanelHeader",k,e=>{let{title:t,leftExtra:i,rightExtra:a,onClose:r,hidePin:s,togglePinned:o,pinned:l,className:g}=e.props;return(0,n.jsxs)("div",{className:m()(f.quickPanelHeader,g),children:[(0,n.jsx)("div",{className:m()(f.dragIcon,{[f.dragging]:e.dragging}),children:(0,n.jsx)(c,{size:16,color:"var(--theme-icon-secondary)"})}),(0,n.jsxs)("div",{className:f.lt,children:[t,i]}),(0,n.jsxs)("div",{className:f.rt,children:[a,!s&&(0,n.jsx)(h.u,{title:l?e.S.unpin:e.S.pin,placement:"top",children:(0,n.jsx)("div",{className:f.actionBtn,onClick:()=>null==o?void 0:o(!l),"data-draggable":"false",children:l?(0,n.jsx)(d.h,{size:16,color:"var(--theme-icon-brand)"}):(0,n.jsx)(u.F,{size:16,color:"var(--theme-icon-secondary)"})})}),(0,n.jsx)(h.u,{title:e.S.close,placement:"top",children:(0,n.jsx)("div",{"data-draggable":"false",className:f.actionBtn,onClick:()=>{null==r||r()},children:(0,n.jsx)(p.T,{size:16,color:"var(--theme-icon-secondary)"})})})]})]})})},92880:function(e,t,i){i.d(t,{d:function(){return b}});var n=i(71576),a=i(34491),r=i(54493),s=i(21609),o=i(48023),l=i(90226),c=i(46731),h=i(2199),d=i(78716),u=i.n(d),p=i(62499),g={quickPanelQuote:"quick-panel-quote--WXvKl",wrapper:"wrapper--oLx9n",collapseBtn:"collapse-btn--kl9KW",arrowIcon:"arrow-icon--jNFaM",content:"content--PQnsf",fold:"fold--IfRT9",input:"input--L__gv",toolbar:"toolbar--Nm7l9",iconBtn:"icon-btn--n_LXD",disabled:"disabled--Sb14X"},m=i(66084),f=i(52921),v=i(88882),y=i(92235),x=i(73047);class k extends a.PN{onContentChange(){this.content=this.props.content}get S(){return v.S.Global.modules.LiteWindow.OperationPanel}get speaking(){return h._.speakingMsgId===this.speakingMsgId}get disabled(){return!this.content.trim()}toggleFold(){var e,t,i;this.fold=!this.fold,null===(e=(t=this.props).onFoldChange)||void 0===e||e.call(t,this.fold),null===(i=this.contentNode)||void 0===i||i.scrollTo({top:0})}onViewCreate(){}onViewDestroy(){}handleCopyClick(){y.m.copyToClipboard(this.content),this.copied=!0,setTimeout(()=>{this.copied=!1},2e3)}constructor(...e){super(...e),(0,m._)(this,"props",void 0),(0,m._)(this,"contentNode",null),(0,m._)(this,"speakingMsgId",y.m.genId()),(0,m._)(this,"fold",!1),(0,m._)(this,"copied",!1),(0,m._)(this,"editing",!1),(0,m._)(this,"content","")}}(0,f.gn)([a.SB],k.prototype,"fold",void 0),(0,f.gn)([a.SB],k.prototype,"copied",void 0),(0,f.gn)([a.SB],k.prototype,"editing",void 0),(0,f.gn)([a.SB],k.prototype,"content",void 0),(0,f.gn)([(0,a.YP)(e=>[e.props.content])],k.prototype,"onContentChange",null),(0,f.gn)([x.Fl],k.prototype,"S",null),(0,f.gn)([x.Fl],k.prototype,"speaking",null),(0,f.gn)([x.Fl],k.prototype,"disabled",null);let b=a._Y.createComponent("QuickPanelQuote",k,e=>{let{className:t}=e.props;return(0,n.jsxs)("div",{className:u()(g.quickPanelQuote,{[g.fold]:e.fold},t),children:[(0,n.jsxs)("div",{className:g.wrapper,children:[(0,n.jsx)("div",{className:g.content,ref:t=>{e.contentNode=t},children:e.editing?(0,n.jsx)(r.g,{className:g.input,getTextAreaRef:e=>{e.focus({cursor:"end"})},value:e.content,onChange:t=>{e.content=t.target.value},onKeyDown:e=>{e.stopPropagation()}}):e.content}),(0,n.jsx)(C,{vm:e,text:e.props.content})]}),!e.editing&&(0,n.jsx)("div",{className:g.collapseBtn,onClick:()=>{e.toggleFold()},children:(0,n.jsx)(s.v,{size:12,color:"var(--theme-icon-tertiary)",className:g.arrowIcon,style:{transform:e.fold?"rotate(180deg)":"rotate(0deg)"}})})]})}),C=(0,p.Pi)(function(e){let{vm:t,text:i}=e;return t.fold?t.editing?(0,n.jsxs)("div",{className:g.toolbar,children:[(0,n.jsx)(o.u,{title:t.S.cancel,children:(0,n.jsx)("div",{className:g.iconBtn,onClick:()=>{t.editing=!1,t.content=t.props.content},children:(0,n.jsx)(l.T,{size:16,color:"currentColor"})})}),(0,n.jsx)(o.u,{title:t.S.save,children:(0,n.jsx)("div",{className:u()(g.iconBtn,{[g.disabled]:t.disabled}),onClick:()=>{var e,i;t.disabled||(t.editing=!1,null===(e=(i=t.props).onTextChange)||void 0===e||e.call(i,t.content))},children:(0,n.jsx)(c.J,{name:"monicaSuccess",size:16,color:"currentColor",style:{color:"".concat(t.disabled?"var(--theme-icon-quaternary)":"var(--theme-function-success)")}})})})]}):(0,n.jsxs)("div",{className:g.toolbar,children:[(0,n.jsx)(o.u,{open:t.copied,title:(0,n.jsx)("div",{className:g.copyTooltips,children:t.copied?t.S.copied:t.S.copy}),children:(0,n.jsx)("div",{className:g.iconBtn,onClick:t.handleCopyClick.bind(t),children:(0,n.jsx)(c.J,{name:t.copied?"monicaSuccess":"monicaCopy",size:16,color:"currentColor",style:{color:t.copied?"var(--theme-function-success)":void 0}})})}),!t.props.disabledEdit&&(0,n.jsx)(o.u,{title:t.S.edit,children:(0,n.jsx)("div",{className:g.iconBtn,onClick:()=>{t.editing=!0},children:(0,n.jsx)(c.J,{name:"monicaEditLine",size:16,color:"currentColor"})})}),(0,n.jsx)(o.u,{title:t.speaking?t.S.stop:t.S.speak,placement:"top",children:(0,n.jsx)("span",{className:g.iconBtn,onClick:()=>{h._.speakingMsgId===t.speakingMsgId?h._.cancelSpeak():h._.speakMessage({id:t.speakingMsgId,text:i})},children:(0,n.jsx)(c.J,{name:t.speaking?"monicaSoundOff":"monicaSound",size:16,color:"currentColor"})})})]}):null})}}]);