(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1951],{1560:function(e,t,i){Promise.resolve().then(i.bind(i,93683)),Promise.resolve().then(i.bind(i,84484)),Promise.resolve().then(i.bind(i,14556)),Promise.resolve().then(i.bind(i,98451)),Promise.resolve().then(i.bind(i,60794)),Promise.resolve().then(i.bind(i,41246))},58380:function(e,t,i){"use strict";i.d(t,{ZP:function(){return D}});var o=i(75087),a=i(78716),n=i.n(a),r=i(86741),s=i(10203),l=i(17027),c=i(54274);let d=o.createContext(null),p=d.Provider,m=o.createContext(null),h=m.Provider;var g=i(83497),u=i(99202),v=i(93304),C=i(46996),x=i(59645),y=i(35549),b=i(56033),f=i(87390),w=i(44586),S=i(67639);let A=e=>{let{componentCls:t,antCls:i}=e,o="".concat(t,"-group");return{[o]:Object.assign(Object.assign({},(0,f.Wf)(e)),{display:"inline-block",fontSize:0,["&".concat(o,"-rtl")]:{direction:"rtl"},["".concat(i,"-badge ").concat(i,"-badge-count")]:{zIndex:1},["> ".concat(i,"-badge:not(:first-child) > ").concat(i,"-button-wrapper")]:{borderInlineStart:"none"}})}},j=e=>{let{componentCls:t,wrapperMarginInlineEnd:i,colorPrimary:o,radioSize:a,motionDurationSlow:n,motionDurationMid:r,motionEaseInOutCirc:s,colorBgContainer:l,colorBorder:c,lineWidth:d,colorBgContainerDisabled:p,colorTextDisabled:m,paddingXS:h,dotColorDisabled:g,lineType:u,radioColor:v,radioBgColor:C,calc:x}=e,y="".concat(t,"-inner"),w=x(a).sub(x(4).mul(2)),S=x(1).mul(a).equal();return{["".concat(t,"-wrapper")]:Object.assign(Object.assign({},(0,f.Wf)(e)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:i,cursor:"pointer",["&".concat(t,"-wrapper-rtl")]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:e.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},["".concat(t,"-checked::after")]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:"".concat((0,b.unit)(d)," ").concat(u," ").concat(o),borderRadius:"50%",visibility:"hidden",content:'""'},[t]:Object.assign(Object.assign({},(0,f.Wf)(e)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),["".concat(t,"-wrapper:hover &,\n        &:hover ").concat(y)]:{borderColor:o},["".concat(t,"-input:focus-visible + ").concat(y)]:Object.assign({},(0,f.oN)(e)),["".concat(t,":hover::after, ").concat(t,"-wrapper:hover &::after")]:{visibility:"visible"},["".concat(t,"-inner")]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:S,height:S,marginBlockStart:x(1).mul(a).div(-2).equal(),marginInlineStart:x(1).mul(a).div(-2).equal(),backgroundColor:v,borderBlockStart:0,borderInlineStart:0,borderRadius:S,transform:"scale(0)",opacity:0,transition:"all ".concat(n," ").concat(s),content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:S,height:S,backgroundColor:l,borderColor:c,borderStyle:"solid",borderWidth:d,borderRadius:"50%",transition:"all ".concat(r)},["".concat(t,"-input")]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},["".concat(t,"-checked")]:{[y]:{borderColor:o,backgroundColor:C,"&::after":{transform:"scale(".concat(e.calc(e.dotSize).div(a).equal(),")"),opacity:1,transition:"all ".concat(n," ").concat(s)}}},["".concat(t,"-disabled")]:{cursor:"not-allowed",[y]:{backgroundColor:p,borderColor:c,cursor:"not-allowed","&::after":{backgroundColor:g}},["".concat(t,"-input")]:{cursor:"not-allowed"},["".concat(t,"-disabled + span")]:{color:m,cursor:"not-allowed"},["&".concat(t,"-checked")]:{[y]:{"&::after":{transform:"scale(".concat(x(w).div(a).equal({unit:!1}),")")}}}},["span".concat(t," + *")]:{paddingInlineStart:h,paddingInlineEnd:h}})}},k=e=>{let{buttonColor:t,controlHeight:i,componentCls:o,lineWidth:a,lineType:n,colorBorder:r,motionDurationSlow:s,motionDurationMid:l,buttonPaddingInline:c,fontSize:d,buttonBg:p,fontSizeLG:m,controlHeightLG:h,controlHeightSM:g,paddingXS:u,borderRadius:v,borderRadiusSM:C,borderRadiusLG:x,buttonCheckedBg:y,buttonSolidCheckedColor:w,colorTextDisabled:S,colorBgContainerDisabled:A,buttonCheckedBgDisabled:j,buttonCheckedColorDisabled:k,colorPrimary:N,colorPrimaryHover:_,colorPrimaryActive:T,buttonSolidCheckedBg:I,buttonSolidCheckedHoverBg:M,buttonSolidCheckedActiveBg:L,calc:B}=e;return{["".concat(o,"-button-wrapper")]:{position:"relative",display:"inline-block",height:i,margin:0,paddingInline:c,paddingBlock:0,color:t,fontSize:d,lineHeight:(0,b.unit)(B(i).sub(B(a).mul(2)).equal()),background:p,border:"".concat((0,b.unit)(a)," ").concat(n," ").concat(r),borderBlockStartWidth:B(a).add(.02).equal(),borderInlineStartWidth:0,borderInlineEndWidth:a,cursor:"pointer",transition:["color ".concat(l),"background ".concat(l),"box-shadow ".concat(l)].join(","),a:{color:t},["> ".concat(o,"-button")]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:B(a).mul(-1).equal(),insetInlineStart:B(a).mul(-1).equal(),display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:a,paddingInline:0,backgroundColor:r,transition:"background-color ".concat(s),content:'""'}},"&:first-child":{borderInlineStart:"".concat((0,b.unit)(a)," ").concat(n," ").concat(r),borderStartStartRadius:v,borderEndStartRadius:v},"&:last-child":{borderStartEndRadius:v,borderEndEndRadius:v},"&:first-child:last-child":{borderRadius:v},["".concat(o,"-group-large &")]:{height:h,fontSize:m,lineHeight:(0,b.unit)(B(h).sub(B(a).mul(2)).equal()),"&:first-child":{borderStartStartRadius:x,borderEndStartRadius:x},"&:last-child":{borderStartEndRadius:x,borderEndEndRadius:x}},["".concat(o,"-group-small &")]:{height:g,paddingInline:B(u).sub(a).equal(),paddingBlock:0,lineHeight:(0,b.unit)(B(g).sub(B(a).mul(2)).equal()),"&:first-child":{borderStartStartRadius:C,borderEndStartRadius:C},"&:last-child":{borderStartEndRadius:C,borderEndEndRadius:C}},"&:hover":{position:"relative",color:N},"&:has(:focus-visible)":Object.assign({},(0,f.oN)(e)),["".concat(o,"-inner, input[type='checkbox'], input[type='radio']")]:{width:0,height:0,opacity:0,pointerEvents:"none"},["&-checked:not(".concat(o,"-button-wrapper-disabled)")]:{zIndex:1,color:N,background:y,borderColor:N,"&::before":{backgroundColor:N},"&:first-child":{borderColor:N},"&:hover":{color:_,borderColor:_,"&::before":{backgroundColor:_}},"&:active":{color:T,borderColor:T,"&::before":{backgroundColor:T}}},["".concat(o,"-group-solid &-checked:not(").concat(o,"-button-wrapper-disabled)")]:{color:w,background:I,borderColor:I,"&:hover":{color:w,background:M,borderColor:M},"&:active":{color:w,background:L,borderColor:L}},"&-disabled":{color:S,backgroundColor:A,borderColor:r,cursor:"not-allowed","&:first-child, &:hover":{color:S,backgroundColor:A,borderColor:r}},["&-disabled".concat(o,"-button-wrapper-checked")]:{color:k,backgroundColor:j,borderColor:r,boxShadow:"none"}}}};var N=(0,w.I$)("Radio",e=>{let{controlOutline:t,controlOutlineWidth:i}=e,o="0 0 0 ".concat((0,b.unit)(i)," ").concat(t),a=(0,S.TS)(e,{radioFocusShadow:o,radioButtonFocusShadow:o});return[A(a),j(a),k(a)]},e=>{let{wireframe:t,padding:i,marginXS:o,lineWidth:a,fontSizeLG:n,colorText:r,colorBgContainer:s,colorTextDisabled:l,controlItemBgActiveDisabled:c,colorTextLightSolid:d,colorPrimary:p,colorPrimaryHover:m,colorPrimaryActive:h,colorWhite:g}=e;return{radioSize:n,dotSize:t?n-8:n-(4+a)*2,dotColorDisabled:l,buttonSolidCheckedColor:d,buttonSolidCheckedBg:p,buttonSolidCheckedHoverBg:m,buttonSolidCheckedActiveBg:h,buttonBg:s,buttonCheckedBg:s,buttonColor:r,buttonCheckedBgDisabled:c,buttonCheckedColorDisabled:l,buttonPaddingInline:i-a,wrapperMarginInlineEnd:o,radioColor:t?p:g,radioBgColor:t?s:p}},{unitless:{radioSize:!0,dotSize:!0}}),_=i(86145),T=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i};let I=o.forwardRef((e,t)=>{var i,a;let r=o.useContext(d),s=o.useContext(m),{getPrefixCls:c,direction:p,radio:h}=o.useContext(l.E_),b=o.useRef(null),f=(0,u.sQ)(t,b),{isFormItemInput:w}=o.useContext(y.aM),{prefixCls:S,className:A,rootClassName:j,children:k,style:I}=e,M=T(e,["prefixCls","className","rootClassName","children","style"]),L=c("radio",S),B="button"===((null==r?void 0:r.optionType)||s),E=B?"".concat(L,"-button"):L,D=(0,_.Z)(L),[P,F]=N(L,D),R=Object.assign({},M),V=o.useContext(x.Z);r&&(R.name=r.name,R.onChange=t=>{var i,o;null===(i=e.onChange)||void 0===i||i.call(e,t),null===(o=null==r?void 0:r.onChange)||void 0===o||o.call(r,t)},R.checked=e.value===r.value,R.disabled=null!==(i=R.disabled)&&void 0!==i?i:r.disabled),R.disabled=null!==(a=R.disabled)&&void 0!==a?a:V;let U=n()("".concat(E,"-wrapper"),{["".concat(E,"-wrapper-checked")]:R.checked,["".concat(E,"-wrapper-disabled")]:R.disabled,["".concat(E,"-wrapper-rtl")]:"rtl"===p,["".concat(E,"-wrapper-in-form-item")]:w},null==h?void 0:h.className,A,j,F,D);return P(o.createElement(v.Z,{component:"Radio",disabled:R.disabled},o.createElement("label",{className:U,style:Object.assign(Object.assign({},null==h?void 0:h.style),I),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},o.createElement(g.default,Object.assign({},R,{className:n()(R.className,!B&&C.A),type:"radio",prefixCls:E,ref:f})),void 0!==k?o.createElement("span",null,k):null)))}),M=o.forwardRef((e,t)=>{let{getPrefixCls:i,direction:a}=o.useContext(l.E_),[d,m]=(0,r.Z)(e.defaultValue,{value:e.value}),{prefixCls:h,className:g,rootClassName:u,options:v,buttonStyle:C="outline",disabled:x,children:y,size:b,style:f,id:w,onMouseEnter:S,onMouseLeave:A,onFocus:j,onBlur:k}=e,T=i("radio",h),M="".concat(T,"-group"),L=(0,_.Z)(T),[B,E]=N(T,L),D=y;v&&v.length>0&&(D=v.map(e=>"string"==typeof e||"number"==typeof e?o.createElement(I,{key:e.toString(),prefixCls:T,disabled:x,value:e,checked:d===e},e):o.createElement(I,{key:"radio-group-value-options-".concat(e.value),prefixCls:T,disabled:e.disabled||x,value:e.value,checked:d===e.value,title:e.title,style:e.style,id:e.id,required:e.required},e.label)));let P=(0,c.Z)(b),F=n()(M,"".concat(M,"-").concat(C),{["".concat(M,"-").concat(P)]:P,["".concat(M,"-rtl")]:"rtl"===a},g,u,E,L);return B(o.createElement("div",Object.assign({},(0,s.Z)(e,{aria:!0,data:!0}),{className:F,style:f,onMouseEnter:S,onMouseLeave:A,onFocus:j,onBlur:k,id:w,ref:t}),o.createElement(p,{value:{onChange:t=>{let i=t.target.value;"value"in e||m(i);let{onChange:o}=e;o&&i!==d&&o(t)},value:d,disabled:e.disabled,name:e.name,optionType:e.optionType}},D)))});var L=o.memo(M),B=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i},E=o.forwardRef((e,t)=>{let{getPrefixCls:i}=o.useContext(l.E_),{prefixCls:a}=e,n=B(e,["prefixCls"]),r=i("radio",a);return o.createElement(h,{value:"button"},o.createElement(I,Object.assign({prefixCls:r},n,{type:"radio",ref:t})))});I.Button=E,I.Group=L,I.__ANT_RADIO=!0;var D=I},98278:function(e,t){"use strict";var i,o;void 0!==(o="function"==typeof(i=e=>{var t,i,o,a,n=(e,t)=>{if(e===k)return k;var i=e.target,o=i.length,a=e._indexes;a=a.slice(0,a.len).sort((e,t)=>e-t);for(var n="",r=0,s=0,l=!1,e=[],c=0;c<o;++c){var d=i[c];if(a[s]===c){if(++s,l||(l=!0,e.push(n),n=""),s===a.length){n+=d,e.push(t(n,r++)),n="",e.push(i.substr(c+1));break}}else l&&(l=!1,e.push(t(n,r++)),n="");n+=d}return e},r=e=>{"string"!=typeof e&&(e="");var t=h(e);return{target:e,_targetLower:t._lower,_targetLowerCodes:t.lowerCodes,_nextBeginningIndexes:k,_bitflags:t.bitflags,score:k,_indexes:[0],obj:k}},s=e=>{"string"!=typeof e&&(e="");var t=h(e=e.trim()),i=[];if(t.containsSpace){var o=e.split(/\s+/);o=[...new Set(o)];for(var a=0;a<o.length;a++)if(""!==o[a]){var n=h(o[a]);i.push({lowerCodes:n.lowerCodes,_lower:o[a].toLowerCase(),containsSpace:!1})}}return{lowerCodes:t.lowerCodes,bitflags:t.bitflags,containsSpace:t.containsSpace,_lower:t._lower,spaceSearches:i}},l=e=>{if(e.length>999)return r(e);var t=v.get(e);return void 0!==t||(t=r(e),v.set(e,t)),t},c=e=>{if(e.length>999)return s(e);var t=C.get(e);return void 0!==t||(t=s(e),C.set(e,t)),t},d=(e,t,i)=>{var o=[];o.total=t.length;var a=i&&i.limit||S;if(i&&i.key)for(var n=0;n<t.length;n++){var r=t[n],s=f(r,i.key);if(s){w(s)||(s=l(s)),s.score=A,s._indexes.len=0;var c=s;if(c={target:c.target,_targetLower:"",_targetLowerCodes:k,_nextBeginningIndexes:k,_bitflags:0,score:s.score,_indexes:k,obj:r},o.push(c),o.length>=a)break}}else if(i&&i.keys)for(var n=0;n<t.length;n++){for(var r=t[n],d=Array(i.keys.length),p=i.keys.length-1;p>=0;--p){var s=f(r,i.keys[p]);if(!s){d[p]=k;continue}w(s)||(s=l(s)),s.score=A,s._indexes.len=0,d[p]=s}if(d.obj=r,d.score=A,o.push(d),o.length>=a)break}else for(var n=0;n<t.length;n++){var s=t[n];if(s&&(w(s)||(s=l(s)),s.score=A,s._indexes.len=0,o.push(s),o.length>=a))break}return o},p=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!1===i&&e.containsSpace)return m(e,t);for(var o=e._lower,a=e.lowerCodes,n=a[0],r=t._targetLowerCodes,s=a.length,l=r.length,c=0,d=0,p=0;;){var h=n===r[d];if(h){if(x[p++]=d,++c===s)break;n=a[c]}if(++d>=l)return k}var c=0,g=!1,v=0,C=t._nextBeginningIndexes;C===k&&(C=t._nextBeginningIndexes=u(t.target));var b=0;if((d=0===x[0]?0:C[x[0]-1])!==l)for(;;)if(d>=l){if(c<=0||++b>200)break;--c,d=C[y[--v]]}else{var h=a[c]===r[d];if(h){if(y[v++]=d,++c===s){g=!0;break}++d}else d=C[d]}var f=t._targetLower.indexOf(o,x[0]),w=~f;if(w&&!g)for(var S=0;S<p;++S)x[S]=f+S;var A=!1;if(w&&(A=t._nextBeginningIndexes[f-1]===f),g)var j=y,N=v;else var j=x,N=p;for(var _=0,T=0,S=1;S<s;++S)j[S]-j[S-1]!=1&&(_-=j[S],++T);if(_-=(12+(j[s-1]-j[0]-(s-1)))*T,0!==j[0]&&(_-=j[0]*j[0]*.2),g){for(var I=1,S=C[0];S<l;S=C[S])++I;I>24&&(_*=(I-24)*10)}else _*=1e3;w&&(_/=1+s*s*1),A&&(_/=1+s*s*1),_-=l-s,t.score=_;for(var S=0;S<N;++S)t._indexes[S]=j[S];return t._indexes.len=N,t},m=(e,t)=>{for(var i=new Set,o=0,a=k,n=0,r=e.spaceSearches,s=0;s<r.length;++s){if((a=p(r[s],t))===k)return k;o+=a.score,a._indexes[0]<n&&(o-=n-a._indexes[0]),n=a._indexes[0];for(var l=0;l<a._indexes.len;++l)i.add(a._indexes[l])}var c=p(e,t,!0);if(c!==k&&c.score>o)return c;a.score=o;var s=0;for(let e of i)a._indexes[s++]=e;return a._indexes.len=s,a},h=e=>{for(var t=e.length,i=e.toLowerCase(),o=[],a=0,n=!1,r=0;r<t;++r){var s=o[r]=i.charCodeAt(r);if(32===s){n=!0;continue}a|=1<<(s>=97&&s<=122?s-97:s>=48&&s<=57?26:s<=127?30:31)}return{lowerCodes:o,bitflags:a,containsSpace:n,_lower:i}},g=e=>{for(var t=e.length,i=[],o=0,a=!1,n=!1,r=0;r<t;++r){var s=e.charCodeAt(r),l=s>=65&&s<=90,c=l||s>=97&&s<=122||s>=48&&s<=57,d=l&&!a||!n||!c;a=l,n=c,d&&(i[o++]=r)}return i},u=e=>{for(var t=e.length,i=g(e),o=[],a=i[0],n=0,r=0;r<t;++r)a>r?o[r]=a:(a=i[++n],o[r]=void 0===a?t:a);return o},v=new Map,C=new Map,x=[],y=[],b=e=>{for(var t=A,i=e.length,o=0;o<i;++o){var a=e[o];if(a!==k){var n=a.score;n>t&&(t=n)}}return t===A?k:t},f=(e,t)=>{var i=e[t];if(void 0!==i)return i;var o=t;Array.isArray(t)||(o=t.split("."));for(var a=o.length,n=-1;e&&++n<a;)e=e[o[n]];return e},w=e=>"object"==typeof e,S=1/0,A=-1/0,j=[];j.total=0;var k=null,N=(t=[],i=0,o={},a=e=>{for(var o=0,a=t[o],n=1;n<i;){var r=n+1;o=n,r<i&&t[r].score<t[n].score&&(o=r),t[o-1>>1]=t[o],n=1+(o<<1)}for(var s=o-1>>1;o>0&&a.score<t[s].score;s=(o=s)-1>>1)t[o]=t[s];t[o]=a},o.add=e=>{var o=i;t[i++]=e;for(var a=o-1>>1;o>0&&e.score<t[a].score;a=(o=a)-1>>1)t[o]=t[a];t[o]=e},o.poll=e=>{if(0!==i){var o=t[0];return t[0]=t[--i],a(),o}},o.peek=e=>{if(0!==i)return t[0]},o.replaceTop=e=>{t[0]=e,a()},o);return{single:(e,t)=>{if("farzher"==e)return{target:"farzher was here (^-^*)/",score:0,_indexes:[0]};if(!e||!t)return k;var i=c(e);w(t)||(t=l(t));var o=i.bitflags;return(o&t._bitflags)!==o?k:p(i,t)},go:(e,t,i)=>{if("farzher"==e)return[{target:"farzher was here (^-^*)/",score:0,_indexes:[0],obj:t?t[0]:k}];if(!e)return i&&i.all?d(e,t,i):j;var o=c(e),a=o.bitflags;o.containsSpace;var n=i&&i.threshold||A,r=i&&i.limit||S,s=0,m=0,h=t.length;if(i&&i.key)for(var g=i.key,u=0;u<h;++u){var v=t[u],C=f(v,g);if(C&&(w(C)||(C=l(C)),(a&C._bitflags)===a)){var x=p(o,C);x!==k&&!(x.score<n)&&(x={target:x.target,_targetLower:"",_targetLowerCodes:k,_nextBeginningIndexes:k,_bitflags:0,score:x.score,_indexes:x._indexes,obj:v},s<r?(N.add(x),++s):(++m,x.score>N.peek().score&&N.replaceTop(x)))}}else if(i&&i.keys)for(var y=i.scoreFn||b,_=i.keys,T=_.length,u=0;u<h;++u){for(var v=t[u],I=Array(T),M=0;M<T;++M){var g=_[M],C=f(v,g);if(!C){I[M]=k;continue}w(C)||(C=l(C)),(a&C._bitflags)!==a?I[M]=k:I[M]=p(o,C)}I.obj=v;var L=y(I);L!==k&&!(L<n)&&(I.score=L,s<r?(N.add(I),++s):(++m,L>N.peek().score&&N.replaceTop(I)))}else for(var u=0;u<h;++u){var C=t[u];if(C&&(w(C)||(C=l(C)),(a&C._bitflags)===a)){var x=p(o,C);x!==k&&!(x.score<n)&&(s<r?(N.add(x),++s):(++m,x.score>N.peek().score&&N.replaceTop(x)))}}if(0===s)return j;for(var B=Array(s),u=s-1;u>=0;--u)B[u]=N.poll();return B.total=s+m,B},highlight:(e,t,i)=>{if("function"==typeof t)return n(e,t);if(e===k)return k;void 0===t&&(t="<b>"),void 0===i&&(i="</b>");var o="",a=0,r=!1,s=e.target,l=s.length,c=e._indexes;c=c.slice(0,c.len).sort((e,t)=>e-t);for(var d=0;d<l;++d){var p=s[d];if(c[a]===d){if(++a,r||(r=!0,o+=t),a===c.length){o+=p+i+s.substr(d+1);break}}else r&&(r=!1,o+=i);o+=p}return o},prepare:r,indexes:e=>e._indexes.slice(0,e._indexes.len).sort((e,t)=>e-t),cleanup:()=>{v.clear(),C.clear(),x=[],y=[]}}})?i.apply(t,[]):i)&&(e.exports=o)},11680:function(e,t,i){"use strict";var o,a;void 0!==(a="function"==typeof(o=function(){var e,t,i,o,a,n={},r={},s={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},l={currentLocale:s.currentLocale,zeroFormat:s.zeroFormat,nullFormat:s.nullFormat,defaultFormat:s.defaultFormat,scalePercentBy100:s.scalePercentBy100};function c(e,t){this._input=e,this._value=t}return(o=function(e){var t,i,r,s;if(o.isNumeral(e))t=e.value();else if(0===e||void 0===e)t=0;else if(null===e||a.isNaN(e))t=null;else if("string"==typeof e){if(l.zeroFormat&&e===l.zeroFormat)t=0;else if(l.nullFormat&&e===l.nullFormat||!e.replace(/[^0-9]+/g,"").length)t=null;else{for(i in n)if((s="function"==typeof n[i].regexps.unformat?n[i].regexps.unformat():n[i].regexps.unformat)&&e.match(s)){r=n[i].unformat;break}t=(r=r||o._.stringToNumber)(e)}}else t=Number(e)||null;return new c(e,t)}).version="2.0.6",o.isNumeral=function(e){return e instanceof c},o._=a={numberToFormat:function(e,t,i){var a,n,s,l,c,d,p,m=r[o.options.currentLocale],h=!1,g=!1,u=0,v="",C="",x=!1;if(n=Math.abs(e=e||0),o._.includes(t,"(")?(h=!0,t=t.replace(/[\(|\)]/g,"")):(o._.includes(t,"+")||o._.includes(t,"-"))&&(c=o._.includes(t,"+")?t.indexOf("+"):e<0?t.indexOf("-"):-1,t=t.replace(/[\+|\-]/g,"")),o._.includes(t,"a")&&(a=!!(a=t.match(/a(k|m|b|t)?/))&&a[1],o._.includes(t," a")&&(v=" "),t=t.replace(RegExp(v+"a[kmbt]?"),""),n>=1e12&&!a||"t"===a?(v+=m.abbreviations.trillion,e/=1e12):n<1e12&&n>=1e9&&!a||"b"===a?(v+=m.abbreviations.billion,e/=1e9):n<1e9&&n>=1e6&&!a||"m"===a?(v+=m.abbreviations.million,e/=1e6):(n<1e6&&n>=1e3&&!a||"k"===a)&&(v+=m.abbreviations.thousand,e/=1e3)),o._.includes(t,"[.]")&&(g=!0,t=t.replace("[.]",".")),s=e.toString().split(".")[0],l=t.split(".")[1],d=t.indexOf(","),u=(t.split(".")[0].split(",")[0].match(/0/g)||[]).length,l?(o._.includes(l,"[")?(l=(l=l.replace("]","")).split("["),C=o._.toFixed(e,l[0].length+l[1].length,i,l[1].length)):C=o._.toFixed(e,l.length,i),s=C.split(".")[0],C=o._.includes(C,".")?m.delimiters.decimal+C.split(".")[1]:"",g&&0===Number(C.slice(1))&&(C="")):s=o._.toFixed(e,0,i),v&&!a&&Number(s)>=1e3&&v!==m.abbreviations.trillion)switch(s=String(Number(s)/1e3),v){case m.abbreviations.thousand:v=m.abbreviations.million;break;case m.abbreviations.million:v=m.abbreviations.billion;break;case m.abbreviations.billion:v=m.abbreviations.trillion}if(o._.includes(s,"-")&&(s=s.slice(1),x=!0),s.length<u)for(var y=u-s.length;y>0;y--)s="0"+s;return d>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m.delimiters.thousands)),0===t.indexOf(".")&&(s=""),p=s+C+(v||""),h?p=(h&&x?"(":"")+p+(h&&x?")":""):c>=0?p=0===c?(x?"-":"+")+p:p+(x?"-":"+"):x&&(p="-"+p),p},stringToNumber:function(e){var t,i,o,a=r[l.currentLocale],n=e,s={thousand:3,million:6,billion:9,trillion:12};if(l.zeroFormat&&e===l.zeroFormat)i=0;else if(l.nullFormat&&e===l.nullFormat||!e.replace(/[^0-9]+/g,"").length)i=null;else{for(t in i=1,"."!==a.delimiters.decimal&&(e=e.replace(/\./g,"").replace(a.delimiters.decimal,".")),s)if(o=RegExp("[^a-zA-Z]"+a.abbreviations[t]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),n.match(o)){i*=Math.pow(10,s[t]);break}i*=((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e=e.replace(/[^0-9\.]+/g,""))}return i},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return -1!==e.indexOf(t)},insert:function(e,t,i){return e.slice(0,i)+t+e.slice(i)},reduce:function(e,t){if(this===null)throw TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw TypeError(t+" is not a function");var i,o=Object(e),a=o.length>>>0,n=0;if(3==arguments.length)i=arguments[2];else{for(;n<a&&!(n in o);)n++;if(n>=a)throw TypeError("Reduce of empty array with no initial value");i=o[n++]}for(;n<a;n++)n in o&&(i=t(i,o[n],n,o));return i},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var i=a.multiplier(t);return e>i?e:i},1)},toFixed:function(e,t,i,o){var a,n,r,s,l=e.toString().split("."),c=t-(o||0);return r=Math.pow(10,a=2===l.length?Math.min(Math.max(l[1].length,c),t):c),s=(i(e+"e+"+a)/r).toFixed(a),o>t-a&&(n=RegExp("\\.?0{1,"+(o-(t-a))+"}$"),s=s.replace(n,"")),s}},o.options=l,o.formats=n,o.locales=r,o.locale=function(e){return e&&(l.currentLocale=e.toLowerCase()),l.currentLocale},o.localeData=function(e){if(!e)return r[l.currentLocale];if(!r[e=e.toLowerCase()])throw Error("Unknown locale : "+e);return r[e]},o.reset=function(){for(var e in s)l[e]=s[e]},o.zeroFormat=function(e){l.zeroFormat="string"==typeof e?e:null},o.nullFormat=function(e){l.nullFormat="string"==typeof e?e:null},o.defaultFormat=function(e){l.defaultFormat="string"==typeof e?e:"0.0"},o.register=function(e,t,i){if(t=t.toLowerCase(),this[e+"s"][t])throw TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=i,i},o.validate=function(e,t){var i,a,n,r,s,l,c,d;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)),(e=e.trim()).match(/^\d+$/))return!0;if(""===e)return!1;try{c=o.localeData(t)}catch(e){c=o.localeData(o.locale())}return n=c.currency.symbol,s=c.abbreviations,i=c.delimiters.decimal,a="."===c.delimiters.thousands?"\\.":c.delimiters.thousands,(null===(d=e.match(/^[^\d]+/))||(e=e.substr(1),d[0]===n))&&(null===(d=e.match(/[^\d]+$/))||(e=e.slice(0,-1),d[0]===s.thousand||d[0]===s.million||d[0]===s.billion||d[0]===s.trillion))&&(l=RegExp(a+"{2}"),!e.match(/[^\d.,]/g)&&!((r=e.split(i)).length>2)&&(r.length<2?!!r[0].match(/^\d+.*\d$/)&&!r[0].match(l):1===r[0].length?!!r[0].match(/^\d+$/)&&!r[0].match(l)&&!!r[1].match(/^\d+$/):!!r[0].match(/^\d+.*\d$/)&&!r[0].match(l)&&!!r[1].match(/^\d+$/)))},o.fn=c.prototype={clone:function(){return o(this)},format:function(e,t){var i,a,r,s=this._value,c=e||l.defaultFormat;if(t=t||Math.round,0===s&&null!==l.zeroFormat)a=l.zeroFormat;else if(null===s&&null!==l.nullFormat)a=l.nullFormat;else{for(i in n)if(c.match(n[i].regexps.format)){r=n[i].format;break}a=(r=r||o._.numberToFormat)(s,c,t)}return a},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var t=a.correctionFactor.call(null,this._value,e);return this._value=a.reduce([this._value,e],function(e,i,o,a){return e+Math.round(t*i)},0)/t,this},subtract:function(e){var t=a.correctionFactor.call(null,this._value,e);return this._value=a.reduce([e],function(e,i,o,a){return e-Math.round(t*i)},Math.round(this._value*t))/t,this},multiply:function(e){return this._value=a.reduce([this._value,e],function(e,t,i,o){var n=a.correctionFactor(e,t);return Math.round(e*n)*Math.round(t*n)/Math.round(n*n)},1),this},divide:function(e){return this._value=a.reduce([this._value,e],function(e,t,i,o){var n=a.correctionFactor(e,t);return Math.round(e*n)/Math.round(t*n)}),this},difference:function(e){return Math.abs(o(this._value).subtract(e).value())}},o.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),o.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(e,t,i){var a,n=o._.includes(t," BPS")?" ":"";return e*=1e4,t=t.replace(/\s?BPS/,""),a=o._.numberToFormat(e,t,i),o._.includes(a,")")?((a=a.split("")).splice(-1,0,n+"BPS"),a=a.join("")):a=a+n+"BPS",a},unformat:function(e){return+(1e-4*o._.stringToNumber(e)).toFixed(15)}}),t={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},i="("+(i=(e={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(t.suffixes.filter(function(t){return 0>e.suffixes.indexOf(t)})).join("|")).replace("B","B(?!PS)")+")",o.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(i)},format:function(i,a,n){var r,s,l,c=o._.includes(a,"ib")?t:e,d=o._.includes(a," b")||o._.includes(a," ib")?" ":"";for(r=0,a=a.replace(/\s?i?b/,"");r<=c.suffixes.length;r++)if(s=Math.pow(c.base,r),l=Math.pow(c.base,r+1),null===i||0===i||i>=s&&i<l){d+=c.suffixes[r],s>0&&(i/=s);break}return o._.numberToFormat(i,a,n)+d},unformat:function(i){var a,n,r=o._.stringToNumber(i);if(r){for(a=e.suffixes.length-1;a>=0;a--){if(o._.includes(i,e.suffixes[a])){n=Math.pow(e.base,a);break}if(o._.includes(i,t.suffixes[a])){n=Math.pow(t.base,a);break}}r*=n||1}return r}}),o.register("format","currency",{regexps:{format:/(\$)/},format:function(e,t,i){var a,n,r=o.locales[o.options.currentLocale],s={before:t.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:t.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(t=t.replace(/\s?\$\s?/,""),a=o._.numberToFormat(e,t,i),e>=0?(s.before=s.before.replace(/[\-\(]/,""),s.after=s.after.replace(/[\-\)]/,"")):!(e<0)||o._.includes(s.before,"-")||o._.includes(s.before,"(")||(s.before="-"+s.before),n=0;n<s.before.length;n++)switch(s.before[n]){case"$":a=o._.insert(a,r.currency.symbol,n);break;case" ":a=o._.insert(a," ",n+r.currency.symbol.length-1)}for(n=s.after.length-1;n>=0;n--)switch(s.after[n]){case"$":a=n===s.after.length-1?a+r.currency.symbol:o._.insert(a,r.currency.symbol,-(s.after.length-(1+n)));break;case" ":a=n===s.after.length-1?a+" ":o._.insert(a," ",-(s.after.length-(1+n)+r.currency.symbol.length-1))}return a}}),o.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(e,t,i){var a=("number"!=typeof e||o._.isNaN(e)?"0e+0":e.toExponential()).split("e");return t=t.replace(/e[\+|\-]{1}0/,""),o._.numberToFormat(Number(a[0]),t,i)+"e"+a[1]},unformat:function(e){var t=o._.includes(e,"e+")?e.split("e+"):e.split("e-"),i=Number(t[0]),a=Number(t[1]);return a=o._.includes(e,"e-")?a*=-1:a,o._.reduce([i,Math.pow(10,a)],function(e,t,i,a){var n=o._.correctionFactor(e,t);return e*n*(t*n)/(n*n)},1)}}),o.register("format","ordinal",{regexps:{format:/(o)/},format:function(e,t,i){var a=o.locales[o.options.currentLocale],n=o._.includes(t," o")?" ":"";return t=t.replace(/\s?o/,""),n+=a.ordinal(e),o._.numberToFormat(e,t,i)+n}}),o.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(e,t,i){var a,n=o._.includes(t," %")?" ":"";return o.options.scalePercentBy100&&(e*=100),t=t.replace(/\s?\%/,""),a=o._.numberToFormat(e,t,i),o._.includes(a,")")?((a=a.split("")).splice(-1,0,n+"%"),a=a.join("")):a=a+n+"%",a},unformat:function(e){var t=o._.stringToNumber(e);return o.options.scalePercentBy100?.01*t:t}}),o.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,i){var o=Math.floor(e/60/60),a=Math.floor((e-3600*o)/60),n=Math.round(e-3600*o-60*a);return o+":"+(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)},unformat:function(e){var t=e.split(":"),i=0;return 3===t.length?i+=3600*Number(t[0])+60*Number(t[1])+Number(t[2]):2===t.length&&(i+=60*Number(t[0])+Number(t[1])),Number(i)}}),o})?o.call(t,i,t,e):o)&&(e.exports=a)},57256:function(e,t,i){"use strict";var o;e.exports=(o=i(75087),(()=>{var e={703:(e,t,i)=>{var o=i(414);function a(){}function n(){}n.resetWarningCache=a,e.exports=function(){function e(e,t,i,a,n,r){if(r!==o){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:a};return i.PropTypes=i,i}},697:(e,t,i)=>{e.exports=i(703)()},414:e=>{e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},590:e=>{var t="undefined"!=typeof Element,i="function"==typeof Map,o="function"==typeof Set,a="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;e.exports=function(e,n){try{return function e(n,r){if(n===r)return!0;if(n&&r&&"object"==typeof n&&"object"==typeof r){var s,l,c,d;if(n.constructor!==r.constructor)return!1;if(Array.isArray(n)){if((s=n.length)!=r.length)return!1;for(l=s;0!=l--;)if(!e(n[l],r[l]))return!1;return!0}if(i&&n instanceof Map&&r instanceof Map){if(n.size!==r.size)return!1;for(d=n.entries();!(l=d.next()).done;)if(!r.has(l.value[0]))return!1;for(d=n.entries();!(l=d.next()).done;)if(!e(l.value[1],r.get(l.value[0])))return!1;return!0}if(o&&n instanceof Set&&r instanceof Set){if(n.size!==r.size)return!1;for(d=n.entries();!(l=d.next()).done;)if(!r.has(l.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(r)){if((s=n.length)!=r.length)return!1;for(l=s;0!=l--;)if(n[l]!==r[l])return!1;return!0}if(n.constructor===RegExp)return n.source===r.source&&n.flags===r.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===r.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===r.toString();if((s=(c=Object.keys(n)).length)!==Object.keys(r).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(r,c[l]))return!1;if(t&&n instanceof Element)return!1;for(l=s;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!n.$$typeof)&&!e(n[c[l]],r[c[l]]))return!1;return!0}return n!=n&&r!=r}(e,n)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},359:e=>{e.exports=o}},t={};function a(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{function e(){for(var e,t,i=0,o="";i<arguments.length;)(e=arguments[i++])&&(t=function e(t){var i,o,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t))for(i=0;i<t.length;i++)t[i]&&(o=e(t[i]))&&(a&&(a+=" "),a+=o);else for(i in t)t[i]&&(a&&(a+=" "),a+=i)}return a}(e))&&(o&&(o+=" "),o+=t);return o}a.r(n),a.d(n,{default:()=>eV});var t=a(359),o=a.n(t);let r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},s="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;var l="object"==typeof self&&self&&self.Object===Object&&self;let c=s||l||Function("return this")(),d=function(){return c.Date.now()};var p=/\s/,m=/^\s+/;let h=c.Symbol;var g=Object.prototype,u=g.hasOwnProperty,v=g.toString,C=h?h.toStringTag:void 0,x=Object.prototype.toString,y=h?h.toStringTag:void 0,b=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,w=/^0o[0-7]+$/i,S=parseInt;let A=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||null!=t&&"object"==typeof t&&"[object Symbol]"==(null==t?void 0===t?"[object Undefined]":"[object Null]":y&&y in Object(t)?function(e){var t=u.call(e,C),i=e[C];try{e[C]=void 0;var o=!0}catch(e){}var a=v.call(e);return o&&(t?e[C]=i:delete e[C]),a}(t):x.call(t)))return NaN;if(r(e)){var t,i,o="function"==typeof e.valueOf?e.valueOf():e;e=r(o)?o+"":o}if("string"!=typeof e)return 0===e?e:+e;e=(i=e)?i.slice(0,function(e){for(var t=e.length;t--&&p.test(e.charAt(t)););return t}(i)+1).replace(m,""):i;var a=f.test(e);return a||w.test(e)?S(e.slice(2),a?2:8):b.test(e)?NaN:+e};var j=Math.max,k=Math.min;let N=function(e,t,i){var o,a,n,s,l,c,p=0,m=!1,h=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function u(t){var i=o,n=a;return o=a=void 0,p=t,s=e.apply(n,i)}function v(e){var i=e-c;return void 0===c||i>=t||i<0||h&&e-p>=n}function C(){var e,i=d();if(v(i))return x(i);l=setTimeout(C,(e=t-(i-c),h?k(e,n-(i-p)):e))}function x(e){return l=void 0,g&&o?u(e):(o=a=void 0,s)}function y(){var e,i=d(),n=v(i);if(o=arguments,a=this,c=i,n){if(void 0===l)return p=e=c,l=setTimeout(C,t),m?u(e):s;if(h)return clearTimeout(l),l=setTimeout(C,t),u(c)}return void 0===l&&(l=setTimeout(C,t)),s}return t=A(t)||0,r(i)&&(m=!!i.leading,n=(h="maxWait"in i)?j(A(i.maxWait)||0,t):n,g="trailing"in i?!!i.trailing:g),y.cancel=function(){void 0!==l&&clearTimeout(l),p=0,o=c=a=l=void 0},y.flush=function(){return void 0===l?s:x(d())},y},_=function(e,t,i){var o=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return r(i)&&(o="leading"in i?!!i.leading:o,a="trailing"in i?!!i.trailing:a),N(e,t,{leading:o,maxWait:t,trailing:a})};var T=a(590),I=a.n(T),M=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var i=-1;return e.some(function(e,o){return e[0]===t&&(i=o,!0)}),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var i=e(this.__entries__,t),o=this.__entries__[i];return o&&o[1]},t.prototype.set=function(t,i){var o=e(this.__entries__,t);~o?this.__entries__[o][1]=i:this.__entries__.push([t,i])},t.prototype.delete=function(t){var i=this.__entries__,o=e(i,t);~o&&i.splice(o,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];e.call(t,a[1],a[0])}},t}()}(),L="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,B=void 0!==a.g&&a.g.Math===Math?a.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),E="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(B):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},D=["top","right","bottom","left","width","height","size","weight"],P="undefined"!=typeof MutationObserver,F=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var i=!1,o=!1,a=0;function n(){i&&(i=!1,e()),o&&s()}function r(){E(n)}function s(){var e=Date.now();if(i){if(e-a<2)return;o=!0}else i=!0,o=!1,setTimeout(r,20);a=e}return s}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){L&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),P?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){L&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=void 0===t?"":t;D.some(function(e){return!!~i.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),R=function(e,t){for(var i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},V=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||B},U=H(0,0,0,0);function z(e){return parseFloat(e)||0}function O(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce(function(t,i){return t+z(e["border-"+i+"-width"])},0)}var W="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof V(e).SVGGraphicsElement}:function(e){return e instanceof V(e).SVGElement&&"function"==typeof e.getBBox};function H(e,t,i,o){return{x:e,y:t,width:i,height:o}}var G=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=H(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e,t,i=(e=this.target,L?W(e)?H(0,0,(t=e.getBBox()).width,t.height):function(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return U;var o=V(e).getComputedStyle(e),a=function(e){for(var t={},i=0,o=["top","right","bottom","left"];i<o.length;i++){var a=o[i],n=e["padding-"+a];t[a]=z(n)}return t}(o),n=a.left+a.right,r=a.top+a.bottom,s=z(o.width),l=z(o.height);if("border-box"===o.boxSizing&&(Math.round(s+n)!==t&&(s-=O(o,"left","right")+n),Math.round(l+r)!==i&&(l-=O(o,"top","bottom")+r)),e!==V(e).document.documentElement){var c=Math.round(s+n)-t,d=Math.round(l+r)-i;1!==Math.abs(c)&&(s-=c),1!==Math.abs(d)&&(l-=d)}return H(a.left,a.top,s,l)}(e):U);return this.contentRect_=i,i.width!==this.broadcastWidth||i.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Q=function(e,t){var i,o,a,n,r,s=(i=t.x,o=t.y,a=t.width,n=t.height,R(r=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype),{x:i,y:o,width:a,height:n,top:o,right:i+a,bottom:n+o,left:i}),r);R(this,{target:e,contentRect:s})},J=function(){function e(e,t,i){if(this.activeObservations_=[],this.observations_=new M,"function"!=typeof e)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return e.prototype.observe=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof V(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new G(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof V(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new Q(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),q="undefined"!=typeof WeakMap?new WeakMap:new M,K=function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var i=new J(t,F.getInstance(),this);q.set(this,i)};["observe","unobserve","disconnect"].forEach(function(e){K.prototype[e]=function(){var t;return(t=q.get(this))[e].apply(t,arguments)}});let Y=void 0!==B.ResizeObserver?B.ResizeObserver:K,Z="Left",X="Right",$="Down",ee={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},et={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},ei="mousemove",eo="mouseup";function ea(e,t){if(0===t)return e;let i=Math.PI/180*t;return[e[0]*Math.cos(i)+e[1]*Math.sin(i),e[1]*Math.cos(i)-e[0]*Math.sin(i)]}var en=a(697);function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function el(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?es(Object(i),!0).forEach(function(t){(function(e,t,i){var o;(o=function(e,t){if("object"!==er(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t);if("object"!==er(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t,"string"),(t="symbol"===er(o)?o:String(o))in e)?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):es(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var ec={description:"",fullscreen:"",isFullscreen:!1,originalAlt:"",originalHeight:"",originalWidth:"",originalTitle:"",sizes:"",srcSet:"",loading:"eager"},ed=o().memo(function(e){var t=el(el({},ec),e),i=t.description,a=t.fullscreen,n=t.handleImageLoaded,r=t.isFullscreen,s=t.onImageError,l=t.original,c=t.originalAlt,d=t.originalHeight,p=t.originalWidth,m=t.originalTitle,h=t.sizes,g=t.srcSet,u=t.loading,v=r&&a||l;return o().createElement(o().Fragment,null,o().createElement("img",{className:"image-gallery-image",src:v,alt:c,srcSet:g,height:d,width:p,sizes:h,title:m,onLoad:function(e){return n(e,l)},onError:s,loading:u}),i&&o().createElement("span",{className:"image-gallery-description"},i))});function ep(e){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function em(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function eh(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?em(Object(i),!0).forEach(function(t){(function(e,t,i){var o;(o=function(e,t){if("object"!==ep(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t);if("object"!==ep(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t,"string"),(t="symbol"===ep(o)?o:String(o))in e)?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):em(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}ed.displayName="Item",ed.propTypes={description:en.string,fullscreen:en.string,handleImageLoaded:en.func.isRequired,isFullscreen:en.bool,onImageError:en.func.isRequired,original:en.string.isRequired,originalAlt:en.string,originalHeight:en.string,originalWidth:en.string,originalTitle:en.string,sizes:en.string,srcSet:en.string,loading:en.string};var eg={left:o().createElement("polyline",{points:"15 18 9 12 15 6"}),right:o().createElement("polyline",{points:"9 18 15 12 9 6"}),maximize:o().createElement("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}),minimize:o().createElement("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"}),play:o().createElement("polygon",{points:"5 3 19 12 5 21 5 3"}),pause:o().createElement(o().Fragment,null,o().createElement("rect",{x:"6",y:"4",width:"4",height:"16"}),o().createElement("rect",{x:"14",y:"4",width:"4",height:"16"}))},eu={strokeWidth:1,viewBox:"0 0 24 24"},ev=function(e){var t=eh(eh({},eu),e),i=t.strokeWidth,a=t.viewBox,n=t.icon;return o().createElement("svg",{className:"image-gallery-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:a,fill:"none",stroke:"currentColor",strokeWidth:i,strokeLinecap:"round",strokeLinejoin:"round"},eg[n])};ev.propTypes={strokeWidth:en.number,viewBox:en.string,icon:(0,en.oneOf)(["left","right","maximize","minimize","play","pause"]).isRequired};var eC=o().memo(function(e){var t=e.isFullscreen,i=e.onClick;return o().createElement("button",{type:"button",className:"image-gallery-icon image-gallery-fullscreen-button",onClick:i,"aria-label":"Open Fullscreen"},o().createElement(ev,{strokeWidth:2,icon:t?"minimize":"maximize"}))});eC.displayName="Fullscreen",eC.propTypes={isFullscreen:en.bool.isRequired,onClick:en.func.isRequired};var ex=o().memo(function(e){var t=e.disabled,i=e.onClick;return o().createElement("button",{type:"button",className:"image-gallery-icon image-gallery-left-nav",disabled:t,onClick:i,"aria-label":"Previous Slide"},o().createElement(ev,{icon:"left",viewBox:"6 0 12 24"}))});ex.displayName="LeftNav",ex.propTypes={disabled:en.bool.isRequired,onClick:en.func.isRequired};var ey=o().memo(function(e){var t=e.disabled,i=e.onClick;return o().createElement("button",{type:"button",className:"image-gallery-icon image-gallery-right-nav",disabled:t,onClick:i,"aria-label":"Next Slide"},o().createElement(ev,{icon:"right",viewBox:"6 0 12 24"}))});ey.displayName="RightNav",ey.propTypes={disabled:en.bool.isRequired,onClick:en.func.isRequired};var eb=o().memo(function(e){var t=e.isPlaying,i=e.onClick;return o().createElement("button",{type:"button",className:"image-gallery-icon image-gallery-play-button",onClick:i,"aria-label":"Play or Pause Slideshow"},o().createElement(ev,{strokeWidth:2,icon:t?"pause":"play"}))});function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ew(){return(ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}function eS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function eA(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(i),!0).forEach(function(t){(function(e,t,i){var o;(o=function(e,t){if("object"!==ef(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t);if("object"!==ef(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t,"string"),(t="symbol"===ef(o)?o:String(o))in e)?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eS(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}eb.displayName="PlayPause",eb.propTypes={isPlaying:en.bool.isRequired,onClick:en.func.isRequired};var ej={className:"",delta:0,onSwiping:function(){},onSwiped:function(){}},ek=function(e){var i=eA(eA({},ej),e),a=i.children,n=i.className,r=function(e){var i,o,a;let n;let{trackMouse:r}=e,s=t.useRef(Object.assign({},et)),l=t.useRef(Object.assign({},ee)),c=t.useRef(Object.assign({},l.current));for(n in c.current=Object.assign({},l.current),l.current=Object.assign(Object.assign({},ee),e),ee)void 0===l.current[n]&&(l.current[n]=ee[n]);let[d,p]=t.useMemo(()=>(function(e,t){let i=t=>{let i="touches"in t;i&&t.touches.length>1||e((e,a)=>{a.trackMouse&&!i&&(document.addEventListener(ei,o),document.addEventListener(eo,n));let{clientX:r,clientY:s}=i?t.touches[0]:t,l=ea([r,s],a.rotationAngle);return a.onTouchStartOrOnMouseDown&&a.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),et),{initial:l.slice(),xy:l,start:t.timeStamp||0})})},o=t=>{e((e,i)=>{let o="touches"in t;if(o&&t.touches.length>1)return e;if(t.timeStamp-e.start>i.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;let{clientX:a,clientY:n}=o?t.touches[0]:t,[r,s]=ea([a,n],i.rotationAngle),l=r-e.xy[0],c=s-e.xy[1],d=Math.abs(l),p=Math.abs(c),m=(t.timeStamp||0)-e.start,h=d>p?l>0?X:Z:c>0?$:"Up",g="number"==typeof i.delta?i.delta:i.delta[h.toLowerCase()]||ee.delta;if(d<g&&p<g&&!e.swiping)return e;let u={absX:d,absY:p,deltaX:l,deltaY:c,dir:h,event:t,first:e.first,initial:e.initial,velocity:Math.sqrt(d*d+p*p)/(m||1),vxvy:[l/(m||1),c/(m||1)]};u.first&&i.onSwipeStart&&i.onSwipeStart(u),i.onSwiping&&i.onSwiping(u);let v=!1;return(i.onSwiping||i.onSwiped||i["onSwiped".concat(h)])&&(v=!0),v&&i.preventScrollOnSwipe&&i.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:u,swiping:!0})})},a=t=>{e((e,i)=>{let o;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<i.swipeDuration){o=Object.assign(Object.assign({},e.eventData),{event:t}),i.onSwiped&&i.onSwiped(o);let a=i["onSwiped".concat(o.dir)];a&&a(o)}}else i.onTap&&i.onTap({event:t});return i.onTouchEndOrOnMouseUp&&i.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),et),{eventData:o})})},n=e=>{document.removeEventListener(ei,o),document.removeEventListener(eo,n),a(e)},r=(e,t)=>{let n=()=>{};if(e&&e.addEventListener){let r=Object.assign(Object.assign({},ee.touchEventOptions),t.touchEventOptions),s=[["touchstart",i,r],["touchmove",o,Object.assign(Object.assign({},r),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",a,r]];s.forEach(t=>{let[i,o,a]=t;return e.addEventListener(i,o,a)}),n=()=>s.forEach(t=>{let[i,o]=t;return e.removeEventListener(i,o)})}return n},s={ref:t=>{null!==t&&e((e,i)=>{if(e.el===t)return e;let o={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),o.cleanUpTouch=void 0),i.trackTouch&&t&&(o.cleanUpTouch=r(t,i)),Object.assign(Object.assign(Object.assign({},e),{el:t}),o)})}};return t.trackMouse&&(s.onMouseDown=i),[s,r]})(e=>s.current=e(s.current,l.current),{trackMouse:r}),[r]);return s.current=(i=s.current,o=l.current,a=c.current,o.trackTouch&&i.el?i.cleanUpTouch?o.preventScrollOnSwipe!==a.preventScrollOnSwipe||o.touchEventOptions.passive!==a.touchEventOptions.passive?(i.cleanUpTouch(),Object.assign(Object.assign({},i),{cleanUpTouch:p(i.el,o)})):i:Object.assign(Object.assign({},i),{cleanUpTouch:p(i.el,o)}):(i.cleanUpTouch&&i.cleanUpTouch(),Object.assign(Object.assign({},i),{cleanUpTouch:void 0}))),d}({delta:i.delta,onSwiping:i.onSwiping,onSwiped:i.onSwiped});return o().createElement("div",ew({},r,{className:n}),a)};function eN(e){return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e_(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function eT(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e_(Object(i),!0).forEach(function(t){eB(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):e_(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function eI(e,t){return(eI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eM(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eL(e){return(eL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eB(e,t,i){return(t=eE(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function eE(e){var t=function(e,t){if("object"!==eN(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t);if("object"!==eN(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===eN(t)?t:String(t)}ek.propTypes={children:en.node.isRequired,className:en.string,delta:en.number,onSwiped:en.func,onSwiping:en.func};var eD=["fullscreenchange","MSFullscreenChange","mozfullscreenchange","webkitfullscreenchange"],eP=(0,en.arrayOf)((0,en.shape)({srcSet:en.string,media:en.string}));function eF(e){var t=parseInt(e.keyCode||e.which||0,10);return 66===t||62===t}var eR=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eI(e,t)}(r,t);var i,a,n=(a=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=eL(r);if(a){var i=eL(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===eN(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eM(e)}(this,e)});function r(e){var t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),eB(eM(t=n.call(this,e)),"onBulletClick",function(e,i){var o=t.props,a=o.onBulletClick,n=o.items,r=t.state.currentIndex;e.target.blur(),r!==i&&(2===n.length?t.slideToIndexWithStyleReset(i,e):t.slideToIndex(i,e)),a&&a(e,i)}),t.state={currentIndex:e.startIndex,thumbsTranslate:0,thumbsSwipedTranslate:0,currentSlideOffset:0,galleryWidth:0,thumbnailsWrapperWidth:0,thumbnailsWrapperHeight:0,thumbsStyle:{transition:"all ".concat(e.slideDuration,"ms ease-out")},isFullscreen:!1,isSwipingThumbnail:!1,isPlaying:!1},t.loadedImages={},t.imageGallery=o().createRef(),t.thumbnailsWrapper=o().createRef(),t.thumbnails=o().createRef(),t.imageGallerySlideWrapper=o().createRef(),t.handleImageLoaded=t.handleImageLoaded.bind(eM(t)),t.handleKeyDown=t.handleKeyDown.bind(eM(t)),t.handleMouseDown=t.handleMouseDown.bind(eM(t)),t.handleResize=t.handleResize.bind(eM(t)),t.handleTouchMove=t.handleTouchMove.bind(eM(t)),t.handleOnSwiped=t.handleOnSwiped.bind(eM(t)),t.handleScreenChange=t.handleScreenChange.bind(eM(t)),t.handleSwiping=t.handleSwiping.bind(eM(t)),t.handleThumbnailSwiping=t.handleThumbnailSwiping.bind(eM(t)),t.handleOnThumbnailSwiped=t.handleOnThumbnailSwiped.bind(eM(t)),t.onThumbnailMouseLeave=t.onThumbnailMouseLeave.bind(eM(t)),t.handleImageError=t.handleImageError.bind(eM(t)),t.pauseOrPlay=t.pauseOrPlay.bind(eM(t)),t.renderThumbInner=t.renderThumbInner.bind(eM(t)),t.renderItem=t.renderItem.bind(eM(t)),t.slideLeft=t.slideLeft.bind(eM(t)),t.slideRight=t.slideRight.bind(eM(t)),t.toggleFullScreen=t.toggleFullScreen.bind(eM(t)),t.togglePlay=t.togglePlay.bind(eM(t)),t.unthrottledSlideToIndex=t.slideToIndex,t.slideToIndex=_(t.unthrottledSlideToIndex,e.slideDuration,{trailing:!1}),e.lazyLoad&&(t.lazyLoaded=[]),t}return i=[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoPlay,i=e.useWindowKeyDown;t&&this.play(),i?window.addEventListener("keydown",this.handleKeyDown):this.imageGallery.current.addEventListener("keydown",this.handleKeyDown),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),this.initSlideWrapperResizeObserver(this.imageGallerySlideWrapper),this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper),this.addScreenChangeEvent()}},{key:"componentDidUpdate",value:function(e,t){var i=this.props,o=i.items,a=i.lazyLoad,n=i.slideDuration,r=i.slideInterval,s=i.startIndex,l=i.thumbnailPosition,c=i.showThumbnails,d=i.useWindowKeyDown,p=this.state,m=p.currentIndex,h=p.isPlaying,g=e.items.length!==o.length,u=!I()(e.items,o),v=e.startIndex!==s,C=e.thumbnailPosition!==l,x=e.showThumbnails!==c;r===e.slideInterval&&n===e.slideDuration||h&&(this.pause(),this.play()),C&&(this.removeResizeObserver(),this.initSlideWrapperResizeObserver(this.imageGallerySlideWrapper),this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper)),x&&c&&this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper),x&&!c&&this.removeThumbnailsResizeObserver(),(g||x)&&this.handleResize(),t.currentIndex!==m&&this.slideThumbnailBar(),e.slideDuration!==n&&(this.slideToIndex=_(this.unthrottledSlideToIndex,n,{trailing:!1})),a&&(!e.lazyLoad||u)&&(this.lazyLoaded=[]),d!==e.useWindowKeyDown&&(d?(this.imageGallery.current.removeEventListener("keydown",this.handleKeyDown),window.addEventListener("keydown",this.handleKeyDown)):(window.removeEventListener("keydown",this.handleKeyDown),this.imageGallery.current.addEventListener("keydown",this.handleKeyDown))),(v||u)&&this.setState({currentIndex:s,slideStyle:{transition:"none"}})}},{key:"componentWillUnmount",value:function(){var e=this.props.useWindowKeyDown;window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("touchmove",this.handleTouchMove),this.removeScreenChangeEvent(),this.removeResizeObserver(),this.playPauseIntervalId&&(window.clearInterval(this.playPauseIntervalId),this.playPauseIntervalId=null),this.transitionTimer&&window.clearTimeout(this.transitionTimer),e?window.removeEventListener("keydown",this.handleKeyDown):this.imageGallery.current.removeEventListener("keydown",this.handleKeyDown)}},{key:"onSliding",value:function(){var e=this,t=this.state,i=t.currentIndex,o=t.isTransitioning,a=this.props,n=a.onSlide,r=a.slideDuration;this.transitionTimer=window.setTimeout(function(){o&&(e.setState({isTransitioning:!o,isSwipingThumbnail:!1}),n&&n(i))},r+50)}},{key:"onThumbnailClick",value:function(e,t){var i=this.props,o=i.onThumbnailClick,a=i.items,n=this.state.currentIndex;e.target.parentNode.parentNode.blur(),n!==t&&(2===a.length?this.slideToIndexWithStyleReset(t,e):this.slideToIndex(t,e)),o&&o(e,t)}},{key:"onThumbnailMouseOver",value:function(e,t){var i=this;this.thumbnailMouseOverTimer&&(window.clearTimeout(this.thumbnailMouseOverTimer),this.thumbnailMouseOverTimer=null),this.thumbnailMouseOverTimer=window.setTimeout(function(){i.slideToIndex(t),i.pause()},300)}},{key:"onThumbnailMouseLeave",value:function(){if(this.thumbnailMouseOverTimer){var e=this.props.autoPlay;window.clearTimeout(this.thumbnailMouseOverTimer),this.thumbnailMouseOverTimer=null,e&&this.play()}}},{key:"setThumbsTranslate",value:function(e){this.setState({thumbsTranslate:e})}},{key:"setModalFullscreen",value:function(e){var t=this.props.onScreenChange;this.setState({modalFullscreen:e}),t&&t(e)}},{key:"getThumbsTranslate",value:function(e){var t,i=this.props,o=i.disableThumbnailScroll,a=i.items,n=this.state,r=n.thumbnailsWrapperWidth,s=n.thumbnailsWrapperHeight,l=this.thumbnails&&this.thumbnails.current;if(o)return 0;if(l){if(this.isThumbnailVertical()){if(l.scrollHeight<=s)return 0;t=l.scrollHeight-s}else{if(l.scrollWidth<=r||r<=0)return 0;t=l.scrollWidth-r}return t/(a.length-1)*e}return 0}},{key:"getThumbnailPositionClassName",value:function(e){switch(e){case"left":e=" ".concat("image-gallery-thumbnails-left");break;case"right":e=" ".concat("image-gallery-thumbnails-right");break;case"bottom":e=" ".concat("image-gallery-thumbnails-bottom");break;case"top":e=" ".concat("image-gallery-thumbnails-top")}return e}},{key:"getAlignmentClassName",value:function(e){var t=this.state.currentIndex,i=this.props,o=i.infinite,a=i.items,n="",r="image-gallery-left",s="image-gallery-right";switch(e){case t-1:n=" ".concat(r);break;case t:n=" ".concat("image-gallery-center");break;case t+1:n=" ".concat(s)}return a.length>=3&&o&&(0===e&&t===a.length-1?n=" ".concat(s):e===a.length-1&&0===t&&(n=" ".concat(r))),n}},{key:"getTranslateXForTwoSlide",value:function(e){var t=this.state,i=t.currentIndex,o=t.currentSlideOffset,a=t.previousIndex,n=0===e&&1===i,r=1===e&&0===i,s=0===o,l=-100*i+100*e+o;return o>0?this.direction="left":o<0&&(this.direction="right"),r&&o>0&&(l=-100+o),n&&o<0&&(l=100+o),i!==a?0===e&&0===a&&s&&"left"===this.direction?l=100:1===e&&1===a&&s&&"right"===this.direction&&(l=-100):(r&&s&&"left"===this.direction&&(l=-100),n&&s&&"right"===this.direction&&(l=100)),l}},{key:"getThumbnailBarHeight",value:function(){return this.isThumbnailVertical()?{height:this.state.gallerySlideWrapperHeight}:{}}},{key:"getSlideStyle",value:function(e){var t=this.state,i=t.currentIndex,o=t.currentSlideOffset,a=t.slideStyle,n=this.props,r=n.infinite,s=n.items,l=n.useTranslate3D,c=n.isRTL,d=s.length-1,p=(-100*i+100*e)*(c?-1:1)+o;r&&s.length>2&&(0===i&&e===d?p=-100*(c?-1:1)+o:i===d&&0===e&&(p=100*(c?-1:1)+o)),r&&2===s.length&&(p=this.getTranslateXForTwoSlide(e));var m="translate(".concat(p,"%, 0)");return l&&(m="translate3d(".concat(p,"%, 0, 0)")),eT({display:this.isSlideVisible(e)?"inherit":"none",WebkitTransform:m,MozTransform:m,msTransform:m,OTransform:m,transform:m},a)}},{key:"getCurrentIndex",value:function(){return this.state.currentIndex}},{key:"getThumbnailStyle",value:function(){var e,t=this.props,i=t.useTranslate3D,o=t.isRTL,a=this.state,n=a.thumbsTranslate,r=a.thumbsStyle,s=o?-1*n:n;return this.isThumbnailVertical()?(e="translate(0, ".concat(n,"px)"),i&&(e="translate3d(0, ".concat(n,"px, 0)"))):(e="translate(".concat(s,"px, 0)"),i&&(e="translate3d(".concat(s,"px, 0, 0)"))),eT({WebkitTransform:e,MozTransform:e,msTransform:e,OTransform:e,transform:e},r)}},{key:"getSlideItems",value:function(){var t=this,i=this.state.currentIndex,a=this.props,n=a.items,r=a.slideOnThumbnailOver,s=a.onClick,l=a.lazyLoad,c=a.onTouchMove,d=a.onTouchEnd,p=a.onTouchStart,m=a.onMouseOver,h=a.onMouseLeave,g=a.renderItem,u=a.renderThumbInner,v=a.showThumbnails,C=a.showBullets,x=[],y=[],b=[];return n.forEach(function(a,n){var f=t.getAlignmentClassName(n),w=a.originalClass?" ".concat(a.originalClass):"",S=a.thumbnailClass?" ".concat(a.thumbnailClass):"",A=a.renderItem||g||t.renderItem,j=a.renderThumbInner||u||t.renderThumbInner,k=!l||f||t.lazyLoaded[n];k&&l&&!t.lazyLoaded[n]&&(t.lazyLoaded[n]=!0);var N=t.getSlideStyle(n),_=o().createElement("div",{"aria-label":"Go to Slide ".concat(n+1),key:"slide-".concat(n),tabIndex:"-1",className:"image-gallery-slide ".concat(f," ").concat(w),style:N,onClick:s,onKeyUp:t.handleSlideKeyUp,onTouchMove:c,onTouchEnd:d,onTouchStart:p,onMouseOver:m,onFocus:m,onMouseLeave:h,role:"button"},k?A(a):o().createElement("div",{style:{height:"100%"}}));if(x.push(_),v&&a.thumbnail){var T=e("image-gallery-thumbnail",S,{active:i===n});y.push(o().createElement("button",{key:"thumbnail-".concat(n),type:"button",tabIndex:"0","aria-pressed":i===n?"true":"false","aria-label":"Go to Slide ".concat(n+1),className:T,onMouseLeave:r?t.onThumbnailMouseLeave:null,onMouseOver:function(e){return t.handleThumbnailMouseOver(e,n)},onFocus:function(e){return t.handleThumbnailMouseOver(e,n)},onKeyUp:function(e){return t.handleThumbnailKeyUp(e,n)},onClick:function(e){return t.onThumbnailClick(e,n)}},j(a)))}if(C){var I=e("image-gallery-bullet",a.bulletClass,{active:i===n});b.push(o().createElement("button",{type:"button",key:"bullet-".concat(n),className:I,onClick:function(e){return t.onBulletClick(e,n)},"aria-pressed":i===n?"true":"false","aria-label":"Go to Slide ".concat(n+1)}))}}),{slides:x,thumbnails:y,bullets:b}}},{key:"ignoreIsTransitioning",value:function(){var e=this.props.items,t=this.state,i=t.previousIndex,o=t.currentIndex,a=e.length-1;return Math.abs(i-o)>1&&!(0===i&&o===a)&&!(i===a&&0===o)}},{key:"isFirstOrLastSlide",value:function(e){return e===this.props.items.length-1||0===e}},{key:"slideIsTransitioning",value:function(e){var t=this.state,i=t.isTransitioning,o=t.previousIndex,a=t.currentIndex;return i&&!(e===o||e===a)}},{key:"isSlideVisible",value:function(e){return!this.slideIsTransitioning(e)||this.ignoreIsTransitioning()&&!this.isFirstOrLastSlide(e)}},{key:"slideThumbnailBar",value:function(){var e=this.state,t=e.currentIndex,i=e.isSwipingThumbnail,o=-this.getThumbsTranslate(t);i||(0===t?this.setState({thumbsTranslate:0,thumbsSwipedTranslate:0}):this.setState({thumbsTranslate:o,thumbsSwipedTranslate:o}))}},{key:"canSlide",value:function(){return this.props.items.length>=2}},{key:"canSlideLeft",value:function(){return this.props.infinite||this.canSlidePrevious()}},{key:"canSlideRight",value:function(){return this.props.infinite||this.canSlideNext()}},{key:"canSlidePrevious",value:function(){return this.state.currentIndex>0}},{key:"canSlideNext",value:function(){return this.state.currentIndex<this.props.items.length-1}},{key:"handleSwiping",value:function(e){var t=e.event,i=e.absX,o=e.dir,a=this.props,n=a.disableSwipe,r=a.stopPropagation,s=this.state,l=s.galleryWidth,c=s.isTransitioning,d=s.swipingUpDown,p=s.swipingLeftRight;if("Up"!==o&&o!==$&&!d||p){if(o!==Z&&o!==X||p||this.setState({swipingLeftRight:!0}),!n){var m=this.props.swipingTransitionDuration;if(r&&t.preventDefault(),c)this.setState({currentSlideOffset:0});else{var h=i/l*100;Math.abs(h)>=100&&(h=100),this.setState({currentSlideOffset:(o===X?1:-1)*h,slideStyle:{transition:"transform ".concat(m,"ms ease-out")}})}}}else d||this.setState({swipingUpDown:!0})}},{key:"handleThumbnailSwiping",value:function(e){var t=e.event,i=e.absX,o=e.absY,a=e.dir,n=this.props,r=n.stopPropagation,s=n.swipingThumbnailTransitionDuration,l=this.state,c=l.thumbsSwipedTranslate,d=l.thumbnailsWrapperHeight,p=l.thumbnailsWrapperWidth,m=l.swipingUpDown,h=l.swipingLeftRight;if(this.isThumbnailVertical()){if((a===Z||a===X||h)&&!m)return void(h||this.setState({swipingLeftRight:!0}));"Up"!==a&&a!==$||m||this.setState({swipingUpDown:!0})}else{if(("Up"===a||a===$||m)&&!h)return void(m||this.setState({swipingUpDown:!0}));a!==Z&&a!==X||h||this.setState({swipingLeftRight:!0})}var g,u,v,C,x=this.thumbnails&&this.thumbnails.current;this.isThumbnailVertical()?(u=Math.abs(g=c+(a===$?o:-o))>x.scrollHeight-d+20,v=g>20,C=x.scrollHeight<=d):(u=Math.abs(g=c+(a===X?i:-i))>x.scrollWidth-p+20,v=g>20,C=x.scrollWidth<=p),C||(a===Z||"Up"===a)&&u||(a===X||a===$)&&v||(r&&t.stopPropagation(),this.setState({thumbsTranslate:g,thumbsStyle:{transition:"transform ".concat(s,"ms ease-out")}}))}},{key:"handleOnThumbnailSwiped",value:function(){var e=this.state.thumbsTranslate,t=this.props.slideDuration;this.resetSwipingDirection(),this.setState({isSwipingThumbnail:!0,thumbsSwipedTranslate:e,thumbsStyle:{transition:"all ".concat(t,"ms ease-out")}})}},{key:"sufficientSwipe",value:function(){return Math.abs(this.state.currentSlideOffset)>this.props.swipeThreshold}},{key:"resetSwipingDirection",value:function(){var e=this.state,t=e.swipingUpDown,i=e.swipingLeftRight;t&&this.setState({swipingUpDown:!1}),i&&this.setState({swipingLeftRight:!1})}},{key:"handleOnSwiped",value:function(e){var t=e.event,i=e.dir,o=e.velocity,a=this.props,n=a.disableSwipe,r=a.stopPropagation,s=a.flickThreshold;if(!n){var l=this.props.isRTL;r&&t.stopPropagation(),this.resetSwipingDirection(),this.handleOnSwipedTo((i===Z?1:-1)*(l?-1:1),o>s&&!("Up"===i||i===$))}}},{key:"handleOnSwipedTo",value:function(e,t){var i=this.state,o=i.currentIndex,a=i.isTransitioning,n=o;(this.sufficientSwipe()||t)&&!a&&(n+=e),(-1!==e||this.canSlideLeft())&&(1!==e||this.canSlideRight())||(n=o),this.unthrottledSlideToIndex(n)}},{key:"handleTouchMove",value:function(e){this.state.swipingLeftRight&&e.preventDefault()}},{key:"handleMouseDown",value:function(){this.imageGallery.current.classList.add("image-gallery-using-mouse")}},{key:"handleKeyDown",value:function(e){var t=this.props,i=t.disableKeyDown,o=t.useBrowserFullscreen,a=this.state.isFullscreen;if(this.imageGallery.current.classList.remove("image-gallery-using-mouse"),!i)switch(parseInt(e.keyCode||e.which||0,10)){case 37:this.canSlideLeft()&&!this.playPauseIntervalId&&this.slideLeft(e);break;case 39:this.canSlideRight()&&!this.playPauseIntervalId&&this.slideRight(e);break;case 27:a&&!o&&this.exitFullScreen()}}},{key:"handleImageError",value:function(e){var t=this.props.onErrorImageURL;t&&-1===e.target.src.indexOf(t)&&(e.target.src=t)}},{key:"removeThumbnailsResizeObserver",value:function(){this.resizeThumbnailWrapperObserver&&this.thumbnailsWrapper&&this.thumbnailsWrapper.current&&(this.resizeThumbnailWrapperObserver.unobserve(this.thumbnailsWrapper.current),this.resizeThumbnailWrapperObserver=null)}},{key:"removeResizeObserver",value:function(){this.resizeSlideWrapperObserver&&this.imageGallerySlideWrapper&&this.imageGallerySlideWrapper.current&&(this.resizeSlideWrapperObserver.unobserve(this.imageGallerySlideWrapper.current),this.resizeSlideWrapperObserver=null),this.removeThumbnailsResizeObserver()}},{key:"handleResize",value:function(){var e=this.state.currentIndex;this.imageGallery&&(this.imageGallery&&this.imageGallery.current&&this.setState({galleryWidth:this.imageGallery.current.offsetWidth}),this.imageGallerySlideWrapper&&this.imageGallerySlideWrapper.current&&this.setState({gallerySlideWrapperHeight:this.imageGallerySlideWrapper.current.offsetHeight}),this.setThumbsTranslate(-this.getThumbsTranslate(e)))}},{key:"initSlideWrapperResizeObserver",value:function(e){var t=this;e&&!e.current||(this.resizeSlideWrapperObserver=new Y(N(function(e){e&&e.forEach(function(e){t.setState({thumbnailsWrapperWidth:e.contentRect.width},t.handleResize)})},50)),this.resizeSlideWrapperObserver.observe(e.current))}},{key:"initThumbnailWrapperResizeObserver",value:function(e){var t=this;e&&!e.current||(this.resizeThumbnailWrapperObserver=new Y(N(function(e){e&&e.forEach(function(e){t.setState({thumbnailsWrapperHeight:e.contentRect.height},t.handleResize)})},50)),this.resizeThumbnailWrapperObserver.observe(e.current))}},{key:"toggleFullScreen",value:function(){this.state.isFullscreen?this.exitFullScreen():this.fullScreen()}},{key:"togglePlay",value:function(){this.playPauseIntervalId?this.pause():this.play()}},{key:"handleScreenChange",value:function(){var e=this.props,t=e.onScreenChange,i=e.useBrowserFullscreen,o=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,a=this.imageGallery.current===o;t&&t(a),i&&this.setState({isFullscreen:a})}},{key:"slideToIndex",value:function(e,t){var i=this.state,o=i.currentIndex,a=i.isTransitioning,n=this.props,r=n.items,s=n.slideDuration,l=n.onBeforeSlide;if(!a){t&&this.playPauseIntervalId&&(this.pause(!1),this.play(!1));var c=r.length-1,d=e;e<0?d=c:e>c&&(d=0),l&&d!==o&&l(d),this.setState({previousIndex:o,currentIndex:d,isTransitioning:d!==o,currentSlideOffset:0,slideStyle:{transition:"all ".concat(s,"ms ease-out")}},this.onSliding)}}},{key:"slideLeft",value:function(e){var t=this.props.isRTL;this.slideTo(e,t?"right":"left")}},{key:"slideRight",value:function(e){var t=this.props.isRTL;this.slideTo(e,t?"left":"right")}},{key:"slideTo",value:function(e,t){var i=this.state,o=i.currentIndex,a=i.isTransitioning,n=this.props.items,r=o+("left"===t?-1:1);a||(2===n.length?this.slideToIndexWithStyleReset(r,e):this.slideToIndex(r,e))}},{key:"slideToIndexWithStyleReset",value:function(e,t){var i=this,o=this.state,a=o.currentIndex,n=o.currentSlideOffset;this.setState({currentSlideOffset:n+(a>e?.001:-.001),slideStyle:{transition:"none"}},function(){window.setTimeout(function(){return i.slideToIndex(e,t)},25)})}},{key:"handleThumbnailMouseOver",value:function(e,t){this.props.slideOnThumbnailOver&&this.onThumbnailMouseOver(e,t)}},{key:"handleThumbnailKeyUp",value:function(e,t){eF(e)&&this.onThumbnailClick(e,t)}},{key:"handleSlideKeyUp",value:function(e){eF(e)&&(0,this.props.onClick)(e)}},{key:"isThumbnailVertical",value:function(){var e=this.props.thumbnailPosition;return"left"===e||"right"===e}},{key:"addScreenChangeEvent",value:function(){var e=this;eD.forEach(function(t){document.addEventListener(t,e.handleScreenChange)})}},{key:"removeScreenChangeEvent",value:function(){var e=this;eD.forEach(function(t){document.removeEventListener(t,e.handleScreenChange)})}},{key:"fullScreen",value:function(){var e=this.props.useBrowserFullscreen,t=this.imageGallery.current;e?t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():this.setModalFullscreen(!0):this.setModalFullscreen(!0),this.setState({isFullscreen:!0})}},{key:"exitFullScreen",value:function(){var e=this.state.isFullscreen,t=this.props.useBrowserFullscreen;e&&(t?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this.setModalFullscreen(!1):this.setModalFullscreen(!1),this.setState({isFullscreen:!1}))}},{key:"pauseOrPlay",value:function(){var e=this.props.infinite,t=this.state.currentIndex;e||this.canSlideRight()?this.slideToIndex(t+1):this.pause()}},{key:"play",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,i=t.onPlay,o=t.slideInterval,a=t.slideDuration,n=this.state.currentIndex;this.playPauseIntervalId||(this.setState({isPlaying:!0}),this.playPauseIntervalId=window.setInterval(this.pauseOrPlay,Math.max(o,a)),i&&e&&i(n))}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props.onPause,i=this.state.currentIndex;this.playPauseIntervalId&&(window.clearInterval(this.playPauseIntervalId),this.playPauseIntervalId=null,this.setState({isPlaying:!1}),t&&e&&t(i))}},{key:"isImageLoaded",value:function(e){return!!this.loadedImages[e.original]||(this.loadedImages[e.original]=!0,!1)}},{key:"handleImageLoaded",value:function(e,t){var i=this.props.onImageLoad;!this.loadedImages[t]&&i&&(this.loadedImages[t]=!0,i(e))}},{key:"renderItem",value:function(e){var t=this.state.isFullscreen,i=this.props.onImageError||this.handleImageError;return o().createElement(ed,{description:e.description,fullscreen:e.fullscreen,handleImageLoaded:this.handleImageLoaded,isFullscreen:t,onImageError:i,original:e.original,originalAlt:e.originalAlt,originalHeight:e.originalHeight,originalWidth:e.originalWidth,originalTitle:e.originalTitle,sizes:e.sizes,loading:e.loading,srcSet:e.srcSet})}},{key:"renderThumbInner",value:function(e){var t=this.props.onThumbnailError||this.handleImageError;return o().createElement("span",{className:"image-gallery-thumbnail-inner"},o().createElement("img",{className:"image-gallery-thumbnail-image",src:e.thumbnail,height:e.thumbnailHeight,width:e.thumbnailWidth,alt:e.thumbnailAlt,title:e.thumbnailTitle,loading:e.thumbnailLoading,onError:t}),e.thumbnailLabel&&o().createElement("div",{className:"image-gallery-thumbnail-label"},e.thumbnailLabel))}},{key:"render",value:function(){var t=this.state,i=t.currentIndex,a=t.isFullscreen,n=t.modalFullscreen,r=t.isPlaying,s=this.props,l=s.additionalClass,c=s.disableThumbnailSwipe,d=s.indexSeparator,p=s.isRTL,m=s.items,h=s.thumbnailPosition,g=s.renderFullscreenButton,u=s.renderCustomControls,v=s.renderLeftNav,C=s.renderRightNav,x=s.showBullets,y=s.showFullscreenButton,b=s.showIndex,f=s.showThumbnails,w=s.showNav,S=s.showPlayButton,A=s.renderPlayPauseButton,j=this.getThumbnailStyle(),k=this.getSlideItems(),N=k.slides,_=k.thumbnails,T=k.bullets,I=e("image-gallery-slide-wrapper",this.getThumbnailPositionClassName(h),{"image-gallery-rtl":p}),M=o().createElement("div",{ref:this.imageGallerySlideWrapper,className:I},u&&u(),this.canSlide()?o().createElement(o().Fragment,null,w&&o().createElement(o().Fragment,null,v(this.slideLeft,!this.canSlideLeft()),C(this.slideRight,!this.canSlideRight())),o().createElement(ek,{className:"image-gallery-swipe",delta:0,onSwiping:this.handleSwiping,onSwiped:this.handleOnSwiped},o().createElement("div",{className:"image-gallery-slides"},N))):o().createElement("div",{className:"image-gallery-slides"},N),S&&A(this.togglePlay,r),x&&o().createElement("div",{className:"image-gallery-bullets"},o().createElement("div",{className:"image-gallery-bullets-container",role:"navigation","aria-label":"Bullet Navigation"},T)),y&&g(this.toggleFullScreen,a),b&&o().createElement("div",{className:"image-gallery-index"},o().createElement("span",{className:"image-gallery-index-current"},i+1),o().createElement("span",{className:"image-gallery-index-separator"},d),o().createElement("span",{className:"image-gallery-index-total"},m.length))),L=e("image-gallery",l,{"fullscreen-modal":n}),B=e("image-gallery-content",this.getThumbnailPositionClassName(h),{fullscreen:a}),E=e("image-gallery-thumbnails-wrapper",this.getThumbnailPositionClassName(h),{"thumbnails-wrapper-rtl":!this.isThumbnailVertical()&&p},{"thumbnails-swipe-horizontal":!this.isThumbnailVertical()&&!c},{"thumbnails-swipe-vertical":this.isThumbnailVertical()&&!c});return o().createElement("div",{ref:this.imageGallery,className:L,"aria-live":"polite"},o().createElement("div",{className:B},("bottom"===h||"right"===h)&&M,f&&_.length>0?o().createElement(ek,{className:E,delta:0,onSwiping:!c&&this.handleThumbnailSwiping,onSwiped:!c&&this.handleOnThumbnailSwiped},o().createElement("div",{className:"image-gallery-thumbnails",ref:this.thumbnailsWrapper,style:this.getThumbnailBarHeight()},o().createElement("nav",{ref:this.thumbnails,className:"image-gallery-thumbnails-container",style:j,"aria-label":"Thumbnail Navigation"},_))):null,("top"===h||"left"===h)&&M))}}],function(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,eE(o.key),o)}}(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(o().Component);eR.propTypes={flickThreshold:en.number,items:(0,en.arrayOf)((0,en.shape)({bulletClass:en.string,bulletOnClick:en.func,description:en.string,original:en.string,originalHeight:en.number,originalWidth:en.number,loading:en.string,thumbnailHeight:en.number,thumbnailWidth:en.number,thumbnailLoading:en.string,fullscreen:en.string,originalAlt:en.string,originalTitle:en.string,thumbnail:en.string,thumbnailAlt:en.string,thumbnailLabel:en.string,thumbnailTitle:en.string,originalClass:en.string,thumbnailClass:en.string,renderItem:en.func,renderThumbInner:en.func,imageSet:eP,srcSet:en.string,sizes:en.string})).isRequired,showNav:en.bool,autoPlay:en.bool,lazyLoad:en.bool,infinite:en.bool,showIndex:en.bool,showBullets:en.bool,showThumbnails:en.bool,showPlayButton:en.bool,showFullscreenButton:en.bool,disableThumbnailScroll:en.bool,disableKeyDown:en.bool,disableSwipe:en.bool,disableThumbnailSwipe:en.bool,useBrowserFullscreen:en.bool,onErrorImageURL:en.string,indexSeparator:en.string,thumbnailPosition:(0,en.oneOf)(["top","bottom","left","right"]),startIndex:en.number,slideDuration:en.number,slideInterval:en.number,slideOnThumbnailOver:en.bool,swipeThreshold:en.number,swipingTransitionDuration:en.number,swipingThumbnailTransitionDuration:en.number,onSlide:en.func,onBeforeSlide:en.func,onScreenChange:en.func,onPause:en.func,onPlay:en.func,onClick:en.func,onImageLoad:en.func,onImageError:en.func,onTouchMove:en.func,onTouchEnd:en.func,onTouchStart:en.func,onMouseOver:en.func,onMouseLeave:en.func,onBulletClick:en.func,onThumbnailError:en.func,onThumbnailClick:en.func,renderCustomControls:en.func,renderLeftNav:en.func,renderRightNav:en.func,renderPlayPauseButton:en.func,renderFullscreenButton:en.func,renderItem:en.func,renderThumbInner:en.func,stopPropagation:en.bool,additionalClass:en.string,useTranslate3D:en.bool,isRTL:en.bool,useWindowKeyDown:en.bool},eR.defaultProps={onErrorImageURL:"",additionalClass:"",showNav:!0,autoPlay:!1,lazyLoad:!1,infinite:!0,showIndex:!1,showBullets:!1,showThumbnails:!0,showPlayButton:!0,showFullscreenButton:!0,disableThumbnailScroll:!1,disableKeyDown:!1,disableSwipe:!1,disableThumbnailSwipe:!1,useTranslate3D:!0,isRTL:!1,useBrowserFullscreen:!0,flickThreshold:.4,stopPropagation:!1,indexSeparator:" / ",thumbnailPosition:"bottom",startIndex:0,slideDuration:450,swipingTransitionDuration:0,swipingThumbnailTransitionDuration:0,onSlide:null,onBeforeSlide:null,onScreenChange:null,onPause:null,onPlay:null,onClick:null,onImageLoad:null,onImageError:null,onTouchMove:null,onTouchEnd:null,onTouchStart:null,onMouseOver:null,onMouseLeave:null,onBulletClick:null,onThumbnailError:null,onThumbnailClick:null,renderCustomControls:null,renderThumbInner:null,renderItem:null,slideInterval:3e3,slideOnThumbnailOver:!1,swipeThreshold:30,renderLeftNav:function(e,t){return o().createElement(ex,{onClick:e,disabled:t})},renderRightNav:function(e,t){return o().createElement(ey,{onClick:e,disabled:t})},renderPlayPauseButton:function(e,t){return o().createElement(eb,{onClick:e,isPlaying:t})},renderFullscreenButton:function(e,t){return o().createElement(eC,{onClick:e,isFullscreen:t})},useWindowKeyDown:!0};let eV=eR})(),n})())},11430:function(e,t,i){"use strict";i.d(t,{c:function(){return p}});var o=i(71576),a=i(34491),n=i(78716),r=i.n(n),s=i(36401),l=i(66084),c=i(52921);class d extends a.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,l._)(this,"props",void 0),(0,l._)(this,"someState",!0)}}(0,c.gn)([a.SB],d.prototype,"someState",void 0);let p=a._Y.createComponent("CheckboxGroup",d,e=>{let{onChange:t,options:i,value:a,className:n,labelClassName:l}=e.props;return i.length<=0?null:(0,o.jsx)("div",{className:r()("checkbox-group--x9zVQ",n),children:i.map(e=>{let i=a.includes(e.key),n=!!e.disabled;return(0,o.jsxs)("div",{className:r()("checkbox-item--oLKZ0",l,{"disabled--JjvYo":n}),onClick:()=>{n||t(i?a.filter(t=>t!==e.key):[...a,e.key])},children:[(0,o.jsx)(s.X,{checked:i,disabled:n}),e.label]},e.key)})})})},11949:function(e,t,i){"use strict";i.d(t,{K:function(){return ee}});var o=i(71576),a=i(34491),n=i(82005),r=i(67925),s=i(37949),l=i(5857),c=i(46731),d=i(37231),p=i(68104),m=i(88882),h=i(66084),g=i(52921);class u extends a.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,g.gn)([a.SB],u.prototype,"someState",void 0);let v=a._Y.createComponent("Confirm",u,e=>{if(!e.props.visible)return null;let{okText:t=m.S.Global.components.Modal.ok,cancelText:i=m.S.Global.components.Modal.cancel,okBtnType:a="primary",cancelBtnType:n="gray",title:r=m.S.Global.components.Modal.productSays}=e.props;return(0,o.jsxs)(p.u,{closeIconVisible:!1,width:340,className:"confirm--_9K5E",fixed:e.props.fixed,onDispose:e.props.onCancel,children:[(0,o.jsx)("div",{className:"confirm-title--S5WTl",children:r}),(0,o.jsx)("div",{className:"confirm-content--DO_u8",children:e.props.content}),(0,o.jsx)("div",{className:"footer--yO7RS",children:(0,o.jsxs)("div",{className:"btn-group--uw4US",children:[(0,o.jsx)(l.z,{type:n,disabled:e.props.cancelDisabled,loading:e.props.cancelLoading,noBorder:!0,onClick:()=>{var t,i;null===(t=(i=e.props).onCancel)||void 0===t||t.call(i)},children:i}),(0,o.jsx)(l.z,{type:a,disabled:e.props.okDisabled,loading:e.props.okLoading,onClick:()=>{var t,i;null===(t=(i=e.props).onOk)||void 0===t||t.call(i)},children:t})]})})]})});var C=i(9163),x=i(48023),y=i(31640),b=i(5336),f=i(17081),w=i(55229),S=i(81131),A=i(77313),j=i(36401),k=i(11430),N=i(92347),_=i(92660),T=i(95782),I=i(92235),M=i(78716),L=i.n(M),B=i(62499),E={promptOperation:"prompt-operation--Po0Gm",header:"header--K4lON",selectionActionHeader:"selection-action-header--wBbuq",hintWrapper:"hint-wrapper--E3JGT",hint:"hint--HzeP4",content:"content--DZXBE",radioGroupWrapper:"radio-group-wrapper--DmLn5",item:"item--Uu1gz",label:"label--wL7SW",inputBox:"input-box--OVo8c",input:"input--dOF6t",description:"description--vfFhb",promptHint:"prompt-hint--gBHsV",tag:"tag--YRMw1",select:"select--n2y8C",inputOverwrite:"input-overwrite--BhohM",iconList:"icon-list--s0eea",footer:"footer--bEg6g",link:"link--p2NlX",questionIcon:"question-icon--QzCCl",checkboxGroup:"checkbox-group--JkVg6",checkboxItem:"checkbox-item--Owgvx"},D=i(15851),P=i(38172),F=i(73047),R=i(4461),V={src:"https://assets.monica.im/home-web/_next/static/media/promptGuideExample.fe402f58.jpg",height:356,width:904,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAADAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGvB//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABUQAQEAAAAAAAAAAAAAAAAAAAEA/9oACAEBAAE/IQv/2gAMAwEAAgADAAAAEAP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/EH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/EH//xAAXEAADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEBAAE/EFXD/9k=",blurWidth:8,blurHeight:3},U={promptTutorialDialog:"prompt-tutorial-dialog--Fr0qa",header:"header--WuINs",tutorials:"tutorials--MYGEt",tutorialItem:"tutorial-item--Jg6NV",guide:"guide--rBdu9",example:"example--Dlj1p"};class z extends a.PN{get S(){return m.S.Global.modules.ChatBox.UserPrompt.PromptTutorialDialog}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"someState",!0)}}(0,g.gn)([a.SB],z.prototype,"someState",void 0),(0,g.gn)([F.Fl],z.prototype,"S",null);let O=a._Y.createComponent("PromptTutorialDialog",z,e=>(0,o.jsx)(p.u,{width:500,fixed:"dialogRoot"===e.props.insertTarget,onDispose:()=>{e.props.onDisposed()},children:(0,o.jsxs)("div",{className:U.promptTutorialDialog,children:[(0,o.jsx)("h1",{className:U.header,children:e.S.header}),(0,o.jsxs)("main",{className:U.tutorials,children:[(0,o.jsxs)("div",{className:U.tutorialItem,children:[(0,o.jsx)(T.Z,{className:U.guide,S:e.S.firstStepGuide,components:{b:e=>(0,o.jsx)("b",{children:e})}}),(0,o.jsx)("div",{className:U.example,children:e.S.firstStepExample})]}),(0,o.jsxs)("div",{className:U.tutorialItem,children:[(0,o.jsx)(T.Z,{className:U.guide,S:e.S.secondStepGuide,components:{b:e=>(0,o.jsx)("b",{children:e})}}),(0,o.jsx)("div",{className:U.example,children:e.S.secondStepExample})]}),(0,o.jsx)("div",{className:U.tutorialItem,children:(0,o.jsx)(T.Z,{className:U.guide,S:e.S.thirdStepGuide,components:{b:e=>(0,o.jsx)("b",{children:e})}})}),(0,o.jsx)(R.E,{src:V,style:{width:"100%",height:178},alt:""})]})]})})),W=n.t.createOpener(O);class H extends a.PN{get S(){return m.S.Global.modules.ChatBox.UserPrompt.PromptOperation}get isAllScenes(){return r.customPromptController.operationData.promptType!==N.kq.MyPrompt&&this.promptScenes.length===this.promptSceneOptions.length}get saveDisabled(){let e=r.customPromptController.operationData.prompt;if(e){let{content:t,name:i}=e,o=e.description||"";if(!i||!t||i.length>_.rK.promptName||o.length>_.rK.promptDesc)return!0}return!1}get currentBehavior(){return r.customPromptController.operationData.prompt.directSend?G.send:G.insert}get objName(){return this.props.type===N.kq.MyPrompt?this.S.prompt.toLocaleLowerCase():this.S.action.toLocaleLowerCase()}get title(){return"edit"===r.customPromptController.operationData.operation?(0,m.x)(this.S.editTitle,{title:this.objName}):(0,m.x)(this.S.createTitle,{title:this.objName})}get allPrompts(){let e=this.props.type;return e===N.kq.MyPrompt?r.customPromptController.promptRenderList:e===N.kq.SelectionAction?r.customPromptController.actionRenderList:r.customPromptController.composeActionRenderList}get behaviorOptions(){return[G.insert(),G.send()]}get promptSceneOptions(){return[{key:N.kq.SelectionAction,label:this.S.readingScene},{key:N.kq.ComposeAction,label:this.S.writingScene}]}onViewCreate(){}onViewDestroy(){}async resetToDefault(){this.isLoading=!0;let{prompt:e,promptType:t,insertTarget:i}=r.customPromptController.operationData;try{await P.W.resetCustomPrompt(t,{id:e.id}),r.customPromptController.operationData.visible=!1}catch(e){D.M.error("".concat(e),i)}this.isLoading=!1}showPromptTutorial(){W({insertTarget:r.customPromptController.operationData.insertTarget})}async save(){let{prompt:e,operation:t}=r.customPromptController.operationData;if(0===e.name.trim().length){D.M.error(this.S.pleaseInputName,r.customPromptController.operationData.insertTarget);return}if(0===e.content.trim().length){D.M.error(this.S.pleaseInputPrompt,r.customPromptController.operationData.insertTarget);return}P.W.createUserBehaviorEvent({eventName:"prompt_operation_save"}),this.isLoading=!0;try{await r.customPromptController.save("add"===t&&this.isAllScenes),r.customPromptController.operationData.visible=!1}catch(e){D.M.error("".concat(I.m.formatMonicaSdkError(e)),r.customPromptController.operationData.insertTarget)}this.isLoading=!1}async delete(){this.isDeleting=!0;try{await r.customPromptController.delete(),r.customPromptController.operationData.visible=!1}catch(e){D.M.error("".concat(I.m.formatMonicaSdkError(e)),r.customPromptController.operationData.insertTarget)}this.isDeleting=!1}handleDeleteClicked(){if(1===this.allPrompts.length){D.M.error(this.S.deleteError,r.customPromptController.operationData.insertTarget);return}r.customPromptController.operationData.operation="delete"}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"isLoading",!1),(0,h._)(this,"isDeleting",!1),(0,h._)(this,"promptScenes",[N.kq.ComposeAction,N.kq.SelectionAction])}}(0,g.gn)([a.SB],H.prototype,"isLoading",void 0),(0,g.gn)([a.SB],H.prototype,"isDeleting",void 0),(0,g.gn)([a.SB],H.prototype,"promptScenes",void 0),(0,g.gn)([F.Fl],H.prototype,"S",null),(0,g.gn)([F.Fl],H.prototype,"isAllScenes",null),(0,g.gn)([F.Fl],H.prototype,"saveDisabled",null),(0,g.gn)([F.Fl],H.prototype,"currentBehavior",null),(0,g.gn)([F.Fl],H.prototype,"objName",null),(0,g.gn)([F.Fl],H.prototype,"title",null),(0,g.gn)([F.Fl],H.prototype,"allPrompts",null),(0,g.gn)([F.Fl],H.prototype,"behaviorOptions",null),(0,g.gn)([F.Fl],H.prototype,"promptSceneOptions",null);let G={insert:()=>m.S.Global.modules.ChatBox.UserPrompt.PromptOperation.insertIntoInput,send:()=>m.S.Global.modules.ChatBox.UserPrompt.PromptOperation.sendDirectly},Q=a._Y.createComponent("PromptOperation",H,e=>{let{operation:t,promptType:i,prompt:a}=r.customPromptController.operationData,n=i===N.kq.SelectionAction&&0!==a.baseOnSystemId,s="edit"===t&&!n;return"delete"===t?(0,o.jsx)(J,{vm:e}):(0,o.jsx)(p.u,{width:420,fixed:e.props.fixed,closeOnMaskClick:!0,style:{overflowX:"hidden",maxWidth:"90%"},onDispose:()=>{r.customPromptController.hideOperation()},children:(0,o.jsxs)("div",{className:E.promptOperation,children:[(0,o.jsx)("div",{style:{paddingInlineStart:20},className:L()(E.header,{[E.selectionActionHeader]:i===N.kq.SelectionAction}),children:e.title}),i===N.kq.MyPrompt?(0,o.jsx)(q,{vm:e}):(0,o.jsx)(K,{vm:e}),(0,o.jsxs)("div",{className:E.footer,children:[s&&(0,o.jsx)(l.z,{type:"dangerOutline",noBorder:!0,size:"large",loading:e.isDeleting,onClick:()=>{e.handleDeleteClicked()},children:e.S.delete}),!s&&(0,o.jsx)(l.z,{type:"gray",size:"large",noBorder:!0,onClick:()=>{r.customPromptController.hideOperation()},children:e.S.cancel}),!n&&(0,o.jsx)(l.z,{type:"primary",size:"large",disabled:e.saveDisabled,loading:e.isLoading,onClick:e.save.bind(e),children:e.S.save})]})]})})}),J=(0,B.Pi)(e=>{let{vm:t}=e,{insertTarget:i,prompt:a}=r.customPromptController.operationData;return(0,o.jsx)(v,{fixed:t.props.fixed,okLoading:t.isDeleting,visible:!0,okText:t.S.delete,cancelBtnType:"gray",okBtnType:"danger",cancelText:t.S.cancel,onOk:()=>{t.delete()},onCancel:()=>{r.customPromptController.edit(t.props.type,a,i)},content:(0,m.x)(m.S.Global.modules.ChatBox.UserPrompt.PromptOperation.deleteConfirm,{objName:t.objName,promptName:a.name})})}),q=(0,B.Pi)(e=>{let{vm:t}=e,{prompt:i}=r.customPromptController.operationData;return(0,o.jsxs)("div",{className:E.content,children:[(0,o.jsxs)("div",{className:E.radioGroupWrapper,children:[(0,o.jsx)(C.E,{value:i.isPublic?"public":"private",direction:"row",options:[{key:"private",label:t.S.privatePrompt},{key:"public",label:t.S.publicPrompt}],onChange:e=>{i.isPublic="public"===e}}),(0,o.jsx)(x.u,{title:t.S.publicPromptTooltip,children:(0,o.jsx)("span",{className:E.questionIcon,children:(0,o.jsx)(c.J,{name:"question",size:16,color:"var(--theme-icon-primary)"})})})]}),i.isPublic&&(0,o.jsxs)("div",{className:E.item,children:[(0,o.jsx)("div",{className:E.label,children:t.S.promptLanguage}),(0,o.jsx)(b.S,{scene:"functional",placement:"bottomLeft",className:E.select,popoverWrapperClassName:E.select,width:180,value:i.locale?y.q.getComposeLanguageByLocale(i.locale):null,onChange:e=>{e&&(i.locale=y.q.getLocaleByComposeLanguage(e)||void 0)}})]}),(0,o.jsxs)("div",{className:E.item,children:[(0,o.jsx)("div",{className:E.label,children:t.S.name}),(0,o.jsx)("div",{className:E.input,children:(0,o.jsx)(f.x,{validate:()=>(0,f.z)(i.name,{maxLength:_.rK.promptName}),children:(0,o.jsx)(d.I,{className:E.inputOverwrite,value:i.name,onChange:e=>{i.name=e},placeholder:(0,m.x)(t.S.inputPlaceholder,{objName:t.objName})})})})]}),i.isPublic&&(0,o.jsxs)("div",{className:E.item,children:[(0,o.jsx)("div",{className:E.label,children:t.S.category}),(0,o.jsx)(w.x,{placement:"bottomLeft",wrapperClassName:E.select,width:180,maxHeight:200,value:i.category||r.customPromptController.defaultCategory,onChange:e=>{i.category=e},options:r.customPromptController.categoryList.map(e=>({key:e.key,label:e.name}))})]}),i.isPublic&&(0,o.jsxs)("div",{className:E.item,children:[(0,o.jsx)("div",{className:E.label,children:t.S.descriptionOptional}),(0,o.jsx)("div",{className:E.input,children:(0,o.jsx)(f.x,{validate:()=>(0,f.z)(i.description||"",{maxLength:_.rK.promptDesc,required:!1}),children:(0,o.jsx)(S.W,{className:E.textarea,value:i.description,onChange:e=>{i.description=e.target.value},autoSize:{minRows:2,maxRows:3},placeholder:t.S.descriptionPlaceholder})})})]}),(0,o.jsxs)("div",{className:E.item,children:[(0,o.jsx)("div",{className:E.label,children:t.S.prompt}),(0,o.jsx)(T.Z,{className:E.promptHint,S:t.S.promptHint,components:{link:e=>(0,o.jsx)("a",{className:E.link,onClick:()=>{let e="".concat(I.m.getWebOrigin(),"/help/Features/Prompt/Prompt_template");window.open(e,"_blank")},children:e}),tag:()=>(0,o.jsx)("span",{className:E.tag,children:"[\xa0]"})}}),(0,o.jsx)("div",{className:E.input,children:(0,o.jsx)(f.x,{validate:()=>(0,f.z)(i.content||"",{maxToken:_.rK.maxToken}),children:(0,o.jsx)(S.W,{className:E.textarea,value:i.content,onChange:e=>{i.content=e.target.value},autoSize:{minRows:3,maxRows:i.isPublic?9:12},placeholder:t.S.myPromptEg})})})]})]})}),K=(0,B.Pi)(e=>{let{vm:t}=e,{insertTarget:i,prompt:a,operation:n}=r.customPromptController.operationData,s=0!==a.baseOnSystemId;return(0,o.jsxs)(o.Fragment,{children:[s&&(0,o.jsx)("div",{className:E.hintWrapper,children:(0,o.jsx)("div",{className:E.hint,children:(0,o.jsx)(T.Z,{S:t.S.hint,components:{link:e=>a.contentModified?(0,o.jsx)("span",{className:E.link,onClick:()=>{t.resetToDefault()},children:e}):null}})})}),(0,o.jsxs)("div",{className:E.content,children:[(0,o.jsxs)("div",{className:E.item,children:[(0,o.jsx)("div",{className:E.label,children:t.S.nameAndIcon}),(0,o.jsxs)("div",{className:E.content,children:[(0,o.jsx)("div",{className:E.inputBox,children:(0,o.jsx)(f.x,{validate:()=>(0,f.z)(a.name,{maxLength:_.rK.promptName}),children:(0,o.jsx)(d.I,{className:E.input,disabled:s,size:"large",value:a.name,onChange:e=>{a.name=e},placeholder:(0,m.x)(t.S.inputPlaceholder,{objName:t.objName})})})}),(0,o.jsx)("div",{className:E.iconPicker,children:(0,o.jsx)(A.$1,{iconListClassName:E.iconList,disabled:s,insertTarget:i,placement:"bottomLeft",value:a.iconName||A.jp,onChange:e=>{a.iconName=e}})})]})]}),(0,o.jsxs)("div",{className:E.item,children:[(0,o.jsx)("div",{className:E.label,children:t.S.prompt}),(0,o.jsx)("p",{className:E.description,children:(0,o.jsx)(T.Z,{S:t.S.promptDescription,components:{link:e=>(0,o.jsx)("span",{className:E.link,onClick:()=>{t.showPromptTutorial()},children:e})}})}),(0,o.jsx)("div",{className:E.input,children:(0,o.jsx)(f.x,{validate:()=>(0,f.z)(a.content||"",{maxToken:_.rK.maxToken}),children:(0,o.jsx)(S.W,{rowsData:2,disabled:s,value:a.content,onChange:e=>{a.content=e.target.value},placeholder:t.S.textareaPlaceholder})})})]}),"add"===n&&(0,o.jsxs)("div",{className:E.item,children:[(0,o.jsx)("div",{className:E.label,children:t.S.followingConditions}),(0,o.jsxs)("div",{className:E.checkboxGroup,children:[(0,o.jsxs)("div",{className:E.checkboxItem,onClick:()=>{t.isAllScenes?t.promptScenes=[]:t.promptScenes=t.promptSceneOptions.map(e=>e.key)},children:[(0,o.jsx)(j.X,{checked:t.isAllScenes,indeterminate:!t.isAllScenes&&!!t.promptScenes.length}),(0,o.jsx)("span",{children:t.S.allScenes})]}),(0,o.jsx)(k.c,{className:E.checkboxGroup,value:t.promptScenes,options:t.promptSceneOptions,onChange:e=>{t.promptScenes=e}})]})]})]})]})});var Y=i(97787),Z=i(56607);class X extends a.PN{get commonInsertTarget(){let e="dialogRoot";return s.w.visible&&(e="mainWindow"),this.withInsertTarget(e)}onViewCreate(){this.mounted=!0}onViewDestroy(){this.mounted=!1}withInsertTarget(e){return Z.o.isWeb?"dialogRoot":e}constructor(...e){super(...e),(0,h._)(this,"props",void 0),(0,h._)(this,"mounted",!1)}}(0,g.gn)([a.SB],X.prototype,"mounted",void 0),(0,g.gn)([F.Fl],X.prototype,"commonInsertTarget",null);let $=(0,B.Pi)(e=>{let{children:t,visible:i=!0,insertTarget:o="mainWindow"}=e;return i&&("mainWindow"!==o||n.t.mainWindowDialogRoot)&&("dialogRoot"!==o||n.t.dialogRoot)?(0,Y.createPortal)(t,"mainWindow"===o?n.t.mainWindowDialogRoot:n.t.dialogRoot):null}),ee=a._Y.createComponent("ExtensionDialogRoot",X,e=>{let t=e.withInsertTarget(r.customPromptController.operationData.insertTarget);return(0,o.jsx)("div",{className:"dialog-root--tjMLq",ref:e=>{n.t.setDialogRoot(e)},onKeyDown:e=>{s.w.getShortcutRecognitionResult(e)||e.stopPropagation()},children:e.mounted?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)($,{insertTarget:t,visible:r.customPromptController.operationData.visible,children:(0,o.jsx)(Q,{type:r.customPromptController.operationData.promptType,fixed:"dialogRoot"===t})})}):null})})},17081:function(e,t,i){"use strict";i.d(t,{x:function(){return h},z:function(){return g}});var o=i(71576),a=i(34491),n=i(88882),r=i(78716),s=i.n(r),l=i(75087),c={formItem:"form-item--VhUQ_",errorMsg:"error-msg--A1UWQ",formItemWithError:"form-item-with-error--mJcNQ"},d=i(66084),p=i(52921);class m extends a.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"errMsg","")}}(0,p.gn)([a.SB],m.prototype,"errMsg",void 0);let h=a._Y.createComponent("FormItem",m,e=>(0,o.jsxs)("div",{className:s()(c.formItem,{[c.formItemWithError]:e.errMsg}),children:[l.Children.map(e.props.children,t=>{if(!l.isValidElement(t))return t;let{onChange:i}=t.props;return l.cloneElement(t,{onChange:function(){for(var t,o,a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];i(...n),e.errMsg=null===(t=(o=e.props).validate)||void 0===t?void 0:t.call(o)}})}),e.errMsg&&(0,o.jsx)("div",{className:c.errorMsg,children:e.errMsg})]})),g=(e,t)=>{let{required:i=!0,maxLength:o,maxToken:a}=t;return i&&!e?n.S.Global.components.FormItem.pleaseInput:o&&e.length>o?(0,n.x)(n.S.Global.components.FormItem.maxLength,{maxLength:o}):""}},92217:function(e,t,i){"use strict";i.d(t,{B:function(){return S}});var o=i(71576),a=i(34491),n=i(68104),r=i(66952),s=i(46515),l=i(82005),c=i(75394),d=i(30542),p={signInDialog:"sign-in-dialog--nDeDJ",header:"header--Nsewq",logo:"logo--lqmQk",content:"content--YEebj",googleBtn:"google-btn--szTvR"},m=i(66084),h=i(52921),g=i(88882),u=i(73047);class v extends a.PN{get S(){return g.S.Global.components.SignInDialog}async onViewCreate(){}onViewDestroy(){s.u.reset()}constructor(...e){super(...e),(0,m._)(this,"props",void 0)}}(0,h.gn)([u.Fl],v.prototype,"S",null);var C=i(49636),x=i(9408),y=i(75688),b=i(56987),f=i(38569);let w=a._Y.createComponent("SignInDialog",v,e=>{let t=e.props.redirectTo||window.location.href;return(0,o.jsxs)(n.u,{className:p.signInDialog,onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,width:475,closeOnMaskClick:!1,children:[(0,o.jsxs)("div",{className:p.header,children:[(0,o.jsx)(r.T,{size:32,gap:8,showTitle:!0,titleClassName:p.logo}),(0,o.jsx)(C.r,{})]}),(0,o.jsx)("div",{className:p.content,children:s.u.emailFormVisible?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.e,{redirectTo:t,type:"primaryOutline",className:p.googleBtn}),(0,o.jsx)(y.s,{redirectTo:t}),(0,o.jsx)(d.i,{}),(0,o.jsx)(b.M,{redirectTo:t})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.e,{type:"primaryGradient",redirectTo:t}),(0,o.jsx)(d.i,{}),(0,o.jsx)(b.M,{redirectTo:t}),(0,o.jsx)(y.s,{redirectTo:t})]})}),s.u.chineseSignUpAlertVisible&&(0,o.jsx)(c.T,{}),s.u.isSignUp&&(0,o.jsx)(x.w,{})]})}),S=l.t.createOpener(w,{singleton:!0})},8954:function(e,t,i){"use strict";i.d(t,{Z:function(){return w}});var o=i(71576),a=i(34491),n=i(78716),r=i.n(n),s=i(33381),l=i(46731),c=i(75372),d=i(49738),p=i(48023),m=i(36047),h={userPopover:"user-popover--tk9pp",user:"user--hgf3t",usage:"usage--gw7oZ",model:"model--vJiq2",userInfoWrapper:"user-info-wrapper--s9EBo",userName:"user-name--QyPaJ",btn:"btn--rL6Lt"},g=i(66084),u=i(52921),v=i(88882),C=i(92235),x=i(32004),y=i(73047),b=i(18245);class f extends a.PN{get S(){return v.S.Global.components.UserPopover}get isMobile(){return C.m.getIsMobile()}onViewCreate(){this.updateFinallyCanUsed(),x.f.getProxy(this).add((0,y.U5)(()=>b.K.usageInfos,()=>{this.updateFinallyCanUsed()}))}onViewDestroy(){x.f.getProxy(this).disposeAll()}getDisplayUsageModel(){let{usageModule:e}=this.props;return e&&({reading_pdf:this.S.pdf,ai_content_detect:this.S.aiDetector,image_gen:this.S.image,credits:this.S.credits})[e]||""}updateFinallyCanUsed(){let{usageModule:e}=this.props;if(!e)return;let{displayFinallyCanUsed:t,finallyTotal:i}=b.K.getUsageInfo(e);this.finallyCanUsed=b.K.checkQuotaIsUnlimited(i)?"Unlimited":String(t)}constructor(...e){super(...e),(0,g._)(this,"props",void 0),(0,g._)(this,"finallyCanUsed","")}}(0,u.gn)([a.SB],f.prototype,"finallyCanUsed",void 0),(0,u.gn)([y.Fl],f.prototype,"S",null),(0,u.gn)([y.Fl],f.prototype,"isMobile",null);let w=a._Y.createComponent("UserPopover",f,e=>{var t;let i=e.getDisplayUsageModel();return s.userController.isLogin?(0,o.jsx)(c.x,{trigger:e.props.trigger||"click",content:(0,o.jsx)(d.N,{source:e.props.source}),placement:e.props.placement||"bottomRight",className:r()(h.userPopover,e.props.wrapperClassName),align:e.isMobile?{offset:[20,0]}:void 0,onOpenChange:t=>{if(t){var i,o;null===(i=(o=e.props).onProfileShow)||void 0===i||i.call(o)}},children:(0,o.jsxs)("span",{className:r()(h.user,e.props.className),children:[e.props.renderUsage?e.props.renderUsage(e.finallyCanUsed):i&&!!e.finallyCanUsed&&(0,o.jsxs)("span",{className:h.usage,children:[(0,o.jsx)(l.J,{name:"monicaLighting",size:12,color:"currentColor"}),(0,o.jsxs)("span",{className:h.model,children:[i,":"]}),e.finallyCanUsed]}),(0,o.jsxs)("div",{className:h.userInfoWrapper,children:[e.isMobile?(0,o.jsx)(m.Y,{circle:!0,size:e.props.avatarSize||40,className:r()(h.btn)}):(0,o.jsx)(p.u,{title:e.S.account,trigger:["hover"],placement:"bottomRight",children:(0,o.jsx)(m.Y,{circle:!0,size:e.props.avatarSize||40,className:r()(h.btn)})}),e.props.displayUserName&&(0,o.jsx)("div",{className:h.userName,children:null===(t=s.userController.userInfo)||void 0===t?void 0:t.name})]})]})}):e.props.fallback||null})},71958:function(e,t,i){"use strict";i.d(t,{k:function(){return r}});var o=i(66084),a=i(52921),n=i(34491);class r extends n.PN{onViewCreate(){var e;this.isHover=null!==(e=this.props.autoPlay)&&void 0!==e&&e}onViewDestroy(){}constructor(...e){super(...e),(0,o._)(this,"props",void 0),(0,o._)(this,"isHover",!1)}}(0,a.gn)([n.SB],r.prototype,"isHover",void 0),r=(0,a.gn)([n.Tt],r)},93124:function(e,t,i){"use strict";i.d(t,{n:function(){return u}});var o=i(71576),a=i(34491),n=i(78716),r=i.n(n),s=i(53040),l=i(61658),c={videoWrapper:"video-wrapper--v0CdS",videoLoading:"videoLoading--h1hm6"},d=i(66084),p=i(52921),m=i(73047),h=i(71958);class g extends a.PN{get showVideo(){return this.inView&&this.serverFetched}get hoverPlay(){return!!this.props.useProvider||this.props.hoverPlay}get isAutoPlay(){if(this.props.useProvider){var e,t;return null===(t=this.ctx)||void 0===t?void 0:null===(e=t.props)||void 0===e?void 0:e.autoPlay}return this.props.autoPlay}providerHoverStatusChange(){if(this.props.useProvider){var e;(null===(e=this.ctx)||void 0===e?void 0:e.isHover)?this.handleMouseEnter():this.handleMouseLeave()}}onViewCreate(){this.el&&this.props.lazyload?(this.inViewObserver=new IntersectionObserver(e=>{if(e[0].intersectionRatio>0){var t;if(this.inView=!0,null===(t=this.inViewObserver)||void 0===t||t.disconnect(),this.inViewObserver=null,!this.props.src){this.serverFetched=!0;return}}}),this.inViewObserver.observe(this.el)):this.inView=!0,this.serverFetched=!0,this.providerHoverStatusChange()}onViewDestroy(){var e;null===(e=this.inViewObserver)||void 0===e||e.disconnect(),this.inViewObserver=null}handleMouseEnter(){this.hoverPlay&&this.videoEl&&(this.videoEl.loop=!0,this.videoEl.muted=!0,this.playing=!0,this.videoEl.play(),this.isAutoPlay||(this.videoLoading=!this.isLoaded))}handleMouseLeave(){this.videoLoading=!1,this.hoverPlay&&this.videoEl&&!this.isAutoPlay&&(this.videoEl.pause(),this.videoEl.currentTime=0,this.playing=!1)}constructor(...e){super(...e),(0,d._)(this,"props",void 0),(0,d._)(this,"el",null),(0,d._)(this,"videoEl",null),(0,d._)(this,"inViewObserver",null),(0,d._)(this,"ctx",(0,a.qp)(h.k)),(0,d._)(this,"inView",!1),(0,d._)(this,"blobUrl",""),(0,d._)(this,"playing",!1),(0,d._)(this,"serverFetched",!1),(0,d._)(this,"isLoaded",!1),(0,d._)(this,"videoLoading",!1)}}(0,p.gn)([a.Do],g.prototype,"ctx",void 0),(0,p.gn)([a.SB],g.prototype,"inView",void 0),(0,p.gn)([a.SB],g.prototype,"blobUrl",void 0),(0,p.gn)([a.SB],g.prototype,"playing",void 0),(0,p.gn)([a.SB],g.prototype,"serverFetched",void 0),(0,p.gn)([a.SB],g.prototype,"isLoaded",void 0),(0,p.gn)([a.SB],g.prototype,"videoLoading",void 0),(0,p.gn)([m.Fl],g.prototype,"showVideo",null),(0,p.gn)([m.Fl],g.prototype,"hoverPlay",null),(0,p.gn)([m.Fl],g.prototype,"isAutoPlay",null),(0,p.gn)([(0,a.YP)(e=>{var t;return[null===(t=e.ctx)||void 0===t?void 0:t.isHover,e.props.useProvider,e.showVideo]})],g.prototype,"providerHoverStatusChange",null);let u=a._Y.createComponent("Video",g,e=>{let{src:t,style:i,className:a,getRef:n,lazyload:d,hoverPlay:p,useServiceFetch:m,poster:h,posterClassname:g,useProvider:u,...v}=e.props;return(0,o.jsxs)("span",{ref:t=>{e.el=t},style:{position:"relative",...i},className:r()(c.videoWrapper,a),onMouseEnter:()=>{u||e.handleMouseEnter()},onMouseLeave:()=>{u||e.handleMouseLeave()},children:[(0,o.jsx)(s.E,{lazyload:e.props.lazyload,useServiceFetch:e.props.useServiceFetch,src:h||"",className:g,ref:e=>{null==n||n(e)},skeleton:!0}),e.showVideo&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("video",{...v,poster:h,src:e.blobUrl||t,ref:t=>{e.videoEl=t,null==n||n(t)},style:{position:"absolute",left:0,right:0,top:0,bottom:0,opacity:e.showVideo?1:0,pointerEvents:"none",width:"100%",height:"100%",objectFit:"cover"},onError:()=>{e.serverFetched=!1},onLoadedData:()=>{e.isLoaded=!0,e.videoLoading=!1}}),e.videoLoading&&(0,o.jsx)("div",{className:c.videoLoading,children:(0,o.jsx)(l.g,{fullScreen:!0})})]})]})})},90867:function(e,t,i){"use strict";i.d(t,{f:function(){return c}});var o=i(71576),a=i(58812),n=i(34491),r=i(66084);class s extends n.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M0.25 15.4436C0.25 14.0629 1.36929 12.9436 2.75 12.9436C4.13071 12.9436 5.25 14.0629 5.25 15.4436V22.8186C5.25 24.1993 4.13071 25.3186 2.75 25.3186C1.36929 25.3186 0.25 24.1993 0.25 22.8186V15.4436Z\\" fill=\\"white\\"/>\\n<rect x=\\"10.9673\\" y=\\"7.125\\" width=\\"5\\" height=\\"24.0125\\" rx=\\"2.5\\" fill=\\"white\\"/>\\n<path d=\\"M21.6848 2.75C21.6848 1.36929 22.8041 0.25 24.1848 0.25C25.5655 0.25 26.6848 1.36929 26.6848 2.75V35.5125C26.6848 36.8932 25.5655 38.0125 24.1848 38.0125C22.8041 38.0125 21.6848 36.8932 21.6848 35.5125V2.75Z\\" fill=\\"white\\"/>\\n<path d=\\"M32.4016 9.18018C32.4016 7.79947 33.5209 6.68018 34.9016 6.68018C36.2823 6.68018 37.4016 7.79946 37.4016 9.18018V29.0819C37.4016 30.4626 36.2823 31.5819 34.9016 31.5819C33.5209 31.5819 32.4016 30.4626 32.4016 29.0819V9.18018Z\\" fill=\\"white\\"/>\\n<path d=\\"M43.1191 15.4436C43.1191 14.0629 44.2384 12.9436 45.6191 12.9436C46.9999 12.9436 48.1191 14.0629 48.1191 15.4436V22.8186C48.1191 24.1993 46.9999 25.3186 45.6191 25.3186C44.2384 25.3186 43.1191 24.1993 43.1191 22.8186V15.4436Z\\" fill=\\"white\\"/>\\n\\n","viewBox":"0 0 49 39"}');let c=n._Y.createComponent("AudioIcon",s,e=>(0,o.jsx)(a.s,{...e.props,name:"AudioIcon",iconData:l}))},22979:function(e,t,i){"use strict";i.d(t,{x:function(){return c}});var o=i(71576),a=i(58812),n=i(34491),r=i(66084);class s extends n.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M12.5 4.99805L8.08926 9.40879C7.81148 9.68657 7.67259 9.82546 7.67259 9.99805C7.67259 10.1706 7.81148 10.3095 8.08926 10.5873L12.5 14.998\\" stroke=\\"#222226\\" stroke-width=\\"1.25\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\n\\n","viewBox":"0 0 20 20"}');let c=n._Y.createComponent("BackIcon",s,e=>(0,o.jsx)(a.s,{...e.props,name:"BackIcon",iconData:l}))},49284:function(e,t,i){"use strict";i.d(t,{Y:function(){return c}});var o=i(71576),a=i(58812),n=i(34491),r=i(66084);class s extends n.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M1.11133 17.7778C1.11133 19.0051 2.10625 20 3.33355 20H16.6669C17.8942 20 18.8891 19.0051 18.8891 17.7778V5.55556L13.3336 0H3.33355C2.10625 0 1.11133 0.994923 1.11133 2.22222V17.7778Z\\" fill=\\"url(#paint0_linear_215_1181)\\"/>\\n<path d=\\"M15.161 11.4861C14.8354 11.136 14.1842 10.9376 13.2538 10.9376C12.7538 10.9376 12.1839 10.9842 11.556 11.1009C11.2071 10.7508 10.8466 10.3424 10.5093 9.86387C10.2651 9.52542 10.0558 9.17531 9.86971 8.82519C10.2418 7.6698 10.4163 6.73616 10.4163 6.05926C10.4163 5.30068 10.1488 4.50708 9.35802 4.50708C9.11381 4.50708 8.88122 4.6588 8.7533 4.86887C8.40442 5.51075 8.5556 6.91122 9.17195 8.28834C8.93937 8.97691 8.70678 9.64213 8.40442 10.3774C8.14857 10.9959 7.84621 11.6495 7.53222 12.233C5.76457 12.9566 4.62489 13.7968 4.52023 14.4504C4.47371 14.6955 4.55512 14.9289 4.72956 15.104C4.7877 15.1506 5.02029 15.349 5.40406 15.349C6.57862 15.349 7.81132 13.4117 8.43931 12.233C8.91611 12.0696 9.40454 11.9179 9.88134 11.7778C10.4047 11.6261 10.9396 11.5094 11.4164 11.4277C12.6491 12.5598 13.7423 12.7465 14.2888 12.7465C14.9633 12.7465 15.2076 12.4664 15.289 12.233C15.4169 11.9412 15.3239 11.6145 15.1727 11.4394L15.161 11.4861ZM14.5331 11.9646C14.4865 12.2097 14.2423 12.373 13.9051 12.373C13.812 12.373 13.7306 12.3614 13.6376 12.338C13.0213 12.1863 12.4514 11.8712 11.87 11.381C12.4398 11.2877 12.9166 11.2643 13.219 11.2643C13.5562 11.2643 13.8469 11.276 14.033 11.3344C14.254 11.381 14.6028 11.5328 14.5331 11.9646ZM11.1257 11.1943C10.707 11.276 10.2651 11.381 9.79994 11.5094C9.4278 11.6145 9.04403 11.7195 8.66026 11.8595C8.86959 11.4511 9.04403 11.0543 9.20684 10.6808C9.40454 10.214 9.55572 9.74716 9.71853 9.30368C9.88134 9.58378 10.0558 9.86387 10.2302 10.109C10.521 10.4941 10.8233 10.8675 11.1257 11.1943ZM9.02077 5.06727C9.09055 4.93889 9.21847 4.86887 9.32313 4.86887C9.66038 4.86887 9.71853 5.26567 9.71853 5.58077C9.71853 6.10595 9.55572 6.91122 9.28825 7.83319C8.82307 6.54943 8.78819 5.48741 9.02077 5.06727ZM7.26475 12.7348C6.45069 14.112 5.6599 14.9756 5.1831 14.9756C5.09006 14.9756 5.00866 14.9406 4.93888 14.8939C4.84585 14.8005 4.79933 14.6838 4.82259 14.5438C4.91563 14.0536 5.83434 13.365 7.26475 12.7348Z\\" fill=\\"white\\" stroke=\\"white\\" stroke-width=\\"0.4125\\" stroke-linejoin=\\"round\\"/>\\n<path d=\\"M13.3335 3.33344C13.3335 4.56074 14.3284 5.55566 15.5557 5.55566H18.8891L13.3335 0.000108719V3.33344Z\\" fill=\\"#FBACA3\\"/>\\n<defs>\\n<linearGradient id=\\"paint0_linear_215_1181\\" x1=\\"10.0002\\" y1=\\"20\\" x2=\\"10.0002\\" y2=\\"0\\" gradientUnits=\\"userSpaceOnUse\\">\\n<stop stop-color=\\"#FF8888\\"/>\\n<stop offset=\\"1\\" stop-color=\\"#FF5353\\"/>\\n</linearGradient>\\n</defs>\\n\\n","viewBox":"0 0 20 20"}');let c=n._Y.createComponent("FilePDFIcon",s,e=>(0,o.jsx)(a.s,{...e.props,name:"FilePDFIcon",iconData:l}))},19051:function(e,t,i){"use strict";i.d(t,{U:function(){return c}});var o=i(71576),a=i(58812),n=i(34491),r=i(66084);class s extends n.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M2.51562 9.31444C2.51562 8.44826 2.51634 7.84669 2.56106 7.37078C2.60441 6.90948 2.68556 6.61851 2.81913 6.37151C2.9527 6.12451 3.15177 5.89731 3.51406 5.60849C3.88784 5.31052 4.39087 4.98059 5.11571 4.50639L5.85462 4.023C6.7237 3.45444 7.32973 3.05909 7.83674 2.80006C8.32864 2.54875 8.67037 2.45682 9.00007 2.45682C9.32977 2.45682 9.6715 2.54875 10.1634 2.80006C10.6704 3.05909 11.2764 3.45444 12.1455 4.02299L12.8844 4.50639C13.6093 4.98059 14.1123 5.31052 14.4861 5.60849C14.8484 5.89731 15.0474 6.12451 15.181 6.37151C15.3146 6.61851 15.3957 6.90948 15.4391 7.37078C15.4838 7.84669 15.4845 8.44826 15.4845 9.31444V9.72321C15.4845 11.2631 15.483 12.3472 15.3727 13.1675C15.2652 13.9676 15.0658 14.4105 14.7461 14.7303C14.4263 15.0501 13.9833 15.2494 13.1833 15.357C12.363 15.4673 11.2788 15.4688 9.73898 15.4688H8.26115C6.72132 15.4688 5.63717 15.4673 4.81688 15.357C4.01682 15.2494 3.57385 15.0501 3.25407 14.7303C2.93429 14.4105 2.73497 13.9676 2.6274 13.1675C2.51712 12.3472 2.51562 11.2631 2.51562 9.72321V9.31444Z\\" stroke=\\"black\\" stroke-width=\\"1.40625\\"/>\\n<rect x=\\"8.29688\\" y=\\"10.6172\\" width=\\"1.40625\\" height=\\"5.13281\\" rx=\\"0.632812\\" fill=\\"black\\"/>\\n\\n","viewBox":"0 0 18 18"}');let c=n._Y.createComponent("HomeRoundIcon",s,e=>(0,o.jsx)(a.s,{...e.props,name:"HomeRoundIcon",iconData:l}))},57156:function(e,t,i){"use strict";i.d(t,{w:function(){return c}});var o=i(71576),a=i(58812),n=i(34491),r=i(66084);class s extends n.PN{constructor(...e){super(...e),(0,r._)(this,"props",void 0)}}var l=JSON.parse('{"fill":"currentColor","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8 2.625C5.03147 2.625 2.625 5.03147 2.625 8C2.625 10.9685 5.03147 13.375 8 13.375C10.9685 13.375 13.375 10.9685 13.375 8C13.375 5.03147 10.9685 2.625 8 2.625ZM1.375 8C1.375 4.34111 4.34111 1.375 8 1.375C11.6589 1.375 14.625 4.34111 14.625 8C14.625 11.6589 11.6589 14.625 8 14.625C4.34111 14.625 1.375 11.6589 1.375 8ZM8 3.775C8.34518 3.775 8.625 4.05482 8.625 4.4V7.61373L10.6795 8.64098C10.9882 8.79535 11.1134 9.17077 10.959 9.47951C10.8046 9.78825 10.4292 9.91339 10.1205 9.75902L7.72049 8.55902C7.50875 8.45315 7.375 8.23673 7.375 8V4.4C7.375 4.05482 7.65482 3.775 8 3.775Z\\" fill=\\"#55555D\\"/>\\n</svg>\\n","viewBox":"0 0 16 16"}');let c=n._Y.createComponent("TimeIcon",s,e=>(0,o.jsx)(a.s,{...e.props,name:"TimeIcon",iconData:l}))},82287:function(e,t,i){"use strict";i.d(t,{n:function(){return C}});var o=i(66084),a=i(56607),n=i(92660),r=i(88882),s=i(92235),l=i(60445),c=i(65324),d=i(73047),p=i(48655),m=i(13942),h=i(11346),g=i(78826),u=i(15851),v=i(33381);class C{initSdk(){if(!document){console.warn("[GoogleAccountsController] not browser env");return}if(window.google){console.info("[GoogleAccountsController] already load google sdk"),this.init();return}let e=document.createElement("script");e.src=this.SDK_URL,e.type="text/javascript",e.onload=()=>{this.init()},e.onerror=e.onabort=()=>{console.warn("[GoogleAccountsController] sdk load failed!")},document.body.appendChild(e)}init(){window.handleCredentialResponse=e=>{this.sendCredentialToBackend(e)};try{google.accounts.id.initialize({client_id:a.o.isProd?n.pf:n.hu,use_fedcm_for_prompt:!0,itp_support:!0,context:"use",cancel_on_tap_outside:!1,callback:window.handleCredentialResponse}),google.accounts.id.prompt()}catch(e){console.error("[GoogleAccountsController]",e)}}async sendCredentialToBackend(e){let t=v.userController.getLoginTraceData();c.Cb.userApi.oneStepLogin({credential:e.credential,selectBy:e.select_by,firstEntry:t.firstEntry,refer:t.refer,utm:t.utm,origin:t.origin,tapClickId:t.tapClickId,tapRefCode:t.tapRefCode,locale:r.a.locale,firstFromPlatform:t.firstFromPlatform,...t.installFrom?{installFrom:t.installFrom}:{},...s.m.getDeviceInfo()},{ignoreGlobalErrorHandler:!0}).then(e=>{e.token&&("customAuth"===this.options.type?this.options.handleAuth(e):"defaultAuth"===this.options.type&&this.handleCommonAuth(e,this.options))}).catch(e=>{u.M.error(s.m.formatErrorMsg(e))})}async handleCommonAuth(e,t){if(e.needVerify&&e.authCode){g.routerController.navigateTo(l.Cl.emailAuth,{withSearch:!0});return}if(await v.userController.checkLogin(!0),await p.Cc.syncConfig(!0),v.userController.userInfo&&v.userController.userVipStatus&&(h.v.trackFbRegistration({checkCreatedTime:!0}),m.P.sendMessageToExt({event:"markAuth",payload:{token:e.token||"",loginEntry:t.loginEntry||"web",userInfo:(0,d.ZN)(v.userController.userInfo),userVipStatus:(0,d.ZN)(v.userController.userVipStatus),channel:t.channel}})),"defaultAuth"===this.options.type){var i,o;null===(i=(o=this.options).onSignIn)||void 0===i||i.call(o)}}constructor(e){(0,o._)(this,"options",void 0),(0,o._)(this,"SDK_URL",void 0),this.options=e,this.SDK_URL="https://accounts.google.com/gsi/client"}}},11346:function(e,t,i){"use strict";i.d(t,{v:function(){return d}});var o=i(66084),a=i(92660),n=i(92235),r=i(38172),s=i(33381);async function l(e){let t=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(i)).map(e=>e.toString(16).padStart(2,"0")).join("")}class c{async trackFbRegistration(e){try{var t,i,o,n;let r=null===(t=s.userController.userInfo)||void 0===t?void 0:t.id,c=null===(i=s.userController.userInfo)||void 0===i?void 0:i.utm;if(!r){console.warn("[pixel] no user id");return}if(!(null==c?void 0:c.includes("gas_fb"))){console.warn("[pixel] no fb gas user");return}if(null==e?void 0:e.checkCreatedTime){let e=(null===(o=s.userController.userInfo)||void 0===o?void 0:o.createdAt)||0;if(Date.now()-new Date(e).valueOf()>1*a.EB){console.warn("[pixel] created check failed");return}}if(window.fbq){let e=await l(String(r));this.sendPixelEvent("CompleteRegistration",e,null===(n=s.userController.userInfo)||void 0===n?void 0:n.createdAt)}else console.warn("[pixel] fbq not exist")}catch(e){console.error("[pixel] report error",e)}}trackEvent(e,t){try{this.xEnable&&this.reportEventToXPixel({eventName:e,data:t}),this.redditEnable&&this.reportEventToRedditPixel({eventName:e,data:t}),this.naverEnable&&this.reportEventToNaverPixel({eventName:e,data:t}),this.facebookEnable&&this.reportEventToMeta({eventName:e,data:t})}catch(e){globalThis.console.error(e)}}reportEventToMeta(e){var t;let i=null===(t=window)||void 0===t?void 0:t.fbq;if(i&&"first-install"===e.eventName){i("trackCustom","install_done");return}}reportEventToXPixel(e){var t;let i=null===(t=window)||void 0===t?void 0:t.twq;if(i){if("first-install"===e.eventName){i("event","tw-of8r0-ohisy");return}if("registration_completed"===e.eventName){i("event","tw-of8r0-on376");return}i("event",e.eventName,e.data)}}reportEventToRedditPixel(e){var t;let i=null===(t=window)||void 0===t?void 0:t.rdt;if(i){if("registration_completed"===e.eventName){i("track","SignUp");return}let t={customEventName:e.eventName};e.data instanceof Object&&(t={...t,...e.data}),i("track","Custom",{customEventName:e.eventName,params:t})}}reportEventToNaverPixel(e){var t,i,o;let a=null===(t=window)||void 0===t?void 0:t.wcs;if(a){if("registration_completed"===e.eventName){null===(i=a.trans)||void 0===i||i.call(a,{type:"sign_up",value:"1"});return}if("payment_completed"===e.eventName){let t={type:"purchase",...e.data};null===(o=a.trans)||void 0===o||o.call(a,t);return}}}getFBP(){var e;return null===(e=document.cookie.match(/_fbp=([^;]*)/))||void 0===e?void 0:e[1]}getFBC(){var e;return null===(e=document.cookie.match(/_fbc=([^;]*)/))||void 0===e?void 0:e[1]}sendPixelEvent(e,t,i){var o,a,s;if(!(null===(o=navigator)||void 0===o?void 0:o.sendBeacon)){console.warn("[pixel] sendBeacon");return}let l=encodeURIComponent(window.location.href),c=encodeURIComponent(document.referrer),d=this.getFBP(),p=new Date(i||Date.now()).valueOf(),m=p-1e3,h=this.getFBC(),g=new URL("https://www.facebook.com/tr/?id=".concat(this.META_DATA_ID,"&ev=").concat(e,"&eid=").concat(t,"&dl=").concat(l,"&rl=").concat(c,"&if=false&ts=").concat(p,"&ud[external_id]=").concat(t,"&v=2.9.176&r=stable&ec=1&o=4126&fbp=").concat(d,"&ler=empty&cdl=API_unavailable&it=").concat(m,"&coo=false&exp=f2&rqm=FGET"));h&&g.searchParams.append("fbc",h),null===(s=navigator)||void 0===s||null===(a=s.sendBeacon)||void 0===a||a.call(s,g.toString()),r.W.createUserBehaviorEvent({eventName:"fb_".concat(n.m.underlizeKey(e)),extData:{eventId:t,externalId:t,ts:p,it:m,fbp:d,fbc:h}})}constructor(){(0,o._)(this,"xEnable",!0),(0,o._)(this,"redditEnable",!0),(0,o._)(this,"naverEnable",!0),(0,o._)(this,"facebookEnable",!0),(0,o._)(this,"META_DATA_ID","986473380276653")}}let d=new c},99568:function(e,t,i){"use strict";i.d(t,{F:function(){return R}});var o=i(71576),a=i(34491),n=i(36976),r=i(56607),s=i(92235),l=i(62499),c=i(46731),d=i(27534),p=i(5857),m=i(61658),h=i(75372),g=i(20995),u=i(69645),v=i(1396),C=i(67061),x=i(11502),y=i(20549),b=i(44469),f=i(70140),w=i(8274),S=i(44714),A=i(47701),j={artifactWidget:"artifact-widget--agpts",header:"header--CeM1r",dragIcon:"drag-icon--DUPJL",left:"left--ytYkJ",badgeWrap:"badge-wrap--RYelu",badge:"badge--kOlfW",badgeTips:"badge-tips--IvWeO",title:"title--Xv_SI",tips:"tips--wSI7j",footer:"footer--UHZRT",right:"right--i0Io5",refreshBox:"refresh-box--VO5iv",backIconBtn:"back-icon-btn--N40TL",content:"content--Q2SXw",layer:"layer--RnU2q",refreshingMask:"refreshing-mask--h2xt4",bottomBar:"bottom-bar--MJkLo",draggingMask:"dragging-mask--FkBFx"},k=i(66084),N=i(52921),_=i(88882),T=i(92498),I=i(73047),M=i(92020),L=i(95066);class B extends a.PN{get resizableController(){return this.props.resizableController}get S(){return _.S.Global.modules.Artifact.ArtifactWidget}get style(){let e=this.resizableController.data||{translateX:0,translateY:0},t=this.draggableController.translate,i=Math.max(e.width||n.H.widgetMinSize.width,n.H.widgetMinSize.width),o=Math.max(e.height,n.H.widgetMinSize.height),a=e.translateY+t.y,r=e.translateX+t.x;return{width:i,height:o,cursor:this.resizableController.cursor||this.draggableController.cursor,top:a<0?0:a,left:r<0?0:r}}get showLayer(){return this.settingPopoverVisible}onIsPublishedChange(){this.isPublished=!!this.props.artifactData.isPublished}onViewCreate(){console.log(this.props),this.isFavorited=!!this.props.isFavorited,this.props.artifactData.objectUrl&&n.H.fetchContent(this.props.artifactData.objectUrl).then(e=>{this.content=e}),this.dataManager=new L.f,this.dataManager.setArtifactData(this.props.artifactData),this.dataManager.markAsSteamFinished();let{translateX:e=0,translateY:t=0,width:i=380,height:o=380}=this.props.defaultPosition||{},a=e,r=t,s=i,l=o;e+i>window.innerWidth&&(a=Math.max(window.innerWidth-i,0))+i>window.innerWidth&&(s=window.innerWidth),t+o>window.innerHeight&&(r=Math.max(window.innerHeight-o,0))+o>window.innerHeight&&(l=window.innerHeight);let c=async()=>{let e=await M.ll.get("artifactWidgetsPosition")||[],t=e.findIndex(e=>e.id===this.props.artifactData.uid),{height:i,left:o,top:a,width:n}=this.style;t>-1?e[t]={id:this.props.artifactData.uid,translateX:o,translateY:a,width:n,height:i}:e.push({id:this.props.artifactData.uid,translateX:o,translateY:a,width:n,height:i}),M.ll.set("artifactWidgetsPosition",e)};a+s>window.innerWidth&&(a=window.innerWidth-s),r+l>window.innerHeight&&(r=window.innerHeight-l),this.resizableController.init({defaultData:{translateX:a,translateY:r,width:s,height:l},getMinSize:()=>n.H.widgetMinSize,getMaxSize:()=>({width:window.innerWidth,height:window.innerHeight}),getAllowedDirection:()=>["top","bottom","left","right","topLeft","topRight","bottomLeft","bottomRight"],onResized:()=>{c()}}),this.draggableController.init(this.rootEl,{onUpdated:()=>{c()}})}onViewDestroy(){this.draggableController.destroy()}constructor(...e){super(...e),(0,k._)(this,"props",void 0),(0,k._)(this,"rootEl",null),(0,k._)(this,"artifactRendererRef",null),(0,k._)(this,"draggableController",new T.$),(0,k._)(this,"dataManager",void 0),(0,k._)(this,"widgetTipsVisible",!1),(0,k._)(this,"isRefreshing",!0),(0,k._)(this,"content",""),(0,k._)(this,"isPublished",!1),(0,k._)(this,"settingPopoverVisible",!1),(0,k._)(this,"isFavorited",!1)}}(0,N.gn)([a.SB],B.prototype,"widgetTipsVisible",void 0),(0,N.gn)([a.SB],B.prototype,"isRefreshing",void 0),(0,N.gn)([a.SB],B.prototype,"content",void 0),(0,N.gn)([a.SB],B.prototype,"isPublished",void 0),(0,N.gn)([a.SB],B.prototype,"settingPopoverVisible",void 0),(0,N.gn)([a.SB],B.prototype,"isFavorited",void 0),(0,N.gn)([I.Fl],B.prototype,"S",null),(0,N.gn)([I.Fl],B.prototype,"style",null),(0,N.gn)([I.Fl],B.prototype,"showLayer",null),(0,N.gn)([(0,a.YP)(e=>[e.props.artifactData.isPublished])],B.prototype,"onIsPublishedChange",null);let E=a._Y.createComponent("ArtifactWidget",B,e=>{let{onClose:t,onMousedown:i,artifactData:a,zIndex:n,content:r,disableSetting:s,onShare:l,showBadge:g=!0,onFavoriteChange:u,onBack:v}=e.props,C={iconSize:16,padding:4},y=e.isRefreshing||!(r||e.content),b=e.draggableController.dragging||e.resizableController.isResizing;return(0,o.jsxs)("div",{style:{...e.style,zIndex:n},className:j.artifactWidget,ref:t=>{e.rootEl=t,e.resizableController.root=t},onMouseEnter:()=>{e.resizableController.handleRootMouseEnter()},onMouseLeave:()=>{e.resizableController.handleRootMouseLeave()},onMouseDown:t=>{0===t.button&&(e.widgetTipsVisible&&(e.widgetTipsVisible=!1),null==i||i(),e.resizableController.resizeDirection?(e.resizableController.handleRootMouseDown(t),t.preventDefault()):e.draggableController.handleMouseDown(t))},children:[(e.resizableController.isResizing||e.draggableController.dragging)&&(0,o.jsx)("div",{style:{width:"100%",height:"100%",position:"fixed",top:0,left:0,right:0,opacity:0,zIndex:9999,cursor:e.resizableController.cursor}}),(0,o.jsxs)("div",{className:j.header,children:[(0,o.jsx)("div",{className:j.dragIcon,style:{display:b?"flex":void 0},children:(0,o.jsx)(c.J,{name:"drag",size:16,color:"currentColor",style:{color:"var(--theme-icon-secondary)"}})}),(0,o.jsxs)("div",{className:j.left,children:[v&&(0,o.jsx)("div",{className:j.backIconBtn,onMouseDown:()=>{t(),v()},children:(0,o.jsx)(c.J,{name:"arrow",size:18,color:"var(--theme-icon-primary)"})}),(0,o.jsx)("h2",{children:a.artifactName}),g&&(0,o.jsx)(D,{vm:e}),u&&(0,o.jsx)(d.h,{iconName:e.isFavorited?"monicaFavorited":"monicaFavorite",title:"",...C,color:e.isFavorited?"var(--yellow-300)":"var(--theme-icon-quaternary)",style:{marginLeft:4},onMousedown:t=>{t.stopPropagation();let i=e.isFavorited;try{u(e.isFavorited),e.isFavorited=!e.isFavorited}catch(t){e.isFavorited=i}}})]}),(0,o.jsxs)("div",{className:j.right,"data-draggable":"false",children:[!!l&&!y&&(0,o.jsx)(p.z,{type:"outline",size:"small",icon:(0,o.jsx)(c.J,{name:"bot-share",size:14,color:"currentColor",style:{color:"var(--theme-icon-tertiary)"}}),onClick:()=>{l({...a,content:r||e.content})},children:e.S.share}),e.isRefreshing?(0,o.jsx)("div",{className:j.refreshBox,children:(0,o.jsx)(m.g,{color:"var(--theme-icon-tertiary)",size:16})}):(0,o.jsx)(d.h,{iconName:"monicaRefresh",title:e.S.refresh,...C,color:"var(--theme-icon-tertiary)",onClick:()=>{e.isRefreshing=!0;try{var t;null===(t=e.artifactRendererRef)||void 0===t||t.refresh(),x.M.createUserBehaviorEvent({eventName:A.R.UserEvent.WIDGET_REFRESH})}catch(t){throw e.isRefreshing=!1,t}}}),!s&&(0,o.jsx)(h.x,{content:(0,o.jsx)(P,{vm:e}),placement:"bottom",trigger:"click",closeAfterContentClick:!0,open:e.settingPopoverVisible,onOpenChange:t=>{e.settingPopoverVisible=t},children:(0,o.jsx)(d.h,{...C,color:"var(--theme-icon-tertiary)",title:"",iconName:"chatInputSetting",onClick:()=>{}})}),(0,o.jsx)(d.h,{iconName:"closeLine",title:"",...C,color:"var(--theme-icon-tertiary)",style:{marginLeft:-2,marginRight:-4},onClick:()=>{t(),x.M.createUserBehaviorEvent({eventName:A.R.UserEvent.WIDGET_CLOSE})}})]})]}),(0,o.jsxs)("div",{className:j.content,children:[y&&(0,o.jsxs)("div",{className:j.refreshingMask,children:[(0,o.jsx)(m.g,{color:"var(--theme-icon-primary)",size:32}),(0,o.jsx)("p",{children:e.S.processing})]}),e.showLayer&&(0,o.jsx)("div",{className:j.layer}),!!(r||e.content)&&(0,o.jsx)(f.M,{isPreviewMode:!0,artifact:{...a,content:r||e.content},onIframeLoaded:()=>{e.isRefreshing=!1},onIframeError:()=>{e.isRefreshing=!1},getRef:t=>{e.artifactRendererRef=t}}),(0,o.jsx)("div",{className:j.bottomBar})]}),b&&(0,o.jsx)("div",{className:j.draggingMask})]})}),D=(0,l.Pi)(function(e){let{vm:t}=e;return(0,o.jsxs)("div",{className:j.badgeWrap,"data-draggable":"false",children:[(0,o.jsx)("div",{className:j.badge,onClick:()=>{t.widgetTipsVisible=!0},children:t.S.widget}),t.widgetTipsVisible&&(0,o.jsxs)("div",{className:j.badgeTips,onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,o.jsx)("div",{className:j.title,children:t.S.widgetTipsTitle}),(0,o.jsxs)("div",{className:j.tips,children:["1.",(0,o.jsx)("p",{children:t.S.widgetTipsContent1})]}),(0,o.jsxs)("div",{className:j.tips,children:["2.",(0,o.jsx)("p",{children:t.S.widgetTipsContent2})]}),(0,o.jsx)("div",{className:j.footer,children:(0,o.jsx)(p.z,{type:"primary",onMouseDown:()=>{t.widgetTipsVisible=!1},children:t.S.gotIt})})]})]})}),P=(0,l.Pi)(function(e){let{vm:t}=e,{conversationId:i,artifactId:a,chatItemId:n,uid:l}=t.props.artifactData;return(0,o.jsxs)(g.h,{children:[(0,o.jsx)(u.X,{content:t.S.edit,onClick:async()=>{"other"===C.L.mainWindowMode||r.o.isExtension?(y.D.setOpenArtifactData({artifact:{...t.props.artifactData,content:t.content},conversationId:i||"",itemId:n||""}),b.T3.openMonicaChatTabPageV2({tab:"chat",convId:i,artifactId:a,itemId:n})):(await v.Mp.beforeContinueInChat()).openArtifact({...t.props.artifactData,content:t.props.content}),x.M.createUserBehaviorEvent({eventName:A.R.UserEvent.WIDGET_CONTINUE_EDIT}),t.props.onClose()}}),l&&(0,o.jsx)(u.X,{content:t.S.fullscreenPreview,onClick:()=>{x.M.createUserBehaviorEvent({eventName:A.R.UserEvent.FULLSCREEN_PREVIEW}),window.open(s.m.getArtifactFullscreenPreviewUrl(l))}}),(0,o.jsx)(u.X,{content:t.S.publish,onClick:()=>{var e;t.dataManager.artifactData.isPublished?(0,S.s)({insertTarget:"dialogRoot",dataManager:t.dataManager}):(0,w.z)({insertTarget:"dialogRoot",dataManager:t.dataManager}),x.M.createUserBehaviorEvent({eventName:A.R.UserEvent.WIDGET_PUBLISH,extData:{id:null===(e=t.dataManager.artifactData)||void 0===e?void 0:e.uid}})}})]})});class F extends a.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,k._)(this,"props",void 0),(0,k._)(this,"someState",!0)}}(0,N.gn)([a.SB],F.prototype,"someState",void 0);let R=a._Y.createComponent("ArtifactWidgetRoot",F,e=>(0,o.jsx)("div",{className:"artifact-widget-root--keKUL",children:n.H.widgets.map(e=>{let{artifactData:t,widgetId:i,defaultPosition:a,resizableController:r,disableSetting:s,zIndex:l,onShare:c,showBadge:d=!0,onFavoriteChange:p,isFavorited:m,onBack:h}=e,{content:g}=t;return(0,o.jsx)(E,{artifactData:t,content:g,defaultPosition:a,resizableController:r,disableSetting:s,zIndex:l,onShare:c,onBack:h,onMousedown:()=>{n.H.bringWidgetToFront(i)},onClose:()=>{n.H.close(i)},showBadge:d,isFavorited:m,onFavoriteChange:p},i)})}))},93198:function(e,t,i){"use strict";i.d(t,{u:function(){return x}});var o=i(71576),a=i(34491),n=i(75372),r=i(48023),s=i(46731),l=i(78716),c=i.n(l),d=i(82005),p=i(67061),m=i(72053),h={operationBtn:"operation-btn--ABIo4",operationItem:"operation-item--Ffx68",shareBtn:"share-btn--YmsWu"},g=i(66084),u=i(52921),v=i(88882);class C extends a.PN{get agentS(){return v.S.Agent.AgentShare}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,g._)(this,"props",void 0)}}(0,u.gn)([a.Fl],C.prototype,"agentS",null);let x=a._Y.createComponent("ShareMemoBtn",C,e=>{let{onTogglePublic:t,isPublic:i,handleShare:a,memoId:l,onVisibleChange:g}=e.props;return(0,o.jsx)(n.x,{placement:"bottomRight",trigger:["click"],onOpenChange:e=>{null==g||g(e)},content:(0,o.jsx)(m.A,{onTogglePublic:()=>{t()},isPublic:i,handleShare:e=>{a(e)},memoId:l}),getTooltipContainer:()=>d.t.mainWindowDialogRoot||d.t.dialogRoot,children:(0,o.jsx)(r.u,{title:e.agentS.share,children:"sidebar"===p.L.mainWindowMode?(0,o.jsx)("div",{className:c()(h.operationBtn),children:(0,o.jsx)(s.J,{name:"sidebarShare",size:16,color:"var(--theme-icon-quaternary)"})}):(0,o.jsxs)("div",{className:c()(h.operationItem,h.shareBtn),children:[(0,o.jsx)(s.J,{name:"sidebarShare",size:16,color:"var(--theme-icon-quaternary)"}),e.agentS.share]})})})})},52879:function(e,t,i){"use strict";i.d(t,{c:function(){return c}});var o=i(71576),a=i(34491),n=i(41884),r=i(66084),s=i(52921);class l extends a.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,r._)(this,"props",void 0),(0,r._)(this,"someState",!0)}}(0,s.gn)([a.SB],l.prototype,"someState",void 0);let c=a._Y.createComponent("WindowRoot",l,e=>(0,o.jsx)("div",{className:"window-root--H0zl6",children:n.E.windowItems.map(e=>{let t=n.E.componentDataMap[e.compId];if(!t||"panel"===e.layoutManager.openWindowOptions.displayMode)return null;let{Component:i}=t;return(0,o.jsx)(i,{...e.props},e.id)})}))},26223:function(e,t,i){"use strict";i.d(t,{m:function(){return o}});let o={inviteCode:"monica-invite-code",productHuntBannerVisible:"monica-product-hunt-banner-visible",productHuntDialogVisible:"monica-product-hunt-dialog-visible",invitationEndTime:"monica-invitation-end-time",downloadByInvitation:"monica-download-by-invitation",invitationUnlockedRewardsDialog:"monica-invitation-unlocked-rewards-dialog",invitationLinkCopiedDialog:"monica-invitation-link-copied-dialog",utm:"monica-utm",affiliateDialogShowed:"monica-affiliate-dialog-showed"}},14556:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return C}});var o=i(71576);i(56187);var a=i(43714),n=i(71770),r=i(34491),s=i(9797),l=i(21969),c=i(66084),d=i(52921),p=i(92235),m=i(77099),h=i(82287),g=i(91433);class u extends r.PN{onViewCreate(){p.m.deleteCacheOnHomePage();let e=m.l.getPageParams();((null==e?void 0:e.tab)==="artist"||(null==e?void 0:e.tab)==="chat")&&e.botUid&&e.botUid!==g.Z9.monica&&(window.location.href=p.m.getBotSharePageUrl(e.botUid)),new h.n({type:"defaultAuth",channel:"guest_webapp",onSignIn:()=>{window.location.reload()}}).initSdk()}onViewDestroy(){}constructor(...e){super(...e),(0,c._)(this,"props",void 0),(0,c._)(this,"someState","")}}(0,d.gn)([r.SB],u.prototype,"someState",void 0);let v=r._Y.createComponent("Guest",u,e=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.GR,{}),(0,o.jsx)(l.e,{isGuest:!0})]}));function C(e){return(0,n.Y)(e.locale,e.translations),(0,a.x7)(),(0,o.jsx)(v,{})}},14749:function(e,t,i){"use strict";i.d(t,{O:function(){return r}});var o=i(71576),a=i(22046),n={skeleton:"skeleton--h7ZKk",sideBar:"side-bar--OdnP6",header:"header--oKtXx",title:"title--sEQMX",avatar:"avatar--bYNA7",languageSelect:"language-select--X2Ih4",navList:"nav-list--I_Eom",navItem:"nav-item--HYgpc",divider:"divider--X1CeV",footer:"footer--pMHQH",setting:"setting--MEM9_",reward:"reward--zHHNV",home:"home--OorUv",inner:"inner--W5arB",bottomContent:"bottom-content--EBIUV",chatHeader:"chat-header--ww4zd",text:"text--pKyTS",wrapper:"wrapper--mJT6k",card:"card--mFEUl",icon:"icon--c5JYn",content:"content--q3cQ6",suggestion:"suggestion--DUC7Z",chatBox:"chat-box--INAgM",toolbar:"toolbar--hkr7_",toolbarLeft:"toolbar-left--_fKbu",botSwitch:"bot-switch--AsFAM",toolItem:"tool-item--fjqFd",toolbarRight:"toolbar-right--yJfj_",box:"box--L4K74",placeholder:"placeholder--lvMxS",tools:"tools--B8rw5",left:"left--uegw2",right:"right--sxLzn",image:"image--S73sj",pageHeader:"page-header--UYU8u",cardBlock:"card-block--CTUfF",cardRow:"card-row--fdouW",skeletonItem:"skeleton-item--P184b",skeletonWrapper:"skeleton-wrapper--c74ky",imageDetail:"image-detail--BJVgX",imageDetailSidebar:"image-detail-sidebar--cm9Gb",imageDetailPage:"image-detail-page--CS2HI"};let r=e=>{let{isDark:t=!1}=e,i="home";return(a.S.location.pathname.includes("/home/image")?(i="image",a.S.location.search.includes("key=")&&(i="imageDetail")):a.S.location.pathname.includes("/home/video")&&(i="video",a.S.location.search.includes("key=")&&(i="imageDetail")),"imageDetail"===i)?(0,o.jsx)("div",{className:"".concat(n.skeletonWrapper," _monica-theme-d2f2b383 ").concat(t?"_monica-dark":""),children:(0,o.jsxs)("div",{className:"".concat(n.skeleton," ").concat(n.imageDetail),children:[(0,o.jsxs)("div",{className:n.imageDetailSidebar,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:22,width:46,marginBottom:4}}),(0,o.jsxs)("div",{className:n.cardBlock,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:20,width:80}}),(0,o.jsx)("div",{className:n.skeletonItem,style:{height:82,width:"100%"}})]}),(0,o.jsxs)("div",{className:n.cardBlock,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:20,width:80}}),(0,o.jsx)("div",{className:n.skeletonItem,style:{height:56,width:"100%"}})]}),(0,o.jsxs)("div",{className:n.cardBlock,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:20,width:80}}),(0,o.jsx)("div",{className:n.skeletonItem,style:{height:106,width:"100%"}})]}),(0,o.jsxs)("div",{className:n.cardBlock,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:20,width:80}}),(0,o.jsx)("div",{className:n.skeletonItem,style:{height:180,width:"100%"}})]})]}),(0,o.jsx)("div",{className:n.imageDetailPage,children:(0,o.jsxs)("div",{className:n.pageHeader,children:[(0,o.jsx)("span",{}),(0,o.jsx)("div",{className:n.skeletonItem,style:{height:32,width:200}})]})})]})}):(0,o.jsx)("div",{className:"".concat(n.skeletonWrapper," _monica-theme-d2f2b383 ").concat(t?"_monica-dark":""),children:(0,o.jsxs)("div",{className:n.skeleton,children:[(0,o.jsx)(l,{}),"home"===i?(0,o.jsx)(s,{}):"image"===i?(0,o.jsxs)("div",{className:n.image,children:[(0,o.jsxs)("div",{className:n.pageHeader,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:30,width:70}}),(0,o.jsx)("div",{className:n.skeletonItem,style:{height:30,width:120}})]}),(0,o.jsx)("div",{className:n.cardRow,children:Array.from({length:20}).map((e,t)=>(0,o.jsx)("div",{className:n.skeletonItem,style:{height:140,width:188}},t))}),(0,o.jsxs)("div",{className:n.cardBlock,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:26,width:80}}),(0,o.jsx)("div",{className:n.cardRow,children:Array.from({length:20}).map((e,t)=>(0,o.jsx)("div",{className:n.skeletonItem,style:{height:240,width:240}},t))})]}),(0,o.jsxs)("div",{className:n.cardBlock,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:26,width:80}}),(0,o.jsx)("div",{className:n.cardRow,children:Array.from({length:10}).map((e,t)=>(0,o.jsx)("div",{className:n.skeletonItem,style:{width:289,height:500}},t))})]})]}):"video"===i?(0,o.jsxs)("div",{className:n.image,children:[(0,o.jsxs)("div",{className:n.pageHeader,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:30,width:70}}),(0,o.jsx)("div",{className:n.skeletonItem,style:{height:30,width:120}})]}),(0,o.jsx)("div",{className:n.cardRow,children:Array.from({length:3}).map((e,t)=>(0,o.jsx)("div",{className:n.skeletonItem,style:{height:84}},t))}),(0,o.jsxs)("div",{className:n.cardBlock,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:26,width:80}}),(0,o.jsx)("div",{className:n.cardRow,children:Array.from({length:20}).map((e,t)=>(0,o.jsx)("div",{className:n.skeletonItem,style:{height:240,width:240}},t))})]}),(0,o.jsxs)("div",{className:n.cardBlock,children:[(0,o.jsx)("div",{className:n.skeletonItem,style:{height:26,width:80}}),(0,o.jsx)("div",{className:n.cardRow,children:Array.from({length:10}).map((e,t)=>(0,o.jsx)("div",{className:n.skeletonItem,style:{width:289,height:500}},t))})]})]}):null]})})},s=()=>(0,o.jsx)("div",{className:n.home,children:(0,o.jsxs)("div",{className:n.inner,children:[(0,o.jsxs)("div",{className:n.chatHeader,children:[(0,o.jsx)("div",{className:n.text}),(0,o.jsx)("div",{className:n.text}),(0,o.jsxs)("div",{className:n.wrapper,children:[(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsx)("div",{className:n.icon}),(0,o.jsx)("div",{className:n.content})]}),(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsx)("div",{className:n.icon}),(0,o.jsx)("div",{className:n.content})]}),(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsx)("div",{className:n.icon}),(0,o.jsx)("div",{className:n.content})]}),(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsx)("div",{className:n.icon}),(0,o.jsx)("div",{className:n.content})]})]})]}),(0,o.jsxs)("div",{className:n.bottomContent,children:[(0,o.jsxs)("div",{className:n.suggestion,children:[(0,o.jsx)("div",{className:n.text}),(0,o.jsxs)("div",{className:n.wrapper,children:[(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsx)("div",{className:n.title}),(0,o.jsx)("div",{className:n.content})]}),(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsx)("div",{className:n.title}),(0,o.jsx)("div",{className:n.content})]})]}),(0,o.jsxs)("div",{className:n.wrapper,children:[(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsx)("div",{className:n.title}),(0,o.jsx)("div",{className:n.content})]}),(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsx)("div",{className:n.title}),(0,o.jsx)("div",{className:n.content})]})]})]}),(0,o.jsxs)("div",{className:n.chatBox,children:[(0,o.jsxs)("div",{className:n.toolbar,children:[(0,o.jsxs)("div",{className:n.toolbarLeft,children:[(0,o.jsx)("div",{className:n.botSwitch}),(0,o.jsx)("div",{className:n.toolItem}),(0,o.jsx)("div",{className:n.toolItem})]}),(0,o.jsxs)("div",{className:n.toolbarRight,children:[(0,o.jsx)("div",{className:n.toolItem}),(0,o.jsx)("div",{className:n.toolItem}),(0,o.jsx)("div",{className:n.toolItem})]})]}),(0,o.jsxs)("div",{className:n.box,children:[(0,o.jsx)("div",{className:n.placeholder}),(0,o.jsxs)("div",{className:n.tools,children:[(0,o.jsxs)("div",{className:n.left,children:[(0,o.jsx)("div",{className:n.toolItem}),(0,o.jsx)("div",{className:n.toolItem}),(0,o.jsx)("div",{className:n.toolItem})]}),(0,o.jsx)("div",{className:n.right,children:(0,o.jsx)("div",{className:n.toolItem})})]})]})]})]})]})});function l(){return(0,o.jsxs)("div",{className:n.sideBar,children:[(0,o.jsxs)("div",{className:n.header,children:[(0,o.jsx)("h1",{className:n.title,children:"Monica"}),(0,o.jsx)("div",{className:n.avatar})]}),(0,o.jsx)("div",{className:n.languageSelect}),(0,o.jsxs)("div",{className:n.navList,children:[(0,o.jsx)("div",{className:n.navItem}),(0,o.jsx)("div",{className:n.navItem}),(0,o.jsx)("div",{className:n.navItem}),(0,o.jsx)("div",{className:n.navItem}),(0,o.jsx)("div",{className:n.navItem}),(0,o.jsx)("div",{className:n.navItem}),(0,o.jsx)("div",{className:n.divider}),(0,o.jsx)("div",{className:n.navItem})]}),(0,o.jsxs)("div",{className:n.footer,children:[(0,o.jsx)("div",{className:n.setting}),(0,o.jsx)("div",{className:n.reward})]})]})}},98451:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return xj}}),i(56187);var o,a,n,r,s,l,c,d,p,m,h,g,u,v,C,x,y=i(71576),b=i(71770),f=i(56607),w=i(92235),S=i(34491),A=i(11949),j=i(8105),k=i(82417),N=i(87393),_=i(97562),T=i(66084),I=i(52921),M=i(92849),L=i(71528),B=i(1159),E=i(37949),D=i(1396),P=i(90180),F=i(62499),R=i(58812);class V extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var U=JSON.parse('{"fill":"none","content":"\\n<g id=\\"search-lg\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M11.5001 3.90001C7.30273 3.90001 3.9001 7.30264 3.9001 11.5C3.9001 15.6974 7.30273 19.1 11.5001 19.1C13.5435 19.1 15.3985 18.2936 16.7643 16.9817C16.7935 16.9402 16.8267 16.9007 16.8638 16.8636C16.9009 16.8265 16.9404 16.7933 16.9819 16.7641C18.2937 15.3983 19.1001 13.5433 19.1001 11.5C19.1001 7.30264 15.6975 3.90001 11.5001 3.90001ZM18.753 17.48C20.0943 15.855 20.9001 13.7716 20.9001 11.5C20.9001 6.30853 16.6916 2.10001 11.5001 2.10001C6.30862 2.10001 2.1001 6.30853 2.1001 11.5C2.1001 16.6915 6.30862 20.9 11.5001 20.9C13.7718 20.9 15.8552 20.0942 17.4802 18.7528L20.3637 21.6364C20.7152 21.9879 21.285 21.9879 21.6365 21.6364C21.988 21.2849 21.988 20.7151 21.6365 20.3636L18.753 17.48Z\\" fill=\\"black\\"/>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let z=S._Y.createComponent("SearchLgIcon",V,e=>(0,y.jsx)(R.s,{...e.props,name:"SearchLgIcon",iconData:U}));var O=i(37231),W=i(68104),H=i(82005),G=i(33759),Q=i(75087),J=i(78716),q=i.n(J);class K extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var Y=JSON.parse('{"fill":"none","content":"\\n<g clip-path=\\"url(#clip0_29_5630)\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M0.733338 8C0.733338 3.98674 3.98674 0.733337 8 0.733337C12.0133 0.733337 15.2667 3.98674 15.2667 8C15.2667 12.0133 12.0133 15.2667 8 15.2667L4.38777 15.2667C3.90479 15.2667 3.50976 15.2667 3.1877 15.243C2.85468 15.2186 2.55267 15.1665 2.26626 15.0376C1.68694 14.7769 1.22313 14.3131 0.962398 13.7337C0.833497 13.4473 0.781425 13.1453 0.756974 12.8123C0.733327 12.4902 0.733332 12.0952 0.733338 11.6122L0.733338 8ZM8 1.93334C4.64948 1.93334 1.93334 4.64948 1.93334 8L1.93334 11.5897C1.93334 12.1007 1.93371 12.4515 1.95375 12.7244C1.97335 12.9914 2.00938 13.1362 2.05668 13.2412C2.19707 13.5532 2.44682 13.8029 2.75876 13.9433C2.86386 13.9906 3.00864 14.0267 3.27557 14.0463C3.54849 14.0663 3.89932 14.0667 4.41026 14.0667L8 14.0667C11.3505 14.0667 14.0667 11.3505 14.0667 8C14.0667 4.64948 11.3505 1.93334 8 1.93334ZM8 4.73334C8.33138 4.73334 8.6 5.00197 8.6 5.33334V7.4L10.6667 7.4C10.998 7.4 11.2667 7.66863 11.2667 8C11.2667 8.33137 10.998 8.6 10.6667 8.6L8.6 8.6L8.6 10.6667C8.6 10.998 8.33138 11.2667 8 11.2667C7.66863 11.2667 7.4 10.998 7.4 10.6667L7.4 8.6H5.33334C5.00197 8.6 4.73334 8.33137 4.73334 8C4.73334 7.66863 5.00197 7.4 5.33334 7.4H7.4V5.33334C7.4 5.00197 7.66863 4.73334 8 4.73334Z\\" fill=\\"#868692\\"/>\\n</g>\\n<defs>\\n<clipPath id=\\"clip0_29_5630\\">\\n<rect width=\\"16\\" height=\\"16\\" fill=\\"white\\"/>\\n</clipPath>\\n</defs>\\n\\n","viewBox":"0 0 16 16"}');let Z=S._Y.createComponent("AddChatIcon",K,e=>(0,y.jsx)(R.s,{...e.props,name:"AddChatIcon",iconData:Y}));class X extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var $=JSON.parse('{"fill":"none","content":"\\n<g clip-path=\\"url(#clip0_39_3714)\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4.50816 0.733338L9.49176 0.733338C10.0305 0.733331 10.471 0.733325 10.8291 0.762579C11.1997 0.792859 11.5344 0.857447 11.847 1.01672C12.3362 1.26599 12.734 1.66374 12.9832 2.15296C13.1425 2.46555 13.2071 2.80027 13.2374 3.17088C13.2666 3.52893 13.2666 3.9695 13.2666 4.5082L13.2666 6.742C13.3336 6.74482 13.3974 6.74855 13.4579 6.7535C13.7173 6.77469 13.9697 6.82112 14.211 6.94406C14.5748 7.12941 14.8706 7.42518 15.0559 7.78896C15.1788 8.03024 15.2253 8.28264 15.2465 8.54208C15.2666 8.78903 15.2666 9.08982 15.2666 9.44307V11.2958C15.2666 11.5897 15.2666 11.8401 15.2525 12.0466C15.2378 12.2631 15.2055 12.4749 15.1195 12.6827C14.9232 13.1564 14.5469 13.5328 14.0731 13.729C13.8653 13.8151 13.6535 13.8473 13.437 13.8621C13.3832 13.8658 13.3264 13.8685 13.2666 13.8705V14.6667C13.2666 14.8901 13.1425 15.0949 12.9446 15.1984C12.7466 15.3019 12.5075 15.2868 12.3241 15.1593L10.8732 14.1506C10.6517 13.9965 10.6008 13.964 10.5512 13.9415C10.497 13.917 10.4401 13.8991 10.3816 13.8883C10.3281 13.8785 10.2677 13.8762 9.9979 13.8762H8.77635C8.42311 13.8762 8.12232 13.8762 7.87537 13.856C7.61593 13.8348 7.36353 13.7884 7.12224 13.6655C6.75846 13.4801 6.4627 13.1844 6.27735 12.8206C6.1544 12.5793 6.10798 12.3269 6.08678 12.0675C6.07246 11.8922 6.06831 11.6898 6.06711 11.4609L5.02699 12.514C4.89824 12.6444 4.7749 12.7693 4.66746 12.8604C4.57103 12.9422 4.37867 13.0963 4.11427 13.1183C3.81571 13.1431 3.5234 13.0231 3.32842 12.7956C3.15573 12.5942 3.12717 12.3494 3.11603 12.2234C3.10362 12.0831 3.10364 11.9076 3.10366 11.7243L3.10366 10.6611C3.10366 10.6533 3.10238 10.6502 3.10165 10.6485C3.10058 10.646 3.09718 10.6395 3.08762 10.63C3.06671 10.6094 3.02244 10.5822 2.95647 10.5726C1.81987 10.4061 0.927231 9.51343 0.760744 8.37683C0.733155 8.18848 0.733209 7.97512 0.733284 7.67758C0.733288 7.66184 0.733292 7.64586 0.733292 7.62963L0.733292 4.5082C0.733285 3.9695 0.733279 3.52893 0.762533 3.17088C0.792813 2.80027 0.857401 2.46555 1.01668 2.15296C1.26595 1.66374 1.6637 1.26599 2.15292 1.01672C2.46551 0.857447 2.80023 0.792859 3.17084 0.762579C3.52889 0.733325 3.96946 0.733331 4.50816 0.733338ZM7.26662 9.99954C7.26662 9.99986 7.26662 10.0002 7.26662 10.0005V11.1429C7.26662 11.5261 7.26709 11.7775 7.2828 11.9697C7.29793 12.155 7.32417 12.2319 7.34655 12.2758C7.41686 12.4138 7.52905 12.526 7.66703 12.5963C7.71096 12.6186 7.78786 12.6449 7.97309 12.66C8.16532 12.6757 8.41669 12.6762 8.79996 12.6762H9.9979C10.0114 12.6762 10.0247 12.6762 10.038 12.6762C10.2473 12.6761 10.424 12.6759 10.5991 12.7082C10.7533 12.7366 10.9035 12.7837 11.0463 12.8484C11.2085 12.9219 11.3535 13.0228 11.5253 13.1424C11.5362 13.15 11.5471 13.1576 11.5582 13.1653L12.0666 13.5188V13.2762C12.0666 12.9448 12.3353 12.6762 12.6666 12.6762C12.9855 12.6762 13.1945 12.6759 13.3553 12.6649C13.5107 12.6543 13.5767 12.6358 13.6139 12.6204C13.7936 12.5459 13.9364 12.4032 14.0108 12.2235C14.0262 12.1863 14.0447 12.1203 14.0553 11.9649C14.0663 11.8041 14.0666 11.595 14.0666 11.2762V9.46667C14.0666 9.0834 14.0662 8.83204 14.0505 8.6398C14.0353 8.45457 14.0091 8.37767 13.9867 8.33375C13.9164 8.19576 13.8042 8.08357 13.6662 8.01327C13.6223 7.99088 13.5454 7.96464 13.3602 7.94951C13.1679 7.9338 12.9166 7.93334 12.5333 7.93334L8.79996 7.93334C8.41669 7.93334 8.16532 7.9338 7.97309 7.94951C7.78786 7.96464 7.71096 7.99088 7.66703 8.01327C7.52905 8.08357 7.41686 8.19576 7.34655 8.33375C7.32417 8.37767 7.29793 8.45457 7.2828 8.6398C7.26709 8.83204 7.26662 9.0834 7.26662 9.46667V9.99954ZM6.06663 9.75366L4.30366 11.5387V10.6611C4.30366 9.91812 3.6994 9.46857 3.13039 9.38522C2.51837 9.29558 2.03772 8.81492 1.94807 8.20291C1.93489 8.1129 1.93329 7.99489 1.93329 7.62963L1.93329 4.53334C1.93329 3.96339 1.93376 3.57201 1.95855 3.2686C1.98276 2.9722 2.02717 2.81298 2.08588 2.69775C2.22011 2.43432 2.43428 2.22015 2.69771 2.08593C2.81294 2.02722 2.97216 1.98281 3.26855 1.95859C3.57196 1.9338 3.96334 1.93334 4.53329 1.93334L9.46663 1.93334C10.0366 1.93334 10.428 1.9338 10.7314 1.95859C11.0278 1.98281 11.187 2.02722 11.3022 2.08593C11.5656 2.22015 11.7798 2.43432 11.914 2.69775C11.9727 2.81298 12.0172 2.9722 12.0414 3.2686C12.0662 3.57201 12.0666 3.96338 12.0666 4.53334L12.0666 6.73334L8.77635 6.73334C8.42311 6.73333 8.12232 6.73332 7.87537 6.7535C7.61593 6.77469 7.36353 6.82112 7.12224 6.94406C6.75846 7.12941 6.4627 7.42518 6.27735 7.78896C6.1544 8.03024 6.10798 8.28264 6.08678 8.54208C6.06661 8.78904 6.06661 9.08982 6.06662 9.44307L6.06663 9.75366Z\\" fill=\\"#868692\\"/>\\n</g>\\n<defs>\\n<clipPath id=\\"clip0_39_3714\\">\\n<rect width=\\"16\\" height=\\"16\\" fill=\\"white\\"/>\\n</clipPath>\\n</defs>\\n\\n","viewBox":"0 0 16 16"}');let ee=S._Y.createComponent("MessageChatSquareIcon",X,e=>(0,y.jsx)(R.s,{...e.props,name:"MessageChatSquareIcon",iconData:$}));var et={chatSwitchModalHomeList:"chat-switch-modal-home-list--mfWyW",item:"item--GL3XG",active:"active--cAu9i",itemLabel:"item-label--zSKwQ",content:"content--SAuJR"},ei=i(88882),eo=i(37067),ea=i(39815),en=i(70151),er=i(46756),es=i(90107);(o=p||(p={})).getTimeDescription=function(e){let t="string"==typeof e?new Date(e).getTime():e,i=new Date(new Date().setHours(0,0,0,0)).getTime();return t>=i?"today":t>=i-864e5?"yesterday":t>=i-6048e5?"sevenDays":t>=i-2592e6?"thirtyDaysAgo":"older"},o.formatConversationList=function(e){return(0,es.Z)(e,e=>e.conversationId).sort((e,t)=>{if(e.updatedAt&&t.updatedAt){let i=new Date(e.updatedAt);return new Date(t.updatedAt).getTime()-i.getTime()}return 0})};class el extends S.PN{get S(){return ei.S.Global.modules.ChatBox.ChatSwitchModal}async onViewCreate(){await this.initConversationListFromCached(),this.initListKeyboardManager()}onViewDestroy(){this.destroyKeyBoardManager()}onSelect(e){if(0===e)this.props.chatSwitchModalVm.newChat();else{let t=this.list.find(t=>"item"===t.type&&t.idx===e);(null==t?void 0:t.type)==="item"&&this.props.chatSwitchModalVm.openChat(t.data)}}setItemEl(e,t){this.itemEls[t]=e}async initConversationListFromCached(){this.loading=!0;let{itemsList:e=[]}=await er.y.getConversationList({offset:0,limit:6},{cacheOnly:!0}),t=p.formatConversationList(e).slice(0,6);this.itemEls=Array(t.length+1).fill(null);let i="";t.forEach((e,t)=>{let o=p.getTimeDescription(e.updatedAt);o!==i&&(this.list.push({type:"title",key:o}),i=o),this.list.push({type:"item",idx:t+1,data:e})}),this.listKeyboardManager.reset({listLength:t.length+1}),this.loading=!1}initListKeyboardManager(){if(!this.scrollEl)return;let e=!1,t=!1;this.listKeyboardManager.init({withTab:!0,defaultActiveIndex:0,listLength:this.itemEls.length,listScrollableContainer:this.scrollEl,keydownContainer:[this.props.chatSwitchModalVm.inputEl],onEnter:e=>{this.onSelect(e)},onKeyUp(){t=!0},onKeyDown(){t=!0},getListItem:e=>this.itemEls[e]}),eo.I.getProxy(this,this.scrollEl).addEventListener("mousemove",()=>{t&&(t=!1),!e&&this.scrollEl&&(e=!0,eo.I.getProxy(this,this.scrollEl).addEventListener("mouseenter",e=>{let t=this.itemEls.findIndex(t=>t===e.target);if(-1!==t){var i;null===(i=this.itemEls[t])||void 0===i||i.scrollIntoView({behavior:"smooth",block:"nearest"}),this.listKeyboardManager.activeIndex=t}},{capture:!0}),eo.I.getProxy(this,this.scrollEl).addEventListener("mouseleave",e=>{let t=this.itemEls.findIndex(t=>t===e.target);-1!==t&&this.listKeyboardManager.activeIndex===t&&(this.listKeyboardManager.activeIndex=-1)},{capture:!0}),eo.I.getProxy(this,document).addEventListener("keydown",e=>{((0,en.TB)("up",e)||(0,en.ZP)("shift+tab",e)||(0,en.TB)("down",e)||(0,en.TB)("tab",e))&&(t=!0)}))})}destroyKeyBoardManager(){this.listKeyboardManager.destroy(),eo.I.getProxy(this,this.scrollEl).removeAllListeners(),eo.I.getProxy(this,document).removeAllListeners()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"loading",!0),(0,T._)(this,"list",[{type:"newChat"}]),(0,T._)(this,"scrollEl",null),(0,T._)(this,"listKeyboardManager",new ea.J),(0,T._)(this,"itemEls",[])}}(0,I.gn)([S.SB],el.prototype,"loading",void 0),(0,I.gn)([S.SB],el.prototype,"list",void 0),(0,I.gn)([S.Fl],el.prototype,"S",null);let ec=S._Y.createComponent("ChatSwitchModalHomeList",el,e=>(0,y.jsx)("ul",{className:et.chatSwitchModalHomeList,ref:t=>{e.scrollEl=t},children:e.list.map(t=>"newChat"===t.type?(0,y.jsx)(ep,{idx:0,content:e.S.newChat,vm:e},"newChat"):"title"===t.type?(0,y.jsx)(ed,{dateKey:t.key,vm:e},t.key):(0,y.jsx)(ep,{vm:e,idx:t.idx,content:t.data.title},t.data.conversationId))})),ed=(0,F.Pi)(function(e){let{vm:t,dateKey:i}=e,o="";return"today"===i?o=t.S.today:"yesterday"===i?o=t.S.yesterday:"sevenDays"===i?o=t.S.sevenDays:"thirtyDaysAgo"===i?o=t.S.thirtyDaysAgo:"older"===i&&(o=t.S.older),(0,y.jsx)("li",{className:et.itemLabel,children:o})}),ep=(0,F.Pi)(function(e){let{content:t,idx:i,vm:o}=e;return(0,y.jsxs)("li",{ref:e=>{o.setItemEl(e,i)},className:q()({[et.item]:!0,[et.active]:o.listKeyboardManager.activeIndex===i}),onClick:()=>{o.listKeyboardManager.activeIndex=i,o.onSelect(i)},children:[0===i?(0,y.jsx)(Z,{size:16,color:"var(--theme-icon-quaternary)"}):(0,y.jsx)(ee,{size:16,color:"var(--theme-icon-quaternary)"}),(0,y.jsx)("span",{className:et.content,children:t}),(0,y.jsx)("span",{className:et.unread}),(0,y.jsx)("span",{className:et.loading})]})});var em=i(21320),eh=i(92660),eg=i(96567),eu=i.n(eg),ev=i(41672),eC=i(61658),ex=i(67061),ey={chatSwitchModalSearchList:"chat-switch-modal-search-list--Erh2k",item:"item--JRqZg",active:"active--LJc0d",itemLabel:"item-label--k6L68",itemContent:"item-content--JnXG3",title:"title--a7bFK",message:"message--TOJIq",highlight:"highlight--KV3Zv",date:"date--UuAEp",hidden:"hidden--w9JwD",skeleton:"skeleton--MZCQ_",skeletonAvatar:"skeleton-avatar--Km9Yb",skeletonContent:"skeleton-content--EnQv3",skeletonTitle:"skeleton-title--UJudS",skeletonParagraph:"skeleton-paragraph--YJdb6",empty:"empty--_vY9l"},eb=i(20978),ef=i(15851);class ew extends S.PN{get S(){return ei.S.Global.modules.ChatBox.ChatSwitchModal}get groupedList(){let e="",t=[];return this.list.forEach((i,o)=>{let a=p.getTimeDescription(i.updatedAt);a!==e&&(t.push({type:"title",key:a}),e=a),t.push({type:"item",idx:o,data:i})}),t}onKeywordChange(){""!==D.Mp.commandKeyword?(this.loading=!0,this.fetchConversationListDebounced("refresh")):this.loading=!1}onListChange(){this.listKeyboardManager.reset({listLength:this.list.length,defaultActiveIndex:0===this.list.length?0:this.listKeyboardManager.activeIndex})}onViewCreate(){}onViewDestroy(){}async fetchConversationList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"refresh";"refresh"===e&&(this.total=0,this.loading=!0,this.list=[]),this.fetchChatConversationList(e)}async fetchChatConversationList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"refresh";try{let{itemsList:t=[],total:i=0}=await er.y.getConversationList({keyword:D.Mp.commandKeyword,limit:15,offset:"refresh"===e?0:this.list.length},{useCache:!1});this.total=i,"refresh"===e?this.list=t:this.list=this.list.concat(t),this.list=p.formatConversationList(this.list),t.length<15?this.total=this.list.length:this.total=i}catch(e){ef.M.error(w.m.formatErrorMsg(e))}this.loading=!1}onSelect(e){let t=this.list[e];t&&this.props.chatSwitchModalVm.openChat(t)}setItemEl(e,t){this.itemEls[t]=e}setScrollEl(e){e?(this.scrollEl=e,this.initListKeyboardManager()):this.destroyKeyBoardManager()}initListKeyboardManager(){if(!this.scrollEl)return;let e=!1,t=!1;this.listKeyboardManager.init({withTab:!0,defaultActiveIndex:0,listLength:this.itemEls.length,listScrollableContainer:this.scrollEl,keydownContainer:[this.props.chatSwitchModalVm.inputEl],onEnter:e=>{this.onSelect(e)},onKeyUp(){t=!0},onKeyDown(){t=!0},getListItem:e=>this.itemEls[e]}),eo.I.getProxy(this,this.scrollEl).addEventListener("mousemove",()=>{t&&(t=!1),!e&&this.scrollEl&&(e=!0,eo.I.getProxy(this,this.scrollEl).addEventListener("mouseenter",e=>{if(t)return;let i=this.itemEls.findIndex(t=>t===e.target);if(-1!==i){var o;null===(o=this.itemEls[i])||void 0===o||o.scrollIntoView({behavior:"smooth",block:"nearest"}),this.listKeyboardManager.activeIndex=i}},{capture:!0}),eo.I.getProxy(this,this.scrollEl).addEventListener("mouseleave",e=>{if(t)return;let i=this.itemEls.findIndex(t=>t===e.target);-1!==i&&this.listKeyboardManager.activeIndex===i&&(this.listKeyboardManager.activeIndex=-1)},{capture:!0}),eo.I.getProxy(this,document).addEventListener("keydown",e=>{((0,en.TB)("up",e)||(0,en.ZP)("shift+tab",e)||(0,en.TB)("down",e)||(0,en.TB)("tab",e))&&(t=!0)}))})}destroyKeyBoardManager(){this.listKeyboardManager.destroy(),eo.I.getProxy(this,this.scrollEl).removeAllListeners(),eo.I.getProxy(this,document).removeAllListeners()}constructor(...e){var t;super(...e),t=this,(0,T._)(this,"props",void 0),(0,T._)(this,"total",0),(0,T._)(this,"loading",!1),(0,T._)(this,"list",[]),(0,T._)(this,"scrollEl",null),(0,T._)(this,"listKeyboardManager",new ea.J),(0,T._)(this,"itemEls",[]),(0,T._)(this,"fetchConversationListDebounced",(0,eb.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"continue";t.fetchConversationList(e)},300)),(0,T._)(this,"loadMore",()=>{this.fetchConversationList("continue")}),(0,T._)(this,"setRef",e=>{var t;this.setScrollEl(null!==(t=null==e?void 0:e.getScrollableElement())&&void 0!==t?t:null)})}}(0,I.gn)([S.SB],ew.prototype,"total",void 0),(0,I.gn)([S.SB],ew.prototype,"loading",void 0),(0,I.gn)([S.SB],ew.prototype,"list",void 0),(0,I.gn)([S.Fl],ew.prototype,"S",null),(0,I.gn)([S.Fl],ew.prototype,"groupedList",null),(0,I.gn)([(0,S.YP)(()=>[D.Mp.commandKeyword])],ew.prototype,"onKeywordChange",null),(0,I.gn)([(0,S.YP)(e=>[e.list])],ew.prototype,"onListChange",null);let eS=S._Y.createComponent("ChatSwitchModalSearchList",ew,e=>e.loading?(0,y.jsx)(ek,{vm:e}):0===e.list.length?(0,y.jsx)(eN,{vm:e}):(0,y.jsx)(ev.v,{className:ey.chatSwitchModalSearchList,hasMore:e.list.length<e.total,dataLength:e.list.length,next:e.loadMore,loader:(0,y.jsx)(eC.g,{type:"geist"}),ref:e.setRef,children:(0,y.jsx)("ul",{children:e.groupedList.map(t=>"title"===t.type?(0,y.jsx)(ej,{dateKey:t.key,vm:e},t.key):(0,y.jsx)(eA,{convItem:t.data,idx:t.idx,vm:e},t.data.conversationId))})})),eA=(0,F.Pi)(function(e){var t,i;let{vm:o,convItem:a,idx:n}=e,r=D.Mp.commandKeyword,s=ex.L.privacyGuard((null===(i=a.lastMessage)||void 0===i?void 0:null===(t=i.slice)||void 0===t?void 0:t.call(i,0,100))||a.title),l=(0,Q.useMemo)(()=>a.updatedAt?em.L.formatTime(a.updatedAt,"L"):"",[a.updatedAt]),c=o.listKeyboardManager.activeIndex===n;return(0,y.jsxs)("li",{ref:e=>{o.setItemEl(e,n)},className:q()({[ey.item]:!0,[ey.active]:c}),onClick:()=>{o.listKeyboardManager.activeIndex=n,o.onSelect(n)},children:[(0,y.jsx)(ee,{size:16,color:"var(--theme-icon-quaternary)"}),(0,y.jsxs)("div",{className:ey.itemContent,children:[(0,y.jsx)("div",{className:ey.title,children:a.highLightTitle?(0,y.jsx)("span",{className:ey.titleText,dangerouslySetInnerHTML:{__html:ex.L.privacyGuard(a.highLightTitle||eh.Q0)}}):(0,y.jsx)(eu(),{textToHighlight:ex.L.privacyGuard(a.title||eh.Q0),highlightClassName:ey.highlight,searchWords:[r],className:ey.titleText})}),(0,y.jsx)("div",{className:ey.message,children:(0,y.jsx)(eu(),{textToHighlight:ex.L.privacyGuard(s),highlightClassName:ey.highlight,searchWords:[r],className:ey.convItemContentText})})]}),(0,y.jsx)("div",{className:q()({[ey.date]:!0,[ey.hidden]:!c}),children:l})]})}),ej=(0,F.Pi)(function(e){let{vm:t,dateKey:i}=e,o="";return"today"===i?o=t.S.today:"yesterday"===i?o=t.S.yesterday:"sevenDays"===i?o=t.S.sevenDays:"thirtyDaysAgo"===i?o=t.S.thirtyDaysAgo:"older"===i&&(o=t.S.older),(0,y.jsx)("li",{className:ey.itemLabel,children:o})}),ek=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:ey.skeleton,children:[(0,y.jsx)("div",{className:ey.skeletonAvatar}),(0,y.jsxs)("div",{className:ey.skeletonContent,children:[(0,y.jsx)("div",{className:ey.skeletonTitle}),(0,y.jsx)("div",{className:ey.skeletonParagraph})]})]}),(0,y.jsxs)("div",{className:ey.skeleton,children:[(0,y.jsx)("div",{className:ey.skeletonAvatar}),(0,y.jsxs)("div",{className:ey.skeletonContent,children:[(0,y.jsx)("div",{className:ey.skeletonTitle}),(0,y.jsx)("div",{className:ey.skeletonParagraph})]})]})]})}),eN=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:ey.empty,children:[(0,y.jsx)(z,{size:24,color:"currentColor"}),(0,y.jsx)("p",{children:t.S.noSearchResult})]})});class e_ extends S.PN{get S(){return ei.S.Global.modules.ChatBox.ChatSwitchModal}onViewCreate(){}onViewDestroy(){}newChat(){var e;null===(e=D.Mp.getActiveChatBotController())||void 0===e||e.newConversation(),this.props.onDisposed()}openChat(e){D.Mp.openConversionView(e.chatBotUid,e.conversationId),this.props.onDisposed()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"inputEl",null)}}(0,I.gn)([S.Fl],e_.prototype,"S",null),(0,I.gn)([S.SB],e_.prototype,"inputEl",void 0);let eT=S._Y.createComponent("ChatSwitchModal",e_,e=>(!function(){let e=(0,Q.useRef)(null);(0,Q.useEffect)(()=>(e.current=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,i=t.activeElement;return i?i.shadowRoot?e(i.shadowRoot):i:null}(),()=>{e.current&&e.current.focus&&e.current.focus()}),[])}(),(0,y.jsxs)(W.u,{className:"chat-switch-modal--zVrcS",closeCls:"close--JMqfD",onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,closeWhenEsc:!0,maskType:"transparent",width:E.w.isHorizontal?680:350,children:[(0,y.jsxs)("div",{className:"input-wrapper--WgHYA",children:[(0,y.jsx)(z,{size:16,color:"var(--theme-icon-secondary)"}),(0,y.jsx)(O.I,{className:"input--hVRko",placeholder:e.S.searchChat,value:D.Mp.commandKeyword,onChange:e=>{D.Mp.commandKeyword=e},getInputRef:t=>{e.inputEl=t},autoSelectAll:!0})]}),e.inputEl?(0,y.jsx)(eI,{vm:e}):null]}))),eI=(0,F.Pi)(function(e){let{vm:t}=e;return(0,G.t)(()=>{t.newChat()}),(0,G.t)(e=>{t.openChat(e)}),D.Mp.commandKeyword?(0,y.jsx)(eS,{chatSwitchModalVm:t}):(0,y.jsx)(ec,{chatSwitchModalVm:t})}),eM=H.t.createOpener(eT,{singleton:!0,closeWhenNextTrigger:!0});var eL=i(11502);class eB extends S.PN{onViewCreate(){this.listenerManager.addDocumentEventListener("keydown",e=>{this.handleKeyDown(e,"global")}),B.h.listenBy(this,"targetKeydown",e=>{let{evt:t}=e;this.handleKeyDown(t,"input")}),E.w.eventEmitter.listenBy(this,"triggerKeyboardShortcut",e=>{this.handleRecognitionResult(e)})}onViewDestroy(){this.listenerManager.removeAll(),E.w.eventEmitter.stopListenBy(this)}handleKeyDown(e,t){w.m.ensureTrustedEvent(e);let i=E.w.getShortcutRecognitionResult(e);this.handleRecognitionResult(i,e)}handleRecognitionResult(e,t){if(e&&t&&(t.stopPropagation(),t.preventDefault()),"openMonica"===e)eL.M.createUserBehaviorEvent({eventName:"keyboard_shortcut_trigger",extData:{module:"open_monica",visible:!E.w.visible}}),E.w.toggleVisible();else if("switchBot"===e)D.Mp.selectBot();else if("quickAsk"===e&&this.props.openQuickAsk)this.props.openQuickAsk();else if("newChat"===e)eM({insertTarget:"mainWindow"});else if("incognitoChat"===e){var i;P.A.setIncognitoMode(!P.A.isIncognitoMode),null===(i=D.Mp.getMonicaChatController())||void 0===i||i.newConversation()}else"takeScreenshot"===e?E.w.screenCapture(E.w.visible,!0):"screenshotRecognition"===e&&this.props.openScreenRecognition?this.props.openScreenRecognition():"webTranslation"===e?(eL.M.createUserBehaviorEvent({eventName:"keyboard_shortcut_trigger",extData:{module:"web_translation",visible:"translated"!==M.translateHelper.renderType}}),M.translateHelper.translate({})):"reading"===e&&E.w.show("chat").then(()=>{D.Mp.getMonicaChatController().readingSummary({type:"summary"})})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0),(0,T._)(this,"listenerManager",new L.M)}}(0,I.gn)([S.SB],eB.prototype,"someState",void 0);let eE=S._Y.createComponent("KeyboardShortcutBinder",eB,e=>null);var eD=i(33381),eP=i(92412),eF=i(18312),eR=i(60445);class eV extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var eU=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.63515 2.58337H14.3647C15.038 2.58337 15.5887 2.58336 16.0363 2.61993C16.4996 2.65778 16.918 2.73851 17.3087 2.9376C17.9202 3.24919 18.4174 3.74638 18.729 4.35791C18.9225 4.73775 19.0042 5.14372 19.0434 5.59164C19.0871 5.71982 19.0944 5.85569 19.0678 5.9848C19.0832 6.36025 19.0832 6.79655 19.0832 7.30195V12.6981C19.0832 13.3715 19.0833 13.9222 19.0467 14.3698C19.0088 14.833 18.9281 15.2514 18.729 15.6422C18.4174 16.2537 17.9202 16.7509 17.3087 17.0625C16.918 17.2616 16.4996 17.3423 16.0363 17.3802C15.5887 17.4167 15.038 17.4167 14.3647 17.4167H5.63515C4.96177 17.4167 4.41106 17.4167 3.9635 17.3802C3.50024 17.3423 3.08184 17.2616 2.6911 17.0625C2.07957 16.7509 1.58239 16.2537 1.2708 15.6422C1.0717 15.2514 0.990969 14.833 0.95312 14.3698C0.916552 13.9222 0.916559 13.3715 0.916568 12.6981V7.30196C0.916561 6.79656 0.916556 6.36026 0.932014 5.98481C0.905422 5.8557 0.912693 5.71981 0.956389 5.59164C0.995567 5.14372 1.07726 4.73774 1.2708 4.35791C1.58239 3.74638 2.07957 3.24919 2.6911 2.9376C3.08184 2.73851 3.50024 2.65778 3.9635 2.61993C4.41106 2.58336 4.96177 2.58337 5.63515 2.58337ZM2.41657 7.27387C2.41657 7.29353 2.41657 7.31336 2.41657 7.33337V12.6667C2.41657 13.0702 2.41676 13.4021 2.42255 13.6829L6.41754 10.0745L2.41657 7.27387ZM8.03565 9.37624L2.47826 5.48607C2.5099 5.27785 2.55386 5.14379 2.60731 5.03889C2.77509 4.70961 3.0428 4.44189 3.37208 4.27411C3.51612 4.20072 3.71515 4.14522 4.08565 4.11494C4.4649 4.08396 4.95413 4.08337 5.66657 4.08337H14.3332C15.0457 4.08337 15.5349 4.08396 15.9142 4.11494C16.2847 4.14522 16.4837 4.20072 16.6277 4.27411C16.957 4.44189 17.2247 4.70961 17.3925 5.03889C17.4459 5.14379 17.4899 5.27785 17.5215 5.48607L11.9642 9.37623C11.9555 9.38203 11.9469 9.38804 11.9384 9.39424L11.099 9.98182C10.4972 10.4031 10.3539 10.4888 10.2216 10.5217C10.076 10.558 9.92377 10.558 9.77819 10.5217C9.64594 10.4888 9.50257 10.4031 8.90076 9.98182L8.06134 9.39423C8.05288 9.38803 8.04432 9.38204 8.03565 9.37624ZM7.6783 10.9571L2.84929 15.3188C2.99518 15.4856 3.1723 15.6242 3.37208 15.726C3.51612 15.7994 3.71515 15.8549 4.08565 15.8851C4.4649 15.9161 4.95413 15.9167 5.66657 15.9167H14.3332C15.0457 15.9167 15.5349 15.9161 15.9142 15.8851C16.2847 15.8549 16.4837 15.7994 16.6277 15.726C16.8275 15.6242 17.0046 15.4856 17.1505 15.3188L12.3215 10.9571L11.9592 11.2107C11.9283 11.2323 11.8977 11.2538 11.8675 11.275C11.4085 11.5972 11.0226 11.868 10.5844 11.9772C10.2006 12.0729 9.79919 12.0729 9.41539 11.9772C8.9772 11.868 8.59135 11.5972 8.13231 11.275C8.10206 11.2538 8.07149 11.2323 8.04057 11.2107L7.6783 10.9571ZM13.5823 10.0745L17.5773 13.6829C17.583 13.4021 17.5832 13.0702 17.5832 12.6667V7.33337C17.5832 7.31336 17.5832 7.29353 17.5832 7.27387L13.5823 10.0745Z\\" fill=\\"#222226\\"/>\\n\\n","viewBox":"0 0 20 20"}');let ez=S._Y.createComponent("MessageIcon",eV,e=>(0,y.jsx)(R.s,{...e.props,name:"MessageIcon",iconData:eU}));var eO=i(5857),eW=i(26361),eH=i(53040),eG=i(24630);class eQ extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var eJ=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Line/&#229;&#138;&#159;&#232;&#131;&#189;/&#230;&#146;&#173;&#229;&#174;&#162;\\">\\n<path id=\\"Union\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M1.97461 8.10963C1.97461 4.72998 4.71436 1.99023 8.09401 1.99023C11.4737 1.99023 14.2134 4.72998 14.2134 8.10963C14.2134 10.071 13.2914 11.8167 11.8546 12.9376C11.5824 13.1499 11.5339 13.5426 11.7462 13.8148C11.9585 14.0869 12.3513 14.1354 12.6234 13.9231C14.3508 12.5755 15.4634 10.4724 15.4634 8.10963C15.4634 4.03963 12.164 0.740234 8.09401 0.740234C4.024 0.740234 0.724609 4.03963 0.724609 8.10963C0.724609 10.4724 1.83722 12.5755 3.56457 13.9231C3.83673 14.1354 4.22947 14.0869 4.44179 13.8148C4.65411 13.5426 4.6056 13.1499 4.33345 12.9376C2.89665 11.8167 1.97461 10.071 1.97461 8.10963ZM7.63772 10.365C7.35468 10.365 7.09674 10.5274 6.97434 10.7826L5.2754 14.3249C5.09972 14.6912 5.3667 15.1153 5.77294 15.1153H10.3923C10.7973 15.1153 11.0644 14.6933 10.8909 14.3273L9.21328 10.7858C9.09156 10.5288 8.83269 10.365 8.54837 10.365H7.63772ZM8.09346 4.70459C6.21301 4.70459 4.6886 6.229 4.6886 8.10945C4.6886 9.08361 5.09689 9.9614 5.75345 10.5828C6.00414 10.8201 6.01502 11.2157 5.77774 11.4664C5.54047 11.7171 5.14489 11.7279 4.89419 11.4907C3.9986 10.643 3.4386 9.44111 3.4386 8.10945C3.4386 5.53864 5.52265 3.45459 8.09346 3.45459C10.6643 3.45459 12.7483 5.53864 12.7483 8.10945C12.7483 9.44111 12.1883 10.643 11.2927 11.4907C11.042 11.7279 10.6465 11.7171 10.4092 11.4664C10.1719 11.2157 10.1828 10.8201 10.4335 10.5828C11.09 9.9614 11.4983 9.08361 11.4983 8.10945C11.4983 6.229 9.97392 4.70459 8.09346 4.70459ZM8.09501 9.78625C9.03105 9.78625 9.78987 9.02744 9.78987 8.09139C9.78987 7.15534 9.03105 6.39653 8.09501 6.39653C7.15896 6.39653 6.40015 7.15534 6.40015 8.09139C6.40015 9.02744 7.15896 9.78625 8.09501 9.78625Z\\" fill=\\"#222226\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let eq=S._Y.createComponent("LineFeaturePodcastIcon",eQ,e=>(0,y.jsx)(R.s,{...e.props,name:"LineFeaturePodcastIcon",iconData:eJ}));var eK=i(38133);class eY extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var eZ=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M5.42753 9.59813C5.5591 9.24512 6.05841 9.24512 6.18999 9.59813L7.06528 11.9464C7.20274 12.3152 7.49361 12.6061 7.86239 12.7435L10.2107 13.6188C10.5637 13.7504 10.5637 14.2497 10.2107 14.3813L7.86239 15.2566C7.49361 15.394 7.20274 15.6849 7.06528 16.0537L6.18999 18.402C6.05841 18.755 5.5591 18.755 5.42753 18.402L4.55223 16.0537C4.41477 15.6849 4.1239 15.394 3.75513 15.2566L1.40684 14.3813C1.05384 14.2497 1.05384 13.7504 1.40684 13.6188L3.75513 12.7435C4.1239 12.6061 4.41477 12.3152 4.55223 11.9464L5.42753 9.59813Z\\" fill=\\"#BABAC0\\"/>\\n<path d=\\"M15.5309 3.84045L15.531 25.3266M10.4754 8.89601L10.4754 10.1599M10.4754 19.0071L10.4754 20.271M20.5865 8.89601L20.5865 20.271M25.642 13.3196L25.6421 15.8474\\" stroke=\\"#BABAC0\\" stroke-width=\\"2.1\\" stroke-linecap=\\"round\\"/>\\n\\n","viewBox":"0 0 29 28"}');let eX=S._Y.createComponent("VoiceTo2Icon",eY,e=>(0,y.jsx)(R.s,{...e.props,name:"VoiceTo2Icon",iconData:eZ}));class e$ extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var e0=JSON.parse('{"fill":"none","content":"\\n<g id=\\"microphone\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M6.57495 3.75019C6.57495 2.13476 7.88452 0.825195 9.49995 0.825195C11.1154 0.825195 12.425 2.13476 12.425 3.7502V9.00019C12.425 10.6156 11.1154 11.9252 9.49995 11.9252C7.88452 11.9252 6.57495 10.6156 6.57495 9.00019V3.75019ZM9.49995 2.1752C8.6301 2.1752 7.92495 2.88035 7.92495 3.75019V9.00019C7.92495 9.87004 8.6301 10.5752 9.49995 10.5752C10.3698 10.5752 11.075 9.87004 11.075 9.00019V3.7502C11.075 2.88035 10.3698 2.1752 9.49995 2.1752ZM4.24995 6.82519C4.62274 6.82519 4.92495 7.1274 4.92495 7.50019V9.00019C4.92495 11.5269 6.97325 13.5752 9.49995 13.5752C12.0267 13.5752 14.075 11.5269 14.075 9.00019V7.50019C14.075 7.1274 14.3772 6.82519 14.75 6.82519C15.1227 6.82519 15.425 7.1274 15.425 7.50019V9.00019C15.425 12.0442 13.1294 14.5521 10.175 14.8872V15.8252H12.5C12.8727 15.8252 13.175 16.1274 13.175 16.5002C13.175 16.873 12.8727 17.1752 12.5 17.1752H6.49995C6.12716 17.1752 5.82495 16.873 5.82495 16.5002C5.82495 16.1274 6.12716 15.8252 6.49995 15.8252H8.82495V14.8872C5.87051 14.5521 3.57495 12.0442 3.57495 9.00019V7.50019C3.57495 7.1274 3.87716 6.82519 4.24995 6.82519Z\\" fill=\\"#868692\\"/>\\n</g>\\n\\n","viewBox":"0 0 19 18"}');let e1=S._Y.createComponent("Microphone2Icon",e$,e=>(0,y.jsx)(R.s,{...e.props,name:"Microphone2Icon",iconData:e0}));class e2 extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var e3=JSON.parse('{"fill":"none","content":"\\n<g id=\\"start icon\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M7.5758 1.57573C7.81012 1.34142 8.19001 1.34142 8.42433 1.57573L12.4243 5.57573C12.6586 5.81004 12.6586 6.18994 12.4243 6.42426C12.19 6.65857 11.8101 6.65857 11.5758 6.42426L8.60007 3.44852V11.3333C8.60007 11.6647 8.33144 11.9333 8.00007 11.9333C7.66869 11.9333 7.40007 11.6647 7.40007 11.3333V3.44852L4.42433 6.42426C4.19001 6.65857 3.81012 6.65857 3.5758 6.42426C3.34149 6.18994 3.34149 5.81004 3.5758 5.57573L7.5758 1.57573ZM2.7334 14C2.7334 13.6686 3.00203 13.4 3.3334 13.4H12.6667C12.9981 13.4 13.2667 13.6686 13.2667 14C13.2667 14.3314 12.9981 14.6 12.6667 14.6H3.3334C3.00203 14.6 2.7334 14.3314 2.7334 14Z\\" fill=\\"#222226\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let e6=S._Y.createComponent("Upload2Icon",e2,e=>(0,y.jsx)(R.s,{...e.props,name:"Upload2Icon",iconData:e3}));var e5=i(90867),e4=i(11038),e9=i(38172),e7=i(46494),e8={audio:"audio--wrwZ7",inner:"inner--GVVAG",header:"header--k5DiV",left:"left--lrLa8",right:"right--_hSt1",actionBtn:"action-btn--ELetP",banner:"banner--CRoOo",bg:"bg--dghrt",bannerTitle:"banner-title--VGqSq",button:"button--IiEmC",kingkong:"kingkong--blbX6",kingkongItem:"kingkong-item--t3WuU",lt:"lt--W4FXg",title:"title--tQKEk",subtitle:"subtitle--jMQJe",pic:"pic--pJwGF",img:"img--aV881",sectionHeader:"section-header--mjqEL",sectionTitle:"section-title--ZcEaJ",viewMore:"view-more--tIWjH",personalPodcast:"personal-podcast--eiHyK",podcastLoading:"podcast-loading--ELg66",podcastSkeleton:"podcast-skeleton--SzZY4",text:"text--uXV8x",podcastList:"podcast-list--dlO2s",podcastItem:"podcast-item--lJQk8",avatar:"avatar--r54Mn",empty:"empty--xXIqd",emptyText:"empty-text--TaplE",buttonGroup:"button-group--Q5MvM",btn:"btn--XcXKO",audioToText:"audio-to-text--SnwXF",audioLoading:"audio-loading--OlehH",audioSkeleton:"audio-skeleton--mBg2v",audioList:"audio-list--N9txh",audioItem:"audio-item--KHYKA",hd:"hd--pVdvh",name:"name--WI1T1",time:"time--b7mTZ",center:"center--iFLvN",duration:"duration--Skift",type:"type--iEXLb",divider:"divider--olbfY",contentText:"content-text--azllM",mobileView:"mobile-view--Fr_Sc"},te=i(4461),tt={src:"https://assets.monica.im/home-web/_next/static/media/aiPodcast.0bd34bf8.png",height:188,width:292,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAASFBMVEVMaXH1Uw/2XRxo2MgAkP/zdD4AUrdulLL8cTfof1Dke0nyoHkmuNManM/xil2Z2cL5k2kUeLb3bDC6upr/j1z2jluyqYn+qIDmNHBdAAAAFHRSTlMA8tVwAZclC/4O1FTT9Dn937jr8qoymLsAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicBcELAoAQEEDB57u7FIpy/5uaARAjRqwmX4JA20u//mRsLNX/zpCce+clBxshAWk8JGx6AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},ti={src:"https://assets.monica.im/home-web/_next/static/media/banner.d2d1049f.webp",height:240,width:800,blurDataURL:"data:image/webp;base64,UklGRngAAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAAQkNVn+5ngUABmT4///cAgBWUDggQAAAALABAJ0BKggAAgACQDgljAJ0APSBsmAA/q38bqDlJF9vtJdv57fMBz+0F+rAwOKEzE7g1iPEVfZ+PK25JW4AAAA=",blurWidth:8,blurHeight:2},to={src:"https://assets.monica.im/home-web/_next/static/media/bannerNarrow.a02242e9.webp",height:240,width:340,blurDataURL:"data:image/webp;base64,UklGRqgAAABXRUJQVlA4WAoAAAAQAAAABwAABQAAQUxQSDEAAAAAAAAAAAAAAAAAAQUKCqGKbwokqf//////C8Lv//////8A5f///////wDI////////AFZQOCBQAAAAsAEAnQEqCAAGAAJAOCUAToAh4In6IADiB9N8wuhTF3l67N4rJ7x/wQ/+ueAzp4pFjlpM4uiBqkD4ZTtpnFERoKMld+VO7s8NhbL36l0gAAA=",blurWidth:8,blurHeight:6},ta={src:"https://assets.monica.im/home-web/_next/static/media/bg.59c71571.webp",height:240,width:1602,blurDataURL:"data:image/webp;base64,UklGRmgAAABXRUJQVlA4WAoAAAAQAAAABwAAAAAAQUxQSAkAAAAA/v////////4AVlA4IDgAAAAwAgCdASoIAAEAAkA4JagCdLoB+AAC0nyXeAD+LkTicfQ1f/StuRzYP8VtyOb2y/+Uqi4M7GgAAA==",blurWidth:8,blurHeight:1},tn={src:"https://assets.monica.im/home-web/_next/static/media/bgNarrow.a3caa100.webp",height:240,width:716,blurDataURL:"data:image/webp;base64,UklGRnAAAABXRUJQVlA4WAoAAAAQAAAABwAAAgAAQUxQSBMAAAABD0CQbePPvO3XiIg4GMCI/kcBAFZQOCA2AAAAMAIAnQEqCAADAAJAOCWwAnS6AfgAAyD8e+AA/I+21QI+f/M99W7v8Gz/Wv/8hVaSAz7hzpAA",blurWidth:8,blurHeight:3},tr={src:"https://assets.monica.im/home-web/_next/static/media/localUpload.feb2260b.png",height:188,width:292,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAPFBMVEVMaXHI7PvO6vr4+PjZ6e/W7fur4/fq7vPD7flasNjU5uvU6vW55fa05fX05+qz5/uT0uq+8f/y9Pu96Pq/0royAAAAEXRSTlMA2+8qgdT7Pw4KrvrobdLisrcBiJ8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAvSURBVHicFca3EQAgDACxJ9pkDPvvyqFKQFEtAJLc2n/ib7YBITrLZypSk+8t8gAV9wESZdBtggAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5},ts={src:"https://assets.monica.im/home-web/_next/static/media/recording.f965a91f.png",height:188,width:292,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAQlBMVEWZmtOnjP+RcP+2quv8kKH/fJDP0tJMaXHNz9TFzNOussPXwchMtPWrtMGByfmxtcBJsfequsTY3N6nle2S1f/exs0vUCx9AAAAEnRSTlMKq8b60i3HAPr0u+1q2o7kQk6CHvrVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAL0lEQVR4nAXBiQGAIBAEsZFvD+UX+m+VBAkoQ4i3190E7jfLU/D4tU6IiGT5C/ECHHQBRtPjOSoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},tl=i(3329),tc=i(47720),td=i(88792),tp=i(48655),tm=i(85132);class th extends S.PN{get S(){return ei.S.Global.modules.Audio}get isMobileView(){return this.innerWidth<640||f.o.isExtension}get audioConfigDefaultValue(){return{banners:[{text:eD.userController.isFreeUser?this.S.bannerTipsForVip:this.S.bannerTipsForFree,buttonWording:eD.userController.isFreeUser?this.S.bannerBtnTextForFree:this.S.bannerBtnTextForVip,jumpType:"browser",jumpLink:w.m.genFullUrl(eR.oo.aiAudioToText),imageUrl:(0,te.Q)(ti),imageUrlNarrow:(0,te.Q)(to),backgroundImageUrl:(0,te.Q)(ta),backgroundImageUrlNarrow:(0,te.Q)(tn),backgroundColor:""}]}}get kingkongItems(){return[{title:this.S.aiPodcast,subtitle:this.S.aiPodcastSubtitle,imageUrl:(0,te.Q)(tt),link:w.m.genFullUrl(eR.oo.aiPodcast)},{title:this.S.recoding,subtitle:this.S.recodingSubtitle,imageUrl:(0,te.Q)(ts),link:this.getAudioPageUrl("recoding")},{title:this.S.localUpload,subtitle:(0,ei.x)(this.S.localUploadSubtitle,{num:Object.keys(tl.Y.supportsFileInfo).length}),imageUrl:(0,te.Q)(tr),link:this.getAudioPageUrl("file")}]}get audioConfig(){var e;return null!==(e=tc.serverConfigController.getStaticConfig("audioPage"))&&void 0!==e?e:this.audioConfigDefaultValue}get banners(){return this.audioConfig.banners||[]}onViewCreate(){var e;this.innerWidth=(null===(e=this.innerEl)||void 0===e?void 0:e.clientWidth)||0,this.resizeObserver=new ResizeObserver(()=>{var e;this.innerWidth=(null===(e=this.innerEl)||void 0===e?void 0:e.clientWidth)||0}),this.innerEl&&this.resizeObserver.observe(this.innerEl),this.fetchPodcast(),this.fetchAudioList(),td.y.on("configChanges",e=>{let{audioList:t=[],podcastList:i=[]}=e;this.audioList=t.map(tl.Y.transformAudioTask),this.podcastList=i}),tp.Cc.manualUpdateStaticConfig([tm.$.audioPage],!0)}onViewDestroy(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()}getAudioPageUrl(e){return w.m.genFullUrl(w.m.genUrl(eR.oo.aiAudioToText,e?{scene:e}:void 0))}async fetchPodcast(){this.podcastLoading=!0;try{let e=await td.y.fetchPodcastWithCache();this.podcastList=e}catch(e){ef.M.error(w.m.formatErrorMsg(e))}finally{this.podcastLoading=!1}}async fetchAudioList(){this.audioLoading=!0;try{let e=await td.y.fetchAudioListWithCache();this.audioList=e.map(tl.Y.transformAudioTask)}catch(e){ef.M.error(w.m.formatErrorMsg(e))}finally{this.audioLoading=!1}}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"innerEl",null),(0,T._)(this,"innerWidth",0),(0,T._)(this,"podcastList",[]),(0,T._)(this,"podcastLoading",!1),(0,T._)(this,"audioList",[]),(0,T._)(this,"audioLoading",!1),(0,T._)(this,"resizeObserver",null)}}(0,I.gn)([S.SB],th.prototype,"innerWidth",void 0),(0,I.gn)([S.SB],th.prototype,"podcastList",void 0),(0,I.gn)([S.SB],th.prototype,"podcastLoading",void 0),(0,I.gn)([S.SB],th.prototype,"audioList",void 0),(0,I.gn)([S.SB],th.prototype,"audioLoading",void 0),(0,I.gn)([S.Fl],th.prototype,"S",null),(0,I.gn)([S.Fl],th.prototype,"isMobileView",null),(0,I.gn)([S.Fl],th.prototype,"audioConfigDefaultValue",null),(0,I.gn)([S.Fl],th.prototype,"kingkongItems",null),(0,I.gn)([S.Fl],th.prototype,"audioConfig",null),(0,I.gn)([S.Fl],th.prototype,"banners",null);let tg=S._Y.createComponent("Audio",th,e=>(0,y.jsx)("div",{className:q()(e8.audio,{[e8.mobileView]:e.isMobileView}),children:(0,y.jsxs)("div",{className:e8.inner,ref:t=>{e.innerEl=t},children:[(0,y.jsx)(tu,{vm:e}),(0,y.jsx)(tv,{vm:e}),(0,y.jsx)(tC,{vm:e}),(0,y.jsx)(tx,{vm:e}),(0,y.jsx)(ty,{vm:e})]})})),tu=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:e8.header,children:[(0,y.jsx)("div",{className:e8.left,children:(0,y.jsx)(e7.Q,{tabKey:"audio",title:t.S.audio})}),(0,y.jsxs)("div",{className:q()(e8.right),children:[f.o.isExtension?(0,y.jsx)(ez,{size:20,color:"var(--theme-icon-tertiary)",padding:6,button:!0,title:t.S.feedback,onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank")}}):(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:e8.actionBtn,icon:(0,y.jsx)(ez,{size:16,color:"var(--theme-icon-quaternary)"}),onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank")},children:t.S.feedback}),(0,y.jsx)(eW.x,{isNewStyle:!0,usageModule:"credits"})]})]})}),tv=(0,F.Pi)(function(e){var t;let{vm:i}=e;return(0,y.jsx)(y.Fragment,{children:null===(t=i.banners)||void 0===t?void 0:t.map((e,t)=>(0,y.jsxs)("a",{href:e.jumpLink,className:q()(e8.banner),target:"_blank",style:{background:"".concat(e.backgroundColor," url(").concat(i.isMobileView?e.backgroundImageUrlNarrow:e.backgroundImageUrl,") no-repeat")},onClick:()=>{e9.W.createUserBehaviorEvent({eventName:"audio_home_banner_click",extData:{banner:eD.userController.isFreeUser?"pricing":"kling"}})},rel:"noreferrer",children:[(0,y.jsx)("div",{className:e8.bg,style:{backgroundImage:"url(".concat(i.isMobileView?e.imageUrlNarrow:e.imageUrl,")"),backgroundRepeat:"no-repeat"}}),(0,y.jsxs)("div",{className:e8.inner,children:[(0,y.jsx)("div",{className:e8.bannerTitle,children:e.text}),e.buttonWording&&(0,y.jsx)(eO.z,{type:"blackOutline",size:"medium",shape:"round",className:e8.button,children:e.buttonWording})]})]},t))})}),tC=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsx)("div",{className:e8.kingkong,children:t.kingkongItems.map((e,t)=>(0,y.jsxs)("a",{href:e.link,target:"_blank",rel:"noreferrer",className:e8.kingkongItem,children:[(0,y.jsxs)("div",{className:e8.lt,children:[(0,y.jsx)("p",{className:e8.title,children:e.title}),(0,y.jsx)("p",{className:e8.subtitle,children:e.subtitle})]}),(0,y.jsx)("div",{className:e8.pic,children:(0,y.jsx)(eH.E,{skeleton:!0,src:e.imageUrl,className:e8.img})})]},t))})}),tx=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:e8.personalPodcast,children:[(0,y.jsxs)("div",{className:e8.sectionHeader,children:[(0,y.jsx)("h2",{className:e8.sectionTitle,children:t.S.personalPodcast}),(0,y.jsxs)("a",{href:w.m.genFullUrl(eR.oo.aiPodcast),target:"_blank",rel:"noreferrer",className:e8.viewMore,children:[t.S.viewMore," ",(0,y.jsx)(eG.X,{size:16,color:"currentColor"})]})]}),t.podcastLoading?(0,y.jsx)(e4.K,{children:(0,y.jsx)("div",{className:e8.podcastLoading,children:[,,,,,].fill("").map((e,t)=>(0,y.jsxs)("div",{className:e8.podcastSkeleton,children:[(0,y.jsx)("div",{className:e8.pic}),(0,y.jsx)("div",{className:e8.text})]},t))})}):0===t.podcastList.length?(0,y.jsxs)("div",{className:e8.empty,children:[(0,y.jsx)(eq,{color:"var(--theme-icon-disable)",size:28}),(0,y.jsx)("p",{className:e8.emptyText,children:t.S.podcastEmptyText}),(0,y.jsx)("div",{className:e8.buttonGroup,children:(0,y.jsx)("a",{href:w.m.genFullUrl(eR.oo.aiPodcast),target:"_blank",rel:"noreferrer",onClick:()=>{e9.W.createUserBehaviorEvent({eventName:"audio_home_podcast_generate_click"})},children:(0,y.jsx)(eO.z,{type:"blackOutline",size:"medium",className:e8.btn,icon:(0,y.jsx)(eK.o,{color:"var(--theme-icon-primary)"}),children:t.S.generateNow})})})]}):(0,y.jsx)(e4.K,{children:(0,y.jsx)("div",{className:e8.podcastList,children:t.podcastList.map(e=>{let{uid:t,avatar:i,title:o}=e;return(0,y.jsxs)("a",{href:w.m.genFullUrl(w.m.genUrl(eR.oo.aiPodcast,{id:t})),target:"_blank",rel:"noreferrer",className:e8.podcastItem,children:[(0,y.jsx)(eH.E,{skeleton:!0,src:i,className:e8.avatar}),(0,y.jsx)("p",{children:o||"Untitled"})]},t)})})})]})}),ty=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:e8.audioToText,children:[(0,y.jsxs)("div",{className:e8.sectionHeader,children:[(0,y.jsx)("h2",{className:e8.sectionTitle,children:t.S.audioToText}),(0,y.jsxs)("a",{href:w.m.genFullUrl(eR.oo.aiAudioToText),target:"_blank",rel:"noreferrer",className:e8.viewMore,children:[t.S.viewMore," ",(0,y.jsx)(eG.X,{size:16,color:"currentColor"})]})]}),t.audioLoading?(0,y.jsx)("div",{className:e8.audioLoading,children:[,,,,].fill("").map((e,t)=>(0,y.jsx)("div",{className:e8.audioSkeleton},t))}):0===t.audioList.length?(0,y.jsxs)("div",{className:e8.empty,children:[(0,y.jsx)(eX,{color:"var(--theme-icon-disable)",size:28}),(0,y.jsx)("p",{className:e8.emptyText,children:t.S.audioEmptyText}),(0,y.jsxs)("div",{className:e8.buttonGroup,children:[(0,y.jsx)("a",{href:t.getAudioPageUrl("recoding"),target:"_blank",rel:"noreferrer",children:(0,y.jsx)(eO.z,{type:"blackOutline",size:"medium",className:e8.btn,icon:(0,y.jsx)(e1,{color:"var(--theme-icon-primary)"}),onClick:()=>{e9.W.createUserBehaviorEvent({eventName:"audio_home_audio_recording_click"})},children:t.S.recoding})}),(0,y.jsx)("a",{href:t.getAudioPageUrl("file"),target:"_blank",rel:"noreferrer",children:(0,y.jsx)(eO.z,{type:"blackOutline",size:"medium",className:e8.btn,icon:(0,y.jsx)(e6,{color:"var(--theme-icon-primary)"}),onClick:()=>{e9.W.createUserBehaviorEvent({eventName:"audio_home_audio_local_upload_click"})},children:t.S.localUpload})})]})]}):(0,y.jsx)("div",{className:e8.audioList,children:t.audioList.map(e=>{let i="record"===e.audioFrom;return(0,y.jsxs)("a",{className:e8.audioItem,href:w.m.genFullUrl(w.m.genUrl(eR.oo.aiAudioToText,{id:e.uid})),target:"_blank",rel:"noreferrer",onClick:()=>{e9.W.createUserBehaviorEvent({eventName:"audio_home_audio_view_click"})},children:[(0,y.jsxs)("div",{className:e8.hd,children:[(0,y.jsx)("div",{className:e8.name,children:e.name}),(0,y.jsx)("div",{className:e8.time,children:em.L.formatTime(e.createdAt,"LL")})]}),(0,y.jsxs)("div",{className:e8.center,children:[(0,y.jsx)("div",{className:q()(e8.type),style:i?{color:"var(--theme-text-link)",background:"var(--theme-fill-tsp-blue)"}:{color:"var(--theme-text-brand)",background:"var(--theme-fill-tsp-brand)"},children:i?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(e1,{color:"currentColor",size:16}),t.S.ralTimeRecoding]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(e5.f,{size:16,color:"currentColor"}),t.S.audioUpload]})}),e.duration&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:e8.divider}),(0,y.jsxs)("div",{className:e8.duration,children:[t.S.duration,": ",em.L.formatDuration(Math.floor(e.duration))]})]})]}),(0,y.jsx)("div",{className:e8.contentText,children:e.preview||t.S.noContent})]},e.uid)})})]})});var tb=i(52304),tf=i(45063),tw=i(67889),tS=i(32352),tA=i(3101),tj=i(54493),tk=i(5193),tN=i(48023),t_=i(46731),tT=i(14084),tI=i(2199),tM=i(95825),tL=i(58756),tB=i(73047);class tE extends S.PN{get S(){return ei.S.Global.components.VoiceInput}get disabled(){return this.unsupported||"noMic"===this.permissionStatus||"denied"===this.permissionStatus}get animationStyle(){if(!this.hasInitVolume||!this.recognizing)return{};let e=this.volume;this.volume<30?e=Math.floor(1.5*e):30<=this.volume&&this.volume<50&&(e=Math.floor(1.2*e));let t=Math.floor(e/100*50+80);return t=Math.min(100,t),{width:"".concat(t,"%"),height:"".concat(t,"%"),transition:"all 0.16s"}}get hint(){return this.transcript.trim()?"":this.unsupported?ei.S.Global.components.VoiceInput.hintUnsupported:"noMic"===this.permissionStatus?ei.S.Global.components.VoiceInput.hintNoMic:"denied"===this.permissionStatus?ei.S.Global.components.VoiceInput.hintDenied:this.recognizing?ei.S.Global.components.VoiceInput.hintClick:"unknown"===this.permissionStatus?ei.S.Global.components.VoiceInput.hintAsking:ei.S.Global.components.VoiceInput.hintDefault}async onViewCreate(){this.listeners.addWindowEventListener("keydown",e=>{this.handleKeyDown(e)}),this.listeners.addDocumentEventListener("click",e=>{this.handleMouseClick(e)})}onViewDestroy(){this.listeners.removeAll()}handleKeyDown(e){e.key===eh.yX.Esc&&this.stop()}handleMouseClick(e){this.recognizing&&(e.stopImmediatePropagation(),this.stop())}async handleStart(){await this.preCheckPermission()&&(this.start(),eL.M.createChatToolbarEvent("VoiceInput"))}async preCheckPermission(){if(f.o.isDesktop&&"OSX"===w.m.getOsType()&&!await tL.y.getService().askPermission())return this.permissionStatus="denied",!1;try{let e=await navigator.permissions.query({name:"microphone"});if("denied"===e.state)return this.permissionStatus="denied",!1;if(this.permissionStatus="unknown","granted"===e.state)return!0;return await navigator.mediaDevices.getUserMedia({audio:!0}),!1}catch(e){return this.permissionStatus="noMic",!1}}start(){if(!this.disabled){if(eL.M.createUserBehaviorEvent({eventName:"voice_input_start",extData:{triggerMode:this.triggerMode}}),"asking"===this.permissionStatus||this.recognizing){tI._.cancelSpeak();return}this.initialValue=this.props.getInitialValue(),this.createSpeechRecognition(),this.speechRec.start(P.A.finalSpeechLang).then(()=>{this.permissionStatus="asking",this.recognizing=!0})}}clearMediaStream(){this.mediaStream&&(this.mediaStream.getAudioTracks().forEach(e=>{e.stop()}),this.mediaStream=null,navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{e.getTracks().forEach(e=>e.stop())}))}stop(){this.recognizing&&this.speechRec&&(this.speechRec.stop(),this.recognizing=!1,this.clearMediaStream())}async reset(){this.recognizing=!1,this.transcript="",this.triggerMode=null,this.initialValue="",this.clearMediaStream()}handleSpeechFinish(e){let t=e.trim();t&&(this.props.onFinished(t),null===tI._.autoSpeakEnabled&&(tI._.autoSpeakEnabled=!0)),this.reset()}createSpeechRecognition(){this.speechRec||(this.speechRec=new tM.O({onData:e=>{this.getVolume(),this.transcript="".concat(this.initialValue," ").concat(e).trim(),this.props.onUpdate(this.transcript)},onFinish:e=>{this.handleSpeechFinish("".concat(this.initialValue," ").concat(e).trim())},onCanceled:()=>{ef.M.error(this.S.tryAgain),this.permissionStatus="unknown",this.reset()}}))}async getVolume(){try{if(!this.mediaStream){let e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});this.mediaStream=e}let e=new AudioContext,t=e.createAnalyser(),i=e.createMediaStreamSource(this.mediaStream),o=e.createScriptProcessor(2048,1,1);t.smoothingTimeConstant=.8,t.fftSize=1024,i.connect(t),t.connect(o),o.connect(e.destination),o.onaudioprocess=()=>{let e=new Uint8Array(t.frequencyBinCount);t.getByteFrequencyData(e);let i=e.reduce((e,t)=>e+t,0)/e.length;this.hasInitVolume||(this.hasInitVolume=!0),this.volume=Math.floor(i)}}catch(e){console.error(e)}}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"recognizing",!1),(0,T._)(this,"triggerMode",null),(0,T._)(this,"transcript",""),(0,T._)(this,"unsupported",!1),(0,T._)(this,"permissionStatus","default"),(0,T._)(this,"hasInitVolume",!1),(0,T._)(this,"volume",0),(0,T._)(this,"initialValue",""),(0,T._)(this,"speechRec",null),(0,T._)(this,"mediaStream",null),(0,T._)(this,"listeners",new L.M)}}(0,I.gn)([S.SB],tE.prototype,"recognizing",void 0),(0,I.gn)([S.SB],tE.prototype,"triggerMode",void 0),(0,I.gn)([S.SB],tE.prototype,"transcript",void 0),(0,I.gn)([S.SB],tE.prototype,"unsupported",void 0),(0,I.gn)([S.SB],tE.prototype,"permissionStatus",void 0),(0,I.gn)([S.SB],tE.prototype,"hasInitVolume",void 0),(0,I.gn)([S.SB],tE.prototype,"volume",void 0),(0,I.gn)([tB.Fl],tE.prototype,"S",null),(0,I.gn)([tB.Fl],tE.prototype,"disabled",null),(0,I.gn)([tB.Fl],tE.prototype,"animationStyle",null),(0,I.gn)([tB.Fl],tE.prototype,"hint",null);let tD=S._Y.createComponent("VoiceInput",tE,e=>{let t=(0,y.jsx)(t_.J,{name:"monicaVoice",className:"icon--HwILF",size:20,color:"currentColor"}),{icon:i=t,activeIcon:o=t,iconWrapperClassName:a,wrapperClassName:n,animationMaxSize:r=40}=e.props;return(0,y.jsx)(tN.u,{title:e.hint,mouseLeaveDelay:0,children:(0,y.jsx)("div",{className:q()("voice-input--GLy6R",n),onClick:t=>{w.m.ensureTrustedEvent(t),e.handleStart.call(e)},children:(0,y.jsx)("span",{className:q()("container--fV_Mt"),style:e.recognizing?{width:"".concat(r,"px"),height:"".concat(r,"px")}:{},children:(0,y.jsx)("span",{className:q()("icon-wrapper--mPf7_",{"icon-wrapper-active--ctCIs":e.recognizing,"default-animation--ROE6l":!e.hasInitVolume,"border-animated--zfU48":e.volume>20},a),style:e.animationStyle,children:e.recognizing?o:i})})})})});var tP=i(18245),tF=i(18162),tR={chatInput:"chat-input--FOdR1",inputWrapper:"input-wrapper--duBwp",resized:"resized--l5Iek",textareaMentions:"textarea-mentions--RLfI1",textarea:"textarea--cpnzm",inputBox:"input-box--P104R",inputDisabled:"input-disabled--UaAtl",inputFocus:"input-focus--Z7RtG",tag:"tag--BzkAH",tagItem:"tag-item--Ic62k",tagItemClose:"tag-item-close--hZKSY",sender:"sender--t70YM",inputMsgBtn:"input-msg-btn--lsbgA",active:"active--AKzJB",inputActions:"input-actions--ct2na",inputActionsLeft:"input-actions-left--iqbaS",inputActionItem:"input-action-item--HEnpv",inputActionsRight:"input-actions-right--B28qe",upgradeBadge:"upgrade-badge--_Qywr",gpt4Switch:"gpt4-switch--DVm4o",artistSend:"artist-send--VKsZF",cost:"cost--oRM_7"},tV=i(92020),tU=i(32004),tz=i(12596);class tO extends S.PN{get S(){return ei.S.Global.components.ChatComponents.ChatInput}get enableResizeMode(){return this.isResizeInited?P.A.chatInputHasResized:!!P.A.chatInputResizedHeight}get inputWrapperStyle(){if(!this.isResizeInited){let e=P.A.chatInputResizedHeight;return e?{height:e}:{}}return P.A.chatInputHasResized?{cursor:this.resizableController.cursor,height:this.resizableController.data.height,maxHeight:"min(50vh, 100vh - 580px)",minHeight:124+(this.inputHeaderOffsetTop||0)}:{cursor:this.resizableController.cursor}}get textareaAutoSize(){if(!P.A.chatInputHasResized)return{minRows:this.props.minRows||2,maxRows:6}}get sendBtnTip(){let e=P.A.getChatSendHotKeysLabel(P.A.getKeyBoardShortcut("chatSend"));return(0,ei.x)(this.S.sendWithEnter,{shortcuts:e})}handleAtClick(e){var t,i;if(e.nativeEvent.stopImmediatePropagation(),!this.textAreaRef)return;let{onChange:o,value:a}=this.props,n=null===(t=this.textAreaRef.resizableTextArea)||void 0===t?void 0:t.textArea,r="".concat(a?"".concat(a," "):"","@"),s=new Event("input",{bubbles:!0,cancelable:!0});n.value=r,n.dispatchEvent(s),o(r),null===(i=this.textAreaRef)||void 0===i||i.focus({cursor:"end"})}initServiceEventListeners(){let e=tV.ll.on("uiFlagChange",e=>{!P.A.heightResizedWithinOneHundredMilliseconds&&(e.chatInputResizedHeight?this.resizableController.root&&(P.A.chatInputHasResized=!0,this.resizableController.data.height=e.chatInputResizedHeight):(P.A.chatInputHasResized=!1,P.A.chatInputResizedHeight=0))});this.destroyServiceListener=()=>{e.destroy()}}onViewCreate(){var e;this.initServiceEventListeners(),this.initResizable(),this.updateInputHeaderOffsetTop(),tU.f.getProxy(this).add((0,tB.U5)(()=>[P.A.chatInputResizedHeight],()=>{this.resizableController.data.height!==P.A.chatInputResizedHeight&&(this.resizableController.data.height=P.A.chatInputResizedHeight)})).add((0,tB.U5)(()=>{var e,t;return null===(t=E.w.resizableController)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.width},()=>{this.updateUpgradeTextVisibility()})),null===(e=this.textAreaRef)||void 0===e||e.focus({cursor:"end"})}onViewDestroy(){this.destroyServiceListener(),tU.f.getProxy(this).disposeAll(),setTimeout(()=>{var e,t;null===(e=this.resizableController.root)||void 0===e||e.removeEventListener("mouseenter",this.resizableController.handleRootMouseEnter),null===(t=this.resizableController.root)||void 0===t||t.removeEventListener("mouseleave",this.resizableController.handleRootMouseLeave),this.resizableController.dispose()},0)}handleConfirm(e){("boolean"==typeof this.props.disableSend?this.props.disableSend:!e.trim())||this.props.onConfirm(e)}updateUpgradeTextVisibility(){if(!eD.userController.isVipUser){if(this.upgradeBadgeEl){let e=this.upgradeBadgeEl.clientWidth;"ru"===ei.a.locale?this.showText=e>125:this.showText=e>110}else this.showText=!1}}updateInputHeaderOffsetTop(){this.inputBoxEl&&(this.inputHeaderOffsetTop=this.inputBoxEl.offsetTop)}getResizeMaxHeight(){return Math.min(.5*window.innerHeight,window.innerHeight-580)}initResizable(){if(!this.resizableController.root)return;let e=0,t=P.A.chatInputResizedHeight;t&&t>124&&(e=t),this.resizableController.init({defaultData:{translateX:0,translateY:0,width:0,height:e||124},touchArea:20,getMinSize:()=>({width:0,height:Math.max(this.inputHeaderOffsetTop+124,124)}),getMaxSize:()=>({width:0,height:this.getResizeMaxHeight()}),getAllowedDirection:()=>["top"],onChange:e=>{P.A.heightResizedWithinOneHundredMilliseconds=!0,e.height<160?tV.ll.setUiFlag("chatInputResizedHeight",0):tV.ll.setUiFlag("chatInputResizedHeight",e.height),P.A.chatInputResizedHeight=e.height,this.hasResizedTimer&&clearTimeout(this.hasResizedTimer),this.hasResizedTimer=setTimeout(()=>{P.A.heightResizedWithinOneHundredMilliseconds=!1},100)},onResized:()=>{P.A.chatInputHasResized=!0}}),this.isResizeInited=!0,setTimeout(()=>{var e,t;null===(e=this.resizableController.root)||void 0===e||e.addEventListener("mouseenter",this.resizableController.handleRootMouseEnter),null===(t=this.resizableController.root)||void 0===t||t.addEventListener("mouseleave",this.resizableController.handleRootMouseLeave)}),e&&(P.A.chatInputHasResized=!0)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"upgradeBadgeEl",null),(0,T._)(this,"inputBoxEl",null),(0,T._)(this,"isFocus",!1),(0,T._)(this,"isResizeInited",!1),(0,T._)(this,"showText",!1),(0,T._)(this,"inputHeaderOffsetTop",0),(0,T._)(this,"textAreaRef",null),(0,T._)(this,"resizableController",new tz.S),(0,T._)(this,"hasResizedTimer",null),(0,T._)(this,"destroyServiceListener",()=>{})}}(0,I.gn)([S.SB],tO.prototype,"isFocus",void 0),(0,I.gn)([S.SB],tO.prototype,"isResizeInited",void 0),(0,I.gn)([S.SB],tO.prototype,"showText",void 0),(0,I.gn)([S.SB],tO.prototype,"inputHeaderOffsetTop",void 0),(0,I.gn)([tB.Fl],tO.prototype,"S",null),(0,I.gn)([tB.Fl],tO.prototype,"enableResizeMode",null),(0,I.gn)([tB.Fl],tO.prototype,"inputWrapperStyle",null),(0,I.gn)([tB.Fl],tO.prototype,"textareaAutoSize",null),(0,I.gn)([tB.Fl],tO.prototype,"sendBtnTip",null);var tW=i(37301);let tH=S._Y.createComponent("ChatInput",tO,e=>{var t;let{value:i,onChange:o,disabled:a,placeholder:n,className:r,getTextAreaRef:s,onPaste:l,chatToolbar:c,inputFooter:d,inputActions:p,chatInputHeader:m,style:h,tag:g,onTagRemove:u,onClearIntent:v,onTextareaKeyUp:C,onTextareaMouseUp:x,myPromptsEnable:b,mentionEnable:f,mentions:S,onMyPromptClick:A,chatWithMemoEnable:j,onChatWithMemoClick:k,showChatWithMemo:N,showGpt4:_,gpt4Enable:T,onGpt4Click:I,usageInfoProps:M,source:L,gpt4Tooltip:B}=e.props,E="boolean"==typeof e.props.disableSend?e.props.disableSend:!i.trim();return(0,Q.useEffect)(()=>{e.updateInputHeaderOffsetTop()},[m,g,c,e]),(0,y.jsxs)("div",{className:q()(tR.chatInput,r),style:h,onClick:t=>{if(w.m.ensureTrustedEvent(t),!p&&!e.isFocus){var i;null===(i=e.textAreaRef)||void 0===i||i.focus({cursor:"end"})}},children:[c,(0,y.jsxs)("div",{className:q()(tR.inputWrapper,{[tR.inputDisabled]:a,[tR.inputFocus]:e.isFocus&&!a,[tR.resized]:e.enableResizeMode}),ref:t=>{e.resizableController.root=t},onMouseDown:t=>{e.resizableController.handleRootMouseDown(t)},style:e.inputWrapperStyle,children:[m,g&&(0,y.jsx)("div",{className:tR.tag,children:(0,y.jsxs)("div",{className:tR.tagItem,children:[g,(0,y.jsx)("span",{className:tR.tagItemClose,onClick:()=>{null==u||u()},children:(0,y.jsx)(t_.J,{name:"monicaClose",size:16})})]})}),(0,y.jsx)("div",{className:tR.inputBox,ref:t=>{e.inputBoxEl=t},children:(0,y.jsx)(tW.J,{mentionEnable:f||b,mentions:S,className:tR.textareaMentions,children:(0,y.jsx)(tj.g,{type:"primary","data-input_node":"monica-chat-input",className:tR.textarea,value:i,autoSize:e.textareaAutoSize,placeholder:n,autoFocus:!0,getTextAreaRef:t=>{e.textAreaRef=t,null==s||s(t)},onChange:e=>{o(e.target.value)},disabled:a,onFocusChange:t=>{e.isFocus=t},onKeyDown:t=>{if(a)return;let o=P.A.getChatSendHotKeys();(0,en.P6)(o,t)&&(t.preventDefault(),e.handleConfirm(e.props.value)),!i&&(0,en.P6)(["esc"],t)&&(null==v||v(),null==u||u()),(0,en.P6)(["backspace","mod+backspace"],t)&&!i&&(null==u||u())},onPaste:e=>{null==l||l(e)},onKeyUp:e=>{null==C||C(e)},onMouseUp:e=>{null==x||x(e)}})})}),(0,y.jsxs)("div",{className:tR.sender,children:[p,(0,y.jsx)(tJ,{vm:e,disabled:E,usageModule:null===(t=e.props.usageInfoProps)||void 0===t?void 0:t.usageModule,creditSpent:e.props.creditSpent})]}),!p&&(0,y.jsx)(tG,{vm:e,myPromptsEnable:b,mentionEnable:f,value:i,chatWithMemoEnable:j,onChatWithMemoClick:k,onChange:o,onMyPromptClick:A,showChatWithMemo:N,showGpt4:_,gpt4Enable:T,onGpt4Click:I,usageInfoProps:M,source:L,gpt4Tooltip:B}),d]}),M&&!_&&M.isOutside&&(0,y.jsx)("div",{children:(0,y.jsx)(eW.x,{...M,isNewStyle:!0})})]})}),tG=(0,F.Pi)(function(e){let{vm:t,myPromptsEnable:i,mentionEnable:o,value:a,chatWithMemoEnable:n=!1,showChatWithMemo:r,onMyPromptClick:s,onChange:l,onChatWithMemoClick:c,gpt4Enable:d=!1,onGpt4Click:p,showGpt4:m,usageInfoProps:h,source:g,gpt4Tooltip:u}=e;return((0,Q.useEffect)(()=>{t.updateUpgradeTextVisibility()},[t,d,m,i,o,r]),i||o||r)?(0,y.jsxs)("div",{className:tR.inputActions,onClick:e=>{w.m.ensureTrustedEvent(e),e.stopPropagation()},children:[(0,y.jsxs)("div",{className:tR.inputActionsLeft,children:[i&&(0,y.jsx)(tN.u,{title:t.S.promptLibrary,children:(0,y.jsx)("span",{className:tR.inputActionItem,onClick:e=>{w.m.ensureTrustedEvent(e),null==s||s(),eL.M.createChatToolbarEvent("PromptLibrary")},children:(0,y.jsx)(t_.J,{name:"chatInputPromptTrigger",size:20,color:"currentColor"})})}),o&&(0,y.jsx)(tN.u,{title:t.S.at,children:(0,y.jsx)("span",{className:tR.inputActionItem,onClick:e=>{w.m.ensureTrustedEvent(e),eL.M.createChatToolbarEvent("QuickPrompt"),t.handleAtClick(e)},children:(0,y.jsx)(t_.J,{name:"monicaAt",size:20,color:"currentColor"})})}),(0,y.jsx)(tD,{icon:(0,y.jsx)(t_.J,{name:"a27",size:20,color:"currentColor"}),animationMaxSize:32,iconWrapperClassName:tR.inputActionItem,getInitialValue:()=>a,onUpdate:l,onFinished:e=>{eL.M.createUserBehaviorEvent({eventName:"chat_input_voice_finish"}),l(e),setTimeout(()=>{var e;null===(e=t.textAreaRef)||void 0===e||e.focus({cursor:"end"})})}})]}),(0,y.jsxs)("div",{className:tR.inputActionsRight,children:[!eD.userController.isVipUser&&(0,y.jsx)("div",{className:tR.upgradeBadge,ref:e=>{t.upgradeBadgeEl=e},children:(0,y.jsx)(tF.y,{showText:t.showText})}),m&&(0,y.jsx)(tQ,{source:g,vm:t,gpt4Enable:d,onGpt4Click:p,gpt4Tooltip:u,showGpt4:m,usageInfoProps:h}),r&&(0,y.jsx)(tT.r,{label:(0,y.jsx)(t_.J,{name:"monicaMemo",size:14,color:"var(--theme-icon-quaternary)"}),enabled:n,tooltip:ei.S.Global.components.ChatComponents.VipToolbars.chatWithMemo,size:"small",activeBgColor:"linear-gradient(to left top, rgb(88, 10, 255), rgb(217, 140, 254))",onChange:e=>{null==c||c(e),eL.M.createUserBehaviorEvent({eventName:"vip_toolbar_click",extData:{type:"chat_with_memo",botId:null==h?void 0:h.botId}})}}),h&&!h.isOutside&&!m&&(0,y.jsx)(eW.x,{...h,isNewStyle:!0})]})]}):null}),tQ=(0,F.Pi)(function(e){let{source:t,gpt4Enable:i=!1,onGpt4Click:o,showGpt4:a,usageInfoProps:n,gpt4Tooltip:r}=e;return a?(0,y.jsxs)("div",{className:tR.gpt4Switch,children:[n&&i&&(0,y.jsx)(eW.x,{...n,isNewStyle:!0,simpleStyle:!0},n.usageModule),(0,y.jsx)(tT.r,{label:"Sonnet",enabled:i,tooltip:r,onChange:e=>{if(eL.M.createUserBehaviorEvent({eventName:"vip_toolbar_click",extData:{type:"gpt4",botId:null==n?void 0:n.botId},source:t}),e&&!eD.userController.isVipUser){let{handleCreditsNotEnough:e,isEnough:i}=tP.K.checkCredits({source:"vip_toolbar_".concat(t),module:"genius_bot"});if(!i){e();return}}null==o||o(e)},size:"small"})]}):null}),tJ=(0,F.Pi)(e=>{let{vm:t,disabled:i,usageModule:o,creditSpent:a}=e,n=e=>{w.m.ensureTrustedEvent(e),e.stopPropagation(),t.handleConfirm(t.props.value)};return t.props.isArtist?(0,y.jsx)(tN.u,{title:t.sendBtnTip,children:(0,y.jsxs)(eO.z,{className:tR.artistSend,type:"primary",disabled:i,onClick:n,children:[t.S.send,"credits"===o&&a&&(0,y.jsxs)("div",{className:tR.cost,children:[(0,y.jsx)(t_.J,{name:"highlightStar",size:10,color:"currentColor"}),(0,y.jsx)("span",{children:a})]})]})}):(0,y.jsx)(tN.u,{title:t.sendBtnTip,children:(0,y.jsx)("div",{className:q()(tR.inputMsgBtn,{[tR.active]:!i}),onClick:n,children:(0,y.jsx)(t_.J,{name:"chatInputSend",color:"currentColor",size:18})})})});var tq=i(64863),tK=i(75372),tY=i(26712),tZ=i(25032),tX=i(91433),t$={sharePopoverContent:"share-popover-content--HOPUo",accessTitle:"access-title--vIEc5",radioGroup:"radio-group--qT3FI",shareBtn:"share-btn--Mflmv",searchShare:"search-share--i7OYk",searchShareLink:"search-share-link--TwIgB",isCheck:"is-check--znx6c"};(a=m||(m={})).OnlyMe="onlyMe",a.AnyOne="anyOne";class t0 extends S.PN{get S(){return ei.S.Agent.AgentShare}handleShareConfigChange(e){this.props.controller.updatePublicShare(e)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"isSharePopoverOpen",!1)}}(0,I.gn)([S.SB],t0.prototype,"isSharePopoverOpen",void 0),(0,I.gn)([tB.Fl],t0.prototype,"S",null);let t1=S._Y.createComponent("AgentShare",t0,e=>e.props.controller.botData.botId!==tX.tW.searchAgent?null:(0,y.jsx)(tK.x,{open:e.isSharePopoverOpen,trigger:"click",content:(0,y.jsx)(t2,{vm:e}),placement:"topLeft",useParentContainer:!0,onOpenChange:t=>{e.isSharePopoverOpen=t},children:(0,y.jsx)(eO.z,{type:"gray",size:"medium",icon:(0,y.jsx)(t_.J,{name:"bot-share",size:14,color:"currentColor"}),onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"agent_share_btn_click"})},children:e.S.share})})),t2=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:t$.sharePopoverContent,children:[(0,y.jsx)("div",{className:t$.accessTitle,children:t.S.accessThisResult}),(0,y.jsxs)("div",{className:t$.radioGroup,children:[(0,y.jsx)(tY.Y,{checked:!t.props.controller.publicShare,onClick:()=>{t.handleShareConfigChange(!1)},children:t.S.onlyMe}),(0,y.jsx)(tY.Y,{checked:t.props.controller.publicShare,onClick:()=>{t.handleShareConfigChange(!0)},children:t.S.anyoneWithLink})]}),t.props.controller.searchPageParams?(0,y.jsxs)("div",{className:t$.searchShare,children:[(0,y.jsx)("div",{className:t$.searchShareLink,children:(0,y.jsx)("span",{children:"".concat(w.m.getWebOrigin(),"/share/s?id=").concat(t.props.controller.taskId)})}),(0,y.jsx)(tZ.X,{className:t$.shareBtn,showTooltip:!1,text:"".concat(w.m.getWebOrigin(),"/share/s?id=").concat(t.props.controller.taskId),render:(e,i)=>(0,y.jsx)(eO.z,{type:"gray",icon:e?(0,y.jsx)(t_.J,{name:"check",size:16,color:"currentColor"}):(0,y.jsx)(t_.J,{name:"copy-line",size:16,color:"currentColor"}),onClick:i,className:q()({[t$.isCheck]:e}),children:e?t.S.copied:t.S.copyLink})})]}):(0,y.jsx)(eO.z,{type:"blackOutline",icon:(0,y.jsx)(t_.J,{name:"bot-share",size:16}),className:t$.shareBtn,onClick:()=>{w.m.copyToClipboard("".concat(w.m.getWebOrigin(),"/share/s?id=").concat(t.props.controller.taskId)),ef.M.success(t.S.copiedSuccess,"mainWindow")},children:t.S.shareResult})]})});var t3={agentInput:"agent-input--M9AUB",toolBar:"tool-bar--pwRC6",chatToolbarLeft:"chat-toolbar-left--c2nKM",chatToolbarRight:"chat-toolbar-right--vGNXn",searchInput:"search-input--QrO1k",searchInputTextarea:"search-input-textarea--zx_Rp",searchInputSettings:"search-input-settings--sY9Cs",settingItem:"setting-item--c3FO9",inputSend:"inputSend--b_T6c",active:"active--jCf2q"},t6=i(43939),t5=i(13292),t4=i(97787),t9={convHistoryDrawer:"conv-history-drawer--lYrV7",search:"search--y5aaF",inputWrapper:"input-wrapper--xRBTp",input:"input--WmKAz",actionBtn:"action-btn--lM_XC",favorited:"favorited--zVYE4",convList:"conv-list--_AicR",divider:"divider--dURcD",convItemWrapper:"conv-item-wrapper--zF3oM",convItem:"conv-item--iU0t3",operationGroup:"operation-group--vi_Rq",trash:"trash--mvbsZ",favorite:"favorite--nCV67",edit:"edit--NyMzH",convItemHeader:"conv-item-header--DEkeR",title:"title--cuC7c",titleText:"title-text--Kj96S",tag:"tag--r7mOb",date:"date--Kz8Q5",convItemContent:"conv-item-content--jMPGw",convItemContentText:"conv-item-content-text--jAykm",empty:"empty--UbDsB",emptyContent:"empty-content--uYm8s",emptyText:"empty-text--kA2aa",highlight:"highlight--icFZb",showFavorite:"show-favorite--quLHH"},t7=i(34891),t8=i(72142),ie=i(22810);class it extends S.PN{get S(){return ei.S.Global.modules.Search.SearchHistoryDrawer}onViewCreate(){this.loadStoredData()}async loadStoredData(){let e=!1,t=async(t,i)=>{let o=await t8.u.fetchSessionList({offset:0,limit:this.limit},i);o.sessions&&o.sessions.length>0&&(this.sessionList=o.sessions,this.total=o.total||0,t||(e=!0)),t&&(this.loading=!1)};e||(this.loading=!0),await t(!1,{cacheOnly:!0}),t(!0,{useCache:!1,autoUpdate:!0})}handleSearch(e){this.loading=!0,this.keyword=e,this.fetchConversationListDebounced("refresh")}async fetchConversationList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"refresh";"refresh"===e&&(this.total=0,this.loading=!0,this.sessionList=[]);let t=w.m.genId();this.fetchKey=t;try{let i=null;if(this.keyword?i=await t8.u.fetchSessionList({query:this.keyword,limit:this.limit,offset:this.sessionList.length,isFavorite:this.isFilterFavorites?this.isFilterFavorites:void 0},{autoUpdate:!1}):(i=await t8.u.fetchSessionList({query:this.keyword,limit:this.limit,offset:this.sessionList.length,isFavorite:this.isFilterFavorites?this.isFilterFavorites:void 0},{autoUpdate:!1}),this.total=i.total||0),this.fetchKey!==t)return;"continue"===e?this.sessionList=this.sessionList.concat(i.sessions||[]):this.sessionList=i.sessions||[],this.total=i.total||0}catch(e){ef.M.error(w.m.formatMonicaSdkError(e))}"refresh"===e&&(this.loading=!1)}editSessionTitle(e){this.editTitleLoading=!0,t8.u.updateSessionTitle({sessionId:this.beforeSessionItem.uid,title:e}).then(()=>{ef.M.success(this.S.titleUpdated),this.beforeSessionItem.title=e}).catch(e=>{ef.M.error(w.m.formatMonicaSdkError(e))}).finally(()=>{this.editTitleLoading=!1,this.editConvTitleDialogVisible=!1})}onViewDestroy(){}handleCollectConvIconClick(e){let t=!e.favorite;e.favorite=t,t8.u.toggleSessionFavorite({sessionId:e.uid,favorite:t}).then(()=>{this.sessionList=this.sessionList.map(i=>(i.uid===e.uid&&(i.favorite=t),i))}).catch(e=>{ef.M.error(w.m.formatMonicaSdkError(e))})}handleClearConvIconClick(){(0,t7.B)({content:this.S.clearContent,okText:this.S.delete,okBtnType:"danger",onOk:async()=>await this.handleClearConvDialogConfirm(),insertTarget:"dialogRoot"})}handleDelSessionIconClick(e){this.beforeSessionItem=e,(0,t7.B)({content:this.S.deleteContent,okText:this.S.delete,okBtnType:"danger",onOk:async()=>{let e=await this.handleDelConvDialogConfirm();return console.log(e),e},insertTarget:"dialogRoot"})}handleEditTitleClick(e){this.beforeSessionItem=e,this.editConvTitleDialogVisible=!0}handleEditTitleDialogClose(){this.editConvTitleDialogVisible=!1,this.editTitleLoading=!1}handleClearConvDialogConfirm(){return new Promise((e,t)=>{t8.u.clearAllSessions({}).then(()=>{ef.M.success(this.S.conversationDeleted),this.fetchConversationList("refresh"),e(!0)}).catch(e=>{ef.M.error(w.m.formatMonicaSdkError(e)),t(!1)})})}handleDelConvDialogConfirm(){return new Promise((e,t)=>{t8.u.deleteSession({sessionId:this.beforeSessionItem.uid}).then(()=>{ef.M.success(this.S.conversationDeleted),this.sessionList=this.sessionList.filter(e=>e.uid!==this.beforeSessionItem.uid),this.total-=1,e(!0)}).catch(e=>{ef.M.error(w.m.formatMonicaSdkError(e)),t(!1)})})}async handleSessionClick(e){if(e.oldVersion)window.open(w.m.genUrl("".concat(w.m.getWebOrigin(),"/home/search"),{convId:e.oldVersionConvId||""}),"_blank");else{let t=await e9.W.getIsMonicaSoAuthorized();window.open(ie.q.createMonicaSoUrlBySession({sessionId:e.uid,question:e.title,proEnabled:P.A.searchProEnabled,utm:"monica_search_history",isMonicaSoAuthorized:t}),"_blank")}this.props.onDisposed()}openUrl(e){window.open(e,"_blank","noreferrer")}getPdfName(e){try{let{pathname:t}=new URL(e),i=t.split("/");return i[i.length-1]}catch(e){return console.error(e),""}}constructor(...e){var t;super(...e),t=this,(0,T._)(this,"props",void 0),(0,T._)(this,"keyword",""),(0,T._)(this,"sessionList",[]),(0,T._)(this,"loading",!1),(0,T._)(this,"total",0),(0,T._)(this,"editConvTitleDialogVisible",!1),(0,T._)(this,"editTitleLoading",!1),(0,T._)(this,"isFilterFavorites",!1),(0,T._)(this,"conversationTotal",0),(0,T._)(this,"isInit",!0),(0,T._)(this,"beforeSessionItem",{}),(0,T._)(this,"limit",15),(0,T._)(this,"fetchKey",""),(0,T._)(this,"fetchConversationListDebounced",(0,eb.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"continue";t.fetchConversationList(e)},300))}}(0,I.gn)([S.SB],it.prototype,"keyword",void 0),(0,I.gn)([S.SB],it.prototype,"sessionList",void 0),(0,I.gn)([S.SB],it.prototype,"loading",void 0),(0,I.gn)([S.SB],it.prototype,"total",void 0),(0,I.gn)([S.SB],it.prototype,"editConvTitleDialogVisible",void 0),(0,I.gn)([S.SB],it.prototype,"editTitleLoading",void 0),(0,I.gn)([S.SB],it.prototype,"isFilterFavorites",void 0),(0,I.gn)([S.SB],it.prototype,"conversationTotal",void 0),(0,I.gn)([S.SB],it.prototype,"isInit",void 0),(0,I.gn)([tB.Fl],it.prototype,"S",null);let ii=S._Y.createComponent("SearchHistoryDrawer",it,e=>e.isInit?(0,y.jsx)(t6.d,{visible:!0,onDispose:()=>{e.props.onDisposed()},closeWhenEsc:!0,title:e.S.title,enableHorizontalStyle:!0,children:(0,y.jsxs)("div",{className:t9.convHistoryDrawer,children:[(0,y.jsx)(ia,{vm:e}),(0,y.jsxs)("div",{className:t9.search,children:[(0,y.jsx)("div",{className:t9.inputWrapper,children:(0,y.jsx)(O.I,{className:t9.input,type:"search",placeholder:e.S.search,value:e.keyword,onChange:t=>{e.handleSearch(t)}})}),(0,y.jsx)(tN.u,{placement:"topRight",title:e.S.favoriteConversations,children:(0,y.jsx)("div",{className:t9.actionBtn,onClick:t=>{w.m.ensureTrustedEvent(t),e.isFilterFavorites=!e.isFilterFavorites,e.fetchConversationList("refresh")},children:e.isFilterFavorites?(0,y.jsx)(t_.J,{size:24,name:"monicaFavorited",color:"currentColor",className:t9.favorited}):(0,y.jsx)(t_.J,{size:24,name:"monicaFavorite",color:"currentColor"})})}),(0,y.jsx)(tN.u,{placement:"topRight",title:e.S.clearAllConversations,children:(0,y.jsx)("div",{className:t9.actionBtn,onClick:t=>{w.m.ensureTrustedEvent(t),e.handleClearConvIconClick()},children:(0,y.jsx)(t_.J,{size:24,name:"monicaClear",color:"currentColor"})})})]}),e.loading?(0,y.jsx)(eC.g,{fullScreen:!0}):0===e.sessionList.length?(0,y.jsx)("div",{className:t9.empty,children:(0,y.jsxs)("div",{className:t9.emptyContent,children:[(0,y.jsx)(t_.J,{name:"templateSearchEmpty",size:144}),(0,y.jsx)("div",{className:t9.emptyText,children:e.keyword||e.isFilterFavorites?e.S.noConversationFound:e.S.noConversationHistory})]})}):(0,y.jsx)(ev.v,{hasMore:e.sessionList.length<e.total,className:t9.convList,dataLength:e.sessionList.length,next:()=>{e.fetchConversationList("continue")},loader:(0,y.jsx)(eC.g,{type:"geist"}),children:(0,y.jsx)(io,{vm:e})})]})}):null),io=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsx)("div",{className:t9.historyChats,children:t.sessionList.map((e,i)=>{var o;let a=e.uid===t.props.currentSessionId,n=e.lastMessageAt||e.createdAt;return(0,y.jsxs)(Q.Fragment,{children:[(0,y.jsx)("div",{className:q()(t9.convItemWrapper),onClick:i=>{w.m.ensureTrustedEvent(i),t.handleSessionClick(e)},children:(0,y.jsxs)("div",{className:t9.convItem,children:[(0,y.jsxs)("div",{className:t9.convItemHeader,children:[(0,y.jsxs)("span",{className:t9.title,children:[a&&(0,y.jsx)("span",{className:q()(t9.tag,{[t9.current]:a}),children:t.S.current}),(0,y.jsx)(eu(),{textToHighlight:ex.L.privacyGuard(e.title||eh.Q0),highlightClassName:t9.highlight,searchWords:[t.keyword],className:t9.titleText}),(0,y.jsx)(tN.u,{title:ex.L.privacyGuard(t.S.editConversationTitle),placement:"top",children:(0,y.jsx)("span",{className:t9.edit,onClick:i=>{w.m.ensureTrustedEvent(i),t.handleEditTitleClick(e),i.stopPropagation()},children:(0,y.jsx)(t_.J,{name:"monicaEdit",size:16})})})]}),(0,y.jsx)(tN.u,{title:ex.L.privacyGuard(em.L.formatTime(n)),children:(0,y.jsx)("span",{className:t9.date,children:ex.L.privacyGuard(em.L.fromNow(n))})})]}),(0,y.jsxs)("div",{className:t9.convItemContent,children:[(0,y.jsx)("span",{className:t9.convItemContentText,children:ex.L.privacyGuard(null===(o=e.lastMessage)||void 0===o?void 0:o.slice(0,100))}),(0,y.jsx)(ir,{vm:t,item:e})]})]})}),t.sessionList.length-1!==i&&(0,y.jsx)("div",{className:t9.divider})]},e.uid)})})}),ia=(0,F.Pi)(e=>{let{vm:t}=e;return(0,t4.createPortal)((0,y.jsx)(t5.N,{okLoading:t.editTitleLoading,visible:t.editConvTitleDialogVisible,okText:t.S.ok,cancelText:t.S.cancel,defaultValue:t.beforeSessionItem.title,onOk:e=>{t.editSessionTitle(e)},onCancel:()=>{t.handleEditTitleDialogClose()},message:t.S.inputNewTitle}),f.o.isExtension?H.t.mainWindowDialogRoot:H.t.dialogRoot)}),ir=(0,F.Pi)(e=>{let{vm:t,item:i,hideTrash:o=!1}=e;return(0,y.jsxs)("div",{className:t9.operationGroup,children:[!o&&(0,y.jsx)(tN.u,{placement:"topRight",title:t.S.deleteConversation,align:{offset:[7,-12]},children:(0,y.jsx)("span",{className:t9.trash,onClick:e=>{w.m.ensureTrustedEvent(e),e.stopPropagation(),t.handleDelSessionIconClick(i)},children:(0,y.jsx)(t_.J,{size:16,name:"monicaTrash",color:"currentColor"})})}),(0,y.jsx)(tN.u,{placement:"topRight",title:i.favorite?t.S.unfavorite:t.S.favorite,align:{offset:[7,-12]},children:(0,y.jsx)("span",{className:q()(t9.favorite,{[t9.showFavorite]:i.favoredAt}),onClick:e=>{w.m.ensureTrustedEvent(e),e.stopPropagation(),t.handleCollectConvIconClick(i)},children:i.favorite?(0,y.jsx)(t_.J,{size:16,name:"monicaFavorited",color:"currentColor"}):(0,y.jsx)(t_.J,{size:16,name:"monicaFavorite",color:"currentColor",style:{color:"var(--theme-icon-quaternary)"}})})})]})}),is=H.t.createOpener(ii);var il=i(44922);class ic extends S.PN{get S(){return ei.S.Agent.AgentInput}get controller(){return this.props.controller}onViewCreate(){var e;null===(e=this.controller)||void 0===e||e.eventEmitter.listenBy(this,"focusPrimaryInput",()=>{setTimeout(()=>{var e;null===(e=this.textAreaRef)||void 0===e||e.focus({cursor:"end"})})})}onViewDestroy(){var e;null===(e=this.controller)||void 0===e||e.eventEmitter.stopListenBy(this),tU.f.getProxy(this).disposeAll()}handleHistoryClick(){var e;if(this.controller.isSearchAgent){is({insertTarget:{botId:this.controller.botData.botId,type:"botContainer"}});return}null===(e=this.controller.agentCrossPlatform)||void 0===e||e.handleHistoryClick()}handleConfirm(e){this.controller.ask({question:e,source:"default_view_input"}),this.controller.botData.botId===tX.tW.searchAgent&&eL.M.createUserBehaviorEvent({eventName:"search_agent_follow_up",extData:{taskId:this.controller.taskId}})}handleExampleClick(e){this.controller.ask({question:e,source:"default_view_eg"})}handleInputChange(e){this.controller.setInputValue(e)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"textAreaRef",null),(0,T._)(this,"chatSetting",{open:!1,panelStack:[il.s.Main]}),(0,T._)(this,"changeSettingPanel",e=>{this.chatSetting={...this.chatSetting,...e}})}}(0,I.gn)([S.SB],ic.prototype,"chatSetting",void 0),(0,I.gn)([tB.Fl],ic.prototype,"S",null),(0,I.gn)([tB.Fl],ic.prototype,"controller",null);let id=S._Y.createComponent("AgentInput",ic,e=>(0,y.jsx)("div",{className:q()(t3.agentInput,e.props.wrapperClassName),children:e.controller.searchPageParams?(0,y.jsxs)("div",{className:t3.searchInput,children:[(0,y.jsx)("div",{className:t3.toolBar,children:e.props.toolbarSlot}),(0,y.jsx)(tj.g,{className:t3.searchInputTextarea,value:e.controller.inputValue,autoSize:{minRows:1,maxRows:4},onChange:t=>{e.handleInputChange(t.target.value)},onKeyDown:t=>{(0,en.ZP)(["enter"],t)&&(e.handleConfirm(e.controller.inputValue),t.preventDefault())},disabled:"ended"!==e.controller.taskStatus,placeholder:e.S.placeholder}),(0,y.jsxs)("div",{className:t3.searchInputSettings,children:[(0,y.jsx)("div",{className:t3.settingItem,children:(0,y.jsx)(tk.S,{convId:e.props.controller.taskId,botData:e.controller.botData,inConv:"main"===e.controller.viewData.status,viewData:e.chatSetting,onChange:e.changeSettingPanel})}),(0,y.jsx)(tN.u,{title:e.S.send,children:(0,y.jsx)("div",{className:q()(t3.settingItem,t3.inputSend,{[t3.active]:e.controller.inputValue.trim().length>0}),onClick:()=>{e.handleConfirm(e.controller.inputValue)},children:(0,y.jsx)(t_.J,{name:"chatInputSend",color:"currentColor",size:18})})})]})]}):(0,y.jsx)(tH,{value:e.controller.inputValue,onChange:t=>{e.handleInputChange(t)},onConfirm:t=>{e.handleConfirm(t)},chatToolbar:(0,y.jsx)(ip,{vm:e}),source:"agent_input",showGpt4:!0,gpt4Enable:e.controller.gpt4Enabled,onGpt4Click:t=>{e.controller.mustUseGpt4||P.A.setGpt4Enabled(t)},gpt4Tooltip:e.controller.mustUseGpt4?e.S.onlySupportGpt4:void 0,usageInfoProps:{simpleStyle:!0,usageModule:e.controller.usageModule,botId:e.controller.botData.botId},getTextAreaRef:t=>{e.textAreaRef=t},disabled:"ended"!==e.controller.taskStatus||P.A.isIncognitoMode,placeholder:e.S.placeholder})})),ip=(0,F.Pi)(e=>{var t;let{vm:i}=e;return(0,y.jsxs)("div",{className:q()(t3.toolBar),children:[i.props.toolbarSlot,(0,y.jsxs)("div",{className:t3.chatToolbarLeft,children:[null===(t=i.props.controller.agentCrossPlatform)||void 0===t?void 0:t.botSwitcher,(0,y.jsx)(t1,{controller:i.controller})]}),(0,y.jsxs)("div",{className:t3.chatToolbarRight,children:[(0,y.jsx)(tq.Z,{icon:"chatInputHistory",tooltip:i.S.history,onClick:()=>{i.handleHistoryClick()}}),(0,y.jsx)(tk.S,{convId:i.props.controller.taskId,botData:i.controller.botData,inConv:"main"===i.controller.viewData.status,viewData:i.chatSetting,onChange:i.changeSettingPanel}),(0,y.jsx)(tq.Z,{icon:"chatInputNewChat",tooltip:i.S.newChat,onClick:()=>{i.controller.newTask()}})]})]})});var im={agentDefaultView:"agent-default-view--oA78k",contentWrapper:"content-wrapper--tUC_c",main:"main--NR3XA",inputWrapper:"input-wrapper--vmyYe",sidebarFoldHeader:"sidebar-fold-header--xM133",incognitoModeCard:"incognito-mode-card--_NNVD"};class ih extends S.PN{get S(){return ei.S.Agent.AgentView.AgentDefaultView}get controller(){return this.props.controller}get guides(){return[{title:this.S.guide1Title,content:this.S.guide1Desc},{title:this.S.guide2Title,content:this.S.guide2Desc}]}get welcomeMsg(){var e,t;return null===(t=this.controller.botData.botConfig)||void 0===t?void 0:null===(e=t.homeViewOptions)||void 0===e?void 0:e.welcomeMsg}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],ih.prototype,"S",null),(0,I.gn)([tB.Fl],ih.prototype,"controller",null),(0,I.gn)([tB.Fl],ih.prototype,"guides",null),(0,I.gn)([tB.Fl],ih.prototype,"welcomeMsg",null);let ig=S._Y.createComponent("AgentDefaultView",ih,e=>{let{controller:t}=e.props;return t.botData.botItem?(0,y.jsxs)("div",{className:im.agentDefaultView,style:E.w.calcViewMaxWith("720px"),children:[(0,y.jsx)(tw.l,{botItem:t.botData.botItem,className:q()({[im.sidebarFoldHeader]:eF.J.showSidebarFoldBtn})}),(0,y.jsxs)("main",{className:q()(im.main),children:[(0,y.jsx)("div",{className:im.contentWrapper,children:(0,y.jsx)(tA.x,{botItem:t.botData.botItem})}),P.A.isIncognitoMode&&(0,y.jsx)(tS.g,{source:"agent_default_view",desc:(0,ei.x)(e.S.incognitoModeDesc,{agent:t.botData.botItem.name}),className:im.incognitoModeCard})]}),(0,y.jsx)("div",{className:im.inputWrapper,children:(0,y.jsx)(id,{controller:e.controller})})]}):null});var iu={agentTaskOverviewDialog:"agent-task-overview-dialog--RbcBA",header:"header--EwCOG",main:"main--sHO_1",listItem:"list-item--U4nTa",table:"table--f_vqn",tableItem:"table-item--XVpYB",totalQueries:"total-queries--_zBjk",messageItemWrapper:"message-item-wrapper--BRnrC",dot:"dot--SpTeU",usage:"usage--tljs_",free:"free--lA43G",usageQuota:"usage-quota--zAork",usageIcon:"usage-icon--dReXw"};class iv extends S.PN{get S(){return ei.S.Agent.AgentTaskOverview}get totalQuota(){return this.costInfoList.reduce((e,t)=>e+t.cost,0)}onViewCreate(){let e=this.props.controller.messageList.slice(0,this.props.msgIndex+2);for(let t=e.length-1;t>=0;t--){let i=e[t];if("user_question"===i.type&&t!==e.length-1)break;"stage"===i.type&&i.data.costInfo&&(this.costInfoList.unshift(i.data.costInfo),"default"!==i.data.costInfo.model&&(this.gpt4Enabled=!0))}}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"gpt4Enabled",!1),(0,T._)(this,"costInfoList",[])}}(0,I.gn)([S.SB],iv.prototype,"gpt4Enabled",void 0),(0,I.gn)([S.SB],iv.prototype,"costInfoList",void 0),(0,I.gn)([tB.Fl],iv.prototype,"S",null),(0,I.gn)([tB.Fl],iv.prototype,"totalQuota",null);let iC=S._Y.createComponent("AgentTaskOverviewDialog",iv,e=>{let{onDisposed:t,insertTarget:i}=e.props;return(0,y.jsxs)(W.u,{className:iu.agentTaskOverviewDialog,onDispose:()=>{t()},fixed:"dialogRoot"===i,children:[(0,y.jsx)("header",{className:iu.header,children:e.S.label}),(0,y.jsxs)("div",{className:iu.main,children:[(0,y.jsxs)("div",{className:iu.listItem,style:{marginBottom:8},children:[(0,y.jsxs)("span",{children:[e.S.gpt4Enabled,":"]}),(0,y.jsxs)("span",{children:[e.gpt4Enabled?e.S.yes:e.S.no,"\xa0\xa0\xa0\xa0"]})]}),(0,y.jsx)("div",{className:iu.listItem,style:{marginBottom:4},children:(0,y.jsxs)("span",{children:[e.S.stepsInThisTask,":"]})}),(0,y.jsxs)("div",{className:iu.table,children:[e.costInfoList.map((t,i)=>(0,y.jsxs)("div",{className:iu.tableItem,children:[(0,y.jsxs)("span",{className:iu.messageItemWrapper,children:[(0,y.jsx)("span",{className:iu.dot}),t.message]}),(0,y.jsx)(iy,{vm:e,quota:t.cost})]},i)),(0,y.jsxs)("div",{className:q()(iu.tableItem,iu.totalQueries),children:[(0,y.jsx)("span",{children:e.S.totalQueries}),(0,y.jsx)(iy,{vm:e,quota:e.totalQuota})]})]})]})]})}),ix=H.t.createOpener(iC),iy=(0,F.Pi)(e=>{let{vm:t,quota:i}=e;return(0,y.jsxs)("div",{className:q()(iu.usage,{[iu.free]:!t.gpt4Enabled}),children:[(0,y.jsx)(t_.J,{color:"currentColor",name:"lighting",size:10,className:iu.usageIcon}),(0,y.jsx)("span",{className:iu.usageQuota,children:i})]})});class ib extends S.PN{get controller(){return this.props.controller}get S(){return ei.S.Agent.AgentTaskOverview}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],ib.prototype,"someState",void 0),(0,I.gn)([tB.Fl],ib.prototype,"S",null);let iw=S._Y.createComponent("AgentTaskOverview",ib,e=>(0,y.jsxs)("span",{className:"agent-task-overview--_Oj5e",onClick:()=>{ix({controller:e.controller,insertTarget:"mainWindow",msgIndex:e.props.msgIndex})},children:[(0,y.jsx)(t_.J,{name:"info-pure",size:16,color:"var(--theme-icon-secondary)"}),e.S.label]}));var iS={agentReplyOperations:"agent-reply-operations--K2dZw",replyFeedbacks:"reply-feedbacks--AWxB2",replyFeedbackItem:"reply-feedback-item--aOCm0"};class iA extends S.PN{get controller(){return this.props.controller}get S(){return ei.S.Agent.AgentReplyOperations}onViewCreate(){}onViewDestroy(){}sendFeedback(e){let t=this.controller.messageList[this.props.msgIndex],i=e?"like":"unlike";i!==this.likeStatus&&(this.likeStatus=i,t&&(eL.M.feedbackGenResult({like:e,groupId:this.controller.taskId,targetId:"".concat(t.id),targetType:"agent_item:".concat(this.controller.botData.botId)}),this.controller.botData.botId===tX.tW.searchAgent&&eL.M.createUserBehaviorEvent({eventName:"search_agent_feedback",extData:{taskId:this.controller.taskId,like:e}})))}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"likeStatus","default")}}(0,I.gn)([S.SB],iA.prototype,"likeStatus",void 0),(0,I.gn)([tB.Fl],iA.prototype,"S",null);let ij=S._Y.createComponent("AgentReplyOperations",iA,e=>(0,y.jsxs)("div",{className:iS.agentReplyOperations,children:[(0,y.jsxs)("div",{className:iS.replyFeedbacks,children:[(0,y.jsx)(tN.u,{title:e.S.like,children:(0,y.jsx)("div",{className:iS.replyFeedbackItem,style:{paddingLeft:6},onClick:()=>{e.sendFeedback(!0)},children:"like"===e.likeStatus?(0,y.jsx)(t_.J,{name:"thumbUpFilled",size:16,color:"var(--theme-icon-brand)"}):(0,y.jsx)(t_.J,{color:"currentColor",name:"thumbup",size:16})})}),(0,y.jsx)(tN.u,{title:e.S.dislike,children:(0,y.jsx)("div",{className:iS.replyFeedbackItem,style:{paddingRight:6},onClick:()=>{e.sendFeedback(!1)},children:"unlike"===e.likeStatus?(0,y.jsx)(t_.J,{name:"thumbDownFill",color:"var(--theme-icon-brand)",size:16}):(0,y.jsx)(t_.J,{color:"currentColor",name:"thumbdown",size:16})})})]}),!e.props.controller.searchPageParams&&(0,y.jsx)(iw,{controller:e.controller,msgIndex:e.props.msgIndex})]}));var ik=i(49804);class iN extends S.PN{get S(){return ei.S.Agent.AgentPaused}get controller(){return this.props.controller}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"loading",!1)}}(0,I.gn)([S.SB],iN.prototype,"loading",void 0),(0,I.gn)([tB.Fl],iN.prototype,"S",null);let i_=S._Y.createComponent("AgentPaused",iN,e=>"paused"!==e.controller.taskStatus?null:(0,y.jsxs)("div",{className:"agent-paused--j1v_D",children:[(0,y.jsxs)("span",{className:"title--xS1zz",children:["* ",e.S.title]}),(0,y.jsxs)("div",{className:"operations--wIcN7",children:[(0,y.jsx)(eO.z,{type:"primaryOutline",shape:"round",onClick:()=>{e.loading=!0,e.controller.continue()},loading:e.loading,icon:(0,y.jsx)(t_.J,{name:"agentPlay",size:16}),children:e.S.continueTask}),(0,y.jsx)(iw,{controller:e.controller,msgIndex:e.controller.messageList.length-1})]})]}));var iT={agentStage:"agent-stage--PNvlK",title:"title--syEvP",left:"left--gzIDM",icon:"icon--tVhC5",error:"error--Z0rnz",searchAgent:"search-agent--ZmQGh"};class iI extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],iI.prototype,"someState",void 0);let iM=S._Y.createComponent("AgentStage",iI,e=>{let{loading:t,title:i,icon:o="",type:a="default",children:n,className:r,titleRight:s,isError:l}=e.props,c=t||o||"searchAgent"===a;return(0,y.jsxs)("div",{className:q()(iT.agentStage,{[iT.error]:l,[iT.searchAgent]:"searchAgent"===a},r),children:[i&&(0,y.jsxs)("div",{className:iT.title,children:[(0,y.jsxs)("div",{className:iT.left,children:[c&&(0,y.jsx)("span",{className:iT.icon,children:t?(0,y.jsx)(eC.g,{size:16}):o?(0,y.jsx)(t_.J,{name:o,size:16,color:"currentColor"}):"searchAgent"===a?l?(0,y.jsx)(t_.J,{name:"exclamation",size:16,color:"var(--theme-function-error)"}):(0,y.jsx)(t_.J,{name:"monicaSuccess",size:16,color:"var(--theme-icon-brand)"}):null}),i]}),s]}),n]})});var iL=i(11430),iB=i(11989),iE={agentCard:"agent-card--IH394",title:"title--k3pxW",footer:"footer--IYWHo",left:"left--VtXgU"};class iD extends S.PN{get hasLoading(){return this.okLoading||this.cancelLoading||this.otherLoading}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"okLoading",!1),(0,T._)(this,"cancelLoading",!1),(0,T._)(this,"otherLoading",!1)}}(0,I.gn)([S.SB],iD.prototype,"okLoading",void 0),(0,I.gn)([S.SB],iD.prototype,"cancelLoading",void 0),(0,I.gn)([S.SB],iD.prototype,"otherLoading",void 0),(0,I.gn)([tB.Fl],iD.prototype,"hasLoading",null);let iP=S._Y.createComponent("AgentCard",iD,e=>{let{title:t,footer:i,className:o,children:a}=e.props;return(0,y.jsxs)("div",{className:q()(iE.agentCard,o),children:[t&&(0,y.jsx)("div",{className:iE.title,children:t}),a,i&&(0,y.jsxs)("div",{className:iE.footer,children:[(0,y.jsxs)("div",{className:iE.left,style:{justifyContent:"left"===i.direction?"flex-start":"flex-end"},children:[i.otherText&&(0,y.jsx)(eO.z,{type:"gray",onClick:()=>{var t;e.otherLoading=!0,null===(t=i.onOther)||void 0===t||t.call(i)},disabled:e.hasLoading,loading:e.otherLoading,children:i.otherText}),i.cancelText&&(0,y.jsx)(eO.z,{type:"gray",onClick:()=>{var t;e.cancelLoading=!0,null===(t=i.onCancel)||void 0===t||t.call(i)},disabled:e.hasLoading,loading:e.cancelLoading,children:i.cancelText}),i.okText&&(0,y.jsx)(eO.z,{type:"primary",onClick:()=>{var t;e.okLoading=!0,null===(t=i.onOk)||void 0===t||t.call(i)},disabled:e.hasLoading,loading:e.okLoading,children:i.okText})]}),i.customRightNode]})]})});var iF={agentSaysContent:"agent-says-content--RgVT8",formItem:"form-item--QXmM1",formItemLabel:"form-item-label--aNrVL",footer:"footer--jQjBD",skip:"skip--u8Dcc",continue:"continue--wVWmA"};class iR extends S.PN{get S(){return ei.S.Agent.AgentCard.AgentSays}get controller(){return this.props.controller}onViewCreate(){}onViewDestroy(){}handleConfirm(){var e;let t=this.props.message.data;null===(e=this.props.controller.socketIo)||void 0===e||e.sendMsg({type:"client_action",skillResult:{missionId:t.missionId,skillName:t.skillName,meta:t.meta,data:{answers:this.getAnswers()}}}),this.props.controller.unlockAutoScroll()}handleSkip(){this.handleConfirm()}getAnswers(){return(this.props.message.data.questions||[]).map((e,t)=>[...this.askResList[t]||[],this.inputValues[t]].filter(e=>e))}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"askResList",[]),(0,T._)(this,"inputValues",[]),(0,T._)(this,"continueLoading",!1),(0,T._)(this,"skipLoading",!1)}}(0,I.gn)([S.SB],iR.prototype,"askResList",void 0),(0,I.gn)([S.SB],iR.prototype,"inputValues",void 0),(0,I.gn)([S.SB],iR.prototype,"continueLoading",void 0),(0,I.gn)([S.SB],iR.prototype,"skipLoading",void 0),(0,I.gn)([tB.Fl],iR.prototype,"S",null),(0,I.gn)([tB.Fl],iR.prototype,"controller",null);let iV=S._Y.createComponent("AgentSays",iR,e=>e.controller.isSearchAgent?(0,y.jsxs)(iM,{type:"searchAgent",icon:"ssExplain",title:(0,ei.x)(e.S.title,{botName:e.controller.botName}),children:[(0,y.jsx)(iU,{vm:e}),(0,y.jsxs)("div",{className:iF.footer,children:[(0,y.jsx)(eO.z,{type:"gray",onClick:()=>{e.skipLoading=!0,e.handleSkip()},className:iF.skip,disabled:e.skipLoading||e.continueLoading,loading:e.skipLoading,children:e.S.skip}),(0,y.jsx)(eO.z,{type:"primary",onClick:()=>{e.continueLoading=!0,e.handleConfirm()},className:iF.continue,disabled:e.continueLoading||e.skipLoading,loading:e.continueLoading,children:e.S.continue})]})]}):(0,y.jsx)(iP,{title:(0,ei.x)(e.S.title,{botName:e.controller.agentSourceMarker}),footer:{okText:e.S.continue,cancelText:e.S.skip,onCancel:()=>{e.handleSkip()},onOk:()=>{e.handleConfirm()}},children:(0,y.jsx)(iU,{vm:e})})),iU=(0,F.Pi)(e=>{let{vm:t}=e,i=t.props.message.data.questions||[];return(0,y.jsx)("div",{className:iF.agentSaysContent,children:i.map((e,i)=>{let o=e.options||[],a=e.placeholder?e.placeholder:o.length>0?t.S.orInputAnything:t.S.plzInput;return(0,y.jsxs)("div",{className:iF.formItem,children:[(0,y.jsxs)("div",{className:iF.formItemLabel,children:[i+1,". ",e.q]}),(0,y.jsx)(iL.c,{options:o.map(e=>({key:e,label:e})),value:t.askResList[i]||[],onChange:e=>{t.askResList[i]=e}}),(0,y.jsx)(tj.g,{className:iF.textarea,placeholder:a,value:t.inputValues[i]||"",onChange:e=>{t.inputValues[i]=e.target.value},autoSize:{minRows:1,maxRows:3},onKeyDown:e=>{iB.t.isHotkey(e,["enter"])&&(e.preventDefault(),t.handleConfirm())}})]},e.q)})})});var iz=i(51782),iO={actionBtn:"action-btn--PAM_O",active:"active--pTk2M"},iW=i(31226),iH=i(90230);class iG extends S.PN{get S(){return ei.S.Agent.AgentMessageToolbar}onViewCreate(){}onViewDestroy(){}handleEditAsText(){let{controller:e,textContent:t}=this.props;(0,iW.g)({content:t,insertTarget:{botId:e.botData.botId,type:"botContainer"}})}async handleSaveToMemo(){let{textContent:e}=this.props,t=await iH.a.createTextMemo({isMarkdown:!0,content:e});iH.a.saveToMemoSuccess(t.item.uid)}handleCopy(){this.copied||(this.copyTimer&&clearTimeout(this.copyTimer),w.m.copyToClipboard(this.props.textContent),this.copied=!0,this.copyTimer=setTimeout(()=>{this.copied=!1},5e3))}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"copyTimer",null),(0,T._)(this,"copied",!1)}}(0,I.gn)([S.SB],iG.prototype,"copied",void 0),(0,I.gn)([tB.Fl],iG.prototype,"S",null);let iQ=S._Y.createComponent("AgentMessageToolbar",iG,e=>{let{questionMode:t}=e.props,i={placement:"bottom",mouseEnterDelay:.3};return(0,y.jsxs)(y.Fragment,{children:[!t&&(0,y.jsx)(tN.u,{title:e.S.editAsText,...i,children:(0,y.jsx)("div",{className:iO.actionBtn,onClick:()=>{e.handleEditAsText()},children:(0,y.jsx)(t_.J,{name:"monicaEdit",size:16,color:"currentColor"})})}),(0,y.jsx)(iz.f,{className:iO.actionBtn,onClick:async()=>{await e.handleSaveToMemo()}}),(0,y.jsx)(tN.u,{title:e.copied?e.S.copied:e.S.copy,...i,children:(0,y.jsx)("div",{className:q()(iO.actionBtn,{[iO.active]:e.copied}),onClick:()=>{e.handleCopy()},children:e.copied?(0,y.jsx)(t_.J,{name:"monicaSuccess",size:16,color:"currentColor"}):(0,y.jsx)(t_.J,{name:"monicaCopy",size:16,color:"currentColor"})})})]})});var iJ=i(63623),iq={agentSummaryDialog:"agent-summary-dialog--tX75r",header:"header--G9z4M",main:"main--F7c2K",content:"content--ZN9hZ",footer:"footer--BiR99",copy:"copy--Y9w70"};class iK extends S.PN{get S(){return ei.S.Agent.AgentSummaryDialog}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],iK.prototype,"someState",void 0),(0,I.gn)([tB.Fl],iK.prototype,"S",null);let iY=S._Y.createComponent("AgentSummaryDialog",iK,e=>{let{onDisposed:t,summary:i,title:o,useMarkdown:a,controller:n}=e.props;return(0,y.jsxs)(W.u,{className:iq.agentSummaryDialog,onDispose:()=>{t()},fixed:"dialogRoot"===e.props.insertTarget,children:[(0,y.jsx)("header",{className:iq.header,children:o||e.S.summary}),(0,y.jsxs)("main",{className:iq.main,children:[a?(0,y.jsx)(iJ.U,{agentData:{sourceMarker:n.agentSourceMarker,onShowSource:e=>{n.handleClickSource(e)}},className:iq.content,children:n.transformAnswer(i)}):(0,y.jsx)("div",{className:iq.content,children:i}),(0,y.jsx)("footer",{className:iq.footer,children:(0,y.jsx)(tZ.X,{showTooltip:!1,text:n.transformAnswer(i,!0),render:(e,t)=>(0,y.jsxs)("span",{className:iq.copy,onClick:()=>{t()},children:[e?(0,y.jsx)(t_.J,{name:"check",size:16}):(0,y.jsx)(t_.J,{name:"copy-line",size:16,color:"currentColor"}),e?ei.S.Agent.AgentMessageToolbar.copied:ei.S.Agent.AgentMessageToolbar.copy]})})})]})]})}),iZ=H.t.createOpener(iY);var iX={agentDraft:"agent-draft--raTAG",header:"header--i9w0h",title:"title--tdwxV",copy:"copy--pLfv0",content:"content--GJlpm"};class i$ extends S.PN{get S(){return ei.S.Agent.AgentDraft}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"container",null)}}(0,I.gn)([tB.Fl],i$.prototype,"S",null);let i0=S._Y.createComponent("AgentDraft",i$,e=>{let{content:t,controller:i,title:o="",useMarkdown:a=!0,loading:n=!1,finished:r=!1}=e.props;return(0,Q.useEffect)(()=>{if(e.container){let{scrollHeight:t,clientHeight:i}=e.container;r?e.container.scrollTop=0:e.container.scrollTop=t-i}},[t,e,r]),(0,y.jsxs)("div",{className:iX.agentDraft,onClick:()=>{iZ({insertTarget:"mainWindow",summary:t,title:o||e.S.draft,useMarkdown:a,controller:i})},children:[(0,y.jsxs)("div",{className:iX.header,children:[(0,y.jsxs)("span",{className:iX.title,children:[e.S.draft,o?":".concat(o):""]}),(0,y.jsx)(tZ.X,{render:(e,t)=>(0,y.jsx)("div",{className:q()(iX.copy),onClick:e=>{e.stopPropagation(),t()},children:e?(0,y.jsx)(t_.J,{name:"check",size:16}):(0,y.jsx)(t_.J,{name:"copy",size:16,color:"currentColor"})}),text:i.transformAnswer(t,!0)})]}),(0,y.jsx)("span",{className:iX.content,children:a?(0,y.jsx)(iJ.U,{className:iX.markdown,agentData:{sourceMarker:i.agentSourceMarker,onShowSource:e=>{i.handleClickSource(e)}},loading:n,children:i.transformAnswer(t)}):t})]})});var i1={markdown:"markdown--a752x",isMonicaSearch:"is-monica-search--p8mzG"};class i2 extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],i2.prototype,"someState",void 0);let i3=S._Y.createComponent("AgentText",i2,e=>{let{controller:t,text:i="",loading:o,textType:a="normal",useMarkdown:n=!0,draftTitle:r,finished:s,position:l,searchResults:c,bubbleClassName:d,getContainer:p,getParentNode:m}=e.props;return"draft"===a?(0,y.jsx)(i0,{controller:t,title:r,content:i,loading:o,useMarkdown:n,finished:s}):(0,y.jsx)(ik.I,{noShadow:!0,position:l,getContainer:e=>{null==p||p(e)},className:d,getParentScrollContainer:m,floatTools:(0,y.jsx)(iQ,{controller:t,textContent:t.transformAnswer(i,!0,c)}),children:n?(0,y.jsx)(iJ.U,{className:q()(i1.markdown,{[i1.isMonicaSearch]:e.props.controller.searchPageParams}),agentData:{searchResults:c,sourceMarker:t.agentSourceMarker,onShowSource:e=>{t.handleClickSource(e,c)}},loading:o,children:t.transformAnswer(i,!1,c)}):i})});class i6 extends S.PN{get S(){return ei.S.Agent.AgentSources.AgentViewAll}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],i6.prototype,"someState",void 0),(0,I.gn)([tB.Fl],i6.prototype,"S",null);let i5=S._Y.createComponent("AgentViewAll",i6,e=>(0,y.jsxs)("span",{className:"agent-view-all--CVKZ_",onClick:()=>{e.props.onClick()},children:[e.S.viewAll,(0,y.jsx)(t_.J,{name:"optionArrowRight",color:"currentColor",size:12})]}));var i4={agentSourcesDialog:"agent-sources-dialog--CZDA1",header:"header--p9Q2R",sources:"sources--KAO7B",sourceItem:"source-item--PWivl",title:"title--Ghwom",description:"description--_YNqc",hostWrapper:"host-wrapper--GWUUG",logo:"logo--aSVhg"};class i9 extends S.PN{get S(){return ei.S.Agent.AgentSources.AgentSourcesDialog}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],i9.prototype,"S",null);let i7=S._Y.createComponent("AgentSourcesDialog",i9,e=>(0,y.jsxs)(W.u,{className:i4.agentSourcesDialog,onDispose:()=>{e.props.onDisposed()},fixed:"dialogRoot"===e.props.insertTarget,children:[(0,y.jsx)("header",{className:i4.header,children:e.S.allSources}),(0,y.jsx)("div",{className:i4.sources,children:e.props.sources.map((t,i)=>{let o=new URL(t.url).hostname,a=e.props.controller.iconMap[o]||t.favicon;return(0,y.jsxs)("div",{className:i4.sourceItem,onClick:()=>{window.open(t.url,"_blank")},children:[(0,y.jsx)("div",{className:i4.title,children:t.title}),(0,y.jsx)("div",{className:i4.description,children:t.snippet}),(0,y.jsxs)("div",{className:i4.hostWrapper,children:[a&&(0,y.jsx)(te.E,{className:i4.logo,src:a,alt:""}),t.siteName," \xb7 #",t.idx]})]},i)})})]})),i8=H.t.createOpener(i7);class oe extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],oe.prototype,"someState",void 0);let ot=S._Y.createComponent("AgentTags",oe,e=>{let{tags:t,maxLength:i,breakAll:o,type:a="default"}=e.props;return 0===t.length?null:(0,y.jsx)("div",{className:q()("agent-tags--qVDZq",{"search-agent--w1Wku":"searchAgent"===a}),style:{wordBreak:o?"break-all":void 0},children:t.map((e,t)=>{let o=e;return i&&(o=o.length>i?"".concat(o.slice(0,i),"..."):o),(0,y.jsx)("span",{className:"tag-item--iUEFD",children:o},e+t)})})});class oi extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],oi.prototype,"someState",void 0);let oo=S._Y.createComponent("AgentAttachment",oi,e=>{let{attachments:t}=e.props;return(0,y.jsx)("div",{className:"agent-attachment--KY8yU",children:t.map((e,t)=>(0,y.jsxs)("div",{className:"item--Daf7M",onClick:()=>{"open"===e.action?window.open(e.url,"_blank"):"download"===e.action&&w.m.downloadFile(e.url,e.title)},children:[(0,y.jsx)(te.E,{src:e.cover,alt:""}),(0,y.jsxs)("div",{className:"info--aaH8s",children:[(0,y.jsx)("span",{className:"title--Wt5Jd",children:e.title}),(0,y.jsx)("span",{className:"desc--V8RMH",children:e.desc})]})]},e.title+t))})});var oa={agentSources:"agent-sources--VhGPH",column:"column--nv7xs",sourceItem:"source-item--Bnuyz",title:"title--syIMa",footer:"footer--EKox6",logo:"logo--rXk_t",host:"host--pGDeB"};class on extends S.PN{get hasMore(){let{sources:e,renderCount:t=0}=this.props;return e.length>t}get columns(){let{column:e,sources:t,renderCount:i}=this.props,o=t;i&&(o=t.slice(0,i));let a=[];for(let t=0;t<o.length;t++){let i=t%e;a[i]||(a[i]={id:w.m.genId(),data:[]});let n=o[t];a[i].data.push({...n})}return a}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],on.prototype,"someState",void 0),(0,I.gn)([tB.Fl],on.prototype,"hasMore",null),(0,I.gn)([tB.Fl],on.prototype,"columns",null);let or=S._Y.createComponent("AgentSources",on,e=>(0,y.jsx)("div",{className:oa.agentSources,children:e.columns.map((t,i)=>(0,y.jsx)("div",{className:oa.column,style:{maxWidth:"".concat(Math.floor(100/e.props.column),"%")},children:t.data.map((i,o)=>{let a=new URL(i.url).hostname,n=e.props.controller.iconMap[a]||i.favicon;return(0,y.jsxs)("div",{className:oa.sourceItem,onClick:()=>{window.open(i.url,"_blank"),e.props.controller.botData.botId===tX.tW.searchAgent&&eL.M.createUserBehaviorEvent({eventName:"agent_source_click",extData:{url:i.url}})},children:[(0,y.jsx)("div",{className:oa.title,children:i.title}),(0,y.jsxs)("div",{className:oa.footer,children:[n&&(0,y.jsx)(te.E,{src:n,className:oa.logo,alt:""}),(0,y.jsx)("span",{className:oa.host,children:i.siteName})]})]},t.id+o)})},t.id+i))}));function os(e){return(0,G.t)(t=>{if(e.checkIsSystemScroll())return;let i=t.target,o=i.scrollTop,a=i.scrollHeight;o+i.clientHeight>=a-25?e.unlockAutoScroll():e.lockAutoScroll()})}var ol=i(86609),oc={agentMainView:"agent-main-view--eO1Bo",main:"main--fNGKH",inner:"inner--TPhzW",taskOperations:"task-operations--dOBOa",inputWrapper:"input-wrapper--FyvHG",sidebarFoldHeader:"sidebar-fold-header--L4I1q"};class od extends S.PN{get controller(){return this.props.controller}get S(){return ei.S.Agent.AgentView.AgentMainView}get taskOperationVisible(){if(this.controller.shouldHideInput)return!1;let e=this.controller.lastMsg;return((null==e?void 0:e.type)!=="client_action"||"ask"!==e.data.action)&&("running"===this.controller.taskStatus||"waiting"===this.controller.taskStatus)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],od.prototype,"controller",null),(0,I.gn)([tB.Fl],od.prototype,"S",null),(0,I.gn)([tB.Fl],od.prototype,"taskOperationVisible",null);let op=S._Y.createComponent("AgentMainView",od,e=>{let t=os(e.controller);return e.controller.loadTaskLoading?(0,y.jsx)(eC.g,{fullScreen:!0}):(0,y.jsxs)("div",{className:oc.agentMainView,children:[(0,y.jsx)(tw.l,{botItem:e.controller.botData.botItem,className:q()({[oc.sidebarFoldHeader]:eF.J.showSidebarFoldBtn,...E.w.calcViewMaxWith("720px")})}),(0,y.jsx)("main",{className:q()(oc.main),ref:t=>{e.controller.setScrollableContainer(t)},onScroll:i=>{let{scrollHeight:o,scrollTop:a,clientHeight:n}=i.currentTarget;a+n>=o-2?e.controller.setShowScrollBtn(!1):e.controller.setShowScrollBtn(!0),t(i)},style:{paddingBottom:e.taskOperationVisible?54:28},children:(0,y.jsxs)("div",{className:oc.inner,children:[e.controller.messageList.map((t,i)=>{let o="ended"===e.controller.taskStatus,a=e.controller.messageList[i+1],n=a&&"user_question"===a.type,r="user_question"===t.type,s="error"===t.type,l=t.finished&&!r&&!s&&(n||!a&&o);return(0,y.jsxs)(Q.Fragment,{children:[(0,y.jsx)(om,{vm:e,message:t,index:i},t.id),l&&(0,y.jsx)(ij,{controller:e.controller,msgIndex:i})]},t.id)}),e.controller.showLoading&&(0,y.jsx)(ik.I,{position:"left",noShadow:!0,children:(0,y.jsx)(eC.g,{type:"geist"})}),(0,y.jsx)(i_,{controller:e.controller},"paused"===e.controller.taskStatus?1:2)]})}),(0,y.jsx)(ol.T,{show:e.controller.scrollBtnVisible,onClick:()=>{e9.W.createUserBehaviorEvent({eventName:"agent_scroll_to_bottom_btn_click"}),e.controller.forceScrollToBottom()}}),!e.controller.shouldHideInput&&(0,y.jsx)("div",{className:oc.inputWrapper,children:(0,y.jsx)(id,{controller:e.controller,toolbarSlot:(0,y.jsx)(oh,{vm:e})})})]})}),om=(0,F.Pi)(e=>{let{vm:t,message:i,index:o}=e,a=!t.controller.findNextOne(o);if("stage"===i.type&&i.data.hidden)return null;if("error"===i.type)return(0,y.jsx)(iM,{isError:!0,title:i.data.message,icon:"quickActionClose"});if("client_action"===i.type)return a&&"ask"===i.data.action&&i.data.questions?(0,y.jsx)(iV,{message:i,controller:t.controller}):null;if("user_question"===i.type){let e=i.data;return(0,y.jsx)(ik.I,{noShadow:!0,position:"right",getParentScrollContainer:()=>t.controller.getScrollableContainer(),floatTools:(0,y.jsx)(iQ,{controller:t.controller,textContent:e,questionMode:!0}),children:e})}if("text"===i.type){let e=!i.finished&&"ended"!==t.controller.taskStatus,o=i.data;return(0,y.jsx)(i3,{position:"left",controller:t.controller,loading:e,text:o,finished:i.finished,getParentNode:()=>t.controller.getScrollableContainer()})}if("stage"===i.type){let e=i.data,o="horizontal"===ex.L.mainWindowMode?4:2,n=2*o,r=e.searchResults&&e.searchResults.length>n,s=a&&!i.finished;return(0,y.jsxs)(iM,{title:e.message,icon:e.icon,loading:s,titleRight:r&&(0,y.jsx)(i5,{onClick:()=>{i8({insertTarget:"mainWindow",sources:e.searchResults,controller:t.controller})}}),children:[e.tags&&(0,y.jsx)(ot,{tags:e.tags}),e.attachments&&(0,y.jsx)(oo,{attachments:e.attachments}),e.searchResults&&(0,y.jsx)(or,{column:o,renderCount:n,controller:t.controller,sources:e.searchResults}),e.text&&(0,y.jsx)(i3,{position:"left",controller:t.controller,loading:s,text:e.text,textType:e.textType,draftTitle:e.draftTitle,useMarkdown:e.isMarkdown,finished:i.finished,getParentNode:()=>t.controller.getScrollableContainer()})]})}return null}),oh=(0,F.Pi)(e=>{let{vm:t}=e;return t.taskOperationVisible?(0,y.jsx)("div",{className:oc.taskOperations,children:(0,y.jsx)(eO.z,{type:"gray",icon:(0,y.jsx)(t_.J,{name:"agentStopNew",size:16,color:"currentColor"}),onClick:()=>{t.controller.stop()},loading:t.controller.stopTaskLoading,children:t.S.stop})}):null});var og={agentView:"agent-view--nZoAK",hide:"hide--cDEZh",fixedFoldBtn:"fixed-fold-btn--U9Cg4"};class ou extends S.PN{get S(){return ei.S.Agent.AgentView}get controller(){return this.props.controller}onViewCreate(){if(f.o.isDesktop)return;let e=w.m.getUrlParams();e.convId&&(this.props.controller.loadTask(e.convId),history.replaceState(null,"",location.pathname))}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],ou.prototype,"someState",void 0),(0,I.gn)([tB.Fl],ou.prototype,"S",null),(0,I.gn)([tB.Fl],ou.prototype,"controller",null);var ov=i(28371),oC=i(35850);class ox extends S.PN{get S(){return ei.S.Global.modules.Search.SearchProSwitch}onViewCreate(){var e,t;null===(e=(t=this.props).getVm)||void 0===e||e.call(t,this)}onViewDestroy(){}async handleSwitchChange(e){if(e){if(!eD.userController.isLogin){var t,i;return null===(t=(i=this.props).goToLogin)||void 0===t||t.call(i),!1}if(!eD.userController.isVipUser)return eD.userController.canResubscribe?(0,ov.j)({insertTarget:f.o.isExtension?"mainWindow":"dialogRoot"}):(0,oC.$)({insertTarget:f.o.isExtension?"mainWindow":"dialogRoot",type:"proSearch",source:"search_pro_upgrade_dialog_click_upgrade"}),!1}return tV.ll.set("searchProEnabled",e),!0}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],ox.prototype,"S",null);let oy=S._Y.createComponent("SearchProSwitch",ox,e=>(0,y.jsx)(tK.x,{placement:"bottomRight",content:(0,y.jsx)(ob,{vm:e}),children:(0,y.jsxs)("div",{className:"search-pro-switch--ota7d",style:{...e.props.style},onClick:()=>{e.handleSwitchChange(!P.A.searchProEnabled)},children:[(0,y.jsx)(tT.r,{disableTransition:e.props.disableTransition,enabled:P.A.searchProEnabled,size:"small",roundWidth:26,onChange:t=>{e.handleSwitchChange(t)}}),"Pro"]})})),ob=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:"popover-content--qCPeX",children:[(0,y.jsx)("div",{className:"title--k8r28",children:t.S.title}),(0,y.jsx)("div",{className:"desc--FxeqO",children:t.S.desc})]})});var of=i(92386),ow=i(81131),oS={searchAgentDefaultView:"search-agent-default-view--bZENM",inner:"inner--M20Wp",header:"header--zpwVR",title:"title--X94nW",history:"history--o4fHA",inputContainer:"input-container--LzOm5",input:"input--emcyv",textareaWrap:"textarea-wrap--M3uBq",searchIcon:"search-icon--EYssS",textarea:"textarea--stxWD",inputTools:"input-tools--Rq5p4",suggestion:"suggestion--Z8JUo",suggestionItem:"suggestion-item--o0BmT",active:"active--vckCq",discovery:"discovery--vvuRL",discoveryTitle:"discovery-title--pgdQz",list:"list--ILcXs",item:"item--vwkRf",content:"content--clrNk",titleAndDescWrapper:"title-and-desc-wrapper--dHcM3",image:"image--Pt3YB",desc:"desc--ckccK",viewCountAndDate:"view-count-and-date--D_prZ",inputMsgBtn:"input-msg-btn--eVBL6"},oA=i(25902);class oj extends S.PN{get S(){return ei.S.Agent.AgentView.SearchAgentDefaultView}get randomPlaceholder(){return this.getRandomQuestion()}get renderQuestionList(){return this.questionList.slice(0,7)}get finalSuggestionVisible(){return this.renderQuestionList.length>0&&this.inputFocused&&this.suggestionVisible}get controller(){return this.props.controller}onKeydown(e){if(iB.t.isHotkey(e,["esc"])&&!this.isCompositionStart&&(this.suggestionVisible=!1),iB.t.isHotkey(e,["up","ctrl+p"])&&!this.isCompositionStart&&(e.preventDefault(),this.suggestionIndex>0&&(this.suggestionIndex-=1),this.controller.setInputValue(this.renderQuestionList[this.suggestionIndex])),iB.t.isHotkey(e,["down","ctrl+n","tab"])&&!this.isCompositionStart&&(e.preventDefault(),this.suggestionIndex<this.renderQuestionList.length-1&&(this.suggestionIndex+=1),this.controller.setInputValue(this.renderQuestionList[this.suggestionIndex])),iB.t.isHotkey(e,["enter"])&&!this.isCompositionStart){let t=this.controller.inputValue||this.randomPlaceholder;t&&(e.preventDefault(),this.handleAskQuestion(t),eL.M.createUserBehaviorEvent({eventName:"search_agent_submit",extData:{proEnabled:P.A.searchProEnabled,isPlaceholder:!this.controller.inputValue}}))}}handleInputChange(e){let t=e.target.value;this.suggestionVisible=!0,this.controller.setInputValue(t),this.debounceQueryComplete(t)}async getAgentDiscoverFeeds(){let e=await oA.G.getAgentDiscoverFeeds({limit:this.limit,isNew:!0,offset:this.feeds.length});this.feeds.push(...e.feeds),this.total=e.total||0}async loadCacheData(){let e=e=>{this.feeds=e,this.total=e.length+1,this.loading=!1},t=await oA.G.getCachedAgentDiscoverFeeds(!1,t=>{e(t)});e(t)}async handleAskQuestion(e){let t=await e9.W.getIsMonicaSoAuthorized(),i=ie.q.createMonicaSoUrlByQuestion({question:e,proEnabled:P.A.searchProEnabled,isMonicaSoAuthorized:t,utm:"monica_search"});this.controller.setInputValue(""),window.open(i,"_blank")}async onViewCreate(){this.loadCacheData(),E.w.eventEmitter.listenBy(this,"onHomeRendererFocus",()=>{this.loadCacheData()}),this.props.controller.eventEmitter.listenBy(this,"focusPrimaryInput",()=>{setTimeout(()=>{var e;null===(e=this.textareaRef)||void 0===e||e.focus({cursor:"end"})})})}onViewDestroy(){this.props.controller.eventEmitter.stopListenBy(this),E.w.eventEmitter.stopListenBy(this)}async queryComplete(e){if(!e.trim()){this.questionList=[];return}let t=await t8.u.queryComplete(e);this.questionList=t.data.queryTerms||[],this.suggestionIndex=-1}getRandomQuestion(){let e=this.controller.recommendQuestions,t=Math.floor(Math.random()*e.length);return e[t]}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"limit",15),(0,T._)(this,"textareaRef",null),(0,T._)(this,"inputContainerEl",null),(0,T._)(this,"isCompositionStart",!1),(0,T._)(this,"debounceQueryComplete",(0,eb.Z)(this.queryComplete,300)),(0,T._)(this,"questionRefs",[]),(0,T._)(this,"inputFocused",!1),(0,T._)(this,"feeds",[]),(0,T._)(this,"total",0),(0,T._)(this,"loading",!0),(0,T._)(this,"questionList",[]),(0,T._)(this,"suggestionVisible",!1),(0,T._)(this,"suggestionIndex",-1)}}(0,I.gn)([S.SB],oj.prototype,"inputFocused",void 0),(0,I.gn)([S.SB],oj.prototype,"feeds",void 0),(0,I.gn)([S.SB],oj.prototype,"total",void 0),(0,I.gn)([S.SB],oj.prototype,"loading",void 0),(0,I.gn)([S.SB],oj.prototype,"questionList",void 0),(0,I.gn)([S.SB],oj.prototype,"suggestionVisible",void 0),(0,I.gn)([S.SB],oj.prototype,"suggestionIndex",void 0),(0,I.gn)([tB.Fl],oj.prototype,"S",null),(0,I.gn)([tB.Fl],oj.prototype,"randomPlaceholder",null),(0,I.gn)([tB.Fl],oj.prototype,"renderQuestionList",null),(0,I.gn)([tB.Fl],oj.prototype,"finalSuggestionVisible",null);let ok=S._Y.createComponent("SearchAgentDefaultView",oj,e=>(0,y.jsx)(ev.v,{hasMore:e.total>e.feeds.length,dataLength:e.feeds.length,next:()=>{e.getAgentDiscoverFeeds()},loader:(0,y.jsx)("div",{style:{marginTop:-30},children:(0,y.jsx)(eC.g,{type:"geist"})}),className:q()(oS.searchAgentDefaultView),children:(0,y.jsxs)("div",{className:oS.inner,children:[(0,y.jsxs)("header",{className:q()(oS.header,oS.topHeader),children:[(0,y.jsx)(e7.Q,{className:q()(oS.title),tabKey:"search",title:e.S.title}),!e.controller.searchPageParams&&(0,y.jsxs)("span",{className:oS.history,onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"search_agent_click",source:"history"}),is({insertTarget:{botId:e.controller.botData.botId,type:"botContainer"}})},children:[(0,y.jsx)(t_.J,{name:"chatInputHistory",size:16,color:"currentColor"}),e.S.history]})]}),(0,y.jsxs)("div",{className:oS.inputContainer,ref:t=>{e.inputContainerEl=t},children:[(0,y.jsxs)("div",{className:q()(oS.input,{[oS.focused]:e.inputFocused}),onClick:()=>{if(!e.inputFocused){var t;null===(t=e.textareaRef)||void 0===t||t.focus({cursor:"end"})}},children:[(0,y.jsxs)("div",{className:oS.textareaWrap,children:[(0,y.jsx)(t_.J,{size:16,name:"monicaInputSearch",color:"currentColor",className:oS.searchIcon}),(0,y.jsx)(ow.W,{autoFocus:!0,isNewStyle:!0,autoSize:{minRows:2,maxRows:2},placeholder:e.randomPlaceholder,className:oS.textarea,onCompositionStart:()=>{e.isCompositionStart=!0},rows:2,onCompositionEnd:()=>{e.isCompositionStart=!1},onFocus:()=>{e.inputFocused=!0,e.suggestionVisible=!0,e.debounceQueryComplete(e.controller.inputValue)},onBlur:()=>{e.inputFocused=!1},onKeyDown:t=>{e.onKeydown(t)},getTextAreaRef:t=>{e.textareaRef=t},value:e.controller.inputValue,onChange:e.handleInputChange.bind(e),onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"search_agent_click",source:"input"})}})]}),(0,y.jsxs)("div",{className:oS.inputTools,children:[(0,y.jsx)(oy,{}),(0,y.jsx)(tN.u,{title:e.S.send,children:(0,y.jsx)("div",{className:q()(oS.inputMsgBtn,{[oS.active]:e.controller.inputValue.trim().length>0}),onClick:()=>{let t=e.controller.inputValue||e.randomPlaceholder;t&&(e.handleAskQuestion(t),eL.M.createUserBehaviorEvent({eventName:"search_agent_submit",extData:{proEnabled:P.A.searchProEnabled,isPlaceholder:!e.controller.inputValue}}))},children:(0,y.jsx)(t_.J,{name:"arrowRight",color:"currentColor",size:18})})})]})]}),(0,y.jsx)(o_,{vm:e})]}),(0,y.jsxs)("div",{className:oS.discovery,children:[(0,y.jsx)("div",{className:oS.discoveryTitle,children:e.S.discover}),(0,y.jsxs)("div",{className:oS.list,children:[(0,y.jsx)(oN,{vm:e}),e.feeds.map((e,t)=>{var i;return(0,y.jsxs)("div",{className:oS.item,onClick:async()=>{let i=e.taskId.split(":").pop();if(!i)return;let o=await e9.W.getIsMonicaSoAuthorized(),a=ie.q.createMonicaSoUrlBySession({question:e.title,sessionId:i,utm:"monica_search_discovery",isMonicaSoAuthorized:o});window.open(a,"_blank"),eL.M.createUserBehaviorEvent({eventName:"agent_discovery_feed_click",extData:{taskId:e.taskId,title:e.title,index:t}})},children:[(0,y.jsx)(eH.E,{skeleton:!0,className:oS.image,src:e.thumbnailUrl}),(0,y.jsxs)("div",{className:oS.content,children:[(0,y.jsxs)("div",{className:oS.titleAndDescWrapper,children:[(0,y.jsx)("div",{className:oS.title,children:e.title}),(0,y.jsx)("div",{className:oS.desc,children:null===(i=e.result)||void 0===i?void 0:i.replaceAll(/#+/g,"").trim()})]}),(0,y.jsx)("div",{className:oS.viewCountAndDate,children:(0,y.jsx)("span",{children:em.L.fromNow(e.createdAt)})})]})]},t)})]})]})]})})),oN=(0,F.Pi)(function(e){let{vm:t}=e;return t.loading?(0,y.jsx)(y.Fragment,{children:Array.from([,,,,]).map((e,t)=>(0,y.jsx)(of.Z,{avatar:!0,paragraph:{rows:2},active:!0},t))}):null}),o_=(0,F.Pi)(function(e){let{vm:t}=e;return t.finalSuggestionVisible?(0,y.jsx)("div",{className:oS.suggestion,children:t.renderQuestionList.map((e,i)=>(0,y.jsx)("div",{className:q()(oS.suggestionItem,{[oS.active]:t.suggestionIndex===i}),ref:e=>{t.questionRefs[i]=e},onMouseDown:()=>{t.handleAskQuestion(e)},children:e},e+i))}):null});var oT={src:"https://assets.monica.im/home-web/_next/static/media/agentPlaceholderImage.0a834fbb.png",height:48,width:76,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAA1BMVEXa3uMB3NZvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAADElEQVR4nGNgIAEAAAAtAAHF18CGAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},oI={agentRelatedImagesOrVideos:"agent-related-images-or-videos--CwC2J",singleLineImages:"single-line-images--QJGgc",image:"image--YhbAQ",imageGallery:"image-gallery--ofBPZ",primaryImage:"primary-image--nyNiH",images:"images--wIAyW",viewMore:"view-more--Zknl2",viewMoreImages:"view-more-images--Ye9J_",viewMoreImage:"view-more-image--lU8Mz",more:"more--id50M",imageOrVideoItem:"image-or-video-item--i_xao",videoPlayIconWrap:"video-play-icon-wrap--RV9sw",videoPlayIcon:"video-play-icon--Z4Qbt"},oM=i(57256),oL=i.n(oM),oB={src:"https://assets.monica.im/home-web/_next/static/media/defaultWhiteFavicon.aa145b24.png",height:32,width:32,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEX///////9MaXH///////////////////////+T/IaxAAAACXRSTlOIoQAZV1hFE9T+XaFVAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAMElEQVR4nEWKQQoAIAzD2mxz+/+LBQXNKZAIurJBrLFnobAlO5Q6lOpK/vRm6KyGDRfoAKmEPbB4AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},oE={src:"https://assets.monica.im/home-web/_next/static/media/searchAgentLogo.bb2a14f1.png",height:71,width:70,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAXVBMVEVMaXH1+O8JAEJqesdTI+X4jATssyqerrg/SPckJv2ivczw7PLM1dsgVWB8aPtkYfI2e5loiLlDouGIb/qysLGbaP2audLOkf+/ttmsucjK1+TMzP+py+24y9KnqaeZ7IzXAAAAG3RSTlMA+Q0JUSIGgZM0Tf38V/vFqtvX+f3BhNj6Zv4Ypvn/AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAPklEQVR4nCXBxQGAMAAAsasr7hX2H5MHCVh+xgTvA2D1VuuogSMJUSaQ17uXsiieO+fUZoi99LYOoJxzZ5R8UsQCyS7YIt8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8};class oD extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],oD.prototype,"someState",void 0);let oP=S._Y.createComponent("AgentPreviewDialogHeader",oD,e=>{let{title:t,sourceName:i,hostPageUrl:o,onClose:a}=e.props;return(0,y.jsxs)("div",{className:q()("agent-preview-dialog-header--YaVk9",{"desktop--j0zjY":f.o.isDesktop}),children:[(0,y.jsxs)("div",{className:"header-left--Q0Oa4",children:[(0,y.jsx)(te.E,{src:oE,className:"logo--ywfGX",alt:""}),(0,y.jsx)("div",{className:"name--Chdv9",children:t})]}),(0,y.jsxs)("div",{className:"header-right--N9dUG",children:[(0,y.jsxs)("div",{className:"source-name-wrap--RzMAf",onClick:()=>{o&&window.open(o,"_blank")},children:[(0,y.jsx)("div",{className:"favicon--Dc9oG",children:(0,y.jsx)(eH.E,{src:w.m.getFaviconFromOrigin(new URL(o).origin),defaultSrc:(0,te.Q)(oB)})}),(0,y.jsx)("div",{className:"source-name--_7H4l",children:i}),(0,y.jsx)("span",{className:"share-icon-wrap--LRdRZ",children:(0,y.jsx)(t_.J,{name:"memoShare",size:16,color:"currentColor"})})]}),(0,y.jsx)("div",{className:"close-btn--IykSX",onClick:a,children:(0,y.jsx)(t_.J,{color:"currentColor",size:20,name:"close"})})]})]})});class oF extends S.PN{get currentIndex(){var e;return this.hasSlide?this.changedIndex:this.imageGallery?null===(e=this.imageGallery)||void 0===e?void 0:e.getCurrentIndex():this.props.startIndex||0}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"hasSlide",!1),(0,T._)(this,"changedIndex",0),(0,T._)(this,"imageGallery",null)}}(0,I.gn)([S.SB],oF.prototype,"hasSlide",void 0),(0,I.gn)([S.SB],oF.prototype,"changedIndex",void 0),(0,I.gn)([tB.Fl],oF.prototype,"currentIndex",null);let oR=oL(),oV=S._Y.createComponent("AgentPreviewImagesDialog",oF,e=>{let{title:t,images:i,startIndex:o,onDisposed:a}=e.props;return(0,y.jsxs)("div",{className:"agent-preview-images-dialog--GzNQ4",children:[(0,y.jsx)(oP,{title:t,sourceName:i[e.currentIndex].name,hostPageUrl:i[e.currentIndex].hostPageUrl,onClose:a}),(0,y.jsx)("div",{className:"main--Wn43k",children:(0,y.jsx)(oR,{ref:t=>{e.imageGallery=t},showFullscreenButton:!1,showPlayButton:!1,showThumbnails:!0,startIndex:o,onSlide:t=>{e.hasSlide=!0,e.changedIndex=t},items:i.map(e=>({original:e.contentUrl,thumbnail:e.thumbnailUrl})),onImageError:e=>{if(e.target){let t=e.target,o=i.find(t=>t.contentUrl===e.currentTarget.src);o&&(t.src=o.thumbnailUrl)}}})})]})}),oU=H.t.createOpener(oV);var oz={agentPreviewVideoDialog:"agent-preview-video-dialog--k9QCa",main:"main--ELSiA",videoWrapper:"video-wrapper--tXn2G",thumbnailWrap:"thumbnail-wrap--Io9OE",thumbnail:"thumbnail--KX9EN",loading:"loading--DHAuV"};class oO extends S.PN{get videoSizeStyle(){let{width:e=1280,height:t=720}=this.props.video;return e>t?{width:"80vw",maxWidth:"".concat(80*e/t,"vh"),height:"".concat(80*t/e,"vw"),maxHeight:"80vh"}:{width:"".concat(80*t/e,"vh"),maxWidth:"80vw",height:"80vh",maxHeight:"".concat(80*e/t,"vw")}}insertHtmlToDialog(e){if(!this.videoWrapperEl){window.open(this.props.video.hostPageUrl,"_blank"),this.props.onDisposed();return}let t=document.createElement("template"),i=e.replace(/(<iframe .*?src=")http:\/\//gi,"$1https://");t.innerHTML=i;let o=t.content.children[0];o.style.width=this.videoSizeStyle.width,o.style.maxWidth=this.videoSizeStyle.maxWidth,o.style.height=this.videoSizeStyle.height,o.style.maxHeight=this.videoSizeStyle.maxHeight,o.style.opacity="0",o.style.position="absolute",o.style.zIndex="-1",o.src.includes("youtube.com")&&o.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),o.onload=()=>{this.videoLoaded=!0,o.style.opacity="1",o.style.position="relative",o.style.zIndex="1"},this.videoWrapperEl.appendChild(o)}onViewCreate(){this.props.video.embedHtml&&this.insertHtmlToDialog(this.props.video.embedHtml)}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"videoLoaded",!1),(0,T._)(this,"videoWrapperEl",null)}}(0,I.gn)([S.SB],oO.prototype,"videoLoaded",void 0),(0,I.gn)([tB.Fl],oO.prototype,"videoSizeStyle",null);let oW=S._Y.createComponent("AgentPreviewVideoDialog",oO,e=>{let{title:t,video:i,onDisposed:o}=e.props;return i.embedHtml?(0,y.jsxs)("div",{className:oz.agentPreviewVideoDialog,children:[(0,y.jsx)(oP,{title:t,sourceName:i.name,hostPageUrl:i.hostPageUrl,onClose:o}),(0,y.jsx)("div",{className:oz.main,children:(0,y.jsx)("div",{className:oz.videoWrapper,style:e.videoSizeStyle,ref:t=>{e.videoWrapperEl=t},children:!e.videoLoaded&&(0,y.jsxs)("div",{className:oz.thumbnailWrap,children:[(0,y.jsx)(te.E,{className:oz.thumbnail,style:e.videoSizeStyle,src:i.thumbnailUrl,alt:""}),(0,y.jsx)("span",{className:oz.loading,children:(0,y.jsx)(eC.g,{size:60,color:"var(--theme-icon-white-primary)"})})]})})})]}):null}),oH=H.t.createOpener(oW);class oG extends S.PN{get S(){return ei.S.Agent.AgentRelatedImagesOrVideos}get imageGalleryMaxSize(){let{type:e,data:t}=this.props;return"video"===e?4:t.length>5?3:4}handleImageOrVideoClick(e){"image"===this.props.type?this.handleImageClick(e):this.handleVideoClick(e)}handleImageClick(e){let t=this.props.data.findIndex(t=>t===e);oU({insertTarget:"dialogRoot",title:this.props.question,images:this.props.data,startIndex:-1!==t?t:0}),eL.M.createUserBehaviorEvent({eventName:"agent_related_image_click"})}detectWebsiteSupportEmbed(e){return!!(location.href.startsWith("http://")||e.allowHttpsEmbed&&location.href.startsWith("https://"))}handleVideoClick(e){this.props.controller.isSupportInsertIframe&&e.embedHtml&&this.detectWebsiteSupportEmbed(e)?oH({insertTarget:"dialogRoot",title:this.props.question,video:e}):window.open(e.hostPageUrl,"_blank"),eL.M.createUserBehaviorEvent({eventName:"agent_related_video_click"})}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],oG.prototype,"someState",void 0),(0,I.gn)([tB.Fl],oG.prototype,"S",null),(0,I.gn)([tB.Fl],oG.prototype,"imageGalleryMaxSize",null);let oQ=S._Y.createComponent("AgentRelatedImagesOrVideos",oG,e=>{let{data:t}=e.props,i=t.length>5&&"image"===e.props.type,o=(0,te.Q)(oT);return(0,y.jsx)("div",{className:oI.agentRelatedImagesOrVideos,children:t.length<=3?(0,y.jsx)("div",{className:oI.singleLineImages,children:t.map((t,i)=>(0,y.jsx)(oJ,{vm:e,skeleton:!0,name:t.name,src:t.thumbnailUrl,defaultSrc:o,wrapperClassName:oI.image,onClick:()=>{e.handleImageOrVideoClick(t)}},i))}):(0,y.jsxs)("div",{className:oI.imageGallery,children:[(0,y.jsx)("div",{className:oI.primaryImage,children:(0,y.jsx)(oJ,{vm:e,skeleton:!0,name:t[0].name,src:t[0].thumbnailUrl,defaultSrc:o,onClick:()=>{e.handleImageOrVideoClick(t[0])}})}),(0,y.jsxs)("div",{className:oI.images,children:[t.slice(1,Math.min(t.length,5)).map((t,i)=>i<e.imageGalleryMaxSize?(0,y.jsx)(oJ,{vm:e,skeleton:!0,name:t.name,src:t.thumbnailUrl,wrapperClassName:oI.image,defaultSrc:o,onClick:()=>{e.handleImageOrVideoClick(t)}},i):null),i&&(0,y.jsxs)("div",{className:oI.viewMore,onClick:()=>{e.handleImageOrVideoClick(t[4])},children:[(0,y.jsx)("div",{className:oI.viewMoreImages,children:t.slice(4,6).map((t,i)=>(0,y.jsx)(eH.E,{skeleton:!0,src:t.thumbnailUrl,defaultSrc:o,className:oI.viewMoreImage,onClick:i=>{i.stopPropagation(),e.handleImageOrVideoClick(t)}},i))}),(0,y.jsxs)("div",{className:oI.more,children:[(0,y.jsx)(t_.J,{name:"viewMoreImage",size:12,color:"currentColor"}),(0,y.jsx)("span",{children:e.S.more})]})]})]})]})})}),oJ=(0,F.Pi)(e=>{let{vm:t,wrapperClassName:i="",name:o="",onClick:a,...n}=e;return(0,y.jsx)(tN.u,{title:"video"===t.props.type?o:"",placement:"top",mouseEnterDelay:.5,children:(0,y.jsxs)("div",{className:q()(oI.imageOrVideoItem,i),onClick:a,children:[(0,y.jsx)(eH.E,{...n}),"video"===t.props.type&&(0,y.jsx)("span",{className:oI.videoPlayIconWrap,children:(0,y.jsx)(t_.J,{name:"videoPlay",size:12,color:"currentColor",className:oI.videoPlayIcon})})]})})});class oq extends S.PN{get S(){return ei.S.Agent.AgentRelatedQuestions}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],oq.prototype,"someState",void 0),(0,I.gn)([tB.Fl],oq.prototype,"S",null);let oK=S._Y.createComponent("AgentRelatedQuestions",oq,e=>(0,y.jsx)(iM,{title:e.props.title||e.S.relatedQuestions,children:(0,y.jsx)("div",{className:"question-list--Asipt",children:e.props.relatedQuestions.map((t,i)=>(0,y.jsx)("div",{className:"question--lIupm",onClick:()=>{e.props.controller.ask({question:t,source:"agent_related_questions"}),eL.M.createUserBehaviorEvent({eventName:"agent_related_question_click"})},children:t},i))})}));var oY={agentSourceList:"agent-source-list--N6VvB",sourceItem:"source-item--DkhfI",title:"title--sy_vT",divider:"divider--ChSF3",hostWrapper:"host-wrapper--bSI1X",logo:"logo--ILCC2",description:"description--p5q8X",pagination:"pagination--YT237",paginationItem:"pagination-item--L3lBy",active:"active--Ae6Fs"};class oZ extends S.PN{get dataSource(){let{sources:e,enablePagination:t}=this.props;if(t){let t=this.pageSize*(this.page-1);return e.slice(t,t+this.pageSize)}return e}onViewCreate(){this.handleResize(),window.addEventListener("resize",this.handleResize)}onViewDestroy(){window.removeEventListener("resize",this.handleResize)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0),(0,T._)(this,"page",1),(0,T._)(this,"pageSize",4),(0,T._)(this,"handleResize",()=>{this.pageSize=Math.max(Math.floor((window.innerHeight-360)/140),2)})}}(0,I.gn)([S.SB],oZ.prototype,"someState",void 0),(0,I.gn)([S.SB],oZ.prototype,"page",void 0),(0,I.gn)([S.SB],oZ.prototype,"pageSize",void 0);let oX=S._Y.createComponent("AgentSourceList",oZ,e=>{let{sources:t,controller:i,enablePagination:o=!1}=e.props;return(0,y.jsxs)("div",{className:oY.agentSourceList,children:[0===t.length&&"ended"!==i.taskStatus&&(0,y.jsx)(y.Fragment,{children:Array(e.pageSize).fill(0).map((e,t)=>(0,y.jsx)("div",{className:oY.sourceItem,children:(0,y.jsx)(of.Z,{active:!0},t)},t))}),e.dataSource.map((t,o)=>{let a=new URL(t.url).hostname,n=i.iconMap[a]||t.favicon;return(0,y.jsxs)("div",{className:oY.sourceItem,children:[(0,y.jsxs)("a",{href:t.url,target:"_blank",rel:"noreferrer",onClick:()=>{e.props.controller.botData.botId===tX.tW.searchAgent&&eL.M.createUserBehaviorEvent({eventName:"agent_source_click",extData:{url:t.url}})},children:[(0,y.jsxs)("div",{className:oY.hostWrapper,children:[n&&(0,y.jsx)(te.E,{className:oY.logo,src:n,alt:""}),t.siteName," \xb7 #",t.idx]}),(0,y.jsx)("div",{className:oY.title,children:t.title})]}),(0,y.jsx)("div",{className:oY.description,children:t.snippet}),o!==e.dataSource.length-1&&(0,y.jsx)("div",{className:oY.divider})]},o)}),o&&(0,y.jsx)("div",{className:oY.pagination,children:Array.from({length:Math.ceil(t.length/e.pageSize)},(e,t)=>t+1).map(t=>(0,y.jsx)("div",{className:q()(oY.paginationItem,{[oY.active]:e.page===t}),onClick:()=>{e.page=t},children:t},t))})]})});class o$ extends S.PN{get S(){return ei.S.Agent.AgentSources.AgentSourcesDrawer}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],o$.prototype,"someState",void 0),(0,I.gn)([tB.Fl],o$.prototype,"S",null);let o0=S._Y.createComponent("AgentSourcesDrawer",o$,e=>(0,y.jsx)(t6.d,{enableHorizontalStyle:!0,onDispose:()=>{e.props.onDisposed()},maxHeight:780,visible:!0,title:e.S.allSources,children:(0,y.jsx)("div",{className:"agent-sources-drawer--kjku6",children:(0,y.jsx)(oX,{sources:e.props.sources,controller:e.props.controller})})})),o1=H.t.createOpener(o0);var o2={searchAgentCard:"search-agent-card--IqUCG",header:"header--MNJC0",title:"title--HkSvu",titleText:"title-text--lNgIq",titleRight:"title-right--k9oaE",taskDesc:"task-desc--w1gkG",expandIcon:"expand-icon--gwPyo",expand:"expand--T4MwZ",messageList:"message-list--IXlJ7",fold:"fold--yTQLO",grayBubble:"gray-bubble--yvWFM"};class o3 extends S.PN{get S(){return ei.S.Agent.AgentView.SearchAgentMainView.SearchAgentCard}get controller(){return this.props.controller}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],o3.prototype,"S",null),(0,I.gn)([tB.Fl],o3.prototype,"controller",null);let o6=S._Y.createComponent("SearchAgentCard",o3,e=>{let t=1===e.props.group.messages.length,i=e.props.groupIndex!==e.controller.messageGroups.length-1||"ended"===e.controller.taskStatus;if(t&&i)return(0,y.jsx)(ik.I,{className:o2.grayBubble,position:"left",children:e.S.userCanceled});if(!e.props.group.messages.some(e=>{let{item:t}=e;return"stage"===t.type&&!t.data.hidden||"error"===t.type}))return(0,y.jsx)("div",{children:(0,y.jsx)(of.Z,{active:!0})});let o=e.props.group.messages.some(e=>{let{item:t}=e;return"error"===t.type});return(0,y.jsxs)("div",{className:q()(o2.searchAgentCard,{[o2.fold]:!e.props.group.expanded}),onClick:()=>{e.props.group.expanded||e.props.group.setExpanded(!0)},children:[(0,y.jsxs)("div",{className:o2.header,children:[(0,y.jsxs)("div",{className:o2.title,children:[(0,y.jsx)(t_.J,{name:"monicaAiSearch",size:16,color:"currentColor"}),(0,y.jsx)("span",{className:o2.titleText,children:e.S.searchProcess})]}),(0,y.jsxs)("div",{className:o2.titleRight,children:[!e.props.group.expanded&&(0,y.jsx)("span",{className:o2.taskDesc,children:(0,ei.x)(e.S.taskCompleted,{stepCount:e.props.group.completedSteps})}),(0,y.jsx)("span",{className:q()(o2.expandIcon,{[o2.expand]:e.props.group.expanded}),onClick:t=>{t.stopPropagation(),e.props.group.setExpanded(!e.props.group.expanded)},children:(0,y.jsx)(t_.J,{name:"monicaUp",size:16,color:"currentColor"})})]})]}),(0,y.jsxs)("div",{className:o2.messageList,children:[e.props.group.messages.map(t=>{let{item:i,originIndex:o}=t;return(0,y.jsx)(o5,{vm:e,message:i,index:o,group:e.props.group},i.id)}),i&&!o&&!e.props.group.answer&&(0,y.jsx)(iM,{isError:!0,type:"searchAgent",title:e.S.userCanceled})]})]})}),o5=(0,F.Pi)(e=>{let{vm:t,message:i,index:o,group:a}=e,n=!t.controller.findNextOne(o);if("error"===i.type)return(0,y.jsx)(iM,{type:"searchAgent",isError:!0,title:i.data.message});if("client_action"===i.type)return n&&"ask"===i.data.action&&i.data.questions?(0,y.jsx)(iV,{message:i,controller:t.controller}):null;if("stage"===i.type){let e=i.data,o=n&&"ended"!==t.controller.taskStatus;return e.hidden?null:(0,y.jsx)(iM,{type:"searchAgent",title:e.message,loading:o,children:e.tags&&(0,y.jsx)(ot,{type:"searchAgent",tags:e.tags})})}return null});var o4={searchAgentMainView:"search-agent-main-view--KwPgV",enoughSpace:"enough-space--xBiZm",groupRight:"group-right--RYI5R",sourcesInList:"sources-in-list--hJvBE",header:"header--HqpoL",back:"back--xzqBo",name:"name--b1dhE",mainWrapper:"main-wrapper--_JSR2",main:"main--wcU6B",group:"group--GrKRp",groupLeft:"group-left--uuTEK",welcomeMsg:"welcome-msg--OpgRf",title:"title--SRUH9",groupDivider:"group-divider--MZrH9",inputWrapper:"input-wrapper--YAVtN",inputMain:"input-main--AuciW",input:"input--OCrjc",sticky:"sticky--xLOIr",userQuestion:"user-question--UAI0m",answer:"answer--req7y",answerBubble:"answer-bubble--mValH",taskOperations:"task-operations--XB8r2",monicaSearch:"monica-search--Je0ux"};class o9 extends S.PN{get controller(){return this.props.controller}get S(){return ei.S.Agent.AgentView.SearchAgentMainView}get taskOperationVisible(){if(this.controller.shouldHideInput)return!1;let e=this.controller.lastMsg;return((null==e?void 0:e.type)!=="client_action"||"ask"!==e.data.action)&&("running"===this.controller.taskStatus||"waiting"===this.controller.taskStatus)}setSearchAgentMainViewEl(e){e&&(this.searchAgentMainViewEl=e,this.detectWebsiteSupportInsertIframe())}onViewCreate(){}onViewDestroy(){}detectWebsiteSupportInsertIframe(){if(!this.searchAgentMainViewEl||this.controller.hasDetectedInsertIframe)return;this.controller.setDetectedInsertIframe();let e=document.createElement("iframe");e.src="".concat(w.m.getWebOrigin(),"/api/ping"),e.style.cssText="position: absolute; top: 999999px; left: 999999px; z-index: -1; opacity: 0; width:0; height: 0;";let t=setTimeout(()=>{this.isIframeLoadTimeout=!0,this.controller.setDetectInsertIframeResult(!1),this.searchAgentMainViewEl&&this.searchAgentMainViewEl.removeChild(e),eL.M.createUserBehaviorEvent({eventName:"agent_detect_insert_iframe_failed",extData:{url:location.href}})},3e3);e.onload=()=>{clearTimeout(t),!this.isIframeLoadTimeout&&(this.controller.setDetectInsertIframeResult(!0),this.searchAgentMainViewEl&&this.searchAgentMainViewEl.removeChild(e))},this.searchAgentMainViewEl.appendChild(e)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"mainHeight",null),(0,T._)(this,"searchAgentMainViewEl",null),(0,T._)(this,"isIframeLoadTimeout",!1)}}(0,I.gn)([S.SB],o9.prototype,"mainHeight",void 0),(0,I.gn)([tB.Fl],o9.prototype,"controller",null),(0,I.gn)([tB.Fl],o9.prototype,"S",null),(0,I.gn)([tB.Fl],o9.prototype,"taskOperationVisible",null);var o7={searchAgentTools:"search-agent-tools--eGRDa",searchToolIcon:"search-tool-icon--_bKm7"};class o8 extends S.PN{get S(){return ei.S.Agent.AgentView.SearchAgentMainView.SearchAgentTools}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"searchImageLoading",!1),(0,T._)(this,"searchVideoLoading",!1)}}(0,I.gn)([S.SB],o8.prototype,"searchImageLoading",void 0),(0,I.gn)([S.SB],o8.prototype,"searchVideoLoading",void 0),(0,I.gn)([tB.Fl],o8.prototype,"S",null);let ae=S._Y.createComponent("SearchAgentTools",o8,e=>{let{msgIndex:t,isLastOne:i,controller:o,group:a}=e.props;if(o.botData.botId!==tX.tW.searchAgent)return null;let n=o.messageList[t],r=a.keywords[0]||a.question,s=a.autoSearchImageResults.length>0,l=a.autoSearchVideoResults.length>0,c=a.searchImageResults.length>0,d=a.searchVideoResults.length>0,p=s||c,m=l||d,h=i&&n.finished&&(!p||!m)&&!o.sharePageParams;return(0,y.jsxs)(y.Fragment,{children:[c&&(0,y.jsx)(oQ,{controller:o,type:"image",data:a.searchImageResults,question:a.question}),d&&(0,y.jsx)(oQ,{controller:o,type:"video",data:a.searchVideoResults,question:a.question}),h&&(0,y.jsxs)("div",{className:o7.searchAgentTools,children:[!p&&(0,y.jsxs)(eO.z,{type:"lightGray",disabled:e.searchImageLoading,onClick:()=>{var t;e.searchImageLoading=!0,null===(t=o.socketIo)||void 0===t||t.sendMsg({type:"client_command",clientCommand:{type:"search_images",callId:"".concat(n.id),data:{keyword:r}}}),eL.M.createUserBehaviorEvent({eventName:"agent_search_image_btn_click"})},children:[e.S.searchImage,(0,y.jsx)("span",{className:o7.searchToolIcon,children:e.searchImageLoading?(0,y.jsx)(eC.g,{size:14}):(0,y.jsx)(t_.J,{name:"add",size:14,color:"currentColor"})})]}),!m&&(0,y.jsxs)(eO.z,{type:"lightGray",disabled:e.searchVideoLoading,onClick:()=>{var t;e.searchVideoLoading=!0,null===(t=o.socketIo)||void 0===t||t.sendMsg({type:"client_command",clientCommand:{type:"search_videos",callId:"".concat(n.id),data:{keyword:r}}}),eL.M.createUserBehaviorEvent({eventName:"agent_search_video_btn_click"})},children:[e.S.searchVideo,(0,y.jsx)("span",{className:o7.searchToolIcon,children:e.searchVideoLoading?(0,y.jsx)(eC.g,{size:14}):(0,y.jsx)(t_.J,{name:"add",size:14,color:"currentColor"})})]})]})]})}),at=S._Y.createComponent("SearchAgentMainView",o9,e=>{let t=os(e.controller);return e.controller.loadTaskLoading?(0,y.jsx)(eC.g,{fullScreen:!0}):(0,y.jsxs)("div",{className:q()(o4.searchAgentMainView,{[o4.enoughSpace]:E.w.sidebarWidth>1100,[o4.monicaSearch]:e.controller.searchPageParams}),ref:e.setSearchAgentMainViewEl.bind(e),children:[!e.controller.sharePageParams&&!e.controller.searchPageParams&&(0,y.jsxs)("div",{className:o4.header,children:[(0,y.jsx)("span",{className:o4.back,onClick:()=>{e.controller.newTask("back")},children:(0,y.jsx)(t_.J,{name:"template-back",size:16,color:"currentColor"})}),(0,y.jsx)("span",{className:o4.name,children:e.S.searchAgent})]}),(0,y.jsx)("main",{className:q()(o4.mainWrapper),ref:t=>{e.controller.setScrollableContainer(t)},onScroll:t,children:e.controller.newChat?(0,y.jsx)(aa,{vm:e}):(0,y.jsxs)("div",{className:o4.main,children:[e.controller.messageGroups.map((t,i)=>(0,y.jsxs)(Q.Fragment,{children:[i>0&&(0,y.jsx)("div",{className:o4.groupDivider}),(0,y.jsxs)("div",{className:o4.group,children:[(0,y.jsxs)("div",{className:o4.groupLeft,children:[(0,y.jsx)("div",{className:o4.userQuestion,children:t.question}),(0,y.jsx)(o6,{group:t,controller:e.controller,groupIndex:i}),(0,y.jsx)(ao,{group:t,vm:e,groupIndex:i})]}),(0,y.jsx)("div",{className:o4.groupRight,children:(0,y.jsx)(iM,{title:"".concat(e.S.sources," ").concat(t.sources.length?"(".concat(t.sources.length,")"):""),className:o4.sticky,children:(0,y.jsx)(oX,{sources:t.sources,showTitle:!0,enablePagination:!e.controller.searchPageParams,controller:e.controller})})})]})]},t.question+i)),(0,y.jsx)(i_,{controller:e.controller},"paused"===e.controller.taskStatus?1:2)]})}),!e.controller.shouldHideInput&&(0,y.jsx)("div",{className:o4.inputWrapper,children:(0,y.jsxs)("div",{className:o4.inputMain,children:[(0,y.jsx)(id,{wrapperClassName:o4.input,controller:e.controller,toolbarSlot:(0,y.jsx)(ai,{vm:e})}),(0,y.jsx)("div",{className:o4.groupRight})]})})]})}),ai=(0,F.Pi)(e=>{let{vm:t}=e;return t.taskOperationVisible?(0,y.jsx)("div",{className:o4.taskOperations,children:(0,y.jsx)(eO.z,{type:"gray",icon:(0,y.jsx)(t_.J,{name:"agentStopNew",size:16,color:"currentColor"}),onClick:()=>{t.controller.stop()},loading:t.controller.stopTaskLoading,children:t.S.stop})}):null}),ao=(0,F.Pi)(e=>{let{vm:t,group:i,groupIndex:o}=e,a=t.controller.messageGroups.length-1===o,n=!a||"ended"===t.controller.taskStatus;if(!i.answer)return n&&t.controller.messageList.length>1?(0,y.jsx)(ij,{controller:t.controller,msgIndex:i.messages[i.messages.length-1].originIndex}):t.controller.isLastMsgRunning||n?null:(0,y.jsx)(iM,{title:t.S.answer,children:(0,y.jsx)(of.Z,{active:!0})});let r=i.answer.item,s=r.finished&&"ended"===t.controller.taskStatus,l=!a||s,c=i.relatedQuestions.length>0&&a;t.controller.sharePageParams&&(l=!1,c=!1);let d=i.sources,p=d.length>4;return(0,y.jsxs)(y.Fragment,{children:[d.length>0&&(0,y.jsx)(iM,{className:o4.sourcesInList,title:t.S.sources,titleRight:p&&(0,y.jsx)(i5,{onClick:()=>{o1({insertTarget:{botId:t.controller.botData.botId,type:"botContainer"},sources:d,controller:t.controller})}}),children:(0,y.jsx)(or,{column:2,renderCount:4,controller:t.controller,sources:d})}),(0,y.jsx)(iM,{title:t.S.answer,children:(0,y.jsxs)("div",{className:o4.answer,children:[i.autoSearchImageResults.length>0&&(0,y.jsx)(oQ,{controller:t.controller,type:"image",data:i.autoSearchImageResults,question:i.question}),i.autoSearchVideoResults.length>0&&(0,y.jsx)(oQ,{controller:t.controller,type:"video",data:i.autoSearchVideoResults,question:i.question}),(0,y.jsx)(i3,{position:"left",controller:t.controller,loading:!r.finished,finished:r.finished,text:r.data,searchResults:i.sources,getParentNode:()=>t.controller.getScrollableContainer(),bubbleClassName:o4.answerBubble})]})}),(0,y.jsx)(ae,{controller:t.controller,msgIndex:i.answer.originIndex,isLastOne:a,group:i}),l&&(0,y.jsx)(ij,{controller:t.controller,msgIndex:i.answer.originIndex},i.answer.originIndex),c&&(0,y.jsx)(oK,{controller:t.controller,relatedQuestions:i.relatedQuestions})]})}),aa=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsx)("div",{className:o4.main,children:(0,y.jsxs)("div",{className:o4.group,children:[(0,y.jsxs)("div",{className:o4.groupLeft,children:[(0,y.jsx)(ik.I,{position:"left",noShadow:!0,children:(0,y.jsxs)("div",{className:o4.welcomeMsg,children:[(0,y.jsx)("div",{className:o4.title,children:t.S.welcomeTitle}),(0,y.jsx)("p",{children:t.S.welcomeMsg1}),(0,y.jsx)("p",{children:t.S.welcomeMsg2})]})}),(0,y.jsx)(oK,{title:t.S.searchFor,controller:t.controller,relatedQuestions:t.controller.recommendQuestions})]}),(0,y.jsx)("div",{className:o4.groupRight})]})})}),an=S._Y.createComponent("AgentView",ou,e=>(0,y.jsxs)(y.Fragment,{children:[eF.J.showSidebarFoldBtn&&(0,y.jsx)("div",{className:og.fixedFoldBtn,children:(0,y.jsx)(tf.b,{})}),(0,y.jsxs)("div",{className:q()(og.agentView,{[og.hide]:!e.props.visible}),children:[(0,y.jsx)(tb.K,{botId:e.controller.botData.botId}),(0,y.jsx)(ar,{vm:e})]})]})),ar=(0,F.Pi)(e=>{let{vm:t}=e;return"default"===t.controller.viewData.status?t.controller.isSearchAgent?(0,y.jsx)(ok,{controller:t.controller}):(0,y.jsx)(ig,{controller:t.controller}):"main"===t.controller.viewData.status?t.controller.isSearchAgent?(0,y.jsx)(at,{controller:t.controller}):(0,y.jsx)(op,{controller:t.controller}):null});var as=i(18508),al=i(11201),ac=i(45476),ad=i(98966),ap=i(3095),am={chatSkeleton:"chat-skeleton--fymkk",inner:"inner--UVDgE",chatMessage:"chat-message--pa9K9",question:"question--h7OhX",text:"text--IER35",reply:"reply--nNtDw",line:"line--SqEW3",avatar:"avatar--lTbBQ",name:"name--vvYob",chatInput:"chat-input--s55c4",toolbar:"toolbar--PKLpG",toolbarLeft:"toolbar-left--hMTaQ",toolbarRight:"toolbar-right--JW3CY",botSwitch:"bot-switch--s62qE",toolItem:"tool-item--YOFtR",box:"box--HDY3S",placeholder:"placeholder--CsrA5",tools:"tools--N0blr",left:"left--us4T7",right:"right--rTIHl"};class ah extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],ah.prototype,"someState",void 0);let ag=S._Y.createComponent("ChatSkeleton",ah,e=>(0,y.jsx)("div",{className:am.chatSkeleton,style:e.props.style,children:(0,y.jsxs)("div",{className:am.inner,children:[(0,y.jsxs)("div",{className:am.chatMessage,children:[(0,y.jsx)("div",{className:am.question,children:(0,y.jsx)("div",{className:am.text})}),(0,y.jsxs)("div",{className:am.reply,children:[(0,y.jsxs)("div",{className:am.line,children:[(0,y.jsx)("div",{className:am.avatar}),(0,y.jsx)("div",{className:am.name})]}),(0,y.jsx)("div",{className:am.line,children:(0,y.jsx)("div",{className:am.text,style:{width:"100%"}})}),(0,y.jsx)("div",{className:am.line,children:(0,y.jsx)("div",{className:am.text,style:{width:"100%"}})}),(0,y.jsx)("div",{className:am.line,children:(0,y.jsx)("div",{className:am.text,style:{width:220}})})]})]}),(0,y.jsxs)("div",{className:am.chatInput,children:[(0,y.jsxs)("div",{className:am.toolbar,children:[(0,y.jsxs)("div",{className:am.toolbarLeft,children:[(0,y.jsx)("div",{className:am.botSwitch}),(0,y.jsx)("div",{className:am.toolItem}),(0,y.jsx)("div",{className:am.toolItem}),(0,y.jsx)("div",{className:am.toolItem})]}),(0,y.jsxs)("div",{className:am.toolbarRight,children:[(0,y.jsx)("div",{className:am.toolItem}),(0,y.jsx)("div",{className:am.toolItem}),(0,y.jsx)("div",{className:am.toolItem})]})]}),(0,y.jsxs)("div",{className:am.box,children:[(0,y.jsx)("div",{className:am.placeholder}),(0,y.jsxs)("div",{className:am.tools,children:[(0,y.jsxs)("div",{className:am.left,children:[(0,y.jsx)("div",{className:am.toolItem}),(0,y.jsx)("div",{className:am.toolItem}),(0,y.jsx)("div",{className:am.toolItem})]}),(0,y.jsx)("div",{className:am.right,children:(0,y.jsx)("div",{className:am.toolItem})})]})]})]})]})}));var au=i(89322),av=i(96414),aC={artifactPreviewPanel:"artifact-preview-panel--HH8an",slideIn:"slideIn--kkf2w",content:"content--U6Ihb",draggingMask:"dragging-mask--Y1Cw5",drag:"drag--bK11x"};class ax extends S.PN{onViewCreate(){"horizontal"===ex.L.mainWindowMode&&(this.resizableController.init({defaultData:this.props.dataManager.defaultPosition||{width:this.resizableController.root.clientWidth,height:this.resizableController.root.clientHeight,translateX:0,translateY:0},getAllowedDirection:()=>["left"],getMaxSize:()=>({width:this.getMaxWidth(),height:1/0}),getMinSize:()=>({width:380,height:1/0}),onChange:e=>{this.props.dataManager.updateDefaultPosition(e)}}),tU.f.getProxy(this).add((0,tB.U5)(()=>({a:eF.J.homeSidebarCollapsed,b:eF.J.finalViewType}),()=>{setTimeout(()=>{let e=this.getMaxWidth();this.resizableController.updateData({width:Math.min(e,this.resizableController.data.width)})},0)})))}onViewDestroy(){tU.f.getProxy(this).disposeAll()}getMaxWidth(){let{left:e}=this.rootEl.previousElementSibling.getBoundingClientRect();return window.innerWidth-e-340}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"resizableController",new tz.S),(0,T._)(this,"rootEl",null)}}let ay=S._Y.createComponent("ArtifactPreviewPanel",ax,e=>{var t;return(0,y.jsxs)("div",{className:q()(aC.artifactPreviewPanel,{[aC.slideIn]:!e.props.disableAnimation}),style:{width:null===(t=e.resizableController.data)||void 0===t?void 0:t.width},ref:t=>{e.rootEl=t},children:[e.resizableController.isResizing&&(0,y.jsx)("div",{className:aC.draggingMask}),(0,y.jsx)("div",{className:aC.drag,style:{cursor:e.resizableController.cursor},ref:t=>{e.resizableController.root=t},onMouseEnter:()=>{e.resizableController.handleRootMouseEnter()},onMouseLeave:()=>{e.resizableController.handleRootMouseLeave()},onMouseDown:t=>{e.resizableController.resizeDirection&&(e.resizableController.handleRootMouseDown(t),e.resizableController.isResizing&&t.preventDefault())},children:(0,y.jsx)(av.o,{...e.props,className:aC.content})})]})});var ab=i(66135),af=i(76917),aw=i(18130),aS=i(84853),aA=i(3658),aj=i(2088),ak={src:"https://assets.monica.im/home-web/_next/static/media/bot-empty.a2e4c50c.png",height:200,width:200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAKlBMVEVMaXHByc6/0dG/xMvCyNPEyc7HzNG6wcnCx87JztTr7O/T193JztXGytGdocZ1AAAAC3RSTlMAHAdJD5jBO1mE/fWV70sAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA5SURBVHicHYtLDgAxCIXwWe3H9v7XnTisSAggd9HErTTAb53aAq9TLwyU9XJ1sx1rtiAzm+MfYegDKIkBAuKBE9cAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},aN=i(95782),a_=i(87520);class aT{constructor(){(0,T._)(this,"botFold",!0),(0,T._)(this,"botFavoriteFold",!0),(0,tB.rC)(this)}}(0,I.gn)([S.SB],aT.prototype,"botFold",void 0),(0,I.gn)([S.SB],aT.prototype,"botFavoriteFold",void 0);let aI=new aT;var aM={navBotsViewWrapper:"nav-bots-view-wrapper--a32nm",desktop:"desktop--wnx6A",navBotsView:"nav-bots-view--BwMaE",header:"header--M30TC",searchInput:"search-input--oNVDM",contentWrapper:"content-wrapper--qFsiv",contentLoading:"content-loading--sRR2_",content:"content--KO8iS",botsWrapper:"bots-wrapper--OKH9Y",title:"title--WMPnP",botItem:"bot-item--Juhis",active:"active--cZ1ht",botItemActions:"bot-item-actions--MnJuA",botItemAction:"bot-item-action--T6Tf_",botAvatar:"bot-avatar--ggIsq",botTitle:"bot-title--yPuEN",highlight:"highlight--ju2Aa",botType:"bot-type--yI3CU",pinned:"pinned--H2MUw",exploreBot:"explore-bot--cxLAG",icon:"icon--vOkOb",moreItem:"more-item--CmLNa",text:"text--wBjxo",scrollLoading:"scroll-loading--RoeGW",driver:"driver--sw3Nd",empty:"empty--owk21",emptyLogo:"empty-logo--eMajg",emptyText:"empty-text--Y27a6",blue:"blue--ePsQn"};class aL extends S.PN{get S(){return ei.S.Global.modules.MainWindow.BotsView}get sidebarFolded(){return eF.J.homeSidebarCollapsed}get currentBotId(){return D.Mp.currentBotId}get pinBots(){let e=D.Mp.pinBots;return this.keywords?e.filter(e=>w.m.isLike(e.name,this.keywords)):e}get recentBots(){let e=D.Mp.recentBots.filter(e=>!e.userAction.actionPinned),t=e.slice(0,3);return this.keywords?t.filter(e=>w.m.isLike(e.name,this.keywords)):e.slice(0,3)}get allBots(){return this.keywords?this.pinBots.concat(this.recentBots):this.pinBots}get showBots(){return aI.botFold?this.allBots.slice(0,this.defaultShowCount):this.allBots}get resBotCount(){return this.keywords&&aI.botFold?this.allBots.length-this.showBots.length:""}get style(){return this.sidebarFolded?{width:0,overflow:"hidden"}:{width:f.o.isDesktop?250:264,opacity:1,overflow:"hidden"}}computedFirstScreenShowCount(){let e=this.scrollerContainer;e&&(this.firstScreenShowCount=Math.floor(e.clientHeight/34)+15)}handleInputChange(e){this.keywords=e,this.conversationsLoading=!0,this.conversationList=[],this.debounceLoadData()}async loadData(e){try{let{itemsList:t=[],total:i=0}=await er.y.getConversationList({keyword:this.keywords,limit:"refresh"===e&&this.firstScreenShowCount||this.limit,offset:"refresh"===e?0:this.conversationList.length},{useCache:!1});this.total=i,"refresh"===e?this.conversationList=t:this.conversationList=this.conversationList.concat(t)}catch(t){let e=w.m.formatErrorMsg(t);ef.M.error(e)}this.conversationsLoading=!1}async loadCacheData(){let{itemsList:e=[]}=await er.y.getConversationList({offset:0,limit:this.limit},{cacheOnly:!0});this.conversationList=e,this.loadData("refresh")}async loadCacheFavoriteData(){let e=await er.y.getCacheFavoriteList();this.favoriteList=e,this.refreshFavoriteData()}async refreshFavoriteData(){let e=await er.y.getRemoteFavoriteList({offset:0,limit:100});this.favoriteList=e.itemsList||[]}onViewCreate(){this.computedFirstScreenShowCount(),this.isCreate=!0,this.loadCacheData(),this.loadCacheFavoriteData();let e=er.y.on("conversationChange",e=>{if("delete"===e.type)this.conversationList=this.conversationList.filter(t=>{var i;return t.conversationId&&!(null===(i=e.conversationIdList)||void 0===i?void 0:i.includes(t.conversationId))}),this.favoriteList=this.favoriteList.filter(t=>{var i;return t.conversationId&&!(null===(i=e.conversationIdList)||void 0===i?void 0:i.includes(t.conversationId))});else if("update"===e.type){let t=this.conversationList.findIndex(t=>t.conversationId===e.conversation.conversationId);t>-1?this.conversationList[t]={...this.conversationList[t],...e.conversation}:this.conversationList.unshift(e.conversation);let i=this.favoriteList.findIndex(t=>t.conversationId===e.conversation.conversationId);i>-1?this.favoriteList[i]={...this.favoriteList[i],...e.conversation}:this.favoriteList.unshift(e.conversation),this.favoriteList=this.favoriteList.flatMap(e=>e.isFavorite?[e]:[])}else"refresh"===e.type&&(this.loadData("refresh"),this.refreshFavoriteData())}),t=er.y.on("favoriteListChange",e=>{this.favoriteList=e});this.destroyServiceListener=()=>{e.destroy(),t.destroy()}}onViewDestroy(){this.destroyServiceListener()}destroyServiceListener(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"defaultShowCount",5),(0,T._)(this,"scrollerContainer",null),(0,T._)(this,"keywords",""),(0,T._)(this,"conversationsLoading",!1),(0,T._)(this,"total",0),(0,T._)(this,"conversationList",[]),(0,T._)(this,"favoriteList",[]),(0,T._)(this,"isCreate",!1),(0,T._)(this,"firstScreenShowCount",0),(0,T._)(this,"limit",30),(0,T._)(this,"handleCreateBot",()=>{e9.W.createUserBehaviorEvent({eventName:"bots_create_click",source:"nav"}),(0,a_.Q)({insertTarget:"dialogRoot"})}),(0,T._)(this,"handleBotItemClick",e=>{eL.M.createUserBehaviorEvent({eventName:"bots_item_click",source:"nav"}),eF.J.onTabChange("chat"),D.Mp.openBot(e.uid),e.controller instanceof ac._&&e.controller.newConversation()}),(0,T._)(this,"debounceLoadData",(0,eb.Z)(()=>{this.loadData("refresh")},300))}}(0,I.gn)([S.SB],aL.prototype,"keywords",void 0),(0,I.gn)([S.SB],aL.prototype,"conversationsLoading",void 0),(0,I.gn)([S.SB],aL.prototype,"total",void 0),(0,I.gn)([S.SB],aL.prototype,"conversationList",void 0),(0,I.gn)([S.SB],aL.prototype,"favoriteList",void 0),(0,I.gn)([S.SB],aL.prototype,"isCreate",void 0),(0,I.gn)([S.SB],aL.prototype,"firstScreenShowCount",void 0),(0,I.gn)([tB.Fl],aL.prototype,"S",null),(0,I.gn)([tB.Fl],aL.prototype,"sidebarFolded",null),(0,I.gn)([tB.Fl],aL.prototype,"currentBotId",null),(0,I.gn)([tB.Fl],aL.prototype,"pinBots",null),(0,I.gn)([tB.Fl],aL.prototype,"recentBots",null),(0,I.gn)([tB.Fl],aL.prototype,"allBots",null),(0,I.gn)([tB.Fl],aL.prototype,"showBots",null),(0,I.gn)([tB.Fl],aL.prototype,"resBotCount",null),(0,I.gn)([tB.Fl],aL.prototype,"style",null);var aB=i(36401),aE=i(56105),aD=i(90226),aP=i(53826),aF=i(68339),aR=i(20995),aV=i(57131),aU={conversation:"conversation--WoSx3",conversationList:"conversation-list--X57_M",conversationTitle:"conversation-title--B6oTN",title:"title--oipxn",recentTitle:"recent-title--Ivxab",actionBtn:"action-btn--rWGKD",disabled:"disabled--rgq7n",selectOperation:"select-operation--HjVRF",selectOperationRight:"select-operation-right--ehEoC",content:"content--axPNy",conversationItem:"conversation-item--l2yDC",conversationDay:"conversation-day--Rl7jH",selectCheckbox:"select-checkbox--p0auI",incognitoModeMask:"incognito-mode-mask--KSrJr"},az=i(24900),aO=i(77099),aW=i(80406);class aH extends S.PN{get S(){return ei.S.Global.modules.MainWindow.NavBotsView.NavConversationHistory}get isSelectAll(){return this.selectedConvIdList.length===this.props.conversationList.length&&this.selectedConvIdList.length>0}get isIndeterminate(){return!this.isSelectAll&&this.selectedConvIdList.length>0}get resConvCount(){return Math.min(this.props.conversationList.length,10)-3}get filterConvList(){return this.props.keywords?{[this.S.conversation]:this.props.conversationList}:this.classifyByDay(this.props.conversationList.slice().sort((e,t)=>{if(e.updatedAt&&t.updatedAt){let i=new Date(e.updatedAt);return new Date(t.updatedAt).getTime()-i.getTime()}return 0}))}get renderFavoriteList(){return aI.botFavoriteFold?this.props.favoriteList.slice(0,3):this.props.favoriteList}async loadData(){let e=await er.y.fetchFavoriteGroupList({useCache:!0,autoUpdate:!0});this.groupList=e,er.y.on("favoriteGroupListChange",e=>{this.groupList=e})}onViewCreate(){this.loadData()}onViewDestroy(){}getConvItemLink(e){let{chatBotUid:t,chatBotName:i,conversationId:o}=e;if(!t||!i||!o)return;let a=aO.l.createPageParamsUrl({tab:"chat",botName:i,botUid:t,convId:o},"home");return w.m.genFullUrl(a)}handleOpenConv(e){let t=this.getConvItemLink(e);window.open(t,"_blank","noreferrer")}handleConvDoubleClick(e,t){!f.o.isDesktop||e.metaKey||e.altKey||e.shiftKey||e.ctrlKey||(e.preventDefault(),e9.W.createUserBehaviorEvent({eventName:"nav_conversation_double_click"}),this.handleOpenNewWindow(t))}handleOpenNewWindow(e){if(f.o.isDesktop){var t;tL.y.getService().openChatWindow(e),null===(t=D.Mp.getActiveChatBotController())||void 0===t||t.newConversation()}}async handleCollectConvIconClick(e){let t=!e.isFavorite;e.isFavorite=t,t||delete e.collectionGroupUid,t&&(0,aW.O)({insertTarget:{type:"botContainer",botId:this.beforeConvItem.chatBotUid},convItem:e});try{await az.Tn.collectConversation({conversationId:e.conversationId,action:t}),er.y.updateConversationByLocal({...e,isFavorite:t})}catch(e){ef.M.error(w.m.formatMonicaSdkError(e))}}handleDelConvIconClick(e){this.beforeConvItem=e,(0,t7.B)({content:ei.S.Global.modules.MainWindow.ConvHistoryDrawer.deleteContent,okText:ei.S.Global.modules.MainWindow.ConvHistoryDrawer.delete,okBtnType:"danger",onOk:async()=>(this.handleDelConvDialogConfirm().catch(e=>{ef.M.error(w.m.formatErrorMsg(e))}),!0),insertTarget:"mainWindow"})}async handleDelConvDialogConfirm(){try{return az.Tn.removeConversationHistory({conversationId:this.beforeConvItem.conversationId,botId:this.beforeConvItem.chatBotUid}),ef.M.success(ei.S.Global.modules.MainWindow.ConvHistoryDrawer.conversationDeleted),er.y.deleteConversation(this.beforeConvItem.conversationId),D.Mp.currentConversationId===this.beforeConvItem.conversationId&&this.openNewConversation(),!0}catch(e){return ef.M.error(w.m.formatMonicaSdkError(e)),!1}}openNewConversation(){var e;D.Mp.openBot("monica"),(null===(e=D.Mp.currentBot)||void 0===e?void 0:e.controller)instanceof ac._&&D.Mp.currentBot.controller.newConversation()}async handleConvClick(e){if(!e.conversationId||!e.chatBotUid)return;let t=await D.Mp.getRemoteBotItemById(e.chatBotUid);if(!t)return;"web-home"===f.o.entryType&&history.replaceState(null,"",location.pathname);let i=t.controller;if(await D.Mp.openBot(e.chatBotUid),i instanceof ac._){i.conversationId!==e.conversationId&&await i.loadConversation(e.conversationId,"cacheWithUpdate");return}i instanceof as.o&&i.loadTask(e.conversationId)}async handleViewResources(e){await this.handleConvClick(e),this.nextTick(()=>{au.p.openWindow("file")})}handleBatchDelete(){(0,t7.B)({content:this.S.batchDeleteContent,okText:this.S.delete,okBtnType:"danger",onOk:()=>(er.y.deleteConversationList({conversationIdList:this.selectedConvIdList}).catch(e=>{ef.M.error(w.m.formatMonicaSdkError(e))}),D.Mp.currentConversationId&&this.selectedConvIdList.includes(D.Mp.currentConversationId)&&this.openNewConversation(),this.selectedConvIdList=[],this.enableSelectMode=!1,ef.M.success(this.S.conversationDeleted),!0),insertTarget:"mainWindow"})}handleSelectAllChange(e){e||this.isIndeterminate?this.selectedConvIdList=this.props.conversationList.flatMap(e=>e.conversationId?[e.conversationId]:[]):this.selectedConvIdList=[]}handleSelectConv(e,t){let i=this.selectedConvIdList.filter(e=>e!==t.conversationId);e?this.selectedConvIdList=[...i,t.conversationId]:this.selectedConvIdList=i}handleClearConvIconClick(){let e=D.Mp.currentConversationId;(0,t7.B)({content:this.S.clearAllConversations,okText:this.S.delete,okBtnType:"danger",onOk:async()=>{try{return await az.Tn.clearConversationList({botUid:"all",deletePolicy:"exclude_favorite",excludeConversationIdList:e?[e]:[]}),er.y.refreshConversationList(),!0}catch(e){return ef.M.error(w.m.formatMonicaSdkError(e)),!1}},insertTarget:"mainWindow"})}classifyByDay(e){return e.reduce((e,t)=>{let i=new Date(t.updatedAt),o=this.formatDate(i);return e[o]||(e[o]=[]),e[o].push(t),e},{})}formatDate(e){let t=new Date,i=new Date(t);i.setDate(i.getDate()-1);let o=new Date(t);o.setDate(o.getDate()-7);let a=new Date(t);return(a.setDate(a.getDate()-30),e.toDateString()===t.toDateString())?this.S.today:e.toDateString()===i.toDateString()?this.S.yesterday:e>o?this.S.sevenDays:e>a?this.S.thirtyDaysAgo:this.S.older}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"enableSelectMode",!1),(0,T._)(this,"selectedConvIdList",[]),(0,T._)(this,"groupList",[]),(0,T._)(this,"beforeConvItem",{})}}(0,I.gn)([S.SB],aH.prototype,"enableSelectMode",void 0),(0,I.gn)([S.SB],aH.prototype,"selectedConvIdList",void 0),(0,I.gn)([S.SB],aH.prototype,"groupList",void 0),(0,I.gn)([tB.Fl],aH.prototype,"S",null),aH=(0,I.gn)([S.Tt],aH);var aG=i(35673),aQ=i(69645),aJ=i(60976);class aq extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var aK=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M3.875 2.625H12.125C12.8154 2.625 13.375 3.18464 13.375 3.875V7.125H9.3125C8.00082 7.125 6.9375 8.18832 6.9375 9.5V13.375H3.875C3.18464 13.375 2.625 12.8154 2.625 12.125V3.875C2.625 3.18464 3.18464 2.625 3.875 2.625ZM8.1875 14.625H6.9375H3.875C2.49429 14.625 1.375 13.5057 1.375 12.125V3.875C1.375 2.49429 2.49429 1.375 3.875 1.375H12.125C13.5057 1.375 14.625 2.49429 14.625 3.875V12.125C14.625 13.5057 13.5057 14.625 12.125 14.625H8.1875ZM8.1875 13.375V9.5C8.1875 8.87868 8.69118 8.375 9.3125 8.375H13.375V12.125C13.375 12.8154 12.8154 13.375 12.125 13.375H8.1875Z\\" fill=\\"#55555D\\"/>\\n\\n","viewBox":"0 0 16 16"}');let aY=S._Y.createComponent("WindowIcon",aq,e=>(0,y.jsx)(R.s,{...e.props,name:"WindowIcon",iconData:aK}));var aZ=i(49639),aX=i(21747),a$=i(63134),a0=i(43775);class a1 extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var a2=JSON.parse('{"fill":"none","content":"\\n<g id=\\"share\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M7.57569 1.57564C7.81 1.34132 8.1899 1.34132 8.42422 1.57564L11.0909 4.2423C11.3252 4.47662 11.3252 4.85652 11.0909 5.09083C10.8566 5.32515 10.4767 5.32515 10.2424 5.09083L8.59995 3.44843V9.9999C8.59995 10.3313 8.33132 10.5999 7.99995 10.5999C7.66858 10.5999 7.39995 10.3313 7.39995 9.9999V3.44843L5.75755 5.09083C5.52324 5.32515 5.14334 5.32515 4.90902 5.09083C4.67471 4.85652 4.67471 4.47662 4.90902 4.2423L7.57569 1.57564ZM4.58027 6.73321C4.60863 6.73322 4.6374 6.73324 4.66662 6.73324C4.99799 6.73324 5.26662 7.00186 5.26662 7.33324C5.26662 7.66461 4.99799 7.93324 4.66662 7.93324C4.00801 7.93324 3.79641 7.93839 3.63761 7.98094C3.15448 8.11039 2.77711 8.48776 2.64766 8.97089C2.60511 9.12969 2.59995 9.34129 2.59995 9.9999V10.7999C2.59995 11.3699 2.60042 11.7612 2.62521 12.0646C2.64943 12.361 2.69383 12.5203 2.75254 12.6355C2.88677 12.8989 3.10094 13.1131 3.36437 13.2473C3.4796 13.306 3.63882 13.3504 3.93522 13.3746C4.23862 13.3994 4.63 13.3999 5.19995 13.3999H10.8C11.3699 13.3999 11.7613 13.3994 12.0647 13.3746C12.3611 13.3504 12.5203 13.306 12.6355 13.2473C12.899 13.1131 13.1131 12.8989 13.2474 12.6355C13.3061 12.5203 13.3505 12.361 13.3747 12.0646C13.3995 11.7612 13.4 11.3699 13.4 10.7999V9.9999C13.4 9.34129 13.3948 9.12969 13.3522 8.97089C13.2228 8.48776 12.8454 8.11039 12.3623 7.98094C12.2035 7.93839 11.9919 7.93324 11.3333 7.93324C11.0019 7.93324 10.7333 7.66461 10.7333 7.33324C10.7333 7.00186 11.0019 6.73324 11.3333 6.73324C11.3625 6.73324 11.3913 6.73322 11.4196 6.73321C11.9555 6.73297 12.3406 6.73279 12.6729 6.82183C13.5701 7.06224 14.2709 7.76307 14.5114 8.66031C14.6004 8.99259 14.6002 9.37765 14.6 9.91355C14.6 9.94191 14.6 9.97069 14.6 9.9999V10.825C14.6 11.3637 14.6 11.8043 14.5707 12.1624C14.5404 12.533 14.4758 12.8677 14.3166 13.1803C14.0673 13.6695 13.6696 14.0672 13.1803 14.3165C12.8677 14.4758 12.533 14.5404 12.1624 14.5707C11.8044 14.5999 11.3638 14.5999 10.8251 14.5999H5.17482C4.63611 14.5999 4.19555 14.5999 3.8375 14.5707C3.46689 14.5404 3.13217 14.4758 2.81958 14.3165C2.33036 14.0672 1.93261 13.6695 1.68334 13.1803C1.52406 12.8677 1.45947 12.533 1.42919 12.1624C1.39994 11.8043 1.39995 11.3637 1.39995 10.825L1.39995 9.9999C1.39995 9.97069 1.39994 9.94191 1.39993 9.91355C1.39968 9.37765 1.39951 8.99259 1.48855 8.66031C1.72896 7.76307 2.42978 7.06224 3.32702 6.82183C3.65931 6.73279 4.04437 6.73297 4.58027 6.73321Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let a3=S._Y.createComponent("ShareV2Icon",a1,e=>(0,y.jsx)(R.s,{...e.props,name:"ShareV2Icon",iconData:a2}));var a6=i(40449),a5=i(97703),a4=i(91571);class a9 extends S.PN{get S(){return ei.S.Global.modules.MainWindow.NavBotsView.NavConversationHistory.NavConversationPopoverMenu}get groupList(){return this.navConversationHistoryVm.groupList}get renderGroupList(){let e=[...this.groupList],t=this.groupList.find(e=>e.uid===(this.props.convItem.collectionGroupUid||"default"));return t&&(e.splice(e.indexOf(t),1),e.unshift(t)),e}onViewCreate(){}onViewDestroy(){}handleEditTitleClick(){(0,a4.T)({convItem:this.props.convItem,insertTarget:"dialogRoot"})}handleMoveToGroup(e){let{convItem:t}=this.props;t.conversationId&&er.y.moveFavoriteGroup(t,e).then(()=>{ef.M.success(this.S.moveSuccess),this.moveGroupPopoverOpen=!1,this.props.selectCallBack&&this.props.selectCallBack(e)})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"navConversationHistoryVm",(0,S.qp)(aH)),(0,T._)(this,"moveGroupPopoverOpen",!1)}}(0,I.gn)([S.Do],a9.prototype,"navConversationHistoryVm",void 0),(0,I.gn)([S.SB],a9.prototype,"moveGroupPopoverOpen",void 0),(0,I.gn)([S.Fl],a9.prototype,"S",null),(0,I.gn)([S.Fl],a9.prototype,"groupList",null),(0,I.gn)([S.Fl],a9.prototype,"renderGroupList",null);let a7=S._Y.createComponent("NavConversationPopoverMenu",a9,e=>{let{convItem:t}=e.props,i=t.isFavorite,o=[tX.tW.searchAgent,tX.tW.writingAgent,tX.tW.autoAgent].includes(t.chatBotUid||""),a=t.collectionGroupUid;return(0,y.jsxs)(aR.h,{maxListHeight:320,children:[(0,y.jsx)(aQ.X,{content:e.S.rename,icon:(0,y.jsx)(t_.J,{size:16,name:"conv-edit",color:"var(--theme-icon-tertiary)"}),onClick:()=>{e.handleEditTitleClick()}}),!o&&(0,y.jsx)(aQ.X,{content:e.S.viewFilesInChat,icon:(0,y.jsx)(aJ.B,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:async()=>{e.navConversationHistoryVm.handleViewResources(t)}}),(0,y.jsx)(aQ.X,{content:e.S.newTab,icon:(0,y.jsx)(t_.J,{size:16,name:"openLink",color:"var(--theme-icon-tertiary)"}),onClick:()=>{e.navConversationHistoryVm.handleOpenConv(t)}}),f.o.isDesktop&&(0,y.jsx)(aQ.X,{content:e.S.newWindow,icon:(0,y.jsx)(aY,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{e.navConversationHistoryVm.handleOpenNewWindow(t)}}),(0,y.jsx)(aQ.X,{content:i?e.S.unfavorite:e.S.addToFavorites,icon:i?(0,y.jsx)(aZ.p,{size:16,color:"var(--theme-icon-tertiary)"}):(0,y.jsx)(aX.r,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{e.navConversationHistoryVm.handleCollectConvIconClick(t)}}),(0,y.jsx)("div",{className:"move-group-item--Br3HB",onClick:e=>{e.stopPropagation()},children:(0,y.jsx)(tK.x,{trigger:"hover",open:e.moveGroupPopoverOpen,onOpenChange:t=>{e.moveGroupPopoverOpen=t},placement:"rightTop",closeAfterContentClick:!0,destroyTooltipOnHide:!0,content:(0,y.jsxs)(aR.h,{width:200,children:[e.renderGroupList.map(t=>{let i=t.uid===a;return(0,y.jsx)(aQ.X,{content:t.name,isActive:i,onClick:()=>{e.handleMoveToGroup(t.uid)},customNode:i&&(0,y.jsx)(a$.n,{size:16,color:"var(--theme-icon-brand)"})},t.uid)}),(0,y.jsx)(a5.S,{})]}),children:(0,y.jsx)(aQ.X,{className:q()({"dropdown-menu-item-hover--O1WhO":e.moveGroupPopoverOpen}),content:e.S.move,icon:(0,y.jsx)(a0.t,{size:16,color:"var(--theme-icon-tertiary)"})})})}),!o&&(0,y.jsx)(aQ.X,{content:e.S.share,icon:(0,y.jsx)(a3,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:async()=>{await e.navConversationHistoryVm.handleConvClick(t),setTimeout(()=>{var e;null===(e=D.Mp.getActiveChatBotController())||void 0===e||e.openShareMenu()},200)}}),(0,y.jsx)(aQ.X,{content:e.S.delete,icon:(0,y.jsx)(a6.X,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:async()=>{e.navConversationHistoryVm.handleDelConvIconClick(t)}})]})});var a8={conversationNameItemWrapper:"conversation-name-item-wrapper--ag1S3",active:"active--YZHyd",conversationNameItem:"conversation-name-item--2Z6Pn",conversationMore:"conversation-more--f9WCA",name:"name--4EvfE",actionItem:"action-item--FBXoo",nameWrapper:"name-wrapper--UnqpK",highlight:"highlight--ZeKZ1",timeWrapper:"time-wrapper--ugh66",text:"text--phvjA"};class ne extends S.PN{get S(){return ei.S.Global.modules.MainWindow.NavBotsView.NavConversationHistory.NavConversationItem}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"navConversationHistoryVm",(0,S.qp)(aH)),(0,T._)(this,"moveGroupPopoverOpen",!1)}}(0,I.gn)([S.Do],ne.prototype,"navConversationHistoryVm",void 0),(0,I.gn)([S.SB],ne.prototype,"moveGroupPopoverOpen",void 0);let nt=S._Y.createComponent("NavConversationItem",ne,e=>{var t,i,o;let{convItem:a,leftExtra:n,beforeClick:r,keywords:s=""}=e.props,l=(null===(t=a.infoData)||void 0===t?void 0:t.hasArtifact)||(null===(i=a.infoData)||void 0===i?void 0:i.hasDoc)||(null===(o=a.infoData)||void 0===o?void 0:o.hasImg),c=a.lastMessageTime||a.updatedAt||a.createdAt;return(0,y.jsxs)("div",{className:q()(a8.conversationNameItemWrapper,{[a8.active]:D.Mp.currentConversationId===a.conversationId||e.moveGroupPopoverOpen}),children:[n,(0,y.jsxs)("a",{href:e.navConversationHistoryVm.getConvItemLink(a),target:"_blank",rel:"noreferrer",className:a8.conversationNameItem,onClick:t=>{!t.metaKey&&!t.altKey&&!t.shiftKey&&!t.ctrlKey&&(t.preventDefault(),(!r||r())&&(e9.W.createUserBehaviorEvent({eventName:"nav_conversation_click"}),e.navConversationHistoryVm.handleConvClick(a)))},onDoubleClick:t=>{e.navConversationHistoryVm.handleConvDoubleClick(t,a)},children:[(0,y.jsxs)("div",{className:a8.nameWrapper,children:[(0,y.jsx)(eu(),{searchWords:s.split(" "),textToHighlight:a.title||eh.Q0,highlightClassName:q()(a8.highlight),className:a8.name}),l&&(0,y.jsx)(aG.K,{size:14,color:"var(--theme-icon-quaternary)",className:a8.actionItem,title:e.S.resourceTips})]}),s?(0,y.jsx)("div",{className:a8.timeWrapper,children:em.L.fromNow(c)}):(0,y.jsx)("div",{className:q()(a8.conversationMore,{[a8.active]:e.moveGroupPopoverOpen}),onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,y.jsx)(tK.x,{open:e.moveGroupPopoverOpen,onOpenChange:t=>{e.moveGroupPopoverOpen=t},trigger:"click",closeAfterContentClick:!0,placement:"bottom",content:(0,y.jsx)(a7,{convItem:a,selectCallBack:t=>{var i,o;null===(i=(o=e.props).menuSelectCallBack)||void 0===i||i.call(o,t),e.moveGroupPopoverOpen=!1}}),children:(0,y.jsx)("div",{className:a8.text,children:(0,y.jsx)(t_.J,{size:16,name:"memoMobileMore",color:"currentColor"})})})})]},a.conversationId)]},a.conversationId)});class ni extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var no=JSON.parse('{"fill":"none","content":"\\n<g id=\\"folder\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M6.74835 2.6401C6.65485 2.60785 6.53691 2.60002 6.0148 2.60002H3.46661C3.08334 2.60002 2.83197 2.60048 2.63974 2.61619C2.45451 2.63132 2.37761 2.65756 2.33368 2.67995C2.1957 2.75025 2.08351 2.86244 2.01321 3.00042C1.99082 3.04435 1.96458 3.12125 1.94945 3.30648C1.93467 3.48734 1.93339 3.72054 1.93329 4.06668H7.69579L7.38626 3.44762C7.15277 2.98064 7.09302 2.87865 7.02236 2.80944C6.9447 2.73339 6.85111 2.67554 6.74835 2.6401ZM9.03743 4.06668L8.45957 2.91097C8.44766 2.88714 8.4359 2.86355 8.42426 2.84021C8.24574 2.48218 8.09546 2.18078 7.86202 1.95214C7.65729 1.75162 7.41054 1.59913 7.13964 1.50568C6.83074 1.39914 6.49397 1.39951 6.09391 1.39996C6.06781 1.39999 6.04145 1.40002 6.0148 1.40002L3.44301 1.40002C3.08976 1.40001 2.78898 1.4 2.54202 1.42018C2.28258 1.44137 2.03018 1.4878 1.7889 1.61074C1.42512 1.79609 1.12935 2.09186 0.943998 2.45564C0.821055 2.69692 0.774633 2.94932 0.753436 3.20876C0.733259 3.45572 0.733267 3.7565 0.733277 4.10975L0.733277 10.8252C0.73327 11.3639 0.733264 11.8044 0.762518 12.1625C0.792798 12.5331 0.857387 12.8678 1.01666 13.1804C1.26593 13.6696 1.66368 14.0674 2.1529 14.3166C2.46549 14.4759 2.80021 14.5405 3.17082 14.5708C3.52887 14.6 3.96944 14.6 4.50814 14.6H11.4917C12.0304 14.6 12.471 14.6 12.8291 14.5708C13.1997 14.5405 13.5344 14.4759 13.847 14.3166C14.3362 14.0674 14.734 13.6696 14.9832 13.1804C15.1425 12.8678 15.2071 12.5331 15.2374 12.1625C15.2666 11.8044 15.2666 11.3639 15.2666 10.8252V7.84155C15.2666 7.30285 15.2666 6.86228 15.2374 6.50423C15.2071 6.13362 15.1425 5.7989 14.9832 5.48631C14.734 4.99709 14.3362 4.59934 13.847 4.35007C13.5344 4.19079 13.1997 4.12621 12.8291 4.09593C12.471 4.06667 12.0304 4.06668 11.4917 4.06668L9.03743 4.06668ZM8.65455 5.26668C8.66289 5.26686 8.67124 5.26686 8.6796 5.26668H11.4666C12.0366 5.26668 12.4279 5.26715 12.7313 5.29194C13.0277 5.31616 13.187 5.36056 13.3022 5.41928C13.5656 5.5535 13.7798 5.76767 13.914 6.0311C13.9727 6.14633 14.0171 6.30555 14.0414 6.60195C14.0661 6.90535 14.0666 7.29673 14.0666 7.86668V10.8C14.0666 11.37 14.0661 11.7614 14.0414 12.0648C14.0171 12.3612 13.9727 12.5204 13.914 12.6356C13.7798 12.899 13.5656 13.1132 13.3022 13.2474C13.187 13.3061 13.0277 13.3505 12.7313 13.3748C12.4279 13.3996 12.0366 13.4 11.4666 13.4H4.53328C3.96332 13.4 3.57194 13.3996 3.26854 13.3748C2.97214 13.3505 2.81292 13.3061 2.69769 13.2474C2.43426 13.1132 2.22009 12.899 2.08587 12.6356C2.02715 12.5204 1.98275 12.3612 1.95853 12.0648C1.93374 11.7614 1.93328 11.37 1.93328 10.8V5.26668H8.65455Z\\" fill=\\"#868692\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let na=S._Y.createComponent("FolderIcon",ni,e=>(0,y.jsx)(R.s,{...e.props,name:"FolderIcon",iconData:no}));var nn=i(44069),nr={collapse:"collapse--hi33g",item:"item--E1lzW",header:"header--hclMA",label:"label--vgjle",content:"content--c6o7X"};class ns extends S.PN{handleItemClick(e){let t=this.activeKey.indexOf(e),i=[...this.activeKey];-1===t?i.push(e):i.splice(t,1),this.props.onChange(i)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"activeKey",[]),(0,T._)(this,"expandIcon",null),(0,T._)(this,"expandIconPosition","end")}}(0,I.gn)([(0,S.qZ)("activeKey")],ns.prototype,"activeKey",void 0),(0,I.gn)([(0,S.qZ)("expandIcon")],ns.prototype,"expandIcon",void 0),(0,I.gn)([(0,S.qZ)("expandIconPosition")],ns.prototype,"expandIconPosition",void 0);let nl=S._Y.createComponent("CollapseV2",ns,e=>{let{className:t,items:i}=e.props;return(0,y.jsx)("div",{className:q()(nr.collapse,t),children:i.map(t=>(0,y.jsx)(nc,{item:t,vm:e},t.key))})}),nc=(0,F.Pi)(function(e){let{vm:t,item:i}=e,o=t.activeKey.includes(i.key);return(0,y.jsxs)("div",{className:q()(nr.item,{[nr.active]:o}),children:[(0,y.jsx)("div",{className:nr.header,onClick:()=>{t.handleItemClick(i.key)},children:(0,y.jsxs)("div",{className:nr.label,children:["start"===t.expandIconPosition&&t.expandIcon,i.label,"end"===t.expandIconPosition&&t.expandIcon]})}),(0,y.jsx)("div",{className:nr.content,style:{height:o?"unset":"0px"},children:i.children})]})});var nd=i(85209),np=i(34896),nm={navFavoriteList:"nav-favorite-list--OPmQL",header:"header--P0trE",title:"title--kT41w",plusAdd:"plus-add--NB80p",foldItem:"fold-item--Pp9wJ",collapse:"collapse--dq_em",groupItemWrapper:"group-item-wrapper--BQZxx",inputContent:"input-content--IrwHq",groupItem:"group-item--gBA4i",icon:"icon--Qb_pG",emptyGroupWrapper:"empty-group-wrapper--kvKaz",emptyGroup:"empty-group--e3MoY",arrowIcon:"arrow-icon--y_zJp",isGroup:"is-group--iQp_K"};class nh extends S.PN{get S(){return ei.S.Global.modules.MainWindow.NavBotsView.NavConversationHistory.NavFavoriteList}get groupList(){return this.navConversationHistoryVm.groupList.map(e=>({...e,id:e.uid}))}get renderGroupList(){let e=this.groupList;return this.isFold&&(e=e.slice(0,this.foldFavoriteCount)),e.map(e=>({...e,children:this.favoriteList.flatMap(t=>t.collectionGroupUid===e.uid?[t]:[])}))}get renderFavoriteList(){let e=this.props.favoriteList.flatMap(e=>e.collectionGroupUid&&"default"!==e.collectionGroupUid?[]:[{...e,collectionGroupUid:""}]);return this.isFold?this.renderGroupList.length>=this.foldFavoriteCount?[]:e.slice(0,this.foldFavoriteCount-this.renderGroupList.length):e}onViewCreate(){tV.ll.getUiFlag("chatGroupExpandKeys").then(e=>{e&&(this.activeKeys=e)})}onViewDestroy(){}getNavFavoriteListByGroup(e){return this.props.favoriteList.flatMap(t=>t.collectionGroupUid===e.uid?[{...t,id:t.conversationId}]:[])}menuSelectExpand(e){Array.isArray(this.activeKeys)?this.activeKeys.push(e):this.activeKeys=[e],this.groupList.findIndex(t=>t.uid===e)>=this.foldFavoriteCount&&(this.isFold=!1)}handleActiveKeysChange(e){this.activeKeys=e,tV.ll.setUiFlag("chatGroupExpandKeys",e)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"foldFavoriteCount",3),(0,T._)(this,"navConversationHistoryVm",(0,S.qp)(aH)),(0,T._)(this,"isFold",!0),(0,T._)(this,"activeKeys",[]),(0,T._)(this,"createGroupValue",""),(0,T._)(this,"favoriteList",[])}}(0,I.gn)([S.Do],nh.prototype,"navConversationHistoryVm",void 0),(0,I.gn)([S.SB],nh.prototype,"isFold",void 0),(0,I.gn)([S.SB],nh.prototype,"activeKeys",void 0),(0,I.gn)([S.SB],nh.prototype,"createGroupValue",void 0),(0,I.gn)([(0,S.qZ)("favoriteList")],nh.prototype,"favoriteList",void 0),(0,I.gn)([S.Fl],nh.prototype,"S",null),(0,I.gn)([S.Fl],nh.prototype,"groupList",null),(0,I.gn)([S.Fl],nh.prototype,"renderGroupList",null);let ng=S._Y.createComponent("NavFavoriteList",nh,e=>{let{keywords:t=""}=e.props;return e.favoriteList.length?(0,y.jsxs)("div",{className:nm.navFavoriteList,children:[(0,y.jsxs)("div",{className:nm.header,children:[(0,y.jsx)("div",{className:nm.title,children:e.S.favorites}),(0,y.jsx)("div",{className:nm.plusAdd,onClick:()=>{(0,np.Q)({insertTarget:"mainWindow",type:"add"})},children:(0,y.jsx)(eK.o,{size:22,color:"var(--theme-icon-quaternary)",className:nm.actionItem})})]}),(0,y.jsx)(nu,{vm:e,keywords:t}),(0,y.jsxs)("div",{className:nm.foldItem,onClick:()=>{e.isFold=!e.isFold},children:[e.isFold?e.S.more:e.S.fold,(0,y.jsx)(aj.v,{size:14,color:"currentColor",className:nm.arrowIcon,style:{transform:e.isFold?"rotate(0deg)":"rotate(180deg)"}})]})]}):null}),nu=(0,F.Pi)(function(e){let{vm:t,keywords:i}=e;return(0,y.jsxs)(y.Fragment,{children:[t.renderGroupList.map(e=>(0,y.jsx)(nl,{activeKey:t.activeKeys,expandIconPosition:"start",className:nm.collapse,items:[{key:e.uid,label:(0,y.jsx)(nd.s,{className:nm.groupItemWrapper,inputContentClassName:nm.inputContent,moreIconAlign:"vertical",content:(0,y.jsxs)("div",{className:nm.groupItem,children:[(0,y.jsx)(eG.X,{size:14,color:"var(--theme-icon-quaternary)",className:nm.arrowIcon,style:{transform:t.activeKeys.includes(e.uid)?"rotate(90deg)":"rotate(0deg)"}}),(0,y.jsx)(na,{className:nm.icon,size:16,color:"var(--theme-icon-quaternary)"}),(0,y.jsx)(nn.x,{text:e.name})]}),group:e,isShowMore:"all"!==e.uid&&"default"!==e.uid}),children:(0,y.jsx)("div",{className:nm.isGroup,children:(0,y.jsx)(nv,{vm:t,favoriteList:e.children,keywords:i})})}],onChange:e=>{t.handleActiveKeysChange(e)}},e.uid)),(0,y.jsx)("div",{className:nm.groupList,children:t.renderFavoriteList.map(e=>(0,y.jsx)(nt,{convItem:e,keywords:i,menuSelectCallBack:e=>{t.menuSelectExpand(e)}},e.conversationId))})]})}),nv=(0,F.Pi)(function(e){let{vm:t,favoriteList:i,keywords:o}=e;return i.length?(0,y.jsx)("div",{className:nm.groupList,children:i.map(e=>(0,y.jsx)(nt,{convItem:e,keywords:o},e.conversationId))}):(0,y.jsx)("div",{className:nm.groupList,children:(0,y.jsx)("div",{className:nm.emptyGroupWrapper,children:(0,y.jsx)("div",{className:nm.emptyGroup,children:t.S.emptyGroup})})})}),nC=S._Y.createComponent("NavConversationHistory",aH,e=>{let{conversationList:t}=e.props;return(0,y.jsxs)("div",{className:q()(aU.conversation),children:[(0,y.jsx)(ng,{favoriteList:e.props.favoriteList,keywords:e.props.keywords}),!!t.length&&(0,y.jsxs)("div",{className:aU.conversationList,children:[(0,y.jsx)(ny,{vm:e,isIndeterminate:e.isIndeterminate}),(0,y.jsx)("div",{className:aU.content,style:{gap:8},children:Object.entries(e.filterConvList).map(t=>{let[i,o]=t;return(0,y.jsxs)("div",{className:aU.conversationItem,children:[(0,y.jsx)("div",{className:aU.conversationDay,children:i}),(0,es.Z)(o,"conversationId").map(t=>{let i=!!t.conversationId&&e.selectedConvIdList.includes(null==t?void 0:t.conversationId);return(0,y.jsx)(nt,{convItem:t,keywords:e.props.keywords,beforeClick:()=>!e.enableSelectMode||(e.handleSelectConv(!i,t),!1),leftExtra:e.enableSelectMode&&(0,y.jsx)("div",{className:aU.selectCheckbox,children:(0,y.jsx)(aB.X,{checked:i,onChange:i=>{e.handleSelectConv(i,t)}})})},t.conversationId)})]},i)})})]}),(0,y.jsx)(nx,{})]})}),nx=(0,F.Pi)(function(){return P.A.isIncognitoMode?(0,y.jsx)("div",{className:aU.incognitoModeMask}):null}),ny=(0,F.Pi)(function(e){let{vm:t,isIndeterminate:i}=e;if(t.enableSelectMode){let e=!t.selectedConvIdList.length;return(0,y.jsxs)("div",{className:q()(aU.conversationTitle,aU.recentTitle,aU.selectOperation),children:[(0,y.jsx)(aB.X,{indeterminate:i,checked:t.isSelectAll,onChange:e=>{t.handleSelectAllChange(e)},label:(0,ei.x)(t.S.itemsSelected,{count:t.selectedConvIdList.length}),onClick:e=>{e.stopPropagation()}}),(0,y.jsxs)("div",{className:aU.selectOperationRight,children:[(0,y.jsx)(tN.u,{title:t.S.batchDelete,trigger:"hover",placement:"top",children:(0,y.jsx)("div",{className:q()(aU.actionBtn,{[aU.disabled]:e}),onClick:()=>{e||t.handleBatchDelete()},children:(0,y.jsx)(aE.X,{size:16,color:e?"var(--theme-icon-disable)":"var(--theme-function-error)"})})}),(0,y.jsx)(tN.u,{title:t.S.quit,trigger:"hover",placement:"top",children:(0,y.jsx)("div",{className:aU.actionBtn,onClick:()=>{t.enableSelectMode=!1},children:(0,y.jsx)(aD.T,{size:16,color:"currentcolor"})})})]})]})}return(0,y.jsxs)("div",{className:q()(aU.conversationTitle,aU.recentTitle),children:[(0,y.jsx)("div",{className:aU.title,children:t.S.recent}),(0,y.jsx)(tK.x,{placement:"bottomLeft",trigger:"click",closeAfterContentClick:!0,content:(0,y.jsxs)(aR.h,{children:[(0,y.jsx)(aV.X,{icon:(0,y.jsx)(aP.r,{size:16,color:"var(--theme-icon-tertiary)"}),content:t.S.select,onClick:()=>{t.enableSelectMode=!0}}),(0,y.jsx)(aV.X,{icon:(0,y.jsx)(aE.X,{size:16,color:"var(--theme-icon-tertiary)"}),content:t.S.clearAllConversations,onClick:()=>{t.handleClearConvIconClick()}})]}),children:(0,y.jsx)("div",{className:aU.actionBtn,children:(0,y.jsx)(aF.n,{size:16,color:"currentcolor"})})})]})}),nb=S._Y.createComponent("NavBotsView",aL,e=>{let t=e.conversationList,i=e.total>t.length;return(0,y.jsx)("div",{style:e.style,className:q()(aM.navBotsViewWrapper,{[aM.desktop]:f.o.isDesktop}),ref:t=>{e.scrollerContainer=t},children:(0,y.jsx)(aw.x,{className:q()(aM.navBotsView),children:o=>{let{scrollableNodeClassName:a,contentNodeClassName:n}=o;return(0,y.jsx)(ev.v,{className:q()(a),hasMore:i,dataLength:t.length,next:()=>{e.loadData("loadMore")},loader:(0,y.jsx)("div",{className:aM.scrollLoading,children:(0,y.jsx)(eC.g,{type:"geist"})}),children:(0,y.jsx)("div",{className:q()(n,aM.contentWrapper),children:(0,y.jsx)(nf,{vm:e})})})}})})}),nf=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:aM.header,children:[(0,y.jsx)(O.I,{disabled:P.A.isIncognitoMode,textEllipsis:!0,value:t.keywords,className:aM.searchInput,onChange:t.handleInputChange.bind(t),placeholder:t.S.searchConversations,size:"default",type:"search"}),(0,y.jsx)(tf.b,{})]}),t.conversationsLoading?(0,y.jsx)("div",{className:aM.contentLoading,children:(0,y.jsx)(eC.g,{})}):t.allBots.length||t.conversationList.length?(0,y.jsxs)("div",{className:aM.content,children:[t.allBots.length>0&&(0,y.jsx)(nw,{title:t.keywords?t.S.bots:"",bots:t.showBots,vm:t}),!!t.conversationList.length&&!!t.allBots.length&&(0,y.jsx)("div",{className:aM.driver}),(0,y.jsx)(nC,{keywords:t.keywords,conversationList:t.conversationList,favoriteList:t.favoriteList})]}):(0,y.jsx)(nS,{vm:t})]})}),nw=(0,F.Pi)(e=>{let{vm:t,bots:i,title:o}=e,a=D.Mp.getActiveChatBotController();return(0,y.jsxs)("div",{className:aM.botsWrapper,children:[o&&(0,y.jsx)("div",{className:aM.title,children:o}),i.map(e=>(0,y.jsxs)("div",{className:q()(aM.botItem,{[aM.active]:t.currentBotId===e.uid&&(null==a?void 0:a.showHomeView)}),onClick:()=>t.handleBotItemClick(e),children:[(0,y.jsx)(te.E,{className:aM.botAvatar,alt:"",src:e.logoUrl}),(0,y.jsx)(eu(),{searchWords:t.keywords.split(" "),textToHighlight:e.name,className:aM.botTitle,highlightClassName:q()(aM.highlight)}),t.keywords&&(0,y.jsx)("div",{className:aM.botType,children:e.userAction.actionPinned?t.S.favorite:t.S.recent}),(0,y.jsx)("div",{className:aM.botItemActions,children:!D.Mp.isMonica(e.uid)&&(0,y.jsx)(tN.u,{title:P.A.pinBotIds.includes(e.uid)?t.S.unpin:t.S.pin,mouseLeaveDelay:0,trigger:"hover",children:(0,y.jsx)("div",{className:q()(aM.botItemAction,{[aM.pinned]:P.A.pinBotIds.includes(e.uid)}),onClick:t=>{D.Mp.togglePinBot(e.uid,"nav"),t.stopPropagation()},children:P.A.pinBotIds.includes(e.uid)?(0,y.jsx)(aS.h,{size:16,color:"var(--theme-icon-brand)"}):(0,y.jsx)(aA.F,{size:16,color:"var(--theme-icon-tertiary)"})})},Date.now()+Math.random())})]},e.uid)),(!aI.botFold||t.allBots.length<=t.defaultShowCount)&&(0,y.jsxs)("div",{className:q()(aM.botItem,aM.exploreBot),onClick:()=>{eF.J.onTabChange("bots")},children:[(0,y.jsx)("div",{className:aM.icon,children:(0,y.jsx)(t_.J,{name:"yingyong",size:20,color:"currentColor",style:{color:"var(--theme-icon-quaternary)"}})}),(0,y.jsx)("span",{className:aM.botTitle,children:t.S.exploreBot})]}),t.allBots.length>t.defaultShowCount?(0,y.jsxs)("div",{className:aM.moreItem,onClick:()=>aI.botFold=!aI.botFold,children:[(0,y.jsxs)("div",{className:aM.text,children:[t.resBotCount," ",aI.botFold?t.S.more:t.S.fold]}),(0,y.jsx)(aj.v,{size:14,color:"currentColor",className:aM.arrowIcon,style:{transform:aI.botFold?void 0:"rotate(180deg)"}})]}):null]})}),nS=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:aM.empty,children:[(0,y.jsx)(te.E,{className:aM.emptyLogo,src:ak,alt:""}),(0,y.jsx)("div",{className:aM.emptyText,children:(0,y.jsx)(aN.Z,{S:t.S.newNoBotYouWant,components:{botsLink:e=>(0,y.jsx)("a",{className:aM.blue,href:w.m.genFullUrl(eR.Cl.botExplore),target:"_blank",rel:"noreferrer",children:e}),create:e=>(0,y.jsx)("a",{className:aM.blue,onClick:()=>{(0,a_.Q)({insertTarget:"dialogRoot"})},children:e}),chat:e=>(0,y.jsx)("a",{className:aM.blue,onClick:e=>{var t;e.preventDefault(),(null===(t=D.Mp.currentBot)||void 0===t?void 0:t.controller)instanceof ac._&&D.Mp.currentBot.controller.newConversation()},children:e})}})})]})});var nA=i(39902),nj=i(27534),nk=i(96391),nN=i(40111),n_=i(96522),nT=i(44469),nI={imageGroupActions:"image-group-actions--VMobS",actionBtn:"action-btn--Kj0YU",active:"active--G_V6X",logo:"logo--ii9W0",text:"text--Bvon3",moreBtn:"more-btn--wvKqD"};class nM extends S.PN{get artistController(){return this.props.artistController}get S(){return ei.S.Global.modules.Bots.Artist.ImageGroupActions}onViewCreate(){}onViewDestroy(){}variations(){var e,t;let{imageUrl:i,item:o}=this.props;eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"chat",extData:{module:"variations"}}),this.artistController.variations(i,o),null===(e=(t=this.props).onActionClick)||void 0===e||e.call(t)}upscale(){var e,t;let{imageUrl:i,item:o}=this.props;eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"chat",extData:{module:"download"}}),this.artistController.upscale(i,o),null===(e=(t=this.props).onActionClick)||void 0===e||e.call(t)}downloadImage(){var e,t;eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"chat",extData:{module:"download"}}),this.artistController.downloadImage(this.props.imageUrl,this.props.item.uid),null===(e=(t=this.props).onActionClick)||void 0===e||e.call(t)}useAsReference(){var e,t;this.artistController.useAsReference(this.props.imageUrl,this.props.item.uid),null===(e=(t=this.props).onActionClick)||void 0===e||e.call(t)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"isOpen",!1)}}(0,I.gn)([S.SB],nM.prototype,"isOpen",void 0),(0,I.gn)([tB.Fl],nM.prototype,"S",null);let nL=S._Y.createComponent("ImageGroupActions",nM,e=>e.artistController.botData.botId===tX.vH.dalle3?(0,y.jsx)("div",{className:nI.imageGroupActions,onClick:e=>e.stopPropagation(),children:(0,y.jsxs)("div",{className:nI.actionBtn,onClick:e.downloadImage.bind(e),children:[(0,y.jsx)("span",{className:nI.logo,children:(0,y.jsx)(t_.J,{size:12,name:"artistDownload",color:"currentColor"})}),(0,y.jsx)("span",{children:e.S.download})]})}):(0,y.jsxs)("div",{className:nI.imageGroupActions,onClick:e=>e.stopPropagation(),children:[(0,y.jsxs)("div",{className:nI.actionBtn,onClick:e.variations.bind(e),children:[(0,y.jsx)("span",{className:nI.logo,children:(0,y.jsx)(t_.J,{size:12,name:"artistStar",color:"currentColor"})}),(0,y.jsx)("span",{className:nI.text,children:e.S.variations})]}),(0,y.jsxs)("div",{className:nI.actionBtn,onClick:e.upscale.bind(e),children:[(0,y.jsx)("span",{className:nI.logo,children:(0,y.jsx)(t_.J,{size:12,name:"artistRocket",color:"currentColor"})}),(0,y.jsx)("span",{className:nI.text,children:e.S.upscale})]}),e.props.expandAll?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:nI.actionBtn,onClick:e.downloadImage.bind(e),children:[(0,y.jsx)("span",{className:nI.logo,children:(0,y.jsx)(t_.J,{size:12,name:"artistDownload",color:"currentColor"})}),(0,y.jsx)("span",{children:e.S.download})]}),(0,y.jsxs)("div",{className:nI.actionBtn,onClick:e.useAsReference.bind(e),children:[(0,y.jsx)("span",{className:nI.logo,children:(0,y.jsx)(t_.J,{size:16,name:"Image",color:"currentColor"})}),(0,y.jsx)("span",{children:e.S.useAsReference})]})]}):(0,y.jsx)(tK.x,{trigger:"click",placement:"bottomRight",closeAfterContentClick:!0,content:(0,y.jsx)(nB,{vm:e}),open:e.isOpen,onOpenChange:t=>{e.isOpen=t},children:(0,y.jsx)("div",{className:q()(nI.actionBtn,nI.moreBtn,{[nI.active]:e.isOpen}),onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"chat",extData:{module:"more"}})},children:(0,y.jsx)(t_.J,{size:14,name:"artistMore",color:"currentColor"})})})]})),nB=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)(aR.h,{children:[(0,y.jsx)(aQ.X,{icon:"artistDownload",content:t.S.download,onClick:()=>{t.downloadImage()}}),(0,y.jsx)(aQ.X,{icon:"Image",content:t.S.useAsReference,onClick:()=>{t.useAsReference()}}),(0,n_.X)(ei.S.Global.services.extensionService).map(e=>(0,y.jsx)(aQ.X,{icon:e.icon,content:e.name(),onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"chat",extData:{module:e.key}}),f.o.isDesktop?az.Tn.contextMenuClick({menuItemId:e.key,srcUrl:t.props.imageUrl}):nT.T3.imageToolsMenuClick({menuItemId:e.key,srcUrl:t.props.imageUrl},!0)}},e.key))]})});var nE={imageGroupPreview:"image-group-preview--25e1N",imageItem:"image-item--B7Av5",single:"single--R8a4G",double:"double--f1EP9",img:"img--GD2A3",actionBox:"action-box--jpVbE"},nD=i(35978),nP={imagePreviewDialog:"image-preview-dialog--slNE3",container:"container--wKlne",header:"header--eY0pP",content:"content--EDagH",img:"img--WzaIM",footer:"footer--kkIo0",toolbarBtn:"toolbar-btn--yOjSF",moreBtn:"more-btn--AAFI8",closeBtn:"close-btn--uTvQo"};class nF extends S.PN{get artistController(){return this.props.artistController}get S(){return ei.S.Global.modules.Bots.Artist.ImagePreviewDialog}get item(){return this.props.item}get showIndex(){var e;return null!==(e=this.props.showIndex)&&void 0!==e?e:0}get originalImageUrl(){var e;return null===(e=this.props.item.result.images)||void 0===e?void 0:e[this.showIndex].url}get imageUrl(){return"artist_bot:upscale"===this.item.taskType?this.item.createCmd.data.img:this.originalImageUrl}get isUpscaleItem(){return"artist_bot:upscale"===this.item.taskType}onViewCreate(){}onViewDestroy(){}downloadImage(){eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"preview",extData:{module:"download"}}),this.artistController.downloadImage(this.originalImageUrl,this.props.item.uid),this.closeDialog()}upscale(){this.imageUrl&&(eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"preview",extData:{module:"upscale"}}),this.artistController.upscale(this.imageUrl,this.item)),this.closeDialog()}variations(){this.imageUrl&&(eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"preview",extData:{module:"variations"}}),this.artistController.variations(this.imageUrl,this.item)),this.closeDialog()}useAsReference(){this.imageUrl&&this.artistController.useAsReference(this.imageUrl,this.item.uid),this.closeDialog()}closeDialog(){this.props.onDisposed()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],nF.prototype,"someState",void 0),(0,I.gn)([tB.Fl],nF.prototype,"S",null),(0,I.gn)([tB.Fl],nF.prototype,"item",null),(0,I.gn)([tB.Fl],nF.prototype,"showIndex",null),(0,I.gn)([tB.Fl],nF.prototype,"originalImageUrl",null),(0,I.gn)([tB.Fl],nF.prototype,"imageUrl",null),(0,I.gn)([tB.Fl],nF.prototype,"isUpscaleItem",null);let nR=S._Y.createComponent("ImagePreviewDialog",nF,e=>e.originalImageUrl?(0,y.jsx)("div",{className:q()("monica-modal-wrapper",nP.imagePreviewDialog),onClick:e.closeDialog.bind(e),children:(0,y.jsxs)("div",{className:nP.container,onClick:e=>e.stopPropagation(),children:[(0,y.jsx)("div",{className:nP.header,children:e.S.preview}),(0,y.jsx)("div",{className:nP.content,children:(0,y.jsx)(eH.E,{className:nP.img,skeleton:!0,src:e.originalImageUrl})}),(0,y.jsxs)("div",{className:nP.footer,children:[(0,y.jsxs)("div",{className:nP.toolbarBtn,onClick:e.downloadImage.bind(e),style:{marginRight:"auto"},children:[(0,y.jsx)(t_.J,{size:14,name:"artistDownload",color:"currentColor"}),(0,y.jsx)("span",{children:e.S.download})]}),e.props.artistController.botData.botId!==tX.vH.dalle3&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:nP.toolbarBtn,onClick:e.useAsReference.bind(e),children:[(0,y.jsx)(t_.J,{size:14,name:"Image",color:"currentColor"}),(0,y.jsx)("span",{children:e.S.useAsReference})]}),!e.isUpscaleItem&&(0,y.jsxs)("div",{className:nP.toolbarBtn,onClick:e.upscale.bind(e),children:[(0,y.jsx)(t_.J,{size:14,name:"artistRocket",color:"currentColor"}),(0,y.jsx)("span",{children:e.S.upscale})]}),(0,y.jsxs)("div",{className:nP.toolbarBtn,onClick:e.variations.bind(e),children:[(0,y.jsx)(t_.J,{size:14,name:"artistStar",color:"currentColor"}),(0,y.jsx)("span",{children:e.S.variations})]}),(0,y.jsx)(nD.Y,{imgUrl:e.originalImageUrl,className:nP.moreBtn,triggerNode:(0,y.jsx)("div",{className:nP.toolbarBtn,children:(0,y.jsx)(t_.J,{size:14,name:"artistMore",color:"currentColor"})})})]})]}),(0,y.jsx)("div",{className:nP.closeBtn,onClick:e.closeDialog.bind(e),children:(0,y.jsx)(t_.J,{name:"close",size:20,color:"currentColor"})})]})}):null),nV=H.t.createOpener(nR);class nU extends S.PN{get artistController(){return this.props.artistController}get item(){return this.props.item}onViewCreate(){}onViewDestroy(){}previewImage(e){nV({item:this.item,showIndex:e,insertTarget:"dialogRoot",artistController:this.artistController})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"activateIndex",-1)}}(0,I.gn)([S.SB],nU.prototype,"activateIndex",void 0),(0,I.gn)([tB.Fl],nU.prototype,"artistController",null),(0,I.gn)([tB.Fl],nU.prototype,"item",null);let nz=S._Y.createComponent("ImageGroupPreview",nU,e=>{let t=e.props.item.result.images||[];return 0===t.length?null:(0,y.jsx)("div",{className:q()(nE.imageGroupPreview,e.props.className),children:t.map((t,i)=>{var o,a;return(0,y.jsxs)("div",{className:q()(nE.imageItem,{[nE.single]:(null===(o=e.props.item.result.images)||void 0===o?void 0:o.length)===1,[nE.double]:(null===(a=e.props.item.result.images)||void 0===a?void 0:a.length)===2}),onMouseEnter:()=>{e.activateIndex=i},onMouseLeave:()=>{e.activateIndex=-1},onClick:e.previewImage.bind(e,i),children:[(0,y.jsx)(eH.E,{className:nE.img,skeleton:!0,src:e.props.previewOriginalImg?t.url:t.thumbnail}),e.activateIndex===i&&(0,y.jsx)("div",{className:nE.actionBox,onClick:e=>e.stopPropagation(),children:(0,y.jsx)(nL,{...e.props,imageUrl:t.url,artistController:e.artistController})})]},i)})})});var nO={artistReply:"artist-reply--W5KnX",replyActions:"reply-actions--sLaCH",prompt:"prompt--UBRmt",promptInner:"prompt-inner--MM_5j",imagesContainer:"images-container--Z1bz7",button:"button--W10Cw",promptTitle:"prompt-title--u6lDz",delete:"delete--_jcgP"};class nW extends S.PN{get S(){return ei.S.Global.modules.Bots.Artist.ArtistDeleteDialog}onViewCreate(){}onViewDestroy(){}async delete(){let{controller:e,item:t}=this.props;try{this.loading=!0,await e.deleteItem(t)}catch(e){ef.M.error(w.m.formatMonicaSdkError(e))}finally{this.loading=!1,this.close()}}close(){var e,t;null===(e=(t=this.props).onDisposed)||void 0===e||e.call(t)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"loading",!1)}}(0,I.gn)([S.SB],nW.prototype,"loading",void 0),(0,I.gn)([tB.Fl],nW.prototype,"S",null);let nH=S._Y.createComponent("ArtistDeleteDialog",nW,e=>(0,y.jsx)(W.u,{closeOnMaskClick:!0,maskType:"black",width:370,fixed:"dialogRoot"===e.props.insertTarget,onDispose:e.close.bind(e),children:(0,y.jsxs)("div",{className:"artist-delete-dialog--pGJft",children:[(0,y.jsx)("div",{className:"header--E7lbk",children:e.S.title}),(0,y.jsx)("div",{className:"content--CrQDM",children:e.S.content}),(0,y.jsxs)("div",{className:"footer--pF6eA",children:[(0,y.jsx)(eO.z,{type:"blackOutline",onClick:e.close.bind(e),children:e.S.cancel}),(0,y.jsx)(eO.z,{type:"danger",loading:e.loading,onClick:e.delete.bind(e),children:e.S.delete})]})]})})),nG=H.t.createOpener(nH);class nQ extends S.PN{get S(){return ei.S.Global.modules.Bots.Artist.ArtistReply}onViewCreate(){}onViewDestroy(){}handleRegenerate(){let{artistController:e,data:t}=this.props;e.generating||e.regenerate(t)}handleMarkVariations(){let{artistController:e,data:t}=this.props,i=t.createCmd.data.img;i&&(eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"chat",extData:{module:"variations"}}),e.variations(i,t))}handleDownload(){var e;let{data:t,artistController:i}=this.props,o=null===(e=t.result.images)||void 0===e?void 0:e[0].url;o&&i.downloadImage(o,t.uid)}copyPromptWithParams(){let e=this.props.data,t=e.data.prompt,i=e.createCmd.data.param,o=t;i&&Object.keys(i).forEach(e=>{let t=i[e];t&&("seed"===e?o+=" --seed ".concat(t):"imageCount"===e?o+=" --count ".concat(t):"negativePrompt"===e?o+=" --no ".concat(t):"promptStrength"===e?o+=" --cfg_scale ".concat(t):"style"===e&&(o+=" --style ".concat(t)))}),w.m.copyToClipboard(o),ef.M.success(this.S.copiedSuccess,"mainWindow")}handleDelete(){eL.M.createUserBehaviorEvent({eventName:"artist_image_action",extData:{module:"delete"}}),nG({controller:this.props.artistController,item:this.props.data,insertTarget:"mainWindow"})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],nQ.prototype,"someState",void 0),(0,I.gn)([tB.Fl],nQ.prototype,"S",null);let nJ=S._Y.createComponent("ArtistReply",nQ,e=>{let{artistController:t,data:i,className:o}=e.props,{logoUrl:a,name:n}=t.botData.botItem||{},{data:{originInput:r,prompt:s},taskType:l}=i,c=s,d=r!==s?r:null;return("artist_bot:upscale"===l||"artist_bot:variations"===l)&&(c=null,d=s),(0,y.jsxs)(nk.J,{senderAvatar:a,senderName:n,className:q()(nO.artistReply,o),children:[(0,y.jsx)(nq,{vm:e}),!!d&&(0,y.jsx)("div",{className:nO.prompt,children:(0,y.jsx)(nN.x,{wrapperClassName:nO.promptInner,children:d},d+l+c)}),c,(0,y.jsx)(nz,{className:nO.imagesContainer,item:i,artistController:t}),(0,y.jsx)(nK,{vm:e})]})}),nq=(0,F.Pi)(function(e){let{vm:t}=e,{data:i}=t.props,{taskType:o}=i;return"artist_bot:variations"===o?(0,y.jsx)("div",{className:nO.promptTitle,children:t.S.variation}):"artist_bot:upscale"===o?(0,y.jsx)("div",{className:nO.promptTitle,children:t.S.upscale}):null}),nK=(0,F.Pi)(function(e){let{vm:t}=e,{data:i}=t.props,{taskType:o}=i;return(0,y.jsxs)("div",{className:nO.replyActions,children:["artist_bot:upscale"===o&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(eO.z,{type:"text-gray",icon:(0,y.jsx)(t_.J,{size:14,name:"artistStar",color:"currentColor"}),className:nO.button,onClick:t.handleMarkVariations.bind(t),children:t.S.markVariations})}),(0,y.jsx)(eO.z,{type:"text-gray",icon:(0,y.jsx)(t_.J,{size:16,name:"refresh",color:"currentColor"}),className:nO.button,onClick:t.handleRegenerate.bind(t),children:t.S.regenerate}),(0,y.jsx)(nj.h,{iconName:"copyPrompt",title:t.S.copyPromptWithParams,onClick:t.copyPromptWithParams.bind(t)}),(0,y.jsx)(tZ.X,{className:nO.floatToolbarItem,text:i.data.prompt,render:(e,t)=>(0,y.jsx)(nj.h,{iconName:e?"check":"seCopy",title:"",onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"artist_image_action",extData:{module:"copy_prompt"}}),t()}})}),(0,y.jsx)(tK.x,{trigger:"hover",closeAfterContentClick:!0,placement:"bottom",content:(0,y.jsx)(aR.h,{children:(0,y.jsx)(aQ.X,{className:nO.delete,icon:"a56",content:t.S.delete,onClick:t.handleDelete.bind(t)})}),children:(0,y.jsx)("span",{children:(0,y.jsx)(nj.h,{title:"",iconName:"sidebarMoreFill",onClick:()=>{}})})})]})});var nY={artist:"artist--bVuX6",box:"box--eb6fx",inner:"inner--h2DIo",artistItem:"artist-item--WfIW4",card:"card--It4Rr",prompt:"prompt--lJmwv",promptContent:"prompt-content--ZhAAW",status:"status--TelSt",generating:"generating--_VQID",loading:"loading--P20Hr",generateFailed:"generate-failed--pEKBN",link:"link--SYRvQ",chatInput:"chat-input--xMR5a",referenceImage:"reference-image--HPCwD",promptParser:"prompt-parser--yksq1",promptParserOperations:"prompt-parser-operations--TzGjz",promptParserOperationItem:"prompt-parser-operation-item--kqAQe",promptParserDivider:"prompt-parser-divider--Je7Rj",chatToolbar:"chat-toolbar--Fsf07",chatToolbarLeft:"chat-toolbar-left--vHbK8",chatToolbarRight:"chat-toolbar-right--CiIGZ",inputActions:"input-actions--i9afc",example:"example--PLjnw",exampleBtn:"example-btn--jcBOv",exampleClose:"example-close--O3OOC",switchBotPopoverContent:"switch-bot-popover-content--CURHm",closeIcon:"close-icon--DlWU8",arrow:"arrow--XubTF",tipMsg:"tip-msg--KFfo7"},nZ=i(73648),nX=i(17027),n$=i(59645),n0=i(34904),n1=i(99202),n2=i(92396);let n3=Q.forwardRef((e,t)=>{let{open:i}=e,o=(0,Q.useRef)(null),a=(0,Q.useRef)(null);function n(){n0.Z.cancel(a.current),a.current=null}return Q.useEffect(()=>(i?a.current=(0,n0.Z)(()=>{var e;null===(e=o.current)||void 0===e||e.forceAlign(),a.current=null}):n(),n),[i,e.title]),Q.createElement(n2.Z,Object.assign({ref:(0,n1.sQ)(o,t)},e))});var n6=i(96439),n5=i(87390),n4=i(44586),n9=i(67639),n7=i(56033);let n8=e=>{let{componentCls:t,antCls:i,controlSize:o,dotSize:a,marginFull:n,marginPart:r,colorFillContentHover:s,handleColorDisabled:l,calc:c}=e;return{[t]:Object.assign(Object.assign({},(0,n5.Wf)(e)),{position:"relative",height:o,margin:"".concat((0,n7.unit)(r)," ").concat((0,n7.unit)(n)),padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:"".concat((0,n7.unit)(n)," ").concat((0,n7.unit)(r))},["".concat(t,"-rail")]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:"background-color ".concat(e.motionDurationMid)},["".concat(t,"-track,").concat(t,"-tracks")]:{position:"absolute",transition:"background-color ".concat(e.motionDurationMid)},["".concat(t,"-track")]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},["".concat(t,"-track-draggable")]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{["".concat(t,"-rail")]:{backgroundColor:e.railHoverBg},["".concat(t,"-track")]:{backgroundColor:e.trackHoverBg},["".concat(t,"-dot")]:{borderColor:s},["".concat(t,"-handle::after")]:{boxShadow:"0 0 0 ".concat((0,n7.unit)(e.handleLineWidth)," ").concat(e.colorPrimaryBorderHover)},["".concat(t,"-dot-active")]:{borderColor:e.dotActiveBorderColor}},["".concat(t,"-handle")]:{position:"absolute",width:e.handleSize,height:e.handleSize,outline:"none","&::before":{content:'""',position:"absolute",insetInlineStart:c(e.handleLineWidth).mul(-1).equal(),insetBlockStart:c(e.handleLineWidth).mul(-1).equal(),width:c(e.handleSize).add(c(e.handleLineWidth).mul(2)).equal(),height:c(e.handleSize).add(c(e.handleLineWidth).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:e.handleSize,height:e.handleSize,backgroundColor:e.colorBgElevated,boxShadow:"0 0 0 ".concat((0,n7.unit)(e.handleLineWidth)," ").concat(e.handleColor),borderRadius:"50%",cursor:"pointer",transition:"\n            inset-inline-start ".concat(e.motionDurationMid,",\n            inset-block-start ").concat(e.motionDurationMid,",\n            width ").concat(e.motionDurationMid,",\n            height ").concat(e.motionDurationMid,",\n            box-shadow ").concat(e.motionDurationMid,"\n          ")},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:c(e.handleSizeHover).sub(e.handleSize).div(2).add(e.handleLineWidthHover).mul(-1).equal(),insetBlockStart:c(e.handleSizeHover).sub(e.handleSize).div(2).add(e.handleLineWidthHover).mul(-1).equal(),width:c(e.handleSizeHover).add(c(e.handleLineWidthHover).mul(2)).equal(),height:c(e.handleSizeHover).add(c(e.handleLineWidthHover).mul(2)).equal()},"&::after":{boxShadow:"0 0 0 ".concat((0,n7.unit)(e.handleLineWidthHover)," ").concat(e.handleActiveColor),width:e.handleSizeHover,height:e.handleSizeHover,insetInlineStart:e.calc(e.handleSize).sub(e.handleSizeHover).div(2).equal(),insetBlockStart:e.calc(e.handleSize).sub(e.handleSizeHover).div(2).equal()}}},["".concat(t,"-mark")]:{position:"absolute",fontSize:e.fontSize},["".concat(t,"-mark-text")]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},["".concat(t,"-step")]:{position:"absolute",background:"transparent",pointerEvents:"none"},["".concat(t,"-dot")]:{position:"absolute",width:a,height:a,backgroundColor:e.colorBgElevated,border:"".concat((0,n7.unit)(e.handleLineWidth)," solid ").concat(e.dotBorderColor),borderRadius:"50%",cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow),pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},["&".concat(t,"-disabled")]:{cursor:"not-allowed",["".concat(t,"-rail")]:{backgroundColor:"".concat(e.railBg," !important")},["".concat(t,"-track")]:{backgroundColor:"".concat(e.trackBgDisabled," !important")},["\n          ".concat(t,"-dot\n        ")]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},["".concat(t,"-handle::after")]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:e.handleSize,height:e.handleSize,boxShadow:"0 0 0 ".concat((0,n7.unit)(e.handleLineWidth)," ").concat(l),insetInlineStart:0,insetBlockStart:0},["\n          ".concat(t,"-mark-text,\n          ").concat(t,"-dot\n        ")]:{cursor:"not-allowed !important"}},["&-tooltip ".concat(i,"-tooltip-inner")]:{minWidth:"unset"}})}},re=(e,t)=>{let{componentCls:i,railSize:o,handleSize:a,dotSize:n,marginFull:r,calc:s}=e,l=t?"width":"height",c=t?"height":"width",d=t?"insetBlockStart":"insetInlineStart",p=t?"top":"insetInlineStart",m=s(o).mul(3).sub(a).div(2).equal(),h=s(a).sub(o).div(2).equal(),g=t?{borderWidth:"".concat((0,n7.unit)(h)," 0"),transform:"translateY(".concat((0,n7.unit)(s(h).mul(-1).equal()),")")}:{borderWidth:"0 ".concat((0,n7.unit)(h)),transform:"translateX(".concat((0,n7.unit)(e.calc(h).mul(-1).equal()),")")};return{[t?"paddingBlock":"paddingInline"]:o,[c]:s(o).mul(3).equal(),["".concat(i,"-rail")]:{[l]:"100%",[c]:o},["".concat(i,"-track,").concat(i,"-tracks")]:{[c]:o},["".concat(i,"-track-draggable")]:Object.assign({},g),["".concat(i,"-handle")]:{[d]:m},["".concat(i,"-mark")]:{insetInlineStart:0,top:0,[p]:s(o).mul(3).add(t?0:r).equal(),[l]:"100%"},["".concat(i,"-step")]:{insetInlineStart:0,top:0,[p]:o,[l]:"100%",[c]:o},["".concat(i,"-dot")]:{position:"absolute",[d]:s(o).sub(n).div(2).equal()}}},rt=e=>{let{componentCls:t,marginPartWithMark:i}=e;return{["".concat(t,"-horizontal")]:Object.assign(Object.assign({},re(e,!0)),{["&".concat(t,"-with-marks")]:{marginBottom:i}})}},ri=e=>{let{componentCls:t}=e;return{["".concat(t,"-vertical")]:Object.assign(Object.assign({},re(e,!1)),{height:"100%"})}};var ro=(0,n4.I$)("Slider",e=>{let t=(0,n9.TS)(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[n8(t),rt(t),ri(t)]},e=>{let t=e.controlHeightLG/4;return{controlSize:t,railSize:4,handleSize:t,handleSizeHover:e.controlHeightSM/2,dotSize:8,handleLineWidth:e.lineWidth+1,handleLineWidthHover:e.lineWidth+3,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:e.colorPrimary,handleColorDisabled:new n6.C(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexShortString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}}),ra=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i};let rn=Q.forwardRef((e,t)=>{let{prefixCls:i,range:o,className:a,rootClassName:n,style:r,disabled:s,tooltipPrefixCls:l,tipFormatter:c,tooltipVisible:d,getTooltipPopupContainer:p,tooltipPlacement:m}=e,h=ra(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement"]),{direction:g,slider:u,getPrefixCls:v,getPopupContainer:C}=Q.useContext(nX.E_),x=Q.useContext(n$.Z),[y,b]=Q.useState({}),f=(e,t)=>{b(i=>Object.assign(Object.assign({},i),{[e]:t}))},w=(e,t)=>e||(t?"rtl"===g?"left":"right":"top"),S=v("slider",i),[A,j]=ro(S),k=q()(a,null==u?void 0:u.className,n,{["".concat(S,"-rtl")]:"rtl"===g},j);"rtl"!==g||h.vertical||(h.reverse=!h.reverse);let[N,_]=Q.useMemo(()=>o?"object"==typeof o?[!0,o.draggableTrack]:[!0,!1]:[!1],[o]),T=Object.assign(Object.assign({},null==u?void 0:u.style),r);return A(Q.createElement(nZ.default,Object.assign({},h,{step:h.step,range:N,draggableTrack:_,className:k,style:T,disabled:null!=s?s:x,ref:t,prefixCls:S,handleRender:(t,i)=>{var o;let{index:a,dragging:n}=i,{tooltip:r={},vertical:s}=e,g=Object.assign({},r),{open:u,placement:x,getPopupContainer:b,prefixCls:A,formatter:j}=g,k=j||null===j?j:c||null===c?c:e=>"number"==typeof e?e.toString():"",N=!!k&&(y[a]||n),_=null!==(o=null!=u?u:d)&&void 0!==o?o:void 0===u&&N,T=Object.assign(Object.assign({},t.props),{onMouseEnter:()=>f(a,!0),onMouseLeave:()=>f(a,!1),onFocus:e=>{var t;f(a,!0),null===(t=h.onFocus)||void 0===t||t.call(h,e)},onBlur:e=>{var t;f(a,!1),null===(t=h.onBlur)||void 0===t||t.call(h,e)}});return Q.createElement(n3,Object.assign({},g,{prefixCls:v("tooltip",null!=A?A:l),title:k?k(i.value):"",open:_,placement:w(null!=x?x:m,s),key:a,overlayClassName:"".concat(S,"-tooltip"),getPopupContainer:b||p||C}),Q.cloneElement(t,T))}})))});var rr={artistSettingDialog:"artist-setting-dialog--imPl5",header:"header--DDFho",main:"main--jvoVo",formItem:"form-item--KMe7k",formItemLabel:"form-item-label--PlTwr",imageCountPicker:"image-count-picker--mGk39",imageCountPickerItem:"image-count-picker-item--TKnMZ",active:"active--f9DX3",aspectRatio:"aspect-ratio--qyfNX",aspectRatioHeader:"aspect-ratio-header--r2qge",aspectRatioTxt:"aspect-ratio-txt--ZJnLZ",aspectRatioSlider:"aspect-ratio-slider--Zfo_H",keepPrompt:"keep-prompt--_Zhnr",footer:"footer--NkCQp",questionIcon:"question-icon--5qVax",styleSelector:"style-selector--Ps2FP",avatar:"avatar--Rd9N_",label:"label--QIoTY",placeholder:"placeholder--fyYQF",styleSelectorContent:"style-selector-content--qxVVy",styleSelectorHeader:"style-selector-header--vil9x",list:"list--URG4r",listItem:"list-item--shJaU",img:"img--KUPMO",imgReset:"img-reset--wWh3l",imgLabel:"img-label--bWp76"},rs=i(42857),rl=i(54085),rc=i(96312);class rd extends S.PN{get S(){return ei.S.Global.modules.Bots.Artist.ArtistSettingDialog}get aspectRatioData(){return this.props&&this.props.artistController.botData.botId===tX.vH.dalle3?[{id:1,scale:"16 : 9",width:1792,height:1024},{id:2,scale:"1 : 1",width:1024,height:1024,default:!0},{id:3,scale:"9 : 16",width:1024,height:1792}]:[{id:1,scale:"21 : 9",width:1536,height:640},{id:2,scale:"16 : 9",width:1344,height:768},{id:3,scale:"3 : 2",width:1216,height:832},{id:4,scale:"5 : 4",width:1152,height:896},{id:5,scale:"1 : 1",width:1024,height:1024,default:!0},{id:6,scale:"4 : 5",width:896,height:1152},{id:7,scale:"2 : 3",width:832,height:1216},{id:8,scale:"9 : 16",width:768,height:1344},{id:9,scale:"9 : 21",width:640,height:1536}]}get stylePreset(){return this.props&&this.props.artistController.botData.botId===tX.vH.dalle3?rl._M:rl.HY}get aspectRatioMin(){return 0}get aspectRatioMax(){return this.aspectRatioData.length-1}get aspectRatioDefault(){var e,t;let i=-1;if((null===(e=this.taskOption)||void 0===e?void 0:e.width)&&this.taskOption.height)for(let e=0;e<this.aspectRatioData.length;e++){let t=this.aspectRatioData[e];if(t.width===this.taskOption.width&&t.height===this.taskOption.height){i=e;break}}if(-1===i){for(let e=0;e<this.aspectRatioData.length;e++)if(null===(t=this.aspectRatioData[e])||void 0===t?void 0:t.default){i=e;break}}return i}get aspectRatioScale(){return this.aspectRatioData[this.aspectRatioSelected].scale}get aspectRatioResolution(){let{width:e,height:t}=this.aspectRatioData[this.aspectRatioSelected];return"".concat(e," x ").concat(t)}onViewCreate(){this.taskOption=(0,tB.ZN)(this.props.artistController.taskOptions),this.aspectRatioSelected=this.aspectRatioDefault}onViewDestroy(){}save(){let{width:e,height:t}=this.aspectRatioData[this.aspectRatioSelected];this.taskOption&&(this.taskOption.width=e,this.taskOption.height=t),rs.d.setTaskOptions(this.props.artistController.botData.botId,this.taskOption),this.props.onDisposed()}handlerAspectRatioChange(e){this.aspectRatioSelected=e,this.aspectRatioTooltipVisible||(this.aspectRatioTooltipVisible=!0),this.aspectRatioTimer&&clearTimeout(this.aspectRatioTimer),this.aspectRatioTimer=setTimeout(()=>{this.aspectRatioTooltipVisible=!1},1e3)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"formManager",new rc.y),(0,T._)(this,"taskOption",null),(0,T._)(this,"aspectRatioSelected",this.aspectRatioDefault),(0,T._)(this,"aspectRatioTooltipVisible",!1),(0,T._)(this,"aspectRatioTimer",null)}}(0,I.gn)([S.SB],rd.prototype,"taskOption",void 0),(0,I.gn)([S.SB],rd.prototype,"aspectRatioSelected",void 0),(0,I.gn)([S.SB],rd.prototype,"aspectRatioTooltipVisible",void 0),(0,I.gn)([tB.Fl],rd.prototype,"S",null),(0,I.gn)([tB.Fl],rd.prototype,"aspectRatioData",null),(0,I.gn)([tB.Fl],rd.prototype,"stylePreset",null),(0,I.gn)([tB.Fl],rd.prototype,"aspectRatioMin",null),(0,I.gn)([tB.Fl],rd.prototype,"aspectRatioMax",null),(0,I.gn)([tB.Fl],rd.prototype,"aspectRatioDefault",null),(0,I.gn)([tB.Fl],rd.prototype,"aspectRatioScale",null),(0,I.gn)([tB.Fl],rd.prototype,"aspectRatioResolution",null);let rp=S._Y.createComponent("ArtistSettingDialog",rd,e=>{let t=e.taskOption;if(!t)return null;let{insertTarget:i,onDisposed:o,artistController:a}=e.props;return(0,y.jsxs)(W.u,{onDispose:()=>{o()},width:360,fixed:"dialogRoot"===i,className:rr.artistSettingDialog,children:[(0,y.jsx)("header",{className:rr.header,children:e.S.options}),(()=>{let i=(0,y.jsxs)("div",{className:rr.formItem,children:[(0,y.jsx)("div",{className:rr.formItemLabel,children:e.S.negativePrompt}),(0,y.jsx)(tj.g,{value:t.negativePrompt,placeholder:e.S.negativePromptPlaceholder,onChange:e=>{t.negativePrompt=e.target.value},style:{minHeight:60}})]}),o=(0,y.jsxs)("div",{className:rr.formItem,children:[(0,y.jsx)("div",{className:rr.formItemLabel,children:e.S.style}),(0,y.jsx)(rm,{vm:e})]}),n=(0,y.jsxs)("div",{className:rr.formItem,children:[(0,y.jsxs)("div",{className:rr.formItemLabel,children:[e.S.promptStrength,(0,y.jsx)(tN.u,{title:e.S.promptStrengthHint,children:(0,y.jsx)("span",{className:rr.questionIcon,children:(0,y.jsx)(t_.J,{name:"question",size:16,color:"var(--theme-icon-quaternary)"})})})]}),(0,y.jsx)(O.I,{value:t.promptStrength||"",type:"number",onlyInteger:!0,size:"large",placeholder:e.S.auto,onChange:e=>{let i=Number.parseInt(e);i>=35?i=35:i<=0&&(i=0),t.promptStrength=i}})]}),r=(0,y.jsxs)("div",{className:rr.formItem,children:[(0,y.jsxs)("div",{className:rr.formItemLabel,children:[e.S.seed,(0,y.jsx)(tN.u,{title:e.S.seedHint,children:(0,y.jsx)("span",{className:rr.questionIcon,children:(0,y.jsx)(t_.J,{name:"question",size:16,color:"var(--theme-icon-quaternary)"})})})]}),(0,y.jsx)(O.I,{value:t.seed||"",type:"number",onlyInteger:!0,placeholder:e.S.auto,size:"large",originInputProps:{min:0,max:4294967295},onChange:e=>{let i=Number.parseInt(e);i>=4294967295?i=4294967295:i<=0&&(i=0),t.seed=i}})]}),s=(0,y.jsxs)("div",{className:rr.formItem,children:[(0,y.jsx)("div",{className:rr.formItemLabel,children:e.S.imageCount}),(0,y.jsx)("div",{className:rr.imageCountPicker,children:[1,2,4].map(e=>(0,y.jsx)("div",{className:q()(rr.imageCountPickerItem,{[rr.active]:e===t.imageCount}),onClick:()=>{t.imageCount=e},children:e},e))})]}),l=(0,y.jsxs)("div",{className:rr.formItem,children:[(0,y.jsx)("div",{className:rr.formItemLabel,children:e.S.aspectRatio}),(0,y.jsxs)("div",{className:rr.aspectRatio,children:[(0,y.jsxs)("div",{className:rr.aspectRatioHeader,children:[(0,y.jsx)(t_.J,{name:"screenH",size:22}),(0,y.jsx)(tN.u,{title:e.aspectRatioResolution,open:e.aspectRatioTooltipVisible,children:(0,y.jsx)("span",{className:rr.aspectRatioTxt,children:e.aspectRatioScale})}),(0,y.jsx)(t_.J,{name:"screenV",size:22})]}),(0,y.jsx)("div",{className:rr.aspectRatioSlider,children:(0,y.jsx)(rn,{min:e.aspectRatioMin,max:e.aspectRatioMax,defaultValue:e.aspectRatioDefault,tooltip:{formatter:null},dots:!0,handleStyle:{border:"none",background:"none"},onChange:e.handlerAspectRatioChange.bind(e)})})]})]}),c=(0,y.jsxs)("div",{className:rr.keepPrompt,onClick:()=>{t.keepPromptAfterSending=!t.keepPromptAfterSending},children:[(0,y.jsx)(aB.X,{checked:t.keepPromptAfterSending}),e.S.keepPrompt]});return a.botData.isArtistBot?(0,y.jsxs)("main",{className:rr.main,children:[o,n,r,s,l,c]}):a.botData.botId===tX.vH.dalle3?(0,y.jsxs)("main",{className:rr.main,children:[o,l]}):(0,y.jsxs)("main",{className:rr.main,children:[i,s,c]})})(),(0,y.jsxs)("footer",{className:rr.footer,children:[(0,y.jsx)(eO.z,{type:"text-gray",onClick:()=>{e.props.onDisposed()},children:e.S.cancel}),(0,y.jsx)(eO.z,{type:"primary",onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"artist_setting_dialog_save"}),e.save()},children:e.S.save})]})]})}),rm=(0,F.Pi)(e=>{let{vm:t}=e,i=t.taskOption,o=t.stylePreset.find(e=>e.model===i.style);return(0,y.jsx)(tK.x,{placement:"bottom",closeAfterContentClick:!0,trigger:"click",fullWidth:!0,content:(0,y.jsx)(rh,{vm:t}),children:(0,y.jsxs)("div",{className:rr.styleSelector,children:[o&&(0,y.jsx)(te.E,{src:o.img,className:rr.avatar,alt:""}),(0,y.jsx)("span",{className:q()(rr.label,{[rr.placeholder]:!o}),children:o?t.S[o.key]:t.S.chooseStyle}),(0,y.jsx)(t_.J,{name:"arrow-y",size:16,style:{transform:"rotate(90deg)"},color:"var(--theme-icon-quaternary)"})]})})}),rh=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:rr.styleSelectorContent,children:[(0,y.jsxs)("header",{className:rr.styleSelectorHeader,children:[t.S.styles,(0,y.jsx)(t_.J,{name:"close",size:16,style:{cursor:"pointer"}})]}),(0,y.jsxs)("div",{className:rr.list,children:[t.props.artistController.botData.botId!==tX.vH.dalle3&&(0,y.jsxs)("div",{className:q()(rr.listItem),onClick:()=>{t.taskOption.style=void 0},children:[(0,y.jsx)("div",{className:q()(rr.img,rr.imgReset),children:(0,y.jsx)(t_.J,{name:"artistDisabled",size:56})}),(0,y.jsx)("span",{className:rr.imgLabel,children:t.S.chooseStyle})]}),t.stylePreset.map(e=>(0,y.jsxs)("div",{className:q()(rr.listItem,{[rr.active]:e.model===t.taskOption.style}),onClick:()=>{t.taskOption.style=e.model},children:[(0,y.jsx)(te.E,{src:e.img,className:rr.img,alt:""}),(0,y.jsx)("span",{className:rr.imgLabel,children:t.S[e.key]})]},e.key))]})]})}),rg=H.t.createOpener(rp);var ru=i(78826),rv=i(19110);class rC extends S.PN{get artistController(){return this.props.artistController}get S(){return ei.S.Global.modules.Bots.Artist}get textContent(){return this.content.trim()}get examples(){var e;return(null===(e=this.artistController.botData.botItem)||void 0===e?void 0:e.exampleList)||[]}get promptParseResult(){if(this.ignoredPromptParser)return null;let e=this.parsePrompt(this.content);return e.hasParams?e:null}get creditSpent(){let e=this.artistController.botData.botId;return"artist"===e?rv.Zw.sdxl:e in rv.Zw?rv.Zw[e]:rv.Zw.sdxl}onViewCreate(){this.artistController.getArtistItems("refresh").then(()=>{0!==this.artistController.items.length&&this.scrollToBottom()}),this.artistController.emitter.listenBy(this,"scrollToBottom",()=>{this.scrollToBottom()}),this.artistController.emitter.listenBy(this,"focusPrimaryInput",()=>{setTimeout(()=>{var e;null===(e=this.textareaRef)||void 0===e||e.focus({cursor:"end"})})}),this.artistController.emitter.listenBy(this,"refreshExamples",()=>{this.handleContainerWidthChange()}),E.w.eventEmitter.listenBy(this,"resize",()=>{this.handleContainerWidthChange()}),eF.J.eventEmitter.listenBy(this,"tabChange",()=>{setTimeout(()=>{var e;null===(e=this.textareaRef)||void 0===e||e.focus({cursor:"end"})})}),tU.f.getProxy(this).add((0,tB.U5)(()=>ei.a.locale,()=>{this.handleContainerWidthChange()})),this.checkoutSwitchBotTipVisible()}onViewDestroy(){this.artistController.emitter.stopListenBy(this),E.w.eventEmitter.stopListenBy(this),eF.J.eventEmitter.stopListenBy(this),tU.f.getProxy(this).disposeAll()}onTextChange(e){this.content=e}checkoutSwitchBotTipVisible(){if(f.o.isWeb){let e="first-install"===ru.routerController.params.from;!localStorage.getItem(eh.storageKeys.artistSwitchBotTipShowed)&&e&&(this.switchBotPopoverVisible=!0,setTimeout(()=>{this.switchBotPopoverVisible=!1,localStorage.setItem(eh.storageKeys.artistSwitchBotTipShowed,"true")},5e3))}}generate(){!this.textContent||this.artistController.generating||(this.artistController.generate(this.textContent),this.artistController.taskOptions.keepPromptAfterSending||(this.content=""))}regenerate(e){this.artistController.generating||this.artistController.regenerate(e)}retry(){""!==this.artistController.promptContent&&(eL.M.createUserBehaviorEvent({eventName:"artist_image_action",extData:{module:"regenerate"}}),this.artistController.generate(this.artistController.promptContent))}previewImage(e){nV({item:e,insertTarget:"dialogRoot",artistController:this.artistController})}makeVariations(e){let t=e.createCmd.data.img;t&&(eL.M.createUserBehaviorEvent({eventName:"artist_image_action",source:"chat",extData:{module:"variations"}}),this.artistController.variations(t,e))}downloadImage(e){var t;let i=null===(t=e.result.images)||void 0===t?void 0:t[0].url;this.artistController.downloadImage(i,e.uid)}onChatScroll(e){let t=e.target,{scrollTop:i,scrollHeight:o,clientHeight:a}=t;if(!this.loadMoreLock&&(i+a>=o-2?this.scrollBtnVisible=!1:this.scrollBtnVisible=!0,0===i&&!this.artistController.loadMoreLoading&&this.artistController.hasMore)){let e=t.scrollHeight;this.artistController.getArtistItems("loadMore").then(()=>{setTimeout(()=>{let i=t.scrollHeight;this.loadMoreLock=!0,t.scrollTop=i-e-32,setTimeout(()=>{this.loadMoreLock=!1})})})}}handleExampleClose(){E.w.eventEmitter.stopListenBy(this),this.exampleRenderCount=0,this.exampleClosed=!0}applyPromptParams(){this.promptParseResult&&(rs.d.setTaskOptions(this.props.artistController.botData.botId,this.promptParseResult.taskOptions),this.content=this.promptParseResult.result)}copyPromptWithParams(e){let t=e.data.prompt,i=e.createCmd.data.param,o=t;i&&Object.keys(i).forEach(e=>{let t=i[e];t&&("seed"===e?o+=" --seed ".concat(t):"imageCount"===e?o+=" --count ".concat(t):"negativePrompt"===e?o+=" --no ".concat(t):"promptStrength"===e?o+=" --cfg_scale ".concat(t):"style"===e&&(o+=" --style ".concat(t)))}),w.m.copyToClipboard(o),ef.M.success(this.S.copiedSuccess,"mainWindow")}handleContainerWidthChange(){this.exampleClosed||setTimeout(()=>{if(this.containerEl){this.calculatedExamplesLock=!0;let e=this.containerEl.getBoundingClientRect().width-140,t=0,i=w.m.getTextWidth(this.S.eg,{fontSize:"13px"})+8;this.examples.forEach(o=>{e>=(i+=w.m.getTextWidth(o.label,{fontSize:"12px"})+20)&&t++}),this.exampleRenderCount=t}})}parsePrompt(e){let t=(0,tB.ZN)(this.artistController.taskOptions),i=e.split("--"),o=[],a=!1;return i.forEach(e=>{let[i,n]=e.split(" ");if(n){if("no"===i){t.negativePrompt=n,a=!0;return}if("style"===i){t.style=n,a=!0;return}if("cfg_scale"===i){let e=Number.parseInt(n);isNaN(e)||(t.promptStrength=e,a=!0);return}if("seed"===i){let e=Number.parseInt(n);isNaN(e)||(t.seed=e,a=!0);return}if("count"===i){["1","2","4"].includes(n)&&(t.imageCount=Number.parseInt(n),a=!0);return}}o.push(e)}),{result:i[0],taskOptions:t,hasParams:a}}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"containerEl",null),(0,T._)(this,"textareaRef",void 0),(0,T._)(this,"content",""),(0,T._)(this,"fileUploadVisible",!1),(0,T._)(this,"exampleRenderCount",0),(0,T._)(this,"ignoredPromptParser",!1),(0,T._)(this,"switchBotPopoverVisible",!1),(0,T._)(this,"scrollBtnVisible",!1),(0,T._)(this,"calculatedExamplesLock",!1),(0,T._)(this,"exampleClosed",!1),(0,T._)(this,"loadMoreLock",!1),(0,T._)(this,"scrollToBottom",(0,eb.Z)(()=>{this.containerEl&&(this.containerEl.scrollTop=this.containerEl.scrollHeight)},100,{trailing:!0}))}}(0,I.gn)([S.SB],rC.prototype,"content",void 0),(0,I.gn)([S.SB],rC.prototype,"fileUploadVisible",void 0),(0,I.gn)([S.SB],rC.prototype,"exampleRenderCount",void 0),(0,I.gn)([S.SB],rC.prototype,"ignoredPromptParser",void 0),(0,I.gn)([S.SB],rC.prototype,"switchBotPopoverVisible",void 0),(0,I.gn)([S.SB],rC.prototype,"scrollBtnVisible",void 0),(0,I.gn)([tB.Fl],rC.prototype,"S",null),(0,I.gn)([tB.Fl],rC.prototype,"textContent",null),(0,I.gn)([tB.Fl],rC.prototype,"examples",null),(0,I.gn)([tB.Fl],rC.prototype,"promptParseResult",null),(0,I.gn)([tB.Fl],rC.prototype,"creditSpent",null);var rx={src:"https://assets.monica.im/home-web/_next/static/media/bot-artist-example.b27ef00b.png",height:632,width:632,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAaVBMVEVgSk40LC/GlYpVR0qgc2CJa2NZPDE7MziHYVaqhn6NcmttV1NOMSaxc05lPiuQXli1g2q+eG6OZWlHPUKTd2fYjntNPTlBKB6gZEdtW1tUODCub2HBkHSzjnZsSDthQjzSoHx8V02wcnKQdMjeAAAACnRSTlP8////////+/37Rqt2BgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEVJREFUeJwFwYUBwCAQBLADHmhxrfv+QzbBQJQ45yPU4r08H4vZhSBaE3CbuqwxFnHP8es9Q9Fxg9ILJhurUlboadWiFPx3VwNmPa5QUAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8};class ry extends S.PN{get artistController(){return this.props.artistController}get S(){return ei.S.Global.modules.Bots.Artist.MeetArtist}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],ry.prototype,"someState",void 0),(0,I.gn)([tB.Fl],ry.prototype,"S",null);let rb=S._Y.createComponent("MeetArtist",ry,e=>{let{artistController:t}=e.props,{logoUrl:i,name:o}=t.botData.botItem||{};return(0,y.jsx)("div",{className:q()("meet-artist--Piy1e","art--K7eaC"),children:(0,y.jsx)(nk.J,{senderAvatar:i,senderName:o,children:(0,y.jsxs)("div",{className:"content--G7tV2",children:[(0,y.jsx)("p",{children:e.S.hintOne}),(0,y.jsx)(te.E,{src:rx,alt:""}),(0,y.jsx)("p",{children:e.S.hintTwo})]})})})});class rf extends S.PN{onViewCreate(){var e;this.percent=null!==(e=this.props.defaultValue)&&void 0!==e?e:0}onViewDestroy(){}onMouseDownHandler(e){var t;let i=(null===(t=e.currentTarget.parentElement)||void 0===t?void 0:t.clientWidth)||0,o=this.percent,a=e.clientX,n=e=>{var t,n;let r=e.clientX-a;this.percent=Math.floor(Math.max(0,Math.min(100,o+r/i*100))),null===(t=(n=this.props).onChange)||void 0===t||t.call(n,this.percent)},r=()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",r)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",r)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"percent",0)}}(0,I.gn)([S.SB],rf.prototype,"percent",void 0);let rw=S._Y.createComponent("ArtistSlider",rf,e=>(0,y.jsx)("div",{className:"artist-slider--NjjaK",children:(0,y.jsx)("div",{className:"rail--NVHp8",children:(0,y.jsx)("div",{className:"handler--Vwt9S",style:{left:"".concat(e.percent,"%")},onMouseDown:e.onMouseDownHandler.bind(e)})})}));class rS extends S.PN{get artistController(){return this.props.artistController}get S(){return ei.S.Global.modules.Bots.Artist.ReferenceImagePreview}get strengthNum(){return this.artistController.imageStrength}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"sliderChangeDebounce",(0,eb.Z)(e=>{eL.M.createUserBehaviorEvent({eventName:"image_strength_change",extData:{value:e}})},200))}}(0,I.gn)([tB.Fl],rS.prototype,"S",null),(0,I.gn)([tB.Fl],rS.prototype,"strengthNum",null);let rA=S._Y.createComponent("ReferenceImagePreview",rS,e=>{let t=e.artistController;return(0,y.jsxs)("div",{className:"reference-image-preview--kx1aW",children:[(0,y.jsxs)("div",{className:"content--j0Vdz",children:[(0,y.jsx)("div",{className:"image--gzTGe",children:(0,y.jsx)(te.E,{src:t.previewImage,alt:""})}),(0,y.jsxs)("div",{className:"strength--MhRaL",children:[(0,y.jsxs)("div",{className:"name--SJ3a8",children:[(0,y.jsx)("span",{children:e.S.imageStrength}),(0,y.jsx)(tN.u,{title:e.S.hint,align:{offset:[10,-10]},placement:"topRight",children:(0,y.jsx)("span",{className:"help--FHSfa",children:(0,y.jsx)(t_.J,{name:"artistHelp",size:14,color:"currentColor"})})})]}),(0,y.jsxs)("div",{className:"percent--WtCGl",children:[e.strengthNum,"%"]})]}),(0,y.jsx)("div",{className:"slider--deVrr",children:(0,y.jsx)(rw,{defaultValue:e.strengthNum,onChange:i=>{e.sliderChangeDebounce(i),t.generateManager.setImageStrength(i)}})})]}),(0,y.jsx)("div",{className:"close-btn--yl6rA",onClick:()=>{t.uploadManager.reset()},children:(0,y.jsx)(t_.J,{name:"close",size:16,color:"currentColor"})})]})}),rj=S._Y.createComponent("Artist",rC,e=>{var t,i;let o=e.artistController,{isArtistBot:a,botItem:n}=o.botData,r=!a&&0===o.items.length&&!o.promptContent;return o.loading?(0,y.jsx)(eC.g,{fullScreen:!0,wrapperClassName:e.props.className,styles:{display:e.props.visible?"flex":"none"}}):(0,y.jsxs)("div",{className:q()(nY.artist,e.props.className),style:{display:e.props.visible?"flex":"none"},children:[(0,y.jsx)(tb.K,{botId:e.artistController.botData.botId}),(0,y.jsx)(tw.l,{botItem:n}),(0,y.jsx)("div",{className:nY.box,ref:t=>{e.containerEl=t,e.calculatedExamplesLock||e.handleContainerWidthChange()},onScroll:e.onChatScroll.bind(e),children:(0,y.jsxs)("div",{className:nY.inner,children:[!o.hasMore&&a&&(0,y.jsx)(rb,{artistController:o}),o.loadMoreLoading&&(0,y.jsx)(eC.g,{type:"geist"}),r&&n&&(0,y.jsx)(tA.x,{botItem:n}),o.items.map(t=>(0,y.jsx)(nJ,{data:t,artistController:e.artistController},t.uid)),(0,y.jsx)(rk,{vm:e})]})}),(0,y.jsx)(ol.T,{show:e.scrollBtnVisible,onClick:()=>{e9.W.createUserBehaviorEvent({eventName:"artist_scroll_to_bottom_btn_click"}),e.artistController.scrollToBottom()}}),(0,y.jsx)("div",{className:nY.chatInput,children:(0,y.jsx)(tH,{minRows:3,source:"artist",value:e.content,getTextAreaRef:t=>{e.textareaRef=t},placeholder:(null===(i=e.artistController.botData.botConfig)||void 0===i?void 0:null===(t=i.homeViewOptions)||void 0===t?void 0:t.placeholder)||e.S.inputPlaceholder,onChange:t=>{e.onTextChange(t)},onConfirm:()=>{e.generate()},usageInfoProps:{usageModule:o.botData.usageModule,botId:o.botData.botId,isOutside:!0},inputActions:(0,y.jsx)(rT,{vm:e}),chatToolbar:(0,y.jsx)(r_,{vm:e}),isArtist:!0,creditSpent:e.creditSpent})})]})}),rk=(0,F.Pi)(e=>{let{vm:t}=e,i=t.artistController;return i.generating||i.generateFailed?(0,y.jsxs)("div",{className:nY.artistItem,children:[(0,y.jsx)("div",{className:nY.card,children:(0,y.jsx)("div",{className:nY.prompt,children:(0,y.jsx)("div",{className:nY.promptContent,children:(0,y.jsx)("span",{children:i.promptContent})})})}),(0,y.jsxs)("div",{className:nY.status,children:[i.generating&&(0,y.jsxs)("div",{className:nY.generating,children:[(0,y.jsx)("span",{className:nY.loading}),(0,y.jsx)("span",{children:(0,ei.x)(t.S.generating,{progress:i.generateProgress})})]}),!i.generating&&i.generateFailed&&(0,y.jsxs)("div",{className:nY.generateFailed,children:[(0,y.jsx)(t_.J,{size:16,name:"artistInfo",color:"currentColor"}),(0,y.jsx)("span",{children:i.generateFailedMsg}),t.artistController.promptContent&&(0,y.jsx)(tN.u,{title:t.S.retry,children:(0,y.jsx)("span",{className:nY.link,onClick:()=>{t.retry()},children:(0,y.jsx)(t_.J,{size:16,name:"refresh",color:"currentColor"})})})]})]})]}):null}),rN=(0,F.Pi)(e=>{let{vm:t}=e,i=t.artistController;return(0,y.jsxs)("div",{className:nY.chatToolbar,children:[(0,y.jsx)("div",{className:nY.chatToolbarLeft,children:(0,y.jsx)(tK.x,{open:t.switchBotPopoverVisible,placement:"topLeft",useParentContainer:!0,content:(0,y.jsx)(rI,{vm:t}),children:(0,y.jsx)(nA.r,{source:"artist",style:{marginRight:7},botId:i.botData.botId})})}),(0,y.jsxs)("div",{className:nY.chatToolbarRight,children:[i.showReferenceImage&&(0,y.jsx)(tq.Z,{tooltip:t.S.referImg,onClick:()=>{t.fileUploadVisible=!0},icon:"chatInputImage"}),(0,y.jsx)(tq.Z,{tooltip:t.S.options,icon:"chatInputSetting",onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"artist_setting_click"}),rg({artistController:i,insertTarget:"mainWindow"})}})]})]})}),r_=(0,F.Pi)(e=>{let{vm:t}=e,i=t.artistController;return(0,y.jsxs)(y.Fragment,{children:[i.previewImage&&(0,y.jsx)("div",{className:nY.referenceImage,children:(0,y.jsx)(rA,{artistController:i})}),(0,y.jsx)(rN,{vm:t})]})}),rT=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:nY.inputActions,children:[t.exampleRenderCount&&t.examples.length>0?(0,y.jsxs)("div",{className:nY.example,children:[(0,y.jsx)("span",{children:t.S.eg}),t.examples.slice(0,t.exampleRenderCount).map(e=>(0,y.jsx)("span",{className:nY.exampleBtn,onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"artist_example_click"}),t.content=e.content},children:e.label},e.label)),(0,y.jsx)("span",{className:nY.exampleClose,onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"artist_example_close_click"}),t.handleExampleClose()},children:(0,y.jsx)(t_.J,{name:"close",stroke:"currentColor",size:16})})]}):(0,y.jsx)("span",{}),t.promptParseResult&&(0,y.jsxs)("div",{className:nY.promptParser,children:[t.S.foundParams,(0,y.jsxs)("div",{className:nY.promptParserOperations,children:[(0,y.jsx)("span",{className:nY.promptParserOperationItem,onClick:()=>{t.ignoredPromptParser=!0},children:t.S.ignore}),(0,y.jsx)("span",{className:nY.promptParserDivider}),(0,y.jsx)("span",{className:q()(nY.promptParserOperationItem,nY.link),onClick:()=>{t.applyPromptParams()},children:t.S.apply})]})]})]})}),rI=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:nY.switchBotPopoverContent,children:[(0,y.jsx)("span",{className:nY.closeIcon,onClick:()=>{t.switchBotPopoverVisible=!1,localStorage.setItem(eh.storageKeys.artistSwitchBotTipShowed,"true")},children:(0,y.jsx)(t_.J,{name:"closeLine",size:10})}),(0,y.jsx)("span",{className:nY.arrow}),(0,y.jsx)("div",{className:nY.tipMsg,children:t.S.switchBotTip})]})});var rM={aiDrawImgResult:"ai-draw-img-result--nr9iP",replyOperations:"reply-operations--yf0pH",replyOperationsLeft:"reply-operations-left--_XQO_",replyOperationItem:"reply-operation-item--fIJFK",cancel:"cancel--T2VvY",error:"error--Xf_SV"};class rL extends S.PN{get S(){return ei.S.Global.modules.Bots.MakeItMore.ChatItem}get controller(){return this.props.controller}get isLast(){return this.props.isLast}get replyFooterVisible(){return!!this.controller.isFinished&&!this.controller.isLoading&&!!this.isLast}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],rL.prototype,"S",null),(0,I.gn)([tB.Fl],rL.prototype,"controller",null),(0,I.gn)([tB.Fl],rL.prototype,"isLast",null),(0,I.gn)([tB.Fl],rL.prototype,"replyFooterVisible",null);let rB=S._Y.createComponent("ChatItem",rL,e=>{let{data:t}=e.props;return"question"===t.type?(0,y.jsx)(rD,{vm:e,data:t}):"error"===t.type?(0,y.jsx)(rP,{vm:e,data:t}):(0,y.jsx)(rF,{vm:e,data:t})}),rE=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsx)("div",{className:rM.replyOperations,children:(0,y.jsx)("div",{className:rM.replyOperationsLeft,children:(0,y.jsxs)("span",{className:rM.replyOperationItem,onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"chat_retry_click",source:"make_it_more"}),t.controller.doRetry()},children:[(0,y.jsx)(t_.J,{name:"monicaRefresh",size:16}),(0,y.jsx)("span",{children:t.S.retry})]})})})}),rD=(0,F.Pi)(function(e){let{vm:t,data:i}=e;return(0,y.jsx)(ik.I,{position:"right",children:i.data.content})}),rP=(0,F.Pi)(function(e){let{vm:t,data:i}=e,o=t.replyFooterVisible?(0,y.jsx)(rE,{vm:t}):null;return"user"===i.data.role?(0,y.jsx)(ik.I,{position:"left",footer:o,children:(0,y.jsx)("span",{className:rM.cancel,children:i.data.content})}):(0,y.jsx)(ik.I,{position:"left",footer:o,children:(0,y.jsx)("span",{className:rM.error,children:i.data.content})})}),rF=(0,F.Pi)(function(e){let{vm:t,data:i}=e;return(0,y.jsxs)(ik.I,{position:"left",footer:t.replyFooterVisible?(0,y.jsx)(rE,{vm:t}):null,children:[(0,y.jsx)(iJ.U,{children:i.data.content}),(0,y.jsx)(eH.E,{className:q()(rM.aiDrawImgResult),skeleton:!0,src:i.data.imageUrl,allowPreview:!0,allowDownload:!0,onDownload:()=>{w.m.downloadFile(i.data.imageUrl)},style:{height:"325px",width:"325px",marginBottom:0}})]})});var rR={makeItMore:"make-it-more--kqnbb",wrapper:"wrapper--WGgSy",inner:"inner--mjx0L",inputArea:"input-area--IITas",loading:"loading--uiPsj",chatToolbar:"chat-toolbar--CZC8s",chatToolbarTop:"chat-toolbar-top--mgTaB",chatToolbarLeft:"chat-toolbar-left--YcZ8Z",chatToolbarRight:"chat-toolbar-right--FidEc",generateVideo:"generate-video--I5EQd"};class rV extends S.PN{get S(){return ei.S.Global.modules.Bots.MakeItMore}get controller(){return this.props.controller}onViewCreate(){var e;null===(e=this.textareaRef)||void 0===e||e.focus({cursor:"end"})}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"textareaRef",void 0)}}(0,I.gn)([tB.Fl],rV.prototype,"S",null),(0,I.gn)([tB.Fl],rV.prototype,"controller",null);var rU=i(68985),rz={src:"https://assets.monica.im/home-web/_next/static/media/Nail.70460a62.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAP1BMVEVMaXFbHh7cZmbBSkqWLS3je3vphITbbW3bYGCEKh7tk5O8RETtlZV/JSOKKCjaZ2f6kJDIR0e5Pj7/oKDtcXF5NSgTAAAAEHRSTlMAGXDYcfdxGfoe2HBydNrYDK4uOQAAAAlwSFlzAAALEwAACxMBAJqcGAAAADZJREFUeJxjYEAAdjYedjDNLyDMBWJxc7CyCrAxMDCwCHJwiDAxMDAw8gkJMoMVcfKycCLpBQAsZAE4M5AI8wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},rO=i(95670);class rW extends S.PN{get S(){return ei.S.Global.modules.Bots.MakeItMore.WelcomeIntroduce}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],rW.prototype,"someState",void 0),(0,I.gn)([tB.Fl],rW.prototype,"S",null);let rH=S._Y.createComponent("WelcomeIntroduce",rW,e=>(0,y.jsx)("div",{className:"pages--PqqUm",children:(0,y.jsxs)("div",{className:"welcome-introduce--mNozJ",children:[(0,y.jsxs)("div",{className:"upside--OigAm",children:[(0,y.jsx)("div",{className:"image-container--a6c8b",children:(0,y.jsx)(te.E,{src:rO.Z,alt:""})}),(0,y.jsx)("div",{className:"playVideo--FlEkn",onClick:()=>(0,rU.y)({insertTarget:"dialogRoot"}),children:(0,y.jsx)(t_.J,{name:"playVideo",size:32})})]}),(0,y.jsxs)("div",{className:"introduction--kc5WD",children:[(0,y.jsxs)("div",{className:"title--G88uG",children:[(0,y.jsx)(t_.J,{className:"make-it-more-icon--hUZBv",name:"makeItMoreTitle",size:270}),(0,y.jsx)(te.E,{src:rz,alt:""}),(0,y.jsx)("span",{children:e.S.image}),(0,y.jsx)("span",{children:e.S.animate}),(0,y.jsx)("span",{children:e.S.video})]}),(0,y.jsx)("p",{className:"summarize--nIhux",children:(0,y.jsx)(aN.Z,{S:e.S.content,components:{first:e=>(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("span",{children:e})}),second:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("br",{}),e]})}})})]})]})})),rG=S._Y.createComponent("MakeItMore",rV,e=>(0,y.jsxs)("div",{className:rR.makeItMore,style:{display:e.props.visible?"flex":"none"},children:[(0,y.jsx)(tb.K,{botId:e.controller.botData.botId}),(0,y.jsx)("div",{className:rR.wrapper,ref:t=>{e.controller.setScrollableContainer(t)},onScroll:t=>e.controller.onScroll(t),children:(0,y.jsxs)("div",{className:rR.inner,children:[e.controller.showHomeView&&(0,y.jsx)(rH,{}),e.controller.chatItems.map((t,i,o)=>(0,y.jsx)(rB,{data:t,controller:e.controller,isLast:i===o.length-1},i)),e.controller.isLoading&&(0,y.jsxs)("div",{className:rR.loading,children:[(0,y.jsx)(eC.g,{iconName:"loading",size:16}),(0,y.jsx)("span",{children:(0,y.jsx)(aN.Z,{S:e.S.generating,data:{progress:e.controller.requestProgress}})})]})]})}),(0,y.jsx)(ol.T,{show:e.controller.scrollBtnVisible,onClick:()=>{e9.W.createUserBehaviorEvent({eventName:"makeItMore_scroll_to_bottom_btn_click"}),e.controller.scrollToBottom()}}),(0,y.jsx)(tH,{className:rR.inputArea,disabled:e.controller.isLoading,value:e.controller.question,onChange:t=>{e.controller.setQuestion(t)},onConfirm:t=>{e.controller.askQuestion(t)},chatToolbar:(0,y.jsx)(rJ,{vm:e}),placeholder:e.S.placeholder,getTextAreaRef:t=>{e.textareaRef=t,e.controller.setTextareaRef(t)},usageInfoProps:{usageModule:e.controller.usageModel,botId:e.controller.botData.botId,isOutside:!0},inputActions:(0,y.jsx)("div",{style:{flex:"1 1 auto"}}),source:"make_it_more",isArtist:!0,creditSpent:rv.Zw.dalle3})]})),rQ=(0,F.Pi)(e=>{let{vm:t}=e;return t.controller.isFinished?null:(0,y.jsx)("div",{className:rR.chatToolbarTop,children:(0,y.jsx)(eO.z,{type:"gray",icon:(0,y.jsx)(t_.J,{name:"agentStopNew",size:16,color:"currentColor"}),onClick:()=>{t.controller.stopTask()},size:"medium",children:t.S.stop})})}),rJ=(0,F.Pi)(e=>{let t,{vm:i}=e;if(f.o.isDesktop){let e=iB.t.prettifyHotkey("mod+n");t="".concat(i.S.newChat," (").concat(e,")")}else t=i.S.newChat;return(0,y.jsxs)("div",{className:rR.chatToolbar,children:[(0,y.jsx)(rQ,{vm:i}),(0,y.jsx)("div",{className:rR.chatToolbarLeft,children:(0,y.jsx)(nA.r,{source:"make_it_more",style:{marginRight:7},botId:i.controller.botData.botId})}),(0,y.jsxs)("div",{className:rR.chatToolbarRight,children:[i.controller.canGenerateVideo&&!i.controller.isLoading?(0,y.jsxs)(tN.u,{title:i.S.generateTip,children:[(0,y.jsx)(eO.z,{className:rR.generateVideo,type:"gray",icon:(0,y.jsx)(t_.J,{name:"generateVideo",size:20,color:"white"}),onClick:()=>{i.controller.doGenerate()},size:"medium",children:i.S.generate}),(0,y.jsx)("span",{})]}):null,(0,y.jsx)(tq.Z,{icon:"chatInputNewChat",tooltip:t,onClick:()=>{i.controller.newChat(),eL.M.createChatToolbarEvent("NewChat")}})]})]})});var rq=i(94808);class rK extends as.Y{constructor(e){super(),(0,T._)(this,"controller",void 0),(0,T._)(this,"botSwitcher",void 0),(0,T._)(this,"handleHistoryClick",void 0),(0,T._)(this,"openMonica",void 0),this.controller=e,this.handleHistoryClick=()=>{let e=this.controller;(0,rq.r)({currentConvId:e.taskId,botId:e.botData.botId,insertTarget:{botId:e.botData.botId,type:"botContainer"},onClickItem:async e=>{e.conversationId&&e.chatBotUid&&await this.controller.botData.parent.loadConversionForBot(e.chatBotUid,e.conversationId)},onNewChat:()=>{e.newTask()}})},this.openMonica=()=>{E.w.show("chat"),D.Mp.openBot(tX.Z9.monica)},this.botSwitcher=(0,y.jsx)(nA.r,{botId:this.controller.botData.botId,source:"agent",style:{marginRight:7}})}}var rY={botRenderer:"bot-renderer--JQ5FY",fixedFoldBtn:"fixed-fold-btn--EqRn5",chatResources:"chat-resources--eug7x"};class rZ extends S.PN{get S(){return ei.S.Global.modules.Bots.BotRender}async onViewCreate(){}onViewDestroy(){tU.f.getProxy(this).disposeAll()}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],rZ.prototype,"S",null);let rX=S._Y.createComponent("BotRenderer",rZ,e=>D.Mp.fetchRemoteBotDetailLoading?(0,y.jsx)(eC.g,{fullScreen:!0}):(0,y.jsxs)("div",{id:eh.o5.ChatBoxRender,className:q()(rY.botRenderer),ref:e=>{au.p.monicaBotEl=e},children:["horizontal"===ex.L.mainWindowMode&&"chat"===eF.J.activeTabKey&&(0,y.jsx)(nb,{}),D.Mp.botItems.map(t=>{let{controller:i}=t;if(!t.hasOpened)return null;let o=t.uid===D.Mp.currentBotId;return i instanceof ac._?(0,y.jsx)(r$,{vm:e,chatController:i},t.uid):i instanceof as.o?(i.agentCrossPlatform=new rK(i),(0,y.jsx)(an,{controller:i,visible:o},t.uid)):i instanceof al.F?(0,y.jsx)(rj,{visible:o,artistController:i},t.uid):i instanceof ad.t?(0,y.jsx)(rG,{visible:o,controller:i},t.uid):null})]})),r$=(0,F.Pi)(e=>{let{vm:t,chatController:i}=e,o=i.botData.botId===D.Mp.currentBotId,a=i.loading,n="horizontal"===ex.L.mainWindowMode&&i.artifactManager.isOpen&&!au.p.resourcePanelVisible;return o&&a?(0,y.jsx)(ag,{style:E.w.calcViewMaxWith("800px")}):(0,y.jsxs)(y.Fragment,{children:[eF.J.showSidebarFoldBtn&&(0,y.jsx)("div",{className:rY.fixedFoldBtn,style:ei.a.rtl?{right:"12px"}:{left:"12px"},children:(0,y.jsx)(tf.b,{})}),(0,y.jsx)(ap.rW,{visible:o,chatController:i}),n&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(ay,{enableQuickFix:!0,dataManager:i.artifactManager.artifactDataManager,onClose:()=>{i.artifactManager.close()}})}),o&&au.p.resourcePanelVisible&&(0,y.jsxs)("div",{className:rY.chatResources,children:[au.p.windowInfos.file.visible&&(0,y.jsx)(ab.Q,{windowId:au.p.windowInfos.file.id,draggable:!1,allowedDirections:["left"]}),au.p.windowInfos.search.visible&&(0,y.jsx)(af.X,{windowId:au.p.windowInfos.search.id,draggable:!1,allowedDirections:["left"]})]})]})}),r0=(0,F.Pi)(()=>{let e=D.Mp.botItems.find(e=>e.uid===tX.tW.searchAgent);if(!e||!(e.controller instanceof as.o))return null;let{controller:t}=e;return(0,y.jsx)(an,{controller:t,visible:!0},e.uid)});var r1=i(22046),r2=i(5336),r3=i(71816),r6=i(57156),r5=i(15364),r4=i(1340);class r9 extends S.PN{onViewCreate(){let e;if(!this.container)return;let t=(0,r4.Z)(this.calculateColumn.bind(this),200),i=new ResizeObserver(i=>{let o=i[0].contentRect.width;0!==o&&o!==e&&(t(),e=o,this.inited=!0)});i.observe(this.container),this.dispose=()=>{i.disconnect()},0!==this.container.getBoundingClientRect().width&&(t(),this.inited=!0)}onViewDestroy(){this.dispose()}calculateColumn(){var e;if(!this.container)return;let t=null===(e=this.container)||void 0===e?void 0:e.getBoundingClientRect().width,i=1/0,{default:o,...a}=this.props.breakpointCols,n=o||4;Object.keys(a).forEach(e=>{let o=parseInt(e);o>0&&t<=o&&o<i&&(i=o,n=a[o])}),this.columns=Math.max(1,n)}dispose(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"container",null),(0,T._)(this,"columns",4),(0,T._)(this,"inited",!1)}}(0,I.gn)([S.SB],r9.prototype,"container",void 0),(0,I.gn)([S.SB],r9.prototype,"columns",void 0),(0,I.gn)([S.SB],r9.prototype,"inited",void 0);let r7=S._Y.createComponent("Masonry",r9,e=>{let{children:t,columnClassName:i,className:o}=e.props,a=(()=>{let i=e.columns,o=Array(i);for(let e=0;e<o.length;e++)o[e]=[];let a=Q.Children.toArray(t);for(let e=0;e<a.length;e++)o[e%i].push(a[e]);return o})();return(0,y.jsx)("div",{ref:t=>{t&&(e.container=t)},style:{gap:e.props.gap},className:q()("masonry--KBeKM",o,{"hide--FLIBI":!e.inited}),children:a.map((t,o)=>(0,y.jsx)("div",{style:{gap:e.props.gap},className:q()("masonry-items--emEWH",i),children:t.map(e=>e)},o))})});var r8=i(31640),se=i(52825),st=i(8621),si={src:"https://assets.monica.im/home-web/_next/static/media/monicaApp.1e95d950.png",height:272,width:310,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAaVBMVEXg5+3AwL9fX167qKClmYyieG1MaXFbg33Fx8h/fHODUVDa4OHQtXc5Njb/tEqdmZTPz82np6XV1NObhZKTblfAuLiUfIjIs7R1cqWXlZPKys2rmJno7Oz8/v+bl5SRjoumi0Tz8/JdQzJjNbzSAAAAHXRSTlP9taz9/iIADPYa8v5C/I33/n794/3u4fVQb+H//qtSpcUAAAAJcEhZcwAACxMAAAsTAQCanBgAAABASURBVHicBcEFAsAgDASwQ9sydynM/v/IJYiDsdYcEcJvP5aTIFwBedshnIGyBNT+8k4nQvs035wSIXS3Ol3pB1luAxnPTyLCAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7},so={src:"https://assets.monica.im/home-web/_next/static/media/monicaAppQr.855ef496.png",height:121,width:121,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAANlBMVEV/f38+Pj56enqCgoKUlJSOjo5mZmaJiYlgYGCenp5dXV2IiIiUlJR+fn5ra2ttbW1ycnJ2dnaZ0eAzAAAACnRSTlPu/v//7v7u7+n5tEtGMQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAD5JREFUeJwVyUkSwCAMAzDXBgJJ2P7/Waa6Ct1GgVlH2eKlEth+gkyAdWq6o7lipRI9atz4a3D55EXTt3m0HkQfAfxhoCIlAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};class sa extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var sn=JSON.parse('{"fill":"none","content":"\\n<g id=\\"phone\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.84155 0.733338H10.1585C10.6972 0.733331 11.1378 0.733325 11.4958 0.762579C11.8664 0.792859 12.2011 0.857447 12.5137 1.01672C13.0029 1.26599 13.4007 1.66374 13.65 2.15296C13.8092 2.46556 13.8738 2.80027 13.9041 3.17088C13.9334 3.52893 13.9334 3.9695 13.9333 4.5082V11.4918C13.9334 12.0305 13.9334 12.4711 13.9041 12.8291C13.8738 13.1997 13.8092 13.5345 13.65 13.847C13.4007 14.3363 13.0029 14.734 12.5137 14.9833C12.2011 15.1426 11.8664 15.2072 11.4958 15.2374C11.1378 15.2667 10.6972 15.2667 10.1585 15.2667H5.84154C5.30284 15.2667 4.86228 15.2667 4.50423 15.2374C4.13362 15.2072 3.7989 15.1426 3.48631 14.9833C2.99708 14.734 2.59934 14.3363 2.35006 13.847C2.19079 13.5345 2.1262 13.1997 2.09592 12.8291C2.06667 12.4711 2.06667 12.0305 2.06668 11.4918V4.5082C2.06667 3.9695 2.06667 3.52893 2.09592 3.17088C2.1262 2.80027 2.19079 2.46556 2.35006 2.15296C2.59934 1.66374 2.99708 1.26599 3.48631 1.01672C3.7989 0.857447 4.13362 0.792859 4.50423 0.762579C4.86228 0.733325 5.30284 0.733331 5.84155 0.733338ZM3.26668 10.6V11.4667C3.26668 12.0366 3.26715 12.428 3.29194 12.7314C3.31615 13.0278 3.36056 13.187 3.41927 13.3023C3.5535 13.5657 3.76767 13.7799 4.03109 13.9141C4.14633 13.9728 4.30554 14.0172 4.60194 14.0414C4.90535 14.0662 5.29673 14.0667 5.86668 14.0667H10.1333C10.7033 14.0667 11.0947 14.0662 11.3981 14.0414C11.6945 14.0172 11.8537 13.9728 11.9689 13.9141C12.2324 13.7799 12.4465 13.5657 12.5808 13.3023C12.6395 13.187 12.6839 13.0278 12.7081 12.7314C12.7329 12.428 12.7333 12.0366 12.7333 11.4667V10.6H3.26668ZM12.7333 9.40001H3.26668V4.53334C3.26668 3.96338 3.26715 3.57201 3.29194 3.2686C3.31615 2.9722 3.36056 2.81298 3.41927 2.69775C3.55349 2.43432 3.76767 2.22015 4.03109 2.08593C4.14633 2.02722 4.30554 1.98281 4.60194 1.95859C4.90535 1.9338 5.29673 1.93334 5.86668 1.93334H10.1333C10.7033 1.93334 11.0947 1.9338 11.3981 1.95859C11.6945 1.98281 11.8537 2.02722 11.9689 2.08593C12.2324 2.22015 12.4465 2.43432 12.5808 2.69775C12.6395 2.81298 12.6839 2.9722 12.7081 3.2686C12.7329 3.57201 12.7333 3.96338 12.7333 4.53334V9.40001ZM6.06668 12.3333C6.06668 12.002 6.33531 11.7333 6.66668 11.7333H9.33335C9.66472 11.7333 9.93335 12.002 9.93335 12.3333C9.93335 12.6647 9.66472 12.9333 9.33335 12.9333H6.66668C6.33531 12.9333 6.06668 12.6647 6.06668 12.3333Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let sr=S._Y.createComponent("Phone3Icon",sa,e=>(0,y.jsx)(R.s,{...e.props,name:"Phone3Icon",iconData:sn}));class ss extends S.PN{get S(){return ei.S.Global.modules.Video.DownloadMobilePopover}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],ss.prototype,"someState",void 0),(0,I.gn)([S.Fl],ss.prototype,"S",null);let sl=S._Y.createComponent("DownloadMobilePopover",ss,e=>{let{iconSize:t=20,iconColor:i="var(--theme-icon-primary)",featureList:o,title:a,phoneImg:n}=e.props;if(w.m.getIsMobile())return null;let r="horizontal"!==ex.L.mainWindowMode?(0,y.jsx)(sr,{size:t,padding:6,color:i,button:!0,onClick:()=>{window.open(w.m.genFullUrl(eR.Cl.download))}}):(0,y.jsx)(eO.z,{type:"outline",size:"medium",icon:(0,y.jsx)(sr,{title:e.S.downloadMobile,size:t,color:i}),style:{borderRadius:8},onClick:()=>{window.open(w.m.genFullUrl(eR.Cl.download))},children:e.S.downloadMobile});return(0,y.jsx)(tK.x,{content:(0,y.jsxs)("div",{className:"popover-content--PZOiv",children:[(0,y.jsx)("div",{className:"popover-title--o3Tx0",children:null!=a?a:e.S.popoverTitle}),(0,y.jsx)("ul",{children:(null!=o?o:[e.S.feature1,e.S.feature2,e.S.feature3]).map((e,t)=>(0,y.jsxs)("li",{children:[(0,y.jsx)(aP.r,{color:"var(--theme-icon-brand)",size:20,style:{display:"inline-flex"}}),(0,y.jsx)("span",{className:"text--ki_vT",children:e})]},t))}),(0,y.jsxs)("div",{className:"banner--S81qR",children:[(0,y.jsx)("div",{className:"monica-app--oJN6s",children:(0,y.jsx)(eH.E,{src:null!=n?n:(0,te.Q)(si),style:{height:136}})}),(0,y.jsx)("div",{className:"qr--JmbuT",children:(0,y.jsx)("div",{className:"qr-inner--EldPe",children:(0,y.jsx)(eH.E,{src:(0,te.Q)(so)})})})]})]}),trigger:"hover",open:st.imageController.showDownloadMobilePopover,onOpenChange:e=>{st.imageController.showDownloadMobilePopover=e},children:(0,y.jsx)("span",{children:r})})});class sc extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var sd=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M1.1001 12.0001C1.1001 5.98019 5.98019 1.1001 12.0001 1.1001C18.02 1.1001 22.9001 5.98019 22.9001 12.0001C22.9001 18.02 18.02 22.9001 12.0001 22.9001C5.98019 22.9001 1.1001 18.02 1.1001 12.0001Z\\" fill=\\"black\\" fill-opacity=\\"0.3\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M11.1928 7.51819L15.9646 10.5858C16.1171 10.6838 16.2785 10.7875 16.4062 10.8871C16.5412 10.9924 16.7452 11.1714 16.8651 11.4551C17.0123 11.8034 17.0123 12.1965 16.8651 12.5449C16.7452 12.8285 16.5412 13.0076 16.4062 13.1129C16.2785 13.2125 16.1171 13.3162 15.9646 13.4141L11.1927 16.4818C11.0154 16.5958 10.8343 16.7123 10.6758 16.7948C10.5164 16.8778 10.2398 17.0048 9.90037 16.9806C9.4953 16.9517 9.12276 16.7483 8.87938 16.4232C8.67541 16.1507 8.63275 15.8494 8.61633 15.6704C8.60002 15.4925 8.60006 15.2771 8.6001 15.0663V8.93365C8.60006 8.72283 8.60002 8.50748 8.61633 8.32955C8.63275 8.15055 8.67541 7.84924 8.87938 7.57679C9.12276 7.2517 9.4953 7.04831 9.90037 7.01938C10.2398 6.99513 10.5164 7.12218 10.6758 7.20517C10.8343 7.28766 11.0154 7.40415 11.1928 7.51819Z\\" fill=\\"white\\"/>\\n\\n","viewBox":"0 0 24 24"}');let sp=S._Y.createComponent("PlayCircleFillIcon",sc,e=>(0,y.jsx)(R.s,{...e.props,name:"PlayCircleFillIcon",iconData:sd}));var sm=i(8042);class sh extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var sg=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M6.74419 1.375C6.39901 1.375 6.11919 1.65482 6.11919 2C6.11919 2.34518 6.39901 2.625 6.74419 2.625H9.25581C9.60099 2.625 9.88081 2.34518 9.88081 2C9.88081 1.65482 9.60099 1.375 9.25581 1.375H6.74419ZM2 3.39825C1.65482 3.39825 1.375 3.67808 1.375 4.02325C1.375 4.36843 1.65482 4.64825 2 4.64825H3.25873V12.5C3.25873 13.6736 4.21012 14.625 5.38373 14.625H10.6163C11.7899 14.625 12.7413 13.6736 12.7413 12.5V4.64825H14C14.3452 4.64825 14.625 4.36843 14.625 4.02325C14.625 3.67808 14.3452 3.39825 14 3.39825H12.1163H3.88373H2ZM4.50873 12.5V4.64825H11.4913V12.5C11.4913 12.9832 11.0995 13.375 10.6163 13.375H5.38373C4.90048 13.375 4.50873 12.9832 4.50873 12.5ZM8.625 6.88372C8.625 6.53854 8.34518 6.25872 8 6.25872C7.65482 6.25872 7.375 6.53854 7.375 6.88372V10.7907C7.375 11.1359 7.65482 11.4157 8 11.4157C8.34518 11.4157 8.625 11.1359 8.625 10.7907V6.88372Z\\" fill=\\"#55555D\\"/>\\n</svg>\\n","viewBox":"0 0 16 16"}');let su=S._Y.createComponent("DeleteIcon",sh,e=>(0,y.jsx)(R.s,{...e.props,name:"DeleteIcon",iconData:sg}));var sv=i(29239),sC=i(446),sx={src:"https://assets.monica.im/home-web/_next/static/media/image_empty.87c14e0c.png",height:200,width:201,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEVMaXHZ3ODCxc7Bxs3Hy9Lp6uv/zf/O0tnGzdPS193Bxs7f4uLu7vLAxMvEyc/GytLk5unl5+jO0tfr6+vk5Oj09ffm6O1Ukt0UAAAAF3RSTlMA/EDx/lkB/hX9wiNccqKI/NnEQUT//pHcStEAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAA/SURBVHicFchJEoAgDADBQUIWcNfw/6da9rEBfHEU3Xq1HWWxMLFrMKqEWK7Q7SwlGxwRUv7xe87MF8Vba49+QBICGbIqT6MAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},sy={tabs:"tabs--QhuYJ",wrapper:"wrapper--cFoav",tab:"tab--IN_EK","equal-width":"equal-width--lNFgN",equalWidth:"equal-width--lNFgN","tab-label":"tab-label--_ubEK",tabLabel:"tab-label--_ubEK","active-tab":"active-tab--dC2QI",activeTab:"active-tab--dC2QI","light-theme":"light-theme--s7NFT",lightTheme:"light-theme--s7NFT","small-size":"small-size--LxztX",smallSize:"small-size--LxztX","middle-size":"middle-size--ZuPfF",middleSize:"middle-size--ZuPfF","large-size":"large-size--UwaME",largeSize:"large-size--UwaME",primary:"primary--IKBW4","no-transition":"no-transition--gTiHY",noTransition:"no-transition--gTiHY"};class sb extends S.PN{get S(){return ei.S.Global.components.TranslateSubmenus}handleChange(e){var t,i;null===(t=(i=this.props).onChange)||void 0===t||t.call(i,e)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],sb.prototype,"someState",void 0),(0,I.gn)([S.Fl],sb.prototype,"S",null);let sf=S._Y.createComponent("Tabs",sb,e=>{let{className:t,theme:i="dark",type:o="default",equalWidth:a=!1,list:n,value:r}=e.props,s="middle",l=n.findIndex(e=>e.key===r);return(0,y.jsx)("div",{className:q()(sy.tabs,t,{[sy["".concat(s,"-size")]]:s,[sy["".concat(i,"-theme")]]:i,[sy["".concat(o)]]:o}),style:{"--monica-tab-index":l,"--monica-tab-length":n.length},children:(0,y.jsx)("div",{className:sy.wrapper,children:n.map(t=>{var i;let{key:o,label:n}=t;return(0,y.jsxs)("div",{className:q()(sy.tab,{[sy.activeTab]:o===r,[sy.equalWidth]:a}),onClick:()=>{e.handleChange(o)},children:[t.icon&&(0,y.jsx)(t_.J,{color:null!==(i=t.iconColor)&&void 0!==i?i:"var(--theme-icon-quaternary)",className:sy.icon,name:t.icon,size:18}),(0,y.jsx)(nn.x,{className:sy.tabLabel,text:n})]},o)})})})});var sw={history:"history--NJfc3",header:"header--VTotp",btn:"btn--gz2AV",main:"main--i2oOQ",content:"content--kD9LI",group:"group--daoBH",label:"label--Fx3j3",footer:"footer--UICPz",empty:"empty--zatCS",image:"image--WaDRl",notice:"notice--KSqIl",list:"list--vPfRW",imageItem:"image-item--kqfZA",imageLink:"image-link--BgQe8",more:"more--VcCRh",videoIndicator:"video-indicator--sWlL9",fail:"fail--yBtrj",skeleton:"skeleton--Uuegq",loading:"loading--jD2dN",hasSrc:"has-src--HiFMP",navDropdown:"nav-dropdown--RgMin",dropItem:"drop-item--iw_Qn"};let sS={text_to_video:"imageAnimator",image_to_video:"imageAnimator",workflow:"template"};class sA extends S.PN{get S(){return ei.S.Global.modules.Artist.History}fromNow(e){return em.L.isSameDay(e)?this.S.today:em.L.formatTime(e,"MMM D, YYYY")}get hasMore(){return st.imageController.imageHistoryHasMoreMap[st.imageController.activeHistoryTab]}get formatHistoryList(){let e=st.imageController.history.reduce((e,t)=>{let{createdAt:i}=t,o=this.fromNow(i);return e[o]||(e[o]={date:i,items:[]}),e[o].items.push(t),e},{});return Object.keys(e).sort((t,i)=>{if(t===this.S.today)return -1;let{date:o}=e[t],{date:a}=e[i];return em.L.unix(a)-em.L.unix(o)}).map(t=>({date:t,items:e[t].items}))}get list(){return[{label:this.S.all,key:"all"},{label:this.S.image,key:"image"},{label:this.S.video,key:"video"}]}get goWebApp(){return f.o.isExtension||-1===r1.S.location.pathname.indexOf("/image-tools")}handleDeleteHistoryConfirm(e){(0,t7.B)({title:this.S.deleteTitle,content:this.S.deleteNotice,insertTarget:"dialogRoot",onOk:async()=>{try{await this.handleDeleteHistory(e)}catch(e){return!1}return!0},okText:this.S.deleteConfirm,okBtnProps:{type:"danger"}})}async handleDeleteHistory(e){try{await st.imageController.deleteHistory(e)}catch(e){ef.M.error(w.m.formatErrorMsg(e))}}async handlePreview(e,t){let i;let{result:o={},taskType:a,createInfo:n}=e;i="text_to_image"===a?(null==n?void 0:n.imageScene)?"generateImageByScenario":"imageGenerator":sS[a]||"imageGenerator",st.imageController.goto(i,"workflow"===a?{imageStyle:null==n?void 0:n.imageStyle,...(null==n?void 0:n.workflowParam)||{}}:n);let{thumbnailUrlList:r,cdnUrlList:s}=st.imageController.getThumbnailUrls(o,"imageAnimator"===i);f.o.isExtension||("imageAnimator"===i?r[0]&&st.imageController.setGenerateVideoInfo({url:r[0],info:{hasWaterMark:e.hasWaterMark,id:e.id}}):st.imageController.setGenerateImageInfo({urls:r,cdnUrlList:s,info:{hasWaterMark:e.hasWaterMark,id:e.id}},[],t),st.imageController.setGenerateEventPayload(n))}onViewCreate(){st.imageController.fetchHistory(!0)}onViewDestroy(){}handleClose(){this.props.onClose()}handleGoOld(){eF.J.onTabChange("artist"),D.Mp.openBot(tX.Z9.artist)}addIntersectObserver(e,t){setTimeout(()=>{if(this.observedImages.has(e))return;let i=new IntersectionObserver(e=>{let[{intersectionRatio:o}]=e;o>0&&(this.hasSrcImages[t]=!0,i.disconnect())});i.observe(e),this.observedImages.add(e)},100)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"observedImages",new Set),(0,T._)(this,"hasSrcImages",{})}}(0,I.gn)([S.SB],sA.prototype,"hasSrcImages",void 0),(0,I.gn)([S.Fl],sA.prototype,"S",null),(0,I.gn)([S.Fl],sA.prototype,"hasMore",null),(0,I.gn)([S.Fl],sA.prototype,"formatHistoryList",null),(0,I.gn)([S.Fl],sA.prototype,"list",null),(0,I.gn)([S.Fl],sA.prototype,"goWebApp",null);let sj=S._Y.createComponent("History",sA,e=>(0,y.jsxs)("div",{className:sw.history,children:[(0,y.jsxs)("div",{className:sw.header,children:[e.S.title,(0,y.jsx)("div",{className:sw.btn,onClick:()=>{e.handleClose()},children:(0,y.jsx)(aD.T,{size:20,color:"var(--theme-icon-primary)"})})]}),(0,y.jsxs)("div",{className:sw.main,children:[(0,y.jsx)(sf,{list:e.list,value:st.imageController.activeHistoryTab,onChange:e=>{st.imageController.activeHistoryTab=e,st.imageController.fetchHistory(!0)}}),(0,y.jsx)(ev.v,{hasMore:e.hasMore,className:sw.content,dataLength:st.imageController.history.length,next:()=>{st.imageController.fetchMoreHistory()},loader:(0,y.jsx)(eC.g,{className:sw.memoListLoading,type:"geist"}),children:e.formatHistoryList.length?e.formatHistoryList.map(t=>(0,y.jsx)(sk,{vm:e,group:t},t.date)):st.imageController.fetchHistoryLoading?(0,y.jsx)(sL,{}):(0,y.jsx)(sI,{vm:e})},st.imageController.activeHistoryTab)]}),"web-home"===f.o.entryType&&(0,y.jsx)("div",{className:sw.footer,children:(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:sw.oldHistory,onClick:()=>{e.handleGoOld()},children:(0,y.jsx)(nn.x,{text:e.S.viewOldHistory})})})]})),sk=(0,F.Pi)(e=>{let{vm:t,group:i}=e,{date:o,items:a}=i;return(0,y.jsxs)("div",{className:sw.group,children:[(0,y.jsx)("div",{className:sw.label,children:o}),(0,y.jsx)("div",{className:sw.list,children:a.map(e=>{let{resultCode:i,id:o}=e;return i===sC.WT.running?(0,y.jsx)(sN,{},o):i===sC.WT.success?(0,y.jsx)(s_,{vm:t,item:e},o):(0,y.jsx)(sT,{vm:t,item:e},o)})})]})}),sN=()=>(0,y.jsx)("div",{className:sw.imageItem,children:(0,y.jsx)("div",{className:sw.loading,children:(0,y.jsx)(eC.g,{})})}),s_=(0,F.Pi)(e=>{let t,{vm:i,item:o}=e,{result:a,taskType:n,createInfo:r}=o,{thumbnailUrl:s,thumbnailUrlList:l}=a||{},c=(null==l?void 0:l.length)?l:s?[s]:[];if(!c.length)return null;let d="imageAnimator"===(t="text_to_image"===n?(null==r?void 0:r.imageScene)?"generateImageByScenario":"imageGenerator":sS[n]);return(0,y.jsx)(y.Fragment,{children:c.map((e,a)=>{let n=w.m.genFullUrl(w.m.genUrl(i.goWebApp?eR.Cl.image:eR.oo.imageTool,{key:t||"imageGenerator",videoHistoryId:o.id,activeIndex:"".concat(a)}));return(0,y.jsxs)("div",{className:sw.imageItem,ref:t=>{t&&i.addIntersectObserver(t,e)},children:[(0,y.jsx)("a",{href:n,className:sw.imageLink,children:(0,y.jsx)(te.E,{onClick:e=>{i.handlePreview(o,a),e.preventDefault()},className:q()(sw.image,{[sw.hasSrc]:i.hasSrcImages[e]}),alt:"",src:i.hasSrcImages[e]?e:""},o.id)}),(0,y.jsx)(sM,{vm:i,id:o.id,canDeleteImmediately:!1}),d&&(0,y.jsx)("div",{className:sw.videoIndicator,children:(0,y.jsx)(sp,{size:16})})]},e)})})}),sT=(0,F.Pi)(e=>{let{vm:t,item:i}=e,{result:o}=i,{errorMsg:a}=o||{};return(0,y.jsx)(tN.u,{title:a||"",children:(0,y.jsxs)("div",{className:q()(sw.imageItem,sw.fail),children:[(0,y.jsx)(sm.a,{size:32,color:"var(--theme-icon-disable)"}),(0,y.jsx)(sM,{vm:t,id:i.id,canDeleteImmediately:!0})]})})}),sI=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:sw.empty,children:[(0,y.jsx)(te.E,{src:(0,te.Q)(sx),alt:"empty",className:sw.image}),(0,y.jsx)("div",{className:sw.notice,children:t.S.emptyNotice})]})}),sM=(0,F.Pi)(e=>{let{vm:t,canDeleteImmediately:i,id:o}=e;return(0,y.jsx)(tK.x,{trigger:"click",placement:"rightBottom",content:(0,y.jsx)(aR.h,{className:sw.navDropdown,children:(0,y.jsx)(aQ.X,{content:t.S.delete,className:sw.dropItem,icon:(0,y.jsx)(su,{size:20,color:"var(--theme-function-error)"}),onClick:()=>{if(i){t.handleDeleteHistory(o);return}t.handleDeleteHistoryConfirm(o)}})}),children:(0,y.jsx)("div",{className:sw.more,children:(0,y.jsx)(sv.n,{color:"var(--theme-icon-white-primary)",size:16})})})}),sL=(0,F.Pi)(()=>{let e=Array(10).fill(1);return(0,y.jsx)("div",{className:sw.list,children:e.map((e,t)=>(0,y.jsx)("div",{className:q()(sw.imageItem,sw.skeleton)},t))})});var sB={editImage:"edit-image--XfTko"};class sE extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],sE.prototype,"someState",void 0);class sD extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var sP=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.39689 1.74997C5.43078 1.74999 5.46517 1.75001 5.50007 1.75001C5.91429 1.75001 6.25007 2.0858 6.25007 2.50001C6.25007 2.91422 5.91429 3.25001 5.50007 3.25001C4.75431 3.25001 4.52855 3.25645 4.36184 3.30112C3.84421 3.43982 3.43988 3.84414 3.30118 4.36178C3.25651 4.52849 3.25007 4.75425 3.25007 5.50001C3.25007 5.91422 2.91429 6.25001 2.50007 6.25001C2.08586 6.25001 1.75007 5.91422 1.75007 5.50001C1.75007 5.46511 1.75005 5.43072 1.75004 5.39683C1.74971 4.80029 1.74947 4.35729 1.85229 3.97355C2.1297 2.93828 2.93834 2.12964 3.97362 1.85223C4.35735 1.74941 4.80035 1.74965 5.39689 1.74997ZM15.6383 3.30112C15.4716 3.25645 15.2458 3.25001 14.5001 3.25001C14.0859 3.25001 13.7501 2.91422 13.7501 2.50001C13.7501 2.0858 14.0859 1.75001 14.5001 1.75001C14.535 1.75001 14.5694 1.74999 14.6033 1.74997C15.1998 1.74965 15.6428 1.74941 16.0265 1.85223C17.0618 2.12964 17.8704 2.93828 18.1478 3.97355C18.2507 4.35729 18.2504 4.80029 18.2501 5.39682C18.2501 5.43072 18.2501 5.46511 18.2501 5.50001C18.2501 5.91422 17.9143 6.25001 17.5001 6.25001C17.0859 6.25001 16.7501 5.91422 16.7501 5.50001C16.7501 4.75425 16.7436 4.52849 16.699 4.36178C16.5603 3.84414 16.1559 3.43982 15.6383 3.30112ZM7.75007 2.50001C7.75007 2.0858 8.08586 1.75001 8.50007 1.75001H11.5001C11.9143 1.75001 12.2501 2.0858 12.2501 2.50001C12.2501 2.91422 11.9143 3.25001 11.5001 3.25001H8.50007C8.08586 3.25001 7.75007 2.91422 7.75007 2.50001ZM2.50007 7.75001C2.91429 7.75001 3.25007 8.0858 3.25007 8.50001V9.65193C3.29533 9.6258 3.34135 9.60081 3.3881 9.57699C3.7521 9.39152 4.13963 9.3176 4.5612 9.28316C4.9671 9.24999 5.46537 9.25 6.0691 9.25001H6.43105C7.03478 9.25 7.53305 9.24999 7.93894 9.28316C8.36051 9.3176 8.74804 9.39152 9.11204 9.57699C9.67653 9.86461 10.1355 10.3236 10.4231 10.888C10.6086 11.252 10.6825 11.6396 10.7169 12.0611C10.7501 12.467 10.7501 12.9653 10.7501 13.569V13.931C10.7501 14.5347 10.7501 15.033 10.7169 15.4389C10.6825 15.8605 10.6086 16.248 10.4231 16.612C10.3993 16.6587 10.3743 16.7048 10.3481 16.75H11.5001C11.9143 16.75 12.2501 17.0858 12.2501 17.5C12.2501 17.9142 11.9143 18.25 11.5001 18.25H6.48384C6.46633 18.25 6.44874 18.25 6.43105 18.25H6.0691C5.46537 18.25 4.9671 18.25 4.5612 18.2169C4.13963 18.1824 3.7521 18.1085 3.3881 17.923C2.82362 17.6354 2.36467 17.1765 2.07705 16.612C1.89158 16.248 1.81766 15.8605 1.78322 15.4389C1.75005 15.033 1.75006 14.5347 1.75007 13.931V13.569C1.75007 13.5487 1.75007 13.5285 1.75007 13.5084V8.50001C1.75007 8.0858 2.08586 7.75001 2.50007 7.75001ZM6.10007 16.75H6.40007C7.04251 16.75 7.47923 16.7494 7.81679 16.7218C8.14561 16.695 8.31376 16.6463 8.43106 16.5865C8.7133 16.4427 8.94277 16.2132 9.08658 15.931C9.14635 15.8137 9.19504 15.6455 9.22191 15.3167C9.24949 14.9792 9.25007 14.5424 9.25007 13.9V13.6C9.25007 12.9576 9.24949 12.5209 9.22191 12.1833C9.19504 11.8545 9.14635 11.6863 9.08658 11.569C8.94277 11.2868 8.7133 11.0573 8.43106 10.9135C8.31376 10.8537 8.14561 10.805 7.81679 10.7782C7.47923 10.7506 7.04251 10.75 6.40007 10.75H6.10007C5.45764 10.75 5.02092 10.7506 4.68335 10.7782C4.35454 10.805 4.18639 10.8537 4.06909 10.9135C3.78684 11.0573 3.55737 11.2868 3.41356 11.569C3.3538 11.6863 3.3051 11.8545 3.27824 12.1833C3.25066 12.5209 3.25007 12.9576 3.25007 13.6V13.9C3.25007 14.5424 3.25066 14.9792 3.27824 15.3167C3.3051 15.6455 3.3538 15.8137 3.41356 15.931C3.55737 16.2132 3.78684 16.4427 4.06909 16.5865C4.18639 16.6463 4.35454 16.695 4.68335 16.7218C5.02092 16.7494 5.45764 16.75 6.10007 16.75ZM17.5001 7.75001C17.9143 7.75001 18.2501 8.0858 18.2501 8.50001V11.5C18.2501 11.9142 17.9143 12.25 17.5001 12.25C17.0859 12.25 16.7501 11.9142 16.7501 11.5V8.50001C16.7501 8.0858 17.0859 7.75001 17.5001 7.75001ZM17.5001 13.75C17.9143 13.75 18.2501 14.0858 18.2501 14.5C18.2501 14.5349 18.2501 14.5693 18.2501 14.6032C18.2504 15.1997 18.2507 15.6427 18.1478 16.0265C17.8704 17.0617 17.0618 17.8704 16.0265 18.1478C15.6428 18.2506 15.1998 18.2504 14.6033 18.25C14.5694 18.25 14.535 18.25 14.5001 18.25C14.0859 18.25 13.7501 17.9142 13.7501 17.5C13.7501 17.0858 14.0859 16.75 14.5001 16.75C15.2458 16.75 15.4716 16.7436 15.6383 16.6989C16.1559 16.5602 16.5603 16.1559 16.699 15.6382C16.7436 15.4715 16.7501 15.2458 16.7501 14.5C16.7501 14.0858 17.0859 13.75 17.5001 13.75Z\\" fill=\\"#222226\\"/>\\n\\n","viewBox":"0 0 20 20"}');let sF=S._Y.createComponent("RemoveBackgroundIcon",sD,e=>(0,y.jsx)(R.s,{...e.props,name:"RemoveBackgroundIcon",iconData:sP}));class sR extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var sV=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M6.46858 1.75H13.5314C14.2048 1.74999 14.7555 1.74998 15.2031 1.78655C15.6663 1.8244 16.0847 1.90514 16.4755 2.10423C17.087 2.41582 17.5842 2.913 17.8958 3.52453C18.0949 3.91527 18.1756 4.33367 18.2134 4.79693C18.25 5.2445 18.25 5.7952 18.25 6.46858V13.5314C18.25 14.2048 18.25 14.7555 18.2134 15.2031C18.1756 15.6663 18.0949 16.0847 17.8958 16.4755C17.5842 17.087 17.087 17.5842 16.4755 17.8958C16.0847 18.0949 15.6663 18.1756 15.2031 18.2134C14.7555 18.25 14.2048 18.25 13.5314 18.25H6.46858C5.7952 18.25 5.2445 18.25 4.79693 18.2134C4.33367 18.1756 3.91527 18.0949 3.52453 17.8958C2.913 17.5842 2.41582 17.087 2.10423 16.4755C1.90514 16.0847 1.8244 15.6663 1.78655 15.2031C1.74998 14.7555 1.74999 14.2048 1.75 13.5314V6.46858C1.74999 5.7952 1.74998 5.2445 1.78655 4.79693C1.8244 4.33367 1.90514 3.91527 2.10423 3.52453C2.41582 2.913 2.913 2.41582 3.52453 2.10423C3.91527 1.90514 4.33367 1.8244 4.79693 1.78655C5.2445 1.74998 5.7952 1.74999 6.46858 1.75ZM4.91908 3.28157C4.54858 3.31184 4.34956 3.36735 4.20552 3.44074C3.87623 3.60852 3.60852 3.87623 3.44074 4.20552C3.36735 4.34956 3.31184 4.54858 3.28157 4.91908C3.25058 5.29833 3.25 5.78756 3.25 6.5V13.5C3.25 14.2124 3.25058 14.7017 3.28157 15.0809C3.31184 15.4514 3.36735 15.6504 3.44074 15.7945C3.60852 16.1238 3.87623 16.3915 4.20552 16.5593C4.34956 16.6327 4.54858 16.6882 4.91908 16.7184C5.29833 16.7494 5.78756 16.75 6.5 16.75H13.5C14.2124 16.75 14.7017 16.7494 15.0809 16.7184C15.4514 16.6882 15.6504 16.6327 15.7945 16.5593C16.1238 16.3915 16.3915 16.1238 16.5593 15.7945C16.6327 15.6504 16.6882 15.4514 16.7184 15.0809C16.7494 14.7017 16.75 14.2124 16.75 13.5V6.5C16.75 5.78756 16.7494 5.29833 16.7184 4.91908C16.6882 4.54858 16.6327 4.34956 16.5593 4.20552C16.3915 3.87623 16.1238 3.60852 15.7945 3.44074C15.6504 3.36735 15.4514 3.31184 15.0809 3.28157C14.7017 3.25058 14.2124 3.25 13.5 3.25H6.5C5.78756 3.25 5.29833 3.25058 4.91908 3.28157ZM5.91667 5.83333C5.91667 5.41912 6.25245 5.08333 6.66667 5.08333H13.3333C13.7475 5.08333 14.0833 5.41912 14.0833 5.83333C14.0833 6.24755 13.7475 6.58333 13.3333 6.58333H10.75V14.1667C10.75 14.5809 10.4142 14.9167 10 14.9167C9.58579 14.9167 9.25 14.5809 9.25 14.1667V6.58333H6.66667C6.25245 6.58333 5.91667 6.24755 5.91667 5.83333Z\\" fill=\\"#222226\\"/>\\n\\n","viewBox":"0 0 20 20"}');let sU=S._Y.createComponent("RemoveTextIcon",sR,e=>(0,y.jsx)(R.s,{...e.props,name:"RemoveTextIcon",iconData:sV}));class sz extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var sO=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Line/&#230;&#150;&#185;&#229;&#144;&#145;/&#229;&#176;&#143;&#231;&#174;&#173;&#229;&#164;&#180;-&#228;&#184;&#139;\\">\\n<path id=\\"Vector\\" d=\\"M10.5832 5.99969L7.99657 8.58635L5.4099 5.99969C5.1499 5.73969 4.7299 5.73969 4.4699 5.99969C4.2099 6.25969 4.2099 6.67969 4.4699 6.93969L7.5299 9.99969C7.7899 10.2597 8.2099 10.2597 8.4699 9.99969L11.5299 6.93969C11.7899 6.67969 11.7899 6.25969 11.5299 5.99969C11.2699 5.74635 10.8432 5.73969 10.5832 5.99969Z\\" fill=\\"#262626\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let sW=S._Y.createComponent("ArrowDownSharpIcon",sz,e=>(0,y.jsx)(R.s,{...e.props,name:"ArrowDownSharpIcon",iconData:sO}));var sH=i(91990),sG=i(8954),sQ=i(22979),sJ={back:"back--SBqbc",breadcrumb:"breadcrumb--UVHgl",breadcrumbBack:"breadcrumb-back--UXSo3",breadcrumbCurrent:"breadcrumb-current--yiM30",backGuide:"back-guide--h19IH",title:"title--wTw90",desc:"desc--Ep5Sl",video:"video--MWAa6"},sq=i(13942);class sK extends S.PN{get S(){return ei.S.Global.modules.Artist.ArtistDetail}get subTitle(){return st.imageController.functionType?({editImage:ei.S.Global.modules.ImageView.editImage,template:ei.S.Global.modules.ImageView.template,imageAnimator:ei.S.Global.modules.ImageView.aiVideo,imageGenerator:ei.S.Global.modules.ImageView.aiDraw,generateImageByScenario:ei.S.Global.modules.ImageView.drawByTemplate,realtimeGenerateImageByText:ei.S.Global.modules.ImageView.realtimeDraw,realtimeGenerateImageByCanvas:ei.S.Global.modules.ImageView.realtimeCanvas})[st.imageController.functionType]:""}onViewCreate(){sq.P.getIsExtInstalled().then(e=>{this.extensionInstalled=e})}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"extensionInstalled",!1)}}(0,I.gn)([S.SB],sK.prototype,"extensionInstalled",void 0),(0,I.gn)([S.Fl],sK.prototype,"S",null),(0,I.gn)([S.Fl],sK.prototype,"subTitle",null);let sY=S._Y.createComponent("DetailBack",sK,e=>(0,y.jsx)(tK.x,{open:st.imageController.showDetailBackGuide,trigger:"click",content:st.imageController.showDetailBackGuide&&(0,y.jsxs)("div",{className:sJ.backGuide,children:[(0,y.jsxs)("div",{className:sJ.title,children:[e.S.backToHome,(0,y.jsx)(nj.h,{title:"",color:"var(--theme-icon-primary)",iconSize:14,iconName:"upgradeClose",onClick:()=>{st.imageController.showDetailBackGuide=!1}})]}),(0,y.jsx)("div",{className:sJ.desc,children:e.S.backHomeDesc}),(0,y.jsx)("video",{src:(0,te.Q)("https://assets.monica.im/home-web/_next/static/videos/backHome-3ad7cc7aa3b646c69ed8b46219d800dd.mp4"),loop:!0,muted:!0,autoPlay:!0,className:sJ.video,playsInline:!0}),!e.extensionInstalled&&(0,y.jsxs)(eO.z,{type:"primary",onClick:()=>{window.open(w.m.getExtensionInstallUrl("image_detail_page"),"_blank")},children:[(0,y.jsx)(t_.J,{name:"chromeColour",size:18}),e.S.installExtension]})]}),placement:"bottom",onOpenChange:e=>{e||(st.imageController.showDetailBackGuide=e)},children:(0,y.jsxs)("div",{className:sJ.back,onClick:()=>{st.imageController.back()},children:[(0,y.jsx)(sQ.x,{size:20,color:"var(--theme-icon-primary)"}),!w.m.getIsMobile()&&(0,y.jsxs)("div",{className:sJ.breadcrumb,children:[(0,y.jsx)("span",{className:sJ.breadcrumbBack,children:"video"===st.imageController.viewType?ei.S.Global.modules.ImageView.video:ei.S.Global.modules.ImageView.image}),e.subTitle&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:sJ.breadcrumbDivider,children:"/"}),(0,y.jsx)("span",{className:sJ.breadcrumbCurrent,children:e.subTitle})]})]})]})}));var sZ={imageEditLayout:"image-edit-layout--poUjA",mobile:"mobile--X8JyA",hasSubmit:"has-submit--qTKrt",main:"main--UI87z",submitWrapper:"submit-wrapper--pHEsQ",header:"header--heTFT",right:"right--zp5dX",loading:"loading--b1I5a",left:"left--vJ5uM",center:"center--lz8gM"};class sX extends S.PN{get S(){return ei.S.Global.modules.Artist.ArtistDetail}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],sX.prototype,"S",null);let s$=S._Y.createComponent("ImageEditLayout",sX,e=>{let{main:t,submit:i}=e.props;return(0,y.jsxs)("div",{className:q()(sZ.imageEditLayout,{[sZ.mobile]:st.imageController.isMobile,[sZ.hasSubmit]:st.imageController.isMobile&&!!i}),children:[(0,y.jsx)(s0,{vm:e}),(0,y.jsxs)("main",{className:sZ.main,children:[st.imageController.isMobile&&e.props.headerCenter&&(0,y.jsx)("div",{className:sZ.operate,children:e.props.headerCenter}),t,st.imageController.editImageUploading&&(0,y.jsxs)("div",{className:sZ.loading,children:[(0,y.jsx)(eC.g,{size:48,color:"currentColor"}),e.S.uploading]})]}),st.imageController.isMobile&&i&&(0,y.jsx)("div",{className:sZ.submitWrapper,children:i})]})}),s0=e=>{let{vm:t}=e,{actions:i,submit:o,showUserInfo:a,showBack:n,headerLeft:r}=t.props,s=st.imageController.usageModule;return(0,y.jsxs)("div",{className:sZ.header,children:[(0,y.jsx)("div",{className:sZ.left,children:n?r:(0,y.jsx)(sY,{})}),!st.imageController.isMobile&&(0,y.jsx)("div",{className:sZ.center,children:t.props.headerCenter}),(0,y.jsxs)("div",{className:sZ.right,children:[i,!st.imageController.isMobile&&o,a&&(0,y.jsxs)(y.Fragment,{children:[eD.userController.isLogin&&s&&(0,y.jsx)(eW.x,{usageModule:s,isNewStyle:!0,feature:"imageAnimator"===st.imageController.routeKey?"videoTool":""}),(0,y.jsx)(sG.Z,{usageModule:s,onProfileShow:()=>{},avatarSize:32,renderUsage:s?()=>null:void 0})]})]})]})};class s1 extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var s2=JSON.parse('{"fill":"none","content":"\\n<g id=\\"star-fill-01\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M6.4998 0.550049C6.70629 0.550049 6.88629 0.690583 6.93637 0.890908L7.58712 3.4939C7.72177 4.0325 7.76919 4.19916 7.8523 4.32905C7.93418 4.45701 8.04285 4.56567 8.1708 4.64755C8.3007 4.73067 8.46735 4.77809 9.00595 4.91274L11.6089 5.56348C11.8093 5.61357 11.9498 5.79356 11.9498 6.00005C11.9498 6.20654 11.8093 6.38653 11.6089 6.43661L9.00595 7.08736C8.46735 7.22201 8.3007 7.26943 8.1708 7.35255C8.04285 7.43443 7.93418 7.54309 7.8523 7.67105C7.76919 7.80094 7.72177 7.96759 7.58712 8.5062L6.93637 11.1092C6.88629 11.3095 6.7063 11.45 6.49981 11.45C6.29331 11.45 6.11332 11.3095 6.06324 11.1092L5.41249 8.50619C5.27784 7.96759 5.23042 7.80094 5.14731 7.67105C5.06543 7.54309 4.95676 7.43443 4.82881 7.35255C4.69891 7.26943 4.53226 7.22201 3.99366 7.08736L1.39066 6.43661C1.19034 6.38653 1.0498 6.20654 1.0498 6.00005C1.0498 5.79356 1.19034 5.61357 1.39066 5.56348L3.99366 4.91274C4.53226 4.77809 4.69891 4.73067 4.82881 4.64755C4.95676 4.56567 5.06543 4.45701 5.1473 4.32905C5.23042 4.19915 5.27784 4.0325 5.41249 3.4939L6.06324 0.890908C6.11332 0.690583 6.29331 0.550049 6.4998 0.550049Z\\" fill=\\"white\\" fill-opacity=\\"0.65\\"/>\\n</g>\\n\\n","viewBox":"0 0 13 12"}');let s3=S._Y.createComponent("SolidStarIcon",s1,e=>(0,y.jsx)(R.s,{...e.props,name:"SolidStarIcon",iconData:s2}));var s6={submitButton:"submit-button--uycu7",canSubmit:"canSubmit--IRT16",disabled:"disabled--CKurb",cost:"cost--FPjYg"},s5=i(35597);class s4 extends S.PN{get S(){return ei.S.Global.modules.Artist.SubmitButton}get submitText(){return"realtimeGenerateImageByCanvas"===st.imageController.routeKey||"realtimeGenerateImageByText"===st.imageController.routeKey?st.imageController.isMobile?this.S.realtimeConfirmMobile:this.S.realtimeConfirm:this.S.confirm}get canSubmit(){if(this.disabled||st.imageController.isPreviewing||st.imageController.hasImageUploading)return!1;let e={},t=e=>Object.keys(e);if("imageGenerator"===st.imageController.functionType){if((0,s5.Z)(st.imageController.generateImageForm,"loading"))return!1;t(st.imageController.generateImageFields).forEach(t=>{var i;(null===(i=st.imageController.generateImageFields[t])||void 0===i?void 0:i.optional)||st.imageController.generateImageForm[t]||(e[t]="required")})}if("imageAnimator"===st.imageController.functionType){if((0,s5.Z)(st.imageController.generateVideoForm,"loading"))return!1;t(st.imageController.generateVideoFields).forEach(t=>{var i;(null===(i=st.imageController.generateVideoFields[t])||void 0===i?void 0:i.optional)||st.imageController.generateVideoForm[t]||(e[t]="required")})}if("generateImageByScenario"===st.imageController.functionType){if((0,s5.Z)(st.imageController.generateImageByScenarioForm,"loading"))return!1;t(st.imageController.generateImageByScenarioFields).forEach(t=>{var i;(null===(i=st.imageController.generateImageByScenarioFields[t])||void 0===i?void 0:i.optional)||st.imageController.generateImageByScenarioForm[t]||(e[t]="required")})}return("template"===st.imageController.functionType&&t(st.imageController.templateFields).forEach(t=>{var i;if(!(null===(i=st.imageController.templateFields[t])||void 0===i?void 0:i.optional)){let i=st.imageController.templateForm[t];if("templateAspectRatio"===t&&"object"==typeof i&&"isCustom"in i&&i.isCustom){i.value&&2===i.value.split(":").filter(e=>!!e).length||(e[t]="required");return}if("upscaleConfig"===t&&"object"==typeof i&&"upscaleKey"in i){let{upscaleKey:o,outer:a,imageConfig:n}=i;o&&a&&a[0]&&a[1]&&(null==n?void 0:n.height)&&(null==n?void 0:n.width)||(e[t]="required");return}i||(e[t]="required")}}),"realtimeGenerateImageByCanvas"===st.imageController.functionType)?!!st.imageController.realTimeByCanvasImageUrl:"realtimeGenerateImageByText"===st.imageController.functionType?!!st.imageController.realTimeByTextImageUrl:0===Object.keys(e).length}get isFreeImageGenModel(){return"image_gen"===st.imageController.usageModule&&0!==st.imageController.getMaxUsed()}async handleSubmit(){st.imageController.submitLoading||await this.props.onSubmit()}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"disabled",void 0)}}(0,I.gn)([(0,S.qZ)("disabled")],s4.prototype,"disabled",void 0),(0,I.gn)([S.Fl],s4.prototype,"S",null),(0,I.gn)([S.Fl],s4.prototype,"submitText",null),(0,I.gn)([S.Fl],s4.prototype,"canSubmit",null),(0,I.gn)([S.Fl],s4.prototype,"isFreeImageGenModel",null);let s9=S._Y.createComponent("SubmitButton",s4,e=>{let{size:t="overMedium"}=e.props;return(0,y.jsxs)(eO.z,{onClick:()=>{e.handleSubmit()},type:"primary",className:q()(s6.submitButton,{[s6.canSubmit]:e.canSubmit,[s6.disabled]:!e.canSubmit}),size:t,loading:st.imageController.submitLoading,disabled:!e.canSubmit,children:[e.submitText,isNaN(st.imageController.costCredit||NaN)?null:(0,y.jsxs)("div",{className:s6.cost,children:[e.isFreeImageGenModel?(0,y.jsx)(t_.J,{size:12,color:"currentColor",name:"imageAnimator"===st.imageController.routeKey?"videoFill":"imageQuery"}):(0,y.jsx)(s3,{size:12,color:"currentColor"}),(0,y.jsx)("span",{children:st.imageController.costCredit})]})]})});var s7=i(10249),s8=i(94506),le={actions:"actions--_OsMh",btn:"btn--dxGMg",scaleNotice:"scale-notice--L2aX_"};class lt extends S.PN{get S(){return ei.S.Global.modules.Artist.Actions}get downloadUrl(){return"imageAnimator"===st.imageController.routeKey?st.imageController.generateVideoUrl:"realtimeGenerateImageByText"===st.imageController.routeKey?st.imageController.realTimeByTextImageUrl:"realtimeGenerateImageByCanvas"===st.imageController.routeKey?st.imageController.realTimeByCanvasImageUrl:"editImage"===st.imageController.functionType?st.imageController.editImageForm.originUrl:st.imageController.selectImageCdnUrl}get downloadEventPayload(){return"realtimeGenerateImageByText"===st.imageController.routeKey||"realtimeGenerateImageByCanvas"===st.imageController.routeKey||"editImage"===st.imageController.functionType?{key:st.imageController.routeKey,type:"image"}:st.imageController.generateEventPayload}get list(){let e=st.imageController.isMobile||"editImage"===st.imageController.functionType,t=e?(0,y.jsx)(s7.T,{size:20,color:"var(--theme-icon-primary)",button:!0,title:this.S.historyTitle,padding:6}):(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:le.btn,icon:(0,y.jsx)(s7.T,{size:20,color:"var(--theme-icon-primary)"}),children:this.S.historyTitle}),i=e?(0,y.jsx)(s8._,{size:20,color:"var(--theme-icon-primary)",button:!0,title:this.S.download,padding:6}):(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:le.btn,icon:(0,y.jsx)(s8._,{size:20,color:"var(--theme-icon-primary)"}),children:this.S.download});return[{key:"message",icon:e?(0,y.jsx)(ez,{size:20,color:"var(--theme-icon-primary)",button:!0,title:this.S.feedback,padding:6}):(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:le.btn,icon:(0,y.jsx)(ez,{size:20,color:"var(--theme-icon-primary)"}),children:this.S.feedback}),onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank"),st.imageController.sendEvent("image_tool_click",{button:"feedback",position:"detail"})}},{key:"history",icon:this.scaleNoticeShowed?(0,y.jsx)(tK.x,{trigger:"click",content:(0,y.jsx)("div",{className:le.scaleNotice,children:this.S.scaleNotice}),placement:"bottom",showArrow:!0,open:this.scaleNoticeShowed,onOpenChange:e=>{this.scaleNoticeShowed=e},children:t}):(0,y.jsx)(tK.x,{trigger:"click",content:(0,y.jsx)(sj,{onClose:()=>{this.handleToggleHistory(!1)}}),placement:"bottom",open:this.historyVisible,onOpenChange:e=>{this.handleToggleHistory(e),e&&st.imageController.sendEvent("image_tool_click",{button:"history",position:"detail"})},children:t})},{key:"download",icon:i,hide:!this.downloadUrl,onClick:()=>{this.handleDownload(this.downloadUrl),st.imageController.sendEvent("imageAnimator"===st.imageController.routeKey?"video_tool_click":"image_tool_click",{button:"download",position:"detail",...this.downloadEventPayload||{}})}}]}handleDownload(e){if("imageAnimator"===st.imageController.routeKey||e.includes("aliyuncs.com")){w.m.downloadFile(e);return}w.m.fetchWithDownload(e)}handleToggleHistory(e){this.historyVisible=e,"video"===st.imageController.viewType?st.imageController.activeHistoryTab="video":st.imageController.activeHistoryTab="all",e&&st.imageController.fetchHistory(!0)}onViewCreate(){this.triggerListener=st.imageController.on("showScaleNoticeChange",()=>{this.scaleNoticeShowed=!0,setTimeout(()=>{this.scaleNoticeShowed=!1},5e3)})}onViewDestroy(){var e;null===(e=this.triggerListener)||void 0===e||e.unregister()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"triggerListener",void 0),(0,T._)(this,"historyVisible",!1),(0,T._)(this,"scaleNoticeShowed",!1)}}(0,I.gn)([S.SB],lt.prototype,"historyVisible",void 0),(0,I.gn)([S.SB],lt.prototype,"scaleNoticeShowed",void 0),(0,I.gn)([S.Fl],lt.prototype,"S",null),(0,I.gn)([S.Fl],lt.prototype,"downloadUrl",null),(0,I.gn)([S.Fl],lt.prototype,"downloadEventPayload",null),(0,I.gn)([S.Fl],lt.prototype,"list",null);let li=S._Y.createComponent("Actions",lt,e=>(0,y.jsx)("div",{className:le.actions,children:e.list.map(e=>e.hide?null:(0,y.jsx)("div",{onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e)},className:le.action,children:e.icon},e.key))}));class lo extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var la=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M10.7778 10.7778C13.4778 10.7778 15.6667 8.58895 15.6667 5.88889C15.6667 3.18883 13.4778 1 10.7778 1C8.07772 1 5.88889 3.18883 5.88889 5.88889C5.88889 8.58895 8.07772 10.7778 10.7778 10.7778Z\\" fill=\\"#6841EA\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M13.8757 20.5556C13.4601 19.8363 13.2222 19.0014 13.2222 18.1111C13.2222 16.3321 14.1719 14.7741 15.5923 13.9187C15.5922 13.9187 15.5923 13.9187 15.5923 13.9187C16.3265 13.4766 17.1866 13.2222 18.1063 13.2222C20.8098 13.2222 23.0001 15.4124 23.0001 18.1111C23.0001 20.8098 20.8098 23 18.1063 23C16.2979 23 14.72 22.0165 13.8757 20.5556ZM19.722 20.2097C19.5974 20.2097 19.4727 20.162 19.3774 20.0667L17.7689 18.4582C17.6761 18.3653 17.6223 18.2431 17.6223 18.1111V16.1556C17.6223 15.9773 17.719 15.8205 17.8625 15.735C17.9355 15.6916 18.0205 15.6667 18.1111 15.6667C18.38 15.6667 18.6 15.8867 18.6 16.1556V17.9107L20.0667 19.3773C20.2573 19.568 20.2573 19.876 20.0667 20.0667C20.0342 20.0991 19.9983 20.1261 19.9602 20.1475C19.8864 20.189 19.8042 20.2097 19.722 20.2097Z\\" fill=\\"#6841EA\\"/>\\n<path d=\\"M11.5722 18.1111C11.5722 16.2854 12.3205 14.6329 13.5278 13.446C12.6332 13.2992 11.7147 13.2222 10.7778 13.2222C8.35778 13.2222 6.06 13.7356 3.98222 14.64C2.17333 15.4222 1 17.1822 1 19.1622V20.5556H12.0442C11.7398 19.8002 11.5722 18.9751 11.5722 18.1111Z\\" fill=\\"#6841EA\\"/>\\n\\n","viewBox":"0 0 24 24"}');let ln=S._Y.createComponent("QueueIcon",lo,e=>(0,y.jsx)(R.s,{...e.props,name:"QueueIcon",iconData:la}));var lr=i(84399);class ls extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var ll=JSON.parse('{"fill":"none","content":"\\n<g id=\\"check-circle-fill\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8.66657 0.733307C4.6533 0.733307 1.3999 3.9867 1.3999 7.99997C1.3999 12.0132 4.6533 15.2666 8.66657 15.2666C12.6798 15.2666 15.9332 12.0132 15.9332 7.99997C15.9332 3.9867 12.6798 0.733307 8.66657 0.733307ZM11.8575 5.70652C11.5821 5.43115 11.1356 5.43115 10.8603 5.70652L7.76913 8.79766L6.47286 7.50139C6.19749 7.22602 5.75103 7.22602 5.47566 7.50139C5.20029 7.77676 5.20029 8.22322 5.47566 8.49859L7.27053 10.2935C7.5459 10.5688 7.99237 10.5688 8.26774 10.2935L11.8575 6.70372C12.1328 6.42835 12.1328 5.98189 11.8575 5.70652Z\\" fill=\\"#00AA5B\\"/>\\n</g>\\n\\n","viewBox":"0 0 17 16"}');let lc=S._Y.createComponent("CheckCircleFillIcon",ls,e=>(0,y.jsx)(R.s,{...e.props,name:"CheckCircleFillIcon",iconData:ll}));var ld={generateLoading:"generate-loading--wjNFw",full:"full--vwGbs",mobile:"mobile--Ferrs",lottie:"lottie--IjPMq",light:"light--E7kKO",time:"time--MnOWz",imageContent:"image-content--diNRe",content:"content--mJvbD",contact:"contact--CMvJb",loadingIcon:"loading-icon--eHgVu",link:"link--V6Ycx",videoQueue:"video-queue--rJ4um",steps:"steps--qIte8",stepLine:"step-line--gKQP6",stared:"stared--Sogx9",finished:"finished--sh8CL",title:"title--ZCjK4",desc:"desc--HQuIw",videoContent:"video-content--u4Oy0",clock:"clock--fMIcP"};class lp extends S.PN{get S(){return ei.S.Global.modules.Artist.GenerateLoading}get aspectRatio(){let e;let{functionType:t,generateVideoForm:i}=st.imageController;return("imageAnimator"===t&&"text"===i.generateFrom&&(e=i.aspectRatio),e)?"1:1"===e?1:"16:9"===e?16/9:"3:4"===e?3/4:"4:3"===e?4/3:"4:5"===e?.8:"5:2"===e?2.5:"9:16"===e?9/16:null:null}backHome(){st.imageController.back()}onViewCreate(){this.timer=setInterval(()=>{this.time+=1},1e3)}onViewDestroy(){this.timer&&clearInterval(this.timer)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"time",0),(0,T._)(this,"loadLottie",!1),(0,T._)(this,"timer",null)}}(0,I.gn)([S.SB],lp.prototype,"time",void 0),(0,I.gn)([S.SB],lp.prototype,"loadLottie",void 0),(0,I.gn)([S.Fl],lp.prototype,"S",null),(0,I.gn)([S.Fl],lp.prototype,"aspectRatio",null);let lm=S._Y.createComponent("GenerateLoading",lp,e=>{let t=(0,Q.useRef)(null),{lottie:i,full:o,light:a}=e.props;return(0,y.jsxs)("div",{className:q()(ld.generateLoading,{[ld.full]:o,[ld.light]:a,[ld.mobile]:st.imageController.isMobile}),style:{...e.aspectRatio?{maxWidth:1024,maxHeight:1024,aspectRatio:e.aspectRatio,width:"unset",height:"unset"}:{}},children:[i&&(0,y.jsx)("div",{className:ld.lottie,ref:t}),(0,y.jsx)(eC.g,{size:48,color:"video"===e.props.type?"#262626":"currentColor",className:ld.loadingIcon}),(0,y.jsxs)("div",{className:ld.content,children:[(0,y.jsx)(lh,{vm:e}),(0,y.jsx)(lg,{vm:e}),(0,y.jsx)(lu,{vm:e}),(0,y.jsxs)("div",{className:ld.time,children:[e.time,"s"]}),(0,y.jsx)(lv,{vm:e})]})]})}),lh=e=>{let{vm:t}=e;if("video"!==t.props.type)return null;let i=st.imageController.expectedTime?Math.ceil(st.imageController.expectedTime/60):1;if(st.imageController.taskWaitingInfo){let e="generating"===st.imageController.taskWaitingInfo.status,o=Math.ceil(st.imageController.taskWaitingInfo.expectWaitTime/60);return(0,y.jsxs)("div",{className:ld.videoQueue,children:[(0,y.jsxs)("div",{className:ld.steps,children:[(0,y.jsx)(ln,{size:22,color:"var(--theme-icon-brand)"}),(0,y.jsx)("div",{className:q()(ld.stepLine,{[ld.stared]:!e,[ld.finished]:e})}),(0,y.jsx)(lr.k,{size:22,color:e?"var(--theme-icon-brand)":"rgba(255, 255, 255, 0.80)"}),(0,y.jsx)("div",{className:q()(ld.stepLine,{[ld.stared]:e})}),(0,y.jsx)(lc,{size:22,color:"rgba(255, 255, 255, 0.80)"})]}),(0,y.jsx)("div",{className:ld.title,children:e?(0,ei.x)(t.S.VideoLoading.generating,{num:i}):(0,ei.x)(t.S.VideoLoading.queue,{num:st.imageController.taskWaitingInfo.waitNumber,wait:o})}),(0,y.jsx)("div",{className:ld.desc,children:(0,y.jsx)(aN.Z,{S:t.S.VideoLoading.next,components:{span:e=>(0,y.jsx)("span",{className:ld.link,onClick:()=>{t.backHome()},children:e})}})}),(0,y.jsx)("div",{className:ld.desc,children:t.S.VideoLoading.finish})]})}return(0,y.jsxs)("div",{className:ld.videoContent,children:[(0,y.jsx)("div",{className:ld.title,children:(0,ei.x)(t.S.VideoLoading.title,{num:i})}),(0,y.jsx)("div",{className:ld.desc,children:t.S.VideoLoading.desc1}),(0,y.jsx)("div",{className:ld.desc,children:t.S.VideoLoading.desc2})]})},lg=(0,F.Pi)(e=>{let{vm:t}=e;return"image"!==t.props.type?null:(0,y.jsxs)("div",{className:ld.imageContent,children:[(0,y.jsx)("div",{className:ld.desc,children:st.imageController.expectedTime?(0,ei.x)(t.S.ImageLoading.generatingWithTime,{num:st.imageController.expectedTime}):t.S.ImageLoading.generating}),(0,y.jsx)("div",{className:ld.historyItem,children:(0,y.jsx)(aN.Z,{S:t.S.ImageLoading.historyNotice,components:{span:()=>(0,y.jsx)("div",{className:ld.clock,children:(0,y.jsx)(s7.T,{size:20,color:"var(--theme-icon-primary)"})})}})}),(0,y.jsx)("div",{className:ld.desc,children:t.S.ImageLoading.homeNotice})]})}),lu=(0,F.Pi)(e=>{let{vm:t}=e;return"imageSimple"!==t.props.type?null:(0,y.jsx)("div",{className:ld.imageContent,children:(0,y.jsx)("div",{className:ld.desc,children:st.imageController.expectedTime?(0,ei.x)(t.S.ImageLoading.generatingWithTime,{num:st.imageController.expectedTime}):t.S.ImageLoading.generating})})}),lv=(0,F.Pi)(e=>{let{vm:t}=e,i="video"===t.props.type?120:st.imageController.expectedTime;return!i||i>t.time?null:(0,y.jsx)("div",{className:ld.contact,onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank")},children:(0,y.jsx)(aN.Z,{S:t.S.ImageLoading.contact,components:{span:e=>(0,y.jsx)("span",{className:ld.link,children:e})}})})});class lC extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var lx=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M7.04231 9.59345C8.10526 5.64929 11.7141 2.75 16 2.75C20.286 2.75 23.8947 5.64929 24.9577 9.59345C28.1998 10.321 30.625 13.2085 30.625 16.6667C30.625 19.1833 29.3386 21.3983 27.3938 22.6961C26.8196 23.0793 26.0434 22.9244 25.6602 22.3501C25.2771 21.7759 25.4319 20.9997 26.0062 20.6165C27.2874 19.7616 28.125 18.3106 28.125 16.6667C28.125 14.1969 26.23 12.1612 23.8034 11.9372C23.2372 11.8849 22.7775 11.457 22.685 10.8959C22.1574 7.69624 19.3665 5.25 16 5.25C12.6335 5.25 9.84265 7.69624 9.315 10.8959C9.22247 11.457 8.76285 11.8849 8.19657 11.9372C5.76998 12.1612 3.875 14.1969 3.875 16.6667C3.875 18.3106 4.71256 19.7616 5.99383 20.6165C6.56807 20.9997 6.72295 21.7759 6.33976 22.3501C5.95657 22.9244 5.18042 23.0793 4.60617 22.6961C2.66142 21.3983 1.375 19.1833 1.375 16.6667C1.375 13.2085 3.80024 10.321 7.04231 9.59345ZM14.75 19.0111L11.5325 22.2186C11.0436 22.706 10.2521 22.7048 9.76474 22.2158C9.27735 21.7269 9.27858 20.9355 9.7675 20.4481L15.1175 15.1147C15.6053 14.6284 16.3947 14.6284 16.8825 15.1147L22.2325 20.4481C22.7214 20.9355 22.7227 21.7269 22.2353 22.2158C21.7479 22.7048 20.9564 22.706 20.4675 22.2186L17.25 19.0111V28C17.25 28.6904 16.6904 29.25 16 29.25C15.3096 29.25 14.75 28.6904 14.75 28V19.0111Z\\" fill=\\"#3D3D43\\"/>\\n\\n","viewBox":"0 0 32 32"}');let ly=S._Y.createComponent("CloudUploadIcon",lC,e=>(0,y.jsx)(R.s,{...e.props,name:"CloudUploadIcon",iconData:lx}));var lb=i(79872),lf={uploadBox:"upload-box--vbl9G",content:"content--iamKp",title:"title--wgGtF",desc:"desc--B8Q0L",divider:"divider--nFfXg",dropLayer:"drop-layer--qvh1Y",inner:"inner--BLfaa"};class lw extends S.PN{get S(){return ei.S.Global.modules.Artist.UploadBox}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],lw.prototype,"S",null);let lS=S._Y.createComponent("UploadBox",lw,e=>{let t=st.imageController.isMobile,{children:i}=e.props;return(0,y.jsxs)(lb.b,{className:lf.uploadBox,draggable:!0,dragLayer:(0,y.jsx)("div",{className:lf.dropLayer,children:(0,y.jsx)("div",{className:lf.inner,children:e.S.drop})}),onDrop:e=>{0!==e.length&&st.imageController.handleUploadImageForImageEdit(e[0])},children:[(0,y.jsxs)("div",{className:lf.content,onClick:()=>{st.imageController.selectFileForImageEdit()},children:[(0,y.jsx)(ly,{size:32,color:"var(--theme-icon-primary)"}),(0,y.jsx)("p",{className:lf.title,children:t?e.S.selectFile:e.S.clickOrDrag}),(0,y.jsxs)("div",{className:lf.desc,children:[(0,y.jsx)("span",{className:lf.item,children:(0,ei.x)(e.S.supportType,{type:"JPG, JPEG, PNG"})}),!t&&(0,y.jsx)("span",{className:lf.divider}),(0,y.jsx)("span",{className:lf.item,children:(0,ei.x)(e.S.maxSize,{size:10})})]})]}),i]})});var lA={imageToolbar:"image-toolbar--aH4GB",splitLine:"split-line--yu0xq",noBorder:"no-border--j4RdR",row:"row--nfQEZ",actionBtn:"action-btn--EbyaZ",active:"active--q0VIb",disable:"disable--ZwDuL",sliderWrapper:"slider-wrapper--E_vay",colorResult:"color-result--DOYvz",inner:"inner--nk16k",bgColor:"bg-color--Z9jdV",color:"color--hLceg"};class lj extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var lk=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M13.8739 2.70455C13.5224 2.59035 13.1438 2.59035 12.7923 2.70455C12.6386 2.7545 12.4586 2.85598 12.1752 3.09656C11.8851 3.34283 11.5388 3.68835 11.035 4.19212L10.2271 5.00003L14.9998 9.7727L15.8077 8.96479C16.3115 8.46102 16.657 8.11467 16.9033 7.82459C17.1438 7.5412 17.2453 7.36122 17.2953 7.20748C17.4095 6.856 17.4095 6.47739 17.2953 6.12592C17.2453 5.97217 17.1438 5.79219 16.9033 5.5088C16.657 5.21872 16.3115 4.87237 15.8077 4.3686L15.6312 4.19212C15.1274 3.68835 14.7811 3.34283 14.491 3.09656C14.2076 2.85599 14.0276 2.7545 13.8739 2.70455ZM16.8906 10.0032C17.3667 9.52709 17.7561 9.13769 18.0468 8.79536C18.3476 8.44102 18.5863 8.08808 18.7219 7.671C18.9339 7.01826 18.9339 6.31513 18.7219 5.66239C18.5863 5.24532 18.3476 4.89238 18.0468 4.53804C17.7561 4.19569 17.3667 3.80627 16.8905 3.3301L16.6697 3.10923C16.1935 2.63308 15.8041 2.24367 15.4618 1.95305C15.1074 1.65224 14.7545 1.41348 14.3374 1.27796C13.6847 1.06587 12.9816 1.06587 12.3288 1.27796C11.9117 1.41348 11.5588 1.65224 11.2045 1.95305C10.8621 2.24367 10.4727 2.63307 9.9966 3.10922L8.6365 4.46932C8.63662 4.4692 8.63637 4.46945 8.6365 4.46932C8.63637 4.46945 8.63587 4.46995 8.63575 4.47007L3.10899 9.99683C2.63284 10.473 2.24343 10.8624 1.95281 11.2047C1.652 11.559 1.41323 11.912 1.27772 12.3291C1.06563 12.9818 1.06563 13.6849 1.27772 14.3377C1.41323 14.7547 1.652 15.1077 1.95281 15.462C2.24342 15.8044 2.63284 16.1938 3.10899 16.6699L3.68841 17.2493C3.70416 17.2651 3.71975 17.2807 3.73518 17.2961C3.97729 17.5386 4.18162 17.7433 4.42744 17.8939C4.64366 18.0264 4.87939 18.1241 5.12598 18.1833C5.40631 18.2506 5.6955 18.2503 6.03816 18.2501C6.06 18.25 6.08206 18.25 6.10435 18.25H7.22855C7.25084 18.25 7.2729 18.25 7.29475 18.2501C7.33786 18.2501 7.38012 18.2501 7.42163 18.25H17.4998C17.914 18.25 18.2498 17.9142 18.2498 17.5C18.2498 17.0858 17.914 16.75 17.4998 16.75H10.1438L16.8906 10.0032ZM13.9391 10.8334L9.16645 6.06069L4.19188 11.0353C3.6881 11.539 3.34258 11.8854 3.09632 12.1755C2.85574 12.4589 2.75426 12.6388 2.7043 12.7926C2.5901 13.1441 2.5901 13.5227 2.7043 13.8741C2.75426 14.0279 2.85574 14.2079 3.09632 14.4913C3.34258 14.7813 3.6881 15.1277 4.19187 15.6315L4.74907 16.1886C5.06256 16.5021 5.13628 16.569 5.21118 16.6149C5.2932 16.6652 5.38262 16.7022 5.47615 16.7247C5.56157 16.7452 5.661 16.75 6.10435 16.75H7.22855C7.6719 16.75 7.77133 16.7452 7.85675 16.7247C7.95029 16.7022 8.0397 16.6652 8.12172 16.6149C8.19662 16.569 8.27034 16.5021 8.58384 16.1886L13.9391 10.8334Z\\" fill=\\"#222226\\"/>\\n\\n","viewBox":"0 0 20 20"}');let lN=S._Y.createComponent("RemoveBrushedAreaIcon",lj,e=>(0,y.jsx)(R.s,{...e.props,name:"RemoveBrushedAreaIcon",iconData:lk}));class l_ extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var lT=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M3.4167 1.66602C3.4167 1.2518 3.75249 0.916016 4.1667 0.916016H15.8334C16.2476 0.916016 16.5834 1.2518 16.5834 1.66602V10.9319C16.5834 10.9721 16.5834 11.0118 16.5835 11.0511C16.5842 11.6439 16.5849 12.1418 16.4076 12.5809C16.2523 12.9652 16.0009 13.3032 15.6774 13.5623C15.3077 13.8583 14.8307 14.0008 14.2626 14.1704C14.225 14.1816 14.1869 14.193 14.1485 14.2045L12.4167 14.724V16.666C12.4167 18.0007 11.3347 19.0827 10 19.0827C8.66535 19.0827 7.58337 18.0007 7.58337 16.666V14.724L5.8516 14.2045C5.81316 14.193 5.77511 14.1816 5.73747 14.1704C5.16941 14.0008 4.69236 13.8583 4.32271 13.5623C3.99918 13.3032 3.74773 12.9652 3.59252 12.5809C3.4152 12.1418 3.41584 11.6439 3.4166 11.0511C3.41665 11.0118 3.4167 10.9721 3.4167 10.9319V1.66602ZM4.9167 2.41602V9.24935H15.0834V2.41602H13.25V6.74934C13.25 7.16356 12.9143 7.49934 12.5 7.49934C12.0858 7.49934 11.75 7.16356 11.75 6.74934V2.41602H4.9167ZM15.0834 10.7493H4.9167V10.9319C4.9167 11.71 4.92996 11.8869 4.98339 12.0192C5.04227 12.165 5.13764 12.2932 5.26036 12.3915C5.37174 12.4807 5.53735 12.5442 6.28262 12.7678L8.54888 13.4476C8.86612 13.5428 9.08337 13.8348 9.08337 14.166V16.666C9.08337 17.1723 9.49378 17.5827 10 17.5827C10.5063 17.5827 10.9167 17.1723 10.9167 16.666V14.166C10.9167 13.8348 11.134 13.5428 11.4512 13.4476L13.7175 12.7678C14.4627 12.5442 14.6283 12.4807 14.7397 12.3915C14.8624 12.2932 14.9578 12.165 15.0167 12.0192C15.0701 11.8869 15.0834 11.71 15.0834 10.9319V10.7493Z\\" fill=\\"white\\"/>\\n\\n","viewBox":"0 0 20 20"}');let lI=S._Y.createComponent("BrushNewIcon",l_,e=>(0,y.jsx)(R.s,{...e.props,name:"BrushNewIcon",iconData:lT}));class lM extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var lL=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8.21929 1.13569C8.51219 0.842792 8.98706 0.842792 9.27995 1.13569L10.113 1.96877C10.1131 1.96885 10.113 1.96868 10.113 1.96877L17.5213 9.37705C17.6712 9.5269 17.8139 9.66953 17.9242 9.79954C18.0446 9.9413 18.1699 10.1166 18.2436 10.3434C18.3469 10.6614 18.3469 11.004 18.2436 11.322C18.1699 11.5488 18.0446 11.7241 17.9242 11.8658C17.8139 11.9958 17.6712 12.1384 17.5214 12.2883L12.9195 16.8902C12.4433 17.3663 12.0539 17.7557 11.7116 18.0463C11.3573 18.3471 11.0043 18.5859 10.5873 18.7214C9.93452 18.9335 9.23139 18.9335 8.57865 18.7214C8.16158 18.5859 7.80864 18.3471 7.4543 18.0463C7.11196 17.7557 6.72255 17.3663 6.2464 16.8901L3.52548 14.1692C3.04934 13.6931 2.65993 13.3037 2.36931 12.9613C2.0685 12.607 1.82974 12.2541 1.69422 11.837C1.48213 11.1842 1.48213 10.4811 1.69422 9.82838C1.82974 9.4113 2.0685 9.05836 2.36931 8.70402C2.65993 8.36169 3.04935 7.97229 3.5255 7.49614L8.5223 2.49935L8.21929 2.19635C7.9264 1.90345 7.9264 1.42858 8.21929 1.13569ZM9.58296 3.56001L4.60838 8.53458C4.10461 9.03836 3.75909 9.3847 3.51282 9.67479C3.37155 9.8412 3.27824 9.97196 3.21516 10.0827H16.1056L9.58296 3.56001ZM16.1056 11.5827L11.881 15.8073C11.3773 16.311 11.0309 16.6566 10.7408 16.9028C10.4575 17.1434 10.2775 17.2449 10.1237 17.2948C9.77226 17.409 9.39365 17.409 9.04218 17.2948C8.88843 17.2449 8.70845 17.1434 8.42506 16.9028C8.13498 16.6566 7.78863 16.311 7.28486 15.8073L4.60838 13.1308C4.10461 12.627 3.75908 12.2807 3.51282 11.9906C3.37155 11.8242 3.27824 11.6934 3.21516 11.5827H16.1056Z\\" fill=\\"#222226\\"/>\\n\\n","viewBox":"0 0 20 20"}');let lB=S._Y.createComponent("PaintIcon",lM,e=>(0,y.jsx)(R.s,{...e.props,name:"PaintIcon",iconData:lL}));var lE=i(42124);class lD extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var lP=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M13.6363 3.6363C13.9292 3.3434 14.4041 3.3434 14.697 3.6363L18.0303 6.96963C18.3232 7.26252 18.3232 7.7374 18.0303 8.03029L14.697 11.3636C14.4041 11.6565 13.9292 11.6565 13.6363 11.3636C13.3434 11.0707 13.3434 10.5959 13.6363 10.303L15.6893 8.24996H6.25C4.59315 8.24996 3.25 9.5931 3.25 11.25C3.25 12.9068 4.59315 14.25 6.25 14.25H10C10.4142 14.25 10.75 14.5857 10.75 15C10.75 15.4142 10.4142 15.75 10 15.75H6.25C3.76472 15.75 1.75 13.7352 1.75 11.25C1.75 8.76468 3.76472 6.74996 6.25 6.74996H15.6893L13.6363 4.69696C13.3434 4.40406 13.3434 3.92919 13.6363 3.6363Z\\" fill=\\"#C0C5CC\\"/>\\n\\n","viewBox":"0 0 20 20"}');let lF=S._Y.createComponent("ToolForwardIcon",lD,e=>(0,y.jsx)(R.s,{...e.props,name:"ToolForwardIcon",iconData:lP}));var lR=i(86741),lV=i(13516),lU=i(91857),lz=i(86145),lO=i(54274),lW=i(35549),lH=i(65779),lG=i(63122);let lQ=e=>{let{componentCls:t,sizePaddingEdgeHorizontal:i,colorSplit:o,lineWidth:a,textPaddingInline:n,orientationMargin:r,verticalMarginInline:s}=e;return{[t]:Object.assign(Object.assign({},(0,n5.Wf)(e)),{borderBlockStart:"".concat((0,n7.unit)(a)," solid ").concat(o),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat((0,n7.unit)(a)," solid ").concat(o)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat((0,n7.unit)(e.dividerHorizontalGutterMargin)," 0")},["&-horizontal".concat(t,"-with-text")]:{display:"flex",alignItems:"center",margin:"".concat((0,n7.unit)(e.dividerHorizontalWithTextGutterMargin)," 0"),color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(o),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat((0,n7.unit)(a)," solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},["&-horizontal".concat(t,"-with-text-left")]:{"&::before":{width:"calc(".concat(r," * 100%)")},"&::after":{width:"calc(100% - ".concat(r," * 100%)")}},["&-horizontal".concat(t,"-with-text-right")]:{"&::before":{width:"calc(100% - ".concat(r," * 100%)")},"&::after":{width:"calc(".concat(r," * 100%)")}},["".concat(t,"-inner-text")]:{display:"inline-block",paddingBlock:0,paddingInline:n},"&-dashed":{background:"none",borderColor:o,borderStyle:"dashed",borderWidth:"".concat((0,n7.unit)(a)," 0 0")},["&-horizontal".concat(t,"-with-text").concat(t,"-dashed")]:{"&::before, &::after":{borderStyle:"dashed none none"}},["&-vertical".concat(t,"-dashed")]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},["&-plain".concat(t,"-with-text")]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},["&-horizontal".concat(t,"-with-text-left").concat(t,"-no-default-orientation-margin-left")]:{"&::before":{width:0},"&::after":{width:"100%"},["".concat(t,"-inner-text")]:{paddingInlineStart:i}},["&-horizontal".concat(t,"-with-text-right").concat(t,"-no-default-orientation-margin-right")]:{"&::before":{width:"100%"},"&::after":{width:0},["".concat(t,"-inner-text")]:{paddingInlineEnd:i}}})}};var lJ=(0,n4.I$)("Divider",e=>[lQ((0,n9.TS)(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0}))],e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),{unitless:{orientationMargin:!0}}),lq=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i},lK=e=>{let{getPrefixCls:t,direction:i,divider:o}=Q.useContext(nX.E_),{prefixCls:a,type:n="horizontal",orientation:r="center",orientationMargin:s,className:l,rootClassName:c,children:d,dashed:p,plain:m,style:h}=e,g=lq(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),u=t("divider",a),[v,C]=lJ(u),x=r.length>0?"-".concat(r):r,y=!!d,b="left"===r&&null!=s,f="right"===r&&null!=s,w=q()(u,null==o?void 0:o.className,C,"".concat(u,"-").concat(n),{["".concat(u,"-with-text")]:y,["".concat(u,"-with-text").concat(x)]:y,["".concat(u,"-dashed")]:!!p,["".concat(u,"-plain")]:!!m,["".concat(u,"-rtl")]:"rtl"===i,["".concat(u,"-no-default-orientation-margin-left")]:b,["".concat(u,"-no-default-orientation-margin-right")]:f},l,c),S=Q.useMemo(()=>"number"==typeof s?s:/^\d+$/.test(s)?Number(s):s,[s]),A=Object.assign(Object.assign({},b&&{marginLeft:S}),f&&{marginRight:S});return v(Q.createElement("div",Object.assign({className:w,style:Object.assign(Object.assign({},null==o?void 0:o.style),h)},g,{role:"separator"}),d&&"vertical"!==n&&Q.createElement("span",{className:"".concat(u,"-inner-text"),style:A},d)))},lY=i(7873);let lZ=Q.createContext({}),lX=Q.createContext({}),{Provider:l$}=lZ,{Provider:l0}=lX;var l1=i(69525),l2=i(56857);let l3=(e,t)=>(null==e?void 0:e.replace(/[^\w/]/gi,"").slice(0,t?8:6))||"",l6=(e,t)=>e?l3(e,t):"",l5=function(){function e(t){(0,l1.Z)(this,e),this.metaColor=new lY.Color(t),t||this.metaColor.setAlpha(0)}return(0,l2.Z)(e,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return l6(this.toHexString(),1>this.metaColor.getAlpha())}},{key:"toHexString",value:function(){return 1===this.metaColor.getAlpha()?this.metaColor.toHexString():this.metaColor.toHex8String()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}}]),e}(),l4=e=>e instanceof l5?e:new l5(e),l9=e=>Math.round(Number(e||0)),l7=e=>l9(100*e.toHsb().a),l8=(e,t)=>{let i=e.toHsb();return i.a=t||1,l4(i)};var ce=e=>{let{prefixCls:t,value:i,colorCleared:o,onChange:a}=e;return Q.createElement("div",{className:"".concat(t,"-clear"),onClick:()=>{if(i&&!o){let e=i.toHsb();e.a=0;let t=l4(e);null==a||a(t)}}})},ct=i(35081);(n=h||(h={})).hex="hex",n.rgb="rgb",n.hsb="hsb";var ci=i(90175),co=e=>{let{prefixCls:t,min:i=0,max:o=100,value:a,onChange:n,className:r,formatter:s}=e,[l,c]=(0,Q.useState)(a);return(0,Q.useEffect)(()=>{Number.isNaN(a)||c(a)},[a]),Q.createElement(ci.Z,{className:q()("".concat(t,"-steppers"),r),min:i,max:o,value:l,formatter:s,size:"small",onChange:e=>{a||c(e||0),null==n||n(e)}})},ca=e=>{let{prefixCls:t,value:i,onChange:o}=e,a="".concat(t,"-alpha-input"),[n,r]=(0,Q.useState)(l4(i||"#000"));return(0,Q.useEffect)(()=>{i&&r(i)},[i]),Q.createElement(co,{value:l7(n),prefixCls:t,formatter:e=>"".concat(e,"%"),className:a,onChange:e=>{let t=n.toHsb();t.a=(e||0)/100;let a=l4(t);i||r(a),null==o||o(a)}})},cn=i(82003);let cr=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,cs=e=>cr.test("#".concat(e));var cl=e=>{let{prefixCls:t,value:i,onChange:o}=e,[a,n]=(0,Q.useState)(null==i?void 0:i.toHex());return(0,Q.useEffect)(()=>{let e=null==i?void 0:i.toHex();cs(e)&&i&&n(l3(e))},[i]),Q.createElement(cn.default,{className:"".concat(t,"-hex-input"),value:a,prefix:"#",onChange:e=>{let t=e.target.value;n(l3(t)),cs(l3(t,!0))&&(null==o||o(l4(t)))},size:"small"})},cc=e=>{let{prefixCls:t,value:i,onChange:o}=e,a="".concat(t,"-hsb-input"),[n,r]=(0,Q.useState)(l4(i||"#000"));(0,Q.useEffect)(()=>{i&&r(i)},[i]);let s=(e,t)=>{let a=n.toHsb();a[t]="h"===t?e:(e||0)/100;let s=l4(a);i||r(s),null==o||o(s)};return Q.createElement("div",{className:a},Q.createElement(co,{max:360,min:0,value:Number(n.toHsb().h),prefixCls:t,className:a,formatter:e=>l9(e||0).toString(),onChange:e=>s(Number(e),"h")}),Q.createElement(co,{max:100,min:0,value:100*Number(n.toHsb().s),prefixCls:t,className:a,formatter:e=>"".concat(l9(e||0),"%"),onChange:e=>s(Number(e),"s")}),Q.createElement(co,{max:100,min:0,value:100*Number(n.toHsb().b),prefixCls:t,className:a,formatter:e=>"".concat(l9(e||0),"%"),onChange:e=>s(Number(e),"b")}))},cd=e=>{let{prefixCls:t,value:i,onChange:o}=e,a="".concat(t,"-rgb-input"),[n,r]=(0,Q.useState)(l4(i||"#000"));(0,Q.useEffect)(()=>{i&&r(i)},[i]);let s=(e,t)=>{let a=n.toRgb();a[t]=e||0;let s=l4(a);i||r(s),null==o||o(s)};return Q.createElement("div",{className:a},Q.createElement(co,{max:255,min:0,value:Number(n.toRgb().r),prefixCls:t,className:a,onChange:e=>s(Number(e),"r")}),Q.createElement(co,{max:255,min:0,value:Number(n.toRgb().g),prefixCls:t,className:a,onChange:e=>s(Number(e),"g")}),Q.createElement(co,{max:255,min:0,value:Number(n.toRgb().b),prefixCls:t,className:a,onChange:e=>s(Number(e),"b")}))};let cp=[h.hex,h.hsb,h.rgb].map(e=>({value:e,label:e.toLocaleUpperCase()}));var cm=e=>{let{prefixCls:t,format:i,value:o,disabledAlpha:a,onFormatChange:n,onChange:r}=e,[s,l]=(0,lR.Z)(h.hex,{value:i,onChange:n}),c="".concat(t,"-input"),d=(0,Q.useMemo)(()=>{let e={value:o,prefixCls:t,onChange:r};switch(s){case h.hsb:return Q.createElement(cc,Object.assign({},e));case h.rgb:return Q.createElement(cd,Object.assign({},e));case h.hex:default:return Q.createElement(cl,Object.assign({},e))}},[s,t,o,r]);return Q.createElement("div",{className:"".concat(c,"-container")},Q.createElement(ct.default,{value:s,bordered:!1,getPopupContainer:e=>e,popupMatchSelectWidth:68,placement:"bottomRight",onChange:e=>{l(e)},className:"".concat(t,"-format-select"),size:"small",options:cp}),Q.createElement("div",{className:c},d),!a&&Q.createElement(ca,{prefixCls:t,value:o,onChange:r}))},ch=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i},cg=()=>{let e=(0,Q.useContext)(lZ),{prefixCls:t,colorCleared:i,allowClear:o,value:a,disabledAlpha:n,onChange:r,onClear:s,onChangeComplete:l}=e,c=ch(e,["prefixCls","colorCleared","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete"]);return Q.createElement(Q.Fragment,null,o&&Q.createElement(ce,Object.assign({prefixCls:t,value:a,colorCleared:i,onChange:e=>{null==r||r(e),null==s||s()}},c)),Q.createElement(lY.default,{prefixCls:t,value:null==a?void 0:a.toHsb(),disabledAlpha:n,onChange:(e,t)=>null==r?void 0:r(e,t,!0),onChangeComplete:l}),Q.createElement(cm,Object.assign({value:a,onChange:r,prefixCls:t,disabledAlpha:n},c)))},cu=i(29312),cv=i(3259);let cC=e=>e.map(e=>(e.colors=e.colors.map(l4),e)),cx=(e,t)=>{let{r:i,g:o,b:a,a:n}=e.toRgb(),r=new lY.Color(e.toRgbString()).onBackground(t).toHsv();return n<=.5?r.v>.5:.299*i+.587*o+.114*a>192},cy=e=>{let{label:t}=e;return"panel-".concat(t)};var cb=e=>{let{prefixCls:t,presets:i,value:o,onChange:a}=e,[n]=(0,cv.Z)("ColorPicker"),[,r]=(0,lG.ZP)(),[s]=(0,lR.Z)(cC(i),{value:cC(i),postState:cC}),l="".concat(t,"-presets"),c=(0,Q.useMemo)(()=>s.reduce((e,t)=>{let{defaultOpen:i=!0}=t;return i&&e.push(cy(t)),e},[]),[s]),d=e=>{null==a||a(e)},p=s.map(e=>{var i;return{key:cy(e),label:Q.createElement("div",{className:"".concat(l,"-label")},null==e?void 0:e.label),children:Q.createElement("div",{className:"".concat(l,"-items")},Array.isArray(null==e?void 0:e.colors)&&(null===(i=e.colors)||void 0===i?void 0:i.length)>0?e.colors.map((e,i)=>Q.createElement(lY.ColorBlock,{key:"preset-".concat(i,"-").concat(e.toHexString()),color:l4(e).toRgbString(),prefixCls:t,className:q()("".concat(l,"-color"),{["".concat(l,"-color-checked")]:e.toHexString()===(null==o?void 0:o.toHexString()),["".concat(l,"-color-bright")]:cx(e,r.colorBgElevated)}),onClick:()=>d(e)})):Q.createElement("span",{className:"".concat(l,"-empty")},n.presetEmpty))}});return Q.createElement("div",{className:l},Q.createElement(cu.Z,{defaultActiveKey:c,ghost:!0,items:p}))},cf=()=>{let{prefixCls:e,value:t,presets:i,onChange:o}=(0,Q.useContext)(lX);return Array.isArray(i)?Q.createElement(cb,{value:t,presets:i,prefixCls:e,onChange:o}):null},cw=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i},cS=e=>{let{prefixCls:t,presets:i,panelRender:o,color:a,onChange:n,onClear:r}=e,s=cw(e,["prefixCls","presets","panelRender","color","onChange","onClear"]),l="".concat(t,"-inner-content"),c=Object.assign({prefixCls:t,value:a,onChange:n,onClear:r},s),d=Q.useMemo(()=>({prefixCls:t,value:a,presets:i,onChange:n}),[t,a,i,n]),p=Q.createElement(Q.Fragment,null,Q.createElement(cg,null),Array.isArray(i)&&Q.createElement(lK,{className:"".concat(l,"-divider")}),Q.createElement(cf,null));return Q.createElement(l$,{value:c},Q.createElement(l0,{value:d},Q.createElement("div",{className:l},"function"==typeof o?o(p,{components:{Picker:cg,Presets:cf}}):p)))},cA=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i};let cj=(0,Q.forwardRef)((e,t)=>{let{color:i,prefixCls:o,open:a,colorCleared:n,disabled:r,format:s,className:l,showText:c}=e,d=cA(e,["color","prefixCls","open","colorCleared","disabled","format","className","showText"]),p="".concat(o,"-trigger"),m=(0,Q.useMemo)(()=>n?Q.createElement(ce,{prefixCls:o}):Q.createElement(lY.ColorBlock,{prefixCls:o,color:i.toRgbString()}),[i,n,o]);return Q.createElement("div",Object.assign({ref:t,className:q()(p,l,{["".concat(p,"-active")]:a,["".concat(p,"-disabled")]:r})},d),m,c&&Q.createElement("div",{className:"".concat(p,"-text")},"function"==typeof c?c(i):c?(()=>{let e=i.toHexString().toUpperCase(),t=l7(i);switch(s){case"rgb":return i.toRgbString();case"hsb":return i.toHsbString();default:return t<100?"".concat(e.slice(0,7),",").concat(t,"%"):e}})():void 0))});var ck=(e,t)=>{let{defaultValue:i,value:o}=t,[a,n]=(0,Q.useState)(()=>{let t;return l4((void 0!==o?o:void 0!==i?i:e)||"")});return(0,Q.useEffect)(()=>{o&&n(l4(o))},[o]),[a,n]};let cN=(e,t)=>({backgroundImage:"conic-gradient(".concat(t," 0 25%, transparent 0 50%, ").concat(t," 0 75%, transparent 0)"),backgroundSize:"".concat(e," ").concat(e)});var c_=(e,t)=>{let{componentCls:i,borderRadiusSM:o,colorPickerInsetShadow:a,lineWidth:n,colorFillSecondary:r}=e;return{["".concat(i,"-color-block")]:Object.assign(Object.assign({position:"relative",borderRadius:o,width:t,height:t,boxShadow:a},cN("50%",e.colorFillSecondary)),{["".concat(i,"-color-block-inner")]:{width:"100%",height:"100%",border:"".concat((0,n7.unit)(n)," solid ").concat(r),borderRadius:"inherit"}})}},cT=e=>{let{componentCls:t,antCls:i,fontSizeSM:o,lineHeightSM:a,colorPickerAlphaInputWidth:n,marginXXS:r,paddingXXS:s,controlHeightSM:l,marginXS:c,fontSizeIcon:d,paddingXS:p,colorTextPlaceholder:m,colorPickerInputNumberHandleWidth:h,lineWidth:g}=e;return{["".concat(t,"-input-container")]:{display:"flex",["".concat(t,"-steppers").concat(i,"-input-number")]:{fontSize:o,lineHeight:a,["".concat(i,"-input-number-input")]:{paddingInlineStart:s,paddingInlineEnd:0},["".concat(i,"-input-number-handler-wrap")]:{width:h}},["".concat(t,"-steppers").concat(t,"-alpha-input")]:{flex:"0 0 ".concat((0,n7.unit)(n)),marginInlineStart:r},["".concat(t,"-format-select").concat(i,"-select")]:{marginInlineEnd:c,width:"auto","&-single":{["".concat(i,"-select-selector")]:{padding:0,border:0},["".concat(i,"-select-arrow")]:{insetInlineEnd:0},["".concat(i,"-select-selection-item")]:{paddingInlineEnd:e.calc(d).add(r).equal(),fontSize:o,lineHeight:"".concat((0,n7.unit)(l))},["".concat(i,"-select-item-option-content")]:{fontSize:o,lineHeight:a},["".concat(i,"-select-dropdown")]:{["".concat(i,"-select-item")]:{minHeight:"auto"}}}},["".concat(t,"-input")]:{gap:r,alignItems:"center",flex:1,width:0,["".concat(t,"-hsb-input,").concat(t,"-rgb-input")]:{display:"flex",gap:r,alignItems:"center"},["".concat(t,"-steppers")]:{flex:1},["".concat(t,"-hex-input").concat(i,"-input-affix-wrapper")]:{flex:1,padding:"0 ".concat((0,n7.unit)(p)),["".concat(i,"-input")]:{fontSize:o,textTransform:"uppercase",lineHeight:(0,n7.unit)(e.calc(l).sub(e.calc(g).mul(2)).equal())},["".concat(i,"-input-prefix")]:{color:m}}}}}},cI=e=>{let{componentCls:t,controlHeightLG:i,borderRadiusSM:o,colorPickerInsetShadow:a,marginSM:n,colorBgElevated:r,colorFillSecondary:s,lineWidthBold:l,colorPickerHandlerSize:c,colorPickerHandlerSizeSM:d,colorPickerSliderHeight:p}=e;return{["".concat(t,"-select")]:{["".concat(t,"-palette")]:{minHeight:e.calc(i).mul(4).equal(),overflow:"hidden",borderRadius:o},["".concat(t,"-saturation")]:{position:"absolute",borderRadius:"inherit",boxShadow:a,inset:0},marginBottom:n},["".concat(t,"-handler")]:{width:c,height:c,border:"".concat((0,n7.unit)(l)," solid ").concat(r),position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:"".concat(a,", 0 0 0 1px ").concat(s),"&-sm":{width:d,height:d}},["".concat(t,"-slider")]:{borderRadius:e.calc(p).div(2).equal(),["".concat(t,"-palette")]:{height:p},["".concat(t,"-gradient")]:{borderRadius:e.calc(p).div(2).equal(),boxShadow:a},"&-alpha":cN("".concat((0,n7.unit)(p)),e.colorFillSecondary),"&-hue":{marginBottom:n}},["".concat(t,"-slider-container")]:{display:"flex",gap:n,marginBottom:n,["".concat(t,"-slider-group")]:{flex:1,"&-disabled-alpha":{display:"flex",alignItems:"center",["".concat(t,"-slider")]:{flex:1,marginBottom:0}}}}}},cM=e=>{let{componentCls:t,antCls:i,colorTextQuaternary:o,paddingXXS:a,colorPickerPresetColorSize:n,fontSizeSM:r,colorText:s,lineHeightSM:l,lineWidth:c,borderRadius:d,colorFill:p,colorWhite:m,marginXXS:h,paddingXS:g,fontHeightSM:u}=e;return{["".concat(t,"-presets")]:{["".concat(i,"-collapse-item > ").concat(i,"-collapse-header")]:{padding:0,["".concat(i,"-collapse-expand-icon")]:{height:u,color:o,paddingInlineEnd:a}},["".concat(i,"-collapse")]:{display:"flex",flexDirection:"column",gap:h},["".concat(i,"-collapse-item > ").concat(i,"-collapse-content > ").concat(i,"-collapse-content-box")]:{padding:"".concat((0,n7.unit)(g)," 0")},"&-label":{fontSize:r,color:s,lineHeight:l},"&-items":{display:"flex",flexWrap:"wrap",gap:e.calc(h).mul(1.5).equal(),["".concat(t,"-presets-color")]:{position:"relative",cursor:"pointer",width:n,height:n,"&::before":{content:'""',pointerEvents:"none",width:e.calc(n).add(e.calc(c).mul(4)).equal(),height:e.calc(n).add(e.calc(c).mul(4)).equal(),position:"absolute",top:e.calc(c).mul(-2).equal(),insetInlineStart:e.calc(c).mul(-2).equal(),borderRadius:d,border:"".concat((0,n7.unit)(c)," solid transparent"),transition:"border-color ".concat(e.motionDurationMid," ").concat(e.motionEaseInBack)},"&:hover::before":{borderColor:p},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.calc(n).div(13).mul(5).equal(),height:e.calc(n).div(13).mul(8).equal(),border:"".concat((0,n7.unit)(e.lineWidthBold)," solid ").concat(e.colorWhite),borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:"all ".concat(e.motionDurationFast," ").concat(e.motionEaseInBack,", opacity ").concat(e.motionDurationFast)},["&".concat(t,"-presets-color-checked")]:{"&::after":{opacity:1,borderColor:m,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:"transform ".concat(e.motionDurationMid," ").concat(e.motionEaseOutBack," ").concat(e.motionDurationFast)},["&".concat(t,"-presets-color-bright")]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:r,color:o}}}};let cL=(e,t,i)=>({borderInlineEndWidth:e.lineWidth,borderColor:t,boxShadow:"0 0 0 ".concat((0,n7.unit)(e.controlOutlineWidth)," ").concat(i),outline:0}),cB=e=>{let{componentCls:t}=e;return{"&-rtl":{["".concat(t,"-presets-color")]:{"&::after":{direction:"ltr"}},["".concat(t,"-clear")]:{"&::after":{direction:"ltr"}}}}},cE=(e,t,i)=>{let{componentCls:o,borderRadiusSM:a,lineWidth:n,colorSplit:r,red6:s}=e;return{["".concat(o,"-clear")]:Object.assign(Object.assign({width:t,height:t,borderRadius:a,border:"".concat((0,n7.unit)(n)," solid ").concat(r),position:"relative",cursor:"pointer",overflow:"hidden"},i),{"&::after":{content:'""',position:"absolute",insetInlineEnd:n,top:0,display:"block",width:40,height:2,transformOrigin:"right",transform:"rotate(-45deg)",backgroundColor:s}})}},cD=e=>{let{componentCls:t,colorError:i,colorWarning:o,colorErrorHover:a,colorWarningHover:n,colorErrorOutline:r,colorWarningOutline:s}=e;return{["&".concat(t,"-status-error")]:{borderColor:i,"&:hover":{borderColor:a},["&".concat(t,"-trigger-active")]:Object.assign({},cL(e,i,r))},["&".concat(t,"-status-warning")]:{borderColor:o,"&:hover":{borderColor:n},["&".concat(t,"-trigger-active")]:Object.assign({},cL(e,o,s))}}},cP=e=>{let{componentCls:t,controlHeightLG:i,controlHeightSM:o,controlHeight:a,controlHeightXS:n,borderRadius:r,borderRadiusSM:s,borderRadiusXS:l,borderRadiusLG:c,fontSizeLG:d}=e;return{["&".concat(t,"-lg")]:{minWidth:i,height:i,borderRadius:c,["".concat(t,"-color-block, ").concat(t,"-clear")]:{width:a,height:a,borderRadius:r},["".concat(t,"-trigger-text")]:{fontSize:d}},["&".concat(t,"-sm")]:{minWidth:o,height:o,borderRadius:s,["".concat(t,"-color-block, ").concat(t,"-clear")]:{width:n,height:n,borderRadius:l}}}},cF=e=>{let{componentCls:t,colorPickerWidth:i,colorPrimary:o,motionDurationMid:a,colorBgElevated:n,colorTextDisabled:r,colorText:s,colorBgContainerDisabled:l,borderRadius:c,marginXS:d,marginSM:p,controlHeight:m,controlHeightSM:h,colorBgTextActive:g,colorPickerPresetColorSize:u,colorPickerPreviewSize:v,lineWidth:C,colorBorder:x,paddingXXS:y,fontSize:b,colorPrimaryHover:f,controlOutline:w}=e;return[{[t]:Object.assign({["".concat(t,"-inner-content")]:Object.assign(Object.assign(Object.assign(Object.assign({display:"flex",flexDirection:"column",width:i,"&-divider":{margin:"".concat((0,n7.unit)(p)," 0 ").concat((0,n7.unit)(d))},["".concat(t,"-panel")]:Object.assign({},cI(e))},c_(e,v)),cT(e)),cM(e)),cE(e,u,{marginInlineStart:"auto",marginBottom:d})),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:m,height:m,borderRadius:c,border:"".concat((0,n7.unit)(C)," solid ").concat(x),cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all ".concat(a),background:n,padding:e.calc(y).sub(C).equal(),["".concat(t,"-trigger-text")]:{marginInlineStart:d,marginInlineEnd:e.calc(d).sub(e.calc(y).sub(C)).equal(),fontSize:b,color:s},"&:hover":{borderColor:f},["&".concat(t,"-trigger-active")]:Object.assign({},cL(e,o,w)),"&-disabled":{color:r,background:l,cursor:"not-allowed","&:hover":{borderColor:g},["".concat(t,"-trigger-text")]:{color:r}}},cE(e,h)),c_(e,h)),cD(e)),cP(e))},cB(e))}]};var cR=(0,n4.I$)("ColorPicker",e=>{let{colorTextQuaternary:t,marginSM:i}=e;return[cF((0,n9.TS)(e,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:18,colorPickerInsetShadow:"inset 0 0 1px 0 ".concat(t),colorPickerSliderHeight:8,colorPickerPreviewSize:e.calc(8).mul(2).add(i).equal()}))]}),cV=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)0>t.indexOf(o[a])&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i};let cU=e=>{let{value:t,defaultValue:i,format:o,defaultFormat:a,allowClear:n=!1,presets:r,children:s,trigger:l="click",open:c,disabled:d,placement:p="bottomLeft",arrow:m=!0,panelRender:h,showText:g,style:u,className:v,size:C,rootClassName:x,styles:y,disabledAlpha:b=!1,onFormatChange:f,onChange:w,onClear:S,onOpenChange:A,onChangeComplete:j,getPopupContainer:k,autoAdjustOverflow:N=!0,destroyTooltipOnHide:_}=e,T=cV(e,["value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide"]),{getPrefixCls:I,direction:M,colorPicker:L}=(0,Q.useContext)(nX.E_),B=(0,Q.useContext)(n$.Z),E=null!=d?d:B,[,D]=(0,lG.ZP)(),[P,F]=ck(D.colorPrimary,{value:t,defaultValue:i}),[R,V]=(0,lR.Z)(!1,{value:c,postState:e=>!E&&e,onChange:A}),[U,z]=(0,lR.Z)(o,{value:o,defaultValue:a,onChange:f}),[O,W]=(0,Q.useState)(!1),H=I("color-picker","ant-color-picker"),G=(0,Q.useMemo)(()=>100>l7(P),[P]),{status:J}=Q.useContext(lW.aM),K=(0,lO.Z)(C),Y=(0,lz.Z)(H),[Z,X]=cR(H,Y),$=q()(x,Y,{["".concat(H,"-rtl")]:M}),ee=q()((0,lU.Z)(H,J),{["".concat(H,"-sm")]:"small"===K,["".concat(H,"-lg")]:"large"===K},null==L?void 0:L.className,$,v,X),et=q()(H,$),ei=(0,Q.useRef)(!0),eo=e=>{ei.current=!0;let t=l4(e);b&&G&&(t=l8(e)),null==j||j(t)},ea=Object.assign(Object.assign({},null==L?void 0:L.style),u);return Z(Q.createElement(lH.Z,Object.assign({style:null==y?void 0:y.popup,overlayInnerStyle:null==y?void 0:y.popupOverlayInner,onOpenChange:e=>{ei.current&&!E&&V(e)},content:Q.createElement(lW.Ux,{override:!0,status:!0},Q.createElement(cS,Object.assign({},{prefixCls:H,color:P,allowClear:n,colorCleared:O,disabled:E,disabledAlpha:b,presets:r,panelRender:h,format:U,onFormatChange:z,onChangeComplete:eo},{onChange:(e,o,a)=>{let n=l4(e),r=null===t||!t&&null===i;(O||r)&&(W(!1),0===l7(P)&&"alpha"!==o&&(n=l8(n))),b&&G&&(n=l8(n)),a?ei.current=!1:null==j||j(n),F(n),null==w||w(n,n.toHexString())},onChangeComplete:eo,onClear:()=>{W(!0),null==S||S()}}))),overlayClassName:et},{open:R,trigger:l,placement:p,arrow:m,rootClassName:x,getPopupContainer:k,autoAdjustOverflow:N,destroyTooltipOnHide:_}),s||Q.createElement(cj,Object.assign({open:R,className:ee,style:ea,color:t?l4(t):P,prefixCls:H,disabled:E,colorCleared:O,showText:g,format:U},T))))},cz=(0,lV.Z)(cU,"color-picker",e=>e,e=>Object.assign(Object.assign({},e),{placement:"bottom",autoAdjustOverflow:!1}));cU._InternalPanelDoNotUseOrYouWillBeFired=cz;class cO extends S.PN{get S(){return ei.S.Global.modules.Artist.ColorPicker}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"defaultColors",["#1D1D1D","#FFFFFF","#E60013","#E91E63","#EC6101","#F39801","#FEF100","#8FC221","#00A1E9"]),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],cO.prototype,"someState",void 0),(0,I.gn)([S.Fl],cO.prototype,"S",null);let cW=S._Y.createComponent("ColorPicker",cO,e=>{let{value:t,onChange:i,children:o}=e.props;return(0,y.jsx)(cU,{value:t,onChange:(e,t)=>{i(t)},presets:[{label:e.S.preset,colors:[...e.defaultColors]}],children:o})});var cH={sliderAction:"slider-action--T_LnN",row:"row--d_gRG",slider:"slider--QRPPp"};class cG extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],cG.prototype,"someState",void 0);let cQ=S._Y.createComponent("SliderAction",cG,e=>(0,y.jsx)("div",{className:q()(cH.sliderAction,{[cH.row]:e.props.isRow}),children:(0,y.jsx)(rn,{min:1,max:100,tooltip:{open:!1},vertical:!e.props.isRow,className:cH.slider,rootClassName:cH.slider,value:e.props.size,onChange:t=>{var i,o;null===(i=(o=e.props).onChange)||void 0===i||i.call(o,t)}})}));class cJ extends S.PN{get S(){return ei.S.Global.modules.Artist.ImageToolbar}get hideSlider(){return this.props.isRow&&st.imageController.isMobile}get toolList(){let e=this.props.manager;return[{key:"eraser",icon:(0,y.jsx)(lN,{size:20,color:"currentColor"}),title:this.S.eraserTitle,active:"eraser"===e.tool},{key:"brush",icon:(0,y.jsx)(lI,{size:20,color:"currentColor"}),title:this.S.penTitle,active:"brush"===e.tool},...this.hideSlider?[]:[{key:"splitLine"}],{key:"brushColorPicker",hide:!this.props.manager.showBrushColorPicker,title:this.S.brushColor,customNode:(0,y.jsx)(cW,{value:this.props.manager.currentBrushColor,onChange:e=>{this.props.manager.setBrushColor(e)},children:(0,y.jsx)(tN.u,{title:this.S.brushColor,placement:"right",children:(0,y.jsx)("div",{className:lA.colorResult,children:(0,y.jsx)("div",{className:lA.inner,style:{background:this.props.manager.currentBrushColor,width:"".concat(this.mapAtoB(this.props.manager.brushSize),"%"),height:"".concat(this.mapAtoB(this.props.manager.brushSize),"%")}})})})})},{key:"scale",customNode:(0,y.jsx)(cQ,{isRow:!!this.props.isRow,size:e.brushSize,onChange:t=>{e.setBrushSize(t)}})},...this.props.manager.showBgColorPicker?[{key:"splitLine"}]:[],{key:"bgColorPicker",hide:!this.props.manager.showBgColorPicker,title:this.S.bgColor,customNode:(0,y.jsx)(cW,{value:this.props.manager.bgColor,onChange:e=>{this.props.manager.setBgColor(e)},children:(0,y.jsxs)("div",{className:lA.bgColor,children:[(0,y.jsx)(lB,{size:20,color:"currentColor"}),(0,y.jsx)("div",{className:lA.color,style:{background:this.props.manager.bgColor}})]})})},{key:"backward",icon:(0,y.jsx)(lE.k,{size:20,color:e.canUndo?"currentColor":"var(--theme-icon-disable)"}),title:this.S.backwardTitle,disabled:!e.canUndo},{key:"forward",icon:(0,y.jsx)(lF,{size:20,color:e.canRedo?"currentColor":"var(--theme-icon-disable)"}),title:this.S.forwardTitle,disabled:!e.canRedo},{key:"clear",icon:(0,y.jsx)(su,{style:{opacity:e.canClear?1:.5},size:20,color:"var(--theme-function-error)"}),title:this.S.clearTitle,disabled:!e.canClear}].filter(e=>!e.hide)}mapAtoB(e){return(e-0)*70/100+30}handleActionClick(e){if("brush"===e||"eraser"===e){this.props.manager.setTool(e);return}if("forward"===e){this.props.manager.redo();return}if("backward"===e){this.props.manager.undo();return}if("clear"===e){(0,t7.B)({title:this.S.clearReminder,content:this.S.clearContent,insertTarget:"dialogRoot",onOk:async()=>(this.props.manager.clear(),!0),okText:this.S.clearConfirm,okBtnProps:{type:"danger"}});return}}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],cJ.prototype,"S",null),(0,I.gn)([S.Fl],cJ.prototype,"hideSlider",null),(0,I.gn)([S.Fl],cJ.prototype,"toolList",null);let cq=S._Y.createComponent("ImageToolbar",cJ,e=>(0,y.jsx)("div",{className:q()(lA.imageToolbar,{[lA.row]:e.props.isRow,[lA.noBorder]:e.props.noBorder}),children:e.toolList.map((t,i)=>{if("scale"===t.key&&e.hideSlider)return null;if("splitLine"===t.key)return(0,y.jsx)("div",{className:lA.splitLine},i);if("scale"===t.key||"brushColorPicker"===t.key)return t.customNode;let o=(0,y.jsx)("div",{className:q()(lA.actionBtn,{[lA.active]:t.active,[lA.disable]:t.disabled}),onClick:()=>{!t.disabled&&(t.customNode||e.handleActionClick(t.key))},children:t.customNode?t.customNode:t.icon});return e.hideSlider&&("brush"===t.key||"eraser"===t.key)&&(o=(0,y.jsx)(tK.x,{placement:"bottom",content:(0,y.jsx)("div",{className:lA.sliderWrapper,children:(0,y.jsx)(cQ,{isRow:!!e.props.isRow,size:e.props.manager.brushSize,onChange:t=>{e.props.manager.setBrushSize(t)}})}),children:o})),t.title?(0,y.jsx)(tN.u,{title:t.title,placement:"right",children:o},i):o})}));var cK={imageRouteBar:"image-route-bar--OCZZL",light:"light--TGE5n",action:"action--d5hCS",hasBg:"has-bg--6CY09"};class cY extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var cZ=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8.21929 1.1363C8.51219 0.843403 8.98706 0.843403 9.27995 1.1363L10.113 1.96938C10.1131 1.96946 10.113 1.9693 10.113 1.96938L17.5213 9.37766C17.6712 9.52751 17.8139 9.67014 17.9242 9.80015C18.0446 9.94191 18.1699 10.1172 18.2436 10.344C18.3469 10.662 18.3469 11.0046 18.2436 11.3226C18.1699 11.5494 18.0446 11.7247 17.9242 11.8664C17.8139 11.9964 17.6712 12.139 17.5214 12.2889L12.9195 16.8908C12.4433 17.3669 12.0539 17.7563 11.7116 18.0469C11.3573 18.3477 11.0043 18.5865 10.5873 18.722C9.93452 18.9341 9.23139 18.9341 8.57865 18.722C8.16158 18.5865 7.80864 18.3477 7.4543 18.0469C7.11196 17.7563 6.72255 17.3669 6.2464 16.8907L3.52548 14.1698C3.04934 13.6937 2.65993 13.3043 2.36931 12.962C2.0685 12.6076 1.82974 12.2547 1.69422 11.8376C1.48213 11.1849 1.48213 10.4817 1.69422 9.82899C1.82974 9.41191 2.0685 9.05897 2.36931 8.70463C2.65993 8.3623 3.04935 7.9729 3.5255 7.49675L8.5223 2.49996L8.21929 2.19696C7.9264 1.90406 7.9264 1.42919 8.21929 1.1363ZM9.58296 3.56062L4.60838 8.5352C4.10461 9.03897 3.75909 9.38531 3.51282 9.6754C3.37155 9.84181 3.27824 9.97257 3.21516 10.0833H16.1056L9.58296 3.56062ZM16.1056 11.5833L11.881 15.8079C11.3773 16.3116 11.0309 16.6572 10.7408 16.9034C10.4575 17.144 10.2775 17.2455 10.1237 17.2954C9.77226 17.4096 9.39365 17.4096 9.04218 17.2954C8.88843 17.2455 8.70845 17.144 8.42506 16.9034C8.13498 16.6572 7.78863 16.3116 7.28486 15.8079L4.60838 13.1314C4.10461 12.6276 3.75908 12.2813 3.51282 11.9912C3.37155 11.8248 3.27824 11.694 3.21516 11.5833H16.1056Z\\" fill=\\"#222226\\"/>\\n\\n","viewBox":"0 0 20 20"}');let cX=S._Y.createComponent("ReplaceBackgroundIcon",cY,e=>(0,y.jsx)(R.s,{...e.props,name:"ReplaceBackgroundIcon",iconData:cZ}));class c$ extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var c0=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M0.916748 5.83331C0.916748 4.03839 2.37182 2.58331 4.16675 2.58331H15.8334C17.6283 2.58331 19.0834 4.03839 19.0834 5.83331V14.1666C19.0834 15.9616 17.6283 17.4166 15.8334 17.4166H4.16675C2.37182 17.4166 0.916748 15.9616 0.916748 14.1666V5.83331ZM4.16675 4.08331C3.20025 4.08331 2.41675 4.86681 2.41675 5.83331V14.1666C2.41675 15.1331 3.20025 15.9166 4.16675 15.9166H15.8334C16.7999 15.9166 17.5834 15.1331 17.5834 14.1666V5.83331C17.5834 4.86681 16.7999 4.08331 15.8334 4.08331H4.16675ZM5.00008 6.74998C5.41429 6.74998 5.75008 7.08577 5.75008 7.49998V9.24998H8.00008V7.49998C8.00008 7.08577 8.33587 6.74998 8.75008 6.74998C9.16429 6.74998 9.50008 7.08577 9.50008 7.49998V12.5C9.50008 12.9142 9.16429 13.25 8.75008 13.25C8.33587 13.25 8.00008 12.9142 8.00008 12.5V10.75H5.75008V12.5C5.75008 12.9142 5.41429 13.25 5.00008 13.25C4.58587 13.25 4.25008 12.9142 4.25008 12.5V10.75V9.24998V7.49998C4.25008 7.08577 4.58587 6.74998 5.00008 6.74998ZM10.5001 7.49998C10.5001 7.08577 10.8359 6.74998 11.2501 6.74998H12.5001C14.295 6.74998 15.7501 8.20505 15.7501 9.99998C15.7501 11.7949 14.295 13.25 12.5001 13.25H11.2501C10.8359 13.25 10.5001 12.9142 10.5001 12.5V7.49998ZM12.0001 8.24998V11.75H12.5001C13.4666 11.75 14.2501 10.9665 14.2501 9.99998C14.2501 9.03348 13.4666 8.24998 12.5001 8.24998H12.0001Z\\" fill=\\"#222226\\"/>\\n\\n","viewBox":"0 0 20 20"}');let c1=S._Y.createComponent("UpscaleIcon",c$,e=>(0,y.jsx)(R.s,{...e.props,name:"UpscaleIcon",iconData:c0}));class c2 extends S.PN{get S(){return ei.S.Global.modules.Artist.ImageRouteBar}get list(){return[{key:"removeBrushedArea",label:this.S.removeBrushedArea,icon:(0,y.jsx)(lN,{size:20,color:"var(--theme-icon-primary)"})},{key:"removeText",label:this.S.removeText,icon:(0,y.jsx)(sU,{size:20,color:"var(--theme-icon-primary)"})},{key:"removeBackground",label:this.S.removeBackground,icon:(0,y.jsx)(sF,{size:20,color:"var(--theme-icon-primary)"})},{key:"changeBackground",label:this.S.replaceBackground,icon:(0,y.jsx)(cX,{size:20,color:"var(--theme-icon-primary)"})},{key:"upscale",label:this.S.upscale,icon:(0,y.jsx)(c1,{size:20,color:"var(--theme-icon-primary)"})}]}handleClick(e){if(!this.props.imageUrl){ef.M.info(this.S.uploadNotice);return}st.imageController.editImageByTool(this.props.imageUrl,e)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],c2.prototype,"S",null),(0,I.gn)([S.Fl],c2.prototype,"list",null);let c3=S._Y.createComponent("ImageRouteBar",c2,e=>{let{isLight:t}=e.props;return(0,y.jsxs)("div",{className:q()(cK.imageRouteBar,{[cK.hasBg]:e.props.hasBg,[cK.light]:!!t}),children:[e.list.map(i=>{let o=(0,y.jsxs)("div",{className:cK.action,onClick:()=>{e.handleClick(i.key)},children:[i.icon,!t&&i.label]},i.key);return t?(0,y.jsx)(tN.u,{title:i.label,children:o},i.key):o}),!f.o.isProd&&(0,y.jsx)("span",{className:cK.action,onClick:()=>{"imageGenerator"===st.imageController.functionType?(w.m.copyToClipboard(JSON.stringify({key:st.imageController.functionType,payload:{style:st.imageController.generateImageForm.imageStyle,prompt:st.imageController.generateImageForm.prompt,ratio:st.imageController.generateImageForm.aspectRatio,modelType:st.imageController.generateImageForm.modelType,imageUrl:e.props.imageUrl}})),ef.M.success("已复制")):"generateImageByScenario"===st.imageController.functionType?(w.m.copyToClipboard(JSON.stringify({key:st.imageController.functionType,payload:{scene:st.imageController.generateImageByScenarioForm.imageScene,prompt:st.imageController.generateImageByScenarioForm.prompt,ratio:st.imageController.generateImageByScenarioForm.aspectRatio,modelType:st.imageController.generateImageByScenarioForm.modelType,imageUrl:e.props.imageUrl}})),ef.M.success("已复制")):ef.M.error("此类型不支持")},children:"CopyData"})]})});var c6=i(93124),c5={imageEmpty:"image-empty--Zb_sQ",content:"content--TW5gB",image:"image--MZWDo",textWrap:"text-wrap--aqssJ",title:"title--GjyV_",desc:"desc--q0Kg5",smallScreen:"small-screen--zofOC",videoPlaceholder:"video-placeholder--_O742",isMobile:"is-mobile--sR1IC",inner:"inner--nExYM",video:"video--pYLpQ",mask:"mask--TiLcm",videoPlaceholderContent:"video-placeholder-content--EQdtb",logo:"logo--x6uJS",waterMarkList:"water-mark-list--nUjPb",listItem:"list-item--UYEZ7",itemImage:"item-image--ckLbt",itemTitle:"item-title--PPk_w",itemDesc:"item-desc--jbGI2"},c4={src:"https://assets.monica.im/home-web/_next/static/media/p_dark_template_upscale.45fc8bda.webp",height:800,width:1200,blurDataURL:"data:image/webp;base64,UklGRnoAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSB4AAAABHyCmIV6dTP9YakREbEBB2zZMVf6U3w6IiP6HQnxWUDggNgAAANABAJ0BKggABQACQDgllALsAPR6qrIAAP76oNSTcC5gwlUPXd/tU2Fx5ZSg1FxHA+p4W0YAAA==",blurWidth:8,blurHeight:5},c9={src:"https://assets.monica.im/home-web/_next/static/media/p_image.551e88b0.webp",height:800,width:1200,blurDataURL:"data:image/webp;base64,UklGRn4AAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSCkAAAAANXh4dXFxYkxo5ebt///YmWTW1+b//9iZZNbW5f//2Jlk1tbl///YmQBWUDggLgAAALABAJ0BKggABQACQDglpAAC52I/6sAA/vQXIaPzH+9cMypwpttvPz2WWVAAAAA=",blurWidth:8,blurHeight:5},c7={src:"https://assets.monica.im/home-web/_next/static/media/p_scenario.cdab8eba.webp",height:800,width:1200,blurDataURL:"data:image/webp;base64,UklGRnwAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSCkAAAAANXl5dnFxcU5m3d/q////n2TW1ub///+fZNbW3+rq6Z1k1tbGmZmZmQBWUDggLAAAAJABAJ0BKggABQACQDglpAAC50WsAAD+9Bdvuebf6vlou1HKHeqFbmggAAAA",blurWidth:8,blurHeight:5},c8={src:"https://assets.monica.im/home-web/_next/static/media/p_template.809305e5.webp",height:800,width:1200,blurDataURL:"data:image/webp;base64,UklGRogAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSCkAAAAANXl5dnBwcGNx///8////23D///z////bZ+Di6////9tm3d3RsbGxqABWUDggOAAAALABAJ0BKggABQACQDgllAAC52d7JYAA/th11Og85rbC+VE1b/QTcImJgtSQNG58Hwbq3+ECAAAA",blurWidth:8,blurHeight:5},de={src:"https://assets.monica.im/home-web/_next/static/media/p_template_dark.c9b78f38.webp",height:800,width:1200,blurDataURL:"data:image/webp;base64,UklGRnoAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSB4AAAABHyCmIV6dTP9YakREbEBB2zZMVf6U3w6IiP6HQnxWUDggNgAAALABAJ0BKggABQACQDglnAAC94VhtiAA/vNd1/+E+TPuLwXWftxRgJ0jbvnBaxr72EZW/wgQAA==",blurWidth:8,blurHeight:5},dt={src:"https://assets.monica.im/home-web/_next/static/media/p_template_upscale.7c9586e0.webp",height:800,width:1200,blurDataURL:"data:image/webp;base64,UklGRo4AAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSCkAAAAANXl5dnBwcGNx///8////23D///z////bZ+Di6////9tm3d3p////2wBWUDggPgAAANABAJ0BKggABQACQDgllALsAPSHrnAAAOJ+1TmdG3U7PePWeV5LYsQD6tZ4uHclBX/AZavkL1jJ8gmvgAAA",blurWidth:8,blurHeight:5},di={src:"https://assets.monica.im/home-web/_next/static/media/p_video.48fa50da.webp",height:800,width:1200,blurDataURL:"data:image/webp;base64,UklGRnwAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSCkAAAAANXh4dXFxYkxo5ebt///YmWTW1+b//9iZZNbW1MjItplk1tbGmZmZmQBWUDggLAAAAJABAJ0BKggABQACQDglpAAC50YUgAD+9Bcho9uX5JanuHvWaRHUqifUAAAA",blurWidth:8,blurHeight:5},da={src:"https://assets.monica.im/home-web/_next/static/media/kling.cf8ede3f.webp",height:688,width:1136,blurDataURL:"data:image/webp;base64,UklGRnYAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSA0AAAABD/Dy/4gIMYER/Y8IAFZQOCBCAAAA8AEAnQEqCAAFAAJAOCWYAnRH/4HoAragAP71XzbQ+L+MZbltNtVmm30OQoNfeHFpgWGkc/ofXPtA1A9UBcWA/MgA",blurWidth:8,blurHeight:5},dn={src:"https://assets.monica.im/home-web/_next/static/media/klingLogo.a98b3e16.webp",height:50,width:230,blurDataURL:"data:image/webp;base64,UklGRmwAAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAVykvLT5KCj+CKjs4JlYdQQBWUDggNAAAAJABAJ0BKggAAgACQDgljAACnTm1rgD9TdVrkBCLSQ6j//kk2k2IjBbUf4ZTPp1u5b5gAAA=",blurWidth:8,blurHeight:2},dr={src:"https://assets.monica.im/home-web/_next/static/media/minimax.3e50aa70.webp",height:688,width:1136,blurDataURL:"data:image/webp;base64,UklGRm4AAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSA0AAAABD/Dy/4gIMYER/Y8IAFZQOCA6AAAAsAEAnQEqCAAFAAJAOCWMAnQBDmfx3gD+9swv0jrhsLnIBi6rlGKodOzzEvknxW0wdVmwwioFa7QAAA==",blurWidth:8,blurHeight:5},ds={src:"https://assets.monica.im/home-web/_next/static/media/minimaxLogo.bb1adc3f.webp",height:50,width:193,blurDataURL:"data:image/webp;base64,UklGRnAAAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAd4QoNTdUJzJ9xzBIVVZeXABWUDggOAAAANABAJ0BKggAAgACQDglAE6AHpGrdXQAAP1vUhH697jRZIw6eyshjrYgdOmbfPf/H0fE3dvx8AAA",blurWidth:8,blurHeight:2},dl={src:"https://assets.monica.im/home-web/_next/static/media/pixverse.a7755910.webp",height:688,width:1136,blurDataURL:"data:image/webp;base64,UklGRmwAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSA0AAAABD/Dy/4gIMYER/Y8IAFZQOCA4AAAAsAEAnQEqCAAFAAJAOCWcAAJZzu+qgAD+igDrcwQ1JiP6DWK4X296uZ5zEx/mFCPAyaL1sBGhsAA=",blurWidth:8,blurHeight:5},dc={src:"https://assets.monica.im/home-web/_next/static/media/pixverseLogo.9cb8dbb1.webp",height:56,width:236,blurDataURL:"data:image/webp;base64,UklGRmwAAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAgzUgGRIOAwGkf05rcGt5cwBWUDggNAAAAPABAJ0BKggAAgACQDgllAJ0fwAYCXvaAADiBbUcV3isb4llipupB+qAJTXVV7MhCyuFwAA=",blurWidth:8,blurHeight:2},dd={src:"https://assets.monica.im/home-web/_next/static/media/runway.41c426bf.webp",height:688,width:1136,blurDataURL:"data:image/webp;base64,UklGRmoAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSA0AAAABD/Dy/4gIMYER/Y8IAFZQOCA2AAAA0AEAnQEqCAAFAAJAOCWMAnQBDsw5qEAA/tfnmxMY543s84v+f4AJOxCAiVZC5nEJLjvCLgAA",blurWidth:8,blurHeight:5},dp={src:"https://assets.monica.im/home-web/_next/static/media/runwayLogo.bd531bae.webp",height:49,width:388,blurDataURL:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAAQAAAABwAAAAAAQUxQSAkAAAAAgDdGPj9GPDQAVlA4ICIAAACQAQCdASoIAAEAAkA4JaQAAudZtgAA/u5pvrzPRHcAAAAA",blurWidth:8,blurHeight:1},dm={src:"https://assets.monica.im/home-web/_next/static/media/svd.1b6384d3.webp",height:688,width:1136,blurDataURL:"data:image/webp;base64,UklGRnIAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSA0AAAABD/Dy/4gIMYER/Y8IAFZQOCA+AAAA8AEAnQEqCAAFAAJAOCWgAnQBF369PdboAP71HfIv8vWKh1uigmnk8jehKFv8977y6MPm8aeu4cjG0+5AAAA=",blurWidth:8,blurHeight:5},dh={src:"https://assets.monica.im/home-web/_next/static/media/svdLogo.a58dc6f9.webp",height:48,width:173,blurDataURL:"data:image/webp;base64,UklGRnwAAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAAglQAKUA6YENTiz4bYltDSQBWUDggRAAAALABAJ0BKggAAgACQDglAE6AHpD/ecAA/qyrgOshHekxQH2Z9tJOE32Bp7jSsYM+7xHp/+CVHmx8f/glZZexQsvP4AAA",blurWidth:8,blurHeight:2},dg={src:"https://assets.monica.im/home-web/_next/static/media/waterMarkList1.db364575.webp",height:96,width:120,blurDataURL:"data:image/webp;base64,UklGRpIAAABXRUJQVlA4WAoAAAAQAAAABwAABQAAQUxQSDEAAAAAFTtQZS8DAgGu////4KuWU53///////+rhf///////5RRy7ft////fAIDBCNIXXAnAFZQOCA6AAAAsAEAnQEqCAAGAAJAOCWcAAKczBz0wADiXVr3qlNYxcOddV+dXeIL3/nUAcPDpeQTw8mjTyC2oOAAAA==",blurWidth:8,blurHeight:6},du={src:"https://assets.monica.im/home-web/_next/static/media/waterMarkList2.93f986db.webp",height:144,width:180,blurDataURL:"data:image/webp;base64,UklGRp4AAABXRUJQVlA4WAoAAAAQAAAABwAABQAAQUxQSDEAAAAAAgMDAgEAAADx///+OQEAAP////9HAgAA/////3kCAADx/////yEAAAIDBpOSAwAAAFZQOCBGAAAA0AEAnQEqCAAGAAJAOCWIAnQBF18vu/AA/mi0/bcKu7oe0ZNo2C34JdK05d7q6typH9/YYanwazBsU2F1VjF1Yr7+AkwAAA==",blurWidth:8,blurHeight:6},dv={src:"https://assets.monica.im/home-web/_next/static/media/waterMarkList3.41438afc.webp",height:96,width:120,blurDataURL:"data:image/webp;base64,UklGRqQAAABXRUJQVlA4WAoAAAAQAAAABwAABQAAQUxQSDEAAAAAAgMDAgEAAADx///9OQEAAP////9IBAIB/////9XEuC3x////////kgMFPra9vbApAFZQOCBMAAAA0AEAnQEqCAAGAAJAOCWUAnQA9If7zgAA/sYHk+gOaEIjLQvnfzxowu8+hnXrk/rsyNgS2lrFPW7tDCXYqDtrqV0LmSnK50VoTvgAAA==",blurWidth:8,blurHeight:6};class dC extends S.PN{get S(){return ei.S.Global.modules.ImageView}get showWaterMarkList(){let{functionType:e,templateForm:t}=st.imageController;return"template"===e&&"remove_water_mark"===t.template}get waterMarkList(){return[{img:(0,te.Q)(dg),title:this.S.ImageEmpty.WaterMarkList.title1,desc:this.S.ImageEmpty.WaterMarkList.desc1},{img:(0,te.Q)(du),title:this.S.ImageEmpty.WaterMarkList.title2,desc:this.S.ImageEmpty.WaterMarkList.desc2},...st.imageController.isMobile?[]:[{img:(0,te.Q)(dv),title:this.S.ImageEmpty.WaterMarkList.title3,desc:this.S.ImageEmpty.WaterMarkList.desc3}]]}get image(){let{functionType:e,templateForm:t}=st.imageController;switch(e){case"imageAnimator":return(0,te.Q)(di);case"imageGenerator":return(0,te.Q)(c9);case"generateImageByScenario":return(0,te.Q)(c7);case"template":if("out_painting_image"===t.template)return(0,te.Q)(N.C.isDark?c4:dt);return(0,te.Q)(N.C.isDark?de:c8)}return""}get video(){let{functionType:e}=st.imageController;switch(e){case"realtimeGenerateImageByText":return(0,te.Q)("https://assets.monica.im/home-web/_next/static/videos/p_realtime_text-d2c99db2934252d2160d8bc2ba40a073.mp4");case"realtimeGenerateImageByCanvas":return(0,te.Q)("https://assets.monica.im/home-web/_next/static/videos/p_realtime_canvas-17662abac71b89bca28c287bb7355e59.mp4")}return""}get title(){let{functionType:e}=st.imageController;switch(e){case"imageAnimator":return this.S.aiVideo;case"imageGenerator":return this.S.aiDraw;case"generateImageByScenario":return this.S.drawByTemplate;case"template":return this.S.quickApply;case"realtimeGenerateImageByText":return this.S.realtimeDraw;case"realtimeGenerateImageByCanvas":return this.S.realtimeCanvas}return""}get desc(){let{functionType:e}=st.imageController;switch(e){case"imageAnimator":return this.S.detailPlaceholder.video;case"imageGenerator":return this.S.detailPlaceholder.image;case"generateImageByScenario":return this.S.detailPlaceholder.scenario;case"template":return this.S.detailPlaceholder.template;case"realtimeGenerateImageByText":return this.S.detailPlaceholder.realtimeText;case"realtimeGenerateImageByCanvas":return this.S.detailPlaceholder.realtimeCanvas}return""}get videoPlaceholder(){switch(st.imageController.generateVideoForm.modelType){case"kling":return{coverUrl:(0,te.Q)(da),logoUrl:(0,te.Q)(dn),videoUrl:"https://assets.monica.im/assets/video/kling.mp4",desc:this.S.klingPlaceholder};case"minimax":return{coverUrl:(0,te.Q)(dr),logoUrl:(0,te.Q)(ds),videoUrl:"https://assets.monica.im/assets/video/minimax.mp4",desc:this.S.minimaxPlaceholder};case"pixverse":return{coverUrl:(0,te.Q)(dl),logoUrl:(0,te.Q)(dc),desc:this.S.pixversePlaceholder,videoUrl:"https://assets.monica.im/assets/pixverse/venom_241104.mp4"};case"runway":return{coverUrl:(0,te.Q)(dd),logoUrl:(0,te.Q)(dp),videoUrl:"https://assets.monica.im/assets/video/runway.mp4",desc:this.S.runwayPlaceholder};case"svd":return{coverUrl:(0,te.Q)(dm),logoUrl:(0,te.Q)(dh),videoUrl:"https://assets.monica.im/assets/video/svd.mp4",desc:this.S.svdPlaceholder}}return{coverUrl:(0,te.Q)(di)}}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],dC.prototype,"S",null),(0,I.gn)([S.Fl],dC.prototype,"showWaterMarkList",null),(0,I.gn)([S.Fl],dC.prototype,"waterMarkList",null),(0,I.gn)([S.Fl],dC.prototype,"image",null),(0,I.gn)([S.Fl],dC.prototype,"video",null),(0,I.gn)([S.Fl],dC.prototype,"title",null),(0,I.gn)([S.Fl],dC.prototype,"desc",null),(0,I.gn)([S.Fl],dC.prototype,"videoPlaceholder",null);let dx=S._Y.createComponent("ImageEmpty",dC,e=>{let t="realtimeGenerateImageByCanvas"===st.imageController.functionType||"realtimeGenerateImageByText"===st.imageController.functionType,i="imageAnimator"===st.imageController.functionType;return(0,y.jsxs)("div",{className:q()(c5.imageEmpty,{[c5.smallScreen]:w.m.getIsMobile()}),children:[(0,y.jsxs)("div",{style:{gap:"realtimeGenerateImageByCanvas"===st.imageController.functionType?w.m.getIsMobile()?22:44:void 0,width:t?"100%":void 0,height:t?"100%":void 0,borderRadius:"realtimeGenerateImageByCanvas"===st.imageController.functionType?0:16,backgroundColor:t?"transparent":void 0},className:c5.content,children:[(0,y.jsxs)("div",{style:{paddingTop:t?w.m.getIsMobile()?24:48:void 0},className:c5.textWrap,children:[(0,y.jsxs)("div",{className:c5.title,children:["\uD83D\uDCA1",e.title]}),(0,y.jsx)("div",{className:c5.desc,children:e.desc})]}),t?(0,y.jsx)("video",{src:(0,te.Q)(e.video),loop:!0,muted:!0,autoPlay:!0,style:"realtimeGenerateImageByText"===st.imageController.functionType?{maxWidth:"min(calc(100vw - 32px), 600px)"}:{maxWidth:"min(calc(100% - 48px), 600px)",boxShadow:"0px 1px 20px 0px var(--theme-shadow-s1)",borderRadius:"12px"}}):i?(0,y.jsx)(dy,{vm:e}):(0,y.jsx)(eH.E,{src:(0,te.Q)(e.image),skeleton:!0,className:c5.image})]}),e.showWaterMarkList&&(0,y.jsx)(db,{vm:e})]})}),dy=(0,F.Pi)(function(e){let{vm:t}=e,{coverUrl:i,videoUrl:o,desc:a,logoUrl:n}=t.videoPlaceholder;return(0,y.jsx)("div",{className:q()(c5.videoPlaceholder,{[c5.isMobile]:st.imageController.isMobile}),children:(0,y.jsxs)("div",{className:c5.inner,style:{backgroundImage:"url(".concat(i,")")},children:[o&&(0,y.jsx)(c6.n,{src:o,poster:i,type:"video/mp4",className:c5.video,autoPlay:!0,muted:!0,playsInline:!0,loop:!0}),n||a?(0,y.jsx)("div",{className:c5.mask}):(0,y.jsx)(y.Fragment,{}),(0,y.jsxs)("div",{className:c5.videoPlaceholderContent,children:[(0,y.jsx)("div",{className:c5.logo,children:(0,y.jsx)(eH.E,{src:n})}),(0,y.jsx)("div",{className:c5.desc,children:a})]})]})})}),db=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsx)("div",{className:c5.waterMarkList,children:t.waterMarkList.map((e,t)=>{let{title:i,desc:o,img:a}=e;return(0,y.jsxs)("div",{className:c5.listItem,children:[(0,y.jsx)(eH.E,{skeleton:!0,src:a,className:c5.itemImage}),(0,y.jsx)("div",{className:c5.itemTitle,children:i}),(0,y.jsx)("div",{className:c5.itemDesc,children:o})]},t)})})});var df={preview:"preview--Az1pf",result:"result--BE2M_"};class dw extends S.PN{loadImage(e){this.currentSrc===e&&(this.loadUrl=e)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"preSrc",""),(0,T._)(this,"currentSrc",""),(0,T._)(this,"loadUrl","")}}(0,I.gn)([S.SB],dw.prototype,"preSrc",void 0),(0,I.gn)([S.SB],dw.prototype,"currentSrc",void 0),(0,I.gn)([S.SB],dw.prototype,"loadUrl",void 0);let dS=S._Y.createComponent("StableImage",dw,e=>((0,Q.useEffect)(()=>{e.currentSrc=e.props.src,e.currentSrc&&(e.preSrc=e.currentSrc)},[e.props.src]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("img",{className:q()(df.preview,e.props.className),src:e.currentSrc,onLoad:t=>{e.loadImage(t.currentTarget.src)},alt:"preview"}),e.loadUrl&&(0,y.jsx)("img",{className:q()(df.result,e.props.className),src:e.loadUrl,alt:"preview",onLoad:t=>{var i,o;null===(i=(o=e.props).getRef)||void 0===i||i.call(o,t.currentTarget)}},e.loadUrl)]})));var dA={zoomPanImage:"zoom-pan-image--lnQjv",image:"image--NsYoT",imageRouteWrapper:"image-route-wrapper--ZdiFc",sketch:"sketch--QVUQN"};class dj extends S.PN{get S(){return ei.S.Global.modules.Artist.ZoomPanImage}onViewCreate(){this.container&&this.props.manager.attach(this.container)}onViewDestroy(){this.props.manager.destroy()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"aspectRatio",null),(0,T._)(this,"container",null),(0,T._)(this,"imageDom",null)}}(0,I.gn)([S.SB],dj.prototype,"aspectRatio",void 0),(0,I.gn)([S.Fl],dj.prototype,"S",null);let dk=S._Y.createComponent("ZoomPanImage",dj,e=>{var t;let{getSketchRef:i,getImgRef:o,manager:a,canDraw:n,showImageToolbar:r,className:s,renderExtra:l}=e.props,{scale:c,translateX:d,translateY:p,canDrag:m,isDragging:h}=a;return(0,y.jsxs)("div",{className:q()(dA.zoomPanImage,s),ref:t=>{e.container=t},style:{aspectRatio:null!==(t=e.aspectRatio)&&void 0!==t?t:"auto",transform:"scale(".concat(c,") translate(").concat(d,"px, ").concat(p,"px)"),cursor:n?"crosshair":"default"},children:[e.props.url?(0,y.jsx)(dS,{className:dA.image,src:e.props.url,getRef:t=>{e.imageDom=t,t&&(t.naturalWidth&&t.naturalHeight&&(e.aspectRatio=t.naturalWidth/t.naturalHeight),null==o||o(t))}}):(0,y.jsx)(dx,{}),e.aspectRatio&&(0,y.jsx)("div",{className:dA.sketch,ref:e=>{e&&(null==i||i(e))}}),r&&e.props.url&&(0,y.jsx)("div",{className:dA.imageRouteWrapper,children:(0,y.jsx)(c3,{hasBg:!0,imageUrl:e.props.url,isLight:!0})}),l?l():null]})});var dN={zoomPanToolbar:"zoom-pan-toolbar--f1seC",handTool:"hand-tool--gOh6x",isActive:"is-active--imOvD",actionItem:"action-item--aEKXp",isDisabled:"is-disabled--Q4978",scalePercentage:"scale-percentage--xHLJJ",splitLine:"split-line--w_Wh4"};(0,F.Pi)(e=>{let{manager:t}=e;return(0,y.jsx)("div",{className:dN.zoomPanToolbar,children:t.leftActionList.map(e=>(0,y.jsxs)(Q.Fragment,{children:[(0,y.jsx)(dT,{item:e,className:q()({[dN.handTool]:"dragger"===e.key})}),e.isSplit&&(0,y.jsx)("div",{className:dN.splitLine}),"reduce"===e.key&&(0,y.jsx)("span",{className:dN.scalePercentage,children:t.getScalePercentage})]},e.key))})});let d_=(0,F.Pi)(e=>{let{manager:t}=e;return(0,y.jsx)("div",{className:dN.zoomPanToolbar,children:t.rightActionList.map(e=>(0,y.jsxs)(Q.Fragment,{children:[(0,y.jsx)(dT,{item:e,className:q()({[dN.handTool]:"dragger"===e.key})}),e.isSplit&&(0,y.jsx)("div",{className:dN.splitLine}),"reduce"===e.key&&(0,y.jsx)("span",{className:dN.scalePercentage,children:t.getScalePercentage})]},e.key))})}),dT=(0,F.Pi)(e=>{let{item:t,className:i}=e,o=(0,y.jsx)("span",{children:(0,y.jsxs)(eO.z,{type:"text-gray",disabled:!!t.disabled,className:q()(dN.actionItem,{[dN.isDisabled]:!!t.disabled,[dN.isActive]:!!t.isActive},i),onClick:()=>{var e;null===(e=t.onClick)||void 0===e||e.call(t)},children:[(0,y.jsx)(t_.J,{name:t.icon,size:20,color:"currentColor"}),t.name&&(0,y.jsx)("span",{children:t.name()})]})});return t.title?(0,y.jsx)(tN.u,{title:t.title,trigger:"hover",children:o}):o});var dI={imageTool:"image-tool--AD5f0",toolBar:"tool-bar--x0jtG",mobile:"mobile--veST1",zoomPanImage:"zoom-pan-image--XaJ_q",compare:"compare--ZqPzl",compareImage:"compare-image--JV0sj",notice:"notice--bjvv2",link:"link--X7O31",cancel:"cancel--cDCyg",center:"center--xYPc4",loading:"loading--hlacq",box:"box--GygFL",changeBackgroundTool:"change-background-tool--ZwMkM",list:"list--ixzuP",changeBackgroundToolInner:"change-background-tool-inner--Gs4tf",upscaleTool:"upscale-tool--NXREC",label:"label--DB_I5",upscaleItem:"upscale-item--piJck",isDisabled:"is-disabled--f1mwL",isActive:"is-active--v5pxA",dropdownSelect:"dropdown-select--ZFOu5",arrowDown:"arrow-down--Chhiv",expand:"expand--UDe5n"};class dM extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var dL=JSON.parse('{"fill":"none","content":"\\n<g clip-path=\\"url(#clip0_1192_16445)\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M9.99996 2.41699C7.65275 2.41699 5.74996 4.31978 5.74996 6.66699C5.74996 9.0142 7.65275 10.917 9.99996 10.917C12.3472 10.917 14.25 9.0142 14.25 6.66699C14.25 4.31978 12.3472 2.41699 9.99996 2.41699ZM4.24996 6.66699C4.24996 3.49135 6.82432 0.916992 9.99996 0.916992C13.1756 0.916992 15.75 3.49135 15.75 6.66699C15.75 7.14068 15.6927 7.601 15.5847 8.04139C17.641 8.91731 19.0833 10.9563 19.0833 13.3337C19.0833 16.5093 16.5089 19.0837 13.3333 19.0837C12.0913 19.0837 10.9402 18.6892 10 18.0194C9.05975 18.6895 7.90922 19.0837 6.66663 19.0837C3.49099 19.0837 0.916626 16.5093 0.916626 13.3337C0.916626 10.9563 2.3589 8.9173 4.41525 8.04138C4.30724 7.60099 4.24996 7.14068 4.24996 6.66699ZM4.96126 9.4394C3.46275 10.0966 2.41663 11.5937 2.41663 13.3337C2.41663 15.6809 4.31942 17.5837 6.66663 17.5837C7.75221 17.5837 8.74273 17.1766 9.49391 16.5069C9.49818 16.503 9.50249 16.4991 9.50684 16.4953C10.3723 15.7173 10.9166 14.589 10.9166 13.3337C10.9166 12.9985 10.878 12.673 10.805 12.3611C10.5419 12.3979 10.2732 12.417 9.99996 12.417C7.82957 12.417 5.94004 11.2145 4.96126 9.4394ZM12.2512 11.9596C12.3594 12.4004 12.4166 12.8607 12.4166 13.3337C12.4166 14.7111 11.9323 15.9754 11.1246 16.9656C11.7682 17.358 12.5239 17.5837 13.3333 17.5837C15.6805 17.5837 17.5833 15.6809 17.5833 13.3337C17.5833 11.5937 16.5372 10.0966 15.0387 9.43941C14.4202 10.5611 13.4381 11.4541 12.2512 11.9596Z\\" fill=\\"#222226\\"/>\\n</g>\\n<defs>\\n<clipPath id=\\"clip0_1192_16445\\">\\n<rect width=\\"20\\" height=\\"20\\" fill=\\"white\\"/>\\n</clipPath>\\n</defs>\\n\\n","viewBox":"0 0 20 20"}');let dB=S._Y.createComponent("ChangeColorsIcon",dM,e=>(0,y.jsx)(R.s,{...e.props,name:"ChangeColorsIcon",iconData:dL}));class dE extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var dD=JSON.parse('{"fill":"none","content":"\\n<g clip-path=\\"url(#clip0_1192_16526)\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M3.74996 0.916992C4.16417 0.916992 4.49996 1.25278 4.49996 1.66699V3.00033H5.83329C6.24751 3.00033 6.58329 3.33611 6.58329 3.75033C6.58329 4.16454 6.24751 4.50033 5.83329 4.50033H4.49996V5.83366C4.49996 6.24787 4.16417 6.58366 3.74996 6.58366C3.33575 6.58366 2.99996 6.24787 2.99996 5.83366V4.50033H1.66663C1.25241 4.50033 0.916626 4.16454 0.916626 3.75033C0.916626 3.33611 1.25241 3.00033 1.66663 3.00033H2.99996V1.66699C2.99996 1.25278 3.33575 0.916992 3.74996 0.916992ZM10.8333 1.75033C11.1436 1.75033 11.4219 1.94145 11.5333 2.23109L12.9784 5.98848C13.2273 6.63536 13.3098 6.83472 13.4249 6.99661C13.5383 7.15604 13.6776 7.29534 13.837 7.4087C13.9989 7.52382 14.1983 7.60637 14.8451 7.85517L18.6025 9.30032C18.8922 9.41172 19.0833 9.69 19.0833 10.0003C19.0833 10.3107 18.8922 10.5889 18.6025 10.7003L14.8451 12.1455C14.1983 12.3943 13.9989 12.4768 13.837 12.5919C13.6776 12.7053 13.5383 12.8446 13.4249 13.004C13.3098 13.1659 13.2273 13.3653 12.9784 14.0122L11.5333 17.7696C11.4219 18.0592 11.1436 18.2503 10.8333 18.2503C10.523 18.2503 10.2447 18.0592 10.1333 17.7696L8.68814 14.0122C8.43933 13.3653 8.35678 13.1659 8.24167 13.004C8.1283 12.8446 7.98901 12.7053 7.82958 12.5919C7.66768 12.4768 7.46833 12.3943 6.82144 12.1455L3.06406 10.7003C2.77441 10.5889 2.58329 10.3107 2.58329 10.0003C2.58329 9.69 2.77441 9.41172 3.06406 9.30032L6.82144 7.85517C7.46833 7.60637 7.66768 7.52382 7.82958 7.4087C7.98901 7.29534 8.1283 7.15604 8.24167 6.99661C8.35678 6.83472 8.43933 6.63536 8.68813 5.98848L10.1333 2.23109C10.2447 1.94145 10.523 1.75033 10.8333 1.75033ZM10.8333 4.58958L10.0882 6.52695C10.0778 6.55396 10.0675 6.58062 10.0574 6.60693C9.8524 7.14066 9.70271 7.53032 9.46413 7.86585C9.2536 8.16194 8.99491 8.42063 8.69882 8.63117C8.36329 8.86975 7.97363 9.01943 7.43991 9.22444C7.4136 9.23455 7.38694 9.24479 7.35991 9.25519L5.42255 10.0003L7.35991 10.7455C7.38694 10.7559 7.4136 10.7661 7.43991 10.7762C7.97363 10.9812 8.36329 11.1309 8.69882 11.3695C8.99491 11.58 9.2536 11.8387 9.46413 12.1348C9.70271 12.4703 9.85239 12.86 10.0574 13.3937C10.0675 13.42 10.0778 13.4467 10.0882 13.4737L10.8333 15.4111L11.5784 13.4737C11.5888 13.4467 11.5991 13.42 11.6092 13.3937C11.8142 12.86 11.9639 12.4703 12.2025 12.1348C12.413 11.8387 12.6717 11.58 12.9678 11.3695C13.3033 11.1309 13.693 10.9812 14.2267 10.7762C14.253 10.7661 14.2797 10.7559 14.3067 10.7455L16.244 10.0003L14.3067 9.25519C14.2796 9.24479 14.253 9.23455 14.2267 9.22444C13.693 9.01943 13.3033 8.86975 12.9678 8.63117C12.6717 8.42063 12.413 8.16194 12.2025 7.86585C11.9639 7.53032 11.8142 7.14066 11.6092 6.60695C11.5991 6.58064 11.5888 6.55397 11.5784 6.52694L10.8333 4.58958ZM3.74996 13.417C4.16417 13.417 4.49996 13.7528 4.49996 14.167V15.5003H5.83329C6.24751 15.5003 6.58329 15.8361 6.58329 16.2503C6.58329 16.6645 6.24751 17.0003 5.83329 17.0003H4.49996V18.3337C4.49996 18.7479 4.16417 19.0837 3.74996 19.0837C3.33575 19.0837 2.99996 18.7479 2.99996 18.3337V17.0003H1.66663C1.25241 17.0003 0.916626 16.6645 0.916626 16.2503C0.916626 15.8361 1.25241 15.5003 1.66663 15.5003H2.99996V14.167C2.99996 13.7528 3.33575 13.417 3.74996 13.417Z\\" fill=\\"#222226\\"/>\\n</g>\\n<defs>\\n<clipPath id=\\"clip0_1192_16526\\">\\n<rect width=\\"20\\" height=\\"20\\" fill=\\"white\\"/>\\n</clipPath>\\n</defs>\\n\\n","viewBox":"0 0 20 20"}');let dP=S._Y.createComponent("ImageStarIcon",dE,e=>(0,y.jsx)(R.s,{...e.props,name:"ImageStarIcon",iconData:dD}));var dF=i(99329),dR=i.n(dF);class dV{get canUndo(){return this.currentHistoryIndex>=0}get canRedo(){return this.currentHistoryIndex<this.history.length-1}get canClear(){return 0!==this.history.length}get showBrushColorPicker(){return!!this.options.showBrushColorPicker}get showBgColorPicker(){return!!this.options.showBgColorPicker}get currentBrushColor(){return this.brushColor?this.brushColor:this.options.lineColor||"#000"}setTool(e){this.tool=e}setBrushSize(e){var t;this.brushSize=e,null===(t=this.mouseCircle)||void 0===t||t.radius(e/2)}setBrushColor(e){this.brushColor=e}resetBrushColor(){this.brushColor=this.options.lineColor||"#000"}setBgColor(e){var t,i;this.bgColor=e,null===(t=(i=this.options).onChangeBg)||void 0===t||t.call(i)}resetBgColor(){this.bgColor=this.options.bgColor}setImg(e){this.imgSize={width:e.naturalWidth,height:e.naturalHeight},this.updateCanvasSize()}setScale(e){this.scale=e}destroy(){var e,t;null===(e=this.stage)||void 0===e||e.destroy(),null===(t=this.layer)||void 0===t||t.destroy(),this.reset(),eo.I.getProxy(this,window).removeAllListeners()}reset(){this.ready=!1,this.stage=null,this.container=null,this.layer=null,this.scale=1,this.history=[],this.currentHistoryIndex=-1}undo(){var e,t;this.canUndo&&(this.history[this.currentHistoryIndex].line.remove(),this.currentHistoryIndex--,null===(e=(t=this.options).onDrawEnd)||void 0===e||e.call(t))}redo(){var e,t;if(!this.canRedo)return;this.currentHistoryIndex++;let{line:i}=this.history[this.currentHistoryIndex];this.layer.add(i),this.layer.draw(),null===(e=(t=this.options).onDrawEnd)||void 0===e||e.call(t)}exportMask(e){if(!this.layer||!this.stage)return"";let t=this.stage.width(),i=this.stage.height(),o=1,a=1;(null==e?void 0:e.width)&&(o=e.width/t),(null==e?void 0:e.height)&&(a=e.height/i);let n=new(dR()).Layer({width:t,height:i});n.add(new(dR()).Rect({width:t,height:i,fill:this.bgColor?this.bgColor:"#000"})),this.layer.clone(),this.layer.children.forEach(t=>{let i=t.clone();(null==e?void 0:e.stayColor)||i.stroke("#fff"),n.add(i)}),n.scale({x:o,y:a});let r=n.toDataURL({mimeType:"image/png",quality:1,x:0,y:0,width:(null==e?void 0:e.width)||t,height:(null==e?void 0:e.height)||t});return n.destroy(),r}initCanvas(e){let t;if(this.ready)return;this.container=e,this.ready=!0;let i=new(dR()).Stage({container:e,width:0,height:0}),o=new(dR()).Layer({opacity:this.options.opacity||1});this.stage=i,this.layer=o,this.updateCanvasSize(!0);let a=new(dR()).Layer;this.mouseCircle=new(dR()).Circle({radius:this.brushSize/2,stroke:"white",strokeWidth:3,fill:this.options.mouseCircleColor||"#D783FF50"}),this.mouseCircle.hide(),a.add(this.mouseCircle),i.add(o),i.add(a);let n=!1;i.on("mousedown touchstart",()=>{var e,i;if(!this.canDraw())return;n=!0,null===(e=(i=this.options).onDrawStart)||void 0===e||e.call(i);let{x:a,y:r}=this.getPos();t=new(dR()).Line({stroke:"eraser"===this.tool&&this.bgColor?this.bgColor:this.currentBrushColor,strokeWidth:this.brushSize,globalCompositeOperation:"brush"===this.tool||this.bgColor?"source-over":"destination-out",lineCap:"round",lineJoin:"round",points:[a,r,a,r]}),o.add(t),this.currentHistoryIndex<this.history.length-1&&this.history.splice(this.currentHistoryIndex+1),this.history.push({type:this.tool,line:t}),this.currentHistoryIndex++}),i.on("mouseup touchend",()=>{if(this.canDraw()&&n){var e,t;n=!1,null===(e=(t=this.options).onDrawEnd)||void 0===e||e.call(t)}}),i.on("mousemove touchmove",e=>{if(!this.canDraw())return;if(this.mouseCircle){let e=this.getPos();this.mouseCircle.position(e)}if(!n)return;e.evt.preventDefault();let{x:i,y:o}=this.getPos(),a=t.points().concat([i,o]);t.points(a)}),i.on("mouseleave",()=>{var e;null===(e=this.mouseCircle)||void 0===e||e.hide(),n=!1}),i.on("mouseenter",()=>{var e;this.canDraw()&&(null===(e=this.mouseCircle)||void 0===e||e.show())})}clear(){var e,t,i;null===(e=this.layer)||void 0===e||e.removeChildren(),this.history=[],this.currentHistoryIndex=-1,null===(t=(i=this.options).onDrawEnd)||void 0===t||t.call(i)}updateCanvasSize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.stage||!this.container)return;let{width:t,height:i}=this.container.getBoundingClientRect();if(this.stage.width(t),this.stage.height(i),e)this.originWidth=t,this.originHeight=t;else{let e=t/this.originWidth,o=i/this.originHeight;this.stage.scale({x:e,y:o})}this.stage.draw()}getOriginPos(){var e;let{x:t,y:i}=this.stage.getPointerPosition(),o=null===(e=this.stage)||void 0===e?void 0:e.scale();return o&&(t/=o.x,i/=o.y),{x:t,y:i}}getPos(){let{x:e,y:t}=this.stage.getPointerPosition();return{x:e,y:t}}canDraw(){return!this.options.canDraw||this.options.canDraw()}constructor(e={}){(0,T._)(this,"options",void 0),(0,T._)(this,"tool",void 0),(0,T._)(this,"brushSize",void 0),(0,T._)(this,"brushColor",void 0),(0,T._)(this,"history",void 0),(0,T._)(this,"currentHistoryIndex",void 0),(0,T._)(this,"bgColor",void 0),(0,T._)(this,"originWidth",void 0),(0,T._)(this,"originHeight",void 0),(0,T._)(this,"ready",void 0),(0,T._)(this,"stage",void 0),(0,T._)(this,"container",void 0),(0,T._)(this,"layer",void 0),(0,T._)(this,"imgSize",void 0),(0,T._)(this,"mouseCircle",void 0),(0,T._)(this,"scale",void 0),this.options=e,this.tool="brush",this.brushSize=30,this.brushColor="",this.history=[],this.currentHistoryIndex=-1,this.bgColor=void 0,this.originWidth=0,this.originHeight=0,this.ready=!1,this.stage=null,this.container=null,this.layer=null,this.imgSize=null,this.mouseCircle=null,this.scale=1,(0,tB.rC)(this),r1.S.isRunInServerSide||(eo.I.getProxy(this,window).addEventListener("resize",()=>{this.updateCanvasSize()}),eo.I.getProxy(this,window).addEventListener("keydown",e=>{this.canDraw()&&(iB.t.isHotkey(e,["mod+z"])&&this.undo(),iB.t.isHotkey(e,["mod+shift+z"])&&this.redo())})),this.bgColor=e.bgColor}}(0,I.gn)([S.SB],dV.prototype,"tool",void 0),(0,I.gn)([S.SB],dV.prototype,"brushSize",void 0),(0,I.gn)([S.SB],dV.prototype,"brushColor",void 0),(0,I.gn)([S.SB],dV.prototype,"history",void 0),(0,I.gn)([S.SB],dV.prototype,"currentHistoryIndex",void 0),(0,I.gn)([S.SB],dV.prototype,"bgColor",void 0),(0,I.gn)([tB.Fl],dV.prototype,"canUndo",null),(0,I.gn)([tB.Fl],dV.prototype,"canRedo",null),(0,I.gn)([tB.Fl],dV.prototype,"canClear",null),(0,I.gn)([tB.Fl],dV.prototype,"showBrushColorPicker",null),(0,I.gn)([tB.Fl],dV.prototype,"showBgColorPicker",null),(0,I.gn)([tB.Fl],dV.prototype,"currentBrushColor",null);var dU=i(74145);class dz{get S(){return ei.S.Global.modules.Artist.ArtistDetail}get hideCompare(){return!!this.options.hideCompare}get disableReduce(){return this.scale<=.15||this.isCompareMode||!this.canDrag}get disableAdd(){return this.scale>=4||this.isCompareMode||!this.canDrag}get canReset(){return st.imageController.baseImageUrl&&st.imageController.editImageForm.originUrl&&st.imageController.baseImageUrl!==st.imageController.editImageForm.originUrl}get leftActionList(){return[{icon:"pointer",key:"dragger",disabled:this.isCompareMode,isActive:this.canDrag,title:st.imageController.isMobile?void 0:this.S.handTool,isSplit:!0,onClick:()=>{this.canDrag=!this.canDrag}},{icon:"reduce",key:"reduce",disabled:this.disableReduce,onClick:()=>{this.zoomOut()}},{icon:"addMemo",key:"add",disabled:this.disableAdd,onClick:()=>{this.zoomIn()}}]}get rightActionList(){return[{icon:"monicaRefresh",key:"rest",name:()=>this.S.reset,disabled:!this.canReset||this.isCompareMode,onClick:()=>{(0,t7.B)({insertTarget:"dialogRoot",okText:this.S.confirm,title:this.S.title,content:this.S.desc,onOk:()=>(st.imageController.editImageForm.originUrl=st.imageController.baseImageUrl,!0)})}},...this.hideCompare?[]:[{icon:"compare",key:"compare",name:()=>this.S.compare,disabled:!st.imageController.imageCanCompare,isActive:this.isCompareMode,onClick:()=>{var e,t;this.isCompareMode=!this.isCompareMode,null===(e=(t=this.options).onToggleMode)||void 0===e||e.call(t,this.isCompareMode)}}]]}get getScalePercentage(){return"".concat(Math.round(Math.round(1e3*this.scale)/10),"%")}zoomIn(){if(!this.canDrag)return;let e=Math.min(this.scale+.1,4);this.scale=e}zoomOut(){if(!this.canDrag)return;let e=Math.max(this.scale-.1,.15);this.scale=e}attach(e){this.disposableCollection.dispose(),e.addEventListener("wheel",this.handleWheel),e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("mouseup",this.handleMouseUp),e.addEventListener("mouseleave",this.handleMouseLeave),e.addEventListener("mousemove",this.handleMouseMove),this.disposableCollection.push({dispose:()=>{this.globalListeners.removeAll(),e.removeEventListener("mousedown",this.handleMouseDown),e.removeEventListener("mouseup",this.handleMouseUp),e.removeEventListener("mouseleave",this.handleMouseLeave),e.removeEventListener("mousemove",this.handleMouseMove),e.removeEventListener("wheel",this.handleWheel)}})}destroy(){this.disposableCollection.dispose()}constructor(e={}){(0,T._)(this,"options",void 0),(0,T._)(this,"isDragging",void 0),(0,T._)(this,"canDrag",void 0),(0,T._)(this,"isCompareMode",void 0),(0,T._)(this,"scale",void 0),(0,T._)(this,"startX",void 0),(0,T._)(this,"startY",void 0),(0,T._)(this,"translateX",void 0),(0,T._)(this,"translateY",void 0),(0,T._)(this,"disposableCollection",void 0),(0,T._)(this,"globalListeners",void 0),(0,T._)(this,"handleMouseDown",void 0),(0,T._)(this,"handleMouseUp",void 0),(0,T._)(this,"handleMouseLeave",void 0),(0,T._)(this,"handleMouseMove",void 0),(0,T._)(this,"handleWheel",void 0),this.options=e,this.isDragging=!1,this.canDrag=!1,this.isCompareMode=!1,this.scale=1,this.startX=0,this.startY=0,this.translateX=0,this.translateY=0,this.disposableCollection=new dU.K,this.globalListeners=new L.M,this.handleMouseDown=e=>{this.canDrag&&(this.isDragging=!0,this.startX=e.clientX-this.translateX,this.startY=e.clientY-this.translateY)},this.handleMouseUp=()=>{this.canDrag&&(this.isDragging=!1)},this.handleMouseLeave=()=>{this.canDrag&&(this.isDragging=!1)},this.handleMouseMove=e=>{if(!this.canDrag||!this.isDragging)return;let t=e.clientX-this.startX,i=e.clientY-this.startY;this.translateX=t,this.translateY=i},this.handleWheel=e=>{if(e.ctrlKey){var t,i;e.preventDefault();let o=-.01*e.deltaY;e.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=.2),this.scale=Math.min(Math.max(.15,this.scale+o),4),null===(t=(i=this.options).onScale)||void 0===t||t.call(i,this.scale)}},(0,tB.rC)(this)}}(0,I.gn)([S.SB],dz.prototype,"isDragging",void 0),(0,I.gn)([S.SB],dz.prototype,"canDrag",void 0),(0,I.gn)([S.SB],dz.prototype,"isCompareMode",void 0),(0,I.gn)([S.SB],dz.prototype,"scale",void 0),(0,I.gn)([S.SB],dz.prototype,"startX",void 0),(0,I.gn)([S.SB],dz.prototype,"startY",void 0),(0,I.gn)([S.SB],dz.prototype,"translateX",void 0),(0,I.gn)([S.SB],dz.prototype,"translateY",void 0),(0,I.gn)([tB.Fl],dz.prototype,"S",null),(0,I.gn)([tB.Fl],dz.prototype,"hideCompare",null),(0,I.gn)([tB.Fl],dz.prototype,"disableReduce",null),(0,I.gn)([tB.Fl],dz.prototype,"disableAdd",null),(0,I.gn)([tB.Fl],dz.prototype,"canReset",null),(0,I.gn)([tB.Fl],dz.prototype,"leftActionList",null),(0,I.gn)([tB.Fl],dz.prototype,"rightActionList",null),(0,I.gn)([tB.Fl],dz.prototype,"getScalePercentage",null);class dO extends S.PN{get S(){return ei.S.Global.modules.Artist.ImageTool}get isEditMode(){return"editImage"===st.imageController.routeKey}get disableOption(){return!st.imageController.editImageForm.originUrl||this.generating}get bgModeList(){return[{key:"color",name:this.S.changeColor,icon:(0,y.jsx)(dB,{size:20,color:"var(--theme-icon-primary)"})},{key:"ai",name:this.S.changeWithAi,icon:(0,y.jsx)(dP,{size:20,color:"var(--theme-icon-primary)"})}]}get disableSubmit(){if("upscale"===st.imageController.routeKey){if(this.currentUpscale){let e=this.upscaleList.find(e=>e.value===this.currentUpscale);if(e)return!!e.disabledType}return!0}return!1}get upscaleList(){return this.upscaleItems.map(e=>{let t=null;if(this.imageDom){let i=this.imageDom.naturalWidth,o=this.imageDom.naturalHeight;i*e>st.imageController.maxResolution[0]||o*e>st.imageController.maxResolution[1]?t="large":(i*e<st.imageController.minResolution[0]||o*e<st.imageController.minResolution[1])&&(t="small")}return this.disableOption&&(t="disableOption"),{value:e,key:"".concat(e),disabledType:t}})}handleGoImageGenerate(){st.imageController.goto("imageGenerator")}handleCancel(e){let t=e||st.imageController.preRouteKey||"editImage";st.imageController.resetImageToolsForm(),"editImage"!==t&&(st.imageController.editImageForm.originUrl="",st.imageController.baseImageUrl=""),st.imageController.gotoSimple(t)}async handleSubmit(){if(this.generating)return;e9.W.createUserBehaviorEvent({eventName:"image_tool_generate",extData:{function:st.imageController.functionType}}),this.generating=!0,this.isFail=!1;let e=st.imageController.routeKey;if("removeObject"===st.imageController.routeKey||"removeBrushedArea"===st.imageController.routeKey){if(!this.imageToolManager||!this.imageDom){this.generating=!1;return}let e=this.imageToolManager.exportMask({width:this.imageDom.naturalWidth,height:this.imageDom.naturalHeight}),t=await st.imageController.uploadImageBase64File(e,"mask.png");if(!t){this.generating=!1,ef.M.error(this.S.fail);return}if("removeObject"===st.imageController.routeKey)st.imageController.removeObjectForm.maskUrl=t;else if("removeBrushedArea"===st.imageController.routeKey)st.imageController.removeRemoveBrushedArea.maskUrl=t;else{this.generating=!1;return}}let t=await st.imageController.handleSubmit();t&&(this.imageToolManager&&this.imageToolManager.clear(),e===st.imageController.routeKey&&this.handleCancel("editImage")),this.generating=!1,this.isFail=!t}handleSetImageContainer(e){this.imageContainer=e,this.imageToolManager||"removeObject"!==st.imageController.routeKey&&"removeBrushedArea"!==st.imageController.routeKey||(this.imageToolManager=new dV({lineColor:"#D783FF",mouseCircleColor:"#D783FF50",opacity:.6,onDrawEnd:()=>{},canDraw:()=>!0}),setTimeout(()=>{this.imageToolManager&&this.imageContainer&&this.imageToolManager.initCanvas(this.imageContainer)}))}onViewCreate(){this.zoomPanManager=new dz({onScale:()=>{},onToggleMode:e=>{e&&this.imageToolManager&&(this.imageToolManager.destroy(),this.imageToolManager=null)}}),setTimeout(()=>{st.imageController.initEditImageForm()})}onViewDestroy(){this.imageToolManager&&this.imageToolManager.destroy()}handleRouteChange(){"removeObject"===st.imageController.routeKey||"removeBrushedArea"===st.imageController.routeKey?this.imageContainer&&this.handleSetImageContainer(this.imageContainer):this.imageToolManager&&(this.imageToolManager.destroy(),this.imageToolManager=null),st.imageController.initEditImageForm()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"zoomPanManager",null),(0,T._)(this,"imageContainer",null),(0,T._)(this,"imageDom",null),(0,T._)(this,"imageToolManager",null),(0,T._)(this,"selectMode","color"),(0,T._)(this,"upscaleItems",[2,4]),(0,T._)(this,"currentUpscale",null),(0,T._)(this,"generating",!1),(0,T._)(this,"isFail",!1),(0,T._)(this,"changeBgVisible",!1)}}(0,I.gn)([S.SB],dO.prototype,"zoomPanManager",void 0),(0,I.gn)([S.SB],dO.prototype,"imageContainer",void 0),(0,I.gn)([S.SB],dO.prototype,"imageDom",void 0),(0,I.gn)([S.SB],dO.prototype,"imageToolManager",void 0),(0,I.gn)([S.SB],dO.prototype,"selectMode",void 0),(0,I.gn)([S.SB],dO.prototype,"upscaleItems",void 0),(0,I.gn)([S.SB],dO.prototype,"currentUpscale",void 0),(0,I.gn)([S.SB],dO.prototype,"generating",void 0),(0,I.gn)([S.SB],dO.prototype,"isFail",void 0),(0,I.gn)([S.SB],dO.prototype,"changeBgVisible",void 0),(0,I.gn)([S.Fl],dO.prototype,"S",null),(0,I.gn)([S.Fl],dO.prototype,"isEditMode",null),(0,I.gn)([S.Fl],dO.prototype,"disableOption",null),(0,I.gn)([S.Fl],dO.prototype,"bgModeList",null),(0,I.gn)([S.Fl],dO.prototype,"disableSubmit",null),(0,I.gn)([S.Fl],dO.prototype,"upscaleList",null),(0,I.gn)([(0,S.YP)(()=>[st.imageController.routeKey])],dO.prototype,"handleRouteChange",null);var dW={colorPicker:"color-picker--Grecx",colorItem:"color-item--HsKMC",isActive:"is-active--O7tm7",colorSelect:"color-select--XnALk",colorDisabled:"color-disabled--RUR3Z"};class dH extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"defaultColors",["#1D1D1D","#FFFFFF","#E60013","#E91E63","#EC6101","#F39801","#FEF100","#8FC221","#00A1E9"]),(0,T._)(this,"customColor","#6841EA")}}(0,I.gn)([S.SB],dH.prototype,"customColor",void 0);let dG=S._Y.createComponent("ColorPicker",dH,e=>{let{value:t,onChange:i}=e.props;return(0,y.jsxs)("div",{className:dW.colorPicker,children:[(0,y.jsx)("div",{className:q()(dW.colorItem,dW.colorDisabled,{[dW.isActive]:null===t}),onClick:()=>{i(null)},children:(0,y.jsx)(t_.J,{name:"disabled",size:20,color:"currentColor"})}),(0,y.jsx)(cU,{value:e.customColor,onChange:(t,o)=>{i(o),e.customColor=o},children:(0,y.jsx)("div",{className:q()(dW.colorItem,dW.colorSelect,{[dW.isActive]:t===e.customColor}),onClick:()=>{i(e.customColor)}})}),e.defaultColors.map(e=>(0,y.jsx)(dQ,{color:e,isActive:e===t,onClick:()=>{i(e)}},e))]})}),dQ=(0,F.Pi)(e=>{let{color:t,onClick:i,isActive:o,className:a}=e;return(0,y.jsx)("div",{className:q()(dW.colorItem,a,{[dW.isActive]:o}),style:{background:t},onClick:i})}),dJ=S._Y.createComponent("ImageTool",dO,e=>{var t,i,o;let a=null===(t=e.zoomPanManager)||void 0===t?void 0:t.isCompareMode;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s$,{showUserInfo:!0,showBack:!e.isEditMode,headerLeft:(0,y.jsxs)("div",{className:dI.cancel,onClick:()=>{if(a){e.zoomPanManager&&(e.zoomPanManager.isCompareMode=!1);return}e.handleCancel()},children:[(0,y.jsx)(aD.T,{size:20,color:"var(--theme-icon-primary)"}),e.S.cancel]}),main:(0,y.jsxs)("div",{className:q()(dI.imageTool,{[dI.mobile]:st.imageController.isMobile,[dI.compare]:null===(i=e.zoomPanManager)||void 0===i?void 0:i.isCompareMode}),children:[(0,y.jsx)(dq,{vm:e}),(0,y.jsx)(dK,{vm:e})]}),headerCenter:e.isEditMode?(0,y.jsx)(c3,{imageUrl:st.imageController.editImageForm.originUrl}):(0,y.jsx)(dZ,{vm:e}),submit:!(null===(o=e.zoomPanManager)||void 0===o?void 0:o.isCompareMode)&&!e.isEditMode&&(0,y.jsx)(s9,{onSubmit:()=>e.handleSubmit(),disabled:e.disableSubmit}),actions:(0,y.jsx)(li,{})}),e.generating&&(0,y.jsx)("div",{className:dI.loading,children:(0,y.jsx)("div",{className:dI.box,children:(0,y.jsx)(lm,{type:"imageSimple",light:!0,needTime:st.imageController.expectedTime})})})]})}),dq=(0,F.Pi)(e=>{var t;let{vm:i}=e;return(null===(t=i.zoomPanManager)||void 0===t?void 0:t.isCompareMode)?null:(st.imageController.editImageForm.originUrl||st.imageController.tempImageUrl)&&i.zoomPanManager?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(dk,{getSketchRef:e=>{i.handleSetImageContainer(e)},getImgRef:e=>{i.imageDom=e},manager:i.zoomPanManager,url:st.imageController.editImageForm.originUrl||st.imageController.tempImageUrl,canDraw:!!i.imageToolManager,className:dI.zoomPanImage}),(0,y.jsx)("div",{className:dI.toolBar,children:(0,y.jsx)(d_,{manager:i.zoomPanManager})})]}):(0,y.jsx)(dY,{vm:i})}),dK=(0,F.Pi)(e=>{var t;let{vm:i}=e;return(null===(t=i.zoomPanManager)||void 0===t?void 0:t.isCompareMode)&&st.imageController.editImageForm.originUrl&&st.imageController.baseImageUrl?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:dI.compare,children:[(0,y.jsx)(te.E,{src:st.imageController.baseImageUrl,alt:"base",className:dI.compareImage}),(0,y.jsx)(te.E,{src:st.imageController.editImageForm.originUrl,alt:"result",className:dI.compareImage})]}),(0,y.jsx)("div",{className:dI.toolBar,children:(0,y.jsx)(d_,{manager:i.zoomPanManager})})]}):null}),dY=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsx)(lS,{children:(0,y.jsx)("div",{className:dI.notice,onClick:()=>{t.handleGoImageGenerate()},children:(0,y.jsx)(aN.Z,{S:t.S.notice,components:{span:e=>(0,y.jsx)("span",{className:dI.link,children:e})}})})})}),dZ=(0,F.Pi)(e=>{let{vm:t}=e;return st.imageController.routeKey&&sH.j.includes(st.imageController.routeKey)?(0,y.jsxs)("div",{className:dI.center,children:["removeBackground"===st.imageController.routeKey&&(0,y.jsxs)("div",{className:dI.notice,children:[(0,y.jsx)(sF,{size:20,color:"var(--theme-icon-primary)"}),t.S.removeBgNotice]}),"removeText"===st.imageController.routeKey&&(0,y.jsxs)("div",{className:dI.notice,children:[(0,y.jsx)(sU,{size:20,color:"var(--theme-icon-primary)"}),t.S.removeTextNotice]}),("removeObject"===st.imageController.routeKey||"removeBrushedArea"===st.imageController.routeKey)&&t.imageToolManager&&(0,y.jsx)(cq,{manager:t.imageToolManager,isRow:!0,noBorder:!0}),"changeBackground"===st.imageController.routeKey&&(0,y.jsx)(dX,{vm:t}),"upscale"===st.imageController.routeKey&&(0,y.jsx)(d$,{vm:t})]}):null}),dX=(0,F.Pi)(e=>{let{vm:t}=e,i=t.bgModeList.find(e=>e.key===t.selectMode);return(0,y.jsxs)("div",{className:q()(dI.changeBackgroundTool,{[dI.mobile]:st.imageController.isMobile}),children:[(0,y.jsx)(tK.x,{trigger:"click",open:t.changeBgVisible,content:(0,y.jsx)(aR.h,{width:160,className:dI.list,children:t.bgModeList.map(e=>(0,y.jsx)(aQ.X,{isActive:e.key===t.selectMode,icon:e.icon,content:e.name,onClick:()=>{t.selectMode=e.key,"ai"===e.key?st.imageController.replaceImageBgForm.color="":st.imageController.replaceImageBgForm.prompt=""}},e.key))}),onOpenChange:e=>{t.changeBgVisible=e},wrapperClassName:dI.changeBackgroundToolInner,children:i?(0,y.jsxs)("div",{className:q()(dI.dropdownSelect),children:[(0,y.jsxs)("div",{className:dI.label,children:[i.icon,i.name]}),(0,y.jsx)(sW,{size:20,color:"var(--theme-text-primary)",className:q()(dI.arrowDown,{[dI.expand]:t.changeBgVisible})})]}):null}),"color"===t.selectMode&&(0,y.jsx)("div",{className:dI.tabContent,children:(0,y.jsx)(dG,{value:st.imageController.replaceImageBgForm.color||"",onChange:e=>{t.disableOption||(st.imageController.replaceImageBgForm.color=e||void 0)}})}),"ai"===t.selectMode&&(0,y.jsx)("div",{className:dI.tabContent,children:(0,y.jsx)(O.I,{placeholder:t.S.changeBgPlaceholder,value:st.imageController.replaceImageBgForm.prompt,onChange:e=>{t.disableOption||(st.imageController.replaceImageBgForm.prompt=e)},disabled:t.disableOption})})]})}),d$=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:dI.upscaleTool,children:[(0,y.jsx)("div",{className:dI.label,children:t.S.upscaleNotice}),(0,y.jsx)("div",{className:dI.list,children:t.upscaleList.map(e=>{let i="";"large"===e.disabledType?i=t.S.imageTooLargeTooltip:"small"===e.disabledType&&(i=t.S.imageTooSmallTooltip);let o=(0,y.jsxs)("div",{onClick:()=>{!e.disabledType&&t.imageDom&&(st.imageController.upscaleImageForm.width=e.value*t.imageDom.naturalWidth,st.imageController.upscaleImageForm.width=e.value*t.imageDom.naturalHeight,t.currentUpscale=e.value)},className:q()(dI.upscaleItem,{[dI.isDisabled]:!!e.disabledType,[dI.isActive]:e.value===t.currentUpscale&&!e.disabledType}),children:[(0,y.jsx)(t_.J,{name:"monicaClose",size:16,color:"currentColor"}),e.key]},e.key);return i?(0,y.jsx)(tN.u,{placement:"bottom",trigger:"hover",title:i,children:o},e.key):o})})]})}),d0=S._Y.createComponent("EditImage",sE,e=>"editImage"!==st.imageController.functionType?null:(0,y.jsx)("div",{className:sB.editImage,children:(0,y.jsx)(dJ,{})}));class d1 extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}let d2=S._Y.createComponent("GeneratedImage",d1,e=>{let{thumbnailSrc:t,url:i,onlyOne:o,className:a}=e.props;return(0,y.jsx)("div",{className:q()("generated-image--PGG5S",{"only-one--TSABa":o,"mobile--L3Kz_":st.imageController.isMobile}),children:(0,y.jsxs)("div",{className:q()("image-wrapper--lv9UA",a),children:[(0,y.jsx)("div",{className:"image-route-wrapper--V1GzI",children:(0,y.jsx)(c3,{hasBg:!0,imageUrl:i,isLight:!0})}),(0,y.jsx)(eH.E,{thumbnailSrc:t,src:i,className:"image--nkpId",alt:"result image"})]})})});class d3 extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var d6=JSON.parse('{"fill":"none","content":"\\n<path d=\\"M12.538 21.9664C12.0939 22.9434 10.7061 22.9434 10.262 21.9664L8.03147 17.0592C7.90641 16.784 7.6859 16.5635 7.41077 16.4385L2.50351 14.2079C1.52651 13.7638 1.52651 12.3761 2.50351 11.932L7.41077 9.70139C7.6859 9.57633 7.90641 9.35582 8.03147 9.08069L10.262 4.17343C10.7061 3.19644 12.0939 3.19644 12.538 4.17343L14.7685 9.08069C14.8936 9.35582 15.1141 9.57633 15.3892 9.70139L20.2965 11.932C21.2735 12.3761 21.2735 13.7638 20.2965 14.2079L15.3892 16.4385C15.1141 16.5635 14.8936 16.784 14.7685 17.0592L12.538 21.9664ZM24.8744 27.4134C24.6509 27.9024 23.9552 27.8996 23.7355 27.4089L22.6349 24.9501C22.5722 24.8099 22.46 24.6977 22.3198 24.635L19.861 23.5344C19.3703 23.3147 19.3675 22.619 19.8565 22.3955L22.3243 21.2674C22.4618 21.2045 22.5718 21.094 22.634 20.9563L23.7364 18.5169C23.957 18.0289 24.649 18.0262 24.8735 18.5124L26.0035 20.9609C26.0658 21.0958 26.1741 21.2041 26.3091 21.2664L28.7575 22.3965C29.2437 22.6209 29.241 23.3129 28.753 23.5335L26.3136 24.6359C26.1759 24.6981 26.0654 24.8082 26.0026 24.9456L24.8744 27.4134Z\\" fill=\\"url(#paint0_linear_5667_18747)\\"/>\\n<defs>\\n<linearGradient id=\\"paint0_linear_5667_18747\\" x1=\\"5.14386\\" y1=\\"-1.92807\\" x2=\\"44.702\\" y2=\\"8.20715\\" gradientUnits=\\"userSpaceOnUse\\">\\n<stop stop-color=\\"#611FEC\\"/>\\n<stop offset=\\"1\\" stop-color=\\"#CAB0FF\\"/>\\n</linearGradient>\\n</defs>\\n</svg>\\n","viewBox":"0 0 30 30"}');let d5=S._Y.createComponent("StarTwoIcon",d3,e=>(0,y.jsx)(R.s,{...e.props,name:"StarTwoIcon",iconData:d6}));class d4 extends S.PN{get S(){return ei.S.Global.modules.Artist.WaterMarkUpgrade}get show(){return!!eD.userController.isFreeUser&&("imageAnimator"===st.imageController.routeKey?st.imageController.generateVideoHasWaterMark:st.imageController.generateImageHasWaterMark)}async handleUpgrade(){(await st.imageController.preCheck("image_tools_remove_watermark")).handleNotEnough()}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],d4.prototype,"S",null),(0,I.gn)([S.Fl],d4.prototype,"show",null);let d9=S._Y.createComponent("WaterMarkUpgrade",d4,e=>{let{props:{className:t}}=e;return e.show?(0,y.jsxs)("div",{className:q()("water-mark-upgrade--FuU6n",t),children:[(0,y.jsx)(d5,{size:16,color:"var(--theme-icon-brand)"}),(0,y.jsx)("div",{className:"content--n7LIo",onClick:()=>{e.handleUpgrade()},children:(0,y.jsx)(aN.Z,{S:e.S.upgrade,components:{span:e=>(0,y.jsx)("span",{className:"link--KNIX0",children:e})}})})]}):null});var d7={carouselWithThumbnails:"carousel-with-thumbnails--CjbEH",imageWrapper:"image-wrapper--M70Q3",thumbnailList:"thumbnail-list--J1jdv",thumbnail:"thumbnail--_p1PW",active:"active--igAxq",thumbnailImg:"thumbnail-img--ozix5"};class d8 extends S.PN{goToSlide(e){st.imageController.activeImageIndex=e}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}let pe=S._Y.createComponent("CarouselWithThumbnails",d8,e=>st.imageController.selectThumbnailImageUrl&&st.imageController.selectImageCdnUrl?(0,y.jsxs)("div",{className:d7.carouselWithThumbnails,children:[(0,y.jsx)("div",{className:d7.imageWrapper,style:e.props.imageStyle,ref:t=>{if(t){var i,o;null===(i=(o=e.props).getImgContainer)||void 0===i||i.call(o,t)}},[eh.$A]:1,children:(0,y.jsx)(d2,{url:st.imageController.selectImageCdnUrl,thumbnailSrc:st.imageController.selectThumbnailImageUrl,onlyOne:1===st.imageController.generateImageThumbnailUrls.length,className:e.props.className},"".concat(st.imageController.selectImageCdnUrl,"_").concat(st.imageController.selectThumbnailImageUrl))}),(0,y.jsx)(d9,{}),st.imageController.generateImageThumbnailUrls.length>1&&(0,y.jsx)("div",{className:d7.thumbnailList,children:st.imageController.generateImageThumbnailUrls.map((t,i)=>(0,y.jsx)("div",{onClick:()=>e.goToSlide(i),className:q()(d7.thumbnail,{[d7.active]:st.imageController.selectThumbnailImageUrl===t}),children:(0,y.jsx)("img",{src:t,alt:"thumbnail",className:d7.thumbnailImg})},t))})]}):null);var pt=i(28213);class pi extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var po=JSON.parse('{"fill":"none","content":"\\n<g id=\\"alert-circle\\">\\n<g id=\\"Vector\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M12 2.90001C6.97418 2.90001 2.89998 6.97421 2.89998 12C2.89998 17.0258 6.97418 21.1 12 21.1C17.0258 21.1 21.1 17.0258 21.1 12C21.1 6.97421 17.0258 2.90001 12 2.90001ZM1.09998 12C1.09998 5.9801 5.98007 1.10001 12 1.10001C18.0199 1.10001 22.9 5.9801 22.9 12C22.9 18.0199 18.0199 22.9 12 22.9C5.98007 22.9 1.09998 18.0199 1.09998 12Z\\" fill=\\"black\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M12 7.10001C12.497 7.10001 12.9 7.50295 12.9 8.00001V13C12.9 13.4971 12.497 13.9 12 13.9C11.5029 13.9 11.1 13.4971 11.1 13V8.00001C11.1 7.50295 11.5029 7.10001 12 7.10001Z\\" fill=\\"black\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M11 16C11 15.4477 11.4477 15 12 15H12.01C12.5623 15 13.01 15.4477 13.01 16C13.01 16.5523 12.5623 17 12.01 17H12C11.4477 17 11 16.5523 11 16Z\\" fill=\\"black\\"/>\\n</g>\\n</g>\\n\\n","viewBox":"0 0 24 24"}');let pa=S._Y.createComponent("AlertCircleIcon",pi,e=>(0,y.jsx)(R.s,{...e.props,name:"AlertCircleIcon",iconData:po}));var pn={textSelect:"text-select--Xe7F1",textWrapper:"text-wrapper--VMkBX",icon:"icon--wWaOM",isOpen:"is-open--BQBsp",inner:"inner--flmk3",isButton:"is-button--bavnO",expand:"expand--vAO9w",sizeSmall:"size-small--OptBh",sizeMedium:"size-medium--QoKJo",listWrapper:"list-wrapper--8aNe4",list:"list--IzobU",item:"item--_Z24F",active:"active--AFnPF",rightIcon:"right-icon--QeSFf"};class pr extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"isVisible",!1)}}(0,I.gn)([S.SB],pr.prototype,"isVisible",void 0);let ps=S._Y.createComponent("TextSelect",pr,e=>{let{list:t,value:i,onChange:o,isButton:a,showCheckIcon:n=!0,className:r,size:s="small",listWidth:l,maxHeight:c}=e.props;if(!t.length)return null;let d=t.find(e=>e.key===i)||t[0],p=d.key;return(0,y.jsx)("div",{className:q()(pn.textSelect,r,{[pn.isButton]:!!a,[pn.sizeSmall]:"small"===s,[pn.sizeMedium]:"medium"===s,[pn.expand]:e.isVisible}),children:(0,y.jsx)(tK.x,{arrow:!1,content:(0,y.jsx)(pl,{vm:e,listWidth:l,activeKey:p,onChange:o,showCheckIcon:n,maxHeight:c}),trigger:"click",placement:"bottomLeft",onOpenChange:t=>{e.isVisible=t},closeAfterContentClick:!0,children:(0,y.jsxs)("div",{className:pn.textWrapper,children:[(0,y.jsxs)("div",{className:pn.inner,children:[d.icon,d.label]}),(0,y.jsx)(t_.J,{className:q()(pn.icon,{[pn.isOpen]:e.isVisible}),color:"var(--theme-icon-tertiary)",name:"homeRightArrow"})]})})})}),pl=(0,F.Pi)(function(e){let{vm:t,activeKey:i,onChange:o,showCheckIcon:a,listWidth:n,maxHeight:r}=e;return(0,y.jsx)("div",{className:pn.listWrapper,style:{width:n,maxHeight:r},children:(0,y.jsx)("div",{className:pn.list,children:t.props.list.map(e=>{let t=i===e.key;return(0,y.jsxs)("div",{className:q()(pn.item,{[pn.active]:t}),onClick:()=>{o&&o(e.key)},children:[e.icon&&(0,y.jsx)("div",{className:pn.icon,children:e.icon}),e.label,t&&a&&(0,y.jsx)(t_.J,{className:q()(pn.icon,pn.rightIcon),color:"var(--theme-icon-brand)",name:"monicaSuccess"})]},e.key)})})})});var pc={"camera-control":"camera-control--E6AIl",cameraControl:"camera-control--E6AIl","animate-box":"animate-box--K0F0e",animateBox:"animate-box--K0F0e",animate:"animate--F3Y06","animate-vertical":"animate-vertical--a74DI",animateVertical:"animate-vertical--a74DI","animate-horizontal":"animate-horizontal--lvxIh",animateHorizontal:"animate-horizontal--lvxIh","animate-zoom":"animate-zoom--Ll13n",animateZoom:"animate-zoom--Ll13n","animate-pan":"animate-pan--CzN1T",animatePan:"animate-pan--CzN1T","animate-tilt":"animate-tilt--iCfoo",animateTilt:"animate-tilt--iCfoo","animate-roll":"animate-roll--rlkUd",animateRoll:"animate-roll--rlkUd","animate-down_back":"animate-down_back--PKe2n",animateDownBack:"animate-down_back--PKe2n","animate-forward_up":"animate-forward_up--Z9jEG",animateForwardUp:"animate-forward_up--Z9jEG","animate-right_turn_forward":"animate-right_turn_forward--_HyOA",animateRightTurnForward:"animate-right_turn_forward--_HyOA","animate-left_turn_forward":"animate-left_turn_forward--OhUbz",animateLeftTurnForward:"animate-left_turn_forward--OhUbz","icon-wrapper":"icon-wrapper--_cAG3",iconWrapper:"icon-wrapper--_cAG3",type:"type--Cq_h1","type-label":"type-label--xp0h1",typeLabel:"type-label--xp0h1",desc:"desc--dnD6I",slider:"slider--SZVz8",top:"top--QZIiy",num:"num--KkmvM","tool-slider":"tool-slider--HE2nH",toolSlider:"tool-slider--HE2nH"};class pd extends S.PN{get value(){let{generateVideoForm:e}=st.imageController;return(0,s5.Z)(e,"cameraControl")}get options(){var e;let{generateVideoFields:t}=st.imageController;return(null===(e=t.cameraControl)||void 0===e?void 0:e.options)||[]}get selected(){let{generateVideoForm:e}=st.imageController;return this.options.find(t=>t.key===(0,s5.Z)(e,"cameraControl.type"))}onViewCreate(){}onViewDestroy(){}onChange(e){let{generateVideoForm:t}=st.imageController;t.cameraControl=e}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pd.prototype,"value",null),(0,I.gn)([S.Fl],pd.prototype,"options",null),(0,I.gn)([S.Fl],pd.prototype,"selected",null);let pp=S._Y.createComponent("CameraControl",pd,e=>{var t;if(!e.value)return null;let{type:i,range:o}=e.value;return(0,y.jsxs)("div",{className:pc.cameraControl,children:[(0,y.jsxs)("div",{className:pc.type,children:[(0,y.jsx)(ps,{isButton:!0,size:"medium",list:e.options,value:i,maxHeight:260,listWidth:"100%",onChange:t=>{e.onChange({type:t,range:0})}}),!["none","down_back","forward_up","right_turn_forward","left_turn_forward"].includes(i)&&(0,y.jsxs)("div",{className:pc.slider,children:[(0,y.jsxs)("div",{className:pc.top,children:[null===(t=e.selected)||void 0===t?void 0:t.label,(0,y.jsx)("div",{className:pc.num,children:o})]}),(0,y.jsx)(rn,{className:pc.toolSlider,min:-10,max:10,step:.1,tooltip:{open:!1},value:o,onChange:t=>{e.onChange({type:i,range:t})}})]}),(0,y.jsx)("div",{className:pc.desc,children:ei.S.Global.modules.ImageView.cameraMethodDesc})]}),(0,y.jsxs)("div",{className:pc.animateBox,style:{"--monica-animate-data":o},children:[(0,y.jsx)("div",{className:q()(pc.animate,{[pc["animate-".concat(i)]]:i})}),(0,y.jsx)("div",{className:pc.iconWrapper,children:(0,y.jsx)(t_.J,{name:"ocr-ef9dflj0",size:22,color:"var(--theme-icon-brand)"})})]})]})});var pm={section:"section--dgE42",title:"title--JsSRo"},ph={sliderWrapper:"slider-wrapper--BmxQp",toolSlider:"tool-slider--s4Fj3",desc:"desc--UhoMY",indicator:"indicator--GxqK4"};class pg extends S.PN{get S(){return ei.S.Global.modules.ImageView}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pg.prototype,"S",null);let pu=S._Y.createComponent("BaseSlider",pg,e=>{let{min:t,max:i,step:o,desc:a,title:n,value:r,indicator:s,onChange:l}=e.props;return(0,y.jsxs)("div",{className:ph.sliderWrapper,children:[(0,y.jsxs)("div",{style:{justifyContent:"space-between"},className:pm.title,children:[n,(0,y.jsx)("span",{className:ph.indicator,children:null!=s?s:r})]}),(0,y.jsx)(rn,{min:t,max:i,step:o,className:ph.toolSlider,tooltip:{open:!1},value:r,onChange:e=>{l(e)}}),a&&(0,y.jsx)("div",{className:ph.desc,children:a})]})});class pv extends S.PN{get S(){return ei.S.Global.modules.ImageView}get indicator(){let{tip1:e}=this.props.cfgIndicator||{};return this.value<=2?"".concat(e||this.S.cfgIndicator.tip1,"(").concat(this.value,")"):this.value<=4?"".concat(this.S.cfgIndicator.tip2,"(").concat(this.value,")"):this.value<=6?"".concat(this.S.cfgIndicator.tip3,"(").concat(this.value,")"):this.value<=8?"".concat(this.S.cfgIndicator.tip4,"(").concat(this.value,")"):this.value<=10?"".concat(this.S.cfgIndicator.tip5,"(").concat(this.value,")"):void 0}get value(){let{functionType:e,generateVideoForm:t,realtimeGenerateByCanvasForm:i}=st.imageController;return"realtimeGenerateImageByCanvas"===e?Number(i.cfgScale):Number((0,s5.Z)(t,"cfgScale",0))}onViewCreate(){}onViewDestroy(){}onChange(e){var t,i;"realtimeGenerateImageByCanvas"===st.imageController.functionType?st.imageController.realtimeGenerateByCanvasForm.cfgScale=String(e):st.imageController.generateVideoForm.cfgScale=String(e),null===(t=(i=this.props).onChange)||void 0===t||t.call(i)}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pv.prototype,"S",null),(0,I.gn)([S.Fl],pv.prototype,"indicator",null),(0,I.gn)([S.Fl],pv.prototype,"value",null);let pC=S._Y.createComponent("CfgScale",pv,e=>(0,y.jsx)(pu,{min:0,max:10,step:1,desc:e.props.cfgScaleDesc||e.S.cfgScaleDesc,title:e.S.cfgScale,value:e.value,indicator:e.indicator,onChange:t=>{e.onChange(t)}}));class px extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],px.prototype,"someState",void 0);let py=S._Y.createComponent("BasePillButtonSelect",px,e=>(0,y.jsx)("div",{className:"base-pill-button-select--uHhMD",children:e.props.options.map(t=>(0,y.jsx)("div",{className:q()("pill-button--fePfc",{"active--T757p":e.props.value===t.key,"disabled--YoAIM":t.disabled}),onClick:()=>{t.disabled||e.props.onChange(t.key)},children:t.label},t.key))}));class pb extends S.PN{get options(){let{functionType:e,generateImageFields:t,generateImageByScenarioFields:i}=st.imageController;if("generateImageByScenario"===e){var o;return(null===(o=i.imageCount)||void 0===o?void 0:o.options)||[]}return t.imageCount.options||[]}get selected(){let{functionType:e,generateImageForm:t,generateImageByScenarioForm:i}=st.imageController;return"generateImageByScenario"===e?this.options.find(e=>e.key===i.imageCount):this.options.find(e=>e.key===t.imageCount)}onViewCreate(){}onViewDestroy(){}onChange(e){let{functionType:t,generateImageForm:i,generateImageByScenarioForm:o}=st.imageController;"generateImageByScenario"===t?o.imageCount=e:i.imageCount=e,st.imageController.sendEvent("image_tool_click",{button:"countChange",position:"detail",type:"generateImageByScenario"===t?"generateImageByScenario":"imageGenerator",count:String(e)})}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pb.prototype,"options",null),(0,I.gn)([S.Fl],pb.prototype,"selected",null);let pf=S._Y.createComponent("CountSelect",pb,e=>{var t;return(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.key,label:e.label})),onChange:t=>{e.onChange(t)}})});var pw={durationSelect:"duration-select--J0kmC",desc:"desc--CKcyj",highlight:"highlight--xnHmV",durationLabel:"duration-label--b60kz"};class pS extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){var e;let{generateVideoFields:t}=st.imageController;return(null===(e=t.duration)||void 0===e?void 0:e.options)||[]}get selected(){var e;let{generateVideoForm:t}=st.imageController;return null===(e=this.options)||void 0===e?void 0:e.find(e=>e.key===t.duration)}onViewCreate(){}onViewDestroy(){}onChange(e){let{generateVideoForm:t}=st.imageController;t.duration=e,st.imageController.sendEvent("video_tool_click",{button:"duration_change",position:"detail",model:t.modelType,value:String(e)})}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pS.prototype,"S",null),(0,I.gn)([S.Fl],pS.prototype,"options",null),(0,I.gn)([S.Fl],pS.prototype,"selected",null);let pA=S._Y.createComponent("DurationSelect",pS,e=>{var t;return(0,y.jsxs)("div",{className:pw.durationSelect,children:[(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.label,label:(0,y.jsxs)("div",{className:pw.durationLabel,children:[e.label,"s"]}),disabled:e.disabled})),onChange:t=>{e.onChange(t)}}),("svd"===st.imageController.generateVideoForm.modelType||"minimax"===st.imageController.generateVideoForm.modelType)&&(0,y.jsx)("div",{className:pw.desc,children:(0,y.jsx)(aN.Z,{S:e.S.switchToKlingDesc,components:{span:e=>(0,y.jsx)("span",{className:pw.highlight,onClick:()=>{st.imageController.generateVideoForm.modelType="kling",st.imageController.checkVideoForm()},children:e})}})})]})});class pj extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var pk=JSON.parse('{"fill":"none","content":"\\n<g id=\\"image-up\\">\\n<path id=\\"Icon (Stroke)\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M18.8637 1.36361C19.2152 1.01214 19.785 1.01214 20.1365 1.36361L23.1365 4.36361C23.488 4.71508 23.488 5.28493 23.1365 5.6364C22.785 5.98787 22.2152 5.98787 21.8637 5.6364L20.4001 4.1728V8.00001C20.4001 8.49706 19.9972 8.90001 19.5001 8.90001C19.003 8.90001 18.6001 8.49706 18.6001 8.00001V4.1728L17.1365 5.6364C16.785 5.98787 16.2152 5.98787 15.8637 5.6364C15.5122 5.28493 15.5122 4.71508 15.8637 4.36361L18.8637 1.36361ZM8.2624 2.10001L13.0001 2.10001C13.4972 2.10001 13.9001 2.50295 13.9001 3.00001C13.9001 3.49706 13.4972 3.90001 13.0001 3.90001H8.3001C7.44517 3.90001 6.8581 3.90071 6.40299 3.93789C5.95839 3.97422 5.71956 4.04082 5.54672 4.12889C5.15158 4.33023 4.83032 4.65149 4.62898 5.04663C4.54091 5.21947 4.47431 5.4583 4.43798 5.9029C4.4008 6.35801 4.4001 6.94508 4.4001 7.80001V16.2C4.4001 17.0549 4.4008 17.642 4.43798 18.0971C4.47431 18.5417 4.54091 18.7805 4.62898 18.9534C4.83032 19.3485 5.15158 19.6698 5.54672 19.8711C5.54989 19.8727 5.55308 19.8743 5.55629 19.8759C5.64856 19.7102 5.76 19.5856 5.8324 19.5072C5.98104 19.3464 6.18445 19.1615 6.39964 18.9659L14.9044 11.2343C15.0667 11.0868 15.2233 10.9444 15.3659 10.8332C15.5232 10.7106 15.7135 10.585 15.9546 10.5067C16.2972 10.3954 16.6644 10.3838 17.0134 10.4733C17.259 10.5363 17.4568 10.6496 17.6216 10.7621C17.7709 10.864 17.9361 10.9962 18.1073 11.1332L20.9254 13.3877C20.9462 13.4043 20.9668 13.4208 20.9872 13.4371C21.3048 13.6907 21.5723 13.9044 21.7813 14.1707C22.0419 14.5027 22.2269 14.8876 22.3233 15.2985C22.4007 15.628 22.4005 15.9704 22.4001 16.3769C22.4001 16.403 22.4001 16.4294 22.4001 16.456V16.4882C22.4001 16.6565 22.4001 16.8173 22.3996 16.9709C22.3999 16.9806 22.4001 16.9903 22.4001 17C22.4001 17.0438 22.4001 17.087 22.4001 17.1295C22.4005 17.9334 22.4008 18.511 22.2672 19.0094C22.1094 19.5982 21.8195 20.1306 21.4305 20.5735C21.295 20.7277 21.1476 20.8711 20.9895 21.0022C20.564 21.3551 20.0615 21.6192 19.5095 21.7671C19.0111 21.9007 18.4335 21.9004 17.6296 21.9C17.5871 21.9 17.5439 21.9 17.5001 21.9H17.0432C17.025 21.9 17.0067 21.9 16.9883 21.9H8.26239C8.2399 21.9 8.21751 21.9 8.19525 21.9L7.53397 21.9C7.27516 21.9 7.02896 21.9001 6.82412 21.8867C6.62109 21.8802 6.43213 21.8705 6.25642 21.8561C5.7005 21.8107 5.19842 21.7138 4.72954 21.4749C3.9957 21.101 3.39908 20.5044 3.02517 19.7706C2.78626 19.3017 2.68938 18.7996 2.64396 18.2437C2.60008 17.7066 2.60009 17.0458 2.6001 16.2377V7.7623C2.60009 6.95425 2.60008 6.2934 2.64396 5.75632C2.68938 5.20041 2.78626 4.69833 3.02517 4.22944C3.39908 3.49561 3.9957 2.89899 4.72954 2.52508C5.19842 2.28617 5.7005 2.18929 6.25642 2.14387C6.79349 2.09999 7.45434 2.1 8.2624 2.10001ZM20.1741 19.268C20.2766 19.1327 20.363 18.9845 20.4309 18.8259C20.4957 18.6744 20.5452 18.4659 20.5721 18.0827C20.5996 17.6911 20.6001 17.1883 20.6001 16.456C20.6001 15.9291 20.5945 15.8101 20.571 15.7099C20.5344 15.554 20.4642 15.408 20.3654 15.2821C20.3018 15.2011 20.2124 15.1224 19.8009 14.7932L17.0037 12.5554C16.8039 12.3956 16.6926 12.3074 16.6067 12.2487C16.5801 12.2306 16.5626 12.22 16.5527 12.2144C16.5432 12.2133 16.5336 12.2136 16.5241 12.2153C16.5146 12.2215 16.4978 12.2332 16.4724 12.2529C16.3903 12.3169 16.2849 12.412 16.0955 12.5841L7.82843 20.0997C7.97609 20.1 8.13298 20.1 8.3001 20.1H16.9561C17.6883 20.1 18.1911 20.0995 18.5828 20.072C18.9659 20.0451 19.1745 19.9956 19.326 19.9308C19.4895 19.8608 19.6421 19.7711 19.7807 19.6644C19.9289 19.5504 20.0612 19.417 20.1741 19.268ZM9.0001 7.40001C8.39259 7.40001 7.9001 7.89249 7.9001 8.50001C7.9001 9.10752 8.39258 9.60001 9.0001 9.60001C9.60761 9.60001 10.1001 9.10752 10.1001 8.50001C10.1001 7.89249 9.60761 7.40001 9.0001 7.40001ZM6.1001 8.50001C6.1001 6.89838 7.39847 5.60001 9.0001 5.60001C10.6017 5.60001 11.9001 6.89838 11.9001 8.50001C11.9001 10.1016 10.6017 11.4 9.0001 11.4C7.39847 11.4 6.1001 10.1016 6.1001 8.50001Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 25 24"}');let pN=S._Y.createComponent("ImageUpIcon",pj,e=>(0,y.jsx)(R.s,{...e.props,name:"ImageUpIcon",iconData:pk}));var p_={frameUploader:"frame-uploader--QOvBf",dragging:"dragging--m0SWH",placeholder:"placeholder--ZBJZK",isTight:"is-tight--zg13b",uploadTips:"upload-tips--_E6Si",loading:"loading--vh0Cr",imagePreview:"image-preview--G0DgA",tip:"tip--_Oh0T",changeLayer:"change-layer--MZDrZ",fileLimit:"file-limit--OnZjC",divider:"divider--sgh85"};class pT extends S.PN{get S(){return ei.S.Global.modules.ImageView.FrameUploader}get ReferenceUploaderI18n(){return ei.S.Global.modules.ImageView.ReferenceUploader}onViewCreate(){}onViewDestroy(){}async handleFile(e){(!this.props.checkLogin||await this.props.checkLogin())&&this.props.onFileChange(e)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"isDragging",!1)}}(0,I.gn)([S.SB],pT.prototype,"isDragging",void 0),(0,I.gn)([S.Fl],pT.prototype,"S",null),(0,I.gn)([S.Fl],pT.prototype,"ReferenceUploaderI18n",null);let pI=S._Y.createComponent("FrameUploader",pT,e=>{let{tip:t,className:i,desc:o,overDesc:a,placeholderIcon:n,placeholderClassName:r,allowEventPropagation:s,uploadFileConfig:l,hideLimit:c,isTight:d}=e.props,p=(null==l?void 0:l.status)==="loading",m=null==l?void 0:l.imgPreviewUrl,h=o;return e.isDragging&&a&&(h=a),(0,y.jsxs)(lb.b,{draggable:!0,className:q()(p_.frameUploader,i,{[p_.dragging]:e.isDragging,[p_.isTight]:d}),onDrop:t=>{p||e.handleFile(t[0])},onDrag:t=>{e.isDragging=t},allowEventPropagation:s,children:[e.props.fileUrl||m?(0,y.jsxs)("div",{className:p_.imagePreview,children:[(0,y.jsx)(eH.E,{src:m||e.props.fileUrl,skeleton:!0,style:{borderRadius:12,overflow:"hidden"},onLoad:t=>{if(e.props.fileUrl){var i,o;null===(i=(o=e.props).onImageLoad)||void 0===i||i.call(o,e.props.fileUrl,{width:t.currentTarget.naturalWidth,height:t.currentTarget.naturalHeight})}}}),t&&(0,y.jsx)("div",{className:p_.tip,children:t}),(0,y.jsxs)("div",{className:p_.changeLayer,children:[(0,y.jsx)(e6,{title:e.S.change,size:16,button:!0,color:"var(--theme-text-white-primary)",onClick:()=>{w.m.selectFile(t=>{e.handleFile(t[0])},{accept:st.imageController.imageUploadManager.imageFileTypes,multiple:!1})}}),(0,y.jsx)(aE.X,{size:16,button:!0,title:e.S.delete,color:"var(--theme-text-white-primary)",onClick:()=>{var t,i;null===(t=(i=e.props).onFileChange)||void 0===t||t.call(i)}})]})]}):(0,y.jsxs)("div",{className:q()(p_.placeholder,r),onClick:()=>{p||w.m.selectFile(t=>{e.handleFile(t[0])},{accept:st.imageController.imageUploadManager.imageFileTypes,multiple:!1})},children:[n,(0,y.jsx)("p",{className:p_.uploadTips,children:h}),!c&&(0,y.jsxs)("div",{className:p_.fileLimit,children:[(0,y.jsx)("span",{className:p_.item,children:(0,ei.x)(e.ReferenceUploaderI18n.supportType,{type:"JPG, PNG"})}),(0,y.jsx)("span",{className:p_.divider}),(0,y.jsx)("span",{className:p_.item,children:(0,ei.x)(e.ReferenceUploaderI18n.maxSize,{size:10})})]})]}),p&&(0,y.jsx)("div",{className:p_.loading,children:(0,y.jsx)(eC.g,{fullScreen:!0})})]})});var pM={frames:"frames--TJnlc",uploader:"uploader--Ufv_t",desc:"desc--QwgDa",uploadTips:"upload-tips--MD1Z1",name:"name--eDp0a"};class pL extends S.PN{get S(){return ei.S.Global.modules.ImageView.Frames}get FrameUploaderI18n(){return ei.S.Global.modules.ImageView.FrameUploader}get uploadOriginFileConfig(){let{imageUploadManager:e}=st.imageController;return e.getFileStatus("imageAnimator_originUrl")}get uploadTailFileConfig(){let{imageUploadManager:e}=st.imageController;return e.getFileStatus("imageAnimator_originTailUrl")}handleOriginFileChange(e){let{functionType:t,generateVideoForm:i,imageUploadManager:o}=st.imageController;if("imageAnimator"!==t)return;let a="imageAnimator_originUrl";if(!e){i.originUrl="",o.cancel(a);return}o.handleDropFile(a,e,e=>{i.originUrl=e})}handleTailFileChange(e){let{functionType:t,generateVideoForm:i,imageUploadManager:o}=st.imageController;if("imageAnimator"!==t)return;let a="imageAnimator_originTailUrl";if(!e){i.originTailUrl="",o.cancel(a);return}o.handleDropFile(a,e,e=>{i.originTailUrl=e,e&&"10"===st.imageController.generateVideoForm.duration&&(st.imageController.generateVideoForm.duration="5",ef.M.error(this.S.durationTips))})}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"originLoading",!1),(0,T._)(this,"tailLoading",!1)}}(0,I.gn)([S.SB],pL.prototype,"originLoading",void 0),(0,I.gn)([S.SB],pL.prototype,"tailLoading",void 0),(0,I.gn)([S.Fl],pL.prototype,"S",null),(0,I.gn)([S.Fl],pL.prototype,"FrameUploaderI18n",null),(0,I.gn)([S.Fl],pL.prototype,"uploadOriginFileConfig",null),(0,I.gn)([S.Fl],pL.prototype,"uploadTailFileConfig",null);let pB=S._Y.createComponent("Frames",pL,e=>{let t=e.uploadOriginFileConfig,i=e.uploadTailFileConfig;return(0,y.jsxs)("div",{className:pM.frames,children:[(0,y.jsx)(pI,{placeholderIcon:(0,y.jsx)(pN,{size:24,color:"currentColor"}),desc:(0,y.jsxs)("div",{className:pM.desc,children:[(0,y.jsx)("p",{className:pM.uploadTips,children:e.FrameUploaderI18n.toUpload}),(0,y.jsx)("p",{className:pM.name,children:e.S.startFrameImage})]}),tip:e.S.startFrameImage,className:pM.uploader,fileUrl:st.imageController.generateVideoForm.originUrl,onFileChange:t=>{e.handleOriginFileChange(t)},isTight:!0,uploadFileConfig:t,hideLimit:!0}),(0,y.jsx)(pI,{placeholderIcon:(0,y.jsx)(pN,{size:24,color:"currentColor"}),desc:(0,y.jsxs)("div",{className:pM.desc,children:[(0,y.jsx)("p",{className:pM.uploadTips,children:e.FrameUploaderI18n.toUpload}),(0,y.jsx)("p",{className:pM.name,children:e.S.endFrameImage})]}),tip:e.S.endFrameImage,className:pM.uploader,fileUrl:st.imageController.generateVideoForm.originTailUrl,onFileChange:t=>{e.handleTailFileChange(t)},isTight:!0,uploadFileConfig:i,hideLimit:!0})]})});var pE=i(7875);class pD extends S.PN{get options(){var e;let{generateVideoFields:t}=st.imageController;return(null===(e=t.generateFrom)||void 0===e?void 0:e.options)||[]}get selected(){var e;let{generateVideoForm:t}=st.imageController;return null===(e=this.options)||void 0===e?void 0:e.find(e=>e.key===t.generateFrom)}onViewCreate(){}onViewDestroy(){}onChange(e){let{generateVideoForm:t}=st.imageController;t.generateFrom=e,st.imageController.checkVideoForm(),st.imageController.sendEvent("video_tool_click",{button:"mode_change",position:"detail",model:st.imageController.generateVideoForm.modelType,value:e})}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pD.prototype,"options",null),(0,I.gn)([S.Fl],pD.prototype,"selected",null);let pP=S._Y.createComponent("GenerateFromSelect",pD,e=>{var t;return e.options.length<=1?null:(0,y.jsx)(pE.V,{tabs:e.options.map(e=>({name:e.label,key:e.key})),value:null===(t=e.selected)||void 0===t?void 0:t.key,className:"",onChange:t=>{e.onChange(t)}})});class pF extends S.PN{get options(){var e;let{generateImageFields:t}=st.imageController;return(null===(e=t.mode)||void 0===e?void 0:e.options)||[]}get selected(){let{generateImageForm:e}=st.imageController;return this.options.find(t=>t.key===(0,s5.Z)(e,"mode"))}onViewCreate(){}onViewDestroy(){}onChange(e){let{generateImageForm:t}=st.imageController;t.mode=e}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pF.prototype,"options",null),(0,I.gn)([S.Fl],pF.prototype,"selected",null);let pR=S._Y.createComponent("GenerateImageModeSelect",pF,e=>{var t;return(0,y.jsx)("div",{className:"generate-mode--i660n",children:(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.key,label:e.label})),onChange:t=>{e.onChange(t)}})})});class pV extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){var e;let{generateVideoFields:t}=st.imageController;return(null===(e=t.mode)||void 0===e?void 0:e.options)||[]}get selected(){let{generateVideoForm:e}=st.imageController;return this.options.find(t=>t.key===(0,s5.Z)(e,"mode"))}onViewCreate(){}onViewDestroy(){}onChange(e){let{generateVideoForm:t}=st.imageController;t.mode=e,"pixverse"===t.modelType&&"pro"===e&&(t.duration="5")}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pV.prototype,"S",null),(0,I.gn)([S.Fl],pV.prototype,"options",null),(0,I.gn)([S.Fl],pV.prototype,"selected",null);let pU=S._Y.createComponent("GenerateModeSelect",pV,e=>{var t;return(0,y.jsxs)("div",{className:"generate-mode--bKul5",children:[(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.key,label:e.label})),onChange:t=>{e.onChange(t)}}),(0,y.jsx)("div",{className:"desc--_E0Hf",children:e.S.generateModeDesc})]})});var pz={imageForm:"image-form--Z4eNV",disabled:"disabled--KEMRQ",modelTitle:"model-title--IpW9o",titleText:"title-text--fioZI",models:"models--fQtYo",model:"model--wITzy",number:"number--cc_6D"};class pO extends S.PN{get S(){return ei.S.Global.modules.ImageView}get uploadDesc(){return"profile_photo"===st.imageController.templateForm.template?this.S.imageProfileDesc:this.S.uploadReference}get templatePromptTitle(){return"wallpaper"===st.imageController.templateForm.template?this.S.imageWallpaperDesc:"out_painting_image"===st.imageController.templateForm.template?this.S.imageUpscaleDesc:"minions"===st.imageController.templateForm.template?this.S.minionsDesc:this.S.imageFaceDesc}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pO.prototype,"S",null),(0,I.gn)([S.Fl],pO.prototype,"uploadDesc",null),(0,I.gn)([S.Fl],pO.prototype,"templatePromptTitle",null);var pW={imageQuality:"image-quality--A9JE6",desc:"desc--MOP4p"};class pH extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){var e;let{generateImageFields:t}=st.imageController;return(null===(e=t.imageQuality)||void 0===e?void 0:e.options)||[]}get selected(){var e;let{generateImageForm:t}=st.imageController;return null===(e=this.options)||void 0===e?void 0:e.find(e=>e.key===t.imageQuality)}onViewCreate(){}onViewDestroy(){}onChange(e){st.imageController.generateImageForm.imageQuality=e}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],pH.prototype,"S",null),(0,I.gn)([S.Fl],pH.prototype,"options",null),(0,I.gn)([S.Fl],pH.prototype,"selected",null);let pG=S._Y.createComponent("ImageQuality",pH,e=>{var t;return(0,y.jsxs)("div",{className:pW.imageQuality,children:[(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.key,label:(0,y.jsx)("div",{className:pW.label,children:e.label})})),onChange:t=>{e.onChange(t)}}),(0,y.jsx)("div",{className:pW.desc,children:e.S.generateImageQualityDesc})]})});class pQ extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var pJ=JSON.parse('{"fill":"none","content":"\\n<g id=\\"Fill/&#230;&#147;&#141;&#228;&#189;&#156;/&#229;&#139;&#190;-&#229;&#139;&#190;\\">\\n<path id=\\"Subtract\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M10 18.2812C14.5736 18.2812 18.2812 14.5736 18.2812 10C18.2812 5.42639 14.5736 1.71875 10 1.71875C5.42639 1.71875 1.71875 5.42639 1.71875 10C1.71875 14.5736 5.42639 18.2812 10 18.2812ZM14.5713 8.2013C14.9119 7.86814 14.9179 7.32199 14.5847 6.98143C14.2516 6.64087 13.7054 6.63487 13.3649 6.96802L8.67729 11.5537L6.63512 9.55591C6.29456 9.22276 5.74841 9.22876 5.41525 9.56932C5.0821 9.90988 5.0881 10.456 5.42866 10.7892L8.07406 13.3771C8.40933 13.7051 8.94524 13.7051 9.28052 13.3771L14.5713 8.2013Z\\" fill=\\"#6841EA\\"/>\\n</g>\\n\\n","viewBox":"0 0 20 20"}');let pq=S._Y.createComponent("CheckedRoundIcon",pQ,e=>(0,y.jsx)(R.s,{...e.props,name:"CheckedRoundIcon",iconData:pJ}));var pK={baseDropdownSelect:"base-dropdown-select--bIHx2",label:"label--Ec3tQ",arrowDown:"arrow-down--icuFx",expand:"expand--F_4Hh",options:"options--IUa7P",title:"title--ylhqM",scroller:"scroller--QhyWF",option:"option--crGPk",optionLabel:"option-label--wObH5"};class pY extends S.PN{onOpenChange(){if(this.open){var e;null===(e=this.selectedEl)||void 0===e||e.scrollIntoView()}}onDefaultOpen(){this.props.defaultOpen&&(this.open=!0)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"container",null),(0,T._)(this,"selectedEl",null),(0,T._)(this,"open",!1)}}(0,I.gn)([S.SB],pY.prototype,"open",void 0),(0,I.gn)([(0,S.YP)(e=>[e.open])],pY.prototype,"onOpenChange",null),(0,I.gn)([(0,S.YP)(e=>[e.props.defaultOpen])],pY.prototype,"onDefaultOpen",null);let pZ=S._Y.createComponent("BaseDropdownSelect",pY,e=>{var t;let{title:i,width:o,value:a,style:n,options:r,className:s,renderOption:l}=e.props,c=r.length>1;return(0,y.jsx)(tK.x,{open:e.open,trigger:"click",content:(0,y.jsxs)("div",{style:{width:null!=o?o:null===(t=e.container)||void 0===t?void 0:t.getBoundingClientRect().width},className:pK.options,children:[i&&(0,y.jsx)("div",{className:pK.title,children:i}),(0,y.jsx)("div",{className:pK.scroller,children:r.map(t=>(0,y.jsxs)("div",{ref:i=>{a===t.key&&(e.selectedEl=i)},className:pK.option,onClick:()=>{e.props.onChange(t.key),e.open=!1},children:[(0,y.jsx)("div",{className:pK.optionLabel,children:l(t)}),a===t.key&&(0,y.jsx)("div",{className:pK.baseDropdownSelected,children:(0,y.jsx)(pq,{size:20,color:"var(--theme-icon-brand)"})})]},t.key))})]}),fullWidth:!0,onOpenChange:t=>{e.open=t},children:(0,y.jsxs)("div",{ref:t=>{e.container=t},style:n,className:q()(pK.baseDropdownSelect,s),children:[(0,y.jsx)("div",{className:pK.label,children:l(r.find(e=>e.key===a),!0)}),c&&(0,y.jsx)(sW,{size:20,color:"var(--theme-text-primary)",className:q()(pK.arrowDown,{[pK.expand]:e.open})})]})})});var pX={option:"option--j9rqD",optionIcon:"option-icon--dWdd5",right:"right--arolm",title:"title--YQCPD",titleText:"title-text--XAPRM",newTag:"newTag--xwflS",desc:"desc--RAqzU"};class p$ extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){var e;let{functionType:t,generateImageFields:i,generateVideoFields:o}=st.imageController;return"imageGenerator"===t?i.modelType.options||[]:(null===(e=o.modelType)||void 0===e?void 0:e.options)||[]}get selected(){var e,t;let{functionType:i,generateImageForm:o,generateVideoForm:a}=st.imageController;return"imageGenerator"===i?null===(t=this.options)||void 0===t?void 0:t.find(e=>e.key===o.modelType):null===(e=this.options)||void 0===e?void 0:e.find(e=>e.key===a.modelType)}onViewCreate(){}onViewDestroy(){}onChange(e){let{functionType:t,generateImageForm:i,generateVideoForm:o}=st.imageController;"imageGenerator"===t&&(i.modelType=e,st.imageController.checkImageForm()),"imageAnimator"===t&&(o.modelType=e,st.imageController.checkVideoForm()),st.imageController.sendEvent("imageAnimator"===t?"video_tool_click":"image_tool_click",{button:"modelChange",position:"detail",type:"imageGenerator"===t?"image":"video",model:e})}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],p$.prototype,"S",null),(0,I.gn)([S.Fl],p$.prototype,"options",null),(0,I.gn)([S.Fl],p$.prototype,"selected",null);let p0=S._Y.createComponent("ModelSelect",p$,e=>{var t;return(0,y.jsx)(pZ,{title:e.S.switchModel,value:null===(t=e.selected)||void 0===t?void 0:t.key,style:{alignItems:"flex-start"},options:e.options,defaultOpen:st.imageController.modelDefaultOpen,renderOption:(e,t)=>{if(!e)return null;let{img:i,label:o,desc:a,isNew:n}=e;return(0,y.jsxs)("div",{className:pX.option,children:[(0,y.jsx)(eH.E,{src:(0,te.Q)(i||""),skeleton:!0,className:pX.optionIcon}),(0,y.jsxs)("div",{className:pX.right,children:[(0,y.jsxs)("div",{className:pX.title,children:[(0,y.jsx)("div",{className:pX.titleText,children:o}),n&&!t&&(0,y.jsx)("div",{className:pX.newTag,children:"New"})]}),(0,y.jsx)("div",{className:pX.desc,children:a})]})]})},onChange:t=>{e.onChange(t)}})});var p1=i(98444);class p2 extends S.PN{get S(){return ei.S.Global.modules.ImageView}get value(){var e;let{generateVideoForm:t}=st.imageController;return null!==(e=t.motionBucketId)&&void 0!==e?e:0}onViewCreate(){}onViewDestroy(){}onChange(e){var t,i;t=st.imageController.generateVideoForm,i=String(e),null==t||(0,p1.Z)(t,"motionBucketId",i)}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],p2.prototype,"S",null),(0,I.gn)([S.Fl],p2.prototype,"value",null);let p3=S._Y.createComponent("MotionBucket",p2,e=>(0,y.jsx)(pu,{min:1,max:255,step:1,title:e.S.motionRange,value:Number(e.value),onChange:t=>{e.onChange(t)}}));class p6 extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"focused",!1),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],p6.prototype,"focused",void 0),(0,I.gn)([S.SB],p6.prototype,"someState",void 0);let p5=S._Y.createComponent("BaseInput",p6,e=>{let{value:t,placeholder:i,onChange:o,classname:a,row:n}=e.props;return(0,y.jsxs)("div",{className:q()("textarea-wrapper--mpCJK",a,{"focused--pAV2m":e.focused}),children:[(0,y.jsx)("textarea",{rows:n||7,value:t,className:"textarea--jyoFh",placeholder:i,onBlur:()=>{e.focused=!1},onFocus:()=>{e.focused=!0},onChange:e=>{o(e.target.value)}}),e.props.footer]})});class p4 extends S.PN{get S(){return ei.S.Global.modules.ImageView}get value(){let{generateVideoForm:e}=st.imageController;return e.negativePrompt}onViewCreate(){}onViewDestroy(){}onChange(e){let{generateVideoForm:t}=st.imageController;t.negativePrompt=e}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"focused",!1),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],p4.prototype,"focused",void 0),(0,I.gn)([S.Fl],p4.prototype,"S",null),(0,I.gn)([S.Fl],p4.prototype,"value",null),(0,I.gn)([S.SB],p4.prototype,"someState",void 0);let p9=S._Y.createComponent("NegativePromptInput",p4,e=>(0,y.jsx)(p5,{value:e.value||"",placeholder:e.S.unwantedPlaceholder,onChange:t=>{e.onChange(t)}}));class p7 extends S.PN{get S(){return ei.S.Global.modules.ImageView}get value(){let{functionType:e,generateImageForm:t,generateVideoForm:i,generateImageByScenarioForm:o,templateForm:a}=st.imageController;return"imageGenerator"===e?t.prompt:"imageAnimator"===e?i.prompt:"template"===e?a.prompt:o.prompt}get placeholder(){return"template"===st.imageController.routeKey?"wallpaper"===st.imageController.templateForm.template?this.S.imageWallpaperPlaceholder:"out_painting_image"===st.imageController.templateForm.template?this.S.promptPlaceholder:"minions"===st.imageController.templateForm.template?this.S.minionsPlaceholder:this.S.imageFacePlaceholder:"imageAnimator"===st.imageController.routeKey?this.S.promptVideoPlaceholder:this.S.promptPlaceholder}onViewCreate(){}onViewDestroy(){}onChange(e){let t=e.slice(0,2e3),{functionType:i,generateImageForm:o,generateVideoForm:a,generateImageByScenarioForm:n,templateForm:r}=st.imageController;"imageGenerator"===i&&(o.prompt=t),"imageAnimator"===i&&(a.prompt=t),"generateImageByScenario"===i&&(n.prompt=t),"template"===i&&(r.prompt=t)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"focused",!1),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],p7.prototype,"focused",void 0),(0,I.gn)([S.Fl],p7.prototype,"S",null),(0,I.gn)([S.Fl],p7.prototype,"value",null),(0,I.gn)([S.Fl],p7.prototype,"placeholder",null),(0,I.gn)([S.SB],p7.prototype,"someState",void 0);let p8=S._Y.createComponent("PromptInput",p7,e=>(0,y.jsx)(p5,{value:e.value||"",row:e.props.row,footer:(0,y.jsxs)("div",{className:"footer--fbj2t",children:[(e.value||"").length,"/2000"]}),placeholder:e.placeholder,onChange:t=>{e.onChange(t)},classname:e.props.classname}));class me extends S.PN{get options(){var e,t,i,o;let{functionType:a,generateImageFields:n,generateVideoFields:r,generateImageByScenarioFields:s}=st.imageController;return"imageGenerator"===a?(null===(t=n.aspectRatio)||void 0===t?void 0:t.options)||[]:"imageAnimator"===a?(null===(i=r.aspectRatio)||void 0===i?void 0:i.options)||[]:null!==(o=null===(e=s.aspectRatio)||void 0===e?void 0:e.options)&&void 0!==o?o:[]}get selected(){let{functionType:e,generateImageForm:t,generateVideoForm:i,generateImageByScenarioForm:o}=st.imageController;return"imageGenerator"===e?this.options.find(e=>e.key===t.aspectRatio):"imageAnimator"===e?this.options.find(e=>e.key===(0,s5.Z)(i,"aspectRatio")):"generateImageByScenario"===e?this.options.find(e=>e.key===o.aspectRatio):void 0}onViewCreate(){}onViewDestroy(){}onChange(e){let t;let{functionType:i,generateImageForm:o,generateVideoForm:a,generateImageByScenarioForm:n}=st.imageController;"imageGenerator"===i&&(o.aspectRatio=e,t=o.modelType),"imageAnimator"===i&&(a.aspectRatio=e,t=a.modelType),"generateImageByScenario"===i&&(n.aspectRatio=e,t=n.modelType);let r="imageAnimator"===i;i&&st.imageController.sendEvent(r?"video_tool_click":"image_tool_click",{button:"aspectRatioChange",position:"detail",type:i,aspectRatio:e,model:t})}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],me.prototype,"options",null),(0,I.gn)([S.Fl],me.prototype,"selected",null);let mt=S._Y.createComponent("RatioSelect",me,e=>{var t;return(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.key,label:(0,y.jsxs)("div",{className:"option--rNULD",children:["icon"in e&&e.icon&&(0,y.jsx)(e.icon,{size:20,color:"currentColor"}),e.key]})})),onChange:t=>{e.onChange(t)}})});class mi extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"focused",!1)}}(0,I.gn)([S.SB],mi.prototype,"focused",void 0);let mo=S._Y.createComponent("InputNumber",mi,e=>{let{width:t,className:i,...o}=e.props;return(0,y.jsx)(ci.Z,{...o,controls:!1,onFocus:t=>{var i;null===(i=o.onFocus)||void 0===i||i.call(o,t),e.focused=!0},onBlur:t=>{var i;null===(i=o.onBlur)||void 0===i||i.call(o,t),e.focused=!1},className:q()("input-number--cAVTb",{"focused--Oz4ep":e.focused},i),style:{width:t}})});var ma={ratioSelectWithCustom:"ratio-select-with-custom--nf0_Z",option:"option--QzbHj",custom:"custom--gUUR4",pillButton:"pill-button--jgHTm",inputNumber:"input-number--qBk_7",desc:"desc--N3Iv3"};class mn extends S.PN{get S(){return ei.S.Global.modules.ImageView.RatioSelectWithCustom}get options(){let{functionType:e,templateFields:t}=st.imageController;if("template"===e){var i;return(null===(i=t.templateAspectRatio)||void 0===i?void 0:i.options)||[]}return[]}get customOptions(){let{width:e,height:t}=this.getCustomConfig();return[{key:"width",value:e,label:this.S.width,onChange:e=>{let{height:t}=this.getCustomConfig(),i="".concat(e,":").concat(null!=t?t:"");st.imageController.templateForm.templateAspectRatio={isCustom:!0,value:i}},range:this.customRange.width},{key:"height",value:t,label:this.S.height,onChange:e=>{let{width:t}=this.getCustomConfig(),i="".concat(null!=t?t:"",":").concat(e);st.imageController.templateForm.templateAspectRatio={isCustom:!0,value:i}},range:this.customRange.height}]}get customRange(){let{functionType:e,templateFields:t}=st.imageController,i={width:[1,9999],height:[1,9999]};if("template"===e){var o;return(null===(o=t.templateAspectRatio)||void 0===o?void 0:o.customRange)||i}return i}get selected(){let{functionType:e,templateForm:t}=st.imageController;if("template"===e)return this.options.find(e=>{var i,o;return"object"==typeof e.key&&"isCustom"in e.key&&((null===(i=t.templateAspectRatio)||void 0===i?void 0:i.isCustom)?e.key.isCustom:!e.key.isCustom&&e.key.value===(null===(o=t.templateAspectRatio)||void 0===o?void 0:o.value))})}getCustomConfig(){var e,t;let i,o;let{templateForm:a}=st.imageController;if(null===(e=a.templateAspectRatio)||void 0===e?void 0:e.value){let e=null===(t=a.templateAspectRatio)||void 0===t?void 0:t.value.split(":");i=e[0],o=e[1]}return{width:i?Number(i):"",height:o?Number(o):""}}onViewCreate(){}onViewDestroy(){}onChange(e){let{functionType:t,templateForm:i}=st.imageController;"template"===t&&(e.isCustom?i.templateAspectRatio={isCustom:!0,value:"1820:1560"}:i.templateAspectRatio=e),t&&st.imageController.sendEvent("image_tool_click",{button:"templateAspectRatioChange",position:"detail",type:t,aspectRatio:e.value,template:i.template})}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mn.prototype,"S",null),(0,I.gn)([S.Fl],mn.prototype,"options",null),(0,I.gn)([S.Fl],mn.prototype,"customOptions",null),(0,I.gn)([S.Fl],mn.prototype,"customRange",null),(0,I.gn)([S.Fl],mn.prototype,"selected",null);let mr=S._Y.createComponent("RatioSelectWithCustom",mn,e=>{var t,i,o,a;return(0,y.jsxs)("div",{className:ma.ratioSelectWithCustom,children:[(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.key,label:(0,y.jsxs)("div",{className:ma.option,children:["icon"in e&&e.icon&&(0,y.jsx)(e.icon,{size:20,color:"currentColor"}),"object"==typeof e.key&&"isCustom"in e.key?e.key.isCustom?"":e.key.value:"",e.label?" ".concat(e.label):""]})})),onChange:t=>{e.onChange(t)}}),"object"==typeof(null===(i=e.selected)||void 0===i?void 0:i.key)&&"isCustom"in e.selected.key&&e.selected.key.isCustom&&(0,y.jsx)("div",{className:ma.custom,children:e.customOptions.map(e=>(0,y.jsxs)("div",{className:ma.pillButton,children:[e.label,(0,y.jsx)(mo,{value:e.value,min:e.range[0],max:e.range[1],onChange:t=>{e.onChange(t)},className:ma.inputNumber})]},e.key))}),(null===(o=e.selected)||void 0===o?void 0:o.desc)&&(0,y.jsx)("div",{className:ma.desc,children:null===(a=e.selected)||void 0===a?void 0:a.desc})]})});class ms extends S.PN{get S(){return ei.S.Global.modules.ImageView}get fileUrl(){let{functionType:e,templateForm:t,generateImageForm:i,generateVideoForm:o}=st.imageController;return"imageGenerator"===e?i.originUrl:"imageAnimator"===e?o.originUrl:t.originUrl}get imageTaskId(){let{routeKey:e}=st.imageController;return"imageGenerator"===e||"imageAnimator"===e||"template"===e?"".concat(e,"_originUrl"):null}get imageTaskConfig(){let{imageUploadManager:e}=st.imageController;if(this.imageTaskId)return e.getFileStatus(this.imageTaskId)}onViewCreate(){}onViewDestroy(){}handleFileChange(e){let{functionType:t,templateForm:i,generateImageForm:o,generateVideoForm:a,imageUploadManager:n}=st.imageController;if(!e){"imageGenerator"===t&&(o.originUrl=""),"imageAnimator"===t&&(a.originUrl=""),"template"===t&&(i.originUrl=""),this.imageTaskId&&n.cancel(this.imageTaskId);return}this.imageTaskId&&n.handleDropFile(this.imageTaskId,e,e=>{"imageGenerator"===t&&(o.originUrl=e),"imageAnimator"===t&&(a.originUrl=e),"template"===t&&(i.originUrl=e,"out_painting_image"===st.imageController.templateForm.template&&st.imageController.upscaleManager.resetImagePosition())})}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],ms.prototype,"S",null),(0,I.gn)([S.Fl],ms.prototype,"fileUrl",null),(0,I.gn)([S.Fl],ms.prototype,"imageTaskId",null),(0,I.gn)([S.Fl],ms.prototype,"imageTaskConfig",null);let ml=S._Y.createComponent("ReferenceUploader",ms,e=>{let{placeholderIcon:t,checkLogin:i}=e.props;return(0,y.jsx)(pI,{desc:e.S.clickOrDragToUpload,fileUrl:e.fileUrl,placeholderIcon:t||(0,y.jsx)(pN,{size:24,color:"currentColor"}),onFileChange:t=>{e.handleFileChange(t)},uploadFileConfig:e.imageTaskConfig,checkLogin:i})});var mc={baseDropdownSelect:"base-dropdown-select--HAxS2",sizeSmall:"size-small--BFGsh",label:"label--v0MO4",arrowDown:"arrow-down--sE3ba",expand:"expand--YNtUi",absolute:"absolute--iaU1R",scroller:"scroller--ewBB0",option:"option--ajoe8",active:"active--KetBa",optionImg:"option-img--YTMcK",optionLabel:"option-label--HV2VH",baseDropdownSelected:"base-dropdown-selected--Gk7kF"};class md extends S.PN{onOpenChange(){if(this.open){var e;null===(e=this.selectedEl)||void 0===e||e.scrollIntoView()}}onDefaultOpen(){this.props.defaultOpen&&setTimeout(()=>{this.open=!0},300)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"container",null),(0,T._)(this,"selectedEl",null),(0,T._)(this,"open",!1)}}(0,I.gn)([S.SB],md.prototype,"open",void 0),(0,I.gn)([(0,S.YP)(e=>[e.open])],md.prototype,"onOpenChange",null),(0,I.gn)([(0,S.YP)(e=>[e.props.defaultOpen])],md.prototype,"onDefaultOpen",null);let mp=S._Y.createComponent("BaseDropdownGridSelect",md,e=>{let{size:t="default",value:i,style:o,columns:a,options:n,defaultOpen:r,optionImageStyle:s,renderLabel:l,renderListItem:c,placement:d,fullWidth:p}=e.props;return(0,y.jsx)(tK.x,{open:e.open,trigger:"click",content:(0,y.jsx)("div",{style:{gridTemplateColumns:"repeat(".concat(a,", 1fr)")},className:mc.scroller,children:n.map(t=>{var o;let a=(i||"auto")===t.key;return(0,y.jsxs)("div",{ref:t=>{a&&(e.selectedEl=t)},className:q()(mc.option,{[mc.active]:a}),onClick:()=>{e.props.onChange(t.key),e.open=!1},children:[c?c(t):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(eH.E,{src:(0,te.Q)(t.img),style:s,skeleton:!0,className:mc.optionImg}),(0,y.jsx)("div",{style:{width:null!==(o=null==s?void 0:s.width)&&void 0!==o?o:"100px"},className:mc.optionLabel,children:t.label})]}),a&&(0,y.jsx)("div",{className:mc.baseDropdownSelected,children:(0,y.jsx)(pq,{size:22,color:"var(--theme-icon-brand)"})})]},t.key)})}),fullWidth:!0,defaultOpen:r,onOpenChange:t=>{e.open=t},placement:d,children:(0,y.jsxs)("div",{ref:t=>{e.container=t},style:o,className:q()(mc.baseDropdownSelect,{[mc.sizeSmall]:"small"===t,[mc.sizeDefault]:"default"===t}),children:[(0,y.jsx)("div",{className:mc.label,children:l(n.find(e=>e.key===i),!0)}),(0,y.jsx)(sW,{size:20,color:"var(--theme-text-primary)",className:q()(mc.arrowDown,{[mc.expand]:e.open,[mc.absolute]:p})})]})})});class mm extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){var e;let{generateImageByScenarioFields:t}=st.imageController;return(null===(e=t.imageScene)||void 0===e?void 0:e.options)||[]}get selected(){let{generateImageByScenarioForm:e}=st.imageController;return this.options.find(t=>t.key===e.imageScene)}onViewCreate(){}onViewDestroy(){}onChange(e){st.imageController.generateImageByScenarioForm.imageScene=e}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mm.prototype,"S",null),(0,I.gn)([S.Fl],mm.prototype,"options",null),(0,I.gn)([S.Fl],mm.prototype,"selected",null);let mh=S._Y.createComponent("ScenarioSelect",mm,e=>{var t;return(0,y.jsx)(mp,{title:e.S.selectScenario,value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options,columns:3,renderLabel:e=>{if(!e)return null;let{img:t,label:i}=e;return(0,y.jsxs)("div",{className:"option--v22Jx",children:[(0,y.jsx)(eH.E,{src:(0,te.Q)(t||""),skeleton:!0,className:"option-icon--FbicK"}),i]})},defaultOpen:st.imageController.scenarioDefaultOpen,optionImageStyle:{backgroundColor:"var(--theme-fill-tsp-components-tertiary)"},onChange:t=>{e.onChange(t)}})});class mg extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],mg.prototype,"someState",void 0);let mu=S._Y.createComponent("Section",mg,e=>(0,y.jsxs)("div",{className:pm.section,children:[(0,y.jsx)("div",{className:q()(pm.title,{}),children:e.props.title}),e.props.children]}));class mv extends S.PN{get S(){return ei.S.Global.modules.ImageView}get value(){let{generateVideoForm:e}=st.imageController;return e.seed}onViewCreate(){}onViewDestroy(){}onChange(e){st.imageController.generateVideoForm.seed=e,st.imageController.sendEvent("video_tool_click",{button:"seed_change",position:"detail",model:st.imageController.generateVideoForm.modelType,value:String(e)})}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mv.prototype,"S",null),(0,I.gn)([S.Fl],mv.prototype,"value",null);let mC=S._Y.createComponent("Seed",mv,e=>(0,y.jsxs)("div",{className:"seed--rT8Cn",children:[(0,y.jsx)(O.I,{type:"number",size:"large",value:e.value||"",onChange:t=>{e.onChange(t)}}),(0,y.jsx)("div",{className:"desc--ecnWA",children:e.S.seedDesc})]}));var mx={option:"option--Wbr0M",sizeSmall:"size-small--WE2mZ",optionIcon:"option-icon--MLhk1"};class my extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){var e,t;let{generateImageFields:i,functionType:o,templateFields:a}=st.imageController;return"template"===o?(null===(t=a.imageStyle)||void 0===t?void 0:t.options)||[]:(null===(e=i.imageStyle)||void 0===e?void 0:e.options)||[]}get selected(){let{functionType:e,generateImageForm:t,generateImageByScenarioForm:i,realtimeGenerateByCanvasForm:o,realtimeGenerateByTextForm:a,templateForm:n}=st.imageController;return"imageGenerator"===e?this.options.find(e=>e.key===t.imageStyle):"generateImageByScenario"===e?this.options.find(e=>e.key===i.imageStyle):"realtimeGenerateImageByCanvas"===e?this.options.find(e=>e.key===o.imageStyle):"template"===e?this.options.find(e=>e.key===n.imageStyle):this.options.find(e=>e.key===a.imageStyle)}onViewCreate(){}onViewDestroy(){}onChange(e){var t,i;let{functionType:o}=st.imageController;"imageGenerator"===o&&(st.imageController.generateImageForm.imageStyle=e),"generateImageByScenario"===o&&(st.imageController.generateImageByScenarioForm.imageStyle=e),"realtimeGenerateImageByCanvas"===o&&(st.imageController.realtimeGenerateByCanvasForm.imageStyle=e),"realtimeGenerateImageByText"===o&&(st.imageController.realtimeGenerateByTextForm.imageStyle=e),"template"===o&&(st.imageController.templateForm.imageStyle=e),o&&st.imageController.sendEvent("image_tool_click",{button:"styleChange",position:"detail",type:o,style:e}),null===(t=(i=this.props).onChange)||void 0===t||t.call(i)}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],my.prototype,"S",null),(0,I.gn)([S.Fl],my.prototype,"options",null),(0,I.gn)([S.Fl],my.prototype,"selected",null);let mb=S._Y.createComponent("StyleSelect",my,e=>{var t,i;let o=null!==(i=e.props.columns)&&void 0!==i?i:window.innerWidth<640?3:4;return(0,y.jsx)(mp,{title:e.S.switchModel,value:null===(t=e.selected)||void 0===t?void 0:t.key,columns:o,options:e.options,size:e.props.size,renderLabel:t=>{if(!t)return null;let{img:i,label:o}=t;return(0,y.jsxs)("div",{className:q()(mx.option,{[mx.sizeSmall]:"small"===e.props.size}),children:[(0,y.jsx)(eH.E,{src:(0,te.Q)(i||""),skeleton:!0,className:mx.optionIcon}),o]})},onChange:t=>{e.onChange(t)}})});var mf={option:"option--FHQI4",optionIcon:"option-icon--wr29v",templateSelect:"template-select--LBsz0",desc:"desc--9auMZ"};class mw extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){let{templateFields:e}=st.imageController;return e.template.options||[]}get selected(){var e;let{templateFields:t,templateForm:i}=st.imageController;return null===(e=t.template.options)||void 0===e?void 0:e.find(e=>e.key===i.template)}onViewCreate(){}onViewDestroy(){}onChange(e){st.imageController.templateForm.template=e;let{functionType:t}=st.imageController;t&&st.imageController.sendEvent("image_tool_click",{button:"templateChange",position:"detail",type:t,template:e}),st.imageController.checkTemplateForm()}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mw.prototype,"S",null),(0,I.gn)([S.Fl],mw.prototype,"options",null),(0,I.gn)([S.Fl],mw.prototype,"selected",null);let mS=S._Y.createComponent("TemplateSelect",mw,e=>{var t,i,o;return(0,y.jsxs)("div",{className:mf.templateSelect,children:[(0,y.jsx)(mp,{style:{alignItems:"flex-start"},title:e.S.switchModel,value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options,columns:3,renderLabel:(e,t)=>{if(!e)return null;let{img:i,label:o}=e;return(0,y.jsxs)("div",{className:mf.option,children:[o,i&&(0,y.jsx)(eH.E,{src:(0,te.Q)(i),style:{minHeight:t?170:void 0},skeleton:!0,className:mf.optionIcon})]})},defaultOpen:st.imageController.templateDefaultOpen,optionImageStyle:{width:100,height:75},onChange:t=>{e.onChange(t)},fullWidth:!0}),(null===(i=e.selected)||void 0===i?void 0:i.key)==="onediff_old_photo_restore"&&(0,y.jsx)("div",{className:mf.desc,children:e.S.fixOldDesc}),"string"==typeof(null===(o=e.selected)||void 0===o?void 0:o.key)&&["sticker","upscale_face_swap","real_to_manga","real_to_anime","rick_morty"].includes(e.selected.key)&&(0,y.jsx)("div",{className:mf.desc,children:e.S.personOnly})]})});class mA extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var mj=JSON.parse('{"fill":"none","content":"\\n<rect width=\\"28\\" height=\\"28\\" rx=\\"14\\" fill=\\"white\\"/>\\n<rect x=\\"0.5\\" y=\\"0.5\\" width=\\"27\\" height=\\"27\\" rx=\\"13.5\\" stroke=\\"#4F5966\\" stroke-opacity=\\"0.2\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M10.2423 8.24239C10.4766 8.00807 10.8565 8.00807 11.0908 8.24239L13.7575 10.9091C13.9918 11.1434 13.9918 11.5233 13.7575 11.7576C13.5232 11.9919 13.1433 11.9919 12.909 11.7576L11.2666 10.1152V19.3333C11.2666 19.6647 10.9979 19.9333 10.6666 19.9333C10.3352 19.9333 10.0666 19.6647 10.0666 19.3333V10.1152L8.42417 11.7576C8.18985 11.9919 7.80995 11.9919 7.57564 11.7576C7.34132 11.5233 7.34132 11.1434 7.57564 10.9091L10.2423 8.24239ZM16.7332 17.8848V8.66665C16.7332 8.33528 17.0019 8.06665 17.3332 8.06665C17.6646 8.06665 17.9332 8.33528 17.9332 8.66665V17.8848L19.5756 16.2424C19.81 16.0081 20.1898 16.0081 20.4242 16.2424C20.6585 16.4767 20.6585 16.8566 20.4242 17.0909L17.7575 19.7576C17.5232 19.9919 17.1433 19.9919 16.909 19.7576L14.2423 17.0909C14.008 16.8566 14.008 16.4767 14.2423 16.2424C14.4766 16.0081 14.8565 16.0081 15.0908 16.2424L16.7332 17.8848Z\\" fill=\\"#55555D\\"/>\\n\\n","viewBox":"0 0 28 28"}');let mk=S._Y.createComponent("TransformIcon",mA,e=>(0,y.jsx)(R.s,{...e.props,name:"TransformIcon",iconData:mj}));class mN extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var m_=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M6.7624 1.6001L12.0001 1.6001C12.4972 1.6001 12.9001 2.00304 12.9001 2.5001C12.9001 2.99715 12.4972 3.4001 12.0001 3.4001H6.8001C5.94517 3.4001 5.3581 3.4008 4.90299 3.43798C4.45839 3.47431 4.21956 3.54091 4.04672 3.62898C3.65158 3.83032 3.33032 4.15158 3.12898 4.54672C3.04091 4.71956 2.97431 4.95839 2.93798 5.40299C2.9008 5.8581 2.9001 6.44517 2.9001 7.3001V17.7001C2.9001 17.7018 2.9001 17.7034 2.9001 17.7051C3.74434 17.0145 4.82339 16.6001 5.99987 16.6001H12.9999C13.0364 16.6001 13.0724 16.6001 13.1079 16.6001C13.9333 16.5999 14.481 16.5998 14.9558 16.6943C16.8996 17.0809 18.4191 18.6004 18.8057 20.5442C18.865 20.8424 18.8871 21.1694 18.8952 21.5759C18.9654 21.572 19.0326 21.5675 19.0972 21.5622C19.5418 21.5259 19.7806 21.4593 19.9535 21.3712C20.3486 21.1699 20.6699 20.8486 20.8712 20.4535C20.9593 20.2806 21.0259 20.0418 21.0622 19.5972C21.0994 19.1421 21.1001 18.555 21.1001 17.7001V12.5001C21.1001 12.003 21.503 11.6001 22.0001 11.6001C22.4972 11.6001 22.9001 12.003 22.9001 12.5001V17.7378C22.9001 18.5459 22.9001 19.2067 22.8562 19.7438C22.8108 20.2997 22.7139 20.8018 22.475 21.2707C22.1011 22.0045 21.5045 22.6011 20.7707 22.975C20.3018 23.2139 19.7997 23.3108 19.2438 23.3562C18.9019 23.3842 18.51 23.3943 18.0618 23.398C18.0413 23.3994 18.0207 23.4001 17.9999 23.4001C17.9834 23.4001 17.967 23.3997 17.9508 23.3988C17.7269 23.4001 17.4895 23.4001 17.2378 23.4001H6.76239C5.95434 23.4001 5.29349 23.4001 4.75642 23.3562C4.2005 23.3108 3.69842 23.2139 3.22954 22.975C2.4957 22.6011 1.89908 22.0045 1.52517 21.2707C1.4537 21.1304 1.39495 20.9872 1.34647 20.8404C1.2878 20.7272 1.25295 20.6015 1.24648 20.4712C1.19596 20.2386 1.16463 19.9968 1.14396 19.7438C1.10008 19.2067 1.10009 18.5459 1.1001 17.7378V7.2624C1.10009 6.45434 1.10008 5.79349 1.14396 5.25642C1.18938 4.7005 1.28626 4.19842 1.52517 3.72954C1.89908 2.9957 2.4957 2.39908 3.22954 2.02517C3.69842 1.78626 4.2005 1.68938 4.75642 1.64396C5.29349 1.60008 5.95434 1.60009 6.7624 1.6001ZM17.0949 21.6001C17.0884 21.2581 17.0736 21.0627 17.0403 20.8953C16.7957 19.6656 15.8344 18.7043 14.6046 18.4597C14.3271 18.4045 13.9723 18.4001 12.9999 18.4001H5.99987C4.67752 18.4001 3.54671 19.2287 3.10183 20.3964C3.11064 20.4163 3.11969 20.4352 3.12898 20.4535C3.33032 20.8486 3.65158 21.1699 4.04672 21.3712C4.21956 21.4593 4.45839 21.5259 4.90299 21.5622C5.3581 21.5994 5.94517 21.6001 6.8001 21.6001H17.0949ZM18.3637 1.8637C18.7152 1.51223 19.285 1.51223 19.6365 1.8637L22.6365 4.8637C22.988 5.21517 22.988 5.78502 22.6365 6.13649C22.285 6.48797 21.7152 6.48797 21.3637 6.13649L19.9001 4.67289V8.5001C19.9001 8.99715 19.4972 9.4001 19.0001 9.4001C18.503 9.4001 18.1001 8.99715 18.1001 8.5001V4.67289L16.6365 6.13649C16.285 6.48797 15.7152 6.48797 15.3637 6.13649C15.0122 5.78502 15.0122 5.21517 15.3637 4.8637L18.3637 1.8637ZM10.0001 6.9001C8.28802 6.9001 6.9001 8.28802 6.9001 10.0001C6.9001 11.7122 8.28802 13.1001 10.0001 13.1001C11.7122 13.1001 13.1001 11.7122 13.1001 10.0001C13.1001 8.28802 11.7122 6.9001 10.0001 6.9001ZM5.1001 10.0001C5.1001 7.2939 7.2939 5.1001 10.0001 5.1001C12.7063 5.1001 14.9001 7.2939 14.9001 10.0001C14.9001 12.7063 12.7063 14.9001 10.0001 14.9001C7.2939 14.9001 5.1001 12.7063 5.1001 10.0001Z\\" fill=\\"#55555D\\"/>\\n\\n","viewBox":"0 0 24 25"}');let mT=S._Y.createComponent("ImageUserUpIcon",mN,e=>(0,y.jsx)(R.s,{...e.props,name:"ImageUserUpIcon",iconData:m_}));var mI={transformFrames:"transform-frames--wZRJy",transformIcon:"transform-icon--evNwu",disable:"disable--AdeKB",brand:"brand--imsyB"};class mM extends S.PN{get S(){return ei.S.Global.modules.ImageView.TransformFrames}get value(){let{functionType:e,templateForm:t}=st.imageController;return"template"===e?{originUrl:t.originUrl,extraImageUrl:t.extraImageUrl}:{originUrl:void 0,extraImageUrl:void 0}}get formLocales(){let{templateForm:e}=st.imageController;return"fast_face_swap"===e.template?{startTips:this.S.startTips1,startDesc:this.S.startDesc1,endTips:this.S.endTips1,endDesc:this.S.endDesc1}:"style_transfer"===e.template?{startTips:this.S.startTips2,startDesc:this.S.startDesc2,endTips:this.S.endTips2,endDesc:this.S.endDesc2}:{startTips:"",startDesc:"",endTips:"",endDesc:""}}get uploadOriginFileConfig(){let{imageUploadManager:e}=st.imageController;return e.getFileStatus("template_originUrl")}get uploadExtraFileConfig(){let{imageUploadManager:e}=st.imageController;return e.getFileStatus("template_extraImageUrl")}handleOriginFileChange(e){let{functionType:t,templateForm:i,imageUploadManager:o}=st.imageController;if("template"!==t)return;let a="template_originUrl";if(!e){st.imageController.templateForm.originUrl="",o.cancel(a);return}o.handleDropFile(a,e,e=>{"template"===t&&(i.originUrl=e)})}handleExtraFileChange(e){let{functionType:t,templateForm:i,imageUploadManager:o}=st.imageController;if("template"!==t)return;let a="template_extraImageUrl";if(!e){st.imageController.templateForm.extraImageUrl="",o.cancel(a);return}o.handleDropFile(a,e,e=>{"template"===t&&(i.extraImageUrl=e)})}handleTransform(){let{originUrl:e,extraImageUrl:t}=this.value;st.imageController.templateForm.originUrl=t||"",st.imageController.templateForm.extraImageUrl=e||""}onChange(e){let{functionType:t}=st.imageController;"template"===t&&(st.imageController.templateForm.originUrl=e.originUrl||"",st.imageController.templateForm.extraImageUrl=e.extraImageUrl)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mM.prototype,"S",null),(0,I.gn)([S.Fl],mM.prototype,"value",null),(0,I.gn)([S.Fl],mM.prototype,"formLocales",null),(0,I.gn)([S.Fl],mM.prototype,"uploadOriginFileConfig",null),(0,I.gn)([S.Fl],mM.prototype,"uploadExtraFileConfig",null);let mL=S._Y.createComponent("Frames",mM,e=>{let t=e.uploadOriginFileConfig,i=e.uploadExtraFileConfig,o=(null==t?void 0:t.status)==="loading"||(null==i?void 0:i.status)==="loading";return(0,y.jsxs)("div",{className:mI.transformFrames,children:[(0,y.jsx)(pI,{tip:e.formLocales.startTips,placeholderIcon:(0,y.jsx)(pN,{size:24,color:"currentColor"}),desc:(0,y.jsx)(aN.Z,{S:e.formLocales.startDesc,components:{span:e=>(0,y.jsx)("span",{className:mI.brand,children:e})}}),className:mI.uploader,fileUrl:e.value.originUrl,onFileChange:t=>{e.handleOriginFileChange(t)},uploadFileConfig:t}),(0,y.jsx)(mk,{onClick:()=>{o||e.handleTransform()},size:28,className:q()(mI.transformIcon,{[mI.disable]:o}),disabled:o}),(0,y.jsx)(pI,{tip:e.formLocales.endTips,desc:(0,y.jsx)(aN.Z,{S:e.formLocales.endDesc,components:{span:e=>(0,y.jsx)("span",{className:mI.brand,children:e})}}),className:mI.uploader,fileUrl:e.value.extraImageUrl,onFileChange:t=>{e.handleExtraFileChange(t)},placeholderIcon:"fast_face_swap"===st.imageController.templateForm.template?(0,y.jsx)(mT,{size:24,color:"currentColor"}):(0,y.jsx)(pN,{size:24,color:"currentColor"}),uploadFileConfig:i})]})});class mB extends S.PN{get S(){return ei.S.Global.modules.ImageView.upscaleConfig}get options(){let{functionType:e,templateFields:t}=st.imageController;if("template"===e){var i;return(null===(i=t.upscaleConfig)||void 0===i?void 0:i.options)||[]}return[]}get customOptions(){var e,t,i;let{templateForm:o}=st.imageController;if((null===(e=o.upscaleConfig)||void 0===e?void 0:e.upscaleKey)!=="custom")return[];let{outer:a=[]}=o.upscaleConfig||{};return[{key:"width",value:null!==(t=null==a?void 0:a[0])&&void 0!==t?t:st.imageController.upscaleManager.defaultSize.width,label:this.S.width,onChange:e=>{this.updateWidth(e)},range:this.customRange.width},{key:"height",value:null!==(i=null==a?void 0:a[1])&&void 0!==i?i:st.imageController.upscaleManager.defaultSize.height,label:this.S.height,onChange:e=>{this.updateHeight(e)},range:this.customRange.height}]}get customRange(){let{functionType:e,templateFields:t}=st.imageController,i={width:[1,9999],height:[1,9999]};if("template"===e){var o;return(null===(o=t.upscaleConfig)||void 0===o?void 0:o.customRange)||i}return i}get selected(){let{functionType:e,templateForm:t}=st.imageController;if("template"===e)return this.options.find(e=>{var i;return"object"==typeof e.key&&"upscaleKey"in e.key&&e.key.upscaleKey===(null===(i=t.upscaleConfig)||void 0===i?void 0:i.upscaleKey)})}onViewCreate(){}onViewDestroy(){}updateWidth(e){var t,i,o;let{templateForm:a}=st.imageController;if((null===(t=a.upscaleConfig)||void 0===t?void 0:t.upscaleKey)!=="custom")return;let n=null===(i=a.upscaleConfig)||void 0===i?void 0:i.outer;st.imageController.upscaleManager.setCropperSize({width:e,height:null!==(o=null==n?void 0:n[1])&&void 0!==o?o:st.imageController.upscaleManager.defaultSize.height})}updateHeight(e){var t,i;let{templateForm:o}=st.imageController;if((null===(t=o.upscaleConfig)||void 0===t?void 0:t.upscaleKey)!=="custom")return;let a=o.upscaleConfig.outer;st.imageController.upscaleManager.setCropperSize({width:null!==(i=null==a?void 0:a[0])&&void 0!==i?i:st.imageController.upscaleManager.defaultSize.width,height:e})}onChange(e){let{functionType:t,templateForm:i}=st.imageController;if("template"===t){let{upscaleKey:o}=e;i.upscaleConfig||(i.upscaleConfig={}),i.upscaleConfig.upscaleKey=o,st.imageController.upscaleManager.handleInit(o),st.imageController.sendEvent("image_tool_click",{button:"upscaleConfigChange",position:"detail",type:t,key:o})}}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mB.prototype,"S",null),(0,I.gn)([S.Fl],mB.prototype,"options",null),(0,I.gn)([S.Fl],mB.prototype,"customOptions",null),(0,I.gn)([S.Fl],mB.prototype,"customRange",null),(0,I.gn)([S.Fl],mB.prototype,"selected",null);let mE=S._Y.createComponent("UpscaleConfig",mB,e=>{var t;return(0,y.jsx)("div",{className:"upscale-config--NTvD1",children:(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.key,label:(0,y.jsxs)("div",{className:"option--nzTJu",children:["icon"in e&&e.icon&&(0,y.jsx)(e.icon,{size:20,color:"currentColor"}),e.label]})})),onChange:t=>{e.onChange(t)}})})});var mD={videoQuality:"video-quality--epKx3"};class mP extends S.PN{get options(){var e;let{generateVideoFields:t}=st.imageController;return(null===(e=t.quality)||void 0===e?void 0:e.options)||[]}get selected(){var e;let{generateVideoForm:t}=st.imageController;return null===(e=this.options)||void 0===e?void 0:e.find(e=>e.key===t.quality)}onViewCreate(){}onViewDestroy(){}onChange(e){st.imageController.generateVideoForm.quality=e}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mP.prototype,"options",null),(0,I.gn)([S.Fl],mP.prototype,"selected",null);let mF=S._Y.createComponent("VideoQuality",mP,e=>{var t;return(0,y.jsx)("div",{className:mD.videoQuality,children:(0,y.jsx)(py,{value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options.map(e=>({key:e.label,label:(0,y.jsx)("div",{className:mD.label,children:e.label})})),onChange:t=>{e.onChange(t)}})})});class mR extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){var e;let{generateVideoFields:t}=st.imageController;return(null==t?void 0:null===(e=t.videoStyle)||void 0===e?void 0:e.options)||[]}get selected(){let{generateVideoForm:e}=st.imageController;return this.options.find(t=>t.key===e.videoStyle)}onViewCreate(){}onViewDestroy(){}onChange(e){st.imageController.generateVideoForm.videoStyle=e}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mR.prototype,"S",null),(0,I.gn)([S.Fl],mR.prototype,"options",null),(0,I.gn)([S.Fl],mR.prototype,"selected",null);var mV={labelItem:"label-item--KK0T9",isColumn:"is-column--H9pCp",optionIcon:"option-icon--JBGJ9"};class mU extends S.PN{onViewCreate(){if(this.props.video){let e=document.createElement("video");e.oncanplay=()=>{this.videoCanPlay=!0,e.remove()},e.src=this.props.video}}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"mediaEl",null),(0,T._)(this,"playing",!1),(0,T._)(this,"videoCanPlay",!1),(0,T._)(this,"onMouseOver",()=>{if(!(this.mediaEl instanceof HTMLVideoElement))return;let e=this.mediaEl;e.loop=!0,e.muted=!0,this.playing=!0,e.play()}),(0,T._)(this,"onMouseLeave",()=>{if(!(this.mediaEl instanceof HTMLVideoElement))return;let e=this.mediaEl;e.pause(),e.currentTime=0,this.playing=!1})}}(0,I.gn)([S.SB],mU.prototype,"playing",void 0),(0,I.gn)([S.SB],mU.prototype,"videoCanPlay",void 0);let mz=S._Y.createComponent("LabelItem",mU,e=>{let{label:t,img:i,video:o,isColumn:a}=e.props;return(0,y.jsxs)("div",{className:q()(mV.labelItem,{[mV.isColumn]:a}),onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,children:[(0,y.jsxs)(y.Fragment,{children:[o&&e.videoCanPlay&&(0,y.jsx)("video",{src:o,ref:t=>{e.mediaEl=t},className:mV.optionIcon}),(!o||o&&!e.videoCanPlay)&&(0,y.jsx)(eH.E,{ref:t=>{e.mediaEl=t},src:(0,te.Q)(i),skeleton:!0,className:mV.optionIcon})]}),t]})}),mO=S._Y.createComponent("VideoStyleSelect",mR,e=>{var t;let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;let{img:i,label:o,video:a}=e;return(0,y.jsx)(mz,{label:o,img:i||"",video:a,isColumn:t})};return(0,y.jsx)(mp,{title:e.S.selectScenario,value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options,columns:2,renderLabel:e=>i(e),renderListItem:e=>i(e,!0),defaultOpen:st.imageController.scenarioDefaultOpen,optionImageStyle:{backgroundColor:"var(--theme-fill-tsp-components-tertiary)"},onChange:t=>{e.onChange(t)},placement:"rightTop"})});class mW extends S.PN{get S(){return ei.S.Global.modules.ImageView}get options(){var e;let{generateVideoFields:t}=st.imageController;return(null==t?void 0:null===(e=t.templateId)||void 0===e?void 0:e.options)||[]}get selected(){let{generateVideoForm:e}=st.imageController;return this.options.find(t=>t.key===e.templateId)}onViewCreate(){}onViewDestroy(){}onChange(e){st.imageController.generateVideoForm.templateId=e,this.selected&&(st.imageController.generateVideoForm.prompt=this.selected.prompt)}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],mW.prototype,"S",null),(0,I.gn)([S.Fl],mW.prototype,"options",null),(0,I.gn)([S.Fl],mW.prototype,"selected",null);var mH={labelItem:"label-item--EiO5d",isColumn:"is-column--XuPfr",optionIcon:"option-icon--LAmtN"};class mG extends S.PN{onViewCreate(){if(this.props.video){let e=document.createElement("video");e.oncanplay=()=>{this.videoCanPlay=!0,e.remove()},e.src=this.props.video}}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"mediaEl",null),(0,T._)(this,"playing",!1),(0,T._)(this,"videoCanPlay",!1),(0,T._)(this,"onMouseOver",()=>{if(!(this.mediaEl instanceof HTMLVideoElement))return;let e=this.mediaEl;e.loop=!0,e.muted=!0,this.playing=!0,e.play()}),(0,T._)(this,"onMouseLeave",()=>{if(!(this.mediaEl instanceof HTMLVideoElement))return;let e=this.mediaEl;e.pause(),e.currentTime=0,this.playing=!1})}}(0,I.gn)([S.SB],mG.prototype,"playing",void 0),(0,I.gn)([S.SB],mG.prototype,"videoCanPlay",void 0);let mQ=S._Y.createComponent("LabelItem",mG,e=>{let{label:t,img:i,video:o,isColumn:a}=e.props;return(0,y.jsxs)("div",{className:q()(mH.labelItem,{[mH.isColumn]:a}),onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,children:[(0,y.jsxs)(y.Fragment,{children:[o&&e.videoCanPlay&&(0,y.jsx)("video",{src:o,ref:t=>{e.mediaEl=t},className:mH.optionIcon}),(!o||o&&!e.videoCanPlay)&&(0,y.jsx)(eH.E,{ref:t=>{e.mediaEl=t},src:(0,te.Q)(i),skeleton:!0,className:mH.optionIcon})]}),t]})}),mJ=S._Y.createComponent("VideoTemplateSelect",mW,e=>{var t;let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;let{img:i,label:o,video:a}=e;return(0,y.jsx)(mQ,{label:o,img:i||"",video:a,isColumn:t})};return(0,y.jsx)(mp,{title:e.S.selectScenario,value:null===(t=e.selected)||void 0===t?void 0:t.key,options:e.options,columns:2,renderLabel:e=>i(e),renderListItem:e=>i(e,!0),defaultOpen:st.imageController.scenarioDefaultOpen,optionImageStyle:{backgroundColor:"var(--theme-fill-tsp-components-tertiary)"},onChange:t=>{e.onChange(t)}})}),mq=S._Y.createComponent("ImageForm",pO,e=>{let{functionType:t}=st.imageController;return(0,y.jsxs)("div",{className:q()(pz.imageForm,{[pz.disabled]:st.imageController.submitLoading||st.imageController.isPreviewing}),children:["imageGenerator"===t&&(0,y.jsx)(mZ,{vm:e}),"imageAnimator"===t&&(0,y.jsx)(mX,{vm:e}),"generateImageByScenario"===t&&(0,y.jsx)(m$,{vm:e}),"template"===t&&(0,y.jsx)(m0,{vm:e})]})}),mK=(0,F.Pi)(e=>{let{models:t}=e;return(0,y.jsxs)("div",{className:pz.models,children:[(0,pt.Z)(t).slice(0,4).map((e,t)=>(0,y.jsx)("img",{src:(0,te.Q)(e),className:pz.model},t)),t.length>4&&(0,y.jsxs)("div",{className:pz.number,children:[t.length,"+"]})]})}),mY=e=>(0,y.jsx)("span",{style:{color:"var(--theme-text-quaternary)",fontWeight:400},children:e.text}),mZ=(0,F.Pi)(e=>{var t,i,o,a,n;let{vm:r}=e,s=st.imageController.generateImageFields;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(mu,{title:(0,y.jsxs)("div",{className:pz.modelTitle,children:[(0,y.jsx)("div",{className:pz.titleText,children:r.S.selectModel}),(0,y.jsx)(mK,{models:(null===(t=s.modelType.options)||void 0===t?void 0:t.map(e=>e.img||""))||[]})]}),children:(0,y.jsx)(p0,{})}),(0,y.jsx)(mu,{title:r.S.style,children:(0,y.jsx)(mb,{})}),s.aspectRatio&&(0,y.jsx)(mu,{title:r.S.ratio,children:(0,y.jsx)(mt,{})}),(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[r.S.imageCreationDesc,(0,y.jsx)(mY,{text:(null===(i=s.prompt)||void 0===i?void 0:i.optional)?r.S.optional:""})]}),required:!s.prompt.optional,children:(0,y.jsx)(p8,{})}),s.imageQuality&&(0,y.jsx)(mu,{title:r.S.generateType,children:(0,y.jsx)(pG,{})}),s.mode&&(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[r.S.imageGenerateMode,s.mode.desc&&(0,y.jsx)(pa,{color:"var(--theme-text-quaternary)",style:{marginLeft:6},title:(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("p",{children:s.mode.desc})})})]}),children:(0,y.jsx)(pR,{})}),(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[r.S.generateCount,(0,y.jsx)(mY,{text:(null===(o=s.imageCount)||void 0===o?void 0:o.optional)?r.S.optional:""})]}),children:(0,y.jsx)(pf,{})}),s.originUrl&&(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[r.S.uploadReference,(0,y.jsx)(mY,{text:(null===(a=s.originUrl)||void 0===a?void 0:a.optional)?r.S.optional:""})]}),required:!(null===(n=s.originUrl)||void 0===n?void 0:n.optional),children:(0,y.jsx)(ml,{})})]})}),mX=(0,F.Pi)(e=>{var t,i,o,a,n,r,s,l,c;let{vm:d}=e,p=st.imageController.generateVideoFields;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(mu,{title:(0,y.jsxs)("div",{className:pz.modelTitle,children:[(0,y.jsx)("div",{className:pz.titleText,children:(0,ei.x)(d.S.selectModel,{count:null===(i=p.modelType)||void 0===i?void 0:null===(t=i.options)||void 0===t?void 0:t.length})}),(0,y.jsx)(mK,{models:(null===(a=p.modelType)||void 0===a?void 0:null===(o=a.options)||void 0===o?void 0:o.map(e=>e.img||""))||[]})]}),children:(0,y.jsx)(p0,{})}),(0,y.jsx)(pP,{}),p.originUrl&&p.originTailUrl?(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[d.S.videoFrames,(0,y.jsx)(pa,{color:"var(--theme-text-quaternary)",style:{marginLeft:6},title:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:d.S.videoFrameTipsForStart}),(0,y.jsx)("p",{children:d.S.videoFrameTipsForEnd})]})})]}),children:(0,y.jsx)(pB,{})}):p.originUrl?(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[d.S.uploadReference,(0,y.jsx)(mY,{text:(null===(n=p.originUrl)||void 0===n?void 0:n.optional)?d.S.optional:""})]}),required:!(null===(r=p.originUrl)||void 0===r?void 0:r.optional),children:(0,y.jsx)(ml,{})}):(0,y.jsx)(y.Fragment,{}),(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[d.S.videoCreationDesc,(0,y.jsx)(mY,{text:(null===(s=p.prompt)||void 0===s?void 0:s.optional)?d.S.optional:""})]}),required:!(null===(l=p.originUrl)||void 0===l?void 0:l.optional),children:(0,y.jsx)(p8,{})}),p.templateId&&(0,y.jsx)(mu,{title:d.S.videoTemplateType,children:(0,y.jsx)(mJ,{})}),p.videoStyle&&(0,y.jsx)(mu,{title:d.S.videoTemplateType,children:(0,y.jsx)(mO,{})}),p.mode&&(0,y.jsx)(mu,{title:d.S.generateType,children:(0,y.jsx)(pU,{})}),p.quality&&(0,y.jsx)(mu,{title:d.S.qualitySetting,children:(0,y.jsx)(mF,{})}),p.aspectRatio&&(0,y.jsx)(mu,{title:d.S.ratio,children:(0,y.jsx)(mt,{})}),p.duration&&(0,y.jsx)(mu,{title:d.S.generateDuration,children:(0,y.jsx)(pA,{})}),p.seed&&(0,y.jsx)(mu,{title:d.S.seed,children:(0,y.jsx)(mC,{})}),p.cfgScale&&(0,y.jsx)(pC,{}),p.cameraControl&&(0,y.jsx)(mu,{title:d.S.cameraControl,children:(0,y.jsx)(pp,{})}),p.motionBucketId&&(0,y.jsx)(p3,{}),p.negativePrompt&&(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[d.S.unwantedContent,(0,y.jsx)(mY,{text:(null===(c=p.negativePrompt)||void 0===c?void 0:c.optional)?d.S.optional:""})]}),children:(0,y.jsx)(p9,{})})]})}),m$=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:pz.imageForm,children:[(0,y.jsx)(mu,{title:t.S.scenarioTitle,children:(0,y.jsx)(mh,{})}),(0,y.jsx)(mu,{title:t.S.ratio,children:(0,y.jsx)(mt,{})}),(0,y.jsx)(mu,{title:t.S.style,children:(0,y.jsx)(mb,{})}),(0,y.jsx)(mu,{title:t.S.imageCreationDesc,children:(0,y.jsx)(p8,{})}),(0,y.jsx)(mu,{title:t.S.generateCount,children:(0,y.jsx)(pf,{})})]})})}),m0=(0,F.Pi)(e=>{var t;let{vm:i}=e,o=st.imageController.templateFields;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:pz.imageForm,children:[(0,y.jsx)(mu,{title:i.S.templateTitle,children:(0,y.jsx)(mS,{})}),o.originUrl&&o.extraImageUrl?(0,y.jsx)(mu,{title:i.S.imageFrames,children:(0,y.jsx)(mL,{})}):o.originUrl?(0,y.jsx)(mu,{title:i.uploadDesc,children:(0,y.jsx)(ml,{})}):null,o.upscaleConfig&&(0,y.jsx)(mu,{title:i.S.upscaleDesc,children:(0,y.jsx)(mE,{})}),o.prompt&&(0,y.jsx)(mu,{title:(0,y.jsxs)(y.Fragment,{children:[i.templatePromptTitle,(0,y.jsx)(mY,{text:(null===(t=o.prompt)||void 0===t?void 0:t.optional)?i.S.optional:""})]}),children:(0,y.jsx)(p8,{})}),o.templateAspectRatio&&(0,y.jsx)(mu,{title:i.S.templateRatio,children:(0,y.jsx)(mr,{})}),o.imageStyle&&(0,y.jsx)(mu,{title:i.S.style,children:(0,y.jsx)(mb,{columns:"profile_photo"===st.imageController.templateForm.template?3:void 0})})]})})});var m1={imageDragger:"image-dragger--n6dTH",uploader:"uploader--gMFWo",placeholder:"placeholder--u3yVO",brand:"brand--XZoyR"};class m2 extends S.PN{get S(){return ei.S.Global.modules.ImageView.ImageDragger}get desc(){return ei.S.Global.modules.ImageView.ImageDragger}get frames(){let{functionType:e,generateImageFields:t,generateImageForm:i,generateVideoFields:o,generateVideoForm:a,templateFields:n,templateForm:r,imageUploadManager:s}=st.imageController,l=[];if("imageGenerator"===e){if(!t.originUrl)return[];l.push({desc:this.S.dragNotice,overDesc:this.S.uploadNotice,onFileChange:async e=>{if(!e){i.originUrl="";return}let t=s.getImageTaskId("imageGenerator","originUrl");s.handleDropFile(t,e,e=>{i.originUrl=e})}})}if("imageAnimator"===e){let e=o.originUrl&&o.originTailUrl;o.originUrl&&l.push({desc:e?(0,y.jsx)(aN.Z,{components:{span:e=>(0,y.jsx)("span",{className:m1.brand,children:e})},S:(0,ei.x)(this.S.dragNoticeWithSource,{source:this.S.klingFrameStart})}):this.S.dragNotice,overDesc:e?(0,y.jsx)(aN.Z,{components:{span:e=>(0,y.jsx)("span",{className:m1.brand,children:e})},S:(0,ei.x)(this.S.uploadNoticeWithSource,{source:this.S.klingFrameStart})}):this.S.uploadNotice,onFileChange:e=>{if(!e){a.originUrl="";return}let t=s.getImageTaskId("imageAnimator","originUrl");s.handleDropFile(t,e,e=>{a.originUrl=e})}}),o.originTailUrl&&l.push({desc:e?(0,y.jsx)(aN.Z,{components:{span:e=>(0,y.jsx)("span",{className:m1.brand,children:e})},S:(0,ei.x)(this.S.dragNoticeWithSource,{source:this.S.klingFrameEnd})}):this.S.dragNotice,overDesc:e?(0,y.jsx)(aN.Z,{components:{span:e=>(0,y.jsx)("span",{className:m1.brand,children:e})},S:(0,ei.x)(this.S.uploadNoticeWithSource,{source:this.S.klingFrameEnd})}):this.S.uploadNotice,onFileChange:e=>{let t=s.getImageTaskId("imageAnimator","originTailUrl");if(!e){a.originTailUrl="",s.cancel(t);return}s.handleDropFile(t,e,e=>{a.originTailUrl=e})}})}if("template"===e){let e=n.originUrl&&n.extraImageUrl;n.originUrl&&l.push({desc:e?(0,y.jsx)(aN.Z,{components:{span:e=>(0,y.jsx)("span",{className:m1.brand,children:e})},S:(0,ei.x)(this.S.dragNoticeWithSource,{source:this.S.templateStart})}):this.S.dragNotice,overDesc:e?(0,y.jsx)(aN.Z,{components:{span:e=>(0,y.jsx)("span",{className:m1.brand,children:e})},S:(0,ei.x)(this.S.uploadNoticeWithSource,{source:this.S.templateStart})}):this.S.uploadNotice,onFileChange:e=>{if(!e){r.originUrl="";return}let t=s.getImageTaskId("template","originUrl");s.handleDropFile(t,e,e=>{r.originUrl=e})}}),n.extraImageUrl&&l.push({desc:e?(0,y.jsx)(aN.Z,{components:{span:e=>(0,y.jsx)("span",{className:m1.brand,children:e})},S:(0,ei.x)(this.S.dragNoticeWithSource,{source:this.S.templateEnd})}):this.S.dragNotice,overDesc:e?(0,y.jsx)(aN.Z,{components:{span:e=>(0,y.jsx)("span",{className:m1.brand,children:e})},S:(0,ei.x)(this.S.uploadNoticeWithSource,{source:this.S.templateEnd})}):this.S.uploadNotice,onFileChange:e=>{if(!e){r.extraImageUrl="";return}let t=s.getImageTaskId("template","extraImageUrl");s.handleDropFile(t,e,e=>{r.extraImageUrl=e})}})}return l}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],m2.prototype,"S",null),(0,I.gn)([S.Fl],m2.prototype,"desc",null),(0,I.gn)([S.Fl],m2.prototype,"frames",null);let m3=S._Y.createComponent("ImageDragger",m2,e=>e.frames.length?(0,y.jsx)("div",{className:m1.imageDragger,children:e.frames.map((t,i)=>(0,y.jsx)(pI,{desc:t.desc,overDesc:t.overDesc,onFileChange:i=>{var o,a;null===(o=(a=e.props).onFileChange)||void 0===o||o.call(a),t.onFileChange(i)},className:m1.uploader,placeholderClassName:m1.placeholder,allowEventPropagation:!0,placeholderIcon:(0,y.jsx)(pN,{size:24,color:"currentColor"})},i))}):null);class m6 extends S.PN{onViewCreate(){let e=this.dragDom,t=this.containerDom;if(!e||!t)return;let i=!1,o=0,a=0,n=e=>{i=!0,o=e.touches[0].clientY,a=function(){let e=window.getComputedStyle(t);return new WebKitCSSMatrix(e.transform).m42}(),st.imageController.drawerStyles.transition="none"},r=e=>{let t=e.touches[0].clientY-o,i=Math.min(Math.max(a+t,0),window.innerHeight-150);st.imageController.drawerStyles.transform="translateY(".concat(i,"px)")},s=e=>{if(i=!1,st.imageController.drawerStyles.transition="transform 0.3s ease-out",e.changedTouches.length>0){let t=e.changedTouches[0].clientY-o;if(t<-50){st.imageController.setDrawerPosition(!0);return}if(t>50){st.imageController.setDrawerPosition(!1);return}}st.imageController.resetDrawerPosition()},l=()=>{i||this.handleToggleExpand()};e.addEventListener("touchstart",n),e.addEventListener("touchmove",r),e.addEventListener("touchend",s),e.addEventListener("click",l),this.disposableCollection.push({dispose:()=>{e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",r),e.removeEventListener("touchend",s),e.removeEventListener("click",l)}})}handleToggleExpand(){st.imageController.setDrawerPosition(!st.imageController.drawerExpanded)}onViewDestroy(){this.disposableCollection.dispose()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"dragDom",null),(0,T._)(this,"containerDom",null),(0,T._)(this,"disposableCollection",new dU.K)}}let m5=S._Y.createComponent("ExpandDrawer",m6,e=>{let{content:t}=e.props;return(0,y.jsxs)("div",{style:{...st.imageController.drawerStyles},className:q()("expand-drawer--LsL5I",{"expand--ZqXFW":st.imageController.drawerExpanded}),ref:t=>{e.containerDom=t},children:[(0,y.jsx)("div",{className:"drag--aomUP",ref:t=>{e.dragDom=t},children:(0,y.jsx)("div",{className:"drag-bar--_HVJV"})}),(0,y.jsx)("div",{className:"content--aVWm9",children:t})]})});var m4={topBottomLayout:"top-bottom-layout--Kchzu",isMobile:"is-mobile--h6bBl",form:"form--tgUVa",submitWrapper:"submit-wrapper--KMHnY",main:"main--YhaFo",content:"content--rj5OX",header:"header--l7n7Z",right:"right--Twb85",formWrapper:"form-wrapper--sjcf8",leftRightLayout:"left-right-layout--YqIXS",left:"left--QD1WR",headerLeft:"header-left--j3q5X",headerRight:"header-right--dyD3q"};class m9 extends S.PN{get subTitle(){return st.imageController.functionType?({imageGenerator:ei.S.Global.modules.ImageView.aiDraw,imageAnimator:ei.S.Global.modules.ImageView.aiVideo,generateImageByScenario:ei.S.Global.modules.ImageView.drawByTemplate,editImage:ei.S.Global.modules.ImageView.editImage,template:ei.S.Global.modules.ImageView.template,realtimeGenerateImageByText:ei.S.Global.modules.ImageView.realtimeDraw,realtimeGenerateImageByCanvas:ei.S.Global.modules.ImageView.realtimeCanvas})[st.imageController.functionType]:""}get isIpad(){return w.m.getIsIpad()}get S(){return ei.S.Global.modules.Artist.ArtistDetail}handleBackHome(){st.imageController.back()}onViewCreate(){(st.imageController.isMobile||st.imageController.isIpad)&&(this.mobileInnerHeight=window.innerHeight)}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"mobileInnerHeight",0),(0,T._)(this,"dragging",!1),(0,T._)(this,"handleDrag",e=>{this.props.canDragFile&&("dragenter"===e.type||"dragover"===e.type?this.dragging=!0:"dragleave"===e.type&&(this.dragging=!1),e.preventDefault(),e.stopPropagation())})}}(0,I.gn)([S.SB],m9.prototype,"mobileInnerHeight",void 0),(0,I.gn)([S.SB],m9.prototype,"dragging",void 0),(0,I.gn)([S.Fl],m9.prototype,"subTitle",null),(0,I.gn)([S.Fl],m9.prototype,"isIpad",null),(0,I.gn)([S.Fl],m9.prototype,"S",null);let m7=S._Y.createComponent("ImageDetailLayout",m9,e=>{let{mode:t,actions:i,content:o,formNode:a,submitNode:n}=e.props;return st.imageController.isMobile||"topBottom"===t?(0,y.jsx)(m8,{vm:e,actions:i,content:o,formNode:a,submitNode:n}):(0,y.jsx)(he,{vm:e,actions:i,content:o,formNode:a,submitNode:n})}),m8=(0,F.Pi)(e=>{let{vm:t}=e,{actions:i,content:o,formNode:a,submitNode:n}=t.props;return(0,y.jsxs)("div",{className:q()(m4.topBottomLayout,{[m4.isMobile]:st.imageController.isMobile}),style:t.mobileInnerHeight?{height:t.mobileInnerHeight}:{},children:[(0,y.jsx)(ht,{vm:t,actions:i,submitNode:n}),(0,y.jsxs)("main",{className:m4.main,children:[(0,y.jsx)(hn,{content:o}),(0,y.jsx)(ha,{formNode:a,submitNode:n,vm:t})]})]})}),he=(0,F.Pi)(e=>{let{vm:t}=e,{content:i,formNode:o,submitNode:a}=t.props;return(0,y.jsxs)("div",{className:m4.leftRightLayout,style:t.mobileInnerHeight?{height:t.mobileInnerHeight}:{},onDragEnter:e=>{t.handleDrag(e)},onDragLeave:e=>{t.handleDrag(e)},onDragOver:e=>{t.handleDrag(e)},onDrop:e=>{e.stopPropagation(),e.preventDefault(),t.dragging=!1},children:[(0,y.jsxs)("div",{className:m4.left,children:[(0,y.jsx)(hi,{vm:t}),(0,y.jsx)(ha,{formNode:o,submitNode:a,vm:t}),t.dragging&&(0,y.jsx)(m3,{onFileChange:()=>{t.dragging=!1}})]}),(0,y.jsxs)("div",{className:m4.right,children:[(0,y.jsx)(ho,{vm:t}),(0,y.jsx)(hn,{content:i})]})]})}),ht=(0,F.Pi)(e=>{let{vm:t,actions:i,submitNode:o}=e,a=st.imageController.usageModule;return(0,y.jsxs)("div",{className:m4.header,children:[(0,y.jsx)(hi,{vm:t}),(0,y.jsxs)("div",{className:m4.right,children:[i,("realtimeGenerateImageByCanvas"===st.imageController.functionType||"realtimeGenerateImageByText"===st.imageController.functionType)&&o,eD.userController.isLogin&&a&&(0,y.jsx)(eW.x,{usageModule:a,isNewStyle:!0,feature:"imageAnimator"===st.imageController.routeKey?"videoTool":""}),(0,y.jsx)(sG.Z,{usageModule:a,onProfileShow:()=>{},avatarSize:32,renderUsage:a?()=>null:void 0})]})]})}),hi=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsx)("div",{className:m4.headerLeft,children:(0,y.jsx)(sY,{})})}),ho=(0,F.Pi)(e=>{let{vm:t}=e,{actions:i}=t.props,o=st.imageController.usageModule;return(0,y.jsxs)("div",{className:m4.headerRight,children:[i,eD.userController.isLogin&&o&&(0,y.jsx)(eW.x,{usageModule:o,isNewStyle:!0,feature:"imageAnimator"===st.imageController.routeKey?"videoTool":""}),(0,y.jsx)(sG.Z,{usageModule:o,onProfileShow:()=>{},avatarSize:32,renderUsage:o?()=>null:void 0})]})}),ha=(0,F.Pi)(e=>{let{formNode:t,submitNode:i}=e;return t?st.imageController.isMobile?(0,y.jsxs)("div",{className:q()(m4.form),children:[(0,y.jsx)(m5,{content:t}),(0,y.jsx)("div",{className:m4.submitWrapper,children:i})]}):(0,y.jsxs)(aw.x,{className:q()(m4.form),children:[(0,y.jsx)("div",{className:m4.formWrapper,children:t}),(0,y.jsx)("div",{className:m4.submitWrapper,children:i})]}):null}),hn=(0,F.Pi)(e=>{let{content:t}=e;return(0,y.jsx)("div",{className:m4.content,children:t})});var hr={carouselLoading:"carousel-loading--TaVxY",imageWrapper:"image-wrapper--tdutf",loading:"loading--s07mb",thumbnailList:"thumbnail-list--iHBbK",thumbnail:"thumbnail--tgvPO"};class hs extends S.PN{get aspectRatio(){let e=st.imageController.generateImageForm.aspectRatio;return e&&"1:1"!==e?"16:9"===e?16/9:"3:4"===e?3/4:"4:3"===e?4/3:"4:5"===e?.8:"5:2"===e?2.5:"9:16"===e?9/16:"2:3"===e?2/3:"3:2"===e?1.5:1:1}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],hs.prototype,"aspectRatio",null);let hl=S._Y.createComponent("CarouselLoading",hs,e=>{let t=Array(e.props.num).fill(1);return(0,y.jsxs)("div",{className:q()(hr.carouselLoading,e.props.className),style:{aspectRatio:e.aspectRatio,height:"min(100%, calc((".concat(st.imageController.isMobile?"100vw":"100vw - 320px",") / ").concat(e.aspectRatio,"))")},children:[(0,y.jsx)("div",{className:hr.imageWrapper,children:(0,y.jsx)("div",{className:hr.loading,children:(0,y.jsx)(lm,{type:"image",full:!0,lottie:!0,needTime:e.props.needTime})})}),t.length>1?(0,y.jsx)("div",{className:hr.thumbnailList,children:t.map((e,t)=>(0,y.jsx)("div",{className:hr.thumbnail},t))}):null]})});var hc=i(48994);class hd extends S.PN{get S(){return ei.S.Global.modules.Artist.GenerateFail}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"loading",!1)}}(0,I.gn)([S.SB],hd.prototype,"loading",void 0),(0,I.gn)([S.Fl],hd.prototype,"S",null);let hp=S._Y.createComponent("GenerateFail",hd,e=>(0,y.jsxs)("div",{className:q()("generate-fail--X3LiM",e.props.className),children:[(0,y.jsx)(sm.a,{color:"var(--theme-icon-quaternary)",size:32}),(0,y.jsx)("span",{className:"fail-notice--V5meP",children:e.props.failNotice}),(0,y.jsxs)("div",{className:"btn-wrapper--fWG8n",children:[(0,y.jsx)(eO.z,{type:"outline",loading:e.loading,size:"medium",icon:(0,y.jsx)(hc.D,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:async()=>{e.loading||(e.loading=!0,await e.props.onRetry(),e.loading=!1)},children:e.S.retry}),(0,y.jsx)(eO.z,{type:"outline",size:"medium",icon:(0,y.jsx)(ez,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank")},children:e.S.contact})]})]}));class hm extends S.PN{get S(){return ei.S.Global.modules.Artist.GenerateImage}get generating(){return st.imageController.submitLoading}get imageStyle(){if(!this.zoomPanManager)return{};let{canDrag:e,isDragging:t,scale:i,translateX:o,translateY:a}=this.zoomPanManager;return{cursor:e?t?"grabbing":"grab":"default",transform:"scale(".concat(i,") translate(").concat(o,"px, ").concat(a,"px)")}}get imageCount(){return"imageGenerator"===st.imageController.functionType?st.imageController.generateImageForm.imageCount:"generateImageByScenario"===st.imageController.functionType?st.imageController.generateImageByScenarioForm.imageCount:(st.imageController.functionType,1)}async handleSubmit(){if(this.loading)return;this.loading=!0,e9.W.createUserBehaviorEvent({eventName:"image_tool_generate",extData:{function:st.imageController.functionType,modelType:"imageGenerator"===st.imageController.functionType?st.imageController.generateImageForm.modelType:"imageAnimator"===st.imageController.functionType?st.imageController.generateImageByScenarioForm.modelType:void 0,imageScene:"generateImageByScenario"===st.imageController.functionType?st.imageController.generateImageByScenarioForm.imageScene:void 0}}),this.isFail=!1;let e=await st.imageController.handleSubmit();this.isFail=!e,this.loading=!1}onViewCreate(){this.zoomPanManager=new dz({})}onViewDestroy(){var e;null===(e=this.zoomPanManager)||void 0===e||e.destroy()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"zoomPanManager",null),(0,T._)(this,"isFail",!1),(0,T._)(this,"loading",!1)}}(0,I.gn)([S.SB],hm.prototype,"zoomPanManager",void 0),(0,I.gn)([S.SB],hm.prototype,"isFail",void 0),(0,I.gn)([S.SB],hm.prototype,"loading",void 0),(0,I.gn)([S.Fl],hm.prototype,"S",null),(0,I.gn)([S.Fl],hm.prototype,"generating",null),(0,I.gn)([S.Fl],hm.prototype,"imageStyle",null),(0,I.gn)([S.Fl],hm.prototype,"imageCount",null);let hh=S._Y.createComponent("GenerateImage",hm,e=>(0,y.jsx)(m7,{content:(0,y.jsx)("div",{className:"generate-image--GNAlh",[eh.$A]:1,children:e.generating?(0,y.jsx)(hl,{num:e.imageCount,needTime:st.imageController.expectedTime}):e.isFail?(0,y.jsx)(hp,{onRetry:()=>e.handleSubmit(),failNotice:e.S.failNotice}):st.imageController.generateImageThumbnailUrls.length?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(pe,{imageStyle:e.imageStyle,getImgContainer:t=>{var i;null===(i=e.zoomPanManager)||void 0===i||i.attach(t)}})}):(0,y.jsx)(dx,{})}),canDragFile:!0,formNode:(0,y.jsx)(mq,{}),submitNode:(0,y.jsx)(s9,{onSubmit:async()=>e.handleSubmit()}),actions:(0,y.jsx)(li,{}),mode:"leftRight"}));var hg={video:"video--NVagz",videoWrapper:"video-wrapper--U3XYc"};class hu extends S.PN{get generating(){return st.imageController.submitLoading}get S(){return ei.S.Global.modules.Artist.GenerateVideo}async handleSubmit(){if(this.loading)return;this.loading=!0,e9.W.createUserBehaviorEvent({eventName:"image_tool_generate",extData:{function:st.imageController.functionType,modelType:st.imageController.generateVideoForm.modelType}}),this.isFail=!1;let e=await st.imageController.handleSubmit();this.isFail=!e,this.loading=!1}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"isFail",!1),(0,T._)(this,"loading",!1)}}(0,I.gn)([S.SB],hu.prototype,"isFail",void 0),(0,I.gn)([S.SB],hu.prototype,"loading",void 0),(0,I.gn)([S.Fl],hu.prototype,"generating",null),(0,I.gn)([S.Fl],hu.prototype,"S",null);let hv=S._Y.createComponent("GenerateVideo",hu,e=>(0,y.jsx)(m7,{formNode:(0,y.jsx)(mq,{}),content:e.generating?(0,y.jsx)(lm,{type:"video",full:!0,lottie:!0}):e.isFail?(0,y.jsx)(hp,{onRetry:()=>e.handleSubmit(),failNotice:e.S.failNotice}):st.imageController.generateVideoUrl?(0,y.jsxs)("div",{className:hg.videoWrapper,children:[(0,y.jsx)("video",{onLoadedMetadata:function(e){e.currentTarget.currentTime=.1},preload:"metadata",controls:!0,controlsList:"nodownload noplaybackrate",disablePictureInPicture:!0,src:st.imageController.generateVideoUrl,className:hg.video,onError:e=>{var t,i;let o=e.target,a=(null===(t=o.error)||void 0===t?void 0:t.message)||"Video loading failed";st.imageController.sendEvent("video_load_fail",{videoUrl:st.imageController.generateVideoUrl,message:a,code:(null===(i=o.error)||void 0===i?void 0:i.code)?String(o.error.code):"none"})}}),(0,y.jsx)(d9,{})]}):(0,y.jsx)(dx,{}),submitNode:(0,y.jsx)(s9,{onSubmit:async()=>{await e.handleSubmit()}}),canDragFile:!0,mode:"leftRight",actions:(0,y.jsx)(li,{})}));class hC extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var hx={realtimeForm:"realtime-form--uTKT3",styleSelect:"style-select--vbUhO",cfgBtn:"cfg-btn--Yph8Y",inputWrapper:"input-wrapper--iVNU5",input:"input--hWihT",loading:"loading--ZipKr",cfgWrapper:"cfg-wrapper--R_WPk"};class hy extends S.PN{get S(){return ei.S.Global.modules.Artist.RealtimeForm}get value(){let{functionType:e}=st.imageController;return"realtimeGenerateImageByCanvas"===e?st.imageController.realtimeGenerateByCanvasForm.prompt:"realtimeGenerateImageByText"===e?st.imageController.realtimeGenerateByTextForm.prompt:""}handleChangePrompt(e){var t,i;let{functionType:o}=st.imageController;"realtimeGenerateImageByCanvas"===o&&(st.imageController.realtimeGenerateByCanvasForm.prompt=e),"realtimeGenerateImageByText"===o&&(st.imageController.realtimeGenerateByTextForm.prompt=e),null===(t=(i=this.props).onChange)||void 0===t||t.call(i)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],hy.prototype,"someState",void 0),(0,I.gn)([S.Fl],hy.prototype,"S",null),(0,I.gn)([S.Fl],hy.prototype,"value",null);let hb=S._Y.createComponent("RealtimeForm",hy,e=>{let{className:t,loading:i}=e.props;return(0,y.jsxs)("div",{className:q()(hx.realtimeForm,t),children:[(0,y.jsx)("div",{className:q()(hx.item,hx.styleSelect),children:(0,y.jsx)(mb,{onChange:()=>{var t,i;null===(t=(i=e.props).onChange)||void 0===t||t.call(i)},size:"small"})}),"realtimeGenerateImageByCanvas"===st.imageController.functionType&&(0,y.jsx)("div",{className:hx.item,children:(0,y.jsx)(tK.x,{trigger:"click",content:(0,y.jsx)("div",{className:hx.cfgWrapper,children:(0,y.jsx)(pC,{onChange:()=>{var t,i;null===(t=(i=e.props).onChange)||void 0===t||t.call(i)},cfgScaleDesc:e.S.cfgScaleDesc,cfgIndicator:{tip1:e.S.CfgScaleTip1}})}),children:(0,y.jsxs)(eO.z,{type:"outline",size:"overMedium",className:hx.cfgBtn,children:[(0,y.jsx)(dP,{size:20,color:"var(--theme-icon-primary)"}),e.S.CfgScale]})})}),(0,y.jsx)("div",{className:q()(hx.item,hx.inputWrapper),children:(0,y.jsx)(O.I,{value:e.value,placeholder:e.S.placeholder,originInputProps:{onInput:t=>{e.handleChangePrompt(t.target.value)}},className:hx.input})}),(0,y.jsx)("div",{className:hx.loading,children:i&&(0,y.jsx)(eC.g,{size:20,color:"var(--theme-icon-quaternary)"})})]})});var hf={realTimeSketch:"real-time-sketch--pJ3Xz",toolWrapper:"tool-wrapper--H885a",main:"main--naqIz",content:"content--ibsZn",part:"part--RaMJ5",inner:"inner--NtsQG",title:"title--c7di1",sketch:"sketch--Uwsm4",canvasWrapper:"canvas-wrapper--kAS1b",canvas:"canvas--JWArb",empty:"empty--LSmVD",preview:"preview--WHDpi",imageWrapper:"image-wrapper--OHRQm",imageRouteWrapper:"image-route-wrapper--Or8Vr",retry:"retry--f3nGT",icon:"icon--GwiuQ",refresh:"refresh--OOaZJ",duration:"duration--U4dvt",image:"image--weFlb",realtimeForm:"realtime-form--LYSnr",isSmall:"is-small--NJcNV",loading:"loading--yZOt9",box:"box--B81ZO"};class hw extends S.PN{get S(){return ei.S.Global.modules.Artist.RealTimeSketch}get partStyle(){return{width:this.contentSize,height:this.contentSize,opacity:this.contentSize?1:0}}handleRetry(){this.drawThrottleCall()}async handleSubmit(){if(this.generating)return;e9.W.createUserBehaviorEvent({eventName:"image_tool_enhance",extData:{function:st.imageController.functionType}}),this.isFail=!1,this.generating=!0;let e=await st.imageController.handleSubmit();this.generating=!1,this.isFail=!e}onViewCreate(){this.imageToolManager=new dV({lineColor:"#000",mouseCircleColor:"#eee",onDrawEnd:this.drawThrottleCall,showBrushColorPicker:!0,showBgColorPicker:!0,bgColor:N.C.isDark?"#252528":"#f5f5f5",onChangeBg:this.drawThrottleCall,onDrawStart:()=>{this.showEmpty=!1}}),this.contentDom&&(this.resizeThrottleCall(),eo.I.getProxy(this,window).addEventListener("resize",this.resizeThrottleCall))}onViewDestroy(){var e;null===(e=this.imageToolManager)||void 0===e||e.destroy(),this.imageToolManager=null,eo.I.getProxy(this,window).removeAllListeners()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"sketchDom",null),(0,T._)(this,"contentDom",null),(0,T._)(this,"inited",!1),(0,T._)(this,"imageToolManager",null),(0,T._)(this,"isSmall",!1),(0,T._)(this,"contentSize",0),(0,T._)(this,"generating",!1),(0,T._)(this,"isFail",!1),(0,T._)(this,"loading",!1),(0,T._)(this,"duration",0),(0,T._)(this,"showEmpty",!0),(0,T._)(this,"durationHideTimer",null),(0,T._)(this,"resizeThrottleCall",(0,r4.Z)(()=>{if(this.contentDom){window.innerWidth<640?this.isSmall=!0:this.isSmall=!1;let{height:e}=this.contentDom.getBoundingClientRect(),t=this.isSmall?window.innerWidth-56-16-32-6:(window.innerWidth-240)/2-6,i=e-26;this.contentSize=this.isSmall?t:t>i?i:t,!this.inited&&this.sketchDom&&(this.inited=!0,setTimeout(()=>{if(this.sketchDom){var e;null===(e=this.imageToolManager)||void 0===e||e.initCanvas(this.sketchDom)}}))}},150,{trailing:!0})),(0,T._)(this,"drawThrottleCall",(0,r4.Z)(()=>{if(this.imageToolManager){var e;let t=null===(e=this.imageToolManager)||void 0===e?void 0:e.exportMask({width:512,height:512,stayColor:!0});(0!==this.imageToolManager.history.length||st.imageController.realtimeGenerateByCanvasForm.prompt.trim())&&(st.imageController.realtimeGenerateByCanvasForm.imgBase64=t,this.loading=!0,this.durationHideTimer&&(clearTimeout(this.durationHideTimer),this.durationHideTimer=null),st.imageController.triggerFormChange().then(e=>{e&&(this.loading=!1,this.duration=e.costTime,this.durationHideTimer=setTimeout(()=>{this.duration=0},3e3))}).catch(e=>{this.loading=!1,ef.M.error(w.m.formatErrorMsg(e))}))}},300,{trailing:!0}))}}(0,I.gn)([S.SB],hw.prototype,"imageToolManager",void 0),(0,I.gn)([S.SB],hw.prototype,"isSmall",void 0),(0,I.gn)([S.SB],hw.prototype,"contentSize",void 0),(0,I.gn)([S.SB],hw.prototype,"generating",void 0),(0,I.gn)([S.SB],hw.prototype,"isFail",void 0),(0,I.gn)([S.SB],hw.prototype,"loading",void 0),(0,I.gn)([S.SB],hw.prototype,"duration",void 0),(0,I.gn)([S.SB],hw.prototype,"showEmpty",void 0),(0,I.gn)([S.Fl],hw.prototype,"S",null),(0,I.gn)([S.Fl],hw.prototype,"partStyle",null);let hS=S._Y.createComponent("RealTimeSketch",hw,e=>{var t;return"realtimeGenerateImageByCanvas"!==st.imageController.functionType?null:(0,y.jsx)(m7,{mode:"topBottom",content:(0,y.jsxs)("div",{className:q()(hf.realTimeSketch,{[hf.isSmall]:e.isSmall}),style:{opacity:e.inited?1:0},children:[e.imageToolManager&&(0,y.jsx)("div",{className:hf.toolWrapper,children:(0,y.jsx)(cq,{manager:e.imageToolManager})}),(0,y.jsxs)("div",{className:hf.main,children:[(0,y.jsxs)("div",{className:hf.content,ref:t=>{t&&(e.contentDom=t)},children:[(0,y.jsx)("div",{className:q()(hf.part,hf.sketch),children:(0,y.jsxs)("div",{className:hf.inner,children:[(0,y.jsx)("div",{className:hf.title,children:e.S.sketchTitle}),(0,y.jsxs)("div",{className:hf.canvasWrapper,style:{...(null===(t=e.imageToolManager)||void 0===t?void 0:t.bgColor)?{backgroundColor:e.imageToolManager.bgColor}:{}},children:[(0,y.jsx)("div",{style:{...e.partStyle,cursor:"crosshair"},className:hf.canvas,ref:t=>{e.sketchDom=t}}),e.showEmpty&&(0,y.jsx)("div",{className:hf.empty,children:e.S.empty})]})]})}),(0,y.jsx)("div",{className:q()(hf.part,hf.preview),[eh.$A]:1,children:(0,y.jsxs)("div",{className:hf.inner,children:[(0,y.jsxs)("div",{className:hf.title,children:[e.S.previewTitle,(0,y.jsx)("div",{className:hf.retry,onClick:()=>{e.handleRetry()},children:(0,y.jsx)(hc.D,{className:q()(hf.icon,{[hf.refresh]:e.loading}),size:16,color:"var(--theme-icon-tertiary)"})})]}),(0,y.jsxs)("div",{style:{...e.partStyle},className:hf.imageWrapper,children:[st.imageController.realTimeByCanvasImageUrl?(0,y.jsx)(dS,{className:hf.image,src:st.imageController.realTimeByCanvasImageUrl}):(0,y.jsx)(dx,{}),st.imageController.realTimeByCanvasImageUrl&&(0,y.jsx)("div",{className:hf.imageRouteWrapper,children:(0,y.jsx)(c3,{hasBg:!0,imageUrl:st.imageController.realTimeByCanvasImageUrl,isLight:!0})}),e.duration?(0,y.jsxs)("div",{className:hf.duration,children:[e.S.duration,e.duration," s"]}):null]})]})})]}),(0,y.jsx)(hb,{className:hf.realtimeForm,onChange:()=>{e.drawThrottleCall()},loading:e.loading})]}),e.generating&&(0,y.jsx)("div",{className:hf.loading,children:(0,y.jsx)("div",{className:hf.box,children:(0,y.jsx)(lm,{type:"imageSimple",light:!0,needTime:st.imageController.expectedTime})})})]}),submitNode:(0,y.jsx)(s9,{onSubmit:async()=>e.handleSubmit(),size:st.imageController.isMobile?"medium":"overMedium"}),actions:(0,y.jsx)(li,{})})});var hA={realTimeTextToImage:"real-time-text-to-image--vQahL",operateWrapper:"operate-wrapper--SBcVO",realtimeForm:"realtime-form--ewv8p",duration:"duration--Ig4_m",zoomPanImage:"zoom-pan-image--_5Mxx",loading:"loading--k8L1W",box:"box--DQ2gZ"};class hj extends S.PN{get S(){return ei.S.Global.modules.Artist.RealTimeTextToImage}handleRetry(){this.drawThrottleCall()}onViewCreate(){this.zoomPanManager=new dz({hideCompare:!0})}async handleSubmit(){if(this.generating)return;this.generating=!0,e9.W.createUserBehaviorEvent({eventName:"image_tool_enhance",extData:{function:st.imageController.functionType}}),this.isFail=!1;let e=await st.imageController.handleSubmit();this.generating=!1,this.isFail=!e}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"generating",!1),(0,T._)(this,"isFail",!1),(0,T._)(this,"loading",!1),(0,T._)(this,"duration",0),(0,T._)(this,"zoomPanManager",null),(0,T._)(this,"drawThrottleCall",(0,r4.Z)(()=>{st.imageController.realtimeGenerateByTextForm.prompt&&(this.loading=!0,this.durationHideTimer&&(clearTimeout(this.durationHideTimer),this.durationHideTimer=null),st.imageController.triggerFormChange().then(e=>{e&&(this.loading=!1,this.duration=e.costTime,this.durationHideTimer=setTimeout(()=>{this.duration=0},3e3))}).catch(e=>{this.loading=!1,ef.M.error(w.m.formatErrorMsg(e))}))},300,{trailing:!0})),(0,T._)(this,"durationHideTimer",null)}}(0,I.gn)([S.SB],hj.prototype,"generating",void 0),(0,I.gn)([S.SB],hj.prototype,"isFail",void 0),(0,I.gn)([S.SB],hj.prototype,"loading",void 0),(0,I.gn)([S.SB],hj.prototype,"duration",void 0),(0,I.gn)([S.SB],hj.prototype,"zoomPanManager",void 0),(0,I.gn)([S.Fl],hj.prototype,"S",null);let hk=S._Y.createComponent("RealTimeTextToImage",hj,e=>"realtimeGenerateImageByText"===st.imageController.functionType&&e.zoomPanManager?(0,y.jsx)(m7,{mode:"topBottom",content:(0,y.jsxs)("div",{className:hA.realTimeTextToImage,[eh.$A]:1,children:[(0,y.jsx)(dk,{manager:e.zoomPanManager,url:st.imageController.realTimeByTextImageUrl,showImageToolbar:!0,className:hA.zoomPanImage,renderExtra:()=>e.duration?(0,y.jsxs)("div",{className:hA.duration,children:[e.S.duration,e.duration," s"]}):null}),(0,y.jsx)("div",{className:hA.operateWrapper,children:(0,y.jsx)(hb,{className:hA.realtimeForm,onChange:()=>{e.drawThrottleCall()},loading:e.loading})}),e.generating&&(0,y.jsx)("div",{className:hA.loading,children:(0,y.jsx)("div",{className:hA.box,children:(0,y.jsx)(lm,{type:"imageSimple",light:!0,needTime:st.imageController.expectedTime})})})]}),submitNode:(0,y.jsx)(s9,{onSubmit:async()=>e.handleSubmit(),size:st.imageController.isMobile?"medium":"overMedium"}),actions:(0,y.jsx)(li,{})}):null);var hN={upscaleImage:"upscale-image--mptyF",failNotice:"fail-notice--ORqxT",loading:"loading--iIIZz",resultWrapper:"result-wrapper--DjQ4v",actions:"actions--RizTd",action:"action--UdeFq",isMobile:"is-mobile--aM7Jr",imageWrapper:"image-wrapper--ZIK6O",upgrade:"upgrade--INJsV"};class h_ extends S.PN{get S(){return ei.S.Global.modules.Artist.UpscaleImage}get imageUrl(){return st.imageController.generateImageThumbnailUrls[0]||st.imageController.templateForm.originUrl}async handleSubmit(){if(this.generating)return;st.imageController.sendEvent("image_tool_generate",{key:"template",template:st.imageController.templateForm.template}),this.isFail=!1,this.generating=!0;let e=await st.imageController.handleSubmit();this.isFail=!e,this.generating=!1}onBeforeMount(){if(st.imageController.isMobile&&window){let e=window.innerWidth/this.mobileZoomBase;st.imageController.upscaleManager.mobileRate=e}}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"mobileZoomBase",800),(0,T._)(this,"generating",!1),(0,T._)(this,"isFail",!1),(0,T._)(this,"sketchDom",null)}}(0,I.gn)([S.SB],h_.prototype,"generating",void 0),(0,I.gn)([S.SB],h_.prototype,"isFail",void 0),(0,I.gn)([S.SB],h_.prototype,"sketchDom",void 0),(0,I.gn)([S.Fl],h_.prototype,"S",null),(0,I.gn)([S.Fl],h_.prototype,"imageUrl",null);var hT={upscaleTool:"upscale-tool--JkTlg",hide:"hide--wqxmF",wrapper:"wrapper--buBzU",loading:"loading--SdeL7",disabled:"disabled--IIdbq",upscaleBox:"upscale-box--_T9zg",cropper:"cropper--inMs7",topLeft:"top-left--lg7uq",topRight:"top-right--IxDMO",bottomLeft:"bottom-left--kY40W",bottomRight:"bottom-right--_Xn1E",top:"top--omGu9",bottom:"bottom--ts4Es",left:"left--qQyd5",right:"right--WTOsR",imageWrapper:"image-wrapper--Kiq4W",imageRouteWrapper:"image-route-wrapper--YsR7b",dragSize:"drag-size--lsqO2",active:"active--dMfff",image:"image--uUU8o"};class hI extends S.PN{get mobileRate(){return st.imageController.upscaleManager.mobileRate}get canUpscaleCustom(){var e;return(null===(e=st.imageController.templateForm.upscaleConfig)||void 0===e?void 0:e.upscaleKey)==="custom"}get cropperSize(){var e;let t=null===(e=st.imageController.templateForm.upscaleConfig)||void 0===e?void 0:e.outer;return t?{width:t[0]*this.mobileRate,height:t[1]*this.mobileRate}:null}get imagePosition(){var e;let t=null===(e=st.imageController.templateForm.upscaleConfig)||void 0===e?void 0:e.imageConfig;return t?{left:t.left*this.mobileRate,top:t.top*this.mobileRate,width:t.width*this.mobileRate,height:t.height*this.mobileRate}:{left:0,top:0,width:0,height:0}}get cropperPositionStyle(){let e=st.imageController.upscaleManager.cropperPosition;return e?{left:e.left*this.mobileRate,top:e.top*this.mobileRate,position:"absolute"}:{position:"relative"}}handleImageTouchDragStart(e){e.preventDefault(),e.stopPropagation(),this.isDraggingImage=!0,this.imageActive=!this.imageActive,this.dragStart={x:e.touches[0].clientX,y:e.touches[0].clientY}}handleImageMouseDragStart(e){e.preventDefault(),e.stopPropagation(),this.isDraggingImage=!0,this.imageActive=!this.imageActive,this.dragStart={x:e.clientX,y:e.clientY}}handleMouseUp(){this.isDraggingCropper=!1,this.isDraggingImage=!1,this.isDraggingImageSize=!1,this.activeHandle=""}handleTouchCropperDragStart(e,t){e.preventDefault(),this.isDraggingCropper=!0,this.activeHandle=t,this.dragStart={x:e.touches[0].clientX,y:e.touches[0].clientY}}handleClickCropperDragStart(e,t){e.preventDefault(),this.isDraggingCropper=!0,this.activeHandle=t,this.dragStart={x:e.clientX,y:e.clientY}}handleTouchImageDragStart(e,t){e.preventDefault(),e.stopPropagation(),this.isDraggingImageSize=!0,this.activeHandle=t,this.dragStart={x:e.touches[0].clientX,y:e.touches[0].clientY}}handleClickImageDragStart(e,t){e.preventDefault(),e.stopPropagation(),this.isDraggingImageSize=!0,this.activeHandle=t,this.dragStart={x:e.clientX,y:e.clientY}}handleWheel(e){if(e.preventDefault(),e.stopPropagation(),!st.imageController.upscaleManager.aspectRatio||st.imageController.submitLoading)return;let t=e.deltaY>0?.9:1.1;st.imageController.upscaleManager.imageZoom(t)}handleMove(e){if(st.imageController.submitLoading)return;let{clientX:t,clientY:i}=e,o=()=>{let e=0,o=0,a=t-this.dragStart.x,n=i-this.dragStart.y;switch(this.activeHandle){case"top-left":e=-a,o=-n;break;case"top-right":e=a,o=-n;break;case"bottom-left":e=-a,o=n;break;case"bottom-right":e=a,o=n;break;case"top":e=0,o=-n;break;case"right":e=a,o=0;break;case"bottom":e=0,o=n;break;case"left":e=-a,o=0}return{deltaX:e,deltaY:o}};if(this.isDraggingCropper){let{deltaX:e,deltaY:t}=o();(e||t)&&this.activeHandle&&st.imageController.upscaleManager.updateCropperSize({deltaX:e,deltaY:t},this.activeHandle)}if(this.isDraggingImage&&this.imageDom){let e=t-this.dragStart.x,o=i-this.dragStart.y;st.imageController.upscaleManager.imageMove({xDelta:e,yDelta:o})}if(this.isDraggingImageSize&&this.imageDom){let{deltaX:e,deltaY:t}=o();(e||t)&&this.activeHandle&&st.imageController.upscaleManager.updateImageSize({deltaX:e,deltaY:t},this.activeHandle)}this.dragStart={x:t,y:i}}handleTouchMove(e){e.preventDefault();let t=e.touches[0].clientX,i=e.touches[0].clientY;this.handleMove({clientX:t,clientY:i})}handleMouseMove(e){let t=e.clientX,i=e.clientY;this.handleMove({clientX:t,clientY:i})}calculateCropperPosition(){this.positionInited&&st.imageController.upscaleManager.cropperPosition||setTimeout(()=>{this.cropperDom&&this.props.sketchDom&&(st.imageController.upscaleManager.calculateCropperPosition(this.props.sketchDom,this.cropperDom),this.positionInited=!0)})}handleImageLoad(e,t){var i;if(this.loaded=!0,this.preloadImageSrc!==t){if(this.preloadImageSrc=t,st.imageController.upscaleManager.setAspectRatio(e),t===st.imageController.generateImageThumbnailUrls[0]){st.imageController.upscaleManager.initImagePosition(),this.calculateCropperPosition();return}(null===(i=st.imageController.templateForm.upscaleConfig)||void 0===i?void 0:i.upscaleKey)==="base"&&st.imageController.upscaleManager.handleInit(st.imageController.templateForm.upscaleConfig.upscaleKey),st.imageController.upscaleManager.initImagePosition(),this.calculateCropperPosition()}}handleImageClickUp(e){e.stopPropagation(),e.preventDefault(),this.handleMouseUp()}handleImageTouchUp(e){e.stopPropagation(),e.preventDefault(),this.handleMouseUp()}onViewCreate(){let e=this.handleTouchMove.bind(this),t=this.handleMouseMove.bind(this),i=this.handleMouseUp.bind(this),o=()=>{this.imageActive=!1};window.addEventListener("touchmove",e),window.addEventListener("touchend",i),window.addEventListener("mousemove",t),window.addEventListener("mouseup",i),window.addEventListener("mousedown",o),window.addEventListener("touchstart",o),this.dispose=()=>{window.removeEventListener("touchmove",e),window.removeEventListener("mousemove",t),window.removeEventListener("touchend",i),window.removeEventListener("mouseup",i),window.removeEventListener("mousedown",o),window.removeEventListener("touchstart",o)}}onViewDestroy(){var e;null===(e=this.dispose)||void 0===e||e.call(this)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"imageDom",null),(0,T._)(this,"cropperDom",null),(0,T._)(this,"preloadImageSrc",""),(0,T._)(this,"isDraggingCropper",!1),(0,T._)(this,"isDraggingImage",!1),(0,T._)(this,"isDraggingImageSize",!1),(0,T._)(this,"dragStart",{x:0,y:0}),(0,T._)(this,"activeHandle",""),(0,T._)(this,"loaded",!1),(0,T._)(this,"positionInited",!1),(0,T._)(this,"imageActive",!1),(0,T._)(this,"dispose",null)}}(0,I.gn)([S.Fl],hI.prototype,"mobileRate",null),(0,I.gn)([S.Fl],hI.prototype,"canUpscaleCustom",null),(0,I.gn)([S.Fl],hI.prototype,"cropperSize",null),(0,I.gn)([S.Fl],hI.prototype,"imagePosition",null),(0,I.gn)([S.Fl],hI.prototype,"cropperPositionStyle",null),(0,I.gn)([S.SB],hI.prototype,"isDraggingCropper",void 0),(0,I.gn)([S.SB],hI.prototype,"isDraggingImage",void 0),(0,I.gn)([S.SB],hI.prototype,"isDraggingImageSize",void 0),(0,I.gn)([S.SB],hI.prototype,"dragStart",void 0),(0,I.gn)([S.SB],hI.prototype,"activeHandle",void 0),(0,I.gn)([S.SB],hI.prototype,"loaded",void 0),(0,I.gn)([S.SB],hI.prototype,"positionInited",void 0),(0,I.gn)([S.SB],hI.prototype,"imageActive",void 0);let hM=S._Y.createComponent("UpscaleTool",hI,e=>{let{imageSrc:t,sketchDom:i}=e.props;return((0,Q.useEffect)(()=>{e.loaded=!1},[t,e]),(0,Q.useEffect)(()=>{i&&e.calculateCropperPosition()},[i,e]),e.cropperSize)?(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:q()(hT.upscaleTool,{[hT.disabled]:st.imageController.submitLoading,[hT.hide]:!e.loaded||!e.positionInited}),style:e.cropperPositionStyle,children:[!e.loaded&&(0,y.jsx)(eC.g,{fullScreen:!0,wrapperClassName:hT.loading}),(0,y.jsxs)("div",{className:hT.wrapper,style:{width:e.cropperSize.width,height:e.cropperSize.height},ref:t=>{!e.cropperDom&&t&&(e.cropperDom=t)},children:[(0,y.jsxs)("div",{className:hT.upscaleBox,children:[(0,y.jsx)("div",{className:q()(hT.cropper,hT.topLeft),onTouchStart:t=>e.handleTouchCropperDragStart(t,"top-left"),onMouseDown:t=>e.handleClickCropperDragStart(t,"top-left")}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.topRight),onTouchStart:t=>e.handleTouchCropperDragStart(t,"top-right"),onMouseDown:t=>e.handleClickCropperDragStart(t,"top-right")}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.bottomLeft),onTouchStart:t=>e.handleTouchCropperDragStart(t,"bottom-left"),onMouseDown:t=>e.handleClickCropperDragStart(t,"bottom-left")}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.bottomRight),onTouchStart:t=>e.handleTouchCropperDragStart(t,"bottom-right"),onMouseDown:t=>e.handleClickCropperDragStart(t,"bottom-right")}),e.canUpscaleCustom&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:q()(hT.cropper,hT.top),onTouchStart:t=>e.handleTouchCropperDragStart(t,"top"),onMouseDown:t=>e.handleClickCropperDragStart(t,"top")}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.right),onTouchStart:t=>e.handleTouchCropperDragStart(t,"right"),onMouseDown:t=>e.handleClickCropperDragStart(t,"right")}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.bottom),onTouchStart:t=>e.handleTouchCropperDragStart(t,"bottom"),onMouseDown:t=>e.handleClickCropperDragStart(t,"bottom")}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.left),onTouchStart:t=>e.handleTouchCropperDragStart(t,"left"),onMouseDown:t=>e.handleClickCropperDragStart(t,"left")})]})]}),(0,y.jsxs)("div",{className:q()(hT.imageWrapper,{[hT.active]:e.imageActive,[hT.dragSize]:e.isDraggingImageSize}),onWheel:e.handleWheel.bind(e),onTouchStart:e.handleImageTouchDragStart.bind(e),onMouseDown:e.handleImageMouseDragStart.bind(e),style:st.imageController.upscaleManager.aspectRatio?{left:"".concat(e.imagePosition.left,"px"),top:"".concat(e.imagePosition.top,"px"),width:"".concat(e.imagePosition.width,"px"),height:"".concat(e.imagePosition.height,"px")}:{opacity:0},children:[e.imagePosition.width>180&&(0,y.jsx)("div",{className:hT.imageRouteWrapper,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onTouchStart:e=>{e.preventDefault(),e.stopPropagation()},children:(0,y.jsx)(c3,{hasBg:!0,imageUrl:t,isLight:!0})}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.topLeft),onTouchStart:t=>e.handleTouchImageDragStart(t,"top-left"),onMouseDown:t=>e.handleClickImageDragStart(t,"top-left"),onMouseUp:e.handleImageClickUp.bind(e),onTouchEnd:e.handleImageTouchUp.bind(e)}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.topRight),onTouchStart:t=>e.handleTouchImageDragStart(t,"top-right"),onMouseDown:t=>e.handleClickImageDragStart(t,"top-right"),onMouseUp:e.handleImageClickUp.bind(e),onTouchEnd:e.handleImageTouchUp.bind(e)}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.bottomLeft),onTouchStart:t=>e.handleTouchImageDragStart(t,"bottom-left"),onMouseDown:t=>e.handleClickImageDragStart(t,"bottom-left"),onMouseUp:e.handleImageClickUp.bind(e),onTouchEnd:e.handleImageTouchUp.bind(e)}),(0,y.jsx)("div",{className:q()(hT.cropper,hT.bottomRight),onTouchStart:t=>e.handleTouchImageDragStart(t,"bottom-right"),onMouseDown:t=>e.handleClickImageDragStart(t,"bottom-right"),onMouseUp:e.handleImageClickUp.bind(e),onTouchEnd:e.handleImageTouchUp.bind(e)}),(0,y.jsx)("img",{ref:i=>{if(e.imageDom=i,null==i?void 0:i.complete){let o=i.naturalWidth/i.naturalHeight;e.handleImageLoad(o,t)}},fetchPriority:"high",loading:"eager",onLoad:i=>{let o=i.target,a=o.naturalWidth/o.naturalHeight;e.handleImageLoad(a,t)},src:t,alt:"Crop preview",className:hT.image})]})]})]})}):null}),hL=S._Y.createComponent("UpscaleImage",h_,e=>(0,y.jsx)(m7,{content:(0,y.jsx)("div",{className:q()(hN.upscaleImage,{[hN.isMobile]:st.imageController.isMobile}),[eh.$A]:1,ref:t=>{!e.sketchDom&&t&&(e.sketchDom=t)},children:e.generating?(0,y.jsx)(hl,{className:hN.loading,num:1,needTime:st.imageController.expectedTime}):e.isFail?(0,y.jsx)(hp,{className:hN.failNotice,onRetry:()=>e.handleSubmit(),failNotice:e.S.failNotice}):st.imageController.generateImageThumbnailUrls.length&&st.imageController.isPreviewing?(0,y.jsxs)("div",{className:hN.resultWrapper,children:[(0,y.jsx)(pe,{className:hN.imageWrapper}),(0,y.jsxs)("div",{className:hN.actions,children:[(0,y.jsxs)("div",{className:hN.action,onClick:()=>{st.imageController.handlePreviewConfirm()},children:[(0,y.jsx)(hc.D,{size:20}),e.S.reset]}),(0,y.jsxs)("div",{className:hN.action,onClick:()=>{st.imageController.handlePreviewConfirm(!0)},children:[(0,y.jsx)(a$.n,{size:20}),e.S.ok]})]})]}):st.imageController.templateForm.originUrl?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(hM,{sketchDom:e.sketchDom,imageSrc:st.imageController.templateForm.originUrl}),st.imageController.templateForm.originUrl===st.imageController.selectThumbnailImageUrl&&(0,y.jsx)(d9,{className:hN.upgrade})]}):(0,y.jsx)(dx,{})}),canDragFile:!0,formNode:(0,y.jsx)(mq,{}),submitNode:(0,y.jsx)(s9,{onSubmit:async()=>e.handleSubmit()}),actions:(0,y.jsx)(li,{}),mode:"leftRight"})),hB=S._Y.createComponent("ImageDetail",hC,e=>{let t="template"===st.imageController.functionType&&"out_painting_image"===st.imageController.templateForm.template;return(0,y.jsxs)("div",{className:"image-detail--W0pZ8",children:[("imageGenerator"===st.imageController.functionType||"generateImageByScenario"===st.imageController.functionType||"template"===st.imageController.functionType)&&!t&&(0,y.jsx)(hh,{}),t&&(0,y.jsx)(hL,{}),"imageAnimator"===st.imageController.functionType&&(0,y.jsx)(hv,{}),"realtimeGenerateImageByCanvas"===st.imageController.functionType&&(0,y.jsx)(hS,{}),"realtimeGenerateImageByText"===st.imageController.functionType&&(0,y.jsx)(hk,{}),"editImage"===st.imageController.functionType&&(0,y.jsx)(d0,{})]})});var hE={imageView:"image-view--m3zZh",imageDetailWrapper:"image-detail-wrapper--R25kq",imageHome:"image-home--kmZSu",title:"title--tRaXD",left:"left--uPiFk",right:"right--Lm7QE",actionBtn:"action-btn--ZJDc6",banner:"banner--d0YV0",vipUser:"vip-user--Qazpz",bannerTitle:"banner-title--GAwwh",button:"button--ZNhrZ",kingKongFlex:"king-kong-flex--jbACl",kingKongItem:"king-kong-item--KP7tB",itemText:"item-text--g4Qew",textRight:"text-right--sFaTD",quickApplies:"quick-applies--OEN_M",quickApply:"quick-apply--epPPD",quickApplyBg:"quick-apply-bg--XvBdT",isNew:"is-new--R79pB",quickApplyContent:"quick-apply-content--UGbgT",desc:"desc--_i6__",operationClass:"operation-class--TA8oH",fullScreen:"full-screen--nSqok",smallScreen:"small-screen--tLR_v",galleryQuickApply:"gallery-quick-apply--SN606",video:"video--gUSVG",loading:"loading--XOCW3",visible:"visible--LgrjF",box:"box--Omgmy",noMore:"no-more--G7ikQ",line:"line--lZT_D",notice:"notice--S28nI",link:"link--toMvs"},hD=i(62753),hP=i(63869),hF=i(2343);let hR=[{key:"imageGenerator",seq:1,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/movie_style/image.webp",payload:{prompt:"Blockbuster-style post-war scene",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"movie_1",video:""},{key:"imageGenerator",seq:2,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/movie_style/wBMJb.webp",payload:{prompt:"Movie-quality blockbuster image of a flying dragon and a castle",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"movie_2",video:""},{key:"imageGenerator",seq:3,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/movie_style/wBTDe.webp",payload:{prompt:"cinematic",modelType:"flux_pro",aspectRatio:"16:9",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"movie_3",video:""},{key:"imageGenerator",seq:4,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/movie_style/gMWLs.webp",payload:{prompt:"fantasy full body image of an ice viking covered in snow and ice, with an enormous spiky spear and a big rectangular shield",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"movie_4",video:""},{key:"imageAnimator",seq:5,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/video/thumb1.jpg",payload:{prompt:"A polar bear is playing the violin in the snow",mode:"pro",modelType:"kling",duration:"5s",aspectRatio:"16:9",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"animator_1",video:"https://assets.monica.im/assets/image_tools/gallery/media_files/video/kling_2_16:9.mp4"},{key:"imageAnimator",seq:6,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/video/thumb2.jpg",payload:{prompt:"An orange cat kneading dough on a cutting board, with a background of a village vegetable garden in the countryside",mode:"pro",modelType:"kling",duration:"5s",aspectRatio:"1:1",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"animator_2",video:"https://assets.monica.im/assets/image_tools/gallery/media_files/video/k2.mp4"},{key:"imageAnimator",seq:7,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/video/thumb3.jpg",payload:{prompt:"A racing car speeding on the surface of the moon, space background, tilt-shift zoom",mode:"pro",modelType:"kling",duration:"5s",aspectRatio:"1:1",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"animator_3",video:"https://assets.monica.im/assets/image_tools/gallery/media_files/video/k3.mp4"},{key:"imageAnimator",seq:8,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/video/thumb4.jpg",payload:{prompt:"A medieval sailing ship on the sea",mode:"pro",modelType:"kling",duration:"5s",aspectRatio:"16:9",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"animator_4",video:"https://assets.monica.im/assets/image_tools/gallery/media_files/video/kling_5_16:9.mp4"},{key:"imageGenerator",seq:9,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/realistic/r2.webp",payload:{prompt:"An Asian woman, in warm light, vintage, 80s, realistic, the image is highly evocative of a story",modelType:"flux_pro",aspectRatio:"16:9",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"realistic_2",video:""},{key:"imageGenerator",seq:10,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/realistic/r1.webp",payload:{prompt:"A photo of an Asian woman at home, smiling relaxed and happy, sunlight on her face, wearing cream and green colored clothing",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"realistic_1",video:""},{key:"imageGenerator",seq:11,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/realistic/flux_23_9:16.webp",payload:{prompt:"lovely double exposure image by blending together a stormy sea and a glass apple. The sea should serve as the underlying backdrop, with its details subtly incorporated into the glossy glass apple, sharp focus, double exposure, glossy glass apple, (translucent glass figure of an apple) (sea inside) lifeless, dead, glass apple, earthy colors, decadence, intricate design, hyper realistic, high definition, extremely detailed, dark softbox image, raytracing, cinematic, HDR, photorealistic (double exposure:1.1)",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"realistic_3",video:""},{key:"imageGenerator",seq:12,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/realistic/flux_4_1:1.webp",payload:{prompt:"A black and white portrait of a woman, subtle play of light and shadow, close-up photography by photographer Rogelio Reis using Leica M11",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"realistic_4",video:""},{key:"imageGenerator",seq:13,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/oil_painting/sdxl_56_16:9.webp",payload:{prompt:"oil painting, a group of flowers are in a glass vase, in the style of realistic watercolor paintings, charming illustrations, english painter, chromatic purity, high resolution, illustration",modelType:"sdxl",aspectRatio:"16:9",imageStyle:"oil_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"oil_painting_1",video:""},{key:"imageGenerator",seq:14,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/oil_painting/rNcw2.webp",payload:{prompt:"Oil painting style sunset",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"oil_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"oil_painting_2",video:""},{key:"imageGenerator",seq:15,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/oil_painting/flux_25_16:9.webp",payload:{prompt:"Incredible attention to detail showcases the iconic figure of Jesus in the style of Leonardo da Vinci. This masterful painting captures the essence of Jesus with captivating precision and artistry. The image portrays Jesus with delicate brushstrokes and exquisite shading, illuminating his serene expression and tender eyes. Every facial feature is meticulously rendered, evoking a profound sense of divinity and wisdom. The rich colors and subtle highlights further enhance the depth and realism of the painting, emanating an undeniable aura of brilliance. This exceptional artwork immortalizes Jesus in a truly magnificent and awe-inspiring manner.",modelType:"flux_pro",aspectRatio:"16:9",imageStyle:"oil_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"oil_painting_3",video:""},{key:"imageGenerator",seq:16,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/oil_painting/sdxl_51_1:1.webp",payload:{prompt:"decorative vase roses, in the style of intricate, delicate flower and garden paintings, pastoral charm",modelType:"sdxl",aspectRatio:"1:1",imageStyle:"oil_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"oil_painting_4",video:""},{key:"imageGenerator",seq:17,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/japanese_anime/TWYik.webp",payload:{prompt:"2d Japanese anime animal",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"japanese_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"japanese_anime_4",video:""},{key:"imageGenerator",seq:18,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/japanese_anime/f59zX.webp",payload:{prompt:"2d Japanese anime animal",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"japanese_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"japanese_anime_2",video:""},{key:"imageGenerator",seq:19,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/japanese_anime/8Bv59.webp",payload:{prompt:"Clean scene illustration from Japanese anime",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"japanese_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"japanese_anime_3",video:""},{key:"imageGenerator",seq:20,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/japanese_anime/flux_2_1:1.webp",payload:{prompt:"A woman in workwear, crazy details, ultra HD quality, close-up upper body shot",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"japanese_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"japanese_anime_1",video:""},{key:"imageGenerator",seq:21,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/fantasy_art/flux_15_1:1.webp",payload:{prompt:"A mountain with an alien planet in the background, dark sky, night scene, hyper-realistic style",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"fantasy_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"fantasy_art_4",video:""},{key:"imageGenerator",seq:22,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/fantasy_art/RAMIN.webp",payload:{prompt:"fantasy",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"fantasy_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"fantasy_art_3",video:""},{key:"imageGenerator",seq:23,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/fantasy_art/8HksQ.webp",payload:{prompt:"Fantasy universe",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"fantasy_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"fantasy_art_2",video:""},{key:"imageGenerator",seq:24,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/fantasy_art/lTaHi.webp",payload:{prompt:"fantasy",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"fantasy_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"fantasy_art_1",video:""},{key:"imageGenerator",seq:25,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/cyberpunk/zZUYQ.webp",payload:{prompt:"Cyberpunk underwater world",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"cyberpunk",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"cyberpunk_4",video:""},{key:"imageGenerator",seq:26,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/cyberpunk/L4bba.webp",payload:{prompt:"Cyberpunk-style elephant",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"cyberpunk",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"cyberpunk_2",video:""},{key:"imageGenerator",seq:27,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/cyberpunk/i7mzo.webp",payload:{prompt:"Cyberpunk-style music stage",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"cyberpunk",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"cyberpunk_3",video:""},{key:"imageGenerator",seq:28,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/cyberpunk/thf53.webp",payload:{prompt:"cuberpunk",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"cyberpunk",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"cyberpunk_1",video:""},{key:"imageGenerator",seq:29,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/3d_modeling/ZVYVi.webp",payload:{prompt:"3D model of an ancient dragon",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"3d_modeling",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"3d_modeling_4",video:""},{key:"imageGenerator",seq:30,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/3d_modeling/7BgIA.webp",payload:{prompt:"3D model of a yacht",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"3d_modeling",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"3d_modeling_3",video:""},{key:"imageGenerator",seq:31,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/3d_modeling/SqiRx.webp",payload:{prompt:"3D model of a fighter jet",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"3d_modeling",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"3d_modeling_2",video:""},{key:"imageGenerator",seq:32,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/3d_modeling/fFWst.webp",payload:{prompt:"3D model of a pink fantasy castle",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"3d_modeling",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"3d_modeling_1",video:""},{key:"imageGenerator",seq:33,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/3d_anime/qXHSD.webp",payload:{prompt:"A cute snowman with a blue bucket on its head and a blue scarf, standing on the snow, singing with its mouth open",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"3d_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"3d_anime_1",video:""},{key:"imageGenerator",seq:34,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/3d_anime/sdxl_3_16:9.webp",payload:{prompt:"Felt art, Shiba Inu, subdued colors, highly detailed, outdoor background",modelType:"sdxl",aspectRatio:"16:9",imageStyle:"3d_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"3d_anime_2",video:""},{key:"imageGenerator",seq:35,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/3d_anime/aaa.webp",payload:{prompt:"Little girl eating watermelon",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"3d_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"3d_anime_3",video:""},{key:"imageGenerator",seq:36,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/3d_anime/zN5vm.webp",payload:{prompt:"A corner of a caf\xe9 drawn with colored pencils",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"3d_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"3d_anime_4",video:""},{key:"imageGenerator",seq:37,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/comic/rvHH2.webp",payload:{prompt:"comics",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"comic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"comic_1",video:""},{key:"imageGenerator",seq:38,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/comic/qXHSD.webp",payload:{prompt:"midshot, (cel-shading style:1.3), centered image, ultra detailed illustration of Master chief from Halo, posing, (tetradic colors), inkpunk, (ink lines:1.1), strong outlines, art by MSchiffer, bold traces, unframed, high contrast, (cel-shaded:1.1), vector, 32k resolution, best quality, flat colors, flat lights",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"comic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"comic_2",video:""},{key:"imageGenerator",seq:39,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/comic/bbb.webp",payload:{prompt:"Comic-style character portrait",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"comic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"comic_3",video:""},{key:"imageGenerator",seq:40,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/comic/BtCpk.webp",payload:{prompt:"comics",modelType:"flux_pro",aspectRatio:"16:9",imageStyle:"comic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"comic_4",video:""},{key:"imageGenerator",seq:41,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/colored_pencil_drawing/jUVIg.webp",payload:{prompt:"Colored pencil style city corner sketch",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"colored_pencil_drawing",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"colored_pencil_2",video:""},{key:"imageGenerator",seq:42,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/colored_pencil_drawing/MLVYu.webp",payload:{prompt:"Colored pencil portrait",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"colored_pencil_drawing",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"colored_pencil_1",video:""},{key:"imageGenerator",seq:43,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/colored_pencil_drawing/owaHO.webp",payload:{prompt:"Colored pencil beach, shells visible on the beach",modelType:"flux_pro",aspectRatio:"16:9",imageStyle:"colored_pencil_drawing",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"colored_pencil_3",video:""},{key:"imageGenerator",seq:44,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/colored_pencil_drawing/pqOEx.webp",payload:{prompt:"Colored pencil succulent plants",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"colored_pencil_drawing",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"colored_pencil_4",video:""},{key:"imageGenerator",seq:45,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/pixel_art/OM0zC.webp",payload:{prompt:"In the style of Jean Giraud, in the style of Moebius in the style of HR Giger science fiction the movie, In the style of Jean Giraud, in the style of Moebius, in the style of HR Giger science fiction the movie good spaceship, background is black",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"pixel_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"pixel_art_4",video:""},{key:"imageGenerator",seq:46,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/pixel_art/pUxRL.webp",payload:{prompt:"A girl wearing a yellow long dress with a big sun hat facing the sunrise, the breeze lifting the hem of the dress, pixel style",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"pixel_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"pixel_art_3",video:""},{key:"imageGenerator",seq:47,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/pixel_art/1AT84.webp",payload:{prompt:"Pixel-style dark castle",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"pixel_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"pixel_art_2",video:""},{key:"imageGenerator",seq:48,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/pixel_art/ZpdJy.webp",payload:{prompt:"Pixel-style UFO",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"pixel_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"pixel_art_1",video:""},{key:"imageGenerator",seq:49,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/watercolor_painting/353D9.webp",payload:{prompt:"Light watercolor European vase flowers",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"watercolor_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"watercolor_1",video:""},{key:"imageGenerator",seq:50,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/watercolor_painting/WSjOL.webp",payload:{prompt:"Rich color vintage portrait in light watercolor",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"watercolor_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"watercolor_3",video:""},{key:"imageGenerator",seq:51,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/watercolor_painting/playground_18_1:1.webp",payload:{prompt:"(Anna Dittmann),(masterpiece), (best quality), (super delicate), (illustration), (extremely delicate and beautiful), Album rendering, album description , art, abstract art, geometry, clear lines, squares, bright, limited palette (1 girl) , (cute animated face: 1.3) , flat-chested, short red hair, blue eyes, short wavy hair, small bumps on face, floating black jacket, white school uniform, white beret, white beret bow, floating black feathers: 0.5,full body,dynamic angle,best quality,bowties,bright_eyes,extremely_detailed_eyes_and_face,beautiful detailed girl,Holding a paintbrush, drawing board, and easel in hand",modelType:"playground2_5",aspectRatio:"1:1",imageStyle:"watercolor_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"watercolor_2",video:""},{key:"imageGenerator",seq:52,image:"https://assets.monica.im/assets/image_tools/gallery/media_files/watercolor_painting/pYWOn.webp",payload:{prompt:"Light watercolor still life study",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"watercolor_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"watercolor_4",video:""},{key:"imageGenerator",seq:53,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/fGAXb-0x1365.webp",payload:{prompt:"fantasy full body image of an armored female knight covered in snow and ice, with a sword and rope",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_1",video:""},{key:"generateImageByScenario",seq:54,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/MHbSl-0x1024.webp",payload:{prompt:"A nature-inspired logo with green tones, leaf icons, and handwritten typography for an organic feel.",modelType:"playground2_5",aspectRatio:"1:1",imageScene:"logo",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_2",video:""},{key:"imageGenerator",seq:55,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/Y8CqD-0x1365.webp",payload:{prompt:"A cozy cafe on a city corner at midnight, raindrops sliding down large windows, warm yellow light inside illuminating a few pensive customers.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_3",video:""},{key:"generateImageByScenario",seq:56,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/6b8i4-0x1024.webp",payload:{prompt:"A vintage-style logo inspired by 80s neon signs, featuring bold typography and vibrant glowing colors",modelType:"playground2_5",aspectRatio:"1:1",imageScene:"logo",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_4",video:""},{key:"imageGenerator",seq:57,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/ZqNqA-0x768.webp",payload:{prompt:"A sports car speeding down a desolate desert highway, kicking up dust, with police cars in hot pursuit, and a magnificent sunset in the distance.",modelType:"flux_pro",aspectRatio:"16:9",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_5",video:""},{key:"imageGenerator",seq:58,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/mD29f-0x1024.webp",payload:{prompt:"On a dimly lit street, a detective in a hat and trench coat stands under a streetlamp as rain pours down, his silhouette cast on the wet sidewalk.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_6",video:""},{key:"imageGenerator",seq:59,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/wptmz-0x1365.webp",payload:{prompt:"A massive black obelisk stands in the center of a vast desert, surrounded by golden sand dunes under an orange-red sunset sky.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_7",video:""},{key:"imageGenerator",seq:60,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/NGEtg-0x1024.webp",payload:{prompt:"A grey-bearded master distiller examining whiskey between oak barrels, holding a glass sampling tube in an ancient stone-walled cellar.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_8",video:""},{key:"imageGenerator",seq:61,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/nO4ec-0x1024.webp",payload:{prompt:"A female artist in paint-stained overalls working on a large canvas in a spacious studio, natural light streaming through skylights.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"movie_style",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_9",video:""},{key:"imageGenerator",seq:62,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/xBUTJ-0x768.webp",payload:{prompt:"An African American saxophonist performing in a dimly lit jazz club, spotlight illuminating his gleaming instrument and concentrated expression, surrounded by ambient smoke.",modelType:"flux_pro",aspectRatio:"16:9",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_10",video:""},{key:"generateImageByScenario",seq:63,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/WVEDP-0x1024.webp",payload:{prompt:"A dynamic logo for a sports team with bold, italicized text, aggressive animal mascots, and fiery accents.",modelType:"playground2_5",aspectRatio:"1:1",imageScene:"logo",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_11",video:""},{key:"imageGenerator",seq:64,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/MucJj-0x1024.webp",payload:{prompt:"A weathered farmer standing in a golden wheat field, holding freshly cut wheat stalks, backlit by the setting sun against vast farmland.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_12",video:""},{key:"imageGenerator",seq:64.135,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/IAW6b-0x1024.webp",payload:{prompt:"Illustrate a true-to-life image of a young Caucasian girl with freckles and auburn hair, smiling playfully while holding a bouquet of wildflowers in a meadow.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_83",video:""},{key:"imageGenerator",seq:64.136,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/mIs53-0x1365.webp",payload:{prompt:"Design a lifelike close-up image of a young European woman with striking green eyes and flowing blonde hair, highlighting her natural freckles and subtle smile.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_84",video:""},{key:"imageGenerator",seq:64.137,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/Yxaxh-0x1024.webp",payload:{prompt:"Generate a black and white close-up of a middle-aged Caucasian woman with expressive eyes and a serene smile, focusing on the subtle play of light and shadow across her face.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_85",video:""},{key:"imageGenerator",seq:64.138,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/JMgo9-0x1024.webp",payload:{prompt:"Design a monochrome image of a young European woman with striking features and intense eyes, capturing the contrast and shadows that enhance her natural beauty.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_86",video:""},{key:"imageGenerator",seq:64.139,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/6GQ1e-0x1024.webp",payload:{prompt:"A close-up portrait of an African American female artist. She has dark skin and a curly natural hairstyle. Her eyes are deep and contemplative. She's wearing a loose white shirt with a simple silver necklace. Soft side lighting accentuates her facial features and skin texture.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_87",video:""},{key:"imageGenerator",seq:64.14,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/S8YbX-0x1365.webp",payload:{prompt:"A joyful portrait of an elderly Caucasian man. He has thick white hair and a beard, with laugh lines covering his face. He's laughing heartily, his eyes almost closed from the laughter. He's wearing a plaid shirt, with a slightly blurred background suggesting a home or outdoor setting. The whole image exudes warmth and joy.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_88",video:""},{key:"imageGenerator",seq:64.141,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/RoAKB-0x1024.webp",payload:{prompt:"A half-body portrait of a handsome middle-aged man in his 40s. He has piercing green eyes, a chiseled jawline, and neatly trimmed stubble. His black hair is peppered with gray and well-groomed. He's wearing a dark gray suit jacket over a white shirt, with his tie slightly loosened. His expression is confident yet friendly, with a hint of a smile. The background is a blurred office or conference room.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_89",video:""},{key:"imageGenerator",seq:64.142,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/ztlXK-0x1365.webp",payload:{prompt:"A close-up portrait of a curious 6-year-old boy. He has bright brown eyes full of wonder and excitement. His face is smooth and clean, with a mischievous smile playing on his lips. His hair is tousled and sandy brown. He's wearing a vibrant blue T-shirt with a slightly crooked collar. The background is a blurred park or playground.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"realistic",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_90",video:""},{key:"imageGenerator",seq:65,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/n2nRR-0x1024.webp",payload:{prompt:"A shepherd in a plaid wool coat standing on misty Scottish Highlands. He holds a crook, with a loyal sheepdog by his side. Distant mountains and lochs are barely visible through the mist. The scene is painted with soft brushstrokes and a hazy atmosphere.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"oil_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_13",video:""},{key:"imageGenerator",seq:66,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/WEmK0-0x1365.webp",payload:{prompt:"A majestic waterfall cascades through lush tropical rainforest. Water spray creates rainbows. Surrounding the falls are various shades of green foliage, punctuated by bright tropical flowers and colorful parrots.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"oil_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_14",video:""},{key:"imageGenerator",seq:67,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/UPtH1-0x1024.webp",payload:{prompt:"A samba dancer in an elaborate feathered costume dancing on the streets of Rio de Janeiro. She's surrounded by cheering crowds and other dancers. The background features colorful floats and twinkling lights. The entire scene exudes joy and passion.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"oil_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_15",video:""},{key:"imageGenerator",seq:68,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/1rk9j-0x1365.webp",payload:{prompt:"A serene Japanese garden surrounded by fiery red autumn maples. A red-lacquered wooden bridge spans a calm pond with clear reflections. A traditional Japanese pavilion is visible in the distance, with the sky a soft pink-orange.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"oil_painting",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_16",video:""},{key:"generateImageByScenario",seq:69,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/WqDxs-0x1024.webp",payload:{prompt:"A modern flat logo with sharp angles, monochrome colors, and an abstract icon symbolizing speed.",modelType:"playground2_5",aspectRatio:"1:1",imageScene:"logo",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_17",video:""},{key:"generateImageByScenario",seq:70,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/mJ9KT-0x1024.webp",payload:{prompt:"A flat design emphasizing clean lines, a unique triangular icon, and a monochrome palette.",modelType:"playground2_5",aspectRatio:"1:1",imageScene:"logo",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_18",video:""},{key:"imageGenerator",seq:71,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/ZozeE-0x1024.webp",payload:{prompt:"A lively Japanese summer festival scene. People in yukata stroll down lantern-decorated streets lined with stalls offering games and food. Colorful fireworks explode in the distance.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"japanese_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_19",video:""},{key:"imageGenerator",seq:72,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/8qZVE-0x768.webp",payload:{prompt:"A serene forest with enormous trees supporting a small treehouse. Quirky spirits and gentle forest creatures surround it. Sunlight filters through the leaves, creating a dreamy light effect.",modelType:"flux_pro",aspectRatio:"16:9",imageStyle:"japanese_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_20",video:""},{key:"imageGenerator",seq:73,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/RS88t-0x1024.webp",payload:{prompt:"A massive humanoid robot stands amidst ruins. A young pilot is visible in the cockpit. The mecha's armor is detailed and battle-worn, with a smoky battlefield in the background.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"japanese_anime",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_21",video:""},{key:"imageGenerator",seq:74,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/Prf7N-0x1365.webp",payload:{prompt:"A magical underwater city made of coral, shells, and glowing seaweed. Mermaids and various strange sea creatures swim through the city. Magical bubbles serve as transportation, moving between the structures.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"fantasy_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_22",video:""},{key:"imageGenerator",seq:75,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/KE1uG-0x1024.webp",payload:{prompt:"An endless magical library with bookshelves reaching into the clouds. Flying books soar through the air, magical candles illuminate ancient scrolls and mysterious runes. Wizards and strange creatures wander among the stacks.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"fantasy_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_23",video:""},{key:"imageGenerator",seq:76,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/nsdtg-0x1024.webp",payload:{prompt:"An enormous Tree of Life with a spiraling trunk reaching to the sky. Each branch represents a different world or ecosystem, from deserts to glaciers, undersea realms to volcanoes. Magical creatures inhabit the tree.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"fantasy_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_24",video:""},{key:"imageGenerator",seq:77,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/N61Qa-0x1365.webp",payload:{prompt:"An elegant elven castle floating above a glowing crystal forest. The castle's spires are made of translucent crystals, shimmering with rainbow-like light. Luminous butterflies and tiny fairies flutter around.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"fantasy_art",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_25",video:""},{key:"generateImageByScenario",seq:78,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/UXA83-0x1024.webp",payload:{prompt:"Craft a logo with sleek, sans-serif typography combined with a simple, abstract shape. Maintain a flat style with no gradients or shadows.",modelType:"playground2_5",aspectRatio:"1:1",imageScene:"logo",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_26",video:""},{key:"imageGenerator",seq:79,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/BugzS-0x1024.webp",payload:{prompt:"A futuristic bar where multi-armed robots serve as bartenders. Patrons sit at glowing counters, their drinks changing color based on their mood. Holographic dancers perform in mid-air, while screens on the walls display real-time global news.",modelType:"flux_pro",aspectRatio:"1:1",imageStyle:"cyberpunk",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_27",video:""},{key:"imageGenerator",seq:80,image:"https://assets.monica.im/assets/image_tools/gallery/compress_files/HcE8m-0x1365.webp",payload:{prompt:"The interior of a massive factory where high-tech mechanical hearts are being manufactured on assembly lines. Robot workers and human engineers work side by side. At the center of the factory is a huge pulsating energy core powering the entire facility.",modelType:"flux_pro",aspectRatio:"9:16",imageStyle:"cyberpunk",workflowParam:{template:"",originUrl:""},signUrl:""},uid:"compress_files_28",video:""}],hV={imageToolAboveTheFoldKeys:[{key:"imageGenerator",label:"",image:"https://assets.monica.im/assets/image_tools/above_the_fold/image_generator_v1.webp"},{key:"imageAnimator",label:"",image:"https://assets.monica.im/assets/image_tools/above_the_fold/image_animator_v1.webp"},{key:"generateImageByScenario",label:"",image:"https://assets.monica.im/assets/image_tools/above_the_fold/generate_image_by_scenario_v1.webp"},{key:"realtimeGenerateImageByText",label:"",image:"https://assets.monica.im/assets/image_tools/above_the_fold/realtime_generate_image_by_text_v1.webp"},{key:"realtimeGenerateImageByCanvas",label:"",image:"https://assets.monica.im/assets/image_tools/above_the_fold/realtime_generate_image_by_canvas_v1.webp"},{key:"editImage",label:"",image:"https://assets.monica.im/assets/image_tools/above_the_fold/edit_image_v1.webp"}],imageToolBanner:[{title:"",image:"https://assets.monica.im/assets/image_tools/banner/paid.webp",imageForWide:"https://assets.monica.im/assets/image_tools/banner/paid_wide.webp",imageForNarrow:"https://assets.monica.im/assets/image_tools/banner/paid_narrow.webp",link:'https://monica.butterfly-effect.dev/home/image?key=imageAnimator&payload={"modelType":"kling"}',btnText:"",icon:"https://assets.monica.im/assets/image_tools/banner/vip_icon.jpeg"}],imageToolTemplates:[{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/onediff_old_photo_restore_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/onediff_old_photo_restore.webp",payload:{template:"onediff_old_photo_restore",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/sticker_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/sticker.webp",payload:{template:"sticker",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/upscale_face_swap_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/upscale_face_swap.webp",payload:{template:"upscale_face_swap",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/real_to_manga_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/real_to_manga.webp",payload:{template:"real_to_manga",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/real_to_anime_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/real_to_anime.webp",payload:{template:"real_to_anime",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/onediff_2d3d_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/onediff_2d3d.webp",payload:{template:"onediff_2d3d",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/rick_morty_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/rick_morty.webp",payload:{template:"rick_morty",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/lineart_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/lineart.webp",payload:{template:"lineart",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/onediff_pixel_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/onediff_pixel.webp",payload:{template:"onediff_pixel",originUrl:"",prompt:""},routeKey:"template"},{title:"",description:"",image:"https://assets.monica.im/assets/image_tools/workflow_template/sample/pvc_toy_small.webp",selectImage:"https://assets.monica.im/assets/image_tools/workflow_template/select/pvc_toy.webp",payload:{template:"pvc_toy",originUrl:"",prompt:""},routeKey:"template"}]};class hU extends S.PN{get S(){return ei.S.Global.modules.ImageView}get imageHomeToolConfig(){var e;return(null===(e=tc.serverConfigController.staticConfig)||void 0===e?void 0:e.imageToolHomePageConfig)||hV}get quickApplies(){var e;return(null===(e=this.imageHomeToolConfig)||void 0===e?void 0:e.imageToolTemplates)||[]}get banner(){var e;return(null===(e=this.imageHomeToolConfig)||void 0===e?void 0:e.imageToolBanner)||[]}get groupedGallery(){let{tagMap:e}=st.imageController,t={};return this.imageGallery.forEach(i=>{let{video:o,payload:a}=i;if(o){let o=e.video;t[o]||(t[o]=[]),t[o].push(i)}else if((null==a?void 0:a.modelType)==="recraft3"){let o=e.recraft3;t[o]||(t[o]=[]),t[o].push(i)}else if(null==a?void 0:a.imageScene){let o=e[a.imageScene];t[o]||(t[o]=[]),t[o].push(i)}else if(null==a?void 0:a.imageStyle){let o=e[a.imageStyle];t[o]||(t[o]=[]),t[o].push(i)}}),t}get kingKongItems(){var e;return null===(e=this.imageHomeToolConfig)||void 0===e?void 0:e.imageToolAboveTheFoldKeys}get loadedSources(){return this.imageGallery.reduce((e,t)=>(t.uid&&(e[t.uid]=t),e),{})}get isToolsWeb(){return r1.S.location.pathname.includes("image-tools")}showImageOnboarding(){st.imageController.functionType||!P.A.inited||P.A.imageOnboardingShowed||f.o.isExtension||(P.A.setImageOnboardingShowed(!0),(0,hF.X)({modal:!0,width:680,height:582,insertTarget:f.o.isExtension?"mainWindow":"dialogRoot"}))}onTitleChange(){st.imageController.detectTitle()}onFunctionTypeChange(){st.imageController.functionType||(this.imageHomeShowed=!0)}tabChange(){"image"===eF.J.activeTabKey&&st.imageController.markIsImage()}userVipChange(){eD.userController.isVipUser&&(st.imageController.fetchHistory(),st.imageController.updateCurrentGenerateInfo())}handleGoImageGenerate(){st.imageController.goto("imageGenerator")}handleToggleHistory(e){f.o.isExtension?e&&window.open(w.m.genUrl("".concat(w.m.genFullUrl(eR.Cl.image)),{showHistory:"true"}),"_blank"):(this.historyVisible=e,e&&st.imageController.fetchHistory(!0))}async onBeforeMount(){f.o.isWeb&&st.imageController.initPageStatusByUrl(r1.S.location.href)}onViewCreate(){this.init().then(()=>{"template"===st.imageController.functionType&&st.imageController.checkTemplateForm(),"imageGenerator"===st.imageController.functionType&&st.imageController.checkImageForm(),"imageAnimator"===st.imageController.functionType&&st.imageController.checkVideoForm()})}onViewDestroy(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()}async init(){let e=new URL(r1.S.location.href).searchParams,t=e.get("taskId"),i=e.get("showHistory"),o=e.get("autoTrigger");if(i&&!r1.S.isRunInServerSide&&(this.handleToggleHistory(!0),st.imageController.deleteQuery(["showHistory"])),setTimeout(()=>{e9.W.createUserBehaviorEvent({eventName:"image_home_view_show",extData:{from:st.imageController.from||"other"}})}),this.resizeObserver=new ResizeObserver(()=>{var e;let t=(null===(e=this.imageViewEl)||void 0===e?void 0:e.getBoundingClientRect().width)||this.imageViewWidth||(f.o.isExtension?0:window.innerWidth);this.imageViewWidth=t,this.isSmallScreen=t<640}),this.imageViewEl&&this.resizeObserver.observe(this.imageViewEl),hP.i7.on("imageGalleryChange",e=>{this.queueSourceLoaded(e)}),await eD.userController.checkLogin(),!eD.userController.isLogin&&f.o.isWeb){location.href=ru.routerController.getLoginUrl({redirectTo:window.location.href});return}t&&!r1.S.isRunInServerSide&&this.getExtensionImage(t),o&&setTimeout(()=>{st.imageController.handleSubmit()},30),st.imageController.markIsImage(),await this.fetchSources()}async handleQuickApplyClick(e){await hP.i7.quickApplyClick("image_tool_templates",e),hP.i7.fetchImageNewTags()}async getExtensionImage(e){if(!f.o.isWeb)return;let t=0;this.uploadingFromExt=!0;try{let i=await new Promise((i,o)=>{let a=()=>{if(t>60){o(Error(this.S.imageLoadFail));return}hD.$.getData("getContextMenuUploadContent",{taskId:e},ru.routerController.params.from).then(e=>{if("status"in e){let{status:o,base64:n}=e;if("pending"===o){setTimeout(()=>{a(),t++},500);return}if("success"===o){i(n);return}}o(Error(this.S.imageLoadFail))}).catch(e=>{o(e)})};a()});await this.uploadBase64(i)}catch(e){ef.M.error(w.m.formatErrorMsg(e))}this.uploadingFromExt=!1;let i=new URL(r1.S.location.href);i.searchParams.delete("taskId"),history.replaceState(null,"",i.toString()),"editImage"===st.imageController.functionType?st.imageController.editImageForm.originUrl||st.imageController.gotoSimple("editImage"):st.imageController.editImageForm.originUrl&&st.imageController.initDetailPayload({originUrl:st.imageController.editImageForm.originUrl})}async uploadBase64(e){let t="Monica_".concat(em.L.formatTime(Date.now(),"YYYY-MM-DD_HH_mm:ss")),i=this.dataURLtoFile(e,"Monica_".concat(t,".png"));await st.imageController.handleUploadImageForImageEdit(i,!0)}dataURLtoFile(e,t){var i;let o=e.split(","),a=null===(i=o[0].match(/:(.*?);/))||void 0===i?void 0:i[1],n=atob(o[1]),r=n.length,s=new Uint8Array(r);for(;r--;)s[r]=n.charCodeAt(r);return new File([s],t,{type:a})}async fetchSources(){st.imageController.fetchHistory(!1),hP.i7.getImageGallery(e=>{this.queueSourceLoaded(e||[])},!0),await Promise.all([tp.Cc.manualUpdateStaticConfig([tm.$.imageHomePageToolConfig,tm.$.imageGenConfigList,tm.$.workflowConfigList,tm.$.videoGenConfigList],!0),hP.i7.fetchImageNewTags()])}queueSourceLoaded(e){this.imageGallery=e}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"imageViewEl",null),(0,T._)(this,"resizeObserver",null),(0,T._)(this,"imageGallery",hR),(0,T._)(this,"isSmallScreen",!!(w.m.getIsMobile()||f.o.isExtension)),(0,T._)(this,"imageViewWidth",0),(0,T._)(this,"imageHomeShowed",!0),(0,T._)(this,"historyVisible",!1),(0,T._)(this,"uploadingFromExt",!1)}}(0,I.gn)([S.SB],hU.prototype,"imageGallery",void 0),(0,I.gn)([S.SB],hU.prototype,"isSmallScreen",void 0),(0,I.gn)([S.SB],hU.prototype,"imageViewWidth",void 0),(0,I.gn)([S.SB],hU.prototype,"imageHomeShowed",void 0),(0,I.gn)([S.SB],hU.prototype,"historyVisible",void 0),(0,I.gn)([S.SB],hU.prototype,"uploadingFromExt",void 0),(0,I.gn)([S.Fl],hU.prototype,"S",null),(0,I.gn)([S.Fl],hU.prototype,"imageHomeToolConfig",null),(0,I.gn)([S.Fl],hU.prototype,"quickApplies",null),(0,I.gn)([S.Fl],hU.prototype,"banner",null),(0,I.gn)([S.Fl],hU.prototype,"groupedGallery",null),(0,I.gn)([S.Fl],hU.prototype,"kingKongItems",null),(0,I.gn)([S.Fl],hU.prototype,"loadedSources",null),(0,I.gn)([S.Fl],hU.prototype,"isToolsWeb",null),(0,I.gn)([(0,S.YP)(()=>[P.A.inited,P.A.imageOnboardingShowed,st.imageController.functionType])],hU.prototype,"showImageOnboarding",null),(0,I.gn)([(0,S.YP)(()=>[st.imageController.routeKey,st.imageController.templateForm.template,st.imageController.generateImageForm.modelType,st.imageController.generateVideoForm.modelType,st.imageController.generateImageByScenarioForm.imageScene,st.imageController.viewType])],hU.prototype,"onTitleChange",null),(0,I.gn)([(0,S.YP)(()=>[st.imageController.functionType])],hU.prototype,"onFunctionTypeChange",null),(0,I.gn)([(0,S.YP)(()=>[eF.J.activeTabKey])],hU.prototype,"tabChange",null),(0,I.gn)([(0,S.YP)(()=>[eD.userController.isVipUser])],hU.prototype,"userVipChange",null);class hz extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],hz.prototype,"someState",void 0);let hO=S._Y.createComponent("Section",hz,e=>(0,y.jsxs)("div",{className:"section--eFTs8",children:[(0,y.jsx)("div",{className:q()("image-home-view-section-title","title--qXzzY"),children:e.props.title}),e.props.children]}));var hW=i(39162),hH={waterfallItem:"waterfall-item--KuzA4",doSame:"do-same--M_Hxi",media:"media--Mk5_m",videoIndicator:"video-indicator--_rxGX",tag:"tag--T7UJ4",isSmallScreen:"is-small-screen--EuUio"};class hG extends S.PN{get S(){return ei.S.Global.modules.ImageView}get href(){var e;let{source:t}=this.props;return t.video?"".concat(st.imageController.getBaseUrl(),"?key=imageAnimator&payload=").concat(JSON.stringify(t.payload)):(null===(e=t.payload)||void 0===e?void 0:e.imageScene)?"".concat(st.imageController.getBaseUrl(),"?key=generateImageByScenario&payload=").concat(JSON.stringify(t.payload)):"".concat(st.imageController.getBaseUrl(),"?key=imageGenerator&payload=").concat(JSON.stringify(t.payload))}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],hG.prototype,"S",null),(0,I.gn)([S.Fl],hG.prototype,"href",null);let hQ=S._Y.createComponent("WaterfallItem",hG,e=>{var t,i,o;let{source:a,showTag:n,isSmallScreen:r}=e.props;return(0,y.jsxs)("a",{href:e.href,className:q()(hH.waterfallItem,{[hH.isSmallScreen]:r}),onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[a.video?(0,y.jsx)(c6.n,{src:a.video,type:"video/mp4",poster:a.image,lazyload:!0,hoverPlay:!0,className:hH.media,useServiceFetch:f.o.isExtension}):(0,y.jsx)(eH.E,{src:a.image,type:"image/webp",skeleton:!0,lazyload:!0,className:q()(hH.media,hH.imageMedia),useServiceFetch:f.o.isExtension}),a.video&&(0,y.jsx)("div",{className:hH.videoIndicator,children:(0,y.jsx)(sp,{size:24})}),!n&&(0,y.jsx)("div",{className:hH.tag,children:(null===(t=a.payload)||void 0===t?void 0:t.modelType)==="recraft3"?st.imageController.tagMap.recraft3:st.imageController.tagMap[(null===(i=a.payload)||void 0===i?void 0:i.imageScene)||(null===(o=a.payload)||void 0===o?void 0:o.imageStyle)||"video"]}),(0,y.jsxs)("div",{className:hH.doSame,onClick:()=>{let e=a.payload;a.video?st.imageController.goto("imageAnimator",e):(null==e?void 0:e.imageScene)?st.imageController.goto("generateImageByScenario",e):st.imageController.goto("imageGenerator",e);let t={modelType:e.modelType,imageScene:e.imageScene,aspectRatio:e.aspectRatio,imageStyle:e.imageStyle,type:a.video?"video":"image"};st.imageController.sendEvent("image_tool_click",{button:"createByDemo",position:"home",...t}),e9.W.createUserBehaviorEvent({eventName:"image_home_go_create",extData:{id:a.uid}})},children:[!r&&(0,y.jsx)(hW.J,{color:"#fff",size:20}),e.S.doSame]})]})}),hJ=S._Y.createComponent("ImageView",hU,e=>(0,y.jsxs)("div",{className:hE.imageView,[eh.$A]:1,children:[e.imageHomeShowed&&(0,y.jsx)(hq,{vm:e}),st.imageController.showDetail&&(0,y.jsx)("div",{className:hE.imageDetailWrapper,children:(0,y.jsx)(hB,{})}),(0,y.jsx)("div",{className:q()(hE.loading,{[hE.visible]:e.uploadingFromExt}),children:(0,y.jsxs)("div",{className:hE.box,children:[(0,y.jsx)(eC.g,{size:48,color:"currentColor"}),(0,y.jsx)("div",{className:hE.desc,children:e.S.imageLoading})]})})]})),hq=(0,F.Pi)(function(e){var t;let{vm:i}=e;return(0,y.jsxs)("div",{ref:e=>{i.imageViewEl=e},style:{display:st.imageController.showDetail?"none":"flex"},className:q()(hE.imageHome,{[hE.smallScreen]:i.isSmallScreen}),children:[(0,y.jsxs)("div",{className:hE.title,children:[(0,y.jsxs)("div",{className:hE.left,children:[(0,y.jsx)(e7.Q,{tabKey:"image",title:i.S.image}),"sidebar"===ex.L.mainWindowMode?(0,y.jsx)(tN.u,{title:i.S.fullPage,trigger:["hover"],placement:"bottomLeft",children:(0,y.jsx)("div",{className:hE.fullScreen,onClick:()=>{E.w.openFullScreen()},onMouseDown:e=>{e.stopPropagation()},children:(0,y.jsx)(t_.J,{name:"monicaFull",size:12,color:"var(--theme-icon-tertiary)"})})}):null]}),(0,y.jsxs)("div",{className:hE.right,children:[i.isToolsWeb&&(0,y.jsx)(r2.S,{scene:"ui",placement:"bottom",value:r8.q.getComposeLanguageKeyByLocale(ei.a.locale),triggerNode:(0,y.jsx)(r3.c,{color:"var(--theme-icon-primary)",size:20}),onChange:e=>{if(e&&"auto"!==e){let t=se.sC[e].locale;tV.ll.set("locale",t)}r8.q.afterLocaleSelect()}}),(0,y.jsx)(sl,{}),"horizontal"===ex.L.mainWindowMode?(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:hE.actionBtn,icon:(0,y.jsx)(ez,{size:20,color:"var(--theme-icon-primary)"}),onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank"),st.imageController.sendEvent("image_tool_click",{button:"feedback",position:"home"})},children:i.S.feedback}):(0,y.jsx)(ez,{size:20,padding:6,color:"var(--theme-icon-primary)",button:!0,title:i.S.feedback,onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank"),st.imageController.sendEvent("image_tool_click",{button:"feedback"})}}),(0,y.jsx)(tK.x,{trigger:"click",open:i.historyVisible,onOpenChange:e=>{i.handleToggleHistory(e),e&&st.imageController.sendEvent("image_tool_click",{button:"history",position:"home"})},content:(0,y.jsx)(sj,{onClose:()=>{i.handleToggleHistory(!1)}}),placement:"bottom",children:"horizontal"===ex.L.mainWindowMode?(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:hE.actionBtn,icon:(0,y.jsx)(r6.w,{title:i.S.historyTitle,size:20,color:"var(--theme-icon-primary)"}),children:i.S.historyTitle}):(0,y.jsx)(r6.w,{title:i.S.historyTitle,size:20,padding:6,color:"var(--theme-icon-primary)",button:!0})}),(0,y.jsx)(eW.x,{isNewStyle:!0,usageModule:st.imageController.usageModule}),i.isToolsWeb&&(0,y.jsx)(r5.q,{placement:"bottomLeft",size:32})]})]}),i.banner.map((e,t)=>(0,y.jsx)("a",{href:e.link,style:{backgroundSize:eD.userController.isFreeUser?"contain":"cover",backgroundImage:"url(".concat(i.imageViewWidth<806?e.imageForNarrow:e.imageForWide,")"),backgroundRepeat:"no-repeat",backgroundPosition:eD.userController.isFreeUser?"right center":"center"},className:q()(hE.banner,{[hE.vipUser]:!eD.userController.isFreeUser}),target:f.o.isWeb?"_self":"_blank",onClick:t=>{st.imageController.sendEvent("image_tool_click",{button:"banner",position:"home",type:eD.userController.isFreeUser?"pricing":"imageGenerator"}),e9.W.createUserBehaviorEvent({eventName:"image_home_banner_click",extData:{banner:eD.userController.isFreeUser?"pricing":"kling"}}),e.link&&st.imageController.gotoWithLink(e.link),t.preventDefault()},rel:"noreferrer",children:(0,y.jsxs)("div",{className:hE.left,children:[(0,y.jsxs)("div",{className:hE.bannerTitle,style:{textShadow:"2px 2px 6px black"},children:[e.icon&&(0,y.jsx)("img",{src:e.icon,style:{width:40,height:40,borderRadius:"50%"}}),e.title]}),e.btnText&&(0,y.jsx)("div",{className:hE.button,children:e.btnText})]})},t)),(null===(t=i.kingKongItems)||void 0===t?void 0:t.length)?(0,y.jsx)("div",{style:{marginBottom:12},className:hE.kingKongFlex,children:i.kingKongItems.map(e=>{let t=st.imageController.getBaseUrl();return t.search="",(0,y.jsxs)("a",{href:"".concat(t,"?key=").concat(e.key),className:hE.kingKongItem,onClick:t=>{t.preventDefault(),t.stopPropagation(),"imageAnimator"===e.key?f.o.isWeb&&r1.S.location.pathname.includes("/image-tools")?st.imageController.goto(e.key):eF.J.onTabChange("video"):st.imageController.goto(e.key),st.imageController.sendEvent("image_tool_click",{button:"kingkong",position:"home",key:e.key}),e9.W.createUserBehaviorEvent({eventName:"image_home_kingkong_click",extData:{function:e.key}})},children:[(0,y.jsx)("div",{className:q()(hE.itemText,{[hE.textRight]:ei.a.rtl}),children:e.label}),(0,y.jsx)(eH.E,{src:e.image,type:"image/webp",style:{width:"100%",minHeight:64,height:"unset"},skeleton:!0,lazyload:!0,useServiceFetch:f.o.isExtension})]},e.key)})}):null,i.quickApplies.length>0&&(0,y.jsx)(hO,{title:i.S.quickApply,children:(0,y.jsx)(e4.K,{contentClass:hE.quickApplies,operationClassName:hE.operationClass,children:i.quickApplies.map((e,t)=>{let{title:o,image:a,payload:n,description:r,routeKey:s,createInfo:l={},key:c}=e,d=("template"===s?n:l)||{},p=!1;return Array.isArray(st.imageController.imageNewTagsMap.imageToolTemplates)&&(p=!!c&&!!st.imageController.imageNewTagsMap.imageToolTemplates.includes(c)),(0,y.jsxs)("a",{href:"".concat(st.imageController.getBaseUrl(),"?key=").concat(s,"&payload=").concat(JSON.stringify(d)),className:hE.quickApply,onClick:t=>{t.preventDefault(),t.stopPropagation(),p&&e.key&&i.handleQuickApplyClick(e.key),st.imageController.goto(s,d),st.imageController.sendEvent("image_tool_click",{button:"quickApply",position:"home",key:s,template:"template"===s?null==d?void 0:d.template:d.modelType}),e9.W.createUserBehaviorEvent({eventName:"image_home_quick_apply_click",extData:{template:null==n?void 0:n.template}})},children:[(0,y.jsx)(eH.E,{src:a,type:"image/webp",className:hE.quickApplyBg,skeleton:!0,lazyload:!0,useServiceFetch:f.o.isExtension}),p&&(0,y.jsx)("div",{className:hE.isNew,children:"New"}),(0,y.jsxs)("div",{className:hE.quickApplyContent,children:[(0,y.jsx)("div",{className:hE.title,children:o}),!i.isSmallScreen&&(0,y.jsx)("div",{className:hE.desc,children:r})]})]},t)})})}),i.isSmallScreen?Object.keys(i.groupedGallery).length>0&&Object.keys(i.groupedGallery).map(e=>{let t=i.groupedGallery[e];return(0,y.jsx)(hO,{title:e,children:(0,y.jsx)(e4.K,{contentClass:hE.quickApplies,operationClassName:hE.operationClass,children:t.map((e,t)=>(0,y.jsx)("div",{style:{padding:0},className:q()(hE.quickApply,{[hE.video]:e.video,[hE.galleryQuickApply]:!e.video}),children:(0,y.jsx)(hQ,{source:e,showTag:!0,isSmallScreen:i.isSmallScreen},t)},e.uid))})},e)}):i.imageGallery.length>0&&(0,y.jsx)(hO,{title:i.S.showcase,children:(0,y.jsx)(r7,{gap:12,className:hE.waterfall,breakpointCols:{default:5,9999:13,3e3:12,2750:11,2500:10,2250:9,2e3:8,1750:7,1500:6,1250:5,1e3:4,750:3,500:2},children:i.imageGallery.map((e,t)=>(0,y.jsx)(hQ,{source:e,isSmallScreen:i.isSmallScreen},t))})}),i.imageGallery.length>0&&(0,y.jsxs)("div",{className:hE.noMore,children:[(0,y.jsx)("div",{className:hE.line}),(0,y.jsx)("div",{className:hE.notice,onClick:()=>{i.handleGoImageGenerate()},children:(0,y.jsx)(aN.Z,{S:i.S.noMore,components:{span:e=>(0,y.jsx)("span",{className:hE.link,children:e})}})})]})]})});class hK extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var hY=JSON.parse('{"fill":"none","content":"\\n<g id=\\"image\\">\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.17489 1.40001H10.8252C11.3639 1.4 11.8044 1.4 12.1625 1.42925C12.5331 1.45953 12.8678 1.52412 13.1804 1.68339C13.6696 1.93266 14.0674 2.33041 14.3166 2.81963C14.4759 3.13223 14.5405 3.46695 14.5708 3.83755C14.6 4.19561 14.6 4.63617 14.6 5.17487V10.8251C14.6 11.3638 14.6 11.8044 14.5708 12.1625C14.5405 12.5331 14.4759 12.8678 14.3166 13.1804C14.0674 13.6696 13.6696 14.0674 13.1804 14.3166C12.8678 14.4759 12.5331 14.5405 12.1625 14.5708C11.8044 14.6 11.3639 14.6 10.8252 14.6H5.17489C5.15989 14.6 5.14497 14.6 5.13012 14.6L4.5977 14.6C4.41596 14.6 4.24152 14.6001 4.10193 14.5877C4.09625 14.5872 4.09032 14.5866 4.08418 14.5861C3.99793 14.5822 3.91578 14.5772 3.83757 14.5708C3.46696 14.5405 3.13224 14.4759 2.81965 14.3166C2.33043 14.0674 1.93268 13.6696 1.68341 13.1804C1.52413 12.8678 1.45955 12.5331 1.42927 12.1625C1.40001 11.8044 1.40002 11.3638 1.40002 10.8251V5.17488C1.40002 4.63617 1.40001 4.19561 1.42927 3.83755C1.45955 3.46695 1.52413 3.13223 1.68341 2.81963C1.93268 2.33041 2.33043 1.93266 2.81965 1.68339C3.13224 1.52412 3.46696 1.45953 3.83757 1.42925C4.19562 1.4 4.63619 1.4 5.17489 1.40001ZM5.20002 13.4H10.8C11.37 13.4 11.7614 13.3995 12.0648 13.3748C12.3612 13.3505 12.5204 13.3061 12.6356 13.2474C12.899 13.1132 13.1132 12.899 13.2474 12.6356C13.3061 12.5204 13.3506 12.3611 13.3748 12.0647C13.3996 11.7613 13.4 11.37 13.4 10.8V10.2485L10.9967 7.84519C10.8577 7.70618 10.7786 7.62777 10.7166 7.57513C10.697 7.55852 10.684 7.54878 10.6765 7.54355C10.67 7.54258 10.6634 7.54258 10.6569 7.54355C10.6494 7.54878 10.6364 7.55852 10.6168 7.57513C10.5548 7.62777 10.4757 7.70618 10.3367 7.84519L4.78243 13.3995C4.91019 13.4 5.04882 13.4 5.20002 13.4ZM13.4 8.55148L11.8312 6.98261C11.7113 6.86272 11.5972 6.74861 11.4932 6.66033C11.3798 6.56405 11.2396 6.46377 11.0581 6.40481C10.8037 6.32215 10.5297 6.32215 10.2753 6.40481C10.0938 6.46377 9.95359 6.56405 9.84018 6.66033C9.73617 6.74862 9.62208 6.86273 9.50221 6.98263L3.8031 12.6817C3.67458 12.8102 3.55123 12.9335 3.46127 13.041C3.42476 13.0846 3.3739 13.1476 3.32712 13.2277C3.08078 13.0927 2.88044 12.8865 2.75262 12.6356C2.6939 12.5204 2.6495 12.3611 2.62528 12.0647C2.60049 11.7613 2.60002 11.37 2.60002 10.8V5.20001C2.60002 4.63006 2.60049 4.23868 2.62528 3.93527C2.6495 3.63887 2.6939 3.47965 2.75262 3.36442C2.88684 3.101 3.10101 2.88682 3.36444 2.7526C3.47967 2.69389 3.63889 2.64948 3.93529 2.62527C4.23869 2.60048 4.63007 2.60001 5.20003 2.60001H10.8C11.37 2.60001 11.7614 2.60048 12.0648 2.62527C12.3612 2.64948 12.5204 2.69389 12.6356 2.7526C12.899 2.88682 13.1132 3.101 13.2474 3.36442C13.3061 3.47965 13.3506 3.63887 13.3748 3.93527C13.3996 4.23868 13.4 4.63006 13.4 5.20001V8.55148ZM5.66669 4.93334C5.26168 4.93334 4.93336 5.26167 4.93336 5.66668C4.93336 6.07169 5.26168 6.40001 5.66669 6.40001C6.0717 6.40001 6.40002 6.07169 6.40002 5.66668C6.40002 5.26167 6.0717 4.93334 5.66669 4.93334ZM3.73336 5.66668C3.73336 4.59893 4.59894 3.73334 5.66669 3.73334C6.73444 3.73334 7.60002 4.59893 7.60002 5.66668C7.60002 6.73443 6.73444 7.60001 5.66669 7.60001C4.59894 7.60001 3.73336 6.73443 3.73336 5.66668Z\\" fill=\\"white\\"/>\\n</g>\\n\\n","viewBox":"0 0 16 16"}');let hZ=S._Y.createComponent("ImageIcon",hK,e=>(0,y.jsx)(R.s,{...e.props,name:"ImageIcon",iconData:hY}));var hX=i(15461),h$=i(71958);let h0=S._Y.createComponent("HoverVideoProvider",h$.k,e=>{let{children:t,autoPlay:i}=e.props;return(0,y.jsx)(y.Fragment,{children:(0,Q.cloneElement)(t,{...t.props,onMouseEnter:()=>{e.isHover=!0},onMouseLeave:()=>{i||(e.isHover=!1)}})})});var h1={video:"video--hYcS_",hide:"hide--E_pnK",header:"header--alHUl",left:"left--zASPt",right:"right--bCD8x",actionBtn:"action-btn--ZKFsc",usages:"usages--uHs64",fullScreen:"full-screen--qqF2N",imageDetailWrapper:"image-detail-wrapper--PjcZk",banner:"banner--r_ihm",bannerModel:"banner-model--ZU5fy",bg:"bg--wSlnv",videoBg:"video-bg--IL8Z_",bgColor:"bg-color--MsZEJ",bannerContent:"banner-content--PuvhV",bannerTitle:"banner-title--yxQwr",button:"button--gA4WI",kingKong:"king-kong--NkKFu",kingKongItem:"king-kong-item--yWt7e",lt:"lt--rYcR2",itemLabel:"item-label--un4Oo",itemDesc:"item-desc--hFx7B",rt:"rt--DBzXs",videoCover:"video-cover--OeUax",largeView:"large-view--hqY45",verticalView:"vertical-view--i93Uj",sectionTitle:"section-title--C7_sE",quickApplication:"quick-application--s97WO",quickApplies:"quick-applies--BMjgX",quickApply:"quick-apply--utNyN",isNew:"is-new--tfd6W",quickApplyContent:"quick-apply-content--AU11o",title:"title--x_Qbu",quickApplyBg:"quick-apply-bg--rKMRk",showcases:"showcases--w28S1",templateList:"template-list--rWfvp",templateItem:"template-item--MBhqI",videoBox:"video-box--V9TJX",createBtn:"create-btn--wjLfr",media:"media--IpzeF",mediaPoster:"media-poster--Ys5xk",tags:"tags--aJJtm",tag:"tag--ui4C3",promptBox:"prompt-box--t8Sjk",copyBtnWrap:"copy-btn-wrap--s9XzV",prompt:"prompt--gBYBK",copyBtn:"copy-btn--Lq5qQ",smallView:"small-view--Nyt4r",mediumView:"medium-view--CYuio",extraLargeView:"extra-large-view--d3sfL"},h2={src:"https://assets.monica.im/home-web/_next/static/media/banner2.145ed0d2.webp",height:1158,width:2106,blurDataURL:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4ID4AAAAwAgCdASoIAAQAAkA4JQBOjXAYIABp87L2AAD+vJ7GbQelY+fSAvfK+lYopdKHH7WPLrGYr+TkyzMiLN/IAA==",blurWidth:8,blurHeight:4},h3={src:"https://assets.monica.im/home-web/_next/static/media/bannerModels.eaec4daa.webp",height:145,width:565,blurDataURL:"data:image/webp;base64,UklGRmgAAABXRUJQVlA4WAoAAAAQAAAABwAAAQAAQUxQSBEAAAAALwwtIhYsAxxEDCYpKSgHJABWUDggMAAAANABAJ0BKggAAgACQDgllAJ0AQ77Il8AAP76ZrT+DeEXxkI8fABYY9fgtzQkmQAAAA==",blurWidth:8,blurHeight:2},h6={src:"https://assets.monica.im/home-web/_next/static/media/creativeEffectsCover.9f36023c.webp",height:260,width:400,blurDataURL:"data:image/webp;base64,UklGRpYAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSCkAAAAAAG2Dg4ODdQAA8v/////wAADy//////AAAPL/////8AAAeY2NjY10AABWUDggRgAAABACAJ0BKggABQACQDglmAJ0R/+BuJilTHAA/uz4HIXZsciFLGG7JsXincuCxsUxTh5WU4QQdpr8GFRXpcrZ+rTUpZhTPAA=",blurWidth:8,blurHeight:5},h5={src:"https://assets.monica.im/home-web/_next/static/media/image2VideoCover.7b2a907d.webp",height:260,width:401,blurDataURL:"data:image/webp;base64,UklGRoIAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSCkAAAAAAQMFeYuLih8F9v//////TQj///////9OBvb//////04CCA1+kI+OIgBWUDggMgAAAJABAJ0BKggABQACQDglnAACmmUd4AD+qeDsSuQcFTXRRMrEy6OcfvAPyd1tjrghAAAA",blurWidth:8,blurHeight:5},h4={src:"https://assets.monica.im/home-web/_next/static/media/text2ImageCover.2459346a.webp",height:260,width:429,blurDataURL:"data:image/webp;base64,UklGRoQAAABXRUJQVlA4WAoAAAAQAAAABwAABAAAQUxQSCgAAAABYFTbVipkbjE0CBHIpQ10/vLB1wwRMQEopHuUZO2n+9FeFGYVADwFVlA4IDYAAACQAQCdASoIAAUAAkA4JaQAAp1GTQAA4nnKJS+Aqk0SGe+LfiJ4HTg49bpgJ7S6QGfN3TwEAAA=",blurWidth:8,blurHeight:5};class h9 extends S.PN{get mediaQuery(){return{isSmall:this.rootViewWidth<500,isMedium:this.rootViewWidth>500&&this.rootViewWidth<680,isLarge:this.rootViewWidth>1e3&&this.rootViewWidth<1200,isExtraLarge:this.rootViewWidth>1200}}get kingKongItems(){return[{label:this.S.textToVideo,desc:this.S.textToVideoDesc,image:(0,te.Q)(h4),payload:{modelType:"kling",generateFrom:"text"},eventPayload:{type:"text_to_video",modelType:"kling"}},{label:this.S.imageToVideo,desc:this.S.imageToVideoDesc,image:(0,te.Q)(h5),payload:{modelType:"kling",generateFrom:"image"},eventPayload:{type:"image_to_video",modelType:"kling"}},{label:this.S.creativeEffects,desc:this.S.creativeEffectsDesc,image:(0,te.Q)(h6),payload:{modelType:"pixverse",generateFrom:"image"},eventPayload:{type:"effect_video",modelType:"kling"}}]}get videoToolConfigDefaultValue(){return{banners:[{text:this.S.bannerText,imageUrl:(0,te.Q)(h2),buttonWording:this.S.bannerBtnText,iconImageUrl:(0,te.Q)(h3),jumpType:"browser",jumpLink:this.genUrl({payload:JSON.stringify({modelType:"kling"})})}],quickActions:[{title:this.S.venom,payload:{modelType:"pixverse",templateId:"303624537709312"},badge:"New",videoUrl:"https://assets.monica.im/assets/pixverse/venom_241104.mp4",imageUrl:"https://assets.monica.im/assets/pixverse/compressed_venom22.png",description:""},{title:this.S.hugYourLove,payload:{modelType:"pixverse",templateId:"303624424723200"},videoUrl:"https://assets.monica.im/assets/pixverse/hug2.mp4",imageUrl:"https://assets.monica.im/assets/pixverse/compressed_hug2.png",description:"",badge:""},{title:this.S.squishIt,payload:{modelType:"pixverse",templateId:"302325299692608"},videoUrl:"https://assets.monica.im/assets/pixverse/squish_it_241028_1.mp4",imageUrl:"https://assets.monica.im/assets/pixverse/compressed_squish_it_241028_1.png",description:"",badge:""},{title:this.S.wickedShots,payload:{modelType:"pixverse",templateId:"303788802773760"},videoUrl:"https://assets.monica.im/assets/pixverse/wicked_shots_241028.mp4",imageUrl:"https://assets.monica.im/assets/pixverse/compressed_wicked_shots_241028.png",description:"",badge:""}],showcase:[{description:this.S.showcase1Prompt,imageUrl:"https://assets.monica.im/assets/video_page/image/hailuo1.jpg",videoUrl:"https://assets.monica.im/assets/video_page/video/hailuo1.mp4",groupKey:"Hailuo",modelType:"minimax",modelName:"Hailuo",payload:{duration:"5",generateFrom:"image",modelType:"minimax",originUrl:"https://d3v3rcl2jr3rbr.cloudfront.net/user_upload_by_module/image_tool/files/25759/YfUfmx2cAsfXQBN0.png?Expires=1735196357&Signature=NmzCQXjVJSvK~aKEqFM3BR7tWMnDLNZr5TBnqoU7O~l1jnKfrPenZGXq41Onq10XxqAoI7Nu2NuPzngamWo4PG~chNWxul2HGPUJbtwZveFY1aunB-fbMX9WvhOVS~JO3j2Ae20uJicvjsUh3duH044rMtrMP4iFNszY9GyZTo7hYuD0Tl-aS-iMhVwwnHsESGqE9XL7ZbWn73WtR-CuMbd66hG7icS35wOq8wwWKz1FMoMpLHL0eSN~EO3U~ea4lhtLnnPsDhrcstCS1-gYgfrztTEYmPb3bX4dG3JXX3AwHRY9WN3q9QbLgwDS4z23YmRiILMNLEC0ZZXi-KsMuQ__&Key-Pair-Id=K3R1VTQB23XU5S",prompt:this.S.showcase1Prompt}},{description:this.S.showcase2Prompt,imageUrl:"https://assets.monica.im/assets/video_page/image/hailuo2.jpg",videoUrl:"https://assets.monica.im/assets/video_page/video/hailuo2.mp4",groupKey:"Hailuo",modelType:"minimax",modelName:"Hailuo",payload:{duration:"5",generateFrom:"image",modelType:"minimax",originUrl:"https://d3v3rcl2jr3rbr.cloudfront.net/user_upload_by_module/image_tool/files/25759/Mpe6Up6eANlLPbw0.png?Expires=1735197210&Signature=SeaTb3vpIzIAVPu1gEUrAXN66lD4lVtWigt8B7k0ObQz3~Gl7f8B0rYPwUD3OcCPRJICDQo2KOnOeqme-udTiQJGjN5jCYGXJlG5I5GFPW-qM8KDMdYueAfPA-60w5-QYRj6EsOcW~xTodpM2MLJn~0SqWGbbm6disLIUn7OquNJySxcTBypykUpB0wn9u-~qrfzRib43CLeL3YBm11cmhys1SYKvEs~WDEuFCnvgf2sdgiujjoXrQcfhzXr7ygLN8Ltltei4QmMrzY4rACc3j1KQjUAKQWy8sUUdsihSYK~Hzd5wDmTYmBJUY6~yKy7qZDKSkb7tE0QjZen8CTKfg__&Key-Pair-Id=K3R1VTQB23XU5S",prompt:this.S.showcase2Prompt}},{description:this.S.showcase3Prompt,imageUrl:"https://assets.monica.im/assets/video_page/image/hailuo3.jpg",videoUrl:"https://assets.monica.im/assets/video_page/video/hailuo3.mp4",groupKey:"Hailuo",modelType:"minimax",modelName:"Hailuo",payload:{duration:"5",generateFrom:"text",modelType:"minimax",prompt:this.S.showcase3Prompt}},{description:this.S.showcase4Prompt,imageUrl:"https://assets.monica.im/assets/video_page/image/hailuo4.jpg",videoUrl:"https://assets.monica.im/assets/video_page/video/hailuo4.mp4",groupKey:"Hailuo",modelType:"minimax",modelName:"Hailuo",payload:{duration:"5",generateFrom:"image",modelType:"minimax",originUrl:"https://d3v3rcl2jr3rbr.cloudfront.net/user_upload_by_module/image_tool/files/25759/Yj9JrtNj1fqu48br.png?Expires=1735128524&Signature=lzdWyeVTkL~n-DjkePUI4PLEdR-stgiYwxp6DSpz-MFDF8CgzQkbdNr2qWAOZ96cZPTOrgrHtMQ3dKZPxneZs9PE7bMLHfSEJYi6zFCF4yhrjoYatdWAIe4bQW6zO931ERwRRxWnwBgtWHulPwdoFlGvRBjnXghXeLG0OmxtXPK2huHuhAfYL7yafsEfDqvhAOESAM9rdPfmUOrAWT8YKrUVFk20xH9Hn7addujTg8yXfgykY1D2w13msZY7cPH~1O7lOyFHBtFJvdi1d2WPMmPRPn8O7w2vYor4pgzrFvjkEJ8Av~uF-WQASdyNvhgl2urNMht48nUMgulzST-daQ__&Key-Pair-Id=K3R1VTQB23XU5S",prompt:this.S.showcase4Prompt}}]}}get S(){return ei.S.Global.modules.Video}get isToolsWeb(){return r1.S.location.pathname.includes("image-tools")}get videoHomeToolConfig(){return tc.serverConfigController.getStaticConfig("videoPage")||this.videoToolConfigDefaultValue}get banner(){var e;return(null===(e=this.videoHomeToolConfig)||void 0===e?void 0:e.banners)||[]}get quickApplies(){var e;let t=(null===(e=this.videoHomeToolConfig)||void 0===e?void 0:e.quickActions)||[];return t.forEach(e=>{"https://assets.monica.im/assets/pixverse/venom_241104.mp4"===e.videoUrl&&(e.videoUrl=(0,te.Q)("https://assets.monica.im/home-web/_next/static/videos/venom-15c031d9b78f6ac8927f081181979fda.mp4"))}),t}get showcases(){var e;return(null===(e=this.videoHomeToolConfig)||void 0===e?void 0:e.showcase)||[]}onTitleChange(){st.imageController.detectTitle()}tabChange(){"video"===eF.J.activeTabKey&&st.imageController.markIsVideo()}async onBeforeMount(){r1.S.isRunInServerSide||(f.o.isWeb&&st.imageController.initPageStatusByUrl(r1.S.location.href),Promise.all([tp.Cc.manualUpdateStaticConfig([tm.$.videoPage,tm.$.imageGenConfigList,tm.$.pixverseTemplateList,tm.$.videoGenConfigList],!0),hP.i7.fetchImageNewTags()]))}onViewCreate(){this.init()}onViewDestroy(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()}init(){new URL(r1.S.location.href).searchParams.get("showHistory")&&!r1.S.isRunInServerSide&&(this.handleToggleHistory(!0),st.imageController.deleteQuery(["showHistory"])),this.rootEl&&(this.rootViewWidth=this.rootEl.clientWidth,this.resizeObserver=new window.ResizeObserver(e=>{if(e[0]){let{width:t}=e[0].contentRect;this.rootViewWidth=t}}),this.resizeObserver.observe(this.rootEl)),st.imageController.markIsVideo(),e9.W.createUserBehaviorEvent({eventName:"video_home_show"})}async handleQuickApplyClick(e){await hP.i7.quickApplyClick("video_page_quick_actions",e),hP.i7.fetchImageNewTags()}handleToggleHistory(e){f.o.isExtension?e&&window.open(w.m.genUrl("".concat(w.m.genFullUrl(eR.Cl.video)),{showHistory:"true"}),"_blank"):(this.historyVisible=e,e&&(st.imageController.activeHistoryTab="video",st.imageController.fetchHistory(!0)))}genUrl(e){return w.m.genUrl(st.imageController.getBaseUrl().toString(),{key:"imageAnimator",...e})}buildColor(e){return e?e.startsWith("rgb")||e.startsWith("#")?e:"#".concat(e):e}userVipChange(){eD.userController.isVipUser&&(st.imageController.fetchHistory(),st.imageController.updateCurrentGenerateInfo())}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"rootEl",null),(0,T._)(this,"historyVisible",!1),(0,T._)(this,"rootViewWidth",0),(0,T._)(this,"resizeObserver",null)}}(0,I.gn)([S.SB],h9.prototype,"historyVisible",void 0),(0,I.gn)([S.SB],h9.prototype,"rootViewWidth",void 0),(0,I.gn)([S.Fl],h9.prototype,"mediaQuery",null),(0,I.gn)([S.Fl],h9.prototype,"kingKongItems",null),(0,I.gn)([S.Fl],h9.prototype,"videoToolConfigDefaultValue",null),(0,I.gn)([S.Fl],h9.prototype,"S",null),(0,I.gn)([S.Fl],h9.prototype,"isToolsWeb",null),(0,I.gn)([S.Fl],h9.prototype,"videoHomeToolConfig",null),(0,I.gn)([S.Fl],h9.prototype,"banner",null),(0,I.gn)([S.Fl],h9.prototype,"quickApplies",null),(0,I.gn)([S.Fl],h9.prototype,"showcases",null),(0,I.gn)([(0,S.YP)(()=>[st.imageController.routeKey,st.imageController.templateForm.template,st.imageController.generateVideoForm.modelType,st.imageController.viewType])],h9.prototype,"onTitleChange",null),(0,I.gn)([(0,S.YP)(()=>[eF.J.activeTabKey])],h9.prototype,"tabChange",null),(0,I.gn)([(0,S.YP)(()=>[eD.userController.isVipUser])],h9.prototype,"userVipChange",null);let h7=S._Y.createComponent("Video",h9,e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:q()(h1.video,{[h1.hide]:st.imageController.showDetail,[h1.smallView]:e.mediaQuery.isSmall,[h1.mediumView]:e.mediaQuery.isMedium,[h1.largeView]:e.mediaQuery.isLarge,[h1.extraLargeView]:e.mediaQuery.isExtraLarge}),ref:t=>{e.rootEl=t},[eh.$A]:1,children:[(0,y.jsx)(h8,{vm:e}),(0,y.jsx)(ge,{vm:e}),(0,y.jsx)(gt,{vm:e}),(0,y.jsx)(gi,{vm:e}),(0,y.jsx)(go,{vm:e})]}),st.imageController.showDetail&&(0,y.jsx)("div",{className:h1.imageDetailWrapper,children:(0,y.jsx)(hB,{})})]})),h8=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:h1.header,children:[(0,y.jsxs)("div",{className:h1.left,children:[(0,y.jsx)(e7.Q,{tabKey:"image",title:t.S.video}),"sidebar"===ex.L.mainWindowMode?(0,y.jsx)(tN.u,{title:t.S.fullPage,trigger:["hover"],placement:"bottomLeft",children:(0,y.jsx)("div",{className:h1.fullScreen,onClick:()=>{E.w.openFullScreen()},onMouseDown:e=>{e.stopPropagation()},children:(0,y.jsx)(t_.J,{name:"monicaFull",size:12,color:"var(--theme-icon-tertiary)"})})}):null]}),(0,y.jsxs)("div",{className:q()(h1.right,{[h1.web]:f.o.isWeb}),children:[t.isToolsWeb&&(0,y.jsx)(r2.S,{scene:"ui",placement:"bottom",value:r8.q.getComposeLanguageKeyByLocale(ei.a.locale),triggerNode:(0,y.jsx)(r3.c,{color:"var(--theme-icon-primary)",size:20}),onChange:e=>{if(e&&"auto"!==e){let t=se.sC[e].locale;tV.ll.set("locale",t)}r8.q.afterLocaleSelect()}}),(0,y.jsx)(sl,{}),"horizontal"===ex.L.mainWindowMode?(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:h1.actionBtn,icon:(0,y.jsx)(ez,{size:20,color:"var(--theme-icon-primary)"}),onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank"),st.imageController.sendEvent("video_tool_click",{button:"feedback",position:"home"})},children:t.S.feedback}):(0,y.jsx)(ez,{size:20,padding:6,color:"var(--theme-icon-primary)",button:!0,title:t.S.feedback,onClick:()=>{window.open("https://monica.im/feedback?issueType=tool_issue","_blank"),st.imageController.sendEvent("video_tool_click",{button:"feedback"})}}),(0,y.jsx)(tK.x,{trigger:"click",open:t.historyVisible,onOpenChange:e=>{t.handleToggleHistory(e),e&&st.imageController.sendEvent("video_tool_click",{button:"history",position:"home"})},content:(0,y.jsx)(sj,{onClose:()=>{t.handleToggleHistory(!1)}}),placement:"bottom",children:"horizontal"===ex.L.mainWindowMode?(0,y.jsx)(eO.z,{type:"outline",size:"medium",className:h1.actionBtn,icon:(0,y.jsx)(r6.w,{title:t.S.historyTitle,size:20,color:"var(--theme-icon-primary)"}),children:t.S.historyTitle}):(0,y.jsx)(r6.w,{title:t.S.historyTitle,size:20,padding:6,color:"var(--theme-icon-primary)",button:!0})}),(0,y.jsxs)("div",{className:h1.usages,children:[(0,y.jsx)(eW.x,{isNewStyle:!0,usageModule:st.imageController.usageModule}),t.isToolsWeb&&(0,y.jsx)(r5.q,{placement:"bottomLeft",size:32})]})]})]})}),ge=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsx)(y.Fragment,{children:t.banner.map((e,i)=>(0,y.jsxs)("a",{href:e.jumpLink,className:q()(h1.banner),target:f.o.isWeb?"_self":"_blank",onClick:t=>{st.imageController.sendEvent("video_tool_click",{button:"banner",position:"home",bannerLink:e.jumpLink}),e9.W.createUserBehaviorEvent({eventName:"video_home_banner_click"}),e.jumpLink&&st.imageController.gotoWithLink(e.jumpLink),t.preventDefault()},rel:"noreferrer",children:[(0,y.jsxs)("div",{className:h1.bg,style:e.videoUrl?{}:{backgroundSize:"cover",backgroundImage:"url(".concat(e.imageUrl,")"),backgroundRepeat:"no-repeat"},children:[e.videoUrl&&(0,y.jsx)(c6.n,{src:e.videoUrl,poster:e.imageUrl,type:"video/mp4",className:h1.videoBg,muted:!0,playsInline:!0,autoPlay:!0,loop:!0,lazyload:!0}),(0,y.jsx)("div",{className:h1.bgColor})]}),(0,y.jsxs)("div",{className:h1.bannerContent,children:[(0,y.jsx)("div",{className:h1.bannerTitle,style:{textShadow:"2px 2px 6px black",color:t.buildColor(N.C.isDark&&e.textColorDark?e.textColorDark:e.textColor)},children:e.text}),e.iconImageUrl&&(0,y.jsx)("div",{className:h1.bannerModel,children:(0,y.jsx)(eH.E,{src:e.iconImageUrl,type:"image/webp",skeleton:!0,lazyload:!0,useServiceFetch:f.o.isExtension,style:{width:"auto"}})}),e.buttonWording&&(0,y.jsx)("div",{className:h1.button,style:{color:t.buildColor(N.C.isDark&&e.buttonTextColorDark?e.buttonTextColorDark:e.buttonTextColor),backgroundColor:t.buildColor(N.C.isDark&&e.buttonBgColorDark?e.buttonBgColorDark:e.buttonBgColor)},children:e.buttonWording})]})]},i))})}),gt=(0,F.Pi)(function(e){var t;let{vm:i}=e;return(null===(t=i.kingKongItems)||void 0===t?void 0:t.length)?(0,y.jsx)("div",{className:q()(h1.kingKong,{[h1.largeView]:i.rootViewWidth>=1250,[h1.verticalView]:i.rootViewWidth<=900}),children:i.kingKongItems.map((e,t)=>(0,y.jsxs)("a",{href:i.genUrl({payload:JSON.stringify(e.payload)}),className:h1.kingKongItem,onClick:t=>{t.preventDefault(),t.stopPropagation(),st.imageController.goto("imageAnimator",e.payload),st.imageController.sendEvent("video_tool_click",{button:"kingkong",position:"home",...e.eventPayload}),e9.W.createUserBehaviorEvent({eventName:"video_home_kingkong_click"})},children:[(0,y.jsxs)("div",{className:h1.lt,children:[(0,y.jsx)("div",{className:h1.itemLabel,children:e.label}),(0,y.jsx)("div",{className:h1.itemDesc,children:e.desc})]}),(0,y.jsx)("div",{className:h1.rt,children:(0,y.jsx)(eH.E,{skeleton:!0,src:e.image,className:h1.videoCover})})]},t))}):null}),gi=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:q()(h1.quickApplication),children:[(0,y.jsx)("h2",{className:h1.sectionTitle,children:t.S.quickApplies}),(0,y.jsx)(e4.K,{contentClass:h1.quickApplies,operationClassName:h1.operationClass,children:t.quickApplies.map((e,i)=>{let{imageUrl:o,payload:a,title:n,videoUrl:r,key:s}=e,l=0===i,c=!1;return Array.isArray(st.imageController.imageNewTagsMap.videoPageQuickActions)&&(c=!!s&&!!st.imageController.imageNewTagsMap.videoPageQuickActions.includes(s)),(0,y.jsx)(h0,{autoPlay:l,children:(0,y.jsxs)("a",{href:t.genUrl({payload:JSON.stringify(a)}),className:h1.quickApply,onClick:i=>{i.preventDefault(),i.stopPropagation(),c&&e.key&&t.handleQuickApplyClick(e.key),st.imageController.goto("imageAnimator",a),st.imageController.sendEvent("video_tool_click",{button:"quickApply",position:"home",key:"template",type:null==a?void 0:a.modelType}),e9.W.createUserBehaviorEvent({eventName:"video_home_quick_apply_click",extData:{template:null==a?void 0:a.template}})},children:[r&&(0,y.jsx)(c6.n,{useProvider:!0,preload:l?void 0:"none",poster:o,src:r,className:h1.quickApplyBg,type:"video/mp4",loop:!0,playsInline:!0,muted:!0,lazyload:!0,useServiceFetch:f.o.isExtension}),c&&(0,y.jsx)("div",{className:h1.isNew,children:"New"}),(0,y.jsx)("div",{className:h1.quickApplyContent,children:(0,y.jsxs)("div",{className:h1.title,children:[(0,y.jsx)("span",{children:n}),(0,y.jsx)(eG.X,{size:20,color:"currentColor",style:{display:"inline-flex"}})]})})]},i)},i)})})]})}),go=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:h1.showcases,children:[(0,y.jsx)("h2",{className:h1.sectionTitle,children:t.S.showcases}),(0,y.jsx)("div",{className:h1.templateList,children:t.showcases.map((e,i)=>{var o,a,n,r;let s=0===i;return(0,y.jsxs)("a",{href:t.genUrl({payload:JSON.stringify(e.payload)}),className:q()(h1.templateItem),onClick:t=>{t.preventDefault(),t.stopPropagation();let i=e.payload;st.imageController.goto("imageAnimator",i);let o={modelType:null==i?void 0:i.modelType,imageScene:null==i?void 0:i.imageScene,aspectRatio:null==i?void 0:i.aspectRatio,imageStyle:null==i?void 0:i.imageStyle,type:"video"};st.imageController.sendEvent("video_tool_click",{button:"createByDemo",position:"home",...o}),e9.W.createUserBehaviorEvent({eventName:"video_home_go_create",extData:{payload:i}})},children:[(0,y.jsx)(h0,{autoPlay:s,children:(0,y.jsxs)("div",{className:h1.videoBox,children:[e.videoUrl&&(0,y.jsx)(c6.n,{useProvider:!0,src:e.videoUrl,type:"video/mp4",poster:e.imageUrl,loop:!0,playsInline:!0,muted:!0,lazyload:!0,useServiceFetch:f.o.isExtension,className:h1.media,posterClassname:h1.mediaPoster,preload:s?void 0:"none"}),(0,y.jsxs)("div",{className:h1.tags,children:[e.modelName&&(0,y.jsx)("div",{className:h1.tag,children:e.modelName}),(null===(o=e.payload)||void 0===o?void 0:o.generateFrom)==="image"&&(0,y.jsx)("div",{className:h1.tag,children:(0,y.jsx)(hZ,{size:16,color:"currentColor"})})]}),(0,y.jsxs)("div",{className:h1.createBtn,children:[(0,y.jsx)(hW.J,{color:"#fff",size:20}),t.S.goCreate]})]})}),(null===(a=e.payload)||void 0===a?void 0:a.prompt)&&(0,y.jsxs)("div",{className:h1.promptBox,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,y.jsx)("p",{className:h1.prompt,children:e.payload.prompt}),(0,y.jsx)(tN.u,{title:(null===(n=e.payload)||void 0===n?void 0:n.prompt)||"",mouseLeaveDelay:0,children:(0,y.jsx)("div",{className:h1.copyBtnWrap,children:(0,y.jsx)(tZ.X,{showTooltip:!1,onCopy:()=>{st.imageController.sendEvent("video_tool_click",{button:"copy_prompt"})},text:(null===(r=e.payload)||void 0===r?void 0:r.prompt)||"",render:(e,i)=>(0,y.jsx)("div",{className:h1.copyBtn,onClick:i,children:e?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(lc,{size:16,color:"var(--theme-function-success)"}),t.S.copied]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(hX.T,{size:16,color:"var(--theme-text-primary)"}),t.S.copyPrompt]})})})})})]})]},i)})})]})});var ga=i(8294),gn={discover:"discover--SwuC3",inner:"inner--QELde",adsWrap:"ads-wrap--emo0K",ads:"ads--Evfde",adsInner:"ads-inner--NPOM7",arrowBtn:"arrow-btn--pAEny",hide:"hide--mH1Dl",lt:"lt--tJlpI",rt:"rt--IViXF",bannerAd:"banner-ad--fcOtU",title:"title--hUjEe",text:"text--JR7hg",btn:"btn--Qlzsj",img:"img--TYuUk",recommend:"recommend--bwgqM",recommendTitle:"recommend-title--WG_pD",recommendList:"recommend-list--shd_P",col2:"col-2--goPkf",recommendItem:"recommend-item--jAM9a",col3:"col-3--RopNN",col4:"col-4--gnXev",textRight:"text-right--rg6Xn",top:"top--vAtvO",name:"name--jAmyt",banner:"banner--RB0KE"},gr={src:"https://assets.monica.im/home-web/_next/static/media/aiDetector.c0ffc9bc.png",height:281,width:351,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAPFBMVEXy9fT08/Pe3t7m5ubj4+Pv7+/i4uK9vb3t6+vu8fHl5eXl5eXp6en4+fnxtL/06evxyND17u/xzNPxvcj/vEoaAAAADXRSTlP92lbE+ZEjAvz709Retye9SwAAAAlwSFlzAAALEwAACxMBAJqcGAAAADNJREFUeJwFwYEBgDAIBLFT2wLqA3b/YU0wM1vzXdi8r0canIfkzsAjBDhRvbs/oDIzSz8nPgGqqTEMPAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6},gs={src:"https://assets.monica.im/home-web/_next/static/media/chatAdBanner.9f50cd74.webp",height:360,width:420,blurDataURL:"data:image/webp;base64,UklGRswAAABXRUJQVlA4WAoAAAAQAAAABwAABgAAQUxQSDkAAAAAAAAFCQlJLAAAGfP9/f+eAAAt+P//+SkAGvH////4KQAMv/3///3kMQAq+P///d4uACr4///4KAAAVlA4IGwAAADQAQCdASoIAAcAAkA4JZgCdADG4iLgAAD9xaCpH4MdPMx5kX/Nz4eTzN/9hPn/tBlGPnj/y1SJ3v4j/+JciJlhHhs+QNvfDxv7EvfXjUjKQCgqyE7bYRNGXsPsmkRah9IQocT2nax3jX+4AAA=",blurWidth:8,blurHeight:7},gl={src:"https://assets.monica.im/home-web/_next/static/media/code.7227f3f4.png",height:281,width:351,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAJFBMVEX6+vnn8vX////v9/Lz9PT2+Pj0+Pz8+vr19fX////09/ny9PQdfsGRAAAACnRSTlP+xQHF3pLKbbg9c4NlaAAAAAlwSFlzAAALEwAACxMBAJqcGAAAACtJREFUeJwtxskRgDAQxECB8aXJP1/XuuiPxPtjj6c0JipA5wYWSeo/EtUDEQUA0fmKqcoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},gc={src:"https://assets.monica.im/home-web/_next/static/media/codeAdBanner.0490809b.png",height:240,width:280,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAS1BMVEXx7+/d3NXV3Ofk4uvg6O3f4ePt7+/u7u/z8vDv7+/b5us2fv7W4efp6enH3OutyfHv7e0mc/7J1fAvef93qvhBhP3b5+vs7e5ppP9hOQmhAAAAGHRSTlMl3SW28Xl6ykK32tB5DN330XdVO/yo6LbtQeueAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOklEQVR4nB3BCQ6AIAxFwVdo8Rfcl8T7n9TEGa5jPJLEeO/N3Z3Te1/NDO3TD2WtmZnQ2hwRjQVKAT5CMwGxu9MT3QAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7},gd={src:"https://assets.monica.im/home-web/_next/static/media/desktopAdBanner.85dc4a33.png",height:240,width:280,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAPFBMVEUCEjn7+PtKP4uYjar08vxlVHUARwD+//5MaXEKBQ8/R7JYWNCloaqlna6OhdiScc1AhNsdS2h/f39hI16sov8kAAAAFHRSTlMV/LDD/rUB/gAe7O2+vu3n7q0CrWpMNcMAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA4SURBVHicLctJEkARDADRNiQR/AH3v6tSpVdv05QbxNSfFIFqZtYcag4hfw7/weswRESWM/U8qhssxQGAAFKFQgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7},gp={src:"https://assets.monica.im/home-web/_next/static/media/discoverChatPdf.7123a1e5.png",height:281,width:351,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAP1BMVEX////39/f////y8vL39/d0dHTm5uZMaXH19fX5+fnl5eXX19fj4+Pq6uq8vLzb29v7+/v////09PT5+fnu7u6oMc3WAAAAEnRSTlMB87hjmfkoAM3V/nOT4Pr9QQfGwAyMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANklEQVR4nBXCiRHAIAgEwFNBMH7JYf+1OpldmAGw3+u5yQfUzM0YFcVjqWqHtDjPmQJPJCP5BShhAcCto/XWAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},gm={src:"https://assets.monica.im/home-web/_next/static/media/discoverHumanize.d0d3a0ed.png",height:281,width:351,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAMFBMVEXk5OTt7Ozw8fHj4+Pv7+/i4uLl5eXe3t709PTn5+fp6en5+Pj08vO+7t6k6tPL7uIXcapVAAAAC3RSTlMB/ff5kSPUVtrDXhEZFEsAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicBcGJAYAwDAOxS/oBdtL9t0UCYM1vwdzvlgbnkSI8yAjZDtK36sqkurvkHx3TAW0Ie3GxAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},gh={src:"https://assets.monica.im/home-web/_next/static/media/discoverPodcast.82bded11.png",height:281,width:351,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAMFBMVEX19Pajo6Pp6en5+fnz8/Xq6+nm5+bx7/L19fXV1dXi4uL4+Pjw8PDj4+P7+/zS0tKjno1uAAAADnRSTlP+Av7k4sS8/Lc8c5+abmuni2MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAvSURBVHicLcG3AQAgEAOx+0AGs/+2NEjYh+1Sa1nGSNEUg5NqkJPuF0ed8CtH8QAYxAEO2a1LYAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6},gg={src:"https://assets.monica.im/home-web/_next/static/media/discoverTranslate.27e3981b.png",height:281,width:351,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAALVBMVEXj4+P09PT////8/Pz29vbr8vf//6z7+/uBeqb8/Pzu7e1ptfk+n/ddmeODyP88t/NvAAAACXRSTlP9/gJuyMUBVPyotTdpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMklEQVR4nCXJUQ4AIQgD0VaKCrh7/+Madb5eMujthSGX5A6LzORfMALImrC4+M4io9YGGCoBBvPkkgsAAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},gu={src:"https://assets.monica.im/home-web/_next/static/media/mindmap.b85ea927.png",height:281,width:351,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAMFBMVEXV4uLw8PD8+ff09PT7+/vFxMT39/f9/Pzc3N37+/v////6+vr39vbm5ub+/f3e3d0HmWCWAAAADHRSTlMCwv3hdfyYyMlBRofiTMEfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nDXBSRIAIAgEsQEX1Grw/7/1ZCJ922ytiKPuZFZ1TRjDa8rgXtzUINNpDxv2AUq3So9LAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},gv={src:"https://assets.monica.im/home-web/_next/static/media/mobileAdBanner.981c247e.png",height:240,width:280,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAXVBMVEVMaXH18vGah27CureZmZloaWyinav+//+pqKhPT0+ifXoAAP+yj4yuraiUlJSlnZdQR0C+rLHb3uDMtnm9o4/xiTZsYlrT2t7q6+v39fTPuqSLbEpWTF3Q19v/ylMPgQHbAAAAGHRSTlMA/XL+WF9//XMOLAjV/Gf7+/37sIli/fxjBMJbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAO0lEQVR4nAXBhQHAMAzAMBeTdswZ/n/mJCgxpViA3rpw5gbUnLi2goqIZKhLmIbLw/btz3h7YH2P2ZQfPOQCVnuokLkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:7},gC={src:"https://assets.monica.im/home-web/_next/static/media/write.57754dd6.png",height:281,width:351,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAMFBMVEX/y/9MaXH8+P38/fz+9P/8/fz7/Pnn7fPD1er8/Pz8/fvj3NOizejR6vX46t////9p6Ib9AAAAD3RSTlMCAPJS/nTEkEQk0G9xuriDdST+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAL0lEQVR4nDXBxQEAIAwEsKsL0v235UUCfNLu7i2wUVUdgw0z8xhK4p6QAijXTsIDF2EBBQQjlRYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},gx=i(66928);class gy extends S.PN{get S(){return ei.S.Global.modules.MainWindow.Discover}get adsDefault(){return[{bannerImageUrl:(0,te.Q)(gv),text:this.S.mobileText,title:this.S.mobileTitle,jumpLink:w.m.genFullUrl(eR.Cl.download),buttonWording:this.S.download,jumpType:"browser"},{bannerImageUrl:(0,te.Q)(gd),text:this.S.desktopText,title:this.S.desktopTitle,jumpLink:w.m.genFullUrl(eR.Cl.download),buttonWording:this.S.download,jumpType:"browser"},{bannerImageUrl:(0,te.Q)(gs),text:this.S.chatText,title:this.S.chatTitle,jumpLink:w.m.genFullUrl(w.m.genUrl(eR.Cl.profile,{action:"bind_app"})),buttonWording:this.S.defaultBtnText,jumpType:"browser"},{bannerImageUrl:(0,te.Q)(gc),text:this.S.codeText,title:this.S.codeTitle,jumpLink:w.m.genFullUrl(eR.Cl.code),buttonWording:this.S.defaultBtnText,jumpType:"browser"}]}get ads(){var e;return this.transformBanner((null===(e=tc.serverConfigController.getStaticConfig("banners"))||void 0===e?void 0:e.discoverAd)||[]),this.adsDefault}get recommendsDefault(){return[{bannerImageUrl:(0,te.Q)(gm),title:this.S.humanize,jumpLink:w.m.genFullUrl(eR.oo.aiTextHumanizer),content:this.S.humanizeDesc,jumpType:"browser"},{bannerImageUrl:(0,te.Q)(gr),title:this.S.aiDetector,jumpLink:w.m.genFullUrl(eR.oo.chatGptDetector),content:this.S.aiDetectorDesc,jumpType:"browser"},{bannerImageUrl:(0,te.Q)(gp),title:this.S.chatPDF,jumpLink:w.m.genFullUrl(eR.Cl.docChat),content:this.S.chatPDFDesc,jumpType:"browser"},{bannerImageUrl:(0,te.Q)(gC),title:this.S.writing,key:"write",content:this.S.writingDesc,jumpType:"in_app",jumpLink:"write"},{bannerImageUrl:(0,te.Q)(gg),title:this.S.aiTranslate,key:"translate",content:this.S.aiTranslateDesc,jumpType:"in_app",jumpLink:"translate"},{bannerImageUrl:(0,te.Q)(gh),title:this.S.podcast,jumpLink:w.m.genFullUrl(eR.oo.aiPodcast),jumpType:"browser",content:this.S.podcastDesc},{bannerImageUrl:(0,te.Q)(gu),title:this.S.mindmap,jumpLink:w.m.genFullUrl(eR.oo.aiMindMapMaker),jumpType:"browser",content:this.S.mindmapDesc},{bannerImageUrl:(0,te.Q)(gl),title:this.S.code,jumpLink:w.m.genFullUrl(eR.Cl.code),jumpType:"browser",content:this.S.codeDesc}]}get recommends(){let e=this.transformRecommend(tc.serverConfigController.getStaticConfig("discoverRecommendList")||[]);return e.length>0?e:this.recommendsDefault}onViewCreate(){tc.serverConfigController.loadStaticConfig(gx.BO.Discover)}onViewDestroy(){}transformBanner(e){return e.map(e=>({...e,bannerImageUrl:e.bannerImageUrl||"",text:e.text||"",jumpLink:e.jumpLink||"",buttonWording:e.buttonWording||this.S.defaultBtnText,jumpType:e.jumpType||"browser"}))}transformRecommend(e){return e.map(e=>({...e,bannerImageUrl:e.bannerImageUrl||"",title:e.title||"",jumpLink:e.jumpLink||"",content:e.content||"",jumpType:e.jumpType||"browser"}))}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"adsCardEl",null),(0,T._)(this,"adsIndex",0)}}(0,I.gn)([S.SB],gy.prototype,"adsIndex",void 0),(0,I.gn)([S.Fl],gy.prototype,"S",null),(0,I.gn)([S.Fl],gy.prototype,"adsDefault",null),(0,I.gn)([S.Fl],gy.prototype,"ads",null),(0,I.gn)([S.Fl],gy.prototype,"recommendsDefault",null),(0,I.gn)([S.Fl],gy.prototype,"recommends",null);let gb=S._Y.createComponent("Discover",gy,e=>{var t;let i=E.w.sidebarWidth>900?50:75,o=e.ads.length*i>100,a=(null===(t=e.adsCardEl)||void 0===t?void 0:t.clientWidth)||0,n="translateX(0)";0!==e.adsIndex&&(n="translateX(calc(".concat(-e.adsIndex*a,"px - var(--padding-x)))"));let r=0!==e.adsIndex&&o,s=e.adsIndex!==e.ads.length-1&&o;return(0,y.jsx)("div",{className:gn.discover,style:{"--padding-x":"12px"},children:(0,y.jsxs)("div",{className:gn.inner,children:[(0,y.jsx)(e7.Q,{tabKey:"discover",title:e.S.discover}),(0,y.jsxs)("div",{className:gn.adsWrap,children:[(0,y.jsx)("div",{className:gn.ads,children:(0,y.jsx)("div",{className:gn.adsInner,style:{transform:n},children:e.ads.map((t,o)=>{let a="in_app"===t.jumpType;return(0,y.jsxs)("a",{className:gn.bannerAd,href:a?w.m.genFullUrl("".concat(eR.Cl.monicaWeb,"/").concat(t.jumpLink)):t.jumpLink,target:"_blank",rel:"noopener noreferrer",onClick:e=>{a&&t.jumpLink&&(e.preventDefault(),eF.J.onTabChange(t.jumpLink)),e9.W.createUserBehaviorEvent({eventName:"discover_click",extData:{type:t.jumpLink}})},style:{width:"calc(".concat(i,"% - var(--padding-x) / 2)"),flexShrink:"0"},ref:t=>{e.adsCardEl=t},children:[(0,y.jsxs)("div",{className:gn.lt,children:[(0,y.jsx)("div",{className:gn.title,children:t.title}),(0,y.jsx)("div",{className:gn.text,children:t.text}),(0,y.jsxs)("span",{className:gn.btn,children:[t.buttonWording,(0,y.jsx)(eG.X,{size:16,color:"currentColor"})]})]}),(0,y.jsx)("div",{className:gn.img,children:(0,y.jsx)(eH.E,{src:t.bannerImageUrl,skeleton:!0})})]},o)})})}),(0,y.jsx)("span",{className:q()(gn.arrowBtn,gn.lt,{[gn.hide]:!r}),onClick:()=>{r&&(e.adsIndex-=1)},children:(0,y.jsx)(t_.J,{name:eh.UZ.lineDirectionArrowLeft,size:14,color:"var(--theme-icon-tertiary)"})}),(0,y.jsx)("span",{className:q()(gn.arrowBtn,gn.rt,{[gn.hide]:!s}),onClick:()=>{s&&(e.adsIndex+=1)},children:(0,y.jsx)(t_.J,{name:eh.UZ.arrowRight,size:14,color:"var(--theme-icon-tertiary)"})})]}),(0,y.jsx)(ga.m,{scene:"discover"}),(0,y.jsxs)("div",{className:gn.recommend,children:[(0,y.jsx)("div",{className:gn.recommendTitle,children:e.S.whatsNew}),(0,y.jsx)("div",{className:q()(gn.recommendList,{[gn.col2]:E.w.sidebarWidth<600,[gn.col3]:E.w.sidebarWidth>=600&&E.w.sidebarWidth<900,[gn.col4]:E.w.sidebarWidth>=900,[gn.textRight]:ei.a.rtl}),children:e.recommends.map((e,t)=>{let i="in_app"===e.jumpType;return(0,y.jsxs)(i?"div":"a",{className:gn.recommendItem,href:e.jumpLink,target:"_blank",rel:"noopener noreferrer",onClick:()=>{i&&e.jumpLink&&eF.J.onTabChange(e.jumpLink),e9.W.createUserBehaviorEvent({eventName:"discover_click",extData:{type:e.jumpLink}})},children:[(0,y.jsxs)("div",{className:gn.top,children:[(0,y.jsx)("div",{className:gn.title,children:e.title}),(0,y.jsx)("div",{className:gn.name,children:e.content})]}),(0,y.jsx)("div",{className:gn.banner,children:(0,y.jsx)(eH.E,{lazyload:!0,useServiceFetch:!0,usePlaceholder:!0,src:N.C.isDark&&e.bannerImageUrlDark?e.bannerImageUrlDark:e.bannerImageUrl})})]},t)})})]})]})})});var gf=i(10148),gw={hintPinPopover:"hint-pin-popover--uB4WX",inSidePanel:"in-side-panel--E8zVR",content:"content--SUlBv",arrow:"arrow--Ex0zx",topRight:"top-right--XULA5",close:"close--GPiM3",title:"title--Jkr9D",plugin:"plugin--rUXJZ",desc:"desc--V8NJ7",banner:"banner--q5IVV"};class gS extends S.PN{get S(){return ei.S.Global.modules.MainWindow.HintPinPopover}async onViewCreate(){gf.E.pinHint.startPinCheckInterval()}onViewDestroy(){gf.E.pinHint.stopPinCheckInterval()}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],gS.prototype,"S",null);let gA=S._Y.createComponent("HintPinPopover",gS,e=>(0,y.jsxs)("div",{className:q()(gw.hintPinPopover,gw.arrow,gw.topRight,{[gw.inSidePanel]:"ext-side-panel"===f.o.entryType}),onMouseDown:e=>e.stopPropagation(),children:[(0,y.jsx)("div",{className:gw.close,onClick:()=>{gf.E.pinHint.handleIgnored()},children:(0,y.jsx)(t_.J,{size:16,name:"sClose",color:"currentColor"})}),(0,y.jsxs)("div",{className:gw.content,children:[(0,y.jsxs)("div",{className:gw.title,children:[(0,y.jsx)("span",{className:gw.click,children:e.S.click}),(0,y.jsx)(t_.J,{className:gw.plugin,size:20,name:"pluginLine",color:"currentColor"}),(0,y.jsx)("span",{children:e.S.PinProductAfterClick})]}),(0,y.jsx)("div",{className:gw.desc,children:e.S.callUp}),(0,y.jsx)("div",{className:gw.banner,children:(0,y.jsx)("video",{src:"https://assets.monica.im/home-web/_next/static/videos/pinGuide-221100628d9e0335528c6a34511668e8.mp4",autoPlay:!0,loop:!0,muted:!0})})]})]})),gj=(0,F.Pi)(()=>gf.E.pinHint.visible?(0,y.jsx)(gA,{}):null);var gk=i(99784),gN=i(97767),g_={mainWindow:"main-window--mzjnd",modeSidebarLeft:"mode-sidebar-left--x5hFC",viewWrapper:"view-wrapper--QjcRn",navWindowWrapper:"nav-window-wrapper--sdlVc",childWrapper:"child-wrapper--Hb0gS",mainWindowHide:"main-window-hide--qc2S6",dialogRoot:"dialog-root--d98b5"},gT=i(90974),gI=i(92347);class gM extends S.PN{get defaultSideBarWidth(){return 450}get resizableController(){return E.w.resizableController}handleVisibleChange(){E.w.visible&&(eL.M.createUserBehaviorEvent({eventName:"main_window_show",extData:{tab:eF.J.activeTabKey,mode:"full",theme:P.A.theme===gI.Q2.Auto?"auto-".concat(N.C.isDark?"dark":"light"):"".concat(N.C.isDark?"dark":"light"),env:f.o.isExtension?"ext-side-panel"===f.o.entryType?"sidePanel":"extension":"web"}}),"extension"===f.o.platform&&"chat"===eF.J.activeTabKey&&eF.J.createUserBehaviorEvent(eF.J.activeTabKey))}async onViewCreate(){var e;eL.M.createUserBehaviorEvent({eventName:"side_bar_show_v2",extData:{vipVersion:null===(e=eD.userController.userVipStatus)||void 0===e?void 0:e.vipVersion,isSidePanel:"ext-side-panel"===f.o.entryType}}),Promise.all([this.initResizable(),eD.userController.checkLogin()]).finally(()=>{setTimeout(async()=>{this.props.disableAutoDisplay||await gf.E.run()})}),this.props.fromContentRoot&&E.w.onAppViewCreated(),this.listenerManager.addWindowEventListener("resize",()=>{this.handleWindowResize()}),tU.f.getProxy(this).add((0,tB.U5)(()=>[E.w.sidebarPosition],()=>{this.updatePageSpace()})).add((0,tB.U5)(()=>{var e,t;return[null===(e=this.resizableController.data)||void 0===e?void 0:e.width,null===(t=this.resizableController.data)||void 0===t?void 0:t.height]},()=>{var e;(null===(e=this.resizableController.data)||void 0===e?void 0:e.width)<=this.navChangedWidth?this.rightNavHidden=!0:this.rightNavHidden=!1,E.w.eventEmitter.emit("resize")})).add((0,tB.U5)(()=>[P.A.mainWindowStyle],()=>{this.resizableController.handleWindowResize(),E.w.eventEmitter.emit("resize")})).add((0,tB.U5)(()=>E.w.visible,e=>{e?this.afterOpen():this.afterClose()})),this.afterOpen(),this.syncPinStatusToServer(),"sidebar"===ex.L.mainWindowMode&&gT.j.triggerTabReadingPage()}onViewDestroy(){this.afterClose(),setTimeout(()=>{var e,t;null===(e=this.resizableController.root)||void 0===e||e.removeEventListener("mouseenter",this.resizableController.handleRootMouseEnter),null===(t=this.resizableController.root)||void 0===t||t.removeEventListener("mouseleave",this.resizableController.handleRootMouseLeave),this.listenerManager.removeAll(),tU.f.getProxy(this).disposeAll(),this.resizableController.dispose()},0)}afterOpen(){this.updatePageSpace(),setTimeout(()=>{this.updatePageSpace()},50),setTimeout(()=>{this.updatePageSpace()},200)}afterClose(){this.updatePageSpace(!0)}updatePageSpace(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("sidebar"!==ex.L.mainWindowMode||!f.o.isExtension)return;let t=["doc.postsharp.net","www.authing.cn"],i=()=>{setTimeout(()=>{ex.L.dispatchedResizeByMainWindow=!0;try{let e=window.location.host;t.includes(e)||window.dispatchEvent(new Event("resize"))}catch(e){}setTimeout(()=>{ex.L.dispatchedResizeByMainWindow=!1},10)},0)},o=()=>{let e=document.getElementById(this.rightSpaceStyleId);e&&e.remove()},a=()=>{let e=document.getElementById(this.leftSpaceStyleId);e&&e.remove()},n=()=>{a(),o(),i()};if(e){n();return}E.w.visible?(n(),"left"===E.w.sidebarPosition?(()=>{var e,t;let i=null!==(t=null===(e=this.resizableController.data)||void 0===e?void 0:e.width)&&void 0!==t?t:this.defaultSideBarWidth,o=document.getElementById(this.leftSpaceStyleId),a="\n      html {\n        position: relative !important;\n        min-height: 100vh !important;\n        padding-left: ".concat(i,"px !important;\n      }\n      ");if(o)o.innerHTML=a;else{let e=document.createElement("style");e.id=this.leftSpaceStyleId,e.innerHTML=a,document.head.appendChild(e)}})():(()=>{var e,t;let i=document.getElementById(this.rightSpaceStyleId),o="\n      html {\n        width: ".concat(this.calcHtmlElementWidth()," !important;\n        position: relative !important;\n        min-height: 100vh !important;\n        ").concat(ei.a.rtl&&"margin-right: ".concat(null!==(t=null===(e=this.resizableController.data)||void 0===e?void 0:e.width)&&void 0!==t?t:this.defaultSideBarWidth,"px;"),"\n      }\n      ");if(i)i.innerHTML=o;else{let e=document.createElement("style");e.id=this.rightSpaceStyleId,e.innerHTML=o,document.head.appendChild(e)}})(),i()):n()}calcHtmlElementWidth(){var e,t;let i=null!==(t=null===(e=this.resizableController.data)||void 0===e?void 0:e.width)&&void 0!==t?t:this.defaultSideBarWidth;return"calc(100% - ".concat(i,"px)")}async initResizable(){let e=await this.getResizableData();this.resizableController.init({defaultData:e,getMinSize:()=>({width:this.sidebarMinWidth,height:0}),getMaxSize:()=>({width:window.innerWidth,height:window.innerHeight}),getIsLock:()=>!!f.o.isDesktop||"horizontal"===ex.L.mainWindowMode||!E.w.visible,getAllowedDirection:()=>E.w.isSidebarRenderLeft?["right"]:["left"],onChange:e=>{tV.ll.set("mainWindowWidth",e.width),E.w.visible&&this.updatePageSpace()}}),setTimeout(()=>{var e,t;null===(e=this.resizableController.root)||void 0===e||e.addEventListener("mouseenter",this.resizableController.handleRootMouseEnter),null===(t=this.resizableController.root)||void 0===t||t.addEventListener("mouseleave",this.resizableController.handleRootMouseLeave)})}async getResizableData(){let e=await tV.ll.get("mainWindowWidth"),t=this.defaultSideBarWidth;return e&&(t=Math.min(Math.max(e,this.sidebarMinWidth),window.innerWidth-20)),f.o.isWeb&&(t=window.innerWidth),{translateX:0,translateY:0,height:0,width:t}}async syncPinStatusToServer(){if(!f.o.isExtension)return;let e=await tV.ll.getIsPinned();e!==await tV.ll.get("isPinned")&&(eL.M.createUserBehaviorEvent({eventName:"monica_pin_status",extData:{status:e?"pin":"unPin"}}),tV.ll.set("isPinned",e))}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"listenerManager",new L.M),(0,T._)(this,"onRenderedCalled",!1),(0,T._)(this,"rightNavHidden",!1),(0,T._)(this,"navChangedWidth",408),(0,T._)(this,"sidebarMinWidth",420),(0,T._)(this,"leftSpaceStyleId","monica-style-left-space"),(0,T._)(this,"rightSpaceStyleId","monica-style-right-space"),(0,T._)(this,"handleWindowResize",(0,r4.Z)(()=>{this.getResizableData().then(e=>{this.resizableController.data=e})},100))}}(0,I.gn)([S.SB],gM.prototype,"onRenderedCalled",void 0),(0,I.gn)([S.SB],gM.prototype,"rightNavHidden",void 0),(0,I.gn)([tB.Fl],gM.prototype,"defaultSideBarWidth",null),(0,I.gn)([(0,S.YP)(()=>[E.w.visible])],gM.prototype,"handleVisibleChange",null);var gL=i(12284),gB=i(26025);class gE extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var gD=JSON.parse('{"fill":"none","content":"\\n<g id=\\"start icon\\">\\n<path id=\\"Union\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M14.4999 1.71875L14.4529 1.71875C13.8172 1.71872 13.2692 1.71869 12.8274 1.77351C12.3558 1.83202 11.8994 1.96333 11.5125 2.30443C11.4388 2.36938 11.3693 2.43889 11.3044 2.51255C10.9633 2.89946 10.832 3.35588 10.7734 3.8275C10.7186 4.26927 10.7187 4.81722 10.7187 5.45296L10.7187 5.5L10.7187 5.54704C10.7187 6.18279 10.7186 6.73073 10.7734 7.1725C10.832 7.64413 10.9633 8.10055 11.3044 8.48745C11.3693 8.56112 11.4388 8.63063 11.5125 8.69558C11.8994 9.03668 12.3558 9.16798 12.8274 9.2265C13.2692 9.28132 13.8172 9.28129 14.4529 9.28125L14.4999 9.28125L14.547 9.28125C15.1827 9.28129 15.7307 9.28132 16.1724 9.2265C16.6441 9.16798 17.1005 9.03668 17.4874 8.69558C17.5611 8.63063 17.6306 8.56112 17.6955 8.48745C18.0366 8.10055 18.1679 7.64413 18.2264 7.1725C18.2813 6.73073 18.2812 6.18279 18.2812 5.54704L18.2812 5.5L18.2812 5.45297C18.2812 4.81722 18.2813 4.26927 18.2264 3.8275C18.1679 3.35588 18.0366 2.89946 17.6955 2.51255C17.6306 2.43889 17.5611 2.36938 17.4874 2.30443C17.1005 1.96333 16.6441 1.83202 16.1724 1.77351C15.7307 1.71869 15.1827 1.71872 14.547 1.71875L14.4999 1.71875ZM12.5458 3.47648C12.6018 3.42713 12.7048 3.36321 13.0198 3.32411C13.3539 3.28266 13.8038 3.28125 14.4999 3.28125C15.1961 3.28125 15.646 3.28266 15.98 3.32411C16.2951 3.36321 16.3981 3.42713 16.4541 3.47648C16.4786 3.49813 16.5018 3.5213 16.5235 3.54585C16.5728 3.60183 16.6367 3.70484 16.6758 4.0199C16.7173 4.35397 16.7187 4.80384 16.7187 5.5C16.7187 6.19617 16.7173 6.64604 16.6758 6.9801C16.6367 7.29517 16.5728 7.39818 16.5235 7.45415C16.5018 7.47871 16.4786 7.50188 16.4541 7.52353C16.3981 7.57287 16.2951 7.6368 15.98 7.67589C15.646 7.71734 15.1961 7.71875 14.4999 7.71875C13.8038 7.71875 13.3539 7.71734 13.0198 7.67589C12.7048 7.6368 12.6018 7.57287 12.5458 7.52353C12.5212 7.50188 12.4981 7.47871 12.4764 7.45415C12.4271 7.39818 12.3631 7.29517 12.3241 6.9801C12.2826 6.64604 12.2812 6.19617 12.2812 5.5C12.2812 4.80384 12.2826 4.35397 12.3241 4.0199C12.3631 3.70484 12.4271 3.60183 12.4764 3.54585C12.4981 3.5213 12.5212 3.49813 12.5458 3.47648ZM5.5 1.71875L5.45296 1.71875L5.45296 1.71875C4.81722 1.71872 4.26927 1.71869 3.8275 1.77351C3.35588 1.83202 2.89946 1.96333 2.51255 2.30443C2.43889 2.36938 2.36938 2.43889 2.30443 2.51255C1.96333 2.89946 1.83202 3.35588 1.77351 3.8275C1.71869 4.26927 1.71872 4.81722 1.71875 5.45296L1.71875 5.45296L1.71875 5.5L1.71875 5.54704L1.71875 5.54705C1.71872 6.18279 1.71869 6.73073 1.77351 7.1725C1.83202 7.64413 1.96333 8.10055 2.30443 8.48745C2.36938 8.56112 2.43889 8.63063 2.51255 8.69558C2.89946 9.03668 3.35588 9.16798 3.8275 9.2265C4.26927 9.28132 4.81722 9.28129 5.45296 9.28125L5.5 9.28125L5.54704 9.28125C6.18279 9.28129 6.73073 9.28132 7.1725 9.2265C7.64413 9.16798 8.10055 9.03668 8.48745 8.69558C8.56112 8.63063 8.63063 8.56112 8.69557 8.48745C9.03668 8.10055 9.16798 7.64413 9.2265 7.1725C9.28132 6.73073 9.28129 6.18279 9.28125 5.54704L9.28125 5.5L9.28125 5.45297C9.28129 4.81722 9.28132 4.26927 9.2265 3.8275C9.16798 3.35588 9.03668 2.89946 8.69557 2.51255C8.63063 2.43889 8.56112 2.36938 8.48745 2.30443C8.10055 1.96333 7.64413 1.83202 7.1725 1.77351C6.73073 1.71869 6.18279 1.71872 5.54705 1.71875L5.54704 1.71875L5.5 1.71875ZM3.54585 3.47648C3.60183 3.42713 3.70484 3.36321 4.0199 3.32411C4.35397 3.28266 4.80384 3.28125 5.5 3.28125C6.19617 3.28125 6.64604 3.28266 6.9801 3.32411C7.29517 3.36321 7.39818 3.42713 7.45415 3.47648C7.47871 3.49813 7.50188 3.5213 7.52353 3.54585C7.57287 3.60183 7.6368 3.70484 7.67589 4.0199C7.71734 4.35397 7.71875 4.80384 7.71875 5.5C7.71875 6.19617 7.71734 6.64604 7.67589 6.9801C7.6368 7.29517 7.57287 7.39818 7.52353 7.45415C7.50188 7.47871 7.47871 7.50188 7.45415 7.52353C7.39818 7.57287 7.29517 7.6368 6.9801 7.67589C6.64604 7.71734 6.19617 7.71875 5.5 7.71875C4.80384 7.71875 4.35397 7.71734 4.0199 7.67589C3.70484 7.6368 3.60183 7.57287 3.54585 7.52353C3.5213 7.50188 3.49813 7.47871 3.47648 7.45415C3.42713 7.39818 3.36321 7.29517 3.32411 6.9801C3.28266 6.64604 3.28125 6.19617 3.28125 5.5C3.28125 4.80384 3.28266 4.35397 3.32411 4.0199C3.36321 3.70484 3.42713 3.60183 3.47648 3.54585C3.49813 3.5213 3.5213 3.49813 3.54585 3.47648ZM5.45296 10.7187L5.5 10.7188L5.54704 10.7187C6.18279 10.7187 6.73073 10.7187 7.1725 10.7735C7.64413 10.832 8.10055 10.9633 8.48745 11.3044C8.56112 11.3694 8.63063 11.4389 8.69557 11.5125C9.03668 11.8995 9.16798 12.3559 9.2265 12.8275C9.28132 13.2693 9.28129 13.8172 9.28125 14.453L9.28125 14.5L9.28125 14.547C9.28129 15.1828 9.28132 15.7307 9.2265 16.1725C9.16798 16.6441 9.03668 17.1005 8.69557 17.4875C8.63063 17.5611 8.56112 17.6306 8.48745 17.6956C8.10055 18.0367 7.64413 18.168 7.1725 18.2265C6.73073 18.2813 6.18279 18.2813 5.54704 18.2813L5.5 18.2812L5.45296 18.2813C4.81722 18.2813 4.26927 18.2813 3.8275 18.2265C3.35588 18.168 2.89946 18.0367 2.51255 17.6956C2.43889 17.6306 2.36938 17.5611 2.30443 17.4875C1.96333 17.1005 1.83202 16.6441 1.77351 16.1725C1.71869 15.7307 1.71872 15.1828 1.71875 14.547L1.71875 14.5L1.71875 14.453C1.71872 13.8172 1.71869 13.2693 1.77351 12.8275C1.83202 12.3559 1.96333 11.8995 2.30443 11.5125C2.36938 11.4389 2.43889 11.3694 2.51255 11.3044C2.89946 10.9633 3.35588 10.832 3.8275 10.7735C4.26927 10.7187 4.81722 10.7187 5.45296 10.7187ZM4.0199 12.3241C3.70484 12.3632 3.60183 12.4271 3.54585 12.4765C3.5213 12.4981 3.49813 12.5213 3.47648 12.5458C3.42713 12.6018 3.36321 12.7048 3.32411 13.0199C3.28266 13.354 3.28125 13.8038 3.28125 14.5C3.28125 15.1962 3.28266 15.646 3.32411 15.9801C3.36321 16.2952 3.42713 16.3982 3.47648 16.4541C3.49813 16.4787 3.5213 16.5019 3.54585 16.5235C3.60183 16.5729 3.70484 16.6368 4.0199 16.6759C4.35397 16.7173 4.80384 16.7188 5.5 16.7188C6.19617 16.7188 6.64604 16.7173 6.9801 16.6759C7.29517 16.6368 7.39818 16.5729 7.45415 16.5235C7.47871 16.5019 7.50188 16.4787 7.52353 16.4541C7.57287 16.3982 7.6368 16.2952 7.67589 15.9801C7.71734 15.646 7.71875 15.1962 7.71875 14.5C7.71875 13.8038 7.71734 13.354 7.67589 13.0199C7.6368 12.7048 7.57287 12.6018 7.52353 12.5458C7.50188 12.5213 7.47871 12.4981 7.45415 12.4765C7.39818 12.4271 7.29517 12.3632 6.9801 12.3241C6.64604 12.2827 6.19617 12.2812 5.5 12.2812C4.80384 12.2812 4.35397 12.2827 4.0199 12.3241ZM14.4999 10.7188L14.4529 10.7188C13.8172 10.7187 13.2692 10.7187 12.8274 10.7735C12.3558 10.832 11.8994 10.9633 11.5125 11.3044C11.4388 11.3694 11.3693 11.4389 11.3044 11.5126C10.9633 11.8995 10.832 12.3559 10.7734 12.8275C10.7186 13.2693 10.7187 13.8172 10.7187 14.453L10.7187 14.5L10.7187 14.547C10.7187 15.1828 10.7186 15.7307 10.7734 16.1725C10.832 16.6441 10.9633 17.1005 11.3044 17.4875C11.3693 17.5611 11.4388 17.6306 11.5125 17.6956C11.8994 18.0367 12.3558 18.168 12.8274 18.2265C13.2692 18.2813 13.8172 18.2813 14.4529 18.2813H14.4999H14.547C15.1827 18.2813 15.7307 18.2813 16.1724 18.2265C16.6441 18.168 17.1005 18.0367 17.4874 17.6956C17.5611 17.6306 17.6306 17.5611 17.6955 17.4875C18.0366 17.1005 18.1679 16.6441 18.2264 16.1725C18.2813 15.7307 18.2812 15.1828 18.2812 14.547L18.2812 14.5L18.2812 14.453C18.2812 13.8172 18.2813 13.2693 18.2264 12.8275C18.1679 12.3559 18.0366 11.8995 17.6955 11.5126C17.6306 11.4389 17.5611 11.3694 17.4874 11.3044C17.1005 10.9633 16.6441 10.832 16.1724 10.7735C15.7307 10.7187 15.1827 10.7187 14.547 10.7188L14.4999 10.7188ZM12.5458 12.4765C12.6018 12.4271 12.7048 12.3632 13.0198 12.3241C13.3539 12.2827 13.8038 12.2813 14.4999 12.2813C15.1961 12.2813 15.646 12.2827 15.98 12.3241C16.2951 12.3632 16.3981 12.4271 16.4541 12.4765C16.4786 12.4981 16.5018 12.5213 16.5235 12.5459C16.5728 12.6018 16.6367 12.7048 16.6758 13.0199C16.7173 13.354 16.7187 13.8038 16.7187 14.5C16.7187 15.1962 16.7173 15.646 16.6758 15.9801C16.6367 16.2952 16.5728 16.3982 16.5235 16.4542C16.5018 16.4787 16.4786 16.5019 16.4541 16.5235C16.3981 16.5729 16.2951 16.6368 15.98 16.6759C15.646 16.7173 15.1961 16.7188 14.4999 16.7188C13.8038 16.7188 13.3539 16.7173 13.0198 16.6759C12.7048 16.6368 12.6018 16.5729 12.5458 16.5235C12.5212 16.5019 12.4981 16.4787 12.4764 16.4542C12.4271 16.3982 12.3631 16.2952 12.3241 15.9801C12.2826 15.646 12.2812 15.1962 12.2812 14.5C12.2812 13.8038 12.2826 13.354 12.3241 13.0199C12.3631 12.7048 12.4271 12.6018 12.4764 12.5459C12.4981 12.5213 12.5212 12.4981 12.5458 12.4765Z\\" fill=\\"#3D3D43\\"/>\\n</g>\\n","viewBox":"0 0 20 20"}');let gP=S._Y.createComponent("GridIcon",gE,e=>(0,y.jsx)(R.s,{...e.props,name:"GridIcon",iconData:gD}));class gF extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var gR=JSON.parse('{"fill":"none","content":"\\n<g id=\\"start icon\\">\\n<g id=\\"Union\\">\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M3.33924 1.875C2.43753 1.875 1.70654 2.60598 1.70654 3.5077V5.06869C1.70654 5.9704 2.43753 6.70139 3.33924 6.70139H4.90023C5.80195 6.70139 6.53293 5.97041 6.53293 5.06869V3.5077C6.53293 2.60599 5.80195 1.875 4.90023 1.875H3.33924ZM3.26904 3.5077C3.26904 3.46893 3.30047 3.4375 3.33924 3.4375H4.90023C4.939 3.4375 4.97043 3.46893 4.97043 3.5077V5.06869C4.97043 5.10746 4.939 5.13889 4.90023 5.13889H3.33924C3.30047 5.13889 3.26904 5.10746 3.26904 5.06869V3.5077Z\\" fill=\\"#222226\\"/>\\n<path d=\\"M9.09714 3.50693C8.66567 3.50693 8.31589 3.85671 8.31589 4.28818C8.31589 4.71965 8.66567 5.06943 9.09714 5.06943L17.7464 5.06943C18.1779 5.06943 18.5277 4.71965 18.5277 4.28818C18.5277 3.85671 18.1779 3.50693 17.7464 3.50693L9.09714 3.50693Z\\" fill=\\"#222226\\"/>\\n<path d=\\"M9.09714 9.21873C8.66567 9.21873 8.31589 9.56851 8.31589 9.99998C8.31589 10.4315 8.66567 10.7812 9.09714 10.7812L17.7464 10.7812C18.1779 10.7812 18.5277 10.4315 18.5277 9.99998C18.5277 9.56851 18.1779 9.21873 17.7464 9.21873L9.09714 9.21873Z\\" fill=\\"#222226\\"/>\\n<path d=\\"M9.09714 14.9305C8.66567 14.9305 8.31589 15.2803 8.31589 15.7118C8.31589 16.1433 8.66567 16.493 9.09714 16.493L17.7464 16.493C18.1779 16.493 18.5277 16.1433 18.5277 15.7118C18.5277 15.2803 18.1779 14.9305 17.7464 14.9305L9.09714 14.9305Z\\" fill=\\"#222226\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M1.70654 9.21952C1.70654 8.31781 2.43753 7.58682 3.33924 7.58682H4.90023C5.80195 7.58682 6.53293 8.31781 6.53293 9.21952V10.7805C6.53293 11.6822 5.80195 12.4132 4.90023 12.4132H3.33924C2.43753 12.4132 1.70654 11.6822 1.70654 10.7805V9.21952ZM3.33924 9.14932C3.30047 9.14932 3.26904 9.18075 3.26904 9.21952V10.7805C3.26904 10.8193 3.30047 10.8507 3.33924 10.8507H4.90023C4.939 10.8507 4.97043 10.8193 4.97043 10.7805V9.21952C4.97043 9.18075 4.939 9.14932 4.90023 9.14932H3.33924Z\\" fill=\\"#222226\\"/>\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M3.33924 13.2986C2.43753 13.2986 1.70654 14.0296 1.70654 14.9313V16.4923C1.70654 17.3941 2.43753 18.125 3.33924 18.125H4.90023C5.80195 18.125 6.53293 17.3941 6.53293 16.4923V14.9313C6.53293 14.0296 5.80195 13.2986 4.90023 13.2986H3.33924ZM3.26904 14.9313C3.26904 14.8926 3.30047 14.8611 3.33924 14.8611H4.90023C4.939 14.8611 4.97043 14.8926 4.97043 14.9313V16.4923C4.97043 16.5311 4.939 16.5625 4.90023 16.5625H3.33924C3.30047 16.5625 3.26904 16.5311 3.26904 16.4923V14.9313Z\\" fill=\\"#222226\\"/>\\n</g>\\n</g>\\n","viewBox":"0 0 20 20"}');let gV=S._Y.createComponent("ListIcon",gF,e=>(0,y.jsx)(R.s,{...e.props,name:"ListIcon",iconData:gR}));var gU=i(32692),gz=i(61923),gO=i(24467),gW=i(11985),gH=i(34889),gG=i(74563),gQ={markButton:"mark-button--Qjywx",isActive:"is-active--f3pKP"};let gJ=(e,t)=>{if(0===e.children.length)return!1;let i=gU.ML.marks(e);return!!i&&!0===i[t]},gq=(e,t)=>{gJ(e,t)?gU.ML.removeMark(e,t):gU.ML.addMark(e,t,!0)},gK=["numbered-list","bulleted-list"],gY=(e,t)=>{let{selection:i}=e;if(!i)return!1;let[o]=Array.from(gU.ML.nodes(e,{at:gU.ML.unhangRange(e,i),match:e=>{if(!gU.ML.isEditor(e)&&gU.W_.isElement(e)){if("listItem"===e.type){if("numbered-list"===t)return!!e.ordered;if("bulleted-list"===t)return!e.ordered}if("todo"===e.type&&"todo"===t)return!0}return!1}}));return!!o},gZ=(e,t)=>{let i=gY(e,t),o=gK.includes(t);gU.YR.unwrapNodes(e,{match:e=>!gU.ML.isEditor(e)&&gU.W_.isElement(e)&&gK.includes(e.type),split:!0}),gU.YR.setNodes(e,{type:i?"p":o?"listItem":"todo",ordered:"numbered-list"===t})},gX=e=>{let{format:t,icon:i,disabled:o,iconSize:a=14,size:n,onToggle:r}=e,s=(0,gO.ui)(),l=gJ(s,t)?"var(--theme-icon-secondary)":"var(--theme-icon-quaternary)";return o&&(l="var(--theme-icon-disable)"),(0,y.jsx)("div",{className:q()(gQ.markButton,{[gQ.isActive]:gJ(s,t)}),style:{width:n,height:n},onMouseDown:e=>{e.preventDefault(),gq(s,t),null==r||r(t)},children:(0,y.jsx)(t_.J,{name:i,color:l,size:a})})},g$=e=>{let{format:t,icon:i,disabled:o,iconSize:a=14,size:n,onToggle:r}=e,s=(0,gO.ui)(),l=gY(s,t),c=l?"var(--theme-icon-secondary)":"var(--theme-icon-quaternary)";return o&&(c="var(--theme-icon-disable)"),(0,y.jsx)("div",{className:q()(gQ.markButton,{[gQ.isActive]:l}),style:{width:n,height:n},onMouseDown:()=>{gZ(s,t),null==r||r(t)},children:(0,y.jsx)(t_.J,{name:i,color:c,size:a})})},g0=e=>{let{iconSize:t,size:i,title:o}=e,a=(0,gO.ui)();return(0,y.jsx)(tN.u,{title:o,children:(0,y.jsx)("div",{className:q()(gQ.markButton),style:{width:i,height:i},onMouseDown:()=>{w.m.selectFile(e=>{e.forEach(e=>{gG.G.handleUpload(a,e)})},{accept:gH.Gi.imageFileTypes})},children:(0,y.jsx)(t_.J,{name:"memoMobileImage",color:"var(--theme-icon-quaternary)",size:t})})})};var g1=i(62774),g2={memoQuickInput:"memo-quick-input--erpBS",active:"active--IussQ",editorWrapper:"editor-wrapper--NxVIq",editor:"editor--twlz4",internalEditor:"internal-editor--ogDDa",footer:"footer--G5kRX",markList:"mark-list--eEzUC",enterWrapper:"enter-wrapper--i6tN_",submitWrapper:"submit-wrapper--uPVvt",submit:"submit--rcvON",disable:"disable--aJbMx",placeholder:"placeholder--jcjzU",paragraphOverride:"paragraph-override--eKyI7"},g3=i(83153),g6=i(56332),g5=i(55272);let g4=[{type:"p",level:1,children:[{text:""}]}];class g9 extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MemoV2.QuickInputMemo}get isEmpty(){return!this.contentData.title&&!this.contentData.content}get disabled(){return this.isEmpty&&!this.hoverInput&&!this.focusInput}onBeforeMount(){let e=()=>{setTimeout(()=>{this.setCursor()},0)};tV.ll.get("quickInputMemoDraft").then(t=>{t&&this.overrideContent(t),e()}),eF.J.eventEmitter.listenBy(this,"tabChange",()=>{e()})}onViewCreate(){}setCursor(){if(this.editor){gO.F3.focus(this.editor);let e=gU.ML.end(this.editor,[]);gU.YR.select(this.editor,e)}}onViewDestroy(){var e;null===(e=this.dispose)||void 0===e||e.call(this),eF.J.eventEmitter.stopListenBy(this)}onContentChange(e){let t=g5.r.getMemoListRenderData(e);this.isEmptyData(e)?(this.contentData.title="",this.contentData.content="",this.contentData.summary="",this.contentData.plainText="",P.A.setQuickInputMemoDraft("")):(this.contentData.title=t.title,this.contentData.content=JSON.stringify(e),this.contentData.summary=t.summary,this.contentData.plainText=this.getPlainText(e,t.title),P.A.setQuickInputMemoDraft(this.contentData.content))}onSubmit(e){if(!this.isEmpty){eL.M.createUserBehaviorEvent({eventName:"memo_panel_send_msg"}),iH.a.sendEvent("memo_action_click",{button:"memo_quick_input_submit"});try{let t=JSON.parse(this.contentData.content),i=new g6.QW,o=i.get("content",g6.eI),a=(0,g3.Kh)(t);o.applyDelta(a);let n=g6.D$(i),r=btoa(String.fromCharCode(...new Uint8Array(n)));iH.a.addMemoWithContent(this.contentData,r),P.A.setQuickInputMemoDraft(""),this.resetContent(e)}catch(e){}setTimeout(()=>{this.setCursor()})}}resetContent(e){this.contentData={title:"",content:"",summary:"",plainText:""},gU.YR.removeNodes(e,{at:{anchor:{path:[0,0],offset:0},focus:{path:[e.children.length-1],offset:0}}}),gU.YR.insertNodes(e,g4,{at:[0]})}getPlainText(e,t){let i=g5.r.getAllEmbedTextContent(e),o=g5.r.getNodeTextContent(e);return o&&t&&o.startsWith(t)&&(o=o.slice(t.length)),"".concat(i,"\n").concat(o)}overrideContent(e){if(this.editor){let t=g4;try{t=JSON.parse(e);let i=g5.r.getMemoListRenderData(t),o=this.isEmptyData(t),a=this.getPlainText(t,i.title);o||(this.contentData={title:i.title,content:e,summary:i.summary,plainText:a},this.editor.children.length&&gU.YR.removeNodes(this.editor,{at:{anchor:{path:[0,0],offset:0},focus:{path:[this.editor.children.length-1],offset:0}}}),gU.YR.insertNodes(this.editor,t,{at:[0]}))}catch(e){}}}isEmptyData(e){return!e.length||1===e.length&&"p"===e[0].type&&1===e[0].children.length&&""===e[0].children[0].text}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"hoverEnter",!1),(0,T._)(this,"hoverExpand",!1),(0,T._)(this,"hoverInput",!1),(0,T._)(this,"focusInput",!1),(0,T._)(this,"contentData",{title:"",content:"",summary:"",plainText:""}),(0,T._)(this,"editor",null),(0,T._)(this,"dispose",null)}}(0,I.gn)([S.SB],g9.prototype,"hoverEnter",void 0),(0,I.gn)([S.SB],g9.prototype,"hoverExpand",void 0),(0,I.gn)([S.SB],g9.prototype,"hoverInput",void 0),(0,I.gn)([S.SB],g9.prototype,"focusInput",void 0),(0,I.gn)([S.SB],g9.prototype,"contentData",void 0),(0,I.gn)([S.Fl],g9.prototype,"S",null),(0,I.gn)([S.Fl],g9.prototype,"isEmpty",null),(0,I.gn)([S.Fl],g9.prototype,"disabled",null);var g7=i(89390);let g8=(0,g7.ZF)(e=>"p"===e.element.type?{className:g2.paragraphOverride}:{}),ue=S._Y.createComponent("MemoQuickInput",g9,e=>{let{placeholder:t}=e.props,i=(0,Q.useMemo)(()=>gW.P.pipe((0,gU.Jh)(),gz.VC,...g7.Gr),[]);i.context={mode:"web"},i.getDocId=()=>"",(0,Q.useEffect)(()=>{e.editor=i},[i]);let o=[t=>!!iB.t.isHotkey(t,["mod+enter"])&&(e.onSubmit(i),!0),...g7.qi],a=(0,G.t)(e=>{for(let t=0;t<o.length;t++)if(o[t](e,i)){e.preventDefault(),e.stopPropagation();break}});return(0,y.jsx)("div",{className:q()(g2.memoQuickInput,{[g2.active]:e.focusInput}),onMouseEnter:()=>{e.hoverInput=!0},onMouseLeave:()=>{e.hoverInput=!1},children:(0,y.jsx)("div",{className:q()(g2.editorWrapper),children:(0,y.jsxs)(gO.mH,{editor:i,initialValue:g4,onValueChange:t=>{e.onContentChange(t)},children:[(0,y.jsx)("div",{className:q()(g2.editor),children:(0,y.jsx)(gO.CX,{style:{direction:ei.a.rtl?"rtl":"ltr",textAlign:ei.a.rtl?"right":"left"},readOnly:!1,autoFocus:!1,className:g2.internalEditor,spellCheck:!1,renderLeaf:g7.Mw,renderElement:g8,onCopy:e=>{(0,g1.r)(e,i)},onKeyDown:a,placeholder:null!=t?t:ei.S.Global.modules.NoteEditor.untitled,renderPlaceholder:t=>{let{attributes:i}=t;return(0,y.jsx)("div",{...i,className:g2.placeholder,children:e.S.placeholder})},onFocus:()=>{e.focusInput=!0},onBlur:()=>{e.focusInput=!1}})}),(0,y.jsxs)("div",{className:g2.footer,children:[(0,y.jsxs)("div",{className:g2.markList,children:[(0,y.jsx)(gX,{format:"bold",icon:"memoBold",disabled:e.disabled}),(0,y.jsx)(gX,{format:"underline",icon:"memoUnderline",disabled:e.disabled}),(0,y.jsx)(g$,{format:"bulleted-list",icon:"memoList",disabled:e.disabled}),(0,y.jsx)(g$,{format:"numbered-list",icon:"memoOrderList",disabled:e.disabled}),(0,y.jsx)(g$,{format:"todo",icon:"memoTodo",disabled:e.disabled})]}),(0,y.jsx)("div",{className:g2.enterWrapper,children:(0,y.jsx)(tN.u,{title:"".concat(e.S.send,"(").concat(iB.t.prettifyHotkey("mod+enter"),")"),children:(0,y.jsx)("div",{className:g2.submitWrapper,onClick:()=>{e.onSubmit(i)},onMouseEnter:()=>{e.hoverEnter=!0},onMouseLeave:()=>{e.hoverEnter=!1},children:(0,y.jsx)(t_.J,{className:q()(g2.submit,{[g2.disable]:e.isEmpty}),name:"chatInputSend",size:20,color:e.isEmpty?"var(--theme-icon-disable)":"var(--theme-icon-brand)"})})})})]})]})})})});var ut=i(8050),ui=i(8209),uo=i(8586),ua={memoListScroll:"memo-list-scroll--V8r2C",memoList:"memo-list--XP42U",memoListLoading:"memo-list-loading--ylNxV",memoListEmpty:"memo-list-empty--eN3Ql",img:"img--EmDWm",quickLink:"quick-link--erBo5"},un=i(70860);class ur extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MemoV2.MemoList}onViewCreate(){}onViewDestroy(){}tryReadingSummary(){window.open("https://en.wikipedia.org/wiki/Elon_Musk","_blank"),eL.M.createUserBehaviorEvent({eventName:"memo_empty_click",source:"try_reading_summary"})}tryVideoSummary(){window.open("https://www.youtube.com/watch?v=zIwLWfaAg-8","_blank"),eL.M.createUserBehaviorEvent({eventName:"memo_empty_click",source:"try_video_summary"})}tryImageSummary(){un.d.imageUploadVisible=!0,un.d.handleChoseFile(),eL.M.createUserBehaviorEvent({eventName:"memo_empty_click",source:"try_image_summary"})}async onOpenWebPage(){iH.a.handleAddEmptyMemo(),eL.M.createUserBehaviorEvent({eventName:"memo_empty_click",source:"open_web_page"})}handleMoListTypeChange(){this.refreshKey+=1}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"refreshKey",1)}}(0,I.gn)([S.SB],ur.prototype,"refreshKey",void 0),(0,I.gn)([tB.Fl],ur.prototype,"S",null),(0,I.gn)([(0,S.YP)(()=>[iH.a.memoViewType])],ur.prototype,"handleMoListTypeChange",null);let us=S._Y.createComponent("MemoList",ur,e=>{if(iH.a.loading)return(0,y.jsx)(eC.g,{fullScreen:!0});let t=!iH.a.memoRenderList.length,i="grid"===iH.a.memoViewType,o=iH.a.memoRenderList.map(e=>{let{item:t,highlight:i}=e,o=(iH.a.allTagsRelationsWithLabel[t.uid]||[]).reduce((e,t)=>e+"@".concat(t.id),"");return(0,y.jsx)(uo.N,{item:t,highlight:i,scene:"list"},"".concat(t.uid,"@").concat(o))});return(0,y.jsx)(ev.v,{hasMore:iH.a.memoHasMore,className:ua.memoListScroll,dataLength:iH.a.memoRenderList.length,next:()=>{iH.a.getMemoList("loadMore")},loader:(0,y.jsx)(eC.g,{className:ua.memoListLoading,type:"geist"}),children:t?(0,y.jsx)(ul,{vm:e}):i?(0,y.jsx)(r7,{breakpointCols:{default:6,2400:7,2100:6,1800:5,1500:4,1200:3,900:2,600:1},children:o}):(0,y.jsx)("div",{className:q()(ua.memoList),children:o})},e.refreshKey)}),ul=(0,F.Pi)(e=>{let{vm:t}=e,i=(0,ei.x)(t.S.noMemosFound,{searchValue:iH.a.searchValue});return(0,y.jsxs)("div",{className:ua.memoListEmpty,children:[(0,y.jsx)(te.E,{alt:"empty",className:ua.img,src:(0,te.Q)(ui.Z)}),iH.a.searchResults?(0,y.jsx)("p",{style:{fontSize:"16px"},children:i}):(0,y.jsx)("div",{className:ua.quickLink,children:(0,y.jsx)("p",{children:t.S.emptyNote})})]})});var uc={memoUploadImage:"memo-upload-image--jFLdJ",desktop:"desktop--iNvLs",header:"header--M7Trd",closeBtn:"close-btn--fBk31",container:"container--mU_O8",default:"default--LEZ4J",dragging:"dragging--Ng2cz",uploadTextContainer:"upload-text-container--LbLVP",uploadTitle:"upload-title--BwPOA",uploadText:"upload-text--x9QQm",uploadingText:"uploading-text--P5fOV",uploadingIcon:"uploading-icon--chOq3",uploadFailedIcon:"upload-failed-icon--KPmjP",uploadFailedText:"upload-failed-text--fUYdi",againBtn:"again-btn--XoMtR"};class ud extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MemoV2.MemoUploadImage}async onDrop(e){un.d.handleUploadFile(e)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"dragging",!1),(0,T._)(this,"tmpFile",null)}}(0,I.gn)([S.SB],ud.prototype,"dragging",void 0),(0,I.gn)([S.SB],ud.prototype,"tmpFile",void 0),(0,I.gn)([tB.Fl],ud.prototype,"S",null);let up=S._Y.createComponent("MemoUploadImage",ud,e=>{let t=un.d.imageUploadVisible,i={loading:(0,y.jsx)(um,{vm:e}),error:(0,y.jsx)(uh,{vm:e})};return t?(0,y.jsxs)("div",{className:q()(uc.memoUploadImage,{[uc.desktop]:f.o.isDesktop}),children:[(0,y.jsxs)("div",{className:uc.header,children:[(0,y.jsx)("p",{className:uc.title,children:e.S.uploadImage}),(0,y.jsx)(eO.z,{type:"text-gray",className:uc.closeBtn,onClick:()=>{un.d.onCancel()},children:(0,y.jsx)(t_.J,{name:"close",size:16,color:"currentColor"})})]}),(0,y.jsx)(lb.b,{className:q()(uc.container,{[uc.dragging]:e.dragging,[uc.default]:"default"===un.d.uploadStatusManager.status}),draggable:!0,onDrag:t=>{e.dragging=t},onDrop:t=>{e.onDrop(t)},onClick:()=>{un.d.handleChoseFile()},children:i[un.d.uploadStatusManager.status]||(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(t_.J,{name:"uploadImage",size:48}),(0,y.jsx)("div",{className:uc.uploadTextContainer,children:(0,y.jsx)(aN.Z,{S:e.S.selectImageUpload,data:{maxImageSize:un.d.imageMaxSize},components:{title:e=>(0,y.jsx)("p",{className:uc.uploadTitle,children:e}),span:e=>(0,y.jsx)("span",{className:uc.uploadText,children:e})}})})]})})]}):null}),um=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:uc.uploadingIcon}),(0,y.jsx)("p",{className:uc.uploadingText,children:(0,ei.x)(t.S.uploading,{progress:un.d.uploadStatusManager.progress})})]})}),uh=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(t_.J,{name:"exclamation",size:38,color:"currentColor",className:uc.uploadFailedIcon}),(0,y.jsx)("p",{className:uc.uploadFailedText,children:t.S.uploadFailed}),(0,y.jsxs)(eO.z,{type:"gray",className:uc.againBtn,onClick:e=>{e.stopPropagation(),un.d.handleAgain()},children:[(0,y.jsx)(t_.J,{name:"refresh"}),t.S.tryAgain]})]})});var ug={memoSearch:"memo-search--fQjPy",chatText:"chat-text--nZHwj",memoSearchInput:"memo-search-input--bCWJy",input:"input--gw8PM",operations:"operations--Hyqfy",memoAction:"memo-action--bMIiY",chat:"chat--GRzq0"},uu={modal:"modal--hi7Zj",memoChatDialog:"memo-chat-dialog--NWfhB",inner:"inner--IexlD",sender:"sender--u4ydA",inputMsgBtn:"input-msg-btn--tDW3T",active:"active--VSSCF"};class uv extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MemoV2.MemoChatDialog}get sendBtnTip(){let e=P.A.getChatSendHotKeysLabel(P.A.getKeyBoardShortcut("chatSend"));return"".concat(this.S.send,"(").concat(e,")")}handleInputKeydown(e){let t=P.A.getChatSendHotKeys();if((0,en.ZP)(t,e)){e.preventDefault(),e.stopPropagation(),this.handleMemoChat();return}}handleInputChange(e){let{selectionStart:t,selectionEnd:i,value:o}=e.target;this.inputValue=o,requestAnimationFrame(()=>{var e,o;let a=null===(o=this.textareaRef)||void 0===o?void 0:null===(e=o.resizableTextArea)||void 0===e?void 0:e.textArea;a&&a.setSelectionRange(t,i)})}async handleMemoChat(){if(!this.inputValue.trim())return;let e=await D.Mp.beforeContinueInChat();E.w.show("chat"),e.modelAndSource.forceChatWithMemoEnabled=!0,e.sendQuestionOrAction({actionOrQuestion:this.inputValue.trim()}),this.props.onDisposed()}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"inputValue",""),(0,T._)(this,"textareaRef",null)}}(0,I.gn)([S.SB],uv.prototype,"inputValue",void 0),(0,I.gn)([S.SB],uv.prototype,"textareaRef",void 0),(0,I.gn)([S.Fl],uv.prototype,"S",null),(0,I.gn)([S.Fl],uv.prototype,"sendBtnTip",null);let uC=S._Y.createComponent("MemoChatDialog",uv,e=>{let t=!e.inputValue.trim();return(0,y.jsx)(W.u,{closeIconVisible:!1,fixed:"dialogRoot"===e.props.insertTarget,width:580,onDispose:e.props.onDisposed,className:uu.modal,closeOnMaskClick:!0,children:(0,y.jsx)("div",{className:uu.memoChatDialog,children:(0,y.jsxs)("div",{className:uu.inner,children:[(0,y.jsx)(ow.W,{className:uu.textarea,placeholder:e.S.placeholder,autoFocus:!0,rowsData:{min:5,max:10},allowResize:!1,value:e.inputValue,onKeyDown:t=>{e.handleInputKeydown(t)},onChange:t=>{e.handleInputChange(t)},getTextAreaRef:t=>{e.textareaRef=t},scrollAuto:!0}),(0,y.jsx)("div",{className:uu.sender,children:(0,y.jsx)(tN.u,{title:e.sendBtnTip,children:(0,y.jsx)("div",{className:q()(uu.inputMsgBtn,{[uu.active]:!t}),onClick:()=>{e.handleMemoChat()},children:(0,y.jsx)(t_.J,{name:"chatInputSend",color:"currentColor",size:18})})})})]})})})}),ux=H.t.createOpener(uC);class uy extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MemoV2.MemoSearch}async handleAddMemo(){iH.a.addMemoInSplitWindowMode()}handleMemoChat(){ux({insertTarget:"mainWindow"})}async onViewCreate(){eF.J.eventEmitter.listenBy(this,"tabChange",()=>{setTimeout(()=>{var e;null===(e=this.textAreaRef)||void 0===e||e.focus({cursor:"end"})})})}onViewDestroy(){eF.J.eventEmitter.stopListenBy(this)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"open",!1),(0,T._)(this,"memoAddLoading",!1),(0,T._)(this,"searchExpand",!1),(0,T._)(this,"textAreaRef",null),(0,T._)(this,"handleKeywordChange",(0,eb.Z)(()=>{iH.a.getMemoList("refresh"),eL.M.createUserBehaviorEvent({eventName:"memo_panel_search"})},300))}}(0,I.gn)([S.SB],uy.prototype,"open",void 0),(0,I.gn)([S.SB],uy.prototype,"memoAddLoading",void 0),(0,I.gn)([S.SB],uy.prototype,"searchExpand",void 0),(0,I.gn)([tB.Fl],uy.prototype,"S",null);let ub=S._Y.createComponent("MemoSearch",uy,e=>(0,y.jsxs)("div",{className:ug.memoSearch,children:[(0,y.jsxs)("div",{className:ug.operations,children:[(0,y.jsxs)(eO.z,{type:"blackOutline",className:q()(ug.memoAction,ug.chat),onClick:async t=>{t.stopPropagation(),e.handleMemoChat(),iH.a.sendEvent("memo_action_click",{button:"memo_chat"})},children:[(0,y.jsx)(t_.J,{name:"memoChat",size:16,color:"currentColor"}),(0,y.jsx)("span",{className:ug.chatText,children:e.searchExpand?"":e.S.chatWithMemo})]}),e.searchExpand?(0,y.jsx)("div",{className:ug.memoSearchInput,children:(0,y.jsx)(O.I,{getInputRef:t=>{e.textAreaRef=t},className:ug.input,size:"middle",placeholder:e.S.searchPlaceholder,type:"search",value:iH.a.searchValue,onChange:t=>{iH.a.loading=!0,iH.a.searchValue=t,iH.a.searchValue.trim()?iH.a.mode="search":iH.a.mode="normal",e.handleKeywordChange()},onClear:()=>{var t;null===(t=e.textAreaRef)||void 0===t||t.focus()},originInputProps:{onBlur:()=>{iH.a.searchValue||(e.searchExpand=!1)}}})}):(0,y.jsx)(tN.u,{title:e.S.searchMemo,children:(0,y.jsx)(eO.z,{type:"blackOutline",className:q()(ug.memoAction),onClick:async t=>{t.stopPropagation(),e.searchExpand=!0,setTimeout(()=>{var t;null===(t=e.textAreaRef)||void 0===t||t.focus()}),iH.a.sendEvent("memo_action_click",{button:"memo_search"})},children:(0,y.jsx)(t_.J,{name:"docChatSearch",size:20})})}),(0,y.jsx)(tN.u,{title:e.S.addMemo,children:(0,y.jsx)(eO.z,{type:"blackOutline",className:q()(ug.memoAction),onClick:async t=>{eL.M.createUserBehaviorEvent({eventName:"memo_panel_click_add_memo"}),t.stopPropagation(),await e.handleAddMemo(),e.open=!1,iH.a.sendEvent("memo_action_click",{button:"memo_add"})},children:(0,y.jsx)(t_.J,{name:"addMemo",size:20})})})]}),(0,y.jsx)(up,{})]}));var uf={memoSelectMenu:"memo-select-menu--Gadso",selectNum:"select-num--xQhwx",num:"num--RgL9p",operations:"operations--yNo6j",btn:"btn--C5vZq"};class uw extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MemoV2.MemoSelect}get allCanSelectList(){return iH.a.memoDataSources.filter(e=>!e.status||"complete"===e.status)}get checkAll(){return this.allCanSelectList.every(e=>iH.a.selectMemos.some(t=>t.uid===e.uid))}handleToggle(){this.checkAll?iH.a.selectMemos=[]:iH.a.selectMemos=[...this.allCanSelectList]}onViewCreate(){}onViewDestroy(){}async handleDelete(){this.deleteLoading||(0,t7.B)({title:this.S.deleteConfirmTitle,content:(0,ei.x)(this.S.deleteConfirmNotice,{num:iH.a.selectMemos.length}),okBtnType:"primary",okText:this.S.deleteConfirmOk,okBtnProps:{type:"danger"},onOk:async()=>{try{this.deleteLoading=!0,await iH.a.batchDelete(),this.deleteLoading=!1}catch(e){return this.deleteLoading=!1,ef.M.error(w.m.formatErrorMsg(e)),!1}return!0},insertTarget:"mainWindow"})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"deleteLoading",!1)}}(0,I.gn)([S.SB],uw.prototype,"deleteLoading",void 0),(0,I.gn)([S.Fl],uw.prototype,"S",null),(0,I.gn)([S.Fl],uw.prototype,"allCanSelectList",null),(0,I.gn)([S.Fl],uw.prototype,"checkAll",null);let uS=S._Y.createComponent("MemoSelectMenu",uw,e=>(0,y.jsxs)("div",{className:uf.memoSelectMenu,children:[(0,y.jsxs)("div",{className:uf.selectNum,onClick:()=>{e.handleToggle()},children:[(0,y.jsx)(aB.X,{indeterminate:!e.checkAll&&!!iH.a.selectMemos.length,checked:!!iH.a.selectMemos.length}),(0,y.jsx)(aN.Z,{S:e.S.selectNum,components:{span:()=>(0,y.jsx)("span",{className:uf.num,children:iH.a.selectMemos.length})}})]}),(0,y.jsxs)("div",{className:uf.operations,children:[(0,y.jsx)(eO.z,{onClick:()=>{e.handleDelete()},className:uf.btn,size:"medium",disabled:!iH.a.selectMemos.length,type:"outline",icon:(0,y.jsx)(t_.J,{name:"delete",size:16,color:"var(--theme-icon-tertiary)"}),children:e.S.delete}),(0,y.jsx)(eO.z,{onClick:()=>{iH.a.exitSelectMode()},className:uf.btn,size:"medium",type:"outline",icon:(0,y.jsx)(t_.J,{name:"exit",size:16,color:"var(--theme-icon-tertiary)"}),children:"grid"===iH.a.memoViewType?e.S.exit:e.S.exitLess})]})]}));var uA=i(19132),uj={textSelect:"text-select--bppaZ",textWrapper:"text-wrapper--mWzWK",icon:"icon--I_3Zr",inner:"inner--XoNqE",selectNum:"select-num--GqKD7",isButton:"is-button--JYs4J",active:"active--ttqF3",sizeSmall:"size-small--iQIVs",sizeMedium:"size-medium--nyKCM",listWrapper:"list-wrapper--iGKlI",list:"list--KgRSs",item:"item--Hue7t",rightIcon:"right-icon--ctU4U"};class uk extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MemoTypes}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"isVisible",!1)}}(0,I.gn)([S.SB],uk.prototype,"isVisible",void 0),(0,I.gn)([tB.Fl],uk.prototype,"S",null);let uN=S._Y.createComponent("MemoTypeSelect",uk,e=>{let{list:t,value:i,onChange:o,isButton:a,showCheckIcon:n=!0,className:r,size:s="small",listWidth:l,maxHeight:c}=e.props;if(!t.length)return null;let d=!i.includes("all");return(0,y.jsx)("div",{className:q()(uj.textSelect,r,{[uj.isButton]:!!a,[uj.sizeSmall]:"small"===s,[uj.sizeMedium]:"medium"===s,[uj.active]:d}),children:(0,y.jsx)(tK.x,{arrow:!1,content:(0,y.jsx)(u_,{vm:e,listWidth:l,activeKeys:[...i||[]],onChange:o,showCheckIcon:n,maxHeight:c}),trigger:"click",placement:"bottomLeft",onOpenChange:t=>{e.isVisible=t},children:(0,y.jsxs)("div",{className:uj.textWrapper,children:[(0,y.jsxs)("div",{className:uj.inner,children:[(0,y.jsx)(t_.J,{name:"filter",size:16,color:d?"var(--theme-icon-brand)":"var(--theme-icon-quaternary)"}),e.S.type]}),d&&i.length?(0,y.jsx)("div",{className:uj.selectNum,children:i.length}):null]})})})}),u_=(0,F.Pi)(function(e){let{vm:t,activeKeys:i,onChange:o,showCheckIcon:a,listWidth:n,maxHeight:r}=e;return(0,y.jsx)("div",{className:uj.listWrapper,style:{minWidth:n,maxHeight:r},children:(0,y.jsx)("div",{className:uj.list,children:t.props.list.map(e=>{let t=i.includes(e.key);return(0,y.jsxs)("div",{className:q()(uj.item,{[uj.active]:t}),onClick:()=>{if(o){let t=i;"all"===e.key?t=["all"]:(t=i.filter(e=>"all"!==e),i.includes(e.key)?t=i.filter(t=>e.key!==t):t.push(e.key)),0===t.length&&(t=["all"]),o(t)}},children:[e.icon&&(0,y.jsx)("div",{className:uj.icon,children:(0,y.jsx)(t_.J,{name:e.icon,size:16,color:t?"var(--theme-icon-brand)":"var(--theme-icon-quaternary)"})}),e.label,t&&a&&(0,y.jsx)(t_.J,{className:q()(uj.icon,uj.rightIcon),color:"var(--theme-icon-brand)",name:"monicaSuccess"})]},e.key)})})})});var uT={memoHorizontalView:"memo-horizontal-view--CLESz",gridView:"grid-view--RmHdb",memoListWrapper:"memo-list-wrapper--qP1JR",memoListHeader:"memo-list-header--LhYU4",dragLayer:"drag-layer--SBqxP",desktop:"desktop--Qs7A4",desktopSidebar:"desktop-sidebar--_X3xB",canResize:"can-resize--u4wta",left:"left--ZlQHP",fullScreen:"full-screen--Va_TO",memoListType:"memo-list-type--KekxX",memoListTypeItem:"memo-list-type-item--y2jEv",active:"active--z3ooA",quickInputWrapper:"quick-input-wrapper--Gzvd5",hide:"hide--Oc8Vv",typeWrapper:"type-wrapper--GNNXt",line:"line--VEqNr",memoListInner:"memo-list-inner--C2K_i",grid:"grid--Sko2T",editorWrapper:"editor-wrapper--NRC3a",editorHeader:"editor-header--Su22x",back:"back--gBQC8",editorHeaderRight:"editor-header-right--JQGhM",operationBtn:"operation-btn--RnwAO",operations:"operations--Jvk3E",divider:"divider--vO2Je",editor:"editor--e80vP",loadingWrapper:"loading-wrapper--KOhI5",notice:"notice--hznAS",popupNoteInfoContent:"popup-note-info-content--eF1QM",title:"title--z1YJo",info:"info--E2p7y",card:"card--Rv2kF",subTitle:"sub-title--zEJF4",time:"time--Kra6J",popupHotkeyInfo:"popup-hotkey-info--cj62f",list:"list--Kch4g",item:"item--ICObU"};class uI extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MemoV2}get agentS(){return ei.S.Agent.AgentShare}get isSearchMode(){return"search"===iH.a.mode}get hideList(){return!!iH.a.activeMemoId&&"horizontalList"!==iH.a.memoViewType}get hotkeyList(){let e=this.S.PopupHotkeyInfo.common.space;return{common:[{label:this.S.PopupHotkeyInfo.common.copy,desc:iB.t.prettifyHotkey("mod+c"," + ")},{label:this.S.PopupHotkeyInfo.common.paste,desc:iB.t.prettifyHotkey("mod+v"," + ")},{label:this.S.PopupHotkeyInfo.common.Bold,desc:iB.t.prettifyHotkey("mod+b"," + ")},{label:this.S.PopupHotkeyInfo.common.Italic,desc:iB.t.prettifyHotkey("mod+i"," + ")},{label:this.S.PopupHotkeyInfo.common.Underline,desc:iB.t.prettifyHotkey("mod+u"," + ")},{label:this.S.PopupHotkeyInfo.common.Strikethrough,desc:iB.t.prettifyHotkey("mod+Shift+x"," + ")},{label:this.S.PopupHotkeyInfo.common.code,desc:iB.t.prettifyHotkey("mod+e"," + ")},{label:this.S.PopupHotkeyInfo.common.insertLine,desc:iB.t.prettifyHotkey("shift+enter"," + ")},{label:this.S.PopupHotkeyInfo.common.selectAll,desc:iB.t.prettifyHotkey("mod+a"," + ")},{label:this.S.PopupHotkeyInfo.common.expandSelectionChar,desc:"".concat(iB.t.prettifyHotkey("shift")).concat(" + ").concat(iB.t.prettifyHotkey("Arrowleft"),"/").concat(iB.t.prettifyHotkey("Arrowright"))},{label:this.S.PopupHotkeyInfo.common.expandSelectionLine,desc:"".concat(iB.t.prettifyHotkey("shift")).concat(" + ").concat(iB.t.prettifyHotkey("Arrowup"),"/").concat(iB.t.prettifyHotkey("Arrowdown"))}],markdown:[{label:this.S.PopupHotkeyInfo.markdown.heading1,desc:"# ".concat(e)},{label:this.S.PopupHotkeyInfo.markdown.heading2,desc:"## ".concat(e)},{label:this.S.PopupHotkeyInfo.markdown.heading3,desc:"### ".concat(e)},{label:this.S.PopupHotkeyInfo.markdown.orderedList,desc:"1. ".concat(e)},{label:this.S.PopupHotkeyInfo.markdown.unorderedList,desc:"- ".concat(e)},{label:this.S.PopupHotkeyInfo.markdown.tasklist,desc:"[] ".concat(e)},{label:this.S.PopupHotkeyInfo.markdown.increaseIndent,desc:iB.t.prettifyHotkey("tab")},{label:this.S.PopupHotkeyInfo.markdown.decreaseIndent,desc:iB.t.prettifyHotkey("shift+tab"," + ")}]}}get memoTypeList(){return[{key:"all",label:this.S.MemoType.all,icon:"saveMemo"},{key:"common",label:this.S.MemoType.common,icon:"a24"},{key:"chat",label:this.S.MemoType.chat,icon:"monicaChatLine"},{key:"twitter",label:this.S.MemoType.twitter,icon:"twitterX"},{key:"readingSummary",label:this.S.MemoType.readingSummary,icon:"memoBook"},{key:"pdfReading",label:this.S.MemoType.pdfReading,icon:"memoPdf"},{key:"mark",label:this.S.MemoType.mark,icon:"markHighlight"},{key:"videoSummary",label:this.S.MemoType.videoSummary,icon:"memoYoutube"},{key:"searchEnhance",label:this.S.MemoType.searchEnhance,icon:"memoSearch"},{key:"imageSummary",label:this.S.MemoType.imageSummary,icon:"memoImage"},{key:"other",label:this.S.MemoType.other,icon:"taskMessage"}]}onViewCreate(){eF.J.eventEmitter.listenBy(this,"tabChange",()=>{"normal"===iH.a.mode&&"memo"===eF.J.activeTabKey&&iH.a.getMemoList("refresh")});let e=aO.l.getPageParams();(null==e?void 0:e.tab)==="memo"&&e.memoId&&iH.a.openEditor(e.memoId),iH.a.fetchMemoList("refresh",!0).finally(()=>{setTimeout(()=>{let e=aO.l.getPageParams();if((null==e?void 0:e.tab)==="memo"&&e.memoId)iH.a.activeMemoId===e.memoId||iH.a.openEditor(e.memoId);else if("horizontalList"===iH.a.memoViewType){var t;iH.a.openEditor(null===(t=iH.a.memoRenderList[0])||void 0===t?void 0:t.item.uid)}},50)})}handleSelectTypes(e){iH.a.selectTypes=e,iH.a.sendEvent("memo_action_click",{button:"memo_select_types",selectTypes:e}),this.triggerFilter()}handleToggleSelectTag(e){iH.a.selectTags.includes(e)?iH.a.selectTags=iH.a.selectTags.filter(t=>t!==e):iH.a.selectTags.push(e),iH.a.sendEvent("memo_action_click",{button:"memo_select_tags",selectTags:iH.a.selectTags}),this.triggerFilter()}triggerFilter(){iH.a.fetchMemoList("refresh",!1)}onViewDestroy(){eF.J.eventEmitter.stopListenBy(this)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"defaultWidth",f.o.isDesktop?298:378),(0,T._)(this,"dragWidth",this.defaultWidth),(0,T._)(this,"containerDom",null),(0,T._)(this,"isResizing",!1)}}(0,I.gn)([S.SB],uI.prototype,"defaultWidth",void 0),(0,I.gn)([S.SB],uI.prototype,"dragWidth",void 0),(0,I.gn)([S.SB],uI.prototype,"containerDom",void 0),(0,I.gn)([S.SB],uI.prototype,"isResizing",void 0),(0,I.gn)([tB.Fl],uI.prototype,"S",null),(0,I.gn)([tB.Fl],uI.prototype,"agentS",null),(0,I.gn)([tB.Fl],uI.prototype,"isSearchMode",null),(0,I.gn)([tB.Fl],uI.prototype,"hideList",null),(0,I.gn)([tB.Fl],uI.prototype,"hotkeyList",null),(0,I.gn)([tB.Fl],uI.prototype,"memoTypeList",null);class uM extends S.PN{startResizing(){var e,t;null===(e=(t=this.props).onResizingChange)||void 0===e||e.call(t,!0),this.isResizing=!0}stopResizing(){var e,t;null===(e=(t=this.props).onResizingChange)||void 0===e||e.call(t,!1),this.isResizing=!1}onBeforeMount(){this.globalListeners.addWindowEventListener("mousemove",e=>{let t=this.props.containerDom;if(this.isResizing&&t){let i=t.getBoundingClientRect(),o=e.clientX-i.left,a=this.props.range;a&&(o=Math.max(a[0],o),o=Math.min(a[1],o)),this.props.onSizeChange(o)}}),this.globalListeners.addWindowEventListener("mouseup",()=>this.stopResizing())}onViewCreate(){}onViewDestroy(){this.globalListeners.removeAll()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"isResizing",!1),(0,T._)(this,"globalListeners",new L.M)}}(0,I.gn)([S.SB],uM.prototype,"isResizing",void 0);let uL=S._Y.createComponent("ResizeBar",uM,e=>{let{barSize:t,className:i}=e.props;return(0,y.jsx)("div",{className:q()("resize-bar--PBq_0",i),style:{width:t},onMouseDown:()=>{e.startResizing()}})});var uB=i(93198);let uE=S._Y.createComponent("MemoV2",uI,e=>(0,y.jsx)(uD,{vm:e})),uD=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)(lb.b,{draggable:!0,dragLayer:(0,y.jsx)("div",{className:uT.dragLayer,children:(0,y.jsx)(gL.p,{type:["image"],text:t.S.dropImage})}),className:q()(uT.memoHorizontalView,{[uT.desktop]:f.o.isDesktop,[uT.desktopSidebar]:"desktop-sidebar"===f.o.entryType,[uT.gridView]:"grid"===iH.a.memoViewType}),onDrop:e=>{un.d.imageUploadVisible=!0,un.d.handleUploadFile(e)},children:[(0,y.jsx)(uP,{vm:t,style:t.hideList?{display:"none"}:{}}),iH.a.activeMemoId&&(0,y.jsx)(uF,{vm:t,showBack:t.hideList},iH.a.activeMemoId)]})}),uP=(0,F.Pi)(function(e){let{vm:t,style:i}=e,o="horizontalList"===iH.a.memoViewType,a=o?t.dragWidth:"sidebar"===ex.L.mainWindowMode?"100%":t.defaultWidth;return(0,y.jsxs)("div",{ref:e=>{e&&(t.containerDom=e)},style:{...i,width:a,userSelect:t.isResizing?"none":"text"},className:q()(uT.memoListWrapper,{[uT.canResize]:o}),children:[o&&t.containerDom&&(0,y.jsx)(uL,{barSize:10,containerDom:t.containerDom,onSizeChange:e=>{t.dragWidth=e},range:[t.defaultWidth,600],onResizingChange:e=>{t.isResizing=e}}),(0,y.jsxs)("div",{className:q()(uT.memoListHeader),children:[(0,y.jsxs)("div",{className:uT.left,children:[("number"!=typeof a||a>=378)&&(0,y.jsx)(e7.Q,{tabKey:"memo",title:t.S.memo}),"sidebar"===ex.L.mainWindowMode?(0,y.jsx)(tN.u,{title:t.S.fullPage,trigger:["hover"],placement:"bottomLeft",children:(0,y.jsx)("div",{className:uT.fullScreen,onClick:()=>{E.w.openFullScreen(),iH.a.sendEvent("memo_action_click",{button:"memo_full_page"})},onMouseDown:e=>{e.stopPropagation()},children:(0,y.jsx)(t_.J,{name:"monicaFull",size:12,color:"var(--theme-icon-tertiary)"})})}):null,"horizontal"===ex.L.mainWindowMode&&(0,y.jsx)(uR,{vm:t})]}),(0,y.jsx)(ub,{})]}),(0,y.jsxs)("div",{className:q()(uT.memoListInner,{[uT.grid]:"grid"===iH.a.memoViewType}),children:[(0,y.jsx)("div",{className:q()(uT.quickInputWrapper,{[uT.hide]:t.isSearchMode||"horizontalList"===iH.a.memoViewType}),children:(0,y.jsx)(ue,{})}),"normal"===iH.a.mode&&(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:uT.typeWrapper,children:[(0,y.jsx)(uN,{list:t.memoTypeList,value:iH.a.selectTypes,onChange:e=>{t.handleSelectTypes(e)},isButton:!0,listWidth:162}),iH.a.tags.length?(0,y.jsx)("div",{className:uT.line}):null,(0,y.jsx)(uA.H,{onToggleSelect:e=>{t.handleToggleSelectTag(e)},selectTags:iH.a.selectTags})]})}),"select"===iH.a.mode&&(0,y.jsx)(uS,{}),(0,y.jsx)(us,{})]})]})}),uF=(0,F.Pi)(function(e){let{vm:t,showBack:i,className:o}=e;if(!iH.a.noteEditorController)return null;let a=iH.a.noteEditorController.docId,n=iH.a.noteEditorController.noteInfo?iH.a.noteEditorController.noteInfo.updatedAt:iH.a.noteEditorController.updatedAt,r=iH.a.memoDataSources.find(e=>e.uid===a),s=iH.a.noteEditorController.editorLoading||(null==r?void 0:r.status)==="running",l=e=>{iH.a.sendEvent("memo_action_click",{button:"memo_header_format_toggle",format:e})},c=()=>{var e,o,r;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:uT.editorHeader,children:[i&&(0,y.jsxs)("span",{className:uT.back,onClick:()=>{iH.a.closeEditor()},children:[(0,y.jsx)(t_.J,{name:"template-back",color:"currentColor",size:16}),t.S.back]}),n&&em.L.fromNow(n),"horizontal"===ex.L.mainWindowMode&&(0,y.jsxs)("div",{className:uT.operations,children:[(0,y.jsx)(ut.X,{}),(0,y.jsx)("span",{className:uT.divider}),(0,y.jsx)(gX,{onToggle:e=>{l(e)},format:"bold",icon:"memoBold",iconSize:16,size:28}),(0,y.jsx)(gX,{onToggle:e=>{l(e)},format:"underline",icon:"memoUnderline",iconSize:16,size:28}),(0,y.jsx)(g$,{onToggle:e=>{l(e)},format:"bulleted-list",icon:"memoList",iconSize:16,size:28}),(0,y.jsx)(g$,{onToggle:e=>{l(e)},format:"numbered-list",icon:"memoOrderList",iconSize:16,size:28}),(0,y.jsx)(g$,{onToggle:e=>{l(e)},format:"todo",icon:"memoTodo",iconSize:16,size:28}),(0,y.jsx)(g0,{iconSize:16,size:28,title:t.agentS.uploadImage})]}),(0,y.jsxs)("div",{className:uT.editorHeaderRight,children:["sidebar"===ex.L.mainWindowMode?(0,y.jsx)(g0,{iconSize:16,size:24,title:t.agentS.uploadImage}):null,(0,y.jsx)(tK.x,{placement:"bottomRight",trigger:["click"],onOpenChange:e=>{e&&iH.a.sendEvent("memo_action_click",{button:"memo_header_info"})},content:(0,y.jsx)(uV,{createdAt:(null===(e=iH.a.noteEditorController)||void 0===e?void 0:e.createdAt)||0,updatedAt:(null===(o=iH.a.noteEditorController)||void 0===o?void 0:o.updatedAt)||0,vm:t}),getTooltipContainer:()=>H.t.mainWindowDialogRoot||H.t.dialogRoot,children:(0,y.jsx)(tN.u,{title:t.agentS.info,children:(0,y.jsx)("div",{className:q()(uT.operationBtn),children:(0,y.jsx)(t_.J,{name:"info-pure",size:16,color:"var(--theme-icon-quaternary)"})})})}),"sidebar"===ex.L.mainWindowMode?(0,y.jsx)(tN.u,{title:t.S.fullPage,placement:"bottomRight",children:(0,y.jsx)("div",{className:q()(uT.operationBtn),onClick:()=>{E.w.openFullScreen()},children:(0,y.jsx)(t_.J,{name:"monicaFull",size:16,color:"var(--theme-icon-quaternary)"})})}):null,a?(0,y.jsx)(uB.u,{onVisibleChange:e=>{e&&iH.a.sendEvent("memo_action_click",{button:"memo_header_share"})},onTogglePublic:()=>{var e;iH.a.noteEditorController&&(iH.a.noteEditorController.handlePublicChange(),iH.a.sendEvent("memo_action_click",{button:"memo_header_toggle_public",publicShare:!!(null===(e=iH.a.noteEditorController)||void 0===e?void 0:e.isPublic)}))},isPublic:!!(null===(r=iH.a.noteEditorController)||void 0===r?void 0:r.isPublic),handleShare:()=>{var e;null===(e=iH.a.noteEditorController)||void 0===e||e.handleShare()},memoId:a}):null]})]})})};return(0,y.jsxs)("div",{className:q()(uT.editorWrapper,o),style:{display:a!==iH.a.activeMemoId?"none":void 0},children:[s&&(0,y.jsx)("div",{className:uT.loadingWrapper,children:(0,y.jsx)(eC.g,{fullScreen:!0})}),(0,y.jsx)(g7.VD,{docId:a,fromNewMemo:iH.a.noteEditorController.fromNewMemo,className:uT.editor,onInit:()=>{var e;null===(e=iH.a.noteEditorController)||void 0===e||e.handleConnect()},onUpdated:e=>{var t;null===(t=iH.a.noteEditorController)||void 0===t||t.handleUpdated(e)},renderHeader:()=>c()},iH.a.refreshKey),(0,y.jsx)(tK.x,{placement:"topRight",trigger:["click"],align:{offset:[-16,-46]},onOpenChange:e=>{e&&iH.a.sendEvent("memo_action_click",{button:"memo_hotkey_info"})},content:(0,y.jsx)(uU,{vm:t}),getTooltipContainer:()=>H.t.mainWindowDialogRoot||H.t.dialogRoot,children:(0,y.jsx)("div",{className:uT.notice,children:(0,y.jsx)(gB.B,{size:16,color:"var(--theme-icon-primary)"})})})]})}),uR=(0,F.Pi)(e=>(0,y.jsx)("div",{className:uT.memoListType,onClick:()=>{iH.a.sendEvent("memo_action_click",{button:"memo_list_type",type:"grid"===P.A._memoListType?"list":"grid"}),iH.a.toggleListType()},children:["grid","list"].map(t=>(0,y.jsx)(tN.u,{trigger:["click","hover"],title:"grid"===t?e.vm.S.Grid:e.vm.S.list,children:(0,y.jsx)("div",{className:q()(uT.memoListTypeItem,{[uT.active]:P.A._memoListType===t}),children:(0,y.jsx)("grid"===t?gP:gV,{size:16,color:P.A._memoListType===t?"var(--theme-icon-primary)":"var(--theme-icon-tertiary)"})})},t))})),uV=(0,F.Pi)(e=>{let{createdAt:t,updatedAt:i,vm:o}=e;return(0,y.jsxs)("div",{className:uT.popupNoteInfoContent,children:[(0,y.jsx)("div",{className:uT.title,children:o.S.PopupNoteInfoContent.title}),(0,y.jsxs)("div",{className:uT.info,children:[(0,y.jsxs)("div",{className:uT.card,children:[(0,y.jsx)("div",{className:uT.subTitle,children:o.S.PopupNoteInfoContent.updateTime}),(0,y.jsx)("div",{className:uT.time,children:em.L.formatTime(i,"YYYY-MM-DD HH:mm")})]}),(0,y.jsxs)("div",{className:uT.card,children:[(0,y.jsx)("div",{className:uT.subTitle,children:o.S.PopupNoteInfoContent.createTime}),(0,y.jsx)("div",{className:uT.time,children:em.L.formatTime(t,"YYYY-MM-DD HH:mm")})]})]})]})}),uU=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:uT.popupHotkeyInfo,children:[(0,y.jsx)("div",{className:uT.title,children:t.S.PopupHotkeyInfo.title}),(0,y.jsxs)("div",{className:uT.info,children:[(0,y.jsxs)("div",{className:uT.card,children:[(0,y.jsx)("div",{className:uT.subTitle,children:t.S.PopupHotkeyInfo.commonTitle}),(0,y.jsx)("div",{className:uT.list,children:t.hotkeyList.common.map(e=>(0,y.jsxs)("div",{className:uT.item,children:[(0,y.jsx)("div",{className:uT.label,children:e.label}),(0,y.jsx)("div",{className:uT.desc,children:e.desc})]},e.desc))})]}),(0,y.jsxs)("div",{className:uT.card,children:[(0,y.jsx)("div",{className:uT.subTitle,children:t.S.PopupHotkeyInfo.markdownTitle}),(0,y.jsx)("div",{className:uT.list,children:t.hotkeyList.markdown.map(e=>(0,y.jsxs)("div",{className:uT.item,children:[(0,y.jsx)("div",{className:uT.label,children:e.label}),(0,y.jsx)("div",{className:uT.desc,children:e.desc})]},e.desc))})]})]})]})});class uz extends S.PN{constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}var uO=JSON.parse('{"fill":"none","content":"\\n<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M5.62475 1.2334H10.3751C11.1251 1.23338 11.748 1.23336 12.242 1.29977C12.7624 1.36973 13.2286 1.52315 13.6027 1.89729C13.9768 2.27142 14.1303 2.73755 14.2002 3.25789C14.2667 3.7518 14.2666 4.3746 14.2666 5.12446V11.7858C14.2666 12.1172 13.998 12.3858 13.6666 12.3858C13.0775 12.3858 12.5999 12.911 12.5999 13.5001C12.5999 13.88 12.7986 14.2136 13.0977 14.4025C13.3779 14.5795 13.6666 14.8354 13.6666 15.1667C13.6666 15.4981 13.398 15.7667 13.0666 15.7667H3.99995C2.7481 15.7667 1.73328 14.7519 1.73328 13.5001L1.73328 5.12448C1.73325 4.37461 1.73324 3.7518 1.79965 3.25789C1.86962 2.73755 2.02304 2.27142 2.39717 1.89729C2.77131 1.52315 3.23749 1.36973 3.75788 1.29977C4.25184 1.23336 4.87475 1.23338 5.62475 1.2334ZM2.93328 13.5001C2.93328 14.0892 3.41084 14.5667 3.99995 14.5667H11.6661C11.4962 14.2488 11.3999 13.8857 11.3999 13.5001C11.3999 13.1144 11.4962 12.7513 11.6661 12.4334H3.99994C3.41084 12.4334 2.93328 12.911 2.93328 13.5001ZM13.0666 11.2334V5.16635C13.0666 4.36384 13.0653 3.82232 13.0109 3.41781C12.9589 3.03057 12.8682 2.85985 12.7542 2.74582C12.6402 2.6318 12.4694 2.54114 12.0821 2.48907C11.6775 2.43467 11.1359 2.4334 10.3333 2.4334H5.66661C4.86398 2.4334 4.32236 2.43467 3.91777 2.48907C3.53045 2.54114 3.35971 2.6318 3.2457 2.74582C3.13167 2.85985 3.04102 3.03057 2.98895 3.41781C2.93455 3.82232 2.93328 4.36384 2.93328 5.16635V11.4996C3.25118 11.3297 3.61432 11.2334 3.99994 11.2334H13.0666ZM5.06661 4.50007C5.06661 4.1687 5.33524 3.90007 5.66661 3.90007H10.4074C10.7387 3.90007 11.0074 4.1687 11.0074 4.50007C11.0074 4.83144 10.7387 5.10007 10.4074 5.10007H8.63698V9.16673C8.63698 9.4981 8.36835 9.76673 8.03698 9.76673C7.70561 9.76673 7.43698 9.4981 7.43698 9.16673V5.10007H5.66661C5.33524 5.10007 5.06661 4.83144 5.06661 4.50007Z\\" fill=\\"#55555D\\"/>\\n\\n","viewBox":"0 0 16 17"}');let uW=S._Y.createComponent("GlossaryIcon",uz,e=>(0,y.jsx)(R.s,{...e.props,name:"GlossaryIcon",iconData:uO}));var uH=i(38299),uG=i(69761),uQ=i(88814),uJ=i(30779),uq=i(24429),uK={monicaTranslateView:"monica-translate-view--NOgL3",viewInner:"view-inner--QVCRm",header:"header--QgiWJ",headerWithGlossary:"header-with-glossary--b8DtO",glossary:"glossary--H39Mq",largeContent:"large-content--PkAfW",largeLeft:"large-left--xK83l",largeRight:"large-right--IfOHF",changeLanguage:"change-language--euB0Z",translateGroup:"translate-group--EII58",translationEngine:"translation-engine--DIVRo",addEngineBtnWrap:"add-engine-btn-wrap--Ky7EL",addEngineBtn:"add-engine-btn--BUm5S",addEngineBtnText:"add-engine-btn-text--xzD6k",selectedEngineList:"selected-engine-list--cB8WD",engineItem:"engine-item--ac7R4",active:"active--jCeD9",removeEngineButton:"remove-engine-button--Bz0RC",limitLengthTip:"limit-length-tip--O8vrl",translateButtonArea:"translate-button-area--FurqB",pasteSelectionButton:"paste-selection-button--aG_7Q",languageSelect:"language-select--oBmMO",translateResultBox:"translateResult-box--v3G9W",translateResultList:"translate-result-list--zkK5R",translateGlossarySwitchBox:"translate-glossary-switch-box--IZiG_"},uY=i(78734),uZ=i(65324),uX=i(72700),u$=i(59133),u0=i(24053);(r=g||(g={})).FREE_USER_USED_ADVANCED_ENGINE="FREE_USER_USED_ADVANCED_ENGINE",r.FRE_USER_FAILED_FREE_TRANSLATION="FRE_USER_FAILED_FREE_TRANSLATION",r.PAID_USER_FAILED_TRANSLATION="PAID_USER_FAILED_TRANSLATION",r.ADVANCED_QUERY_LIMIT="ADVANCED_QUERY_LIMIT",r.PAID_USER_FAILED_FREE_TRANSLATION="PAID_USER_FAILED_FREE_TRANSLATION",r.BASIC_ENGINE_FAILED_TRANSLATION="BASIC_ENGINE_FAILED_TRANSLATION",r.BASIC_QUERY_LIMIT="BASIC_QUERY_LIMIT";class u1 extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MonicaTranslateView}get GlobalS(){return ei.S.Global}get isHorizontal(){return"horizontal"===ex.L.mainWindowMode&&this.horizontalMatcher.matches}onBeforeMount(){this.initDefaultLanguages(),this.listenEvents(),this.initDefaultEngines()}onViewCreate(){this.horizontalMatcher.init()}onViewDestroy(){this.horizontalMatcher.destroy(),uH.N.stopListenBy(this),eF.J.eventEmitter.stopListenBy(this)}onTranslateEnginePopoverOpenChange(e){if(e)return;let t=[];this.engineList.forEach(e=>{let i=this.translates.find(t=>t.engineId===e);i?t.push(i):t.push({engineId:e,status:"default",translatedContent:""})}),this.translates.forEach(e=>{!this.engineList.includes(e.engineId)&&e.taskUid&&u$.Q.cancelAiTranslate(e.taskUid)}),this.translates=t,this.translates.filter(e=>"default"===e.status).forEach(e=>{this.translate(e)}),this.updateDefaultEngines()}async onSourceTextChange(e,t){this.sourceText=e,e?(await this.detectSourceContentLang(),"click"===t&&this.translateBySelectedEngines()):(this.detectLanguage=void 0,this.translates.forEach(e=>{e.translatedContent="",e.status="default"}))}onSourceLanguageChange(e){this.sourceLang=e,u0._.setStorageValue("activeSourceLanguage",e),this.translateBySelectedEngines()}onToLanguageChange(e){this.toLang=e,u0._.setStorageValue("activeResultLanguage",e),this.translateBySelectedEngines()}onTranslateSceneChange(e,t){let i=this.translates.find(t=>t.engineId===e);i&&(i.sceneId=t,this.translate(i),eL.M.createUserBehaviorEvent({eventName:"translate_scene_change"}))}onRetryTranslate(e){this.translate(e),eL.M.createUserBehaviorEvent({eventName:"retry_translate",extData:{engine:e.engineId}})}async switchLanguage(){var e;let t=(null===(e=this.translates.filter(e=>e.translatedContent)[0])||void 0===e?void 0:e.translatedContent)||"";this.sourceText=t;let i=this.toLang;this.toLang="auto"===this.sourceLang?this.detectLanguage:this.sourceLang,this.onSourceLanguageChange(i)}updateDefaultEngines(){u0._.setStorageValue("translateEngines",(0,tB.ZN)(this.engineList))}onEngineTabClick(e){var t;let i=this.translates.findIndex(t=>t.engineId===e);null===(t=this.translationEls[i])||void 0===t||t.scrollIntoView({behavior:"smooth",block:"center"});let o=this.translates.find(t=>t.engineId===e);o&&(o.expanded=!0),this.animationEngineTimer&&(clearTimeout(this.animationEngineTimer),this.animationEngineId=void 0),this.animationEngineId=e,this.animationEngineTimer=setTimeout(()=>{this.animationEngineId=void 0},500)}trimNewlines(e){return e.replace(/^(\r\n|\n|\r)+|(\r\n|\n|\r)+$/g,"")}translateBySelectedEngines(){this.sourceText.trim().length>this.maxLength||(eL.M.createUserBehaviorEvent({eventName:"do_translate"}),this.translates.forEach(e=>{this.translate(e)}))}async translate(e){let{engineId:t,sceneId:i}=e;e.taskUid&&u$.Q.cancelAiTranslate(e.taskUid);let o=!1;if(!this.sourceText){o=!0;return}if(uG.f.isAdvancedEngine(t)){if(!eD.userController.isVipUser){e.errorCode="FREE_USER_USED_ADVANCED_ENGINE",e.status="error",e.expanded=!0;return}let{isEnough:t}=tP.K.checkCredits({featureName:"aiTranslate",module:"genius_bot",source:"monica_translate"});if(!t){e.errorCode="ADVANCED_QUERY_LIMIT",e.status="error",e.expanded=!0;return}}else if(uG.f.isBasicEngine(t)){let{isEnough:t}=tP.K.checkCredits({module:"basic_query",source:"monica_translate",featureName:"aiTranslate"});if(!t){e.errorCode="BASIC_QUERY_LIMIT",e.status="error",e.expanded=!0;return}}let a=w.m.genShortId();e.status="translating",e.taskUid=a;let n=w.m.genShortId();e.translateKey=n,e.translatedContent="";let r=i=>{if(e.status="error",i instanceof uZ.cF&&10018===i.code){uG.f.isAdvancedEngine(t)?e.errorCode="ADVANCED_QUERY_LIMIT":e.errorCode="BASIC_QUERY_LIMIT";return}uG.f.isBasicEngine(t)?eD.userController.isVipUser?uG.f.isAdvancedEngine(t)?e.errorCode="PAID_USER_FAILED_TRANSLATION":uG.f.isBasicEngine(t)?e.errorCode="BASIC_ENGINE_FAILED_TRANSLATION":e.errorCode="FRE_USER_FAILED_FREE_TRANSLATION":e.errorCode="FRE_USER_FAILED_FREE_TRANSLATION":e.errorCode="BASIC_ENGINE_FAILED_TRANSLATION"};try{let s=this.sourceLang,l="auto"===s?this.detectLanguage||"auto":s,c=this.trimNewlines(this.sourceText).trim().split("\n");await u$.Q.aiTranslate({taskUid:a,isFreeUser:!eD.userController.isVipUser,paragraphs:c.map(e=>({detectLang:l,id:w.m.genShortId(),text:e})),sourceLang:l,toLang:this.toLang,useEngine:t,translateFeature:uG.f.allowApplySceneTranslation(t)?{translateScene:i}:void 0},t=>{if(e.translateKey!==n||o)return;e.status="translated",e.expanded=!0;let i=t.flatMap(e=>e.result?[e.result]:[]).join("\n");if(e.translatedContent?e.translatedContent+="\n".concat(i):e.translatedContent=i,""===e.translatedContent){var a;e.errorText=(null===(a=t.find(e=>e.error))||void 0===a?void 0:a.error)||"",r()}})}catch(e){if((null==e?void 0:e.cause)==="manualCanceled")return;r(e)}}listenEvents(){eF.J.eventEmitter.listenBy(this,"tabChange",()=>{"translate"===eF.J.activeTabKey&&setTimeout(()=>{var e;null===(e=this.textareaRef)||void 0===e||e.focus({cursor:"end"})},0)}),uH.N.listenBy(this,"selectionChange",(0,eb.Z)(e=>{let{type:t,text:i}=e;if("inMonica"===t){this.selectionText="";return}"translate"===eF.J.activeTabKey&&(!this.sourceText&&i&&this.onSourceTextChange(i),this.selectionText=i)},100,{trailing:!0}))}async initDefaultEngines(){let e=(await u0._.getStorageValue("translateEngines")||["gemini-1.5-flash-8b",uG.f.freeEngineList[0].id,uG.f.freeEngineList[1].id]).filter(e=>uG.f.translateEngineList.some(t=>t.id===e));e.length>0&&(this.engineList=e,this.translates=e.map(e=>({engineId:e,status:"default",translatedContent:""})))}async initDefaultLanguages(){let[e,t]=await Promise.all([u0._.getStorageValue("activeSourceLanguage"),u0._.getStorageValue("activeResultLanguage")]);e&&(this.sourceLang=e),t&&(this.toLang=t)}async detectSourceContentLang(){if(!f.o.isSafariExtension)try{let e=await uX.U.detectLanguage(this.sourceText);if(e&&-1!==e.indexOf("zh")){this.detectLanguage="Chinese (Simplified)";return}let t=r8.q.getComposeLanguageKeyByLocale(e,!1);t&&(this.detectLanguage=t)}catch(e){console.error(e)}}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"translationEls",[]),(0,T._)(this,"textareaRef",null),(0,T._)(this,"horizontalMatcher",new uY.h("(min-width:890px)")),(0,T._)(this,"maxLength",2e3),(0,T._)(this,"engineList",[uG.f.freeEngineList[0].id,uG.f.freeEngineList[1].id]),(0,T._)(this,"translates",[{engineId:uG.f.freeEngineList[0].id,status:"default",translatedContent:""},{engineId:uG.f.freeEngineList[1].id,status:"default",translatedContent:""}]),(0,T._)(this,"selectionText",""),(0,T._)(this,"sourceText",""),(0,T._)(this,"sourceLang","auto"),(0,T._)(this,"detectLanguage",void 0),(0,T._)(this,"toLang",P.A.finalTranslationTargetRespondLanguage),(0,T._)(this,"animationEngineId",void 0),(0,T._)(this,"animationEngineTimer",void 0)}}(0,I.gn)([S.SB],u1.prototype,"engineList",void 0),(0,I.gn)([S.SB],u1.prototype,"translates",void 0),(0,I.gn)([S.SB],u1.prototype,"selectionText",void 0),(0,I.gn)([S.SB],u1.prototype,"sourceText",void 0),(0,I.gn)([S.SB],u1.prototype,"sourceLang",void 0),(0,I.gn)([S.SB],u1.prototype,"detectLanguage",void 0),(0,I.gn)([S.SB],u1.prototype,"toLang",void 0),(0,I.gn)([S.SB],u1.prototype,"animationEngineId",void 0),(0,I.gn)([tB.Fl],u1.prototype,"S",null),(0,I.gn)([tB.Fl],u1.prototype,"GlobalS",null),(0,I.gn)([tB.Fl],u1.prototype,"isHorizontal",null),u1=(0,I.gn)([S.Tt],u1);var u2={translateEngineGroupContent:"translate-engine-group-content--OhW4N",category:"category--unQp5",engineItem:"engine-item--aMFwv",text:"text--yC2CO",ext:"ext--o8R1L"};class u3 extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MonicaTranslateView.TranslateEngineContent}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([S.Fl],u3.prototype,"S",null);let u6=S._Y.createComponent("TranslateEngineGroupContent",u3,e=>{let{value:t=[]}=e.props,i=uG.f.translateEngineList,o=i.filter(e=>e.isAdvanced),a=[...i.filter(e=>!e.isAdvanced),e.S.advancedTranslate,...o];return(0,y.jsx)("div",{className:q()(u2.translateEngineGroupContent),children:a.map(i=>{if("string"==typeof i)return(0,y.jsx)("div",{className:u2.category,children:i},i);let{icon:o,id:a,name:n}=i,r=t.includes(a);return(0,y.jsxs)("div",{className:q()(u2.engineItem),onClick:i=>{var o,n,s,l;if(r){if(1===t.length){ef.M.error(e.S.selectAtLeastOne);return}null===(o=(n=e.props).onChange)||void 0===o||o.call(n,t.filter(e=>e!==a),i)}else null===(s=(l=e.props).onChange)||void 0===s||s.call(l,[a,...t],i)},children:[(0,y.jsx)(eH.E,{src:o,alt:n,style:{width:16,height:16,borderRadius:"100%",overflow:"hidden",flexShrink:0,border:"1px solid var(--theme-border-primary)"}}),(0,y.jsx)("span",{className:u2.text,children:n}),(0,y.jsx)("div",{className:u2.ext,children:(0,y.jsx)(aB.X,{checked:r,size:20})})]},a)})})});class u5 extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],u5.prototype,"someState",void 0);let u4=S._Y.createComponent("TranslateSceneContent",u5,e=>{let{width:t=160,className:i,onChange:o,value:a,showAutoSelect:n}=e.props,r=uG.f.sceneList;return n||(r=r.filter(e=>e.id!==uG.f.autoSelectSceneId)),(0,y.jsx)("div",{style:{width:t},className:q()("translate-scene-content--ZyU9D",i),children:r.map(e=>{let{id:t,name:i}=e;return(0,y.jsx)("div",{className:q()("scene-item--Lb3Wo",{"active--C5x8E":a===t}),onClick:e=>{null==o||o(t,e)},children:i},t)})})});var u9=i(30506),u7={vipToolbar:"vip-toolbar--MNtHx",vipLogo:"vip-logo--QokNX",right:"right--IfZL7"};class u8 extends S.PN{get S(){return ei.S.Global.components.ChatComponents.VipToolbars}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!1)}}(0,I.gn)([S.SB],u8.prototype,"someState",void 0),(0,I.gn)([tB.Fl],u8.prototype,"S",null);let ve={size:16},vt=S._Y.createComponent("VipToolbar",u8,e=>{let{webAccessChecked:t=!1,gpt4Checked:i=!1,chatWithMemoChecked:o=!1,gpt4Tooltip:a,onGpt4Change:n,onWebAccessChange:r,onChatWithMemoChange:s,showChatWithMemo:l,showWebAccess:c,showGpt4:d,usageInfoProps:p,className:m,source:h}=e.props,g=c||d,u=e.S.gpt4,v=E.w.sidebarWidth<=500&&i;return(0,y.jsxs)("div",{className:q()(u7.vipToolbar,m),children:[g&&(0,y.jsx)(t_.J,{name:"monicaMembership",size:18,className:u7.vipLogo}),c&&(0,y.jsx)(tT.r,{label:e.S.webAccess,enabled:t,onChange:e=>{null==r||r(e),eL.M.createUserBehaviorEvent({eventName:"vip_toolbar_click",extData:{type:"web_access",botId:null==p?void 0:p.botId}})},size:"small"}),d&&(0,y.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,y.jsx)(tT.r,{tooltip:a,label:u,enabled:i,onChange:t=>{eL.M.createUserBehaviorEvent({eventName:"vip_toolbar_click",extData:{type:"gpt4",botId:null==p?void 0:p.botId},source:h});let{handleCreditsNotEnough:i,isEnough:o}=tP.K.checkCredits({source:"vip_toolbar_".concat(h),module:"genius_bot"});t&&!eD.userController.isVipUser?o||e.props.disableQuotaCheck?null==n||n(t):i():null==n||n(t)},size:"small"}),p&&(0,y.jsx)(eW.x,{...p,placement:g?"right":"left",simpleStyle:!0},p.usageModule)]}),(0,y.jsxs)("div",{className:u7.right,style:{justifyContent:g?"right":"left"},children:[p&&!d&&(0,y.jsx)(eW.x,{...p,placement:g?"right":"left"},p.usageModule),l&&(0,y.jsx)(tT.r,{activeBgColor:"linear-gradient(to left top, rgb(88, 10, 255), rgb(217, 140, 254))",label:v?(0,y.jsx)(t_.J,{name:"monicaMemo",...ve}):e.S.chatWithMemo,allowWordWrap:!0,enabled:o,tooltip:v?e.S.chatWithMemo:void 0,onChange:e=>{null==s||s(e),eL.M.createUserBehaviorEvent({eventName:"vip_toolbar_click",extData:{type:"chat_with_memo",botId:null==p?void 0:p.botId}})},size:"small"})]})]})});var vi={improveWithAiDrawerTitle:"improve-with-ai-drawer-title--GH79P",backIcon:"back-icon--ngNPK",improveWithAiDrawer:"improve-with-ai-drawer--glShh",improveWithAiDialog:"improve-with-ai-dialog--_pIzL",content:"content--otm19",resultWrapper:"result-wrapper--XOjh2",resultHeader:"result-header--QnlCr",result:"result--lJ9y6",loadingWrapper:"loading-wrapper--qwUEG",loading:"loading--VO5Pe",resultFooter:"result-footer--QoAo6",resultFooterRight:"result-footer-right--ULpWl",voiceBtn:"voice-btn--uPflL",copyBtn:"copy-btn--i5e45",rephraseBtn:"rephrase-btn--C2Gmg",copied:"copied--MHSXJ",promptContainer:"prompt-container--l9hDn",stopBtn:"stop-btn--POkGs",suggestCommands:"suggest-commands--H8oy1",moreBtn:"more-btn--xEsG2",command:"command--BVQfC",textareaWrapper:"textarea-wrapper--mAFvB",promptMatchedCommandsWrapper:"prompt-matched-commands-wrapper--VbYky",show:"show--XZ1we",promptMatchedCommands:"prompt-matched-commands--ruE5f",selected:"selected--dTMn5",highlight:"highlight--nRav5",textarea:"textarea--ZO77C",chatBar:"chat-bar--r8HD6",chatInputSendIconWrapper:"chat-input-send-icon-wrapper--FsSrM",active:"active--KWC8I",footer:"footer--z8Ltg"},vo=i(70174);class va extends S.PN{get isSpeaking(){var e;return tI._.speakingMsgId===(null===(e=this.activeWriting)||void 0===e?void 0:e.result)}get S(){return ei.S.Global.components.ImproveWithAiDrawer}get suggestionCommandVisible(){return!!this.isTaskFinished}get promptMatchedCommands(){return this.prompt.trim()?this.commands.filter(e=>w.m.isLike(e.name,this.prompt)):[]}get activeWritingIndex(){return this.writings.findIndex(e=>e.id===this.activeWritingItemId)}get activeWriting(){return this.writings[this.activeWritingIndex]||null}get suggestionCommands(){var e,t;let i=[],o=null===(e=this.commands)||void 0===e?void 0:e.find(e=>"rephrase_it"===e.key),a=null===(t=this.commands)||void 0===t?void 0:t.find(e=>"make_it_concise"===e.key);return o&&i.push(o),a&&i.push(a),i}handleCommandClick(e){this.createTask({userInput:{inputType:"command",value:e.name,key:e.key},text:this.activeWriting.result})}handlePromptEnter(){!this.isCompositionStart&&this.isTaskFinished&&this.prompt.trim()&&(this.createTask({userInput:{inputType:"user_input",value:this.prompt},text:this.activeWriting.result}),this.prompt="")}handleStop(){this.isTaskFinished=!0,this.isTaskLoading=!1,az.Tn.cancelTask(this.taskId,"writing")}handleVoiceInputUpdate(e){this.prompt=e}handlePromptChange(e){this.prompt=e.target.value,this.promptMatchedCommands.length?(this.keyboardManager.reset({defaultActiveIndex:-1,listLength:this.promptMatchedCommands.length}),this.promptMatchedCommandsVisible=!0):this.hidePromptMatchedCommands()}handleMatchedCommandSelect(e){this.createTask({userInput:{inputType:"command",key:this.promptMatchedCommands[e].key,value:this.promptMatchedCommands[e].name},text:this.activeWriting.result}),this.prompt="",this.hidePromptMatchedCommands()}hidePromptMatchedCommands(){this.promptMatchedCommandsVisible=!1}handleCopy(){var e;this.copied||(this.copied=!0,setTimeout(()=>{this.copied=!1},2e3),w.m.copyToClipboard((null===(e=this.activeWriting)||void 0===e?void 0:e.result)||""))}startOrStopSpeak(){var e;let t=null===(e=this.activeWriting)||void 0===e?void 0:e.result;t&&(this.isSpeaking?tI._.cancelSpeak():tI._.speakMessage({id:t,text:t}))}handleRephrase(){let e=this.writings[this.activeWritingIndex],t=this.commands.find(e=>"rephrase_it"===e.key);t&&this.createTask({userInput:{inputType:"command",value:t.name,key:t.key},text:e.result})}handleSelectCommand(e){this.createTask({userInput:{inputType:"command",value:e.name,key:e.key},text:this.activeWriting.result})}handleCommandPopoverOpenChange(e){this.popoverVisible=e}async fetchCommands(){this.commandsLoading=!0,this.commands=await vo.v.getCommandList({useCache:!0,autoUpdate:!1}),this.commands=this.commands.filter(e=>"translate"!==e.key),this.commandsLoading=!1}onViewCreate(){this.keyboardManager.init({defaultActiveIndex:-1,activeIndexWithFirstKeyup:3,listScrollableContainer:this.promptMatchedCommandsContainerEl,listLength:this.promptMatchedCommands.length,keydownContainer:[this.textareaRef.resizableTextArea.textArea],getListItem:e=>{var t;let i=this.getListItemId(e);return(null===(t=E.w.getShadowRoot())||void 0===t?void 0:t.getElementById(i))||null},onClose:()=>{this.promptMatchedCommandsVisible?this.hidePromptMatchedCommands():this.props.onDisposed()},onEnter:e=>{this.promptMatchedCommandsVisible&&e>=0?this.handleMatchedCommandSelect(e):(this.handlePromptEnter(),this.hidePromptMatchedCommands())}}),this.writings.push({title:"",id:"",result:this.props.content,userInput:{inputType:"user_input",value:""}}),this.fetchCommands()}onViewDestroy(){var e;null===(e=this.keyboardManager)||void 0===e||e.destroy(),!this.isTaskFinished&&this.taskId&&az.Tn.cancelTask(this.taskId,"writing")}async createTask(e){if(!this.isTaskFinished){ef.M.error(this.S.pendingTask,"dialogRoot");return}let{isEnough:t,handleCreditsNotEnough:i}=tP.K.checkCredits({module:P.A.composeGpt4Enabled?"genius_bot":"basic_query",source:"improve_with_ai_drawer"});if(!t){i();return}this.isTaskFinished=!1,this.isTaskLoading=!0;let o={id:w.m.genId(),result:"",title:e.userInput.value,userInput:e.userInput},a={userInput:e.userInput,useModel:P.A.composeGpt4Enabled?tX.f2:tX.Q7,content:e.text},n=()=>{this.isTaskFinished=!0,this.isTaskLoading=!1,this.taskId=""},r=e=>{n(),this.writings.length>0&&ef.M.error(e,"dialogRoot")},s=e=>{e&&(this.isTaskLoading&&(this.isTaskLoading=!1,this.writings.push(o),this.activeWritingItemId=o.id),this.writings.find(e=>e.id===o.id).result=e)},{taskId:l}=await az.Tn.doWriting("writing:improve_text",a,(e,t,i)=>{if(i){r("".concat(i));return}s(e),t&&n()},"/improve_text");this.taskId=l}getListItemId(e){return"monica-improve-command-".concat(e)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"copied",!1),(0,T._)(this,"prompt",""),(0,T._)(this,"promptMatchedCommandsVisible",!1),(0,T._)(this,"writings",[]),(0,T._)(this,"activeWritingItemId",""),(0,T._)(this,"isTaskFinished",!0),(0,T._)(this,"isTaskLoading",!1),(0,T._)(this,"popoverVisible",!1),(0,T._)(this,"commands",[]),(0,T._)(this,"commandsLoading",!1),(0,T._)(this,"textareaRef",null),(0,T._)(this,"promptMatchedCommandsContainerEl",null),(0,T._)(this,"keyboardManager",new ea.J),(0,T._)(this,"isCompositionStart",!1),(0,T._)(this,"taskId",""),(0,T._)(this,"handlePrevClick",()=>{this.activeWritingIndex>0&&(this.activeWritingItemId=this.writings[this.activeWritingIndex-1].id)}),(0,T._)(this,"handleNextClick",()=>{this.activeWritingIndex<this.writings.length-1&&(this.activeWritingItemId=this.writings[this.activeWritingIndex+1].id)})}}(0,I.gn)([S.SB],va.prototype,"copied",void 0),(0,I.gn)([S.SB],va.prototype,"prompt",void 0),(0,I.gn)([S.SB],va.prototype,"promptMatchedCommandsVisible",void 0),(0,I.gn)([S.SB],va.prototype,"writings",void 0),(0,I.gn)([S.SB],va.prototype,"activeWritingItemId",void 0),(0,I.gn)([S.SB],va.prototype,"isTaskFinished",void 0),(0,I.gn)([S.SB],va.prototype,"isTaskLoading",void 0),(0,I.gn)([S.SB],va.prototype,"popoverVisible",void 0),(0,I.gn)([S.SB],va.prototype,"commands",void 0),(0,I.gn)([S.SB],va.prototype,"commandsLoading",void 0),(0,I.gn)([tB.Fl],va.prototype,"isSpeaking",null),(0,I.gn)([tB.Fl],va.prototype,"S",null),(0,I.gn)([tB.Fl],va.prototype,"suggestionCommandVisible",null),(0,I.gn)([tB.Fl],va.prototype,"promptMatchedCommands",null),(0,I.gn)([tB.Fl],va.prototype,"activeWritingIndex",null),(0,I.gn)([tB.Fl],va.prototype,"activeWriting",null),(0,I.gn)([tB.Fl],va.prototype,"suggestionCommands",null);let vn=S._Y.createComponent("ImproveWithAiDrawer",va,e=>(0,y.jsx)(t6.d,{enableHorizontalStyle:!0,onDispose:()=>{e.props.onDisposed()},maxHeight:780,visible:!0,title:(0,y.jsxs)("div",{className:vi.improveWithAiDrawerTitle,children:[e.props.showBackIcon&&(0,y.jsx)("span",{className:vi.backIcon,onClick:e.props.onDisposed,children:(0,y.jsx)(t_.J,{name:"template-back",size:16,color:"currentColor"})}),(0,y.jsx)("span",{children:e.S.improveWithAi})]}),children:(0,y.jsx)("div",{className:vi.improveWithAiDrawer,children:(0,y.jsx)(vs,{vm:e})})})),vr=S._Y.createComponent("ImproveWithAiDrawer",va,e=>(0,y.jsx)(W.u,{width:450,className:vi.improveWithAiDialog,onDispose:e.props.onDisposed,fixed:!0,children:(0,y.jsx)(vs,{vm:e})})),vs=(0,F.Pi)(function(e){var t,i;let{vm:o}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:vi.content,children:(0,y.jsxs)("div",{className:vi.resultWrapper,children:[!o.isTaskLoading&&!!(null===(t=o.writings[o.activeWritingIndex])||void 0===t?void 0:t.title)&&(0,y.jsx)("div",{className:vi.resultHeader,children:o.writings[o.activeWritingIndex].title}),(0,y.jsx)("div",{className:vi.result,children:o.isTaskLoading?(0,y.jsxs)("div",{className:vi.loadingWrapper,children:[(0,y.jsx)(t_.J,{name:"memoLoading",size:18,className:vi.loading}),(0,y.jsx)("span",{children:o.S.workingOnIt})]}):(null===(i=o.activeWriting)||void 0===i?void 0:i.result)||""}),(0,y.jsxs)("div",{className:vi.resultFooter,children:[(0,y.jsx)("div",{className:vi.resultFooterLeft,children:o.writings.length>1&&(0,y.jsx)(u9.b,{page:o.activeWritingIndex,pageSize:o.writings.length,onPrevClick:o.handlePrevClick.bind(o),onNextClick:o.handleNextClick.bind(o)})}),o.isTaskFinished&&(0,y.jsx)("div",{className:vi.resultFooterRight,children:(0,y.jsx)(vd,{vm:o})})]})]})}),(0,y.jsxs)("div",{className:vi.promptContainer,children:[o.isTaskFinished?(0,y.jsx)(vl,{vm:o}):(0,y.jsxs)("div",{className:vi.stopBtn,onClick:o.handleStop.bind(o),children:[(0,y.jsx)(t_.J,{name:"agentStopNew",color:"currentColor",size:16}),(0,y.jsx)("span",{children:o.S.stop})]}),(0,y.jsxs)("div",{className:vi.textareaWrapper,children:[(0,y.jsx)("div",{className:q()(vi.promptMatchedCommandsWrapper,{[vi.show]:o.promptMatchedCommandsVisible}),children:(0,y.jsx)("div",{className:q()(vi.promptMatchedCommands),ref:e=>{o.promptMatchedCommandsContainerEl=e},children:o.promptMatchedCommands.map((e,t)=>{var i;let a=(null===(i=o.keyboardManager)||void 0===i?void 0:i.activeIndex)===t;return(0,y.jsx)("div",{id:"monica-improve-command-".concat(t),className:q()(vi.command,{[vi.selected]:a}),onClick:()=>{o.handleMatchedCommandSelect(t)},children:(0,y.jsx)(eu(),{highlightClassName:vi.highlight,searchWords:[o.prompt],textToHighlight:e.name})},e.key)})})}),(0,y.jsx)(ow.W,{className:vi.textarea,value:o.prompt,autoFocus:!0,onChange:o.handlePromptChange.bind(o),onCompositionStart:()=>{o.isCompositionStart=!0},onCompositionEnd:()=>{o.isCompositionStart=!1},placeholder:o.S.tellMonicaTo,getTextAreaRef:e=>{o.textareaRef=e}}),(0,y.jsxs)("div",{className:vi.chatBar,children:[(0,y.jsx)(tD,{getInitialValue:()=>o.prompt,onUpdate:o.handleVoiceInputUpdate.bind(o),onFinished:e=>{o.handleVoiceInputUpdate(e),setTimeout(()=>{var e;null===(e=o.textareaRef)||void 0===e||e.focus({cursor:"end"})})}}),(0,y.jsx)("span",{className:q()(vi.chatInputSendIconWrapper,{[vi.active]:o.prompt.trim()}),onClick:o.handlePromptEnter.bind(o),children:(0,y.jsx)(t_.J,{name:"chatInputSend",size:20,color:"currentColor"})})]})]})]}),(0,y.jsx)("div",{className:vi.footer,children:(0,y.jsx)(vt,{source:"improve_with_ai_drawer",showGpt4:!0,gpt4Checked:P.A.composeGpt4Enabled,onGpt4Change:e=>{P.A.setComposeGpt4Enabled(e)},usageInfoProps:{usageModule:P.A.composeGpt4Enabled?"genius_bot":"basic_query"}})})]})}),vl=(0,F.Pi)(e=>{let{vm:t}=e;return t.suggestionCommandVisible?(0,y.jsxs)("div",{className:vi.suggestCommands,children:[t.suggestionCommands.map(e=>(0,y.jsx)(eO.z,{type:"lightGray",size:"medium",icon:e.iconName,onClick:()=>{t.handleCommandClick(e)},children:e.name},e.key)),(0,y.jsx)(tK.x,{placement:"topRight",open:t.popoverVisible,onOpenChange:t.handleCommandPopoverOpenChange.bind(t),trigger:"hover",content:(0,y.jsx)(vc,{vm:t}),getPopupContainer:e=>e.parentElement,children:(0,y.jsx)("div",{className:q()(vi.moreBtn,{[vi.moreBtnActive]:t.popoverVisible}),children:(0,y.jsx)(t_.J,{name:"readingMore",color:"currentColor",size:16})})})]}):null}),vc=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsx)(aR.h,{children:t.commands.map(e=>(0,y.jsx)(aQ.X,{icon:e.iconName,content:e.name,onClick:()=>{t.handleCommandClick(e),t.popoverVisible=!1}},e.key))})}),vd=(0,F.Pi)(e=>{var t;let{vm:i}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(tN.u,{title:i.isSpeaking?i.S.stop:i.S.speak,getPopupContainer:e=>e.parentElement,children:(0,y.jsx)("span",{className:vi.voiceBtn,onClick:i.startOrStopSpeak.bind(i),children:(0,y.jsx)(t_.J,{name:i.isSpeaking?"monicaSoundOff":"monicaSound",size:16,color:"currentColor"})})}),(0,y.jsx)(tN.u,{title:i.copied?i.S.copied:i.S.copy,getPopupContainer:e=>e.parentElement,children:(0,y.jsx)("span",{className:q()(vi.copyBtn,{[vi.copied]:i.copied}),onClick:i.handleCopy.bind(i),children:(0,y.jsx)(t_.J,{name:i.copied?"monicaSuccess":"monicaCopy",size:16,color:"currentColor"})})}),(null===(t=i.activeWriting)||void 0===t?void 0:t.userInput.value)&&(0,y.jsx)(tN.u,{title:i.S.regenerate,getPopupContainer:e=>e.parentElement,children:(0,y.jsx)("span",{className:vi.rephraseBtn,onClick:i.handleRephrase.bind(i),children:(0,y.jsx)(t_.J,{name:"monicaRefresh",size:16,color:"currentColor"})})})]})}),vp=H.t.createOpener(vn);H.t.createOpener(vr);class vm extends S.PN{get isSpeaking(){var e;let{scene:t}=this.props,i=this.buildSpeakId("translatedText"===t?(null===(e=this.props.translateData)||void 0===e?void 0:e.translatedContent)||"":this.props.sourceContent);return tI._.speakingMsgId===i}get S(){return ei.S.Global.modules.MainWindow.MonicaTranslateView.TranslateTool}onViewCreate(){}onViewDestroy(){}startOrStopSpeak(){let e,t;let{translateData:i,sourceContent:o,sourceLang:a,toLang:n,scene:r}=this.props,{translatedContent:s=""}=i||{};"sourceText"===r?(e=o,t=a):(e=s,t=n),e.trim()&&(this.isSpeaking?tI._.cancelSpeak():t&&tI._.speakMessage({id:this.buildSpeakId(e),text:e,lang:r8.q.getLocaleByComposeLanguage(t)}))}async handleSaveToMemo(){let{sourceContent:e,translateData:t,toLang:i}=this.props,o=(null==t?void 0:t.translatedContent)||"";if(e&&o&&i){this.saveToMemoLoading=!0;try{let t=await iH.a.createFromEmbed({embedData:{type:"commonTranslate",input:e,detail:o}});iH.a.saveToMemoSuccess(t.item.uid)}catch(e){ef.M.error(w.m.formatErrorMsg(e))}finally{this.saveToMemoLoading=!1}}}buildSpeakId(e){if("sourceText"===this.props.scene)return"source:".concat(e);let{engineId:t,translatedContent:i}=this.props.translateData||{engineId:"",translatedContent:""};return"result:".concat(t,":").concat(i)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0),(0,T._)(this,"saveToMemoLoading",!1),(0,T._)(this,"memoSaved",!1)}}(0,I.gn)([S.SB],vm.prototype,"someState",void 0),(0,I.gn)([S.SB],vm.prototype,"saveToMemoLoading",void 0),(0,I.gn)([S.SB],vm.prototype,"memoSaved",void 0),(0,I.gn)([S.Fl],vm.prototype,"isSpeaking",null),(0,I.gn)([S.Fl],vm.prototype,"S",null);let vh=S._Y.createComponent("TranslateTool",vm,e=>{let{sourceContent:t,scene:i,translateData:o,onClear:a,sourceLang:n,toLang:r}=e.props,{translatedContent:s,status:l}=o||{translatedContent:"",status:""},c=!!t.trim(),d=!!s.trim()&&"error"!==l;return(0,y.jsxs)("div",{className:"translate-tool--E7VfR",children:[(0,y.jsx)(nj.h,{title:e.isSpeaking?e.S.stop:e.S.speak,iconName:e.isSpeaking?"monicaSoundOff":"monicaSound",disabled:"sourceText"===i?!c:!d,onClick:()=>{e.startOrStopSpeak()}}),(0,y.jsx)(tZ.X,{text:"sourceText"===i?t:s,render:(e,t)=>(0,y.jsx)(nj.h,{title:"",iconName:e?"monicaSuccess":"monicaCopy",disabled:"sourceText"===i?!c:!d,onClick:t})}),"sourceText"===i&&c&&(0,y.jsx)(nj.h,{title:e.S.clear,iconName:"monicaTrash",onClick:()=>{null==a||a()}}),"translatedText"===i&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(nj.h,{iconName:e.memoSaved?"monicaSuccess":e.saveToMemoLoading?"loading":"saveMemo",disabled:!d,title:e.memoSaved?e.S.memoSaved:e.saveToMemoLoading?"":e.S.saveToMemo,onClick:()=>{e.handleSaveToMemo()}}),(0,y.jsx)(nj.h,{disabled:!d,title:e.S.improveWithAi,iconName:eh.UZ.lineFeaturePenAI,onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"click_improve_with_ai",extData:{tab:"translate"}}),vp({insertTarget:"mainWindow",content:s})}}),(0,y.jsx)(nj.h,{disabled:!d,title:e.S.continueInChat,iconName:"continueInChat",onClick:async()=>{(await D.Mp.beforeContinueInChat()).continueInChat({type:"translate",sourceContent:t,sourceLang:n,toLang:r,translatedContent:s})}})]})]})});var vg={translateResult:"translate-result--hdb2Q",active:"active--l0_y3",header:"header--JdGTF",expanded:"expanded--VBLEw",name:"name--A4W7k",arrow:"arrow--Te551",content:"content--FXWqa",textWrap:"text-wrap--npat7",placeholder:"placeholder--f0Y6D",loading:"loading--LgguU",translatedTextContent:"translated-text-content--Z7CcK",secondaryErrorText:"secondary-error-text--WpUOX",buttonGroup:"button-group--qIstE",retryButton:"retry-button--fFeEv",actions:"actions--ybzD3",dropdownLabel:"dropdown-label--Uqh0r",disabled:"disabled--UgGO8",open:"open--tvamC",text:"text--HoIeT"};(s=u||(u={})).FREE_NORMAL="free_normal",s.FREE_ERROR="free_error",s.EXTRACT_PACK="extract_pack";class vu extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MonicaTranslateView.TranslateResult}onViewCreate(){}onViewDestroy(){}traceEvent(e){eL.M.createUserBehaviorEvent({eventName:"translate_view_click",source:"upgrade",extData:{status:e}})}getMotivation(e){return"sidebar_tab_translate_upgrade_".concat(e)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"ctx",(0,S.qp)(u1)),(0,T._)(this,"popoverOpen",!1)}}(0,I.gn)([S.Do],vu.prototype,"ctx",void 0),(0,I.gn)([S.SB],vu.prototype,"popoverOpen",void 0),(0,I.gn)([tB.Fl],vu.prototype,"S",null);let vv=S._Y.createComponent("TranslateResult",vu,e=>{var t;let{translateData:i,active:o,getRef:a,onExpand:n,onSceneChange:r,onRetry:s}=e.props,{status:l,engineId:c,translatedContent:d,expanded:p,sceneId:m=uG.f.defaultSceneId,errorCode:h,errorText:v}=i,C=uG.f.translateEngineList.find(e=>e.id===c),x=null==C?void 0:C.icon,b="error"===l&&h!==g.PAID_USER_FAILED_TRANSLATION&&h!==g.BASIC_ENGINE_FAILED_TRANSLATION;return(0,y.jsxs)("div",{className:q()(vg.translateResult,{[vg.active]:o}),ref:a,children:[(0,y.jsxs)("div",{className:q()(vg.header,{[vg.expanded]:p}),onClick:()=>{null==n||n(!i.expanded)},children:[x&&(0,y.jsx)(eH.E,{src:x,style:{width:16,height:16,borderRadius:"100%",overflow:"hidden",border:"1px solid var(--theme-border-primary)"}}),(0,y.jsx)("div",{className:vg.name,children:null==C?void 0:C.name}),"translating"===l&&!p&&(0,y.jsx)(eC.g,{size:14}),(0,y.jsx)(t_.J,{name:eh.UZ.lineDirectionArrowDown,color:"var(--theme-icon-tertiary)",className:q()(vg.arrow,{[vg.expanded]:p})})]}),(0,y.jsxs)("div",{className:q()(vg.content,{[vg.expanded]:p}),children:[(0,y.jsxs)("div",{className:vg.textWrap,children:["translating"===l&&(0,y.jsxs)("div",{className:vg.loading,children:[(0,y.jsx)(eC.g,{size:16})," ",e.S.translating]}),"translated"===l&&(0,y.jsx)("p",{className:vg.translatedTextContent,children:d.split("\n").map((e,t)=>(0,y.jsxs)(Q.Fragment,{children:[e,(0,y.jsx)("br",{})]},t))}),"default"===l&&(0,y.jsx)("p",{className:vg.placeholder,children:e.S.placeholder}),"error"===l&&(0,y.jsx)("div",{className:vg.errorBox,children:(()=>{if("error"!==l)return null;let t=(0,y.jsx)(eO.z,{size:"small",type:"blackOutline",icon:(0,y.jsx)(t_.J,{name:eh.UZ.lineDirectionRefreshRight,size:14}),className:vg.retryButton,onClick:()=>{null==s||s()},children:e.S.retry}),i=e=>{let{text:t,onClick:i}=e;return(0,y.jsx)(eO.z,{size:"small",type:"outline",color:"primary",icon:(0,y.jsx)(t_.J,{name:"coloredRocket",size:16}),onClick:()=>{i()},children:t})};switch(h){case g.FREE_USER_USED_ADVANCED_ENGINE:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{className:vg.secondaryErrorText,children:e.S.upgradeToUseService}),(0,y.jsx)("div",{className:vg.buttonGroup,children:(0,y.jsx)(i,{text:e.S.upgrade,onClick:()=>{e.traceEvent(u.FREE_NORMAL),tP.K.handleCreditsNotEnough({module:"basic_query",featureName:"monicaTranslation",source:e.getMotivation(u.FREE_NORMAL)})}})})]});case g.FRE_USER_FAILED_FREE_TRANSLATION:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{className:vg.secondaryErrorText,children:(0,ei.x)(e.S.serviceUnavailable,{service:(null==C?void 0:C.name)||""})}),(0,y.jsxs)("div",{className:vg.buttonGroup,children:[(0,y.jsx)(i,{text:e.S.upgrade,onClick:()=>{e.traceEvent(u.FREE_ERROR),tP.K.handleCreditsNotEnough({module:"genius_bot",featureName:"monicaTranslation",source:e.getMotivation(u.FREE_ERROR)})}}),t]})]});case g.PAID_USER_FAILED_FREE_TRANSLATION:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{className:vg.secondaryErrorText,children:e.S.translateFailedTips}),(0,y.jsx)("div",{className:vg.buttonGroup,children:t})]});case g.ADVANCED_QUERY_LIMIT:case g.BASIC_QUERY_LIMIT:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{className:vg.secondaryErrorText,children:e.S.basicQueryLimit}),(0,y.jsx)("div",{className:vg.buttonGroup,children:(0,y.jsx)(i,{text:e.S.upgrade,onClick:()=>{e.traceEvent(u.EXTRACT_PACK),tP.K.handleCreditsNotEnough({module:h===g.ADVANCED_QUERY_LIMIT?"genius_bot":"basic_query",featureName:"monicaTranslation",source:e.getMotivation(u.EXTRACT_PACK)})}})})]});case g.BASIC_ENGINE_FAILED_TRANSLATION:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{className:vg.secondaryErrorText,children:v||e.S.translateFailedTips}),(0,y.jsx)("div",{className:vg.buttonGroup,children:t})]});case g.PAID_USER_FAILED_TRANSLATION:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{className:vg.secondaryErrorText,children:e.S.translateFailed}),(0,y.jsx)("div",{className:vg.buttonGroup,children:t})]});default:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{className:vg.secondaryErrorText,children:v||e.S.translateFailed}),(0,y.jsx)("div",{className:vg.buttonGroup,children:t})]})}})()})]}),(0,y.jsxs)("div",{className:vg.actions,children:[(0,y.jsx)(vh,{scene:"translatedText",sourceContent:e.ctx.sourceText,sourceLang:"auto"===e.ctx.sourceLang?e.ctx.detectLanguage||"auto":e.ctx.sourceLang,translateData:i,toLang:e.ctx.toLang}),uG.f.allowApplySceneTranslation(c)&&(0,y.jsx)(tK.x,{trigger:"click",content:(0,y.jsx)(u4,{value:m,onChange:t=>{null==r||r(t),e.popoverOpen=!1}}),open:e.popoverOpen,onOpenChange:t=>{"error"!==l&&(e.popoverOpen=t)},triggerNode:(0,y.jsxs)("div",{className:q()(vg.dropdownLabel,{[vg.open]:e.popoverOpen,[vg.disabled]:b}),children:[(0,y.jsx)("span",{className:vg.text,children:null===(t=uG.f.sceneList.find(e=>e.id===m))||void 0===t?void 0:t.name}),(0,y.jsx)(t_.J,{name:eh.UZ.lineDirectionArrowDown,color:b?"var(--theme-icon-disable)":e.popoverOpen?"var(--theme-icon-brand)":"currentColor"})]})})]})]})]})});var vC=i(49284),vx=i(85727),vy=i(20905),vb={translateSubmenus:"translate-submenus--L8nGd",header:"header--qFEZX",actions:"actions--sVVEm",actionBox:"action-box--Z3zTW",actionBtn:"action-btn--x2UnO",active:"active--qK1Rt",settingMenuPanel:"setting-menu-panel--kKaOY",left:"left--ZEdNF",bottom:"bottom--qo5z4",popoverMode:"popover-mode--b7PcF",innerBox:"inner-box--YKoub",tools:"tools--zwXdy",switch:"switch--zHMFE",settings:"settings--Zh74n",group:"group--Pnml7",groupTitle:"group-title--_t6IQ",groupContent:"group-content--klBWQ",transEngine:"trans-engine--PD13K",item:"item--XMl4R",top:"top--EFbm_",name:"name--tctfg",select:"select--zXOA5",selectBtn:"select-btn--Yzuz8",selectName:"select-name--_qju_",text:"text--HmR2j",hint:"hint--EsHUP",arrow:"arrow--c6aW2",hint2:"hint2--fVhsM",moreFeatures:"more-features--YtVkU",feature:"feature--lUIGY",languageSetting:"language-setting--_O025",settingLabel:"setting-label--EXAyU",label:"label--Ft6X7",target:"target--EivaS",iconWrapper:"icon-wrapper--ZtbgM",icon:"icon--UCAoH",rowItem:"row-item--GpeJb",shortcutWrapper:"shortcut-wrapper--IQlR3",add:"add--X4QWT",tip:"tip--K0_lr",children:"children--hi0VK",colorLabel:"color-label--JVOWx",content:"content--YLAzF",emoji:"emoji--o4i7G",popoverWrapper:"popover-wrapper--sWChl",dropdownLabel:"dropdown-label--mINrg"},vf=i(19613),vw=i(10076),vS=i(5431);(l=v||(v={})).autoTranslateCurrentSite="autoTranslateCurrentSite",l.neverTranslateCurrentSite="neverTranslateCurrentSite",(c=C||(C={})).compare="compare",c.showOnlyTranslation="showOnlyTranslation";class vA extends S.PN{get translateEngineIds(){var e;return[null!==(e=P.A.translationEngine)&&void 0!==e?e:uG.f.freeEngineList[0].id]}get translateEngine(){return uG.f.webpageTranslationEngineList.find(e=>e.id===this.translateEngineIds[0])}get isAdvancedEngine(){var e,t;return uG.f.isAdvancedEngine(null!==(t=null===(e=this.translateEngine)||void 0===e?void 0:e.id)&&void 0!==t?t:"")}get allowApplySceneTranslation(){var e,t;return uG.f.allowApplySceneTranslation(null!==(t=null===(e=this.translateEngine)||void 0===e?void 0:e.id)&&void 0!==t?t:"")}get translateSceneId(){var e;return null!==(e=P.A.translationScene)&&void 0!==e?e:uG.f.autoSelectSceneId}get translateScene(){return uG.f.sceneList.find(e=>e.id===this.translateSceneId)}get TranslateTypeList(){return[{key:"compare",label:this.S.compare,icon:"patTranslateFill"},{key:"showOnlyTranslation",label:this.S.showOnlyTranslation,icon:"translate-only"}]}get translateType(){return M.translateHelper.parallelTranslation.onlyShowTranslation?"showOnlyTranslation":"compare"}get translateSettingList(){return[{key:"autoTranslateCurrentSite",label:this.S.autoTranslateCurrentSite},{key:"neverTranslateCurrentSite",label:this.S.neverTranslateCurrentSite}]}get translateShortcutSettingList(){return[{key:vw.hx.shortcutCtr,label:this.S.shortcutCtr},{key:vw.hx.shortcutShift,label:this.S.shortcutShift},{key:vw.hx.shortcutOption,label:M.translateHelper.isMacOS?this.S.shortcutOption:this.S.shortcutAlt},{key:vw.hx.shortcutDirect,label:this.S.shortcutDirect}]}get translateStyleSettingList(){return[{key:vw.wx.default,label:this.S.translateStyleDefault},{key:vw.wx.underline,label:this.S.translateStyleUnderline},{key:vw.wx.weak,label:this.S.translateStyleWeak},{key:vw.wx.customColor,label:(0,y.jsxs)("div",{className:vb.colorLabel,children:[(0,y.jsx)("div",{className:vb.pickerWrapper,onClick:e=>{e.stopPropagation()},children:(0,y.jsx)(cU,{size:"small",value:M.translateHelper.parallelTranslation.parallelTranslateStyleColor,getPopupContainer:()=>H.t.dialogRoot||document.body,onChange:e=>{this.setTranslateStyleColor(e.toHexString())}})}),this.S.customColor]})}]}get initialSettingValue(){return M.translateHelper.disableTranslateCurSite?"neverTranslateCurrentSite":"autoTranslateCurrentSite"}get translateSettingEnable(){return M.translateHelper.autoTranslateByCheckSite||M.translateHelper.disableTranslateCurSite}get S(){return ei.S.Global.components.TranslateSubmenus}get placement(){return E.w.isSidebarRenderLeft?"right":"left"}get tooltipDisabled(){return M.translateHelper.parallelTranslation.settingsPanelVisible||vf.w.sidebarEntryBtn.settingPanelVisible}get panelRenderLeft(){return E.w.isSidebarRenderLeft}get panelRenderBottom(){return window.innerHeight-vf.w.sidebarEntryBtn.bottomPercent*window.innerHeight<500}get autoTranslateLang(){let e=M.translateHelper.sourceLang,t=M.translateHelper.pageLang;return[vS.k.AUTO_DETECT_LANG,"auto"].includes(e)?t:e}get autoTranslateLangDisplayName(){return this.autoTranslateLang?r8.q.getLanguageDisplayNameByLocale(this.autoTranslateLang,ei.a.locale):null}get autoTranslateByCheckLang(){let{autoTranslateLocales:e}=M.translateHelper.parallelTranslation;return!!e.includes(this.autoTranslateLang)}get parallelShortcutValue(){return M.translateHelper.parallelTranslation.parallelShortcutValue||vw.hx.shortcutCtr}get parallelShortcutEnable(){return M.translateHelper.parallelTranslation.parallelShortcutEnable}sendEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{source:i,...o}=t;eL.M.createUserBehaviorEvent({eventName:e,source:i,extData:o})}setOnlyShowTransition(e){let t="showOnlyTranslation"===e;this.sendEvent("translate_setting_changeformat_click",{type:t?"translation_only":"bilingual"}),tV.ll.set("parallelOnlyShowTranslation",t)}setSettingValue(e){!this.translateSettingEnable||("autoTranslateCurrentSite"===e?M.translateHelper.autoTranslateByCheckSite||(this.handleAutoTranslateCurSite(),setTimeout(()=>{"waiting"===M.translateHelper.parallelTranslation.translateStatus&&M.translateHelper.translate({})},0),this.sendEvent("translate_setting_switch_click",{type:"open",settings:"auto_translate"})):"neverTranslateCurrentSite"!==e||M.translateHelper.disableTranslateCurSite||(this.handleDisableTranslateCurSite(),this.sendEvent("translate_setting_switch_click",{type:"open",settings:"never_translate"}))),this.settingValue=e}setShortcutSettingValue(e){tV.ll.set("parallelShortcutValue",e)}setShortcutEnable(e){tV.ll.set("parallelShortcutEnable",e),this.sendEvent("translate_setting_switch_click",{type:e?"open":"close",settings:M.translateHelper.parallelShortcutValue})}setTranslateStyle(e){tV.ll.set("parallelTranslateStyle",e),this.sendEvent("translate_setting_translationstyle_click",{type:e})}setTranslateStyleColor(e){tV.ll.set("parallelTranslateStyleColor",e),this.sendEvent("translate_setting_translationstyle_color_click",{type:e})}handleToggleTranslateSetting(){let e=this.settingValue?this.settingValue:this.initialSettingValue;"autoTranslateCurrentSite"===e?this.handleAutoTranslateCurSite():"neverTranslateCurrentSite"===e&&this.handleDisableTranslateCurSite()}async onViewCreate(){tU.f.getProxy(this).add((0,tB.U5)(()=>vf.w.sidebarEntryBtn.isDragging,e=>{e&&M.translateHelper.parallelTranslation.settingsPanelVisible&&this.closeSettingPanel()})),M.translateHelper.parallelTranslation.sameLangHintVisible=await this.checkoutSameLangHintEnable(),window.addEventListener("click",this.closeSettingPanel)}onViewDestroy(){tU.f.getProxy(this).disposeAll(),window.removeEventListener("click",this.closeSettingPanel)}handleSettingMenuClick(e){e.stopPropagation(),vf.w.sidebarEntryBtn.settingPanelVisible&&vf.w.sidebarEntryBtn.setSettingPanelVisible(!1),M.translateHelper.parallelTranslation.settingsPanelVisible=!M.translateHelper.parallelTranslation.settingsPanelVisible}async translateByLangChange(){"translated"===M.translateHelper.parallelTranslation.translateStatus&&(M.translateHelper.toggleRenderType("original"),M.translateHelper.parallelTranslation.settingsPanelVisible=!1,M.translateHelper.updateTaskUid(),await M.translateHelper.doTranslate(),M.translateHelper.parallelTranslation.translateStatus="translated")}handleAutoTranslateCurSite(){let e=location.hostname,{autoTranslateHosts:t,disableTranslateHosts:i}=M.translateHelper.parallelTranslation;M.translateHelper.autoTranslateByCheckSite?t=this.deleteArrayStringItem(t,e):(t.push(e),i=this.deleteArrayStringItem(i,e),"waiting"===M.translateHelper.parallelTranslation.translateStatus&&(M.translateHelper.translate({}),M.translateHelper.parallelTranslation.settingsPanelVisible=!1)),tV.ll.set("parallelTranslationAutoTranslateHosts",t),tV.ll.set("parallelTranslationDisableTranslateHosts",i)}handleAutoTranslateCurPageLang(e){let{autoTranslateLocales:t}=M.translateHelper.parallelTranslation;this.autoTranslateByCheckLang?t=this.deleteArrayStringItem(t,e):(t.push(e),"waiting"===M.translateHelper.parallelTranslation.translateStatus&&(M.translateHelper.translate({}),M.translateHelper.parallelTranslation.settingsPanelVisible=!1)),tV.ll.set("parallelTranslationAutoTranslateLocales",t)}handleDisableTranslateCurSite(){let e=location.hostname,{autoTranslateHosts:t,disableTranslateHosts:i}=M.translateHelper.parallelTranslation;M.translateHelper.disableTranslateCurSite?i=this.deleteArrayStringItem(i,e):(i.push(e),t=this.deleteArrayStringItem(t,e),setTimeout(()=>{M.translateHelper.toggleRenderType("original")},0)),tV.ll.set("parallelTranslationAutoTranslateHosts",t),tV.ll.set("parallelTranslationDisableTranslateHosts",i)}async sendDislikeFeedback(){M.translateHelper.parallelTranslation.isDislike=!M.translateHelper.parallelTranslation.isDislike;try{await u$.Q.feedbackTranslateResult({like:!M.translateHelper.parallelTranslation.isDislike,originUrl:location.href,taskType:"writing:compare_translate",taskUid:M.translateHelper.taskUid}),M.translateHelper.parallelTranslation.isDislike&&ef.M.success(this.S.feedbackSuccess,"dialogRoot")}catch(e){M.translateHelper.parallelTranslation.isDislike=!M.translateHelper.parallelTranslation.isDislike,ef.M.error(w.m.formatErrorMsg(e))}}async checkoutSameLangHintEnable(){let e=new Date().toDateString(),t=await tV.ll.get("parallelTranslationSameLangHintShowedTime");return!!M.translateHelper.isSameLang&&t!==e}traceClick(e){eL.M.createUserBehaviorEvent({eventName:"translate_view_click",source:e})}doTranslate(){"ext-sidebar"!==f.o.entryType&&("waiting"===M.translateHelper.parallelTranslation.translateStatus?M.translateHelper.translate({}):M.translateHelper.afterToggleTranslateConfig())}createUserBehaviorEvent(e,t){eL.M.createUserBehaviorEvent({eventName:"translate_page_click",extData:{page:"sidebar_toolbar",position:e,button:t}})}deleteArrayStringItem(e,t){let i=new Set(e);return i.delete(t),Array.from(i)}closeSettingPanel(){M.translateHelper.parallelTranslation.settingsPanelVisible=!1}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"sameLangHintVisible",!1),(0,T._)(this,"settingValue",null)}}(0,I.gn)([S.SB],vA.prototype,"sameLangHintVisible",void 0),(0,I.gn)([S.SB],vA.prototype,"settingValue",void 0),(0,I.gn)([tB.Fl],vA.prototype,"translateEngineIds",null),(0,I.gn)([tB.Fl],vA.prototype,"translateEngine",null),(0,I.gn)([tB.Fl],vA.prototype,"isAdvancedEngine",null),(0,I.gn)([tB.Fl],vA.prototype,"allowApplySceneTranslation",null),(0,I.gn)([tB.Fl],vA.prototype,"translateSceneId",null),(0,I.gn)([tB.Fl],vA.prototype,"translateScene",null),(0,I.gn)([tB.Fl],vA.prototype,"TranslateTypeList",null),(0,I.gn)([tB.Fl],vA.prototype,"translateType",null),(0,I.gn)([tB.Fl],vA.prototype,"translateSettingList",null),(0,I.gn)([tB.Fl],vA.prototype,"translateShortcutSettingList",null),(0,I.gn)([tB.Fl],vA.prototype,"translateStyleSettingList",null),(0,I.gn)([tB.Fl],vA.prototype,"initialSettingValue",null),(0,I.gn)([tB.Fl],vA.prototype,"translateSettingEnable",null),(0,I.gn)([tB.Fl],vA.prototype,"S",null),(0,I.gn)([tB.Fl],vA.prototype,"placement",null),(0,I.gn)([tB.Fl],vA.prototype,"tooltipDisabled",null),(0,I.gn)([tB.Fl],vA.prototype,"panelRenderLeft",null),(0,I.gn)([tB.Fl],vA.prototype,"panelRenderBottom",null),(0,I.gn)([tB.Fl],vA.prototype,"autoTranslateLang",null),(0,I.gn)([tB.Fl],vA.prototype,"autoTranslateLangDisplayName",null),(0,I.gn)([tB.Fl],vA.prototype,"autoTranslateByCheckLang",null),(0,I.gn)([tB.Fl],vA.prototype,"parallelShortcutValue",null),(0,I.gn)([tB.Fl],vA.prototype,"parallelShortcutEnable",null);class vj extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MonicaTranslateView.TranslateEngineContent}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],vj.prototype,"someState",void 0),(0,I.gn)([tB.Fl],vj.prototype,"S",null);let vk=S._Y.createComponent("TranslateEngineContent",vj,e=>{let{className:t,width:i=160,value:o=[],multiple:a}=e.props;return(0,y.jsx)("div",{style:{width:i},className:q()("translate-engine-content--LzOXu",t),children:uG.f.webpageTranslationEngineList.map(t=>{let{icon:i,id:n,name:r,costCredits:s,engineType:l}=t,c=o.includes(n),d=(0,y.jsxs)("div",{className:q()("engine-item--hSGAh",{"active--QzGPm":!a&&c}),onClick:t=>{var i,r,s,l,d,p;if(a){if(c){if(1===o.length){ef.M.error(e.S.selectAtLeastOne);return}null===(i=(r=e.props).onChange)||void 0===i||i.call(r,o.filter(e=>e!==n),t)}else null===(s=(l=e.props).onChange)||void 0===s||s.call(l,[n,...o],t)}else null===(d=(p=e.props).onChange)||void 0===d||d.call(p,[n],t)},children:[(0,y.jsx)(eH.E,{src:i,alt:r,style:{width:16,height:16,borderRadius:"100%",overflow:"hidden",flexShrink:0}}),(0,y.jsx)("span",{className:"text--_2NLd",children:r}),"ai"===l&&(0,y.jsx)(t_.J,{name:"aiV2",size:16}),!eD.userController.isVipUser&&uG.f.isAdvancedEngine(n)&&(0,y.jsx)(t_.J,{name:"vipV2",size:16}),(0,y.jsx)("div",{className:"ext--Mwvp9",children:a&&(0,y.jsx)(aB.X,{checked:c,size:20})})]},n);return uG.f.isFreeEngine(n)?d:(0,y.jsx)(tN.u,{title:(0,ei.x)(e.S.creditsTips,{count:s}),placement:E.w.isSidebarRenderLeft?"right":"left",children:d},n)})})});var vN=i(53033),v_=i(55485);let vT=S._Y.createComponent("TranslateSubmenus",vA,e=>e.props.onlyShowSettingPanel?(0,y.jsx)(vI,{vm:e,popoverMode:!0}):(0,y.jsxs)("div",{className:vb.translateSubmenus,children:[(0,y.jsx)("div",{className:vb.header,children:(0,y.jsx)(t_.J,{name:"monicaTrans",color:"currentColor",size:20})}),(0,y.jsxs)("div",{className:vb.actions,children:[(0,y.jsx)(tN.u,{title:e.S.feedback,placement:e.placement,disabled:e.tooltipDisabled,children:(0,y.jsx)("div",{className:q()(vb.actionBtn,{[vb.active]:M.translateHelper.parallelTranslation.isDislike}),onClick:e.sendDislikeFeedback.bind(e),children:M.translateHelper.parallelTranslation.isDislike?(0,y.jsx)(t_.J,{name:"thumbDownFill",color:"currentColor",size:20}):(0,y.jsx)(t_.J,{name:"thumbdown",color:"currentColor",size:20})})}),(0,y.jsxs)("div",{className:vb.actionBox,children:[M.translateHelper.parallelTranslation.sameLangHintVisible?(0,y.jsx)("div",{className:q()(vb.actionBtn,{[vb.active]:M.translateHelper.parallelTranslation.settingsPanelVisible}),onClick:t=>{M.translateHelper.parallelTranslation.sameLangHintVisible=!1,tV.ll.set("parallelTranslationSameLangHintShowedTime",new Date().toDateString()),e.handleSettingMenuClick(t)},children:(0,y.jsx)(t_.J,{name:"chatInputSetting",color:"currentColor",size:20})}):(0,y.jsx)(tN.u,{title:e.S.settings,placement:e.placement,disabled:e.tooltipDisabled,children:(0,y.jsx)("div",{className:q()(vb.actionBtn,{[vb.active]:M.translateHelper.parallelTranslation.settingsPanelVisible}),onClick:e.handleSettingMenuClick.bind(e),children:(0,y.jsx)(t_.J,{name:"chatInputSetting",color:"currentColor",size:20})})}),M.translateHelper.parallelTranslation.settingsPanelVisible&&(0,y.jsx)(vI,{vm:e}),M.translateHelper.parallelTranslation.sameLangHintVisible&&(0,y.jsx)(vM,{vm:e})]})]})]})),vI=(0,F.Pi)(e=>{var t,i,o,a;let{vm:n,popoverMode:r}=e,s=(0,F.Pi)(e=>{let{label:t,className:i,children:o,labelToolTip:a}=e;return(0,y.jsxs)("div",{className:q()(vb.rowItem,i),children:[(0,y.jsx)("div",{className:q()(vb.label),children:(0,y.jsxs)("span",{className:q()(vb.text),children:[t,a&&(0,y.jsx)(tN.u,{title:a,placement:"bottomRight",children:(0,y.jsx)("span",{className:vb.tip,children:(0,y.jsx)(t_.J,{name:"a67",color:"currentColor",size:16})})})]})}),(0,y.jsx)("div",{className:vb.children,children:o})]})});return(0,y.jsx)("div",{className:q()(vb.settingMenuPanel,{[vb.left]:n.panelRenderLeft,[vb.bottom]:n.panelRenderBottom,[vb.popoverMode]:r}),children:(0,y.jsxs)("div",{className:q()(vb.innerBox),onClick:e=>e.stopPropagation(),children:[(0,y.jsxs)("div",{className:vb.header,children:[(0,y.jsx)("div",{className:vb.title,children:n.S.settings}),(0,y.jsx)("div",{className:vb.tools,children:(0,y.jsx)(tT.r,{className:vb.switch,size:"mediumSmall",label:n.S.enableTranslation,enabled:"translated"===M.translateHelper.renderType,onChange:()=>{"translated"===M.translateHelper.renderType?(M.translateHelper.toggleRenderType("original"),n.createUserBehaviorEvent("translate_close")):(M.translateHelper.translate({}),n.createUserBehaviorEvent("translate_open"))}})})]}),(0,y.jsxs)("div",{className:vb.settings,children:[(0,y.jsxs)("div",{className:vb.languageSetting,children:[(0,y.jsx)(vy.W,{scene:"functional",value:M.translateHelper.sourceComposeLang,onChange:e=>{if(e){M.translateHelper.sourceComposeLang=e,n.doTranslate();let t=e?se.iA[e].locale:"";n.sendEvent("translate_setting_changelang_click",{type:"source",lang:t})}},width:130,allowAuto:!0,allowAutoDetect:!0,height:60,iconSize:20,labelRender:e=>(0,y.jsxs)("div",{className:vb.settingLabel,children:[(0,y.jsx)("div",{className:vb.label,children:e}),(0,y.jsx)("div",{className:vb.target,children:n.S.source})]}),popoverWrapperClassName:vb.popoverWrapper,dropdownLabelClassName:vb.dropdownLabel}),(0,y.jsx)("div",{className:vb.iconWrapper,children:(0,y.jsx)(t_.J,{className:vb.icon,name:"backArrow",color:"var(--theme-icon-quaternary)",size:20})}),(0,y.jsx)(vy.W,{scene:"functional",value:P.A.translationTargetLanguage,onChange:e=>{P.A.setTranslationTargetRespondLanguage(e).then(()=>{setTimeout(()=>{"waiting"===M.translateHelper.parallelTranslation.translateStatus&&M.translateHelper.translate({})})});let t=e?se.iA[e].locale:"";n.sendEvent("translate_setting_changelang_click",{type:"target",lang:t})},width:130,allowFollowSystem:!0,height:60,iconSize:20,labelRender:e=>(0,y.jsxs)("div",{className:vb.settingLabel,children:[(0,y.jsx)("div",{className:vb.label,children:e}),(0,y.jsx)("div",{className:vb.target,children:n.S.target})]}),popoverWrapperClassName:vb.popoverWrapper,dropdownLabelClassName:vb.dropdownLabel})]}),(0,y.jsxs)("div",{className:vb.group,children:[(0,y.jsxs)("div",{className:vb.groupTitle,children:[(0,y.jsx)("span",{children:n.S.translationEngine}),n.isAdvancedEngine&&(0,y.jsx)(eW.x,{trigger:"click",usageModule:"credits",isNewStyle:!0})]}),(0,y.jsx)("div",{className:vb.groupContent,children:(0,y.jsxs)("div",{className:vb.transEngine,children:[(0,y.jsx)("div",{className:vb.item,children:(0,y.jsxs)("div",{className:vb.top,children:[(0,y.jsx)("div",{className:vb.name,children:n.S.translationService}),(0,y.jsx)("div",{className:vb.select,children:(0,y.jsx)(tK.x,{trigger:"click",placement:"bottomRight",closeAfterContentClick:!0,content:(0,y.jsx)(vk,{width:188,value:n.translateEngineIds,onChange:async e=>{if(n.createUserBehaviorEvent("translate_service",e[0]),e.length>0){if(eD.userController.isFreeUser&&uG.f.isAdvancedEngine(e[0])){tP.K.handleCreditsNotEnough({featureName:"aiTranslate",module:"credits",source:"sidebar_toolbar_switch_translate_service"}),uG.f.webTranslationConfigSetting="engine:".concat(e[0]);return}await tV.ll.set("translationEngine",e[0]),n.doTranslate()}}}),triggerNode:(0,y.jsxs)("div",{className:vb.selectBtn,children:[(0,y.jsxs)("div",{className:vb.selectName,children:[(0,y.jsx)(eH.E,{src:null===(t=n.translateEngine)||void 0===t?void 0:t.icon,alt:null===(i=n.translateEngine)||void 0===i?void 0:i.name,style:{width:16,height:16,borderRadius:"100%",overflow:"hidden"}}),(0,y.jsx)("span",{className:vb.text,children:null===(o=n.translateEngine)||void 0===o?void 0:o.name})]}),(0,y.jsx)(t_.J,{name:"arrow",size:12,style:{transform:"rotate(-90deg)"}})]})})})]})}),(n.allowApplySceneTranslation||!n.allowApplySceneTranslation&&!P.A.webTranslationEngineTipClosed)&&(0,y.jsxs)("div",{className:vb.item,children:[n.allowApplySceneTranslation&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:vb.top,children:[(0,y.jsx)("div",{className:vb.name,children:n.S.translationMaster}),(0,y.jsx)("div",{className:vb.select,children:(0,y.jsx)(tK.x,{trigger:"click",placement:"bottomRight",closeAfterContentClick:!0,content:(0,y.jsx)(u4,{width:230,value:n.translateSceneId,showAutoSelect:!0,onChange:async e=>{if(n.createUserBehaviorEvent("translate_master",e),eD.userController.isFreeUser){tP.K.handleCreditsNotEnough({featureName:"aiTranslate",module:"credits",source:"sidebar_toolbar_switch_translate_master"}),uG.f.webTranslationConfigSetting="scene:".concat(e);return}await tV.ll.set("translationScene",e),n.doTranslate()}}),triggerNode:(0,y.jsxs)("div",{className:vb.selectBtn,children:[(0,y.jsx)("span",{className:vb.text,children:null===(a=n.translateScene)||void 0===a?void 0:a.name}),(0,y.jsx)(t_.J,{name:"arrow",size:12,style:{transform:"rotate(-90deg)"}})]})})})]}),(0,y.jsx)("div",{className:vb.hint,children:n.S.translationMasterHint})]}),!n.allowApplySceneTranslation&&!P.A.webTranslationEngineTipClosed&&(0,y.jsx)("div",{className:q()(vb.hint,vb.hint2),onClick:async()=>{n.createUserBehaviorEvent("translate_master","description"),tV.ll.setUiFlag("webTranslationEngineTipClosed",!0);let e="openai";if(eD.userController.isFreeUser){tP.K.handleCreditsNotEnough({featureName:"aiTranslate",module:"credits",source:"sidebar_toolbar_switch_translate_master"}),uG.f.webTranslationConfigSetting="engine:".concat(e);return}await tV.ll.set("translationEngine",e),n.doTranslate()},children:(0,y.jsx)(aN.Z,{S:n.S.translationMasterHint2,components:{b:e=>(0,y.jsxs)("b",{children:[e,(0,y.jsx)("span",{className:vb.arrow,children:(0,y.jsx)(t_.J,{name:"arrowRight",size:14,color:"currentColor"})})]})}})})]})]})})]}),(0,y.jsxs)("div",{className:vb.group,children:[(0,y.jsx)("div",{className:vb.groupTitle,children:n.S.displayMode}),(0,y.jsx)("div",{className:vb.groupContent,children:(0,y.jsx)(v_.m,{theme:"light",list:n.TranslateTypeList,value:n.translateType,onChange:e=>n.setOnlyShowTransition(e)})})]}),(0,y.jsx)("div",{className:vb.group,children:(0,y.jsxs)("div",{className:vb.groupContent,children:[(0,y.jsx)(s,{label:(0,y.jsx)(ps,{list:n.translateSettingList,value:n.settingValue?n.settingValue:n.initialSettingValue,onChange:e=>{n.setSettingValue(e)}}),children:(0,y.jsx)(tT.r,{enabled:n.translateSettingEnable,size:"mediumSmall",onChange:()=>{let e=n.settingValue?n.settingValue:n.initialSettingValue;n.sendEvent("translate_setting_switch_click",{type:n.translateSettingEnable?"close":"open",settings:e===v.autoTranslateCurrentSite?"auto_translate":"never_translate"}),n.handleToggleTranslateSetting()}})}),(0,y.jsx)(s,{label:(0,y.jsxs)("div",{className:vb.shortcutWrapper,children:[(0,y.jsx)("span",{className:vb.shortcutPrefix,children:n.S.shortcutLabel}),(0,y.jsx)("span",{className:vb.add,children:"+"}),(0,y.jsx)(ps,{list:n.translateShortcutSettingList,value:M.translateHelper.parallelShortcutValue,onChange:e=>{n.setShortcutSettingValue(e)}})]}),children:(0,y.jsx)(tT.r,{enabled:n.parallelShortcutEnable,size:"mediumSmall",onChange:e=>{n.setShortcutEnable(e)}})}),n.autoTranslateLang&&(0,y.jsx)(s,{label:(0,ei.x)(n.S.autoTranslate,{langDisplayName:n.autoTranslateLangDisplayName}),children:(0,y.jsx)(tT.r,{size:"mediumSmall",enabled:n.autoTranslateByCheckLang,onChange:()=>{n.sendEvent("translate_setting_switch_click",{type:n.autoTranslateByCheckLang?"close":"open",settings:"auto_translate_english"}),n.handleAutoTranslateCurPageLang(n.autoTranslateLang)}})}),(0,y.jsx)(s,{label:n.S.autoShowTranslateBtn,labelToolTip:f.o.isSafariExtension?"":n.S.autoShowTranslateBtnTip,children:(0,y.jsx)(tT.r,{size:"mediumSmall",enabled:M.translateHelper.parallelTranslation.autoShow,onChange:()=>{n.sendEvent("translate_setting_switch_click",{type:M.translateHelper.parallelTranslation.autoShow?"close":"open",settings:"show_translate_button"}),tV.ll.set("parallelTranslationAutoShow",!M.translateHelper.parallelTranslation.autoShow)}})}),!M.translateHelper.parallelTranslation.onlyShowTranslation&&(0,y.jsxs)("div",{className:q()(vb.rowItem),children:[(0,y.jsx)("div",{className:q()(vb.label),children:(0,y.jsx)("span",{className:q()(vb.text),children:n.S.translateStyle})}),(0,y.jsx)("div",{className:vb.children,children:(0,y.jsx)(ps,{list:n.translateStyleSettingList,value:M.translateHelper.parallelTranslateStyle,onChange:e=>{n.setTranslateStyle(e)},isButton:!0})})]}),(0,y.jsx)(s,{label:n.S.useGlossary,labelToolTip:(0,y.jsx)(vN.v,{openGlossaryMethod:"optionPage"}),children:(0,y.jsx)(uJ.q,{size:"mediumSmall"})})]})}),n.props.moreFeaturesEnabled&&(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:vb.group,children:[(0,y.jsx)("div",{className:vb.groupTitle,children:n.S.moreTranslationFeatures}),(0,y.jsx)("div",{className:vb.groupContent,children:(0,y.jsxs)("div",{className:vb.moreFeatures,children:[(0,y.jsx)("a",{href:"".concat(w.m.genFullUrl(eR.By.docChat),"?source=translate_upload_pdf&action=pdf_translation"),target:"_blank",rel:"noreferrer",children:(0,y.jsx)(eO.z,{className:vb.feature,type:"blackOutline",icon:(0,y.jsx)(vC.Y,{}),shape:"round",onClick:()=>{n.traceClick("upload_pdf")},children:n.S.pdfTranslation})}),(0,y.jsx)(eO.z,{className:vb.feature,type:"blackOutline",icon:(0,y.jsx)(vx.N,{}),shape:"round",onClick:()=>{var e,t;null===(e=(t=n.props).onWebTranslationClick)||void 0===e||e.call(t),E.w.show("translate"),n.traceClick("web_translation")},children:n.S.webTranslation})]})})]})})]})]})})}),vM=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:q()(vb.content,{[vb.left]:t.panelRenderLeft,[vb.bottom]:t.panelRenderBottom}),children:[(0,y.jsx)("p",{className:vb.hint,children:t.S.sameLangHint}),(0,y.jsx)("span",{className:vb.emoji,children:"\uD83D\uDC49"})]})});var vL=i(12410),vB={translateToolkit:"translate-toolkit--bWTiC",large:"large--XVExq",buttonGroup:"button-group--RjVzH",button:"button--Tk6ii",buttonAction:"button-action--zM2g1",active:"active--MCZev",translateIconWrap:"translate-icon-wrap--uPY9i",translateCheckIcon:"translate-check-icon--EJnw3",checkedIcon:"checked-icon--OJhm6"};class vE extends S.PN{get S(){return ei.S.Global.modules.MainWindow.MonicaTranslateView.TranslateToolkit}onViewCreate(){}onViewDestroy(){}traceClick(e){eL.M.createUserBehaviorEvent({eventName:"translate_view_click",source:e})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"ctx",(0,S.qp)(u1)),(0,T._)(this,"parallelTranslatePopoverOpened",!1)}}(0,I.gn)([S.Do],vE.prototype,"ctx",void 0),(0,I.gn)([S.SB],vE.prototype,"parallelTranslatePopoverOpened",void 0),(0,I.gn)([tB.Fl],vE.prototype,"S",null);let vD=S._Y.createComponent("TranslateToolkit",vE,e=>(0,y.jsxs)("div",{className:q()(vB.translateToolkit,{[vB.large]:e.ctx.isHorizontal}),children:[(0,y.jsx)("a",{href:"".concat(w.m.genFullUrl(eR.By.docChat),"?source=translate_upload_pdf&action=pdf_translation"),target:"_blank",rel:"noreferrer",children:(0,y.jsx)(eO.z,{type:"blackOutline",icon:(0,y.jsx)(vC.Y,{}),shape:"round",onClick:()=>{e.traceClick("upload_pdf")},children:e.S.pdfTranslation})}),f.o.isExtension&&"sidebar"===ex.L.mainWindowMode&&(0,y.jsxs)("div",{className:vB.buttonGroup,...ei.a.htmlLtrAttrs,children:[(0,y.jsx)(eO.z,{type:"blackOutline",className:vB.button,icon:(0,y.jsxs)("div",{className:vB.translateIconWrap,children:[(0,y.jsx)(vx.N,{}),"translated"===M.translateHelper.renderType&&(0,y.jsx)("div",{className:vB.translateCheckIcon,children:(0,y.jsx)(t_.J,{name:"monicaRoundChecked",className:vB.checkedIcon,size:4,color:"currentColor"})})]}),shape:"round",onClick:()=>{e.traceClick("parallel_translate"),M.translateHelper.translate({})},children:e.S.webTranslation}),(0,y.jsx)(tK.x,{placement:"bottom",open:e.parallelTranslatePopoverOpened,onOpenChange:t=>{e.parallelTranslatePopoverOpened=t,t&&e.traceClick("open_parallel_translate_setting")},trigger:["click"],content:(0,y.jsx)(vT,{onlyShowSettingPanel:!0,closePopover:()=>{e.parallelTranslatePopoverOpened=!1}}),triggerNode:(0,y.jsx)(tN.u,{title:e.S.webTranslationSettings,children:(0,y.jsx)("div",{className:q()(vB.buttonAction,{[vB.active]:e.parallelTranslatePopoverOpened}),children:(0,y.jsx)(vL.e,{size:16})})})})]})]})),vP=S._Y.createComponent("MonicaTranslateView",u1,e=>{let t=e.isHorizontal;return(0,y.jsx)("div",{className:uK.monicaTranslateView,children:(0,y.jsxs)("div",{className:q()(uK.viewInner,{[uK.sidebarView]:!t}),children:[(0,y.jsxs)("div",{className:q()(uK.header,uK.headerWithGlossary),children:[(0,y.jsx)(e7.Q,{tabKey:"translate",title:e.S.translate}),(0,y.jsx)(eO.z,{type:"text",className:uK.glossary,onClick:()=>{(0,uQ.Y)({insertTarget:"mainWindow"})},icon:(0,y.jsx)(uW,{size:16}),children:e.GlobalS.controllers.translationGlossaryController.glossary})]}),(0,y.jsx)(vD,{}),(0,y.jsxs)("div",{className:q()({[uK.largeContent]:t}),children:[(0,y.jsxs)("div",{className:q()({[uK.largeLeft]:t}),children:[(0,y.jsxs)("div",{className:uK.changeLanguage,children:[(0,y.jsx)("div",{className:uK.languageSelect,children:(0,y.jsx)(r2.S,{scene:"functional",value:e.sourceLang,onChange:t=>{e.onSourceLanguageChange(t)},placement:"bottomLeft",width:"100%",height:40,allowAutoDetect:!0,detectLabel:e.detectLanguage?r8.q.getLanguageDisplayNameByComposeLanguage(ei.a.locale,e.detectLanguage):void 0,allowAuto:!0,popoverFullWidth:!0,labelClassName:uK.languageSelectLabel})}),(0,y.jsx)(nj.h,{title:"",iconName:eh.UZ.lineOperationSort,color:"var(--theme-icon-secondary)",style:{transform:"rotate(90deg)"},disabled:"auto"===e.sourceLang&&!e.detectLanguage||e.sourceLang===e.toLang,onClick:()=>{e.switchLanguage()}}),(0,y.jsx)("div",{className:uK.languageSelect,children:(0,y.jsx)(r2.S,{scene:"functional",value:e.toLang,onChange:t=>{e.onToLanguageChange(t)},width:"100%",height:40,placement:"bottomLeft",allowAutoDetect:!0,allowAuto:!0,popoverFullWidth:!0,labelClassName:uK.languageSelectLabel})})]}),(0,y.jsxs)("div",{className:uK.translateGroup,children:[(0,y.jsx)(ow.W,{allowResize:!0,autoFocus:!0,toolbar:{leftContent:e.selectionText&&e.selectionText!==e.sourceText?(0,y.jsx)(eO.z,{icon:(0,y.jsx)(t_.J,{name:eh.UZ.lineOperationCopy}),size:"medium",onClick:()=>{e.onSourceTextChange(e.selectionText,"click")},className:uK.pasteSelectionButton,children:e.S.pasteSelection}):(0,y.jsx)(vh,{sourceContent:e.sourceText,scene:"sourceText",sourceLang:e.sourceLang,onClear:()=>{e.onSourceTextChange(""),e.selectionText&&uH.N.clearSelection()}}),rightContent:e.sourceText.length>e.maxLength?(0,y.jsx)("div",{className:uK.limitLengthTip,children:(0,ei.x)(e.S.limit,{length:e.maxLength})}):(0,y.jsx)("div",{className:uK.translateButtonArea,children:(0,y.jsxs)(eO.z,{size:"medium",type:"primary",disabled:!e.sourceText.trim(),loading:e.translates.some(e=>"translating"===e.status),style:{minWidth:76,borderRadius:8},onClick:()=>{e.translateBySelectedEngines()},children:[e.S.translate,(0,y.jsx)(t_.J,{name:"searchEnter",color:"currentColor",style:{marginLeft:4,opacity:.45}})]})})},getTextAreaRef:t=>{e.textareaRef=t},value:e.sourceText,rowsData:{min:5},placeholder:e.S.sourceTextPlaceholder,onChange:t=>{e.onSourceTextChange(t.target.value)},onKeyDown:t=>{e.sourceText.trim()&&iB.t.isHotkey(t,["Enter"])&&(t.preventDefault(),e.translateBySelectedEngines())}},eF.J.activeTabKey),(0,y.jsxs)("div",{className:uK.translateGlossarySwitchBox,children:[(0,y.jsx)(uJ.q,{iconSize:16,size:"mediumSmall",showLabel:!0,labelFontWeight:400}),(0,y.jsx)(uq.B,{})]}),(0,y.jsxs)("div",{className:uK.translationEngine,children:[(0,y.jsx)("div",{className:uK.addEngineBtnWrap,children:(0,y.jsx)(tK.x,{trigger:"click",placement:"bottomLeft",content:(0,y.jsx)(u6,{value:e.engineList,onChange:t=>{e.engineList=t}}),triggerNode:(0,y.jsx)(eO.z,{type:"primary",size:"small",shape:"round",icon:(0,y.jsx)(t_.J,{name:eh.UZ.lineOperationAdd,size:16,color:"currentColor"}),className:uK.addEngineBtn,children:(0,y.jsx)("div",{className:uK.addEngineBtnText,children:e.S.addEngine})}),onOpenChange:t=>{e.onTranslateEnginePopoverOpenChange(t)}})}),(0,y.jsx)("div",{className:uK.selectedEngineList,children:e.translates.map(t=>{let{engineId:i}=t,o=uG.f.translateEngineList.find(e=>e.id===i);return o?(0,y.jsx)(tN.u,{title:o.name,placement:"top",mouseLeaveDelay:0,children:(0,y.jsxs)("div",{className:q()(uK.engineItem,{[uK.active]:e.animationEngineId===i}),onClick:()=>{e.onEngineTabClick(i)},children:[e.translates.length>1&&(0,y.jsx)("div",{className:uK.removeEngineButton,onClick:()=>{e.engineList=e.engineList.filter(e=>e!==i),e.translates=e.translates.filter(e=>e.engineId!==i),e.updateDefaultEngines()},children:(0,y.jsx)(t_.J,{name:"monicaClose",size:10})}),(0,y.jsx)(eH.E,{src:o.icon,style:{width:16,height:16,borderRadius:"100%",overflow:"hidden"}})]})},i):null})})]})]})]}),(0,y.jsx)("div",{className:q()(t?uK.largeRight:uK.translateResultBox),children:(0,y.jsx)("div",{className:uK.translateResultList,onCopy:e=>{var t;let i=null===(t=window.getSelection())||void 0===t?void 0:t.toString();i&&e.clipboardData&&(e.preventDefault(),e.clipboardData.setData("text/plain",i))},children:e.translates.map((t,i)=>(0,y.jsx)(vv,{active:e.animationEngineId===t.engineId,translateData:t,getRef:t=>{e.translationEls[i]=t},onExpand:e=>{t.expanded=e},onRetry:()=>{e.onRetryTranslate(t)},onSceneChange:i=>{e.onTranslateSceneChange(t.engineId,i)}},t.engineId+i))})})]})]})})});var vF=i(44795);let vR={width:420,height:340},vV={width:420,height:216};class vU{get S(){return ei.S.Global.controllers.screenRecognitionController}get resultContent(){var e;return null!==(e=this.output.content)&&void 0!==e?e:this.output.error}get userInputContent(){return this.userInput}get language(){return P.A.finalQuickActionTranslateLanguage?P.A.finalQuickActionTranslateLanguage:"auto"===P.A.respondLanguage?r8.q.getComposeLanguageKeyByLocale(ei.a.locale):P.A.respondLanguage}async doRecognition(e){let{croppedImage:t,fullImage:i}=e;try{if(this.history.push(e),!i.startsWith("https:")){this.taskStatus="uploading";let t=await gH.Gi.quickUploadRemoteFileToS3({module:"screenshot_qa",link:e.fullImage});e.fullImage=t}t.startsWith("https:")||(this.taskStatus="waiting",gH.Gi.quickUploadRemoteFileToS3({module:"screenshot_qa",link:e.croppedImage}).then(t=>{e.croppedImage=t}));let o={language:P.A.finalChatRespondLanguage,data:{promptType:e.promptType,content:e.content,screenImgUrl:e.fullImage,selectionCoords:e.croppedCoordinates,aiRespLang:"translate"===e.promptType?vz.language:P.A.finalGlobalRespondLanguage}};if("generating"===this.taskStatus||"waiting"===this.taskStatus){let{taskId:e}=await az.Tn.triggerScreenRecognition(o,(e,t,i)=>{if((t||i)&&(this.taskStatus=i?"failed":"success",i)){this.output.error=i,this.taskStatus="failed";return}(null==e?void 0:e.text)&&(this.taskStatus="generating",this.output.content+=e.text,this.scrollTarget&&(this.scrollTarget.scrollTop=this.scrollTarget.scrollHeight))});this.taskId=e}}catch(e){this.output.error="recognition failed",this.taskStatus="failed",console.error(e)}}retryRecognition(){0!==this.history.length&&(this.resetTaskStates(),this.taskStatus="generating",this.doRecognition(this.history[this.history.length-1]))}stopRecognition(){this.taskId&&az.Tn.cancelTask(this.taskId,"screenRecognition"),this.resetTaskStates()}async continueInChat(e){let t=this.output.content,{croppedImage:i,content:o}=this.history[this.history.length-1];await E.w.show("chat"),this.close(),this.continueInChatHandler({firstQuestionAnswer:t,croppedImage:i,content:o,question:e})}close(){if(this.visible=!1,this.operationPanelVisible=!1,this.tmpDisabledEscTip=!1,"generating"===this.taskStatus||"waiting"===this.taskStatus||"uploading"===this.taskStatus){this.stopRecognition();return}this.resetTaskStates()}showOperationPanel(){this.operationPanelVisible=!0}hideOperationPanel(){this.operationPanelVisible=!1}setOperationPanelMode(e){this.pin&&e||(this.operationPanelIsMiniMode=e)}resetTaskStates(){this.taskId="",this.taskStatus=null,this.output={content:"",error:""},this.userInput="",this.pin=!1}disableEscTip(){this.tmpDisabledEscTip=!0}enableEscTip(){this.tmpDisabledEscTip=!1}handleOperationPanelClose(){vz.close()}handleOperationPanelStop(){if("generating"===vz.taskStatus){var e;null===(e=this.sampleScreenshot)||void 0===e||e.readonly(!1)}vz.stopRecognition()}handleOperationPanelRetry(){"generating"===vz.taskStatus&&this.stopRecognition(),vz.retryRecognition()}handleTogglePin(){this.pin=!this.pin,eL.M.createUserBehaviorEvent({eventName:"screen_recognition_pin_click"})}async handleOperationPanelEnter(e){var t,i;if("generating"===this.taskStatus&&this.stopRecognition(),eL.M.createUserBehaviorEvent({eventName:"screen_recognition_click",extData:{module:e.type}}),this.resultContent){vz.continueInChat(e.text);return}null===(t=this.sampleScreenshot)||void 0===t||t.readonly(!0),this.hideOperationPanel();let o=await (null===(i=this.sampleScreenshot)||void 0===i?void 0:i.capture());if(this.showOperationPanel(),o){if("saveMemo"===e.type){vz.close(),await E.w.show("memo"),E.w.screenshotToMemo({dataUrl:o.croppedImage});return}vz.doRecognition({...o,promptType:e.type,content:e.text}),this.userInput="",this.userInputText=e.text,this.userInputType=e.type}}disablePageScroll(){if(!this.pageState){let{overflow:e,overscrollBehavior:t}=document.body.style;this.pageState={overflow:e,behavior:t}}document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none"}restorePageScroll(){if(!this.pageState)return;let{overflow:e,behavior:t}=this.pageState;document.body.style.overflow=e,document.body.style.overscrollBehavior=t}constructor(){(0,T._)(this,"visible",!1),(0,T._)(this,"operationPanelVisible",!1),(0,T._)(this,"operationPanelIsMiniMode",!1),(0,T._)(this,"tmpDisabledEscTip",!1),(0,T._)(this,"taskStatus",null),(0,T._)(this,"output",{content:"",error:""}),(0,T._)(this,"userInput",""),(0,T._)(this,"userInputText",""),(0,T._)(this,"userInputType",null),(0,T._)(this,"pin",!1),(0,T._)(this,"suggestions",[{name:"saveMemo",icon:"ssMemo",desc:()=>this.S.memoDesc},{name:"solve",icon:"ssMath",desc:()=>this.S.solveDesc},{name:"translate",icon:"monicaParallelTranslate",desc:()=>this.S.translateDesc},{name:"explain",icon:"ssExplain",desc:()=>this.S.explainDesc}]),(0,T._)(this,"offset",{left:0,bottom:0}),(0,T._)(this,"innerSize",null),(0,T._)(this,"panelData",vR),(0,T._)(this,"isResized",!1),(0,T._)(this,"taskId",""),(0,T._)(this,"sampleScreenshot",void 0),(0,T._)(this,"pageState",null),(0,T._)(this,"scrollTarget",null),(0,T._)(this,"DEFAULT_PANEL_BOTTOM",24),(0,T._)(this,"MIN_PANEL_DATA",vV),(0,T._)(this,"DEFAULT_PANEL_DATA",vR),(0,T._)(this,"history",[]),(0,T._)(this,"continueInChatHandler",(0,vF.c)({name:"screen.continueInChat",channels:["extensionSidePanel","extensionContent"],handler:async e=>{let{question:t,content:i,croppedImage:o,firstQuestionAnswer:a}=e;D.Mp.openBot(tX.Z9.monica);let n=await D.Mp.beforeContinueInChat(),r=await az.Tn.continueScreenRecognitionInChat({conversationInfo:n.conversationInfo,firstQuestion:null!=i?i:"",firstQuestionAnswer:a,imgUrl:o});await n.addChatItems(r),eD.userController.isVipUser&&tP.K.getUsageInfo("genius_bot").displayFinallyCanUsed>0&&(P.A.gpt4Enabled=!0),n.sendQuestionOrAction({actionOrQuestion:t})}})),(0,T._)(this,"open",(0,vF.c)({name:"showScreenRecognition",channels:["extensionContent"],handler:async e=>{let{isEnough:t,handleCreditsNotEnough:i}=tP.K.checkCredits({module:"screenshot_qa",source:e});if(!t){i();return}P.A.chromeSidePanelEnabled||E.w.hide(),this.visible=!0,P.A.screenRecognitionFirstUsedAt||tV.ll.setUiFlag("screenRecognitionFirstUsedAt",Date.now())}})),(0,tB.rC)(this)}}(0,I.gn)([S.SB],vU.prototype,"visible",void 0),(0,I.gn)([S.SB],vU.prototype,"operationPanelVisible",void 0),(0,I.gn)([S.SB],vU.prototype,"operationPanelIsMiniMode",void 0),(0,I.gn)([S.SB],vU.prototype,"tmpDisabledEscTip",void 0),(0,I.gn)([S.SB],vU.prototype,"taskStatus",void 0),(0,I.gn)([S.SB],vU.prototype,"output",void 0),(0,I.gn)([S.SB],vU.prototype,"userInput",void 0),(0,I.gn)([S.SB],vU.prototype,"userInputText",void 0),(0,I.gn)([S.SB],vU.prototype,"userInputType",void 0),(0,I.gn)([S.SB],vU.prototype,"pin",void 0),(0,I.gn)([S.SB],vU.prototype,"suggestions",void 0),(0,I.gn)([S.SB],vU.prototype,"offset",void 0),(0,I.gn)([S.SB],vU.prototype,"innerSize",void 0),(0,I.gn)([S.SB],vU.prototype,"panelData",void 0),(0,I.gn)([S.SB],vU.prototype,"isResized",void 0),(0,I.gn)([tB.Fl],vU.prototype,"S",null),(0,I.gn)([tB.Fl],vU.prototype,"resultContent",null),(0,I.gn)([tB.Fl],vU.prototype,"userInputContent",null),(0,I.gn)([tB.Fl],vU.prototype,"language",null);let vz=new vU;var vO={src:"https://assets.monica.im/home-web/_next/static/media/defaultFavicon.a81cbab2.png",height:212,width:212,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAJFBMVEUUFCsVFSoTEyoTEysTEyoTEyoSEipMaXEUFCoUFCoUFCoTEypxJLt7AAAADHRSTlPmL6VozMJRAK3XiYP9+TPrAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMklEQVR4nEXKuREAIAzEQJ0fbEP//ZJBppkVpYZWIXAHYSvNchnjcXZ4/Hj05lLPtOoCIe0A/6GWngYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},vW=i(41855),vH={reading:"reading--qUlRF",readingInner:"reading-inner--ulsfb",readingHeader:"reading-header--kiIDU",readingContainer:"reading-container--Ghl97",readingItem:"reading-item--s3fbU",readingItemTitle:"reading-item-title--enyyy",readingPage:"reading-page--HCMBO",readingOrigin:"reading-origin--iDCnK",readingOriginLeft:"reading-origin-left--jEc1N",readingOriginInfo:"reading-origin-info--osBD8",readingOriginUrl:"reading-origin-url--PgJS6",readingOriginTitle:"reading-origin-title--BHQY9",favicon:"favicon--CrTqW",chatWithLink:"chat-with-link--yTrsM",chatWithLinkContainer:"chat-with-link-container--BAPuI",chatWithLinkInput:"chat-with-link-input--tFQwM",readingTool:"reading-tool--wRWns",readingToolItem:"reading-tool-item--iLUHH",screenshotCard:"screenshot-card--Es8a5",screenshotIcon:"screenshot-Icon--nbyWS",screenshotText:"screenshot-text--5QonH",readingMemoContainer:"reading-memo-container--hIBkT",readingMemoTitle:"reading-memo-title--DbeDZ",readingMemo:"reading-memo--vJUrS",memoItem:"memo-item--SZnXG",viewAllBtn:"view-all-btn--LzNOR",readingFooter:"reading-footer--gmJ94",dragLayer:"drag-layer--dwp_v"};class vG extends S.PN{get S(){return ei.S.Global.modules.MainWindow.Reading}handleReadLink(){let e=this.searchValue;if(!/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/.test(e)){ef.M.error(this.S.pleaseCorrectUrl);return}let t=this.getYoutubeVideoId(e);if(t){let{isEnough:e,handleCreditsNotEnough:i}=tP.K.checkCredits({source:"reading_read_link",module:"youtube_summarize"});e?window.open(w.m.getYoutubeSummarizedPageUrl({id:t,source:"extension_reading"})):i();return}E.w.eventEmitter.emit("chat",{content:this.searchValue,useWebAccess:!0})}onViewCreate(){iH.a.fetchMemoList("refresh"),eF.J.eventEmitter.listenBy(this,"tabChange",()=>{setTimeout(()=>{var e;null===(e=this.inputEl)||void 0===e||e.focus()})})}onViewDestroy(){eF.J.eventEmitter.stopListenBy(this)}handleDropFile(e){this.traceReadingPanelEvent("drop_file"),eF.J.onTabChange("chat"),D.Mp.openBot(tX.Z9.monica),D.Mp.getMonicaChatController().chatBotAttachment.handleFiles(e)}handleSelectFile(){this.traceReadingPanelEvent("upload"),D.Mp.getMonicaChatController().chatBotAttachment.handleSelectFile(()=>{eF.J.onTabChange("chat"),D.Mp.openBot(tX.Z9.monica)})}traceReadingPanelEvent(e){eL.M.createUserBehaviorEvent({eventName:"reading_view_click",source:e})}getYoutubeVideoId(e){let t;let i=/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]+)/g;for(;t=i.exec(e);)if(t)return t[1];return null}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"searchValue",""),(0,T._)(this,"loading",!1),(0,T._)(this,"inputEl",null)}}(0,I.gn)([S.SB],vG.prototype,"searchValue",void 0),(0,I.gn)([S.SB],vG.prototype,"loading",void 0),(0,I.gn)([S.SB],vG.prototype,"inputEl",void 0),(0,I.gn)([tB.Fl],vG.prototype,"S",null);let vQ=S._Y.createComponent("Reading",vG,e=>{let t=iH.a.memoDataSources.find(e=>!e.status||"complete"===e.status),i=window.location.href;return(0,y.jsx)(lb.b,{onDrop:t=>{e.handleDropFile(t)},className:vH.reading,dragLayer:(0,y.jsx)("div",{className:vH.dragLayer,children:(0,y.jsx)(gL.p,{text:e.S.drop})}),draggable:!0,children:(0,y.jsxs)("div",{className:vH.readingInner,children:[(0,y.jsx)("header",{className:vH.readingHeader,children:(0,y.jsx)(e7.Q,{tabKey:"reading",title:e.S.read})}),(0,y.jsxs)("main",{className:vH.readingContainer,children:[ex.L.allowGetCurrentPageData&&(0,y.jsx)(vJ,{vm:e,url:i}),(0,y.jsxs)("div",{className:q()(vH.chatWithLink,vH.readingItem),children:[(0,y.jsx)("p",{className:vH.readingItemTitle,children:e.S.chatWithLink}),(0,y.jsxs)("div",{className:vH.chatWithLinkContainer,children:[(0,y.jsx)(O.I,{autofocus:!0,className:vH.chatWithLinkInput,size:"large",placeholder:e.S.inputPlaceholder,value:e.searchValue,getInputRef:t=>{e.inputEl=t},onChange:t=>{e.searchValue=t},onEnterWithoutCtrl:()=>{e.handleReadLink()}}),(0,y.jsx)(eO.z,{disabled:!e.searchValue,size:"large",type:e.searchValue?"primary":"gray",onClick:()=>{e.handleReadLink(),e.traceReadingPanelEvent("read_link")},children:e.S.read})]})]}),(0,y.jsxs)("div",{className:vH.readingTool,children:[(0,y.jsxs)("div",{className:vH.readingItem,children:[(0,y.jsx)("p",{className:vH.readingItemTitle,children:e.S.reedPdf}),(0,y.jsx)(gL.p,{className:vH.readingToolItem,onClick:()=>{e.handleSelectFile()}})]}),ex.L.allowGetCurrentPageData&&(0,y.jsxs)("div",{className:vH.readingItem,children:[(0,y.jsx)("p",{className:vH.readingItemTitle,children:e.S.handyTool}),(0,y.jsxs)("div",{className:q()(vH.readingToolItem,vH.screenshotCard),children:[(0,y.jsx)(eO.z,{type:"primary",className:vH.screenshotIcon,onClick:async()=>{vz.open("ReadingScreenshot"),e.traceReadingPanelEvent("screen_shot")},children:(0,y.jsx)(t_.J,{name:"sRecognition",size:24,color:"currentColor"})}),(0,y.jsx)("p",{className:vH.screenshotText,children:e.S.screenshotAskAI})]})]})]}),t&&(0,y.jsxs)("div",{className:vH.readingMemoContainer,children:[(0,y.jsx)("div",{className:vH.readingMemoTitle,children:e.S.recentMemos}),(0,y.jsxs)("div",{className:vH.readingMemo,children:[(0,y.jsx)(uo.N,{highlightTitleWhenHover:!0,disableOperation:!0,item:t,className:vH.memoItem,afterClick:()=>{e.traceReadingPanelEvent("memo_item")}}),(0,y.jsx)("div",{className:vH.viewAllBtn,onClick:()=>{eF.J.onTabChange("memo"),e.traceReadingPanelEvent("memo_view_all")},children:e.S.viewAll})]})]})]}),(0,y.jsx)("footer",{className:vH.readingFooter,children:(0,y.jsx)(vt,{source:"reading_view",showGpt4:!0,gpt4Checked:P.A.gpt4Enabled,onGpt4Change:e=>{P.A.setGpt4Enabled(e)},usageInfoProps:P.A.gpt4Enabled?{usageModule:"genius_bot",simpleStyle:!0}:void 0})})]})})}),vJ=(0,F.Pi)(e=>{let{url:t,vm:i}=e;return vW.c.currentPage?(0,y.jsxs)("div",{className:q()(vH.readingPage,vH.readingItem),children:[(0,y.jsxs)("p",{className:vH.readingItemTitle,children:[" ",i.S.summaryChatPage]}),(0,y.jsxs)("div",{className:vH.readingOrigin,children:[(0,y.jsx)(vq,{url:t}),(0,y.jsx)(eO.z,{size:"medium",type:"primary",onClick:()=>{i.traceReadingPanelEvent("read_this_page"),E.w.eventEmitter.emit("quickAction",{type:"reading"})},children:i.S.readThisPage})]})]}):null}),vq=(0,F.Pi)(e=>{let{url:t}=e,i=w.m.getCurrentSiteFavicon(),[o]=(0,Q.useState)(window.document.title);if("ext-side-panel"===f.o.entryType){let e=vW.c.currentPage;if(!e)return null;i=e.favIconUrl||"",o=e.title||""}return(0,y.jsxs)("div",{className:vH.readingOriginLeft,children:[(0,y.jsx)("div",{className:vH.favicon,children:(0,y.jsx)(eH.E,{src:i,defaultSrc:(0,te.Q)(vO)})}),(0,y.jsxs)("div",{className:vH.readingOriginInfo,children:[(0,y.jsx)("p",{className:vH.readingOriginTitle,children:o}),(0,y.jsx)("span",{className:vH.readingOriginUrl,children:t})]})]})});var vK=i(14537),vY=i(25813);class vZ extends S.PN{get S(){return ei.S.Global.modules.MainWindow.Toolkit}onViewCreate(){tc.serverConfigController.loadStaticConfig(gx.BO.Toolkit).then(()=>{vY.m.refreshToolkitList()})}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],vZ.prototype,"S",null);let vX=S._Y.createComponent("Toolkit",vZ,e=>(0,y.jsx)("div",{className:"toolkit--I7HMD",children:(0,y.jsxs)("div",{className:"scroll-view--fHKTC",children:[(0,y.jsx)(e7.Q,{tabKey:"toolkit",title:e.S.toolkit}),(0,y.jsx)("p",{className:"intro--OEzv6",children:e.S.intro}),(0,y.jsx)("div",{className:"tabs--_VvMo",children:(0,y.jsx)(vK.m,{tabsManager:vY.m.tabManager,onChange:e=>{eL.M.createUserBehaviorEvent({eventName:"toolkit_tab_click",extData:{tab:e}})}})}),(0,y.jsx)(v$,{vm:e}),(0,y.jsx)("p",{className:"more--xiQXS",children:(0,y.jsx)(aN.Z,{S:e.S.moreTools,components:{a:e=>(0,y.jsx)("a",{href:w.m.getFeedbackPageUrl({issueType:"tool_request"}),target:"_blank",rel:"noreferrer",children:e})}})})]})})),v$=(0,F.Pi)(e=>{var t;let{vm:i}=e,o=vY.m.tabManager,a=(null===(t=o.tabItems.find(e=>e.key===o.activeTabKey))||void 0===t?void 0:t.toolTypeList)||[];return(0,y.jsx)("div",{className:q()("tool-list--KrUOl",{"cell--wbGbo":E.w.sidebarWidth>=660}),children:(0,y.jsx)("div",{className:"list-inner--a0oT_",children:vY.m.tools.map(e=>a.includes(e.toolType)?(0,y.jsx)(v0,{vm:i,data:e},e.name):null)})})}),v0=(0,F.Pi)(e=>{let{data:t}=e,{description:i,icon:o,name:a,key:n}=t,r=new URL(t.url);return"pdf_ai_chat_with_pdf"===n&&r.searchParams.append("source","tools"),(0,y.jsxs)("a",{className:"tool--ADDBq",href:r.toString(),target:"_blank",rel:"noreferrer",onClick:()=>{eL.M.createUserBehaviorEvent({eventName:"toolkit_click",source:"extension_toolkit_tab",extData:{toolName:n}})},children:[(0,y.jsx)("div",{className:q()("icon--nKLWQ",{"dark--EtkOG":N.C.isDark}),children:(0,y.jsx)(te.E,{src:o,alt:"",width:24,height:24})}),(0,y.jsxs)("div",{className:"center--sVVtA",children:[(0,y.jsx)("div",{className:"name--KjadS",children:a}),(0,y.jsx)("div",{className:"desc--imSIR",children:i})]}),(0,y.jsx)(t_.J,{name:"arrow-y",color:"var(--theme-icon-tertiary)"})]})});var v1=i(18918),v2=i(84533),v3=i(44015),v6=i(36976),v5=i(58351),v4=i(919),v9=i(20549),v7=i(37819);let v8=0,Ce=0;class Ct extends S.PN{onViewCreate(){0===v8&&(v8++,"options"!==this.props.source&&D.Mp.getMonicaChatController().clientConfig.init(),this.initPageParams(),v6.H.initServiceListener(),tV.ll.syncConfigFromServer(),e9.W.on("userLogout",()=>{v8=0}),window.addEventListener("focus",()=>{let e=Date.now();!(e-Ce<eh.EB)&&(Ce=e,f.o.isWeb&&er.y.refreshConversationList())}),e9.W.getLocale().then(e=>{e!==ei.a.locale&&e&&tV.ll.set("locale",e)}),v1.teamController.updateWorkspaceList(!1),f.o.isWeb&&v2.monicaAppVersionController.loadVersionInfo(),eF.J.updateViewTypeByPageWidth(),this.checkStorageData()),E.w.eventEmitter.listenBy(this,"resize",()=>{eF.J.updateViewTypeByPageWidth(),eF.J.updateHomeSidebarCollapsed()}),eF.J.eventEmitter.listenBy(this,"saveChatPageParams",()=>{E.w.saveChatPageParams()}),window.addEventListener("focus",this.handleWindowFocus)}onViewDestroy(){E.w.eventEmitter.stopListenBy(this),eF.J.eventEmitter.stopListenBy(this),window.removeEventListener("focus",this.handleWindowFocus)}checkStorageData(){v3.$.checkFavoriteListExpired()}async initPageParams(){let e=aO.l.getPageParams();if(e&&eF.J.tabs.find(t=>t.key===e.tab)){if(eF.J.onTabChange(e.tab,{saveToUrl:!1,saveFrom:!1,keepBeforeForm:!1}),"artist"===e.tab)e.botUid?(await D.Mp.artistBotItemsReadySource.waitReady(),D.Mp.openBot(e.botUid)):D.Mp.openBot(tX.Z9.artist);else if("chat"===e.tab){if(e.botUid)try{await D.Mp.openRemoteBot(e.botUid)}catch(e){ef.M.error(ei.S.Global.modules.ChatBox.noAccess)}let i=D.Mp.getActiveChatBotController();if(e.convId&&await (null==i?void 0:i.loadConversation(e.convId,"cacheWithUpdate")),e.q&&(null==i||i.setContent(e.q),e.autoSend&&(null==i||i.sendQuestionOrAction({actionOrQuestion:e.q}))),"artifactContinueChat"===e.action&&e.id){let t=await v9.D.getArtifactContinueInChat(e.id);t&&(null==i||i.remixArtifact(v5.y.serverArtifactData2ChatArtifactData(t)))}if("openMindMap"===e.action&&e.itemId)try{var t;let o=null==i?void 0:null===(t=i.chatTree.findNodeById(e.itemId))||void 0===t?void 0:t.data,a=v4.Qp.getMidMapDataFromReply(o.data);a&&(0,v7.J)({insertTarget:"dialogRoot",data:a})}catch(e){console.error(e)}if(e.artifactId){let t=await v9.D.getOpenArtifactData({artifactId:e.artifactId,itemId:e.itemId||"",conversationId:e.convId||""});t&&(null==i||i.openArtifact(t))}e.continueInChatId&&f.o.isWeb&&tl.Y.continueInChatFromId(e.continueInChatId),e.realtime&&f.o.isWeb&&(D.Mp.getActiveChatBotController().openRealtime(),history.replaceState({},"",window.location.pathname)),e.starBotId&&f.o.isWeb&&(D.Mp.toggleFavorite(e.starBotId,!0),history.replaceState({},"",window.location.pathname))}await E.w.saveChatPageParams(!0)}}handleWindowFocus(){f.o.isWeb&&eF.J.webSettingClicked&&tV.ll.syncConfigFromServer()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],Ct.prototype,"someState",void 0);let Ci=S._Y.createComponent("WindowCreateLayout",Ct,e=>null);var Co=i(94313),Ca=i(48996),Cn=i(64752),Cr=i(85438),Cs=i(16162),Cl=i(97953);class Cc extends S.PN{onViewCreate(){}onViewDestroy(){}speak(){let{content:e,msgId:t}=this.props;tI._.speakingMsgId===this.props.msgId?tI._.cancelSpeak():tI._.speakMessage({id:t,text:e})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],Cc.prototype,"someState",void 0);let Cd=S._Y.createComponent("SpeakIconButton",Cc,e=>{let{msgId:t,size:i,className:o,toolTipPlacement:a="bottom"}=e.props,n=tI._.speakingMsgId===t;return(0,y.jsx)(tN.u,{title:n?ei.S.Global.components.SpeakIconButton.stop:ei.S.Global.components.SpeakIconButton.speak,placement:a,children:(0,y.jsx)("span",{className:q()("speak-icon-button--QB2fI",o,{"active--OwuAe":n}),onClick:e.speak.bind(e),children:n?(0,y.jsx)(t_.J,{name:"soundFilled",size:i,color:"currentColor"}):(0,y.jsx)(t_.J,{name:"sound",size:i,color:"currentColor"})})})});var Cp={composeOutput:"compose-output--_2Dvi",title:"title--Vig52",pagination:"pagination--Syihh",paginationContent:"pagination-content--CvXqa",paginationContentCurrent:"pagination-content-current--N5rns",paginationContentTotal:"pagination-content-total--Awpj4",paginationBtn:"pagination-btn--zOSxe",paginationBtnDisabled:"pagination-btn-disabled--NX9pS",titleLeft:"title-left--_jBCM",errorText:"error-text--PZ1Nd",composeOutputLiteWindow:"compose-output-lite-window--H9tcH",textarea:"textarea--OKXLh",operationGroup:"operation-group--WfvgR",operationItem:"operation-item--img_z"};class Cm extends S.PN{async handleSaveToMemo(){var e;let t=ei.S.Global.modules.MainWindow.WriteView,i=ei.S.Global.services.monicaService,o=ei.S.Global.modules.MainWindow.WriteView,a=null===(e=this.props.manager.activeOutput)||void 0===e?void 0:e.content,n=Co.S.compose;if(!a)return;let r=[],s=[],l=[];"compose"===Co.S.tabsManager.activeTabKey?(l.push("### ".concat(o.compose,": ")),l.push(w.m.trimNewLine(n.writePrompt," "))):"reply"===Co.S.tabsManager.activeTabKey&&(l.push("### ".concat(o.replyTo,": ")),l.push(w.m.trimNewLine(n.originalText," ")),s.push("**".concat(o.whatToReply,"**: ").concat(w.m.trimNewLine(n.replyPrompt," ")))),l[1].length>60&&("compose"===Co.S.tabsManager.activeTabKey?s.push("**".concat(o.Compose.promptLabel,"**: ").concat(l[1])):s.unshift("**".concat(o.Compose.originalText,"**: ").concat(l[1])),l[1]="".concat(l[1].slice(0,60),"...")),r.push(l.join("")),s.push(...[{name:t.Compose.length,value:"auto"!==n.activeLength?i.length[n.activeLength]:""},{name:t.Compose.format,value:"text"!==n.activeFormat?i.format[n.activeFormat]:""},{name:t.Compose.tone,value:"auto"!==n.activeTone?i.tone[n.activeTone]:""}].filter(e=>!!e.value).map(e=>"**".concat(e.name,"**: ").concat(e.value))),s.length&&r.push("> ".concat(s.join("\n"))),r.push(a);let c=await iH.a.createTextMemo({content:r.join("\n\n"),isMarkdown:!0});iH.a.saveToMemoSuccess(c.item.uid)}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"sessionId",w.m.genId(!0))}}(0,I.gn)([S.SB],Cm.prototype,"sessionId",void 0);let Ch=S._Y.createComponent("ComposeOutput",Cm,e=>{let{title:t,loadingVisible:i,copyVisible:o,previewBoxMinRow:a,previewBoxMaxRow:n,manager:r,onRetry:s,onGenAgain:l,NextStep:c,BeforeNextStep:d,renderLangSelect:p,className:m,scene:h="compose",useOldTheme:g=!1,showImproveWithAi:u=!1,textareaClassName:v}=e.props,C=r.activeOutput;if(!C)return null;let x=C.content&&C.content.trim().length>0,b="compose"===h?14:16;return(0,y.jsxs)("div",{className:q()(Cp.composeOutput,{[Cp.composeOutputLiteWindow]:"liteWindow"===h},m),children:[(0,y.jsxs)("div",{className:q()(Cp.title,e.props.titleClassName),children:[(0,y.jsxs)("span",{className:Cp.titleLeft,children:[t,null==p?void 0:p(),r.outputList.length<2?null:(0,y.jsxs)("div",{className:Cp.pagination,children:[(0,y.jsx)("span",{className:q()(Cp.paginationBtn,{[Cp.paginationBtnDisabled]:r.prevBtnDisabled}),onClick:()=>{r.handlePrevClick()},children:(0,y.jsx)(t_.J,{name:"arrowDown",color:"currentColor",style:{rotate:"90deg"},size:14})}),(0,y.jsxs)("span",{className:Cp.paginationContent,children:[(0,y.jsx)("span",{className:Cp.paginationContentCurrent,children:r.activeOutputIndex+1}),(0,y.jsxs)("span",{className:Cp.paginationContentTotal,children:["/",r.outputList.length]})]}),(0,y.jsx)("span",{className:q()(Cp.paginationBtn,{[Cp.paginationBtnDisabled]:r.nextBtnDisabled}),onClick:()=>{r.handleNextClick()},children:(0,y.jsx)(t_.J,{name:"arrowDown",style:{rotate:"-90deg"},color:"currentColor",size:14})})]}),i&&C.loading&&(0,y.jsx)(eC.g,{size:16})]}),(0,y.jsx)("div",{className:Cp.operationGroup,children:C.loading?(0,y.jsx)(eO.z,{type:"text-gray",size:"small",className:Cp.operationItem,icon:(0,y.jsx)(Cs.ARz,{size:12}),onClick:()=>{r.stop(C.id)},children:ei.S.Global.components.ComposeOutput.stop}):x?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(iz.f,{tooltipParams:{placement:"top"},className:Cp.operationItem,onClick:async()=>{await e.handleSaveToMemo()}}),(0,y.jsx)(Cd,{size:b+2,msgId:"compose-".concat(e.sessionId,"-").concat(r.activeOutputIndex),content:C.content,toolTipPlacement:"top",className:Cp.operationItem}),o&&(0,y.jsx)(tZ.X,{className:Cp.operationItem,text:C.content,render:(e,t)=>(0,y.jsx)(t_.J,{onClick:t,name:e?"check":"copy-line",color:"currentColor",size:b})}),(0,y.jsx)(tN.u,{title:ei.S.Global.components.ComposeOutput.generateAgain,children:(0,y.jsx)("span",{className:Cp.operationItem,onClick:()=>{l()},children:(0,y.jsx)(Cs.bnu,{size:b-2})})})]}):(0,y.jsx)(eO.z,{type:"text-gray",size:"small",className:Cp.operationItem,icon:(0,y.jsx)(Cs.bnu,{size:b-2}),onClick:()=>{s(C)},children:ei.S.Global.components.ComposeOutput.retry})})]}),u?(0,y.jsx)(ow.W,{className:q()(Cp.textarea,v),value:C.content,placeholder:C.loading?"".concat(ei.S.Global.components.ComposeOutput.waitingForResponse):"",onChange:e=>{C.content=e.target.value},getTextAreaRef:e=>{C.textareaRef=e||void 0},rowsData:{min:a,max:n},enableImproveWithAiButton:!C.loading,onImproveWithAiButtonClick:()=>{var e;eL.M.createUserBehaviorEvent({eventName:"click_improve_with_ai",extData:{tab:"compose"===Co.S.tabsManager.activeTabKey?"write:compose":"write:reply"}}),vp({insertTarget:"mainWindow",content:(null===(e=r.activeOutput)||void 0===e?void 0:e.content)||""})}}):(0,y.jsx)(tj.g,{className:q()(Cp.textarea,v),type:g?"blue":"primary",value:C.content,placeholder:C.loading?"".concat(ei.S.Global.components.ComposeOutput.waitingForResponse):"",onChange:e=>{C.content=e.target.value},getTextAreaRef:e=>{C.textareaRef=e||void 0},autoSize:{minRows:a,maxRows:n}}),C.error&&(0,y.jsx)("span",{className:Cp.errorText,children:(0,y.jsx)(Cl.y,{error:C.error,source:h})}),d&&(0,y.jsx)(d,{}),!C.loading&&x&&c&&(0,y.jsx)(c,{output:C})]})});var Cg=i(49515),Cu=i(30115),Cv={compose:"compose--BJdZH",inputBox:"input-box--UOwm8",section:"section--pKKaq",writeAboutInputWrapper:"write-about-input-wrapper--x4Nat",writeAboutHeader:"write-about-header--uxIZD",copyBtn:"copy-btn--STL9V",originalTextWrapper:"original-text-wrapper--pje2T",writeOptionGroup:"write-option-group--RkVJR",writeOptionList:"write-option-list--NhAgt",writeOptionListHeader:"write-option-list-header--qaZ4o",writeOptionListContent:"write-option-list-content--cWboQ",toolbar:"toolbar--PkS0N",outputBox:"output-box--MLztL",previewWrapper:"preview-wrapper--DEBNJ",previewOperations:"preview-operations--N94vd",previewOperation:"preview-operation--e3GBl",composeToolbar:"compose-toolbar--BM5Pv",vipToolbar:"vip-toolbar--gR0sp",horizontal:"horizontal--QJsfC",divider:"divider--A2Dmy",preview:"preview--DjqXd",content:"content--irqxp",previewTextarea:"preview-textarea--LYxa3"},CC=i(99778),Cx=i(77233);let Cy=Co.S.compose;class Cb extends S.PN{get S(){return ei.S.Global.modules.MainWindow.WriteView.Compose}get controller(){return Co.S.compose}get isHorizontal(){return E.w.isHorizontal}get generateDisabled(){return 0===Cy.prompt.length}get previewValue(){var e;return(null===(e=Cy.outputManger.activeOutput)||void 0===e?void 0:e.content)||""}get params(){return"reply"===Co.S.tabsManager.activeTabKey?{...CC.Q.allWriteCompose,format:CC.Q.allWriteCompose.format.flatMap(e=>!e.isSystem||this.replyFormat.find(t=>t===e.key)?e:[])}:CC.Q.allWriteCompose}get activeOutput(){return this.controller.outputManger.activeOutput}onViewCreate(){var e,t;this.keydownHelper.init({handleKeydown:e=>{("compose"===Co.S.tabsManager.activeTabKey||"reply"===Co.S.tabsManager.activeTabKey)&&this.handleInputKeydown(e)},keydownContainer:[(null===(t=this.textareaRef)||void 0===t?void 0:null===(e=t.resizableTextArea)||void 0===e?void 0:e.textArea)||null]}),eF.J.eventEmitter.listenBy(this,"tabChange",()=>{setTimeout(()=>{var e;null===(e=this.textareaRef)||void 0===e||e.focus({cursor:"end"})})}),(()=>{this.previewBoxMaxRow=Math.max(Co.S.containerEl?Co.S.containerEl.clientHeight/40:5)})()}onViewDestroy(){tU.f.getProxy(this).disposeAll(),eF.J.eventEmitter.stopListenBy(this),this.keydownHelper.destroy()}handleClickGenerate(e){eL.M.createUserBehaviorEvent({eventName:"write_generate_click",extData:{key:Co.S.tabsManager.activeTabKey}});let t="reply"===Co.S.tabsManager.activeTabKey,{activeFormat:i,activeLength:o,activeTone:a,prompt:n,originalText:r}=Cy;Cy.outputManger.generateOutput({command:n,format:this.params.format.find(e=>e.uid===i),length:this.params.length.find(e=>e.key===o),tone:this.params.tone.find(e=>e.uid===a),language:{key:P.A.finalComposeRespondLanguage,name:P.A.finalComposeRespondLanguage},context:r},"compose_generate",e?{outputId:e}:void 0,t)}handleInputKeydown(e){(0,en.P6)("mod+enter",e)&&!this.generateDisabled&&(e.stopPropagation(),e.preventDefault(),this.handleClickGenerate())}async handleDeleteTone(e){try{await vo.v.deleteTone({uid:e})}catch(e){ef.M.error(w.m.formatErrorMsg(e))}}async handleDeleteFormat(e){try{await P.A.deleteCustomFormat(e)}catch(e){ef.M.error(w.m.formatErrorMsg(e))}}handleCopy(){this.copied||(this.copied=!0,setTimeout(()=>{this.copied=!1},2e3),w.m.copyToClipboard(this.previewValue))}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"keydownHelper",new Cx.T),(0,T._)(this,"textareaRef",null),(0,T._)(this,"replyFormat",["text","comment","email","message","twitter"]),(0,T._)(this,"previewBoxMaxRow",5),(0,T._)(this,"previewBoxMinRow",5),(0,T._)(this,"copied",!1)}}(0,I.gn)([S.SB],Cb.prototype,"replyFormat",void 0),(0,I.gn)([S.SB],Cb.prototype,"previewBoxMaxRow",void 0),(0,I.gn)([S.SB],Cb.prototype,"previewBoxMinRow",void 0),(0,I.gn)([S.SB],Cb.prototype,"copied",void 0),(0,I.gn)([tB.Fl],Cb.prototype,"S",null),(0,I.gn)([tB.Fl],Cb.prototype,"controller",null),(0,I.gn)([tB.Fl],Cb.prototype,"isHorizontal",null),(0,I.gn)([tB.Fl],Cb.prototype,"generateDisabled",null),(0,I.gn)([tB.Fl],Cb.prototype,"previewValue",null),(0,I.gn)([tB.Fl],Cb.prototype,"params",null),(0,I.gn)([tB.Fl],Cb.prototype,"activeOutput",null);let Cf=Co.S.compose,Cw=S._Y.createComponent("Compose",Cb,e=>(0,y.jsxs)("div",{className:q()(Cv.compose,{[Cv.horizontal]:e.isHorizontal}),children:[(0,y.jsxs)("div",{className:Cv.inputBox,children:[(0,y.jsxs)("div",{className:Cv.section,children:["reply"===Co.S.tabsManager.activeTabKey&&(0,y.jsxs)("div",{className:Cv.writeAboutInputWrapper,children:[(0,y.jsxs)("div",{className:Cv.writeAboutHeader,children:[e.S.originalText,Cf.copyButtonVisible&&(0,y.jsxs)("span",{className:Cv.copyBtn,onClick:Cf.handlePaste.bind(Cf),children:[(0,y.jsx)(t_.J,{name:"paste"}),e.S.pasteSelection]})]}),(0,y.jsx)("div",{className:Cv.originalTextWrapper,children:(0,y.jsx)(tj.g,{resize:!0,value:Cf.originalText,placeholder:e.S.originalTextPlaceholder,style:{minHeight:129},onChange:e=>{Cf.setOriginalText(e.target.value),Cf.toggleCopyButtonVisible(!1)}})})]}),(0,y.jsxs)("div",{className:Cv.writeAboutInputWrapper,children:[(0,y.jsx)("div",{className:Cv.writeAboutHeader,children:"reply"===Co.S.tabsManager.activeTabKey?e.S.replyContent:e.S.promptLabel}),(0,y.jsx)(tj.g,{autoFocus:!0,resize:!0,getTextAreaRef:t=>{e.textareaRef=t},className:Cv.textarea,value:Cf.prompt,style:{minHeight:"horizontal"===ex.L.mainWindowMode?139:129},onChange:e=>{Cf.setCommand(e.target.value)},placeholder:(0,ei.x)("reply"===Co.S.tabsManager.activeTabKey?e.S.replyContentPlaceholder:e.S.promptPlaceholder,{modKeyName:w.m.getModKeyName()})})]}),(0,y.jsxs)("div",{className:Cv.writeOptionGroup,children:[(0,y.jsxs)("div",{className:Cv.writeOptionList,children:[(0,y.jsx)("div",{className:Cv.writeOptionListHeader,children:e.S.length}),(0,y.jsx)("div",{className:Cv.writeOptionListContent,children:e.params.length.map(e=>(0,y.jsx)(Ca.D,{type:"lightPrimary",bold:!0,active:Cf.activeLength===e.key,onClick:()=>{Cf.setActiveLength(e.key)},text:e.name},e.key))})]}),(0,y.jsxs)("div",{className:Cv.writeOptionList,children:[(0,y.jsx)("div",{className:Cv.writeOptionListHeader,children:e.S.format}),(0,y.jsxs)("div",{className:Cv.writeOptionListContent,children:[e.params.format.map(t=>(0,y.jsx)(Ca.D,{type:"lightPrimary",bold:!0,active:Cf.activeFormat===t.uid,onClick:()=>{Cf.setActiveFormat(t.uid)},autoComputedTooltips:!0,text:t.name,closeable:!t.isSystem,onClose:()=>{t.isSystem||(eL.M.createUserBehaviorEvent({eventName:"delete_format_click",source:"write_compose"}),e.handleDeleteFormat(t.uid))}},t.uid)),(0,y.jsx)(Ca.D,{type:"lightPrimary",bold:!0,onClick:()=>{(0,Cg.E)({insertTarget:"mainWindow"})},text:e.S.addFormat,iconName:"addMemo"})]})]}),(0,y.jsxs)("div",{className:Cv.writeOptionList,children:[(0,y.jsx)("div",{className:Cv.writeOptionListHeader,children:e.S.tone}),(0,y.jsxs)("div",{className:Cv.writeOptionListContent,children:[e.params.tone.map(t=>(0,y.jsx)(Ca.D,{autoComputedTooltips:!0,type:"lightPrimary",bold:!0,active:Cf.activeTone===t.uid,onClick:()=>{Cf.setActiveTone(t.uid)},text:t.name,closeable:!t.isSystem,onClose:()=>{t.isSystem||(eL.M.createUserBehaviorEvent({eventName:"delete_tone_click",source:"write_compose"}),e.handleDeleteTone(t.uid))}},t.uid)),(0,y.jsx)(Ca.D,{type:"lightPrimary",bold:!0,onClick:()=>{(0,Cu.F)({insertTarget:"mainWindow",source:"write_compose"})},text:e.S.addTone,iconName:"addMemo"})]})]}),(0,y.jsxs)("div",{className:Cv.writeOptionList,children:[(0,y.jsx)("div",{className:Cv.writeOptionListHeader,children:e.S.language}),(0,y.jsx)("div",{className:Cv.writeOptionListContent,children:(0,y.jsx)(r2.S,{scene:"functional",value:P.A.composeLanguage,onChange:e=>{P.A.setComposeRespondLanguage(e)},minWidth:140,allowFollowSystem:!0,allowAuto:!0,width:"unset"})})]})]})]}),(0,y.jsx)("div",{className:Cv.toolbar,children:(0,y.jsx)(CS,{vm:e})})]}),e.isHorizontal&&(0,y.jsx)("div",{className:Cv.divider}),(0,y.jsxs)("div",{className:Cv.outputBox,children:[e.activeOutput&&(0,y.jsx)(Ch,{title:e.S.preview,className:Cv.previewWrapper,titleClassName:Cv.previewTitle,textareaClassName:Cv.previewTextarea,titleIcon:"star",manager:Cf.outputManger,onRetry:t=>{e.handleClickGenerate(t.id)},onGenAgain:()=>{e.handleClickGenerate()},NextStep:()=>(0,y.jsx)(CA,{vm:e}),previewBoxMinRow:e.previewBoxMinRow,previewBoxMaxRow:e.previewBoxMaxRow,showImproveWithAi:!0}),e.isHorizontal&&!e.activeOutput&&(0,y.jsxs)("div",{className:Cv.preview,children:[(0,y.jsx)("div",{className:Cv.title,children:e.S.preview}),(0,y.jsx)("div",{className:Cv.content,children:e.S.emptyText})]})]})]})),CS=(0,F.Pi)(function(e){var t;let{vm:i}=e;return(0,y.jsxs)("div",{className:Cv.composeToolbar,children:[(0,y.jsx)(vt,{className:Cv.vipToolbar,source:"grammar",showGpt4:!0,gpt4Checked:P.A.composeGpt4Enabled,onGpt4Change:e=>{P.A.setComposeGpt4Enabled(e)},usageInfoProps:{usageModule:P.A.composeGpt4Enabled?"genius_bot":"basic_query"}}),(0,y.jsxs)(eO.z,{className:Cv.actionB,style:{width:"100%",maxWidth:300},type:"primary",shape:"round",size:"large",loading:null===(t=Cf.outputManger.activeOutput)||void 0===t?void 0:t.loading,disabled:i.generateDisabled,onClick:()=>{i.handleClickGenerate()},children:[i.S.generate,(0,y.jsx)(Cr.p,{keys:["mod","enter"]})]})]})}),CA=(0,F.Pi)(function(e){let{vm:t}=e;return(0,y.jsxs)("div",{className:Cv.previewOperations,children:[(0,y.jsx)(Cn.D,{text:t.previewValue,size:"large"}),(0,y.jsx)(eO.z,{className:Cv.previewOperation,type:"gray",shape:"round",size:"large",onClick:()=>{t.handleCopy()},children:t.copied?t.S.copied:t.S.copy})]})});var Cj=i(58793),Ck={aiResult:"ai-result--gJymt",divider:"divider--gYb4O",collapse:"collapse--PpOIg",expandIcon:"expand-icon--APMa0",active:"active--BV3eQ",header:"header--F03Yp",title:"title--HSG8F",text:"text--LvXe7",loading:"loading--jAwfK",operationGroup:"operation-group--Gv15i",operationItem:"operation-item--q4jKR",box:"box--fAqUb",textareaWrapper:"textarea-wrapper--BiHKe",badgeWrapper:"badge-wrapper--harGi",badge:"badge--slgll",textarea:"textarea--sMhGX",toolbar:"toolbar--ttf8z",errorText:"error-text--pIpzb",previewOperations:"preview-operations--oSeQ7",previewOperation:"preview-operation--iB_Zc",changesMade:"changes-made--hi0kb",reasonBox:"reason-box--z1SJw",reasons:"reasons--VhZy_",reasonItem:"reason-item--YHjqQ",dot:"dot--J71Pk",actions:"actions--vyEuE",retryGpt4Btn:"retry-gpt4-btn--lrqjH"};class CN extends S.PN{get S(){return ei.S.Global.modules.MainWindow.WriteView.Grammar.AiResult}get controller(){return Co.S.grammar}get loading(){var e;return null===(e=this.controller.activeOutput)||void 0===e?void 0:e.loading}get isAiResultOpen(){return this.controller.isAiResultOpen}onViewCreate(){}onViewDestroy(){}handleChange(e){let t=e.includes(this.improveKey);this.toggleAiResultPanel(t)}handleClick(){this.toggleAiResultPanel(!this.isAiResultOpen)}handleImproveBtnClick(){var e;eL.M.createUserBehaviorEvent({eventName:"click_improve_with_ai",extData:{tab:"write:grammar"}}),vp({insertTarget:"mainWindow",content:(null===(e=this.controller.activeOutputRenderData)||void 0===e?void 0:e.optimized)||""})}handleCopy(e){this.copied||(this.copied=!0,setTimeout(()=>{this.copied=!1},2e3),w.m.copyToClipboard(e))}toggleAiResultPanel(e){this.controller.toggleAiResultPanel(e)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"improveKey","improvedText"),(0,T._)(this,"copied",!1)}}(0,I.gn)([S.SB],CN.prototype,"copied",void 0),(0,I.gn)([tB.Fl],CN.prototype,"S",null),(0,I.gn)([tB.Fl],CN.prototype,"controller",null),(0,I.gn)([tB.Fl],CN.prototype,"loading",null),(0,I.gn)([tB.Fl],CN.prototype,"isAiResultOpen",null);let C_=S._Y.createComponent("AiResult",CN,e=>{let t=e.controller.activeOutput;if(!t)return null;let i=e.controller.activeOutputRenderData,o=e.controller.activeOutputReasons,a=i&&i.optimized.trim().length>0,n=(null==i?void 0:i.reasons)&&i.reasons.length>0;return(0,y.jsxs)("div",{className:Ck.aiResult,children:[(0,y.jsx)(cu.Z,{className:Ck.collapse,activeKey:e.isAiResultOpen?[e.improveKey]:[],onChange:e.handleChange.bind(e),items:[{key:e.improveKey,label:(0,y.jsxs)("div",{className:Ck.header,children:[(0,y.jsxs)("div",{className:Ck.title,children:[(0,y.jsx)("span",{className:Ck.text,onClick:e.handleClick.bind(e),children:e.S.title}),e.loading&&(0,y.jsx)("div",{className:Ck.loading}),!e.loading&&e.controller.outputList.length>=2&&(0,y.jsx)(u9.b,{page:e.controller.activeOutputIndex,pageSize:e.controller.outputList.length,onNextClick:()=>{e.controller.handleNextClick()},onPrevClick:()=>{e.controller.handlePrevClick()}})]}),(0,y.jsx)("div",{className:Ck.operationGroup,children:t.loading?(0,y.jsx)(eO.z,{type:"text-gray",size:"small",icon:(0,y.jsx)(Cs.ARz,{size:12}),onClick:()=>{e.controller.stop(t.id)},children:e.S.stop}):a?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Cd,{size:16,msgId:"grammar-fix-".concat(e.controller.activeOutputIndex),content:i.optimized,toolTipPlacement:"top",className:Ck.operationItem}),(0,y.jsx)(tN.u,{title:e.S.generateAgain,children:(0,y.jsx)("span",{className:Ck.operationItem,onClick:()=>{e.controller.generateOutput()},children:(0,y.jsx)(Cs.bnu,{size:12})})})]}):(0,y.jsx)(eO.z,{type:"text-gray",size:"small",icon:(0,y.jsx)(Cs.bnu,{size:12}),onClick:()=>{e.controller.generateOutput({outputId:t.id,useGpt4:t.useGpt4})},children:e.S.retry})})]}),children:(0,y.jsxs)("div",{className:Ck.box,children:[(null==i?void 0:i.optimized)&&(0,y.jsxs)("div",{className:Ck.textareaWrapper,children:[t.useGpt4&&(0,y.jsx)("div",{className:Ck.badgeWrapper,children:(0,y.jsxs)("div",{className:Ck.badge,children:[(0,y.jsx)(t_.J,{name:"gpt4",size:14}),"GPT-4o"]})}),(0,y.jsx)("div",{className:Ck.textarea,children:null==i?void 0:i.optimized}),!e.controller.activeOutput.loading&&(0,y.jsx)("div",{className:Ck.toolbar,children:(0,y.jsx)(Cj.i,{customText:e.S.continueImprove,onClick:e.handleImproveBtnClick.bind(e)})})]}),t.error&&(0,y.jsx)("span",{className:Ck.errorText,children:(0,y.jsx)(Cl.y,{error:t.error,source:"write_view_fix_grammar"})}),!t.loading&&a&&(0,y.jsxs)("div",{className:Ck.previewOperations,children:[(0,y.jsx)(Cn.D,{text:i.optimized}),(0,y.jsx)(eO.z,{className:Ck.previewOperation,type:"gray",shape:"round",disabled:e.copied,onClick:()=>{e.handleCopy(i.optimized)},children:e.copied?e.S.copied:e.S.copy})]}),n&&(0,y.jsx)("div",{className:Ck.divider}),n&&(0,y.jsxs)("div",{className:Ck.changesMade,children:[(0,y.jsx)("span",{className:Ck.title,children:e.S.keyChanges}),o.length>0&&(0,y.jsx)("div",{className:Ck.reasonBox,children:(0,y.jsx)("div",{className:Ck.reasons,children:o.map((e,t)=>(0,y.jsxs)("span",{className:Ck.reasonItem,children:[(0,y.jsx)("span",{className:Ck.dot}),e]},t))})})]}),!t.loading&&a&&!t.useGpt4&&(0,y.jsx)("div",{className:Ck.actions,children:(0,y.jsx)(eO.z,{className:Ck.retryGpt4Btn,type:"gray",shape:"round",icon:(0,y.jsx)(t_.J,{name:"monicaMember",size:18}),onClick:()=>{e.controller.generateOutput({useGpt4:!0})},children:e.S.retryWithGpt4})})]}),collapsible:"icon"}],expandIcon:e=>{let{isActive:t}=e;return(0,y.jsx)("div",{className:q()(Ck.expandIcon,{[Ck.active]:t}),children:(0,y.jsx)(t_.J,{name:"quickActionDown",size:16,color:"var(--theme-icon-secondary)"})})},ghost:!0}),(0,y.jsx)("div",{className:Ck.divider})]})});var CT={grammar:"grammar--QDQiO",inputBox:"input-box--bfK1a",section:"section--N_8vG",textareaBox:"textarea-box--r8nHz",focus:"focus--mB8xz",textarea:"textarea--pFynx",footer:"footer--ZQ0hu",fontTips:"font-tips--jmmFj",dragBar:"drag-bar--hX3Jh",bar:"bar--ISCpg",outputBox:"output-box--ewVjn",toolbar:"toolbar--bZ6cH",resizing:"resizing--wjdYd",grammarToolbar:"grammar-toolbar--by2o1",vipToolbar:"vip-toolbar--OiZ2C",improveBtn:"improve-btn--e4b23",disabled:"disabled--GVvxC",btnText:"btn-text--q0SqA",textareaToolbar:"textarea-toolbar--lQo0d",iconBtn:"icon-btn--e6awh",pasteBtn:"paste-btn--v7byV",horizontal:"horizontal--HRZzY",divider:"divider--DxoYC"},CI=i(28901),CM=i(31284),CL=i(39160),CB=i(36386),CE=i(87038),CD=i(46816),CP=i(20053),CF=i(19541),CR=i(64859);(d=x||(x={})).all="all",d.check="check";let CV=[{host:".feishu.cn",disableType:"check"},{host:".larksuite.com",disableType:"check"},{host:"larkenterprise.com",disableType:"check"},{host:"larkoffice.com",disableType:"check"},{host:"bytedance.larkoffice.com",disableType:"check"},{host:"www.wolai.com",disableType:"check"},{host:"www.kdocs.cn",disableType:"check"},{host:"www.google.com",include:["/search"]},{host:"github.com",exclude:[/\/issues\/\d+/,/\/issues\/new/]}];class CU{async open(e){var t,i;if(!this.getIsEnabledCheck())return;await this.documentReady,await B.h.whenReady,this.register(e),null===(t=this.gmailHelper)||void 0===t||t.closeGrammarCheck(),this.autoClearHighlight=null!==(i=this.options.autoClearHighlight)&&void 0!==i&&i,this.listenerManager.addWindowEventListener("click",()=>{this.autoClearHighlight&&this.mirrorObjList.forEach(e=>{this.clearHighlight(e.id)})});let o=new MutationObserver(()=>{this.registerThrottleCall()});o.observe(document.body,{childList:!0,subtree:!0}),this.registerObserve=o}getIsEnabled(){let{isDisable:e,disableType:t}=this.getBlackSiteStatus();return!(e&&"all"===t)||this.options.skipBlackList}getIsEnabledCheck(){let{isDisable:e}=this.getBlackSiteStatus();return!e||this.options.skipBlackList}isUpdating(e){return this.isTimeLock(e)}highlightMatch(e){var t,i,o,a;let{id:n,match:r,event:s,enableScroll:l=!0}=e,c=this.getMirrorObj(n);if(!c.matchList.some(e=>e.active)&&!r){null===(o=(a=this.options).onHighlightMatchChange)||void 0===o||o.call(a,{id:n,match:r,event:s});return}let d=null;c.matchList.forEach(e=>{e.id===(null==r?void 0:r.id)?(e.active=!0,d=e):e.active=!1}),c.mirror.drawUnderlines(this.getEnableMatchList(n)),null===(t=(i=this.options).onHighlightMatchChange)||void 0===t||t.call(i,{id:n,match:d,event:s}),l&&d&&setTimeout(()=>{c.mirror.scrollToMatch(d)},0)}clearHighlight(e){this.highlightMatch({id:e,match:null,event:null})}clearUnderlines(e){this.getMirrorObj(e).mirror.drawUnderlines([])}replaceMatchText(e){var t,i;let{id:o,match:a,replacement:n="",highlightNextMatch:r}=e;this.setTimeLock(o),this.addToHistory(o);let s=new CM.B;this.acceptLockMap.set(o,s);let l=this.getNextMatch(a,this.getEnableMatchList(o)),c=this.getMirrorObj(o);c.mirror.replaceMatchText(a,n),c.matchList=c.matchList.filter(e=>e.id!==a.id),c.matchList.forEach(e=>{e.offset>a.offset&&(e.offset+=n.length-a.bad.length)}),null===(t=(i=this.options).onMatchListChange)||void 0===t||t.call(i,{id:o,matchList:this.getEnableMatchList(o)}),c.mirror.drawUnderlines(this.getEnableMatchList(o)),r&&l?this.highlightMatch({id:o,match:l,event:null}):this.clearHighlight(o),Promise.race([new Promise(e=>{setTimeout(()=>{e(!0)},1e3)}),s.promise]).then(()=>{this.acceptLockMap.get(o)===s&&this.disableTimeLock(o)})}async replaceAllMatchText(e){var t,i,o,a,n,r;this.setTimeLock(e),this.addToHistory(e);let s=this.getMirrorObj(e),l=s.mirror.replaceAllMatchText(this.getEnableMatchList(e));s.mirror.drawUnderlines([]),null===(t=(i=this.options).onFixingStatusChange)||void 0===t||t.call(i,{id:e,fixing:!0}),await l,null===(o=(a=this.options).onFixingStatusChange)||void 0===o||o.call(a,{id:e,fixing:!1}),s.matchList=[],null===(n=(r=this.options).onMatchListChange)||void 0===n||n.call(r,{id:e,matchList:[]}),this.disableTimeLock(e)}ignoreMatchText(e){var t,i;let{id:o,match:a,highlightNextMatch:n}=e;this.addToHistory(o),this.addIgnoreInThisSession(o,{type:a.type,bad:a.bad});let r=this.getNextMatch(a,this.getEnableMatchList(o));this.getMirrorObj(o).mirror.drawUnderlines(this.getEnableMatchList(o)),null===(t=(i=this.options).onMatchListChange)||void 0===t||t.call(i,{id:o,matchList:this.getEnableMatchList(o)}),n&&r?this.highlightMatch({id:o,match:r,event:null}):this.clearHighlight(o)}ignoreAllMatchText(e){var t,i;this.addToHistory(e);let o=this.getMirrorObj(e);o.matchList.forEach(e=>{e.ignore=!0}),o.mirror.drawUnderlines(this.getEnableMatchList(e)),null===(t=(i=this.options).onMatchListChange)||void 0===t||t.call(i,{id:e,matchList:this.getEnableMatchList(e)})}undo(e){let t=this.getMirrorObj(e),i=t.undoQueue.pop();return!!i&&(t.redoQueue.push(this.getSnapshot(e)),this.restoreSnapshot(e,i),!0)}redo(e){let t=this.getMirrorObj(e),i=t.redoQueue.pop();return!!i&&(t.undoQueue.push(this.getSnapshot(e)),this.restoreSnapshot(e,i),!0)}closeCheck(){var e;null===(e=this.gmailHelper)||void 0===e||e.openGrammarCheck(),this.disposableCollection.dispose(),this.mirrorObjList.forEach(e=>{var t,i;let{id:o}=e;null===(t=(i=this.options).onMatchListChange)||void 0===t||t.call(i,{id:o,matchList:[]}),this.clearHighlight(o),this.clearUnderlines(o)}),this.isClose=!0}triggerRecheck(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.mirrorObjList.forEach(e=>{var t,i;let{mirror:o,id:a}=e;null===(t=(i=this.options).onCheckStatusChange)||void 0===t||t.call(i,{id:a,checking:!0,text:o.getInnerText()}),o.emitTextChangeEvent()}),e&&this.sentenceGrammarsCache.clear()}setActive(e){this.activeInputsCache.push(e),this.activeInputsCache=this.activeInputsCache.filter(e=>e.isConnected);let t=this.mirrorObjList.find(t=>{let{node:i}=t;return i===e});if(t){let{mirror:e}=t;e.emitTextChangeEvent()}}openCheck(){if(this.registerObserve){var e;null===(e=this.gmailHelper)||void 0===e||e.closeGrammarCheck(),this.mirrorObjList.forEach(e=>{let{node:t}=e;this.closeOriginCheck(t)}),this.triggerRecheck()}else this.open();this.isClose=!1}destroy(){var e,t;null===(e=this.gmailHelper)||void 0===e||e.openGrammarCheck(),this.disposableCollection.dispose(),null===(t=this.registerObserve)||void 0===t||t.disconnect(),this.registerObserve=null,this.unregister()}processTextMatchAndSuggestions(e){let{originalText:t,match:i,activeSugIndex:o,segmentLen:a}=e,n=i.suggestions.length,r="",s="",l="",c="";-1!==o&&o<n&&(c=i.suggestions[o]);let d=c.length+i.bad.length-a;if(d>0)l=i.bad.slice(d,i.bad.length),r="...",s="...";else{l=i.bad,d=Math.floor(Math.abs(d)/2);let e=i.offset,o=i.offset+i.length,a=Math.max(e-d,0),n=Math.min(o+d,t.length);r="".concat(t.slice(a,e)),s="".concat(t.slice(o,n)),a>0&&(r="...".concat(r)),n<t.length&&(s="".concat(s,"..."))}return{segStart:r,segEnd:s,segBad:l,segSug:c}}getEnableMatchList(e){let t=this.getMirrorObj(e),i=this.ignoreMap.get(e);return i?t.matchList.filter(e=>!i.some(t=>t.type===e.type&&t.bad===e.bad)):t.matchList}disableAutoClearHighlight(){this.autoClearHighlight=!1}enableAutoClearHighlight(){this.autoClearHighlight=!0}getNodeEnableCheck(e){return(this._checkTriggerCache.get(e)||!CB.BP.isOverSessionLimit||!this.options.sessionLimit)&&!this.isClose}register(){var e,t,i,o;let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[],r=this.getInputNodes(),s=r.filter(e=>{var t;let i=this.mirrorObjList.find(t=>t.node===e.node),o=!i;return null==i||null===(t=i.mirror)||void 0===t||t.registerNode(),o||e.node.setAttribute("spellcheck","false"),o}),l=this.mirrorObjList.filter(e=>!r.find(t=>t.node===e.node));this.batchUnregister(l),s.forEach(e=>{let{node:t,type:i}=e,o=w.m.genId(),a={id:o,node:t,matchList:[],redoQueue:[],undoQueue:[],checking:!1,type:i,close:!this.getNodeEnableCheck(t),originSpellCheck:t.getAttribute("spellcheck")},r={el:t,onMatchTextClick:(e,t)=>{this.highlightMatch({id:o,match:t,enableScroll:!1,event:e})},onInput:()=>{this.isTimeLock(o)||this.clearUnderlines(o)},onTextChange:e=>{var i,n,r,s;if(this.isTimeLock(o)){let e=this.acceptLockMap.get(o);e&&e.resolve()}if(this.options.checkWhenActive&&!this.activeInputsCache.find(e=>e===t))return;let l=this.getNodeEnableCheck(t);a.close=!l,null===(i=(n=this.options).onMirrorChange)||void 0===i||i.call(n,this.mirrorObjList),null===(r=(s=this.options).onCloseChange)||void 0===r||r.call(s,o,!l),this.handleTextChange(o,e,t,l)},onFocus:()=>{var e,i;null===(e=(i=this.options).onFocus)||void 0===e||e.call(i,{id:o,el:t})}},s="textarea"===i?new CD.v(r):new CE.d(r);a.mirror=s,n.push(a),this.mirrorObjList.push(a),this.closeOriginCheck(t)}),n&&n.forEach(e=>{let t=e.mirror.getInnerText(),i=e.node,o=this.getNodeEnableCheck(i);t.trim()||this.handleTextChange(e.id,t,i,o)}),null===(e=(t=this.options).onMirrorChange)||void 0===e||e.call(t,this.mirrorObjList),null===(i=(o=this.options).onMirrorCreate)||void 0===i||i.call(o,n,a)}closeOriginCheck(e){if("autoDetect"===this.options.type){let t=e.getAttribute("spellcheck");e.setAttribute("spellcheck","false"),this.disposableCollection.push({dispose(){e.setAttribute("spellcheck",t||"false")}})}}async handleTextChange(e,t,i,o){var a,n,r,s,l,c,d,p,m,h,g,u;this.isTriggerByFix(e)||null===(a=(n=this.options).onCheckStatusChange)||void 0===a||a.call(n,{id:e,checking:!0,text:t});let v=!1,C=!0;if(t.trim())try{let e=(await uX.U.detectAllLanguage(t))[0];C="en"===e.locale&&e.score>85;let i=t.match(/\b\w+\b/g);v=!i||i.length<=(this.options.minWordsThreshold||1/0)}catch(e){}else v=!0;if(!o){C&&!v&&(null===(l=(c=this.options).onNeedGrammar)||void 0===l||l.call(c,e)),null===(r=(s=this.options).onCheckStatusChange)||void 0===r||r.call(s,{id:e,checking:!1,text:t,isEnglish:!0,isShort:v});return}try{let o;this.clearHighlight(e);let a=this.getMirrorObj(e);a.checking=!0;let n=this.getDiffSentences(t),r=t=>{var i,o;let{results:n,originText:r}=t,s=this.translateMatches({id:e,matches:n,originText:r});a.checking=!1,a.matchList=s,a.mirror.drawUnderlines(this.getEnableMatchList(e)),null===(i=(o=this.options).onMatchListChange)||void 0===i||i.call(o,{id:e,matchList:this.getEnableMatchList(e)})};if(this.options.skipCheckWhenInvalid&&v){o={results:[],originText:t},null===(m=(h=this.options).onCheckStatusChange)||void 0===m||m.call(h,{id:e,checking:!1,text:t,isEnglish:!0,isShort:v}),r(o);return}if(this.options.sessionLimit&&!this._checkTriggerCache.get(i)&&eD.userController.isFreeUser&&(this._checkTriggerCache.set(i,!0),P.A.increaseGrammarSessionNum()),n){if(n.diffTextContent){if(r((0,CR.mZ)(n.sentencesResult)),(o=await this.checkTextGrammar(n)).skip)return}else o=(0,CR.mZ)(n.sentencesResult)}else o={results:[],originText:""};null===(d=(p=this.options).onCheckStatusChange)||void 0===d||d.call(p,{id:e,checking:!1,text:t,isEnglish:!0,isShort:v}),r(o)}catch(i){null===(g=(u=this.options).onCheckStatusChange)||void 0===g||g.call(u,{id:e,checking:!1,text:t,error:!0})}}getDiffSentences(e){let{checkLenLimit:t}=this.options,i=e.trimEnd();if(t&&(i=i.substring(0,t)),!i)return null;let o=(0,CR.TH)(i),a={indexArr:[],sentences:[]},n=o.map((e,t)=>{let i=this.sentenceGrammarsCache.get(e);return i?{text:e,errors:i.errors}:(a.indexArr.push(t),a.sentences.push(e),{text:e,errors:[]})});return{diffTextContent:a.sentences.join(""),diffSentences:a,sentencesResult:n,textContent:i}}async checkTextGrammar(e){var t,i,o,a;let{diffTextContent:n,diffSentences:r,sentencesResult:s,textContent:l}=e,c=this.lastCheckFlag+=1,d=this.options.vipApiCheck?vo.v.checkGrammarWithVipCheck:vo.v.checkGrammar,p=await d({text:n,language:this.options.useConfigLanguage?P.A.grammarLanguage:"en-US",taskUid:w.m.genId()});if(0===p.code&&(null===(t=(i=this.options).onApiResponse)||void 0===t||t.call(i,!!(null!==(o=p.data.errors)&&void 0!==o?o:[]).length)),c!==this.lastCheckFlag)return{skip:!0,results:[],originText:l};if(0!==p.code)throw ef.M.error(p.msg),Error(p.msg||"Request failed");let m=(0,CR.H_)(null!==(a=p.data.errors)&&void 0!==a?a:[],r.sentences);return r.indexArr.forEach((e,t)=>{this.sentenceGrammarsCache.set(m[t].text,m[t]),s[e]=m[t]}),(0,CR.mZ)(s)}addToHistory(e){let t=this.getSnapshot(e),i=this.getMirrorObj(e);i.undoQueue.push(t),i.redoQueue=[]}addIgnoreInThisSession(e,t){let i=this.ignoreMap.get(e);i?i.some(e=>e.type===t.type&&e.bad===t.bad)||i.push(t):this.ignoreMap.set(e,[t])}getSnapshot(e){let t=this.getMirrorObj(e);return JSON.parse(JSON.stringify({originalText:t.mirror.getInnerText()||"",matches:t.matchList}))}restoreSnapshot(e,t){var i,o;let{originalText:a,matches:n}=t,r=this.getMirrorObj(e);r.matchList=n,CI.x.triggerInputEvent(r.mirror.type,r.node,a),r.mirror.drawUnderlines(this.getEnableMatchList(e)),null===(i=(o=this.options).onMatchListChange)||void 0===i||i.call(o,{id:e,matchList:this.getEnableMatchList(e)})}translateMatches(e){let{id:t,matches:i,originText:o=""}=e,{matchList:a}=this.getMirrorObj(t);return i.map((e,t)=>{let i=this.getColorFromMatch(e),n={...e,id:"key_".concat(t),activeSugIndex:-1,ignore:!1,active:!1,removeSegment:"",...i};if(e.suggestions.length>0&&(n.activeSugIndex=0),"grammar"!==e.type||1!==e.suggestions.length||""!==e.suggestions[0]||e.removeSegment||(e.removeSegment=!0,n.suggestions=[]),e.removeSegment){let t=e.offset,i=e.offset+e.length;if(o.length<i)return n;n.removeSegment=o.slice(t,i)}return a.find(e=>"spelling"===e.type&&e.type===n.type&&e.bad===n.bad&&e.ignore)&&(n.ignore=!0),n})}getColorFromMatch(e){let t="",i="",o="";return"spelling"===e.type?(t="Spelling",i=CL.uZ.SPELLING.UNDERLINE,o=CL.uZ.SPELLING.BACKGROUND):"style"===e.type?(t="Style",i=CL.uZ.STYLE.UNDERLINE,o=CL.uZ.STYLE.BACKGROUND):(t="Grammar",i=CL.uZ.GRAMMAR.UNDERLINE,o=CL.uZ.GRAMMAR.BACKGROUND),{typeName:t,underlineColor:i,highlightColor:o}}getNextMatch(e,t){let i=t.findIndex(t=>t.id===e.id);if(-1===i)return t[0];let o=t.length-1;return t[i+1>o?0:i+1]}setTimeLock(e){this.getMirrorObj(e).isLocked=!0}disableTimeLock(e){let t=this.getMirrorObj(e);t.isLocked=!1,t.disLockTime=Date.now()}isTimeLock(e){let t=this.getMirrorObj(e);return!t||t.isLocked}isTriggerByFix(e){let t=this.getMirrorObj(e);if(!t)return!1;let i=t.disLockTime&&t.disLockTime-Date.now()<1e3;return t.disLockTime=void 0,i}getInputNodes(){let{type:e,specialNodes:t}=this.options;return"specialTarget"===e?t?this.domManager.genInputNodes(t):[]:this.domManager.detectInputNodes()}batchUnregister(e){var t,i;e.forEach(e=>{let{mirror:t}=e;t.destroy()}),e.forEach(e=>{var t,i;let{id:o}=e;null===(t=(i=this.options).onMatchListChange)||void 0===t||t.call(i,{id:o,matchList:[]})}),this.mirrorObjList=this.mirrorObjList.filter(t=>!e.includes(t)),null===(t=(i=this.options).onMirrorChange)||void 0===t||t.call(i,this.mirrorObjList)}unregister(){var e,t;this.mirrorObjList.forEach(e=>{let{mirror:t}=e;t.destroy()}),this.mirrorObjList.forEach(e=>{var t,i;let{id:o}=e;null===(t=(i=this.options).onMatchListChange)||void 0===t||t.call(i,{id:o,matchList:[]})}),this.mirrorObjList=[],null===(e=(t=this.options).onMirrorChange)||void 0===e||e.call(t,this.mirrorObjList)}getBlackSiteStatus(){let e=window.location.hostname,t=window.location.pathname,i=e=>"string"==typeof e?t.includes(e):e.test(t),o=CV.find(t=>{if("string"==typeof t)return e.includes(t);let{host:o,include:a,exclude:n}=t;return!!e.includes(o)&&!(n&&n.some(i))&&(!a||a.some(i))}),a="all";if(o&&"object"==typeof o){let{disableType:e="all"}=o;a=e}return{isDisable:!!o,disableType:a}}getMirrorObj(e){return this.mirrorObjList.find(t=>t.id===e)}constructor(e){(0,T._)(this,"options",void 0),(0,T._)(this,"mirrorObjList",void 0),(0,T._)(this,"domManager",void 0),(0,T._)(this,"gmailHelper",void 0),(0,T._)(this,"listenerManager",void 0),(0,T._)(this,"registerObserve",void 0),(0,T._)(this,"autoClearHighlight",void 0),(0,T._)(this,"registerThrottleCall",void 0),(0,T._)(this,"disposableCollection",void 0),(0,T._)(this,"sentenceGrammarsCache",void 0),(0,T._)(this,"activeInputsCache",void 0),(0,T._)(this,"lastCheckFlag",void 0),(0,T._)(this,"isClose",void 0),(0,T._)(this,"acceptLockMap",void 0),(0,T._)(this,"documentReady",void 0),(0,T._)(this,"_checkTriggerCache",void 0),(0,T._)(this,"ignoreMap",void 0),this.options=e,this.mirrorObjList=[],this.domManager=new CP.m,this.gmailHelper=null,this.listenerManager=new L.M,this.registerObserve=null,this.autoClearHighlight=!1,this.registerThrottleCall=(0,r4.Z)(()=>{this.registerObserve&&this.register()},1e3,{trailing:!0}),this.disposableCollection=new dU.K,this.sentenceGrammarsCache=new Map,this.activeInputsCache=[],this.lastCheckFlag=0,this.isClose=!1,this.acceptLockMap=new Map,this.documentReady=new Promise(e=>{if("loading"!==document.readyState)e(!0);else{let t=()=>{e(!0),document.removeEventListener("readystatechange",t)};document.addEventListener("readystatechange",t)}}),this._checkTriggerCache=new Map,this.ignoreMap=new Map;let{getDefaultOpenStatus:t}=e;"autoDetect"===e.type&&(this.gmailHelper=new CF.g),t&&t().then(e=>{let{open:t,check:i}=e;this.isClose=!i,t&&this.open(!0)})}}class Cz extends S.PN{get S(){return ei.S.Global.modules.MainWindow.WriteView.Grammar}get controller(){return Co.S.grammar}get isHorizontal(){return E.w.isHorizontal}get textLength(){var e,t;return null!==(t=null===(e=this.controller.originalText)||void 0===e?void 0:e.length)&&void 0!==t?t:0}get checkBtnDisabled(){return this.controller.disabled}onViewCreate(){var e,t,i;this.keydownHelper.init({handleKeydown:e=>{"grammar"===Co.S.tabsManager.activeTabKey&&this.handleInputKeydown(e)},keydownContainer:[(null===(i=this.controller)||void 0===i?void 0:null===(t=i.inputRef)||void 0===t?void 0:null===(e=t.resizableTextArea)||void 0===e?void 0:e.textArea)||null]}),setTimeout(()=>{this.initGrammarCheck(),this.initResizable()},0)}onViewDestroy(){var e;null===(e=this.controller.grammarCheckIns)||void 0===e||e.destroy(),this.resizableController.dispose(),this.keydownHelper.destroy()}async handleChange(e){""===e.target.value&&(this.controller.matches=[]),this.controller.setOriginalText(e.target.value),this.controller.toggleCopyButtonVisible(!1)}handleMouseEnter(){this.resizableController.handleRootMouseEnter()}handleMouseLeave(){this.resizableController.handleRootMouseLeave()}handleMouseDown(e){this.isResizing||(this.isResizing=!0),this.resizableController.handleRootMouseDown(e)}handleMouseUp(){this.isResizing&&(this.isResizing=!1)}handleScroll(e){let{scrollTop:t,scrollHeight:i,clientHeight:o}=e.currentTarget,a=t-this.lastScrollTop>0,n=this.controller.isAutoScroll,r=t+o>=i-50;!n||a||r?!n&&a&&r&&(this.controller.isAutoScroll=!0):this.controller.isAutoScroll=!1,this.lastScrollTop=t}handleInputKeydown(e){let t=()=>{e.stopPropagation(),e.preventDefault()},i=this.controller.mirrorId;if(iB.t.isHotkey(e,["mod+enter"])){t(),this.checkWithAi();return}let o=iB.t.isHotkey(e,["mod+z"]),a=iB.t.isHotkey(e,["mod+shift+z"]);if(o||a){var n,r;t(),o?null===(n=this.controller.grammarCheckIns)||void 0===n||n.undo(i):null===(r=this.controller.grammarCheckIns)||void 0===r||r.redo(i);return}}checkWithAi(){var e;if(this.checkBtnDisabled)return;let t=null===(e=this.controller.grammarCheckIns)||void 0===e?void 0:e.isUpdating;this.generating||this.checkBtnDisabled&&!t||(eL.M.createUserBehaviorEvent({eventName:"write_generate_click",extData:{key:"grammar"}}),this.generating=!0,this.controller.isSuggestionsOpen=!1,this.controller.deactivateMatches(),setTimeout(()=>{this.controller.generateOutput(),this.generating=!1},t?1e3:0))}copyText(){this.copied||(this.copyTimer&&(clearTimeout(this.copyTimer),this.copyTimer=null),w.m.copyToClipboard(this.controller.originalText),this.copied=!0,this.copyTimer=window.setTimeout(()=>{this.copied=!1},3e3))}clearText(){this.controller.reset(),this.controller.setOriginalText("")}initResizable(){this.resizableController.init({defaultData:{translateX:0,translateY:0,width:0,height:300},touchArea:12,getAllowedDirection:()=>["top","bottom"],onResized:()=>{var e,t;this.topViewHeight=null!==(t=null===(e=this.resizableController.data)||void 0===e?void 0:e.height)&&void 0!==t?t:300}})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"keydownHelper",new Cx.T),(0,T._)(this,"resizableController",new tz.S),(0,T._)(this,"isFocus",!1),(0,T._)(this,"copied",!1),(0,T._)(this,"topViewHeight",300),(0,T._)(this,"isResizing",!1),(0,T._)(this,"checkStatus",null),(0,T._)(this,"generating",!1),(0,T._)(this,"copyTimer",null),(0,T._)(this,"lastScrollTop",0),(0,T._)(this,"initGrammarCheck",()=>{var e,t;let i=null===(t=this.controller.inputRef)||void 0===t?void 0:null===(e=t.resizableTextArea)||void 0===e?void 0:e.textArea;i&&(this.controller.grammarCheckIns=new CU({type:"specialTarget",specialNodes:[i],minWordsThreshold:3,skipCheckWhenInvalid:!0,onMatchListChange:e=>{let{id:t,matchList:i}=e;this.controller.mirrorId=t,this.controller.matches=i,!i.find(e=>e.active)&&i.length&&this.controller.highlight(i[0])},onHighlightMatchChange:e=>{let{match:t}=e;this.controller.activeMatch=t},onCheckStatusChange:e=>{this.checkStatus=e},getDefaultOpenStatus:async()=>({open:!0,check:!0}),skipBlackList:!0,checkLenLimit:2e3}))})}}(0,I.gn)([S.SB],Cz.prototype,"isFocus",void 0),(0,I.gn)([S.SB],Cz.prototype,"copied",void 0),(0,I.gn)([S.SB],Cz.prototype,"topViewHeight",void 0),(0,I.gn)([S.SB],Cz.prototype,"isResizing",void 0),(0,I.gn)([S.SB],Cz.prototype,"checkStatus",void 0),(0,I.gn)([S.SB],Cz.prototype,"generating",void 0),(0,I.gn)([tB.Fl],Cz.prototype,"S",null),(0,I.gn)([tB.Fl],Cz.prototype,"controller",null),(0,I.gn)([tB.Fl],Cz.prototype,"isHorizontal",null),(0,I.gn)([tB.Fl],Cz.prototype,"textLength",null),(0,I.gn)([tB.Fl],Cz.prototype,"checkBtnDisabled",null);var CO={simpleCollapse:"simple-collapse--ZPzAK",box:"box--tgRU2",arrow:"arrow--rIzI6"};class CW extends S.PN{onViewCreate(){if(!this.boxNode)return;let{clientHeight:e}=this.boxNode;e>this.props.height&&(this.showArrow=!0)}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"boxNode",null),(0,T._)(this,"showArrow",!1),(0,T._)(this,"collapsed",!0)}}(0,I.gn)([S.SB],CW.prototype,"showArrow",void 0),(0,I.gn)([S.SB],CW.prototype,"collapsed",void 0);let CH=S._Y.createComponent("SimpleCollapse",CW,e=>{let{height:t,children:i}=e.props;return(0,y.jsxs)("div",{className:CO.simpleCollapse,style:{height:e.collapsed?"".concat(t,"px"):"auto"},children:[(0,y.jsx)("div",{className:CO.box,ref:t=>e.boxNode=t,children:i}),e.showArrow&&(0,y.jsx)("div",{className:CO.arrow,onClick:()=>{e.collapsed=!e.collapsed},style:{transform:e.collapsed?"rotate(0deg)":"rotate(-180deg)"},children:(0,y.jsx)(t_.J,{name:"grammarDown",size:16})})]})});var CG={suggestions:"suggestions--nPrpK",collapse:"collapse--T2GHc",expandIcon:"expand-icon--PeT92",active:"active--RgGv5",header:"header--_34Ql",title:"title--RxfTn",text:"text--ybUdD",disabled:"disabled--AHROg",loading:"loading--b_4ES",badge:"badge--uiEUu",fixBtn:"fix-btn--OfhoX",suggestionBox:"suggestion-box--biYgI",item:"item--iK761",point:"point--lyudP",badText:"bad-text--w05eL",content:"content--uRUBK",textSeg:"text-seg--H3NrQ",sugText:"sug-text--tNr1n",replacements:"replacements--plHCR",replacement:"replacement--ASd9z",footer:"footer--EFtxQ",rt:"rt--xXT2Q",btn:"btn--nA1lT",expanded:"expanded--lZD7j",empty:"empty--GDW7Q",checkNow:"check-now--eH12w"};class CQ extends S.PN{get S(){return ei.S.Global.modules.MainWindow.WriteView.Grammar.Suggestions}get controller(){return Co.S.grammar}get isSuggestionsOpen(){return this.controller.isSuggestionsOpen}get matches(){return this.controller.matches}get activeMatchInfo(){return this.controller.activeMatch}get matchCount(){return this.matches.length}get hasResult(){return 0===this.matchCount}get isAllowCollapse(){return!!this.controller.activeOutput}get activeMatchId(){var e,t;return null!==(t=null===(e=this.controller.activeMatch)||void 0===e?void 0:e.id)&&void 0!==t?t:""}get fixAllBtnDisabled(){return this.controller.disabled||this.isChecking||0===this.matchCount}onViewCreate(){tU.f.getProxy(this).add((0,tB.U5)(()=>this.controller.activeMatch,()=>{this.scrollIntoView()})),this.observer=new ResizeObserver(e=>{let{width:t}=e[0].contentRect;this.sugNodeWidth!==t&&(this.sugTimer&&(clearTimeout(this.sugTimer),this.sugTimer=null),this.sugTimer=setTimeout(()=>{this.sugNodeWidth=t,this.segmentLen=Math.floor(t/this.sugTextWidth)-6},100))}),setTimeout(()=>{this.observer&&this.sugNode&&this.observer.observe(this.sugNode)},200)}onViewDestroy(){var e;tU.f.getProxy(this).disposeAll(),null===(e=this.observer)||void 0===e||e.disconnect()}handleChange(e){let t=e.includes(this.sugKey);this.toggleSuggestions(t)}handleClick(){!this.isChecking&&this.isAllowCollapse&&this.toggleSuggestions(!this.isSuggestionsOpen)}toggleSuggestions(e){this.controller.toggleSuggestionPanel(e),this.matches.length&&setTimeout(()=>{e?this.controller.highlight(this.matches[0]):this.controller.clearHighlight()},e?300:0)}scrollIntoView(){let e=this.activeMatchInfo;if(!(null==e?void 0:e.active))return;let t=30;this.controller.isSuggestionsOpen||(t=300,this.controller.toggleSuggestionPanel(!0)),setTimeout(()=>{var t;let i=null===(t=this.sugNode)||void 0===t?void 0:t.querySelector('[data-id="'.concat(e.id,'"]'));if(!i)return;let o=e.id===this.matches[0].id?"end":"start";i.scrollIntoView({behavior:"smooth",block:o,inline:o})},t)}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"sugKey","suggestions"),(0,T._)(this,"sugNode",null),(0,T._)(this,"segmentLen",40),(0,T._)(this,"isChecking",!1),(0,T._)(this,"observer",null),(0,T._)(this,"sugTimer",null),(0,T._)(this,"sugNodeWidth",0),(0,T._)(this,"sugTextWidth",8)}}(0,I.gn)([S.SB],CQ.prototype,"segmentLen",void 0),(0,I.gn)([(0,S.qZ)("isChecking")],CQ.prototype,"isChecking",void 0),(0,I.gn)([tB.Fl],CQ.prototype,"S",null),(0,I.gn)([tB.Fl],CQ.prototype,"controller",null),(0,I.gn)([tB.Fl],CQ.prototype,"isSuggestionsOpen",null),(0,I.gn)([tB.Fl],CQ.prototype,"matches",null),(0,I.gn)([tB.Fl],CQ.prototype,"activeMatchInfo",null),(0,I.gn)([tB.Fl],CQ.prototype,"matchCount",null),(0,I.gn)([tB.Fl],CQ.prototype,"hasResult",null),(0,I.gn)([tB.Fl],CQ.prototype,"isAllowCollapse",null),(0,I.gn)([tB.Fl],CQ.prototype,"activeMatchId",null),(0,I.gn)([tB.Fl],CQ.prototype,"fixAllBtnDisabled",null);let CJ=S._Y.createComponent("Suggestions",CQ,e=>{let{isEnglish:t,isShort:i}=e.props;return(0,y.jsx)("div",{className:CG.suggestions,children:(0,y.jsx)(cu.Z,{className:CG.collapse,activeKey:e.isSuggestionsOpen?[e.sugKey]:[],onChange:e.handleChange.bind(e),items:[{key:e.sugKey,label:(0,y.jsxs)("div",{className:CG.header,children:[(0,y.jsxs)("div",{className:CG.title,children:[(0,y.jsx)("span",{className:q()(CG.text,{[CG.disabled]:!e.isAllowCollapse}),onClick:e.handleClick.bind(e),children:e.S.title}),e.isChecking&&(0,y.jsx)("div",{className:CG.loading}),!e.fixAllBtnDisabled&&(0,y.jsx)("div",{className:CG.badge,children:e.matchCount})]}),!e.fixAllBtnDisabled&&(0,y.jsx)(tN.u,{title:e.S.fixAllDesc,children:(0,y.jsx)("span",{className:CG.fixBtn,onClick:()=>{e.controller.fixAll()},children:e.S.fixAll})})]}),children:(0,y.jsxs)("div",{className:CG.suggestionBox,ref:t=>{e.sugNode=t},children:[e.matches.map((t,i)=>{var o;let a=e.activeMatchId===t.id&&(null===(o=e.activeMatchInfo)||void 0===o?void 0:o.active),n=e.controller.originalText,r=t.activeSugIndex,{segStart:s,segEnd:l,segBad:c,segSug:d}=e.controller.grammarCheckIns.processTextMatchAndSuggestions({originalText:n,match:t,activeSugIndex:r,segmentLen:e.segmentLen});return(0,y.jsxs)("div",{"data-id":t.id,className:q()(CG.item,{[CG.expanded]:a}),onClick:()=>{a||e.controller.highlight(t)},children:[(0,y.jsxs)("div",{className:CG.header,children:[(0,y.jsx)("div",{className:CG.point,style:{backgroundColor:t.underlineColor}}),(0,y.jsx)("div",{className:CG.title,children:t.description?"".concat(t.typeName,": ").concat(t.description):t.typeName}),(0,y.jsx)("div",{className:CG.badText,children:a?"":t.bad})]}),a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:CG.content,children:[(0,y.jsxs)("div",{className:CG.textSeg,children:[s," ",(0,y.jsx)("span",{className:CG.badText,children:c}),-1!==t.activeSugIndex&&(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)("span",{className:CG.sugText,children:d})]})," ",l]}),t.suggestions.length>1&&(0,y.jsx)(CH,{height:28,children:(0,y.jsx)("div",{className:CG.replacements,children:t.suggestions.map((e,i)=>(0,y.jsx)("span",{className:q()(CG.replacement,{[CG.active]:i===t.activeSugIndex}),onClick:()=>{t.activeSugIndex=i},children:e},i))})})]}),(0,y.jsxs)("div",{className:CG.footer,children:[(0,y.jsx)("div",{className:CG.lt}),(0,y.jsxs)("div",{className:CG.rt,children:[(0,y.jsx)(eO.z,{className:CG.btn,type:"text-gray",size:"small",onClick:()=>{e.controller.ignore(t)},children:e.S.ignore}),(0,y.jsx)(eO.z,{className:CG.btn,type:"primary",size:"medium",onClick:()=>{var i;e.controller.replacement(t,null!==(i=t.suggestions[t.activeSugIndex])&&void 0!==i?i:"")},children:e.S.accept})]})]})]})]},i)}),(0,y.jsx)(function(){function o(t){let{text:i}=t;return(0,y.jsx)(aN.Z,{S:i,components:{a:t=>(0,y.jsx)("a",{className:CG.checkNow,onMouseDown:t=>{0===t.button&&e.props.handleCheckNow()},children:t})}})}return 0===e.controller.originalText.trim().length?(0,y.jsx)("div",{className:CG.empty,children:e.S.emptyTip}):e.isChecking||!e.hasResult?null:!0===i?(0,y.jsx)("div",{className:CG.empty,children:(0,y.jsx)(o,{text:e.S.tooShort})}):!1===t?(0,y.jsx)("div",{className:CG.empty,children:(0,y.jsx)(o,{text:e.S.nonEnglishTip})}):(0,y.jsx)("div",{className:CG.empty,children:(0,y.jsx)(o,{text:e.S.noProblemTip})})},{})]}),showArrow:e.isAllowCollapse,collapsible:"icon"}],expandIcon:e=>{let{isActive:t}=e;return(0,y.jsx)("div",{className:q()(CG.expandIcon,{[CG.active]:t}),children:(0,y.jsx)(t_.J,{name:"quickActionDown",size:16,color:"var(--theme-icon-secondary)"})})},ghost:!0})})}),Cq=S._Y.createComponent("Grammar",Cz,e=>{var t;let{checking:i,isEnglish:o,isShort:a}=null!==(t=e.checkStatus)&&void 0!==t?t:{};return(0,y.jsxs)("div",{className:q()(CT.grammar,{[CT.resizing]:e.isResizing,[CT.horizontal]:e.isHorizontal}),onMouseUp:e.handleMouseUp.bind(e),children:[(0,y.jsxs)("div",{className:CT.inputBox,style:{height:e.isHorizontal?"100%":e.topViewHeight},ref:t=>{e.resizableController.root=t},onMouseEnter:e.handleMouseEnter.bind(e),onMouseLeave:e.handleMouseLeave.bind(e),onMouseDown:e.handleMouseDown.bind(e),children:[(0,y.jsx)("div",{className:CT.section,children:(0,y.jsxs)("div",{className:q()(CT.textareaBox,{[CT.focus]:e.isFocus}),children:[(0,y.jsx)(tj.g,{className:CT.textarea,value:e.controller.originalText,placeholder:e.S.originalTextPlaceholder,spellCheck:!1,getTextAreaRef:t=>{e.controller.inputRef=t},onFocus:()=>e.isFocus=!0,onBlur:()=>e.isFocus=!1,onChange:e.handleChange.bind(e)}),(0,y.jsxs)("div",{className:CT.footer,children:[(0,y.jsx)(CY,{vm:e}),(0,y.jsx)("div",{className:CT.fontTips,children:"".concat(e.textLength,"/").concat(e.controller.maxTextLength)})]})]})}),!e.isHorizontal&&(0,y.jsx)("div",{className:CT.dragBar,style:{height:12},children:(0,y.jsx)("div",{className:CT.bar})}),e.isHorizontal&&(0,y.jsx)("div",{className:CT.toolbar,children:(0,y.jsx)(CK,{vm:e})})]}),e.isHorizontal&&(0,y.jsx)("div",{className:CT.divider}),(0,y.jsxs)("div",{className:CT.outputBox,ref:t=>{e.controller.outputNode=t},style:{paddingBottom:e.isHorizontal?0:48},onScroll:e.handleScroll.bind(e),children:[!e.isHorizontal&&(0,y.jsx)("div",{className:CT.toolbar,children:(0,y.jsx)(CK,{vm:e})}),(0,y.jsx)(C_,{}),(0,y.jsx)(CJ,{isChecking:null!=i&&i,isEnglish:o,isShort:a,handleCheckNow:()=>{e.checkWithAi()}})]})]})}),CK=(0,F.Pi)(e=>{var t;let{vm:i}=e;return(0,y.jsxs)("div",{className:CT.grammarToolbar,children:[(0,y.jsx)(vt,{className:CT.vipToolbar,source:"grammar",showGpt4:!0,gpt4Checked:P.A.composeGpt4Enabled,onGpt4Change:e=>{P.A.setComposeGpt4Enabled(e)},usageInfoProps:{usageModule:P.A.composeGpt4Enabled?"genius_bot":"basic_query"}}),(0,y.jsxs)(eO.z,{className:q()(CT.improveBtn,{[CT.disabled]:i.checkBtnDisabled}),type:"primary",shape:"round",size:"large",loading:i.generating||(null===(t=i.controller.activeOutput)||void 0===t?void 0:t.loading),onClick:()=>{i.checkWithAi()},children:[(0,y.jsx)("span",{className:CT.btnText,children:i.S.checkWithAI}),(0,y.jsx)(Cr.p,{keys:["mod","enter"]})]})]})}),CY=(0,F.Pi)(e=>{let{vm:t}=e;return(0,y.jsxs)("div",{className:CT.textareaToolbar,children:[!t.controller.disabled&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:CT.iconBtn,onClick:t.copyText.bind(t),children:t.copied?(0,y.jsx)(t_.J,{name:"monicaSuccess",size:20}):(0,y.jsx)(t_.J,{name:"monicaCopy",size:20,color:"currentColor"})}),(0,y.jsx)("div",{className:CT.iconBtn,onClick:t.clearText.bind(t),children:(0,y.jsx)(t_.J,{name:"monicaTrash",size:20,color:"currentColor"})})]}),t.controller.pasteButtonVisible&&(0,y.jsxs)("span",{className:CT.pasteBtn,onClick:t.controller.handlePaste.bind(t.controller),children:[(0,y.jsx)(t_.J,{name:"paste"}),t.S.pasteSelection]})]})});var CZ={template:"template--ZhTBi",header:"header--FSpqo",backBox:"back-box--ST8B7",content:"content--z6p1j",tooltip:"tooltip--GVJBd"},CX={templateDetail:"template-detail--gbB2V",templateContent:"template-content--eosAG",formGroup:"form-group--ZNMaz",formItem:"form-item--JWwce",formItemTitle:"form-item-title--aWZGl",formItemTitleRequired:"form-item-title-required--crrcn",tagList:"tag-list--BSWbG",tag:"tag--SWAMB",formGroupWrapper:"form-group-wrapper--RYiSG",previewWrapper:"preview-wrapper--bxz6l",previewHeader:"preview-header--lZq8z",previewTitle:"preview-title--VErSp",previewBox:"preview-box--uPZwP",previewOperations:"preview-operations--tXps7",previewOperation:"preview-operation--gtTmP",footer:"footer--b5m1f"},C$=i(82270);class C0 extends S.PN{get generateDisabled(){for(let e=0;e<this.props.template.optionList.length;e++){let t=this.props.template.optionList[e],i=this.formData[t.key].value||"";if(t.required&&!i||t.maxLength&&i.length>t.maxLength)return!0}return!1}get addDisabled(){return 0===this.previewValue.length}onViewCreate(){this.previewBoxMaxRow=this.containerEl?this.containerEl.clientHeight/40:5,this.keydownHelper.init({handleKeydown:e=>{(0,en.P6)(["mod+enter"])(e)&&(e.preventDefault(),this.handleClickGenerate())},keydownContainer:this.textareaElements.filter(e=>!!e)})}onViewDestroy(){this.keydownHelper.destroy()}handleCopy(){this.copied||(this.copied=!0,setTimeout(()=>{this.copied=!1},2e3),w.m.copyToClipboard(this.previewValue))}async handleClickGenerate(){let{isEnough:e,handleCreditsNotEnough:t}=tP.K.checkCredits({module:P.A.composeGpt4Enabled?"genius_bot":"basic_query",source:"compose_template_limit"});if(!e){t();return}this.previewValue="",this.generateLoading=!0,this.scrollToBottom(),az.Tn.composeWithTemplate({optList:Object.keys(this.formData).map(e=>({key:e,value:this.formData[e].value})),templateKey:this.props.template.key,useModel:P.A.composeGpt4Enabled?tX.f2:tX.Q7},(e,i,o)=>{if(i&&(this.generateLoading=!1,this.scrollToBottom()),o&&o===C$.Eg.quotaExceeded){t();return}e&&(this.showPreview=!0,this.previewValue+=e,this.scrollToBottom())})}handleImproveBtnClick(){eL.M.createUserBehaviorEvent({eventName:"click_improve_with_ai",extData:{source:"write:template"}}),vp({insertTarget:"mainWindow",content:this.previewValue,showBackIcon:!0})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"containerEl",null),(0,T._)(this,"keydownHelper",new Cx.T),(0,T._)(this,"textareaElements",[]),(0,T._)(this,"formData",{}),(0,T._)(this,"previewValue",""),(0,T._)(this,"showPreview",!1),(0,T._)(this,"previewBoxMaxRow",5),(0,T._)(this,"previewBoxMinRow",5),(0,T._)(this,"generateLoading",!1),(0,T._)(this,"addLoading",!1),(0,T._)(this,"copied",!1),(0,T._)(this,"scrollToBottom",(0,eb.Z)(()=>{this.containerEl&&(this.containerEl.scrollTop=this.containerEl.scrollHeight)},100,{trailing:!0}))}}(0,I.gn)([S.SB],C0.prototype,"formData",void 0),(0,I.gn)([S.SB],C0.prototype,"previewValue",void 0),(0,I.gn)([S.SB],C0.prototype,"showPreview",void 0),(0,I.gn)([S.SB],C0.prototype,"previewBoxMaxRow",void 0),(0,I.gn)([S.SB],C0.prototype,"previewBoxMinRow",void 0),(0,I.gn)([S.SB],C0.prototype,"generateLoading",void 0),(0,I.gn)([tB.Fl],C0.prototype,"generateDisabled",null),(0,I.gn)([S.SB],C0.prototype,"addLoading",void 0),(0,I.gn)([tB.Fl],C0.prototype,"addDisabled",null),(0,I.gn)([S.SB],C0.prototype,"copied",void 0);let C1=S._Y.createComponent("TemplateDetail",C0,e=>((0,Q.useState)(()=>{e.props.template.optionList.forEach(t=>{e.formData[t.key]={value:""}})}),(0,y.jsxs)("div",{className:CX.templateDetail,ref:t=>{e.containerEl=t},children:[(0,y.jsxs)("div",{className:CX.templateContent,children:[(0,y.jsxs)("div",{className:CX.formGroupWrapper,children:[(0,y.jsx)("div",{className:CX.formGroup,children:e.props.template.optionList.map((t,i)=>{let o=e.formData[t.key];return(0,y.jsxs)("div",{className:CX.formItem,children:[(0,y.jsx)("div",{className:q()(CX.formItemTitle,{[CX.formItemTitleRequired]:t.required}),children:t.displayName}),(0,y.jsx)(tj.g,{value:o.value,onChange:e=>{o.value=e.target.value},autoSize:"short-text"===t.inputType?{minRows:1,maxRows:1}:{minRows:5,maxRows:5},className:CX.textarea,placeholder:t.placeholder,maxLength:t.maxLength,getTextAreaRef:t=>{var o;let a=null==t?void 0:null===(o=t.resizableTextArea)||void 0===o?void 0:o.textArea;a&&(e.textareaElements[i]=a)}}),t.recommendOptions&&t.recommendOptions.length>0?(0,y.jsx)("div",{className:CX.tagList,children:t.recommendOptions.map(e=>(0,y.jsx)("div",{className:q()(CX.tag),onClick:()=>{o.value+=o.value?"、".concat(e):e},children:e},e))}):null]},t.key)})}),(0,y.jsxs)(eO.z,{type:"primary",shape:"round",size:"large",className:CX.composeBtn,loading:e.generateLoading,disabled:e.generateDisabled,onClick:()=>e.handleClickGenerate(),children:[ei.S.Global.modules.MainWindow.WriteView.Template.TemplateDetail.generateDraft,(0,y.jsx)(Cr.p,{keys:["mod","enter"]})]})]}),e.showPreview?(0,y.jsxs)("div",{className:CX.previewWrapper,children:[(0,y.jsxs)("div",{className:CX.previewHeader,children:[(0,y.jsx)(t_.J,{name:"star",size:20}),(0,y.jsx)("div",{className:CX.previewTitle,children:ei.S.Global.modules.MainWindow.WriteView.Template.TemplateDetail.preview})]}),(0,y.jsx)("div",{className:CX.previewBox,children:(0,y.jsx)(ow.W,{placeholder:ei.S.Global.modules.MainWindow.WriteView.Template.TemplateDetail.textarea,value:e.previewValue,onChange:t=>{e.previewValue=t.target.value},rowsData:{min:e.previewBoxMinRow,max:e.previewBoxMaxRow},enableImproveWithAiButton:!e.generateLoading,onImproveWithAiButtonClick:e.handleImproveBtnClick.bind(e)})}),e.generateLoading?null:(0,y.jsxs)("div",{className:CX.previewOperations,children:[(0,y.jsx)(Cn.D,{text:e.previewValue}),(0,y.jsx)(eO.z,{className:CX.previewOperation,type:"gray",shape:"round",onClick:()=>{e.handleCopy()},children:e.copied?ei.S.Global.modules.MainWindow.WriteView.Template.TemplateDetail.copied:ei.S.Global.modules.MainWindow.WriteView.Template.TemplateDetail.copy})]})]}):null]}),(0,y.jsx)("div",{className:CX.footer,children:(0,y.jsx)(vt,{source:"template_detail",showGpt4:!0,gpt4Checked:P.A.composeGpt4Enabled,onGpt4Change:e=>{P.A.setComposeGpt4Enabled(e)},usageInfoProps:{usageModule:P.A.composeGpt4Enabled?"genius_bot":"basic_query"}})})]})));var C2=i(21665),C3={templateListWrapper:"template-list-wrapper--Kzr76",category:"category--dzwhU",templateList:"template-list--6lnu5",templateListItem:"template-list-item--D1pu0",left:"left--Xk7i5",right:"right--pfHPG",rightTitle:"right-title--DPqm_",rightDesc:"right-desc--YMoqK",searchEmpty:"search-empty--Xkezt",emptyContent:"empty-content--CO7Yi",emptyText:"empty-text--NbdRP",highlight:"highlight--v9krN"},C6=i(98278),C5=i.n(C6);class C4 extends S.PN{get templateList(){let e="all"===this.selectedCategoryKey?E.w.templates:E.w.templates.filter(e=>e.categoryList.some(e=>e.key===this.selectedCategoryKey));return this.keyword?C5().go(this.keyword,e,{keys:["name","desc"],scoreFn:e=>{let[t,i]=e;return(null==t?void 0:t.score)?t.score+1e4:(null==i?void 0:i.score)?i.score+1e3:-1e3}}).filter(e=>e.score>-1e3).map(e=>e.obj):e}get categoryList(){let e={};return E.w.templates.forEach(t=>{t.categoryList.forEach(t=>{e[t.key]||(e[t.key]={...t})})}),[{icon:"",name:"All",key:"all"},...Object.values(e)]}onViewCreate(){}onViewDestroy(){}handleFoldClick(){this.fold=!this.fold}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"keyword",""),(0,T._)(this,"selectedCategoryKey","all"),(0,T._)(this,"fold",!0)}}(0,I.gn)([S.SB],C4.prototype,"keyword",void 0),(0,I.gn)([S.SB],C4.prototype,"selectedCategoryKey",void 0),(0,I.gn)([S.SB],C4.prototype,"fold",void 0),(0,I.gn)([tB.Fl],C4.prototype,"templateList",null),(0,I.gn)([tB.Fl],C4.prototype,"categoryList",null);let C9=S._Y.createComponent("TemplateList",C4,e=>(0,y.jsxs)("div",{className:C3.templateListWrapper,style:{display:e.props.visible?"flex":"none"},children:[(0,y.jsx)(O.I,{value:e.keyword,onChange:t=>{e.keyword=t},placeholder:ei.S.Global.modules.MainWindow.WriteView.Template.TemplateList.search,autofocus:!0,type:"search"}),(0,y.jsx)("div",{className:C3.category,children:(0,y.jsx)(C2.H,{items:e.categoryList,value:e.selectedCategoryKey,onChange:t=>{e.selectedCategoryKey=t}})}),0===e.templateList.length?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:C3.searchEmpty,children:(0,y.jsxs)("div",{className:C3.emptyContent,children:[(0,y.jsx)(t_.J,{name:"templateSearchEmpty",size:144}),(0,y.jsx)("div",{className:C3.emptyText,children:ei.S.Global.modules.MainWindow.WriteView.Template.TemplateList.noTemplateFound})]})})}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:C3.templateList,children:e.templateList.map(t=>(0,y.jsxs)("div",{className:C3.templateListItem,onClick:()=>{e.keyword="",e.props.onSelectTemplate(t)},children:[(0,y.jsx)(te.E,{className:C3.left,src:t.icon,alt:""}),(0,y.jsxs)("div",{className:C3.right,children:[(0,y.jsx)("div",{className:C3.rightTitle,children:(0,y.jsx)(eu(),{textToHighlight:t.displayName,highlightClassName:C3.highlight,searchWords:[e.keyword]})}),(0,y.jsx)("div",{className:C3.rightDesc,children:(0,y.jsx)(eu(),{highlightClassName:C3.highlight,textToHighlight:t.desc,searchWords:[e.keyword]})})]})]},t.key))})})]}));class C7 extends S.PN{goBack(){this.selectedTemplate&&this.goTemplate()}goTemplate(){this.selectedTemplate=null}onViewCreate(){E.w.fetchTemplates()}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"selectedTemplate",null)}}(0,I.gn)([S.SB],C7.prototype,"selectedTemplate",void 0);let C8=S._Y.createComponent("Template",C7,e=>(0,y.jsxs)("div",{className:CZ.template,children:[(0,y.jsx)("div",{className:CZ.header,children:e.selectedTemplate?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:CZ.backBox,onClick:()=>{e.goBack()},children:(0,y.jsx)(t_.J,{name:"template-back",size:16,color:"currentColor"})}),(0,y.jsx)(tN.u,{overlayClassName:CZ.tooltip,title:e.selectedTemplate.displayName,children:e.selectedTemplate.displayName})]}):(0,y.jsx)("div",{className:q()({[CZ.breadcrumbItem]:e.selectedTemplate}),children:ei.S.Global.modules.MainWindow.WriteView.Template.template})}),(0,y.jsx)("div",{className:CZ.content,children:E.w.templatesLoading?(0,y.jsx)(eC.g,{fullScreen:!0}):(0,y.jsxs)(y.Fragment,{children:[e.selectedTemplate?(0,y.jsx)(C1,{template:e.selectedTemplate}):null,(0,y.jsx)(C9,{visible:!e.selectedTemplate,onSelectTemplate:t=>{e.selectedTemplate=t}})]})})]}));class xe extends S.PN{onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],xe.prototype,"someState",void 0);let xt=S._Y.createComponent("TemplateDrawer",xe,e=>(0,y.jsx)(t6.d,{onDispose:()=>{e.props.onDisposed()},visible:!0,hiddenHeader:!0,enableHorizontalStyle:!0,children:(0,y.jsxs)("div",{className:"template-drawer--PU987",children:[(0,y.jsx)(C8,{}),(0,y.jsx)("span",{onClick:()=>{e.props.onDisposed()},className:"drawer-close--vOeK6",children:(0,y.jsx)(t_.J,{size:24,color:"currentColor",name:"close"})})]})})),xi=H.t.createOpener(xt);class xo extends S.PN{get S(){return ei.S.Global.modules.MainWindow.WriteView}onViewCreate(){Co.S.init()}onViewDestroy(){Co.S.destroy()}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"someState",!0)}}(0,I.gn)([S.SB],xo.prototype,"someState",void 0),(0,I.gn)([tB.Fl],xo.prototype,"S",null);let xa=S._Y.createComponent("WriteView",xo,e=>(0,y.jsx)("div",{className:"write-view--xmtMJ",ref:e=>{Co.S.setContainer(e)},children:(0,y.jsxs)("div",{className:"view-inner--FVcpa",children:[(0,y.jsxs)("div",{className:"header--PDG8A",children:[(0,y.jsx)(e7.Q,{title:e.S.title,tabKey:"write"}),(0,y.jsx)(tN.u,{width:165,title:e.S.writingAgentDesc,placement:"bottom",children:(0,y.jsxs)("span",{className:"write-agent-entry-btn--f1iYk",onClick:()=>{eF.J.onTabChange("chat"),D.Mp.openRemoteBot(tX.tW.writingAgent)},children:[(0,y.jsx)(t_.J,{name:"chatInputReading",color:"var(--theme-icon-tertiary)",size:16}),e.S.writingAgent]})})]}),(0,y.jsxs)("div",{className:"tabs--a_boM",children:[(0,y.jsx)(vK.m,{tabsManager:Co.S.tabsManager,onChange:e=>{eL.M.createUserBehaviorEvent({eventName:"write_view_tab_change",extData:{key:e}})}}),(0,y.jsx)(tN.u,{title:e.S.template,children:(0,y.jsx)("span",{className:"template-entry-btn--xAjJs",onClick:()=>{xi({insertTarget:"mainWindow"})},children:(0,y.jsx)(t_.J,{name:"monicaTemplate",stroke:"currentColor",size:20})})})]}),"grammar"===Co.S.tabsManager.activeTabKey?(0,y.jsx)(Cq,{}):(0,y.jsx)(Cw,{})]})})),xn=S._Y.createComponent("MainWindow",gM,e=>e.resizableController.data?(0,y.jsxs)("div",{id:eh.o5.MainWindow,onMouseDown:t=>{e.resizableController.handleRootMouseDown(t)},className:q()(g_.mainWindow,e.props.className,{[g_.modeSidebarLeft]:E.w.isSidebarRenderLeft,[g_.mainWindowHide]:!e.props.visible}),style:"ext-side-panel"===f.o.entryType||"desktop-sidebar"===f.o.entryType?{width:"100vw",height:"100vh",position:"relative"}:{cursor:e.resizableController.cursor,width:e.resizableController.data.width},ref:t=>{e.resizableController.root=t,H.t.mainWindowEl=t,t&&e.props.onRendered&&!e.onRenderedCalled&&(e.props.onRendered(),e.onRenderedCalled=!0)},children:[(0,y.jsx)(gj,{}),eD.userController.authLoading?null:eD.userController.isLogin?(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:g_.navWindowWrapper,children:[(0,y.jsx)(Ci,{}),(0,y.jsxs)("div",{className:g_.childWrapper,children:[(0,y.jsx)(xr,{}),(0,y.jsx)(gN.$,{})]})]})}):(0,y.jsx)(gk.m,{source:"sidebar"}),(0,y.jsx)("div",{className:g_.dialogRoot,ref:e=>{H.t.setMainWindowDialogRoot(e)}})]}):null),xr=(0,F.Pi)(()=>(0,y.jsx)(y.Fragment,{children:eF.J.tabs.map(e=>{let t=null;if(!e.hasOpened)return null;let i=e.key===eF.J.activeTabKey||"chat"===e.key&&"artist"===eF.J.activeTabKey;return("chat"===e.key?t=(0,y.jsx)(rX,{}):"write"===e.key?t=(0,y.jsx)(xa,{}):"translate"===e.key?t=(0,y.jsx)(vP,{}):"memo"===e.key?t=(0,y.jsx)(uE,{},"memo"):"reading"===e.key?t=(0,y.jsx)(vQ,{}):"toolkit"===e.key?t=(0,y.jsx)(vX,{}):"bots"===e.key?t=(0,y.jsx)(eP.E,{source:"bots"}):"discover"===e.key?t=(0,y.jsx)(gb,{}):"image"===e.key?t=(0,y.jsx)(hJ,{}):"search"===e.key?t=(0,y.jsx)(r0,{}):"video"===e.key?t=(0,y.jsx)(h7,{}):"audio"===e.key&&(t=(0,y.jsx)(tg,{})),t)?(0,y.jsx)("div",{className:g_.viewWrapper,style:{display:i?"flex":"none"},children:t},e.key):null})}));var xs=i(99568),xl=i(52879),xc=i(83839);class xd extends S.PN{get S(){return ei.S.Global.modules.MainWindow.BotsTabView}get sidebarFolded(){return eF.J.homeSidebarCollapsed}get style(){return this.sidebarFolded?{width:0,opacity:0}:{width:f.o.isDesktop?250:264,opacity:1}}onViewCreate(){}onViewDestroy(){}constructor(...e){super(...e),(0,T._)(this,"props",void 0)}}(0,I.gn)([tB.Fl],xd.prototype,"S",null),(0,I.gn)([tB.Fl],xd.prototype,"sidebarFolded",null),(0,I.gn)([tB.Fl],xd.prototype,"style",null);let xp=S._Y.createComponent("BotsTabView",xd,e=>(0,y.jsxs)("div",{className:"bots-tab-view--agZxZ",children:[(0,y.jsx)("div",{className:"left-nav--MtomL",children:(0,y.jsx)("div",{className:"content-wrapper--Utnzx",style:e.style,children:(0,y.jsx)(eP.E,{source:"nav"})})}),(0,y.jsx)(xc.r,{scene:"homeView",className:"right-content--ifKL0",style:{"--padding-x":"20px"},panelClassName:"panel--t0NVo"})]}));var xm={horizontalView:"horizontal-view--u6fTl",desktop:"desktop--COhPj",desktopDraggableArea:"desktop-draggable-area--O6l6m",viewWrapper:"view-wrapper--vyAli",inner:"inner--CZRfx",windows:"windows--xCnNt",isChatTabPage:"is-chat-tab-page--zzMgq",hide:"hide--NSYwW",dialogRoot:"dialog-root--xpqBE"};class xh extends S.PN{get S(){return ei.S.Global.modules.MainWindow.HorizontalView}get style(){return f.o.isDesktop?{width:this.MINI_DEFAULT_NAV_SIZE}:{width:eF.J.homeSidebarCollapsed?this.MINI_DEFAULT_NAV_SIZE:this.MAX_DEFAULT_NAV_SIZE}}onSidebarFoldChange(){eL.M.createUserBehaviorEvent({eventName:"nav_bar_fold",extData:{fold:P.A.mainNavManuallyCollapsed}})}get isWin(){return"Windows"===w.m.getOsType()}async onViewCreate(){Promise.all([eD.userController.checkLogin()]).finally(async()=>{setTimeout(()=>{gf.E.run()})}),"web-home"!==f.o.entryType||await sq.P.getIsExtInstalled()||tV.ll.getUiFlag("homeViewInstallExtensionPanelClosed").then(e=>{this.installExtensionPanelVisible=!e}),r1.S.isRunInSsrProject&&tV.ll.set("locale",ei.a.locale),"chat"===eF.J.activeTabKey&&eF.J.createUserBehaviorEvent(eF.J.activeTabKey)}onViewDestroy(){tU.f.getProxy(this).disposeAll()}openOptionsPage(){tV.ll.openMonicaOptionsPage({menuKey:"sidebar"})}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"MINI_DEFAULT_NAV_SIZE",67),(0,T._)(this,"MAX_DEFAULT_NAV_SIZE",234),(0,T._)(this,"installExtensionPanelVisible",!1),(0,T._)(this,"onRenderedCalled",!1),(0,T._)(this,"isSidebarFold",!1)}}(0,I.gn)([S.SB],xh.prototype,"installExtensionPanelVisible",void 0),(0,I.gn)([S.SB],xh.prototype,"onRenderedCalled",void 0),(0,I.gn)([S.SB],xh.prototype,"isSidebarFold",void 0),(0,I.gn)([tB.Fl],xh.prototype,"S",null),(0,I.gn)([tB.Fl],xh.prototype,"style",null),(0,I.gn)([(0,S.YP)(()=>[P.A.mainNavManuallyCollapsed])],xh.prototype,"onSidebarFoldChange",null);let xg=S._Y.createComponent("HorizontalView",xh,e=>(0,y.jsxs)("div",{className:q()(xm.horizontalView,{[xm.hide]:!e.props.visible,[xm.windows]:e.isWin,[xm.desktop]:f.o.isDesktop,[xm.isChatTabPage]:"web-home"===f.o.entryType||"ext-chat-page"===f.o.entryType},e.props.className),ref:t=>{H.t.mainWindowEl=t,t&&e.props.onRendered&&!e.onRenderedCalled&&(e.props.onRendered(),e.onRenderedCalled=!0)},children:[f.o.isDesktop&&(0,y.jsx)("div",{className:xm.desktopDraggableArea}),(0,y.jsx)(gN.$,{}),(0,y.jsx)(xu,{}),(0,y.jsx)(Ci,{}),(0,y.jsx)(xs.F,{}),(0,y.jsx)(xl.c,{}),(0,y.jsx)("div",{className:xm.dialogRoot,ref:e=>{H.t.setMainWindowDialogRoot(e)}})]})),xu=(0,F.Pi)(()=>(0,y.jsx)(y.Fragment,{children:eF.J.tabs.map(e=>{let t=null;if(!e.hasOpened)return null;let i=e.key===eF.J.activeTabKey||"chat"===e.key&&"artist"===eF.J.activeTabKey;return("chat"===e.key?t=(0,y.jsx)(rX,{}):"write"===e.key?t=(0,y.jsx)(xa,{},"write"):"translate"===e.key?t=(0,y.jsx)(vP,{},"translateView"):"memo"===e.key?t=(0,y.jsx)(uE,{},"memo"):"reading"===e.key?t=(0,y.jsx)(vQ,{},"reading"):"toolkit"===e.key?t=(0,y.jsx)(vX,{},"toolkit"):"bots"===e.key?t="horizontal"===ex.L.mainWindowMode?(0,y.jsx)(xp,{}):(0,y.jsx)(eP.E,{source:"bots"}):"discover"===e.key?t=(0,y.jsx)(gb,{},"discover"):"image"===e.key?t=(0,y.jsx)(hJ,{}):"search"===e.key?t=(0,y.jsx)(r0,{}):"video"===e.key?t=(0,y.jsx)(h7,{}):"audio"===e.key&&(t=(0,y.jsx)(tg,{})),t)?(0,y.jsx)("div",{className:xm.viewWrapper,"data-key":e.key,style:{display:i?"flex":"none"},children:(0,y.jsx)("div",{className:q()(xm.inner),children:t})},e.key):null})}));var xv=i(77651),xC=i(21969),xx=i(4881),xy=i(82287),xb=i(26223);class xf extends S.PN{get S(){return xx.S.HomePage}get shouldShowGuest(){return!eD.userController.isLogin&&("index_page"!==this.source||k.abTestController.experiment.indexPageGuide.groupName===k.abTestController.experiment.indexPageGuideGroup.guestWebapp)}onBeforeMount(){var e;E.w.onAppViewCreated(),this.source=null===(e=w.m.getUrlParams())||void 0===e?void 0:e.source}async onViewCreate(){N.C.setCookieTheme();let e=aO.l.getPageParams();if(eD.userController.checkLogin().finally(async()=>{eD.userController.isLogin||w.m.deleteCacheOnHomePage(),e9.W.on("userLogout",()=>{w.m.deleteCacheOnHomePage()});let t=((null==e?void 0:e.tab)==="artist"||(null==e?void 0:e.tab)==="chat")&&e.botUid&&e.botUid!==tX.Z9.monica,i=t?e.botUid:"";if(t){if(!eD.userController.isLogin){location.href=w.m.getBotSharePageUrl(i);return}}else if(this.isMobile){location.href=eR.Cl.home;return}eD.userController.isLogin||(this.shouldShowGuest?new xy.n({type:"defaultAuth",channel:"guest_webapp"}).initSdk():location.href=ru.routerController.getLoginUrl())}),eL.M.createUserBehaviorEvent({eventName:"monica_web_page_show"}),this.listenerManager.addWindowEventListener("resize",()=>{this.isMobileWidth=this.checkIsMobileWidth()}),(null==e?void 0:e.action)&&e.from){let t=localStorage.getItem(xb.m.utm),i=await e9.W.getClientId();eL.M.createUserBehaviorEvent({eventName:"first_install_".concat(e.action,"_v2"),extData:{step:"2",from:e.from,utm:t,clientId:i,isAdsUser:eD.userController.isAdsUser,UserType:eD.userController.userType}})}if((null==e?void 0:e.tab)==="chat"&&"1"===e.isIncognitoMode){var t;P.A.setIncognitoMode(!0),null===(t=D.Mp.getActiveChatBotController())||void 0===t||t.newConversation();let e=new URL(r1.S.location.href).searchParams;e.delete("isIncognitoMode");let i="".concat(r1.S.location.pathname,"?").concat(e.toString());history.replaceState(null,"",i)}!function(){try{var e,t,i,o,a,n,r,s;let l={userAgent:{raw:navigator.userAgent,secUa:"userAgentData"in navigator?{brands:null===(e=navigator.userAgentData)||void 0===e?void 0:e.brands,mobile:null===(t=navigator.userAgentData)||void 0===t?void 0:t.mobile,platform:null===(i=navigator.userAgentData)||void 0===i?void 0:i.platform}:null},viewport:{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight,devicePixelRatio:window.devicePixelRatio},headers:{secChUa:getComputedStyle(document.documentElement).getPropertyValue("--sec-ch-ua")||null,secChUaMobile:getComputedStyle(document.documentElement).getPropertyValue("--sec-ch-ua-mobile")||null,secChUaPlatform:getComputedStyle(document.documentElement).getPropertyValue("--sec-ch-ua-platform")||null},browser:{platform:navigator.platform,language:navigator.language,languages:navigator.languages,cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,hardwareConcurrency:navigator.hardwareConcurrency,maxTouchPoints:navigator.maxTouchPoints},timing:{timestamp:Date.now(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timezoneOffset:new Date().getTimezoneOffset()},connection:"connection"in navigator?{effectiveType:null===(o=navigator.connection)||void 0===o?void 0:o.effectiveType,downlink:null===(a=navigator.connection)||void 0===a?void 0:a.downlink,rtt:null===(n=navigator.connection)||void 0===n?void 0:n.rtt,saveData:null===(r=navigator.connection)||void 0===r?void 0:r.saveData}:null,renderer:{webGL:(()=>{try{return!!document.createElement("canvas").getContext("webgl")}catch(e){return!1}})(),canvas:(()=>{try{let e=document.createElement("canvas");return{supported:!!e.getContext("2d"),imageRendering:getComputedStyle(e).imageRendering}}catch(e){return{supported:!1}}})()}};e9.W.createUserBehaviorEvent({eventName:"fpr",extData:{data:(s=JSON.stringify(l),btoa(String.fromCharCode(...new TextEncoder().encode(s))))}})}catch(e){console.error(e)}}()}onViewDestroy(){this.listenerManager.removeAll()}checkIsMobileWidth(){return!r1.S.isRunInServerSide&&window.innerWidth<700}constructor(...e){super(...e),(0,T._)(this,"props",void 0),(0,T._)(this,"isMobileWidth",!1),(0,T._)(this,"isMobile",w.m.getIsMobile()),(0,T._)(this,"listenerManager",new L.M),(0,T._)(this,"source","")}}(0,I.gn)([S.SB],xf.prototype,"isMobileWidth",void 0),(0,I.gn)([S.SB],xf.prototype,"isMobile",void 0),(0,I.gn)([tB.Fl],xf.prototype,"S",null),(0,I.gn)([tB.Fl],xf.prototype,"shouldShowGuest",null);var xw=i(14749);f.o.setEntryType("web-home");let xS=S._Y.createComponent("HomePage",xf,e=>((0,b.Y)(e.props.locale,e.props.translations),(0,j.Q)(),k.abTestController.experiment.initClientCid(e.props.cid),xv.U.getInited())?(0,y.jsx)(_.x,{children:(0,y.jsxs)("div",{className:q()("home-page--uXn3m",{...N.C.getThemeClassNames()}),children:[(0,y.jsx)(eE,{}),eD.userController.isLogin?(0,y.jsx)(xA,{vm:e}):e.shouldShowGuest?(0,y.jsx)(xC.e,{isGuest:!0}):(0,y.jsx)(y.Fragment,{}),(0,y.jsx)(A.K,{})]})}):(0,y.jsx)(xw.O,{isDark:N.C.isDark})),xA=(0,F.Pi)(function(e){let{vm:t}=e;return w.m.getIsMobile()?(0,y.jsx)(xn,{visible:!0}):(0,y.jsx)(xg,{visible:!0})});var xj=xS},21969:function(e,t,i){"use strict";i.d(t,{e:function(){return eg}});var o=i(71576),a=i(60445),n=i(92235),r=i(34491),s=i(46731),l=i(53040),c=i(75372),d=i(70820),p=i(19051),m=i(20995),h=i(69645),g=i(26025),u=i(3222),v=i(87875),C=i(58812),x=i(66084);class y extends r.PN{constructor(...e){super(...e),(0,x._)(this,"props",void 0)}}var b=JSON.parse('{"fill":"none","content":"\\n<g id=\\"question-mark\\">\\n<path id=\\"Backup\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8.54876 0.733887C4.54648 0.733887 1.33085 4.06696 1.33085 8.1424C1.33085 8.7708 1.45869 9.33365 1.58005 9.83124L1.61433 9.9712C1.72572 10.4249 1.82213 10.8176 1.85128 11.234C1.86064 11.3675 1.83425 11.5554 1.7664 11.8041C1.70549 12.0274 1.6235 12.2581 1.5366 12.5027L1.51101 12.5748C1.42097 12.8287 1.32006 13.1171 1.2696 13.3739C1.24398 13.5043 1.22479 13.6569 1.23722 13.8128C1.2498 13.9707 1.29817 14.1692 1.44251 14.3443C1.60978 14.5472 1.83576 14.6175 1.98147 14.6454C2.13712 14.6752 2.29893 14.6752 2.44264 14.6657C2.7322 14.6465 3.06484 14.5794 3.37185 14.5058C3.92613 14.373 4.11902 14.3293 4.22384 14.3225C4.34628 14.3146 4.36671 14.3143 4.38306 14.3151C4.39941 14.3159 4.41971 14.3181 4.5408 14.338C4.57246 14.3432 4.66323 14.3665 4.87301 14.4351C5.07084 14.4997 5.3392 14.5924 5.70688 14.7194C6.57162 15.0182 7.62912 15.2672 8.27099 15.2672C12.3294 15.2672 15.7667 12.276 15.7667 8.1424C15.7667 4.06697 12.5511 0.733887 8.54876 0.733887ZM2.53085 8.1424C2.53085 4.69736 5.24111 1.93389 8.54876 1.93389C11.8564 1.93389 14.5667 4.69736 14.5667 8.1424C14.5667 11.5293 11.7539 14.0672 8.27099 14.0672C7.83189 14.0672 6.92617 13.8711 6.09878 13.5852L6.0924 13.583C5.73216 13.4586 5.45431 13.3626 5.24572 13.2944C5.04786 13.2298 4.87161 13.1762 4.73473 13.1537L4.72038 13.1514C4.6255 13.1358 4.53559 13.1211 4.44153 13.1165C4.34748 13.1119 4.25656 13.1178 4.16062 13.1241L4.14609 13.125C3.92319 13.1395 3.61757 13.2128 3.17235 13.3196L3.0922 13.3389C2.85995 13.3945 2.65196 13.436 2.4832 13.4567C2.51982 13.3258 2.57397 13.1677 2.64202 12.9758L2.66871 12.9007L2.66871 12.9007C2.75311 12.6634 2.85055 12.3895 2.92409 12.1199C3.00453 11.825 3.07172 11.4838 3.04835 11.1501C3.01157 10.6249 2.88986 10.1313 2.78148 9.69181L2.74588 9.54691C2.62599 9.05536 2.53085 8.61451 2.53085 8.1424ZM8.49999 4.27555C7.31138 4.27555 6.33749 5.23107 6.33749 6.42243C6.33749 6.7538 6.60612 7.02243 6.93749 7.02243C7.26886 7.02243 7.53749 6.7538 7.53749 6.42243C7.53749 5.90516 7.96272 5.47555 8.49999 5.47555C9.03726 5.47555 9.46249 5.90516 9.46249 6.42243C9.46249 6.72354 9.32009 6.99328 9.09278 7.16848C8.86362 7.34512 8.57596 7.5774 8.34565 7.85942C8.11276 8.14459 7.89999 8.52743 7.89999 9.00055C7.89999 9.33192 8.16862 9.60055 8.49999 9.60055C8.83136 9.60055 9.09999 9.33192 9.09999 9.00055C9.09999 8.90413 9.14122 8.78239 9.2751 8.61845C9.41156 8.45135 9.60344 8.28998 9.82537 8.11891C10.3325 7.72803 10.6625 7.11416 10.6625 6.42243C10.6625 5.23107 9.68861 4.27555 8.49999 4.27555ZM9.12499 10.8756C9.12499 11.2207 8.84517 11.5006 8.49999 11.5006C8.15482 11.5006 7.87499 11.2207 7.87499 10.8756C7.87499 10.5304 8.15482 10.2506 8.49999 10.2506C8.84517 10.2506 9.12499 10.5304 9.12499 10.8756Z\\" fill=\\"#55555D\\"/>\\n<path id=\\"Vector\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M8.5487 0.733887C4.54642 0.733887 1.33079 4.06696 1.33079 8.1424C1.33079 8.7708 1.45863 9.33365 1.57999 9.83124L1.61427 9.9712C1.72566 10.4249 1.82207 10.8176 1.85122 11.234C1.86058 11.3675 1.83418 11.5554 1.76634 11.8041C1.70543 12.0274 1.62344 12.2581 1.53654 12.5027L1.51095 12.5748C1.42091 12.8287 1.32 13.1171 1.26954 13.3739C1.24392 13.5043 1.22473 13.6569 1.23716 13.8128C1.24974 13.9708 1.29811 14.1692 1.44245 14.3443C1.60972 14.5472 1.8357 14.6175 1.98141 14.6454C2.13706 14.6752 2.29887 14.6752 2.44257 14.6657C2.73214 14.6465 3.06478 14.5794 3.37179 14.5058C3.92607 14.373 4.11896 14.3293 4.22377 14.3225C4.34622 14.3146 4.36665 14.3143 4.383 14.3151C4.39934 14.3159 4.41964 14.3181 4.54074 14.338C4.5724 14.3432 4.66317 14.3665 4.87295 14.4351C5.07078 14.4997 5.33914 14.5924 5.70682 14.7194C6.57156 15.0182 7.62905 15.2672 8.27093 15.2672C12.3293 15.2672 15.7666 12.276 15.7666 8.1424C15.7666 4.06697 12.551 0.733887 8.5487 0.733887ZM2.53079 8.1424C2.53079 4.69736 5.24105 1.93389 8.5487 1.93389C11.8564 1.93389 14.5666 4.69736 14.5666 8.1424C14.5666 11.5293 11.7539 14.0672 8.27093 14.0672C7.83183 14.0672 6.92611 13.8711 6.09872 13.5852L6.09248 13.5831L6.09243 13.5831C5.73215 13.4586 5.45426 13.3626 5.24566 13.2944C5.0478 13.2298 4.87155 13.1762 4.73467 13.1537L4.72033 13.1514L4.72031 13.1514C4.62544 13.1358 4.53552 13.1211 4.44147 13.1165C4.34741 13.1119 4.25649 13.1178 4.16055 13.1241L4.14603 13.125C3.92314 13.1395 3.61754 13.2128 3.17236 13.3196L3.17232 13.3196L3.09214 13.3389C2.85989 13.3945 2.6519 13.436 2.48314 13.4567C2.51976 13.3258 2.57391 13.1677 2.64195 12.9758L2.66865 12.9007L2.66866 12.9007C2.75305 12.6634 2.85049 12.3895 2.92403 12.1199C3.00447 11.825 3.07166 11.4838 3.04829 11.1501C3.01151 10.6249 2.8898 10.1313 2.78142 9.69181C2.76934 9.64283 2.75743 9.59452 2.74581 9.54691C2.62593 9.05537 2.53079 8.61451 2.53079 8.1424ZM8.49993 4.27555C7.31132 4.27555 6.33743 5.23107 6.33743 6.42243C6.33743 6.7538 6.60606 7.02243 6.93743 7.02243C7.2688 7.02243 7.53743 6.7538 7.53743 6.42243C7.53743 5.90516 7.96266 5.47555 8.49993 5.47555C9.0372 5.47555 9.46243 5.90516 9.46243 6.42243C9.46243 6.72354 9.32003 6.99328 9.09272 7.16848C8.86356 7.34512 8.5759 7.5774 8.34559 7.85942C8.1127 8.14459 7.89993 8.52743 7.89993 9.00055C7.89993 9.33192 8.16856 9.60055 8.49993 9.60055C8.8313 9.60055 9.09993 9.33192 9.09993 9.00055C9.09993 8.90413 9.14116 8.78239 9.27504 8.61845C9.4115 8.45135 9.60338 8.28998 9.82531 8.11892C10.3324 7.72803 10.6624 7.11416 10.6624 6.42243C10.6624 5.23107 9.68855 4.27555 8.49993 4.27555ZM9.12493 10.8756C9.12493 11.2207 8.84511 11.5006 8.49993 11.5006C8.15476 11.5006 7.87493 11.2207 7.87493 10.8756C7.87493 10.5304 8.15476 10.2506 8.49993 10.2506C8.84511 10.2506 9.12493 10.5304 9.12493 10.8756Z\\" fill=\\"#55555D\\"/>\\n</g>\\n\\n","viewBox":"0 0 17 16"}');let f=r._Y.createComponent("QuestionMarkIcon",y,e=>(0,o.jsx)(C.s,{...e.props,name:"QuestionMarkIcon",iconData:b}));var w=i(29921),S=i(72515),A=i(5857),j=i(57774),k=i(37231),N=i(14084),_=i(48023),T=i(63134),I=i(87393),M=i(78826),L=i(18312),B=i(43368),E=i(23326),D=i(8294),P=i(27982),F=i(92020),R=i(78716),V=i.n(R),U=i(62499),z=i(14749),O={chat:"chat--Q0uee",nav:"nav--ds4L4",sidebarHeader:"sidebar-header--wY7ZK",sidebarHeaderTitle:"sidebar-header-title--kl0Nk",sidebarContent:"sidebar-content--Gktoe",navList:"nav-list--tzvEZ",navListGroup:"nav-list-group--vEyAS",navItem:"nav-item--IYg80",icon:"icon--yfVyR",text:"text--CsGG2",active:"active--FDz5p",divider:"divider--RaSIJ",navFooter:"nav-footer--iIE0W",botsNav:"bots-nav--fNcQ6",botItem:"bot-item--bENni",name:"name--dhKkF",content:"content--fm08_",header:"header--I0Sje",loginBtn:"login-btn--cXMxD",scroll:"scroll--Qw823",main:"main--fJbmc",welcome:"welcome--KHh_7",entryGroup:"entry-group--_d9E_",largeView:"large-view--AzPhW",footer:"footer--Dl59W",footerFeatures:"footer-features--pR3Ok",chatBox:"chat-box--Acek4",input:"input--I9pXr",actions:"actions--vgA9o",send:"send--wUTOt",light:"light--e45zf",toolbar:"toolbar--U0kSf",modelSwitcher:"model-switcher--nMLIb",knowledgeSwitcher:"knowledge-switcher--kXnf9",labelWrapper:"label-wrapper--u4sZ1",labelIcon:"label-icon--nT24P",labelArrow:"label-arrow--RJkvc",labelArrowFlipped:"label-arrow-flipped--MdV7J",labelArrowWrapper:"label-arrow-wrapper--yWnSC",baseList:"base-list--gZdLJ",modelHeader:"model-header--ZJ58C",title:"title--nQi_W",modelBody:"model-body--mA1C5",modelItem:"model-item--ztcNu",checkbox:"checkbox--EUlYg",skillBtn:"skill-btn--NVwC2",skillBtnFilled:"skill-btn-filled--Nc1Wn",skillBtnText:"skill-btn-text--fOliZ",skillToolbarPreviewRender:"skill-toolbar-preview-render--cBebi",skillList:"skill-list--EWJGR",mainNavListPopoverContent:"main-nav-list-popover-content--htOEB",category:"category--P79pj",categoryTitle:"category-title--nsHb_",categoryDesc:"category-desc--VqHOR",toolList:"tool-list--pdLuF",toolItem:"tool-item--GXkWX",tool:"tool--GQnvs",draggable:"draggable--_XmLc",extIcon:"ext-icon--yIqiS"},W=i(52921),H=i(4881),G=i(92660),Q=i(4461),J=i(92217),q=i(91433),K=i(11502),Y=i(93270),Z=i(88882),X=i(22810),$=i(37067),ee=i(77099),et=i(43714),ei=i(68104),eo=i(66952),ea=i(9408),en=i(38569),er=i(82005),es=i(73047);class el extends r.PN{get S(){return H.S.Landing.Chat.GoogleSignUpDialog}onViewCreate(){K.M.createUserBehaviorEvent({eventName:"chat_landing_page_sign_up_alert_show",extData:{utm:this.getUtm()}})}onViewDestroy(){}getUtm(){return M.routerController.params.utm||localStorage.getItem(G.storageKeys.utm)||""}getRedirectUrl(){var e,t;return ee.l.createPageParamsUrl({tab:"chat",q:null===(t=this.props)||void 0===t?void 0:null===(e=t.params)||void 0===e?void 0:e.text,source:"landing_chat"},"home")}constructor(...e){super(...e),(0,x._)(this,"props",void 0),(0,x._)(this,"someState",!0)}}(0,W.gn)([r.SB],el.prototype,"someState",void 0),(0,W.gn)([es.Fl],el.prototype,"S",null);let ec=r._Y.createComponent("GoogleSignUpDialog",el,e=>(0,o.jsxs)(ei.u,{className:"google-sign-up-dialog--ITvTn",onDispose:e.props.onDisposed,fixed:"dialogRoot"===e.props.insertTarget,width:540,children:[(0,o.jsx)(eo.T,{showTitle:!1,className:"logo--AN_gP",size:48}),(0,o.jsx)(ed,{vm:e}),(0,o.jsx)(ep,{vm:e})]})),ed=(0,U.Pi)(function(e){let{vm:t}=e;return(0,o.jsxs)("div",{className:"content--woxT4",children:[(0,o.jsx)("div",{className:"title--D9GLq",children:t.S.title}),(0,o.jsx)("div",{className:"desc--lT6b5",children:t.S.desc})]})}),ep=(0,U.Pi)(function(e){let{vm:t}=e;return(0,o.jsxs)("div",{className:"footer--D7Kco",children:[(0,o.jsx)(en.e,{type:"primary",redirectTo:t.getRedirectUrl(),onClick:()=>{K.M.createUserBehaviorEvent({eventName:"chat_landing_page_sign_up_alert_click",extData:{source:"landing_chat",utm:t.getUtm()}})}}),(0,o.jsx)(ea.w,{hideIcon:!0})]})}),em=er.t.createOpener(ec);class eh extends r.PN{get showedSkills(){return this.skills.slice(0,this.remainWidthEnough?this.renderCount+1:this.renderCount)}get S(){return H.S.Landing.Chat}get bots(){return[{name:"Monica",uid:q.Z9.monica,logo:(0,Q.Q)(Y.Z)},{name:"GPT-4o",logo:"https://assets.monica.im/assets/img/apps_avatar/gpt-4.png",uid:"gpt_4_o_chat"},{name:"Claude 3.5 Sonnet",logo:"https://assets.monica.im/assets/img/apps_avatar/claude-star-100x100.png",uid:"claude_3.5_sonnet"},{name:"o1-preview",logo:"https://assets.monica.im/assets/img/apps_avatar/openai-o1-v2.png",uid:"openai_o_1"},{name:"o1-mini",logo:"https://assets.monica.im/assets/img/apps_avatar/openai-o1-v2.png",uid:"openai_o_1_mini"},{name:"GPT-4o mini",logo:"https://assets.monica.im/assets/img/apps_avatar/gpt-3.5.png",uid:"gpt_4_o_mini_chat"},{name:"Gemini 1.5 Pro",logo:"https://assets.monica.im/assets/img/gemini.png",uid:"gemini_1_5"},{name:"Llama 3.1 405B",logo:"https://assets.monica.im/assets/png/llama_3.1_405b.png",uid:"llama_3_1_405b"},{name:"Llama 3.1 70B Ultra-Fast",logo:"https://assets.monica.im/assets/img/llama-70b.png",uid:"llama_3_1_70b_versatile"},{name:"GPT-4",logo:"https://assets.monica.im/assets/img/apps_avatar/gpt-4.png",uid:"gpt_4_chat"},{name:"DALL\xb7E 3",logo:"https://assets.monica.im/assets/img/apps_avatar/dall3_chat.jpeg",uid:"dall_e_3_chat"}]}get contentFeatures(){let e=Z.S.Global.modules.ChatBox.ChatHomeView.tabGroup;return[{name:e.artist,key:"artist",link:a.oo.imageTool},{name:e.search,key:"search",link:X.q.getMonicaSoOrigin()},{key:"chatPdf",name:e.pdf,link:a.Cl.docChat},{key:"mindmap",name:e.mindmap,link:a.oo.aiMindMapMaker},{key:"uploadFiles",name:e.uploadFiles},{key:"write",name:e.write}]}get skills(){let e=Z.S.Global.modules.ChatBox.ChatSkill.SkillToolbar;return[{name:e.search,icon:"searchTool",type:"search"},{name:e.artifact,icon:"artifactsLine",type:"artifacts"},{name:e.read,icon:"sChat",type:"read_web"},{name:e.genDocument,icon:"genDocument",type:"gen_document"},{name:e.mindMapGenerator,icon:"lineFeatureDataStream",type:"mind_map"},{name:e.translate,icon:"translate",type:"translate"},{name:e.write,icon:"a58",type:"writing"},{name:e.paint,icon:"artistIcon",type:"draw"},{name:e.dataAnalysis,icon:"dataAnalysis",type:"code_interpreter"}]}get models(){return[{name:"GPT-4o",key:"gpt_4o",iconUrl:"https://assets.monica.im/assets/png/gpt.png",description:this.S.Models.gpt4oDesc,capabilities:["tools","read_image","memory"]},{name:"Claude 3.5 Sonnet",key:"claude_3.5_sonnet",iconUrl:"https://assets.monica.im/assets/img/apps_avatar/claude-star-100x100.png",description:this.S.Models.claudeDesc,capabilities:["tools","read_image","memory"]},{name:"o1-preview",key:"openai_o_1",iconUrl:"https://assets.monica.im/assets/png/gpt.png",description:this.S.Models.o1PreviewDesc,capabilities:[]},{name:"o1-mini",key:"openai_o_1_mini",iconUrl:"https://assets.monica.im/assets/png/gpt.png",description:this.S.Models.o1MiniDesc,capabilities:[]},{name:"Gemini 1.5 Pro",key:"gemini_1.5_pro",iconUrl:"https://assets.monica.im/assets/png/gemini.png",description:this.S.Models.geminiDesc,capabilities:[]},{name:"Llama 3.1 405B",key:"Llama 3.1 405b",iconUrl:"https://assets.monica.im/assets/png/llama_3.1_405b.png",description:this.S.Models.llamaDesc,capabilities:[]}]}get knowledges(){return[{name:this.S.Knowledge.web,key:"web",iconUrl:"https://assets.monica.im/assets/png/web_unselect.png",selectIconUrl:"https://assets.monica.im/assets/png/web_select.png",description:this.S.Knowledge.webDesc},{name:this.S.Knowledge.news,key:"news",iconUrl:"https://assets.monica.im/assets/png/news_unselect.png",selectIconUrl:"https://assets.monica.im/assets/png/news_select.png",description:this.S.Knowledge.newsDesc},{name:this.S.Knowledge.academic,key:"academic",iconUrl:"https://assets.monica.im/assets/png/academic_unselect.png",selectIconUrl:"https://assets.monica.im/assets/png/academic_select.png",description:this.S.Knowledge.academicDesc},{name:this.S.Knowledge.developer,key:"developer",iconUrl:"https://assets.monica.im/assets/png/developer_unselect.png",selectIconUrl:"https://assets.monica.im/assets/png/developer_select.png",description:this.S.Knowledge.developerDesc},{name:this.S.Knowledge.memo,key:"my_memo",iconUrl:"https://assets.monica.im/assets/png/memo_unselect.png",selectIconUrl:"https://assets.monica.im/assets/png/meme_select.png",description:this.S.Knowledge.memoDesc}]}get settingMenus(){return[{icon:"bookmark",type:"learningCenter",name:()=>Z.S.Global.controllers.mainWindowController.learningCenter,onClick:()=>{window.open(n.m.genFullUrl(n.m.genUrl(a.Cl.learningCenter)))}}]}onViewCreate(){L.J._viewType="large",this.props.isGuest&&n.m.getIsMobile()&&(location.href=a.Cl.home),(0,et.Ns)().then(()=>{this.createUserBehaviorEvent("pageShow")}),this.calcSkillsRenderCount(),this.toolListEl&&(this.rootResizeObserver=new ResizeObserver(e=>{e[0].target===this.toolListEl&&this.calcSkillsRenderCount()}),this.rootResizeObserver.observe(this.toolListEl),this.rootMutationObserver=new MutationObserver(()=>{this.calcSkillsRenderCount()}),this.rootMutationObserver.observe(this.toolListEl,{characterData:!0,childList:!0,subtree:!0})),this.updateIsLargeView(),$.I.getProxy(this,window).addEventListener("resize",()=>{this.updateIsLargeView()})}onViewDestroy(){var e,t;null===(e=this.rootMutationObserver)||void 0===e||e.disconnect(),null===(t=this.rootResizeObserver)||void 0===t||t.disconnect(),$.I.getProxy(this,window).removeAllListeners()}getUtm(){return M.routerController.params.utm||localStorage.getItem(G.storageKeys.utm)}onSign(){let e=this.value.trim();if(this.props.isGuest){let t=ee.l.createPageParamsUrl({tab:"chat",q:e,source:"guest_page"},"home");(0,J.B)({insertTarget:"dialogRoot",redirectTo:t})}else em({insertTarget:"dialogRoot",params:{text:e}})}createUserBehaviorEvent(e){let t={pageShow:this.props.isGuest?"guest_page_show":"chat_landing_page_show"}[e];t&&K.M.createUserBehaviorEvent({eventName:t,extData:this.props.isGuest?{utm:this.getUtm()}:void 0})}calcSkillsRenderCount(){if(!this.toolListEl)return;let e=this.toolListEl.getBoundingClientRect().width;if(0===e)return;let t=Array.from(this.toolListEl.children).map(e=>e.getBoundingClientRect()),i=0,o=0;for(let a=0;a<t.length;a++){let n=t[a].width+(0===a?0:8);if(i+n>e)break;i+=n,o++}e-i-8-38-6<16?this.remainWidthEnough=!1:this.remainWidthEnough=o!==this.skills.length,this.renderCount=o}updateIsLargeView(){this.mainEl&&(this.isLargeView=this.mainEl.clientWidth>=768)}constructor(...e){super(...e),(0,x._)(this,"props",void 0),(0,x._)(this,"defaultModel","gpt_4o"),(0,x._)(this,"defaultKnowledge","web"),(0,x._)(this,"toolListEl",null),(0,x._)(this,"mainEl",null),(0,x._)(this,"value",""),(0,x._)(this,"modelSwitcherPopoverVisible",!1),(0,x._)(this,"knowledgeSwitcherPopoverVisible",!1),(0,x._)(this,"renderCount",2),(0,x._)(this,"remainWidthEnough",!1),(0,x._)(this,"isLargeView",!0),(0,x._)(this,"rootResizeObserver",null),(0,x._)(this,"rootMutationObserver",null)}}(0,W.gn)([r.SB],eh.prototype,"value",void 0),(0,W.gn)([r.SB],eh.prototype,"modelSwitcherPopoverVisible",void 0),(0,W.gn)([r.SB],eh.prototype,"knowledgeSwitcherPopoverVisible",void 0),(0,W.gn)([r.SB],eh.prototype,"renderCount",void 0),(0,W.gn)([r.SB],eh.prototype,"remainWidthEnough",void 0),(0,W.gn)([r.SB],eh.prototype,"isLargeView",void 0),(0,W.gn)([r.Fl],eh.prototype,"showedSkills",null),(0,W.gn)([r.Fl],eh.prototype,"S",null),(0,W.gn)([r.Fl],eh.prototype,"contentFeatures",null),(0,W.gn)([r.Fl],eh.prototype,"skills",null),(0,W.gn)([r.Fl],eh.prototype,"models",null),(0,W.gn)([r.Fl],eh.prototype,"knowledges",null),(0,W.gn)([r.Fl],eh.prototype,"settingMenus",null);let eg=r._Y.createComponent("Chat",eh,e=>e.props.isGuest&&n.m.getIsMobile()?(0,o.jsx)(z.O,{isDark:I.C.isDark}):(0,o.jsxs)("div",{className:O.chat,children:[(0,o.jsx)(eu,{vm:e}),(0,o.jsx)(ev,{vm:e}),(0,o.jsxs)("div",{className:O.content,children:[(0,o.jsx)(eC,{vm:e}),(0,o.jsx)("div",{className:O.scroll,children:(0,o.jsx)(ex,{vm:e})}),(0,o.jsx)(ey,{vm:e})]})]})),eu=(0,U.Pi)(function(e){let{vm:t}=e,i=L.J.popularToolList.find(e=>"in_app"===e.jumpType&&"memo"===e.jumpLink);return(0,o.jsxs)("div",{className:O.nav,children:[(0,o.jsx)("header",{className:O.sidebarHeader,children:(0,o.jsx)("div",{className:O.sidebarHeaderTitle,children:(0,o.jsx)(s.J,{name:"monicaPrd",color:"var(--theme-text-primary)",size:{width:85,height:32}})})}),(0,o.jsx)("div",{className:O.sidebarContent,children:(0,o.jsx)("div",{className:O.navList,children:(0,o.jsxs)("div",{className:O.navListGroup,children:[L.J.topNavItems.map((e,i)=>{let{key:a,title:n,icon:r,iconDark:s}=e;return(0,o.jsxs)("div",{className:V()(O.navItem,{[O.active]:0===i}),onClick:()=>{t.onSign()},children:[(0,o.jsx)("div",{className:O.icon,children:(0,o.jsx)(l.E,{src:I.C.isDark&&s?s:r})}),(0,o.jsx)("span",{className:O.text,children:n})]},a)}),(0,o.jsx)("div",{className:O.divider}),i&&(0,o.jsxs)("div",{className:V()(O.navItem),onClick:()=>{t.onSign()},children:[(0,o.jsx)("div",{className:O.icon,children:(0,o.jsx)(l.E,{src:I.C.isDark&&i.iconDark?i.iconDark:i.icon})}),(0,o.jsx)("span",{className:O.text,children:i.title})]}),(0,o.jsx)(c.x,{closeAfterContentClick:!0,content:(0,o.jsx)(ef,{vm:t}),trigger:"hover",placement:"right",children:(0,o.jsxs)("div",{className:V()(O.navItem),onClick:()=>{t.onSign()},children:[(0,o.jsx)("div",{className:O.icon,children:(0,o.jsx)(d.w,{size:16,color:"var(--theme-icon-primary)"})}),(0,o.jsx)("span",{className:O.text,children:t.S.more})]})})]})})}),(0,o.jsxs)("div",{className:O.navFooter,children:[(0,o.jsx)(p.U,{size:16,button:!0,color:"var(--theme-icon-tertiary)",title:t.S.officialWebsite,placement:"topRight",onClick:()=>{location.href="".concat(a.Cl.home,"?index")}}),(0,o.jsx)(c.x,{content:(0,o.jsxs)(m.h,{width:170,children:[(0,o.jsx)(h.X,{content:t.S.helpCenter,icon:(0,o.jsx)(g.B,{size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{window.open(n.m.getHelpCenterPageUrl({},"/FAQs/common_question"),"_blank")}}),(0,o.jsx)(h.X,{icon:(0,o.jsx)(u.c,{size:16,color:"var(--theme-icon-tertiary)",onClick:()=>{t.onSign()}}),content:t.S.whatsNew,onClick:()=>{t.onSign()}}),(0,o.jsx)(h.X,{icon:(0,o.jsx)(s.J,{name:"mailRound",size:16,color:"var(--theme-icon-tertiary)"}),onClick:()=>{F.ll.openMonicaOptionsPage({menuKey:"contactUs"})},content:t.S.contactUs}),(0,o.jsx)(h.X,{icon:(0,o.jsx)(v.X,{size:16,color:"var(--theme-icon-tertiary)"}),content:t.S.learningCenter,onClick:()=>{window.open(n.m.genFullUrl(n.m.genUrl(a.Cl.learningCenter)))}})]}),placement:"top",trigger:"hover",closeAfterContentClick:!0,children:(0,o.jsx)("span",{style:{display:"flex"},children:(0,o.jsx)(f,{color:"var(--theme-icon-tertiary)",size:16,button:!0})})}),(0,o.jsx)(w.O,{button:!0,size:16,color:"var(--theme-icon-tertiary)",title:t.S.settings,onClick:()=>{t.onSign()}}),(0,o.jsx)(S.N,{button:!0,size:16,color:"var(--theme-icon-tertiary)",onClick:()=>{t.onSign()}})]})]})}),ev=(0,U.Pi)(function(e){let{vm:t}=e;return(0,o.jsx)("div",{className:O.botsNav,children:t.bots.map(e=>{let{uid:i,name:a,logo:n}=e;return(0,o.jsxs)("div",{className:O.botItem,onClick:()=>{t.onSign()},children:[(0,o.jsx)(B.k,{src:n,size:24}),(0,o.jsx)("span",{className:O.text,children:a})]},i)})})}),eC=(0,U.Pi)(function(e){let{vm:t}=e;return(0,o.jsxs)("header",{className:O.header,children:[(0,o.jsx)("a",{href:n.m.genFullUrl(M.routerController.getLoginUrl({redirectTo:n.m.genFullUrl(a.Cl.monicaWeb)})),children:(0,o.jsx)(A.z,{className:O.loginBtn,size:"medium",type:"outline",color:"primary",children:t.S.signIn})}),(0,o.jsx)("a",{href:n.m.genFullUrl(M.routerController.getSignUpUrl(n.m.genFullUrl(a.Cl.monicaWeb))),children:(0,o.jsx)(A.z,{className:O.loginBtn,type:"primary",size:"medium",children:t.S.signUp})})]})}),ex=(0,U.Pi)(function(e){let{vm:t}=e;return(0,o.jsxs)("div",{className:O.main,ref:e=>{t.mainEl=e},children:[(0,o.jsx)("div",{className:O.welcome,children:t.S.welcome}),(0,o.jsxs)("div",{className:V()(O.entryGroup,{[O.largeView]:t.isLargeView}),children:[(0,o.jsx)(D.m,{isPreviewMode:!0,onItemClick:e=>{e.preventDefault(),t.onSign()}}),(0,o.jsx)(E.W,{isPreviewMode:!0,onItemClick:e=>{e.preventDefault(),t.onSign()}})]})]})}),ey=(0,U.Pi)(function(e){let{vm:t}=e;return(0,o.jsxs)("div",{className:O.footer,children:[(0,o.jsxs)("div",{className:O.footerFeatures,children:[(0,o.jsxs)("div",{style:{display:"flex",gap:8},children:[t.showedSkills.map((e,i)=>(0,o.jsx)(eb,{lastBtn:t.showedSkills.length===i+1,icon:e.icon,text:e.name,onClick:()=>{t.onSign()}},e.name)),(0,o.jsx)(c.x,{trigger:"click",placement:"topRight",closeAfterContentClick:!0,content:(0,o.jsx)(m.h,{width:200,maxListHeight:420,children:t.skills.map(e=>{let{name:i,icon:a}=e;return(0,o.jsx)(h.X,{content:i,icon:a,onClick:()=>{t.onSign()}},i)})}),children:(0,o.jsx)(eb,{icon:"chatInputV2More",text:t.S.more})})]}),(0,o.jsxs)("div",{className:O.skillToolbarPreviewRender,children:[(0,o.jsx)("div",{className:V()(O.skillList),ref:e=>{t.toolListEl=e},children:t.skills.map(e=>(0,o.jsx)(eb,{icon:e.icon,text:e.name},e.name))}),(0,o.jsx)(eb,{icon:"chatInputV2More",text:t.S.more})]})]}),(0,o.jsx)(eS,{vm:t})]})}),eb=(0,U.Pi)(e=>(0,o.jsxs)("div",{className:V()(O.skillBtn,{[O.skillBtnFilled]:e.lastBtn}),onClick:t=>{var i;null===(i=e.onClick)||void 0===i||i.call(e,t)},title:e.text,children:[(0,o.jsx)(s.J,{name:e.icon,size:16,color:"currentColor"}),(0,o.jsx)("span",{className:O.skillBtnText,children:e.text})]})),ef=(0,U.Pi)(function(e){let{vm:t}=e,i=L.J.popularToolList.find(e=>"in_app"===e.jumpType&&"memo"===e.jumpLink),a=i?[i]:[];return(0,o.jsxs)("div",{className:O.mainNavListPopoverContent,children:[(0,o.jsxs)("div",{className:O.category,children:[(0,o.jsx)("div",{className:O.categoryTitle,children:t.S.pinnedTools}),(0,o.jsx)("p",{className:O.categoryDesc,children:t.S.pinnedToolsDesc}),a.length>0&&(0,o.jsx)("div",{className:O.toolList,children:a.map(e=>(0,o.jsx)(ew,{draggable:!0,vm:t,tool:e},e.key))})]}),(0,o.jsxs)("div",{className:O.category,children:[(0,o.jsx)("div",{className:O.categoryTitle,children:t.S.allTools}),(0,o.jsx)("p",{className:O.categoryDesc,children:t.S.allToolsDesc}),(0,o.jsx)("div",{className:O.toolList,children:L.J.popularToolList.filter(e=>"full_page"!==e.key).map(e=>(0,o.jsx)(ew,{vm:t,tool:e},e.key))})]})]})}),ew=(0,U.Pi)(function(e){let{tool:t,draggable:i,vm:a}=e;return(0,o.jsx)("div",{className:V()(O.toolItem),children:(0,o.jsxs)(P.p,{className:V()(O.tool,{[O.draggable]:i}),data:t,onItemClick:e=>{e.preventDefault(),a.onSign()},children:[(0,o.jsx)("div",{className:O.icon,children:(0,o.jsx)(l.E,{skeleton:!0,src:I.C.isDark&&t.iconDark?t.iconDark:t.icon})}),(0,o.jsx)("p",{children:t.title}),"browser"===t.jumpType&&(0,o.jsx)(j.F,{className:O.extIcon,size:14,color:"var(--theme-icon-quaternary)"})]})})}),eS=(0,U.Pi)(function(e){let{vm:t}=e;return(0,o.jsxs)("div",{className:O.chatBox,children:[(0,o.jsx)(k.I,{className:O.input,value:t.value,originInputProps:{autoFocus:!0},placeholder:t.S.askMeAnything,onChange:e=>{t.value=e},onEnterWithoutCtrl:()=>{t.onSign()}}),(0,o.jsx)("div",{className:O.actions,children:(0,o.jsx)("div",{className:V()(O.send,{[O.light]:!!t.value}),onClick:()=>{t.value&&t.onSign()},children:(0,o.jsx)(s.J,{name:"chatInputSend",color:"currentColor",size:20})})}),(0,o.jsxs)("div",{className:O.toolbar,children:[(0,o.jsx)(eA,{vm:t}),(0,o.jsx)(ej,{vm:t})]})]})}),eA=(0,U.Pi)(function(e){let{vm:t}=e;return(0,o.jsxs)("div",{className:O.modelSwitcher,children:[(0,o.jsx)(c.x,{destroyTooltipOnHide:!0,placement:"top",content:(0,o.jsx)(ek,{vm:t,list:t.models,title:t.S.modelTitle}),open:t.modelSwitcherPopoverVisible,closeAfterContentClick:!0,trigger:"hover",onOpenChange:()=>{t.modelSwitcherPopoverVisible=!t.modelSwitcherPopoverVisible},children:(0,o.jsxs)("div",{className:O.labelWrapper,children:[(0,o.jsx)(s.J,{name:"monicaMembership",size:14}),(0,o.jsx)("span",{children:"GPT-4o"}),(0,o.jsx)("span",{className:O.labelArrowWrapper,children:(0,o.jsx)(s.J,{name:"quickActionDown",className:V()(t.modelSwitcherPopoverVisible?O.labelArrowFlipped:O.labelArrow),size:10})})]})}),(0,o.jsx)(N.r,{enabled:!1,onChange:()=>{t.onSign()},size:"small"})]})}),ej=(0,U.Pi)(function(e){let{vm:t}=e,i=t.knowledges.find(e=>e.key===t.defaultKnowledge);return(0,o.jsxs)("div",{className:O.knowledgeSwitcher,children:[(0,o.jsx)(c.x,{destroyTooltipOnHide:!0,placement:"top",content:(0,o.jsx)(ek,{vm:t,list:t.knowledges,title:t.S.knowledgeTitle,isKnowledgeSwitcher:!0}),open:t.knowledgeSwitcherPopoverVisible,closeAfterContentClick:!0,trigger:"hover",onOpenChange:()=>{t.knowledgeSwitcherPopoverVisible=!t.knowledgeSwitcherPopoverVisible},children:(0,o.jsxs)("div",{className:O.labelWrapper,children:[(0,o.jsx)(l.E,{skeleton:!0,width:14,height:14,className:O.labelIcon,src:null==i?void 0:i.selectIconUrl}),(0,o.jsx)("span",{children:t.S.Knowledge.web}),(0,o.jsx)("span",{className:O.labelArrowWrapper,children:(0,o.jsx)(s.J,{name:"quickActionDown",className:V()(t.knowledgeSwitcherPopoverVisible?O.labelArrowFlipped:O.labelArrow),size:10})})]})}),(0,o.jsx)(N.r,{enabled:!1,onChange:()=>{t.onSign()},size:"small"})]})}),ek=(0,U.Pi)(function(e){let{vm:t,list:i,title:a,isKnowledgeSwitcher:n}=e;return(0,o.jsxs)("div",{className:O.baseList,children:[(0,o.jsx)("header",{className:O.modelHeader,children:(0,o.jsxs)("h3",{className:O.title,children:[(0,o.jsx)(s.J,{name:"monicaMembership",size:18}),a]})}),(0,o.jsx)("ol",{className:O.modelBody,children:i.map(e=>(0,o.jsx)("li",{onClick:()=>{t.onSign()},children:n?(0,o.jsxs)("div",{className:V()(O.modelItem),children:[(0,o.jsx)("div",{className:O.icon,children:(0,o.jsx)(l.E,{skeleton:!0,src:e.iconUrl})}),(0,o.jsxs)("div",{className:O.text,children:[(0,o.jsxs)("h4",{children:[(0,o.jsx)("div",{className:O.name,children:(0,o.jsx)("span",{children:e.name})}),(0,o.jsx)(T.n,{className:O.checkbox,size:20})]}),(0,o.jsx)("div",{children:e.description})]})]}):(0,o.jsx)(_.u,{title:e.description,placement:"right",width:160,children:(0,o.jsxs)("div",{className:V()(O.modelItem),children:[(0,o.jsx)("div",{className:O.icon,children:(0,o.jsx)(l.E,{skeleton:!0,src:e.iconUrl})}),(0,o.jsx)("div",{className:O.text,children:(0,o.jsxs)("h4",{children:[(0,o.jsx)("div",{className:O.name,children:(0,o.jsx)("span",{children:e.name})}),(0,o.jsx)(T.n,{className:O.checkbox,size:20})]})})]})})},e.key))})]})})}},function(e){e.O(0,[7516,8979,9507,9013,4742,8337,5449,7379,2753,8079,2395,5527,7972,205,5217,3989,6740,9441,6777,6031,2354,9629,1308,1782,2650,7324,2247,2421,158,1200,2186,3892,2335,6731,519,6933,4604,1161,9875,5015,8260,5762,7399,4788,5910,1086,1417,9192,3966,1082,3839,3700,700,1744],function(){return e(e.s=1560)}),_N_E=e.O()}]);